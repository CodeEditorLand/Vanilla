var lF=Object.defineProperty;var dF=Object.getOwnPropertyDescriptor;var k=(o,e,t,n)=>{for(var i=n>1?void 0:n?dF(e,t):e,r=o.length-1,s;r>=0;r--)(s=o[r])&&(i=(n?s(e,t,i):s(i))||i);return n&&i&&lF(e,t,i),i},I=(o,e)=>(t,n)=>e(t,n,o);function hx(){return globalThis._VSCODE_NLS_MESSAGES}function lh(){return globalThis._VSCODE_NLS_LANGUAGE}var cF=lh()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function ff(o,e){let t;return e.length===0?t=o:t=o.replace(/\{(\d+)\}/g,(n,i)=>{let r=i[0],s=e[r],a=n;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),cF&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),t}function c(o,e,...t){return ff(typeof o=="number"?ZD(o,e):e,t)}function ZD(o,e){let t=hx()?.[o];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${o} !!!`)}return t}function ue(o,e,...t){let n;typeof o=="number"?n=ZD(o,e):n=e;let i=ff(n,t);return{value:i,original:e===n?i:ff(e,t)}}function bf(o,e){let t=o;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}var xe=window;function mx(o){return o===xe?!1:typeof o?.vscodeWindowId=="number"}function JD(o,e){let t=uF(o,e);if(t!==-1)return o[t]}function uF(o,e,t=o.length-1){for(let n=t;n>=0;n--){let i=o[n];if(e(i))return n}return-1}function gx(o,e){let t=dh(o,e);return t===-1?void 0:o[t]}function dh(o,e,t=0,n=o.length){let i=t,r=n;for(;i<r;){let s=Math.floor((i+r)/2);e(o[s])?i=s+1:r=s}return i-1}function vf(o,e,t=0,n=o.length){let i=t,r=n;for(;i<r;){let s=Math.floor((i+r)/2);e(o[s])?r=s:i=s+1}return i}var fx=class{unexpectedErrorHandler;listeners;constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?us.isErrorNoTelemetry(e)?new us(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},e_=new fx;function Uc(o){e_.onUnexpectedError(o)}function bt(o){t_(o)||e_.onUnexpectedError(o)}var bx="Canceled";function t_(o){return o instanceof Gi?!0:o instanceof Error&&o.name===bx&&o.message===bx}var Gi=class extends Error{constructor(){super(bx),this.name=this.message}};function gd(o){return o?new Error(`Illegal argument: ${o}`):new Error("Illegal argument")}function n_(o){return o?new Error(`Illegal state: ${o}`):new Error("Illegal state")}function If(o){return o?o.message?o.message:o.stack?o.stack.split(`
`)[0]:String(o):"Error"}var yf=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}};var us=class o extends Error{name;constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof o)return e;let t=new o;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},ut=class o extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,o.prototype)}};function oo(o,e=0){return o[o.length-(1+e)]}function Wn(o,e,t=(n,i)=>n===i){if(o===e)return!0;if(!o||!e||o.length!==e.length)return!1;for(let n=0,i=o.length;n<i;n++)if(!t(o[n],e[n]))return!1;return!0}function i_(o,e){let t=o.length-1;e<t&&(o[e]=o[t]),o.pop()}function o_(o,e,t){return hF(o.length,n=>t(o[n],e))}function hF(o,e){let t=0,n=o-1;for(;t<=n;){let i=(t+n)/2|0,r=e(i);if(r<0)t=i+1;else if(r>0)n=i-1;else return i}return-(t+1)}function An(o){return o.filter(e=>!!e)}function vx(o){let e=0;for(let t=0;t<o.length;t++)o[t]&&(o[e]=o[t],e+=1);o.length=e}function ra(o,e=t=>t){let t=new Set;return o.filter(n=>{let i=e(n);return t.has(i)?!1:(t.add(i),!0)})}function mi(o,e){let t=typeof e=="number"?o:0;typeof e=="number"?t=o:(t=0,e=o);let n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function Sf(o,e){return o.push(e),()=>mF(o,e)}function mF(o,e){let t=o.indexOf(e);if(t>-1)return o.splice(t,1),e}function Ja(o,e,t){let n=o.slice(0,e),i=o.slice(e);return n.concat(t,i)}function xf(o,e){let t=o.indexOf(e);t>-1&&(o.splice(t,1),o.unshift(e))}function ch(o,e){let t=o.indexOf(e);t>-1&&(o.splice(t,1),o.push(e))}function yx(o,e){for(let t of e)o.push(t)}var r_;(a=>{function o(l){return l<0}a.isLessThan=o;function e(l){return l<=0}a.isLessThanOrEqual=e;function t(l){return l>0}a.isGreaterThan=t;function n(l){return l===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(r_||={});function Ix(o,e){return(t,n)=>e(o(t),o(n))}var fd=class{constructor(e){this.items=e}firstIdx=0;lastIdx=this.items.length-1;get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}},oa=class o{constructor(e){this.iterate=e}static empty=new o(e=>{});forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new o(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new o(t=>this.iterate(n=>t(e(n))))}some(e){let t=!1;return this.iterate(n=>(t=e(n),!t)),t}findFirst(e){let t;return this.iterate(n=>e(n)?(t=n,!1):!0),t}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(i=>((n||r_.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0)),t}};function s_(o,e){let t=new Set;for(let n of e)o.has(n)&&t.add(n);return t}var zc="en",hh=!1,mh=!1,ph=!1,gF=!1,c_=!1,xx=!1,fF=!1,Ex=!1,bF=!1,u_=!1,uh,Ef=zc,a_=zc,vF,sa,aa=globalThis,Vo;typeof aa.vscode<"u"&&typeof aa.vscode.process<"u"?Vo=aa.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Vo=process);var p_=typeof Vo?.versions?.electron=="string",yF=p_&&Vo?.type==="renderer";if(typeof Vo=="object"){hh=Vo.platform==="win32",mh=Vo.platform==="darwin",ph=Vo.platform==="linux",gF=ph&&!!Vo.env.SNAP&&!!Vo.env.SNAP_REVISION,fF=p_,bF=!!Vo.env.CI||!!Vo.env.BUILD_ARTIFACTSTAGINGDIRECTORY,uh=zc,Ef=zc;let o=Vo.env.VSCODE_NLS_CONFIG;if(o)try{let e=JSON.parse(o);uh=e.userLocale,a_=e.osLocale,Ef=e.resolvedLanguage||zc,vF=e.languagePack?.translationsConfigFile}catch{}c_=!0}else typeof navigator=="object"&&!yF?(sa=navigator.userAgent,hh=sa.indexOf("Windows")>=0,mh=sa.indexOf("Macintosh")>=0,Ex=(sa.indexOf("Macintosh")>=0||sa.indexOf("iPad")>=0||sa.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,ph=sa.indexOf("Linux")>=0,u_=sa?.indexOf("Mobi")>=0,xx=!0,Ef=lh()||zc,uh=navigator.language.toLowerCase(),a_=uh):console.error("Unable to resolve platform.");var Sx=0;mh?Sx=1:hh?Sx=3:ph&&(Sx=2);var St=hh,Fe=mh,Kt=ph;var wr=c_;var Cn=xx,IF=xx&&typeof aa.importScripts=="function",h_=IF?aa.origin:void 0,el=Ex,m_=u_;var hs=sa,ps=Ef,Cf;(n=>{function o(){return ps}n.value=o;function e(){return ps.length===2?ps==="en":ps.length>=3?ps[0]==="e"&&ps[1]==="n"&&ps[2]==="-":!1}n.isDefaultVariant=e;function t(){return ps==="en"}n.isDefault=t})(Cf||={});var g_=uh;var SF=typeof aa.postMessage=="function"&&!aa.importScripts,wf=(()=>{if(SF){let o=[];aa.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=o.length;n<i;n++){let r=o[n];if(r.id===t.data.vscodeScheduleAsyncWork){o.splice(n,1),r.callback();return}}});let e=0;return t=>{let n=++e;o.push({id:n,callback:t}),aa.postMessage({vscodeScheduleAsyncWork:n},"*")}}return o=>setTimeout(o)})();var ms=mh||Ex?2:hh?1:3,l_=!0,d_=!1;function f_(){if(!d_){d_=!0;let o=new Uint8Array(2);o[0]=1,o[1]=2,l_=new Uint16Array(o.buffer)[0]===513}return l_}var Cx=!!(hs&&hs.indexOf("Chrome")>=0),Tf=!!(hs&&hs.indexOf("Firefox")>=0),b_=!!(!Cx&&hs&&hs.indexOf("Safari")>=0),v_=!!(hs&&hs.indexOf("Edg/")>=0),vH=!!(hs&&hs.indexOf("Android")>=0);var bd,wx=globalThis.vscode;if(typeof wx<"u"&&typeof wx.process<"u"){let o=wx.process;bd={get platform(){return o.platform},get arch(){return o.arch},get env(){return o.env},cwd(){return o.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?bd={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:bd={get platform(){return St?"win32":Fe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var gh=bd.cwd,la=bd.env,Tx=bd.platform,xF=bd.arch;var CF=65,wF=97,TF=90,kF=122,il=46,gi=47,Eo=92,tl=58,DF=63,kf=class extends Error{code;constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";let r=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${r} ${i} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function _F(o,e){if(o===null||typeof o!="object")throw new kf(e,"Object",o)}function wn(o,e){if(typeof o!="string")throw new kf(e,"string",o)}var Co=Tx==="win32";function mt(o){return o===gi||o===Eo}function kx(o){return o===gi}function nl(o){return o>=CF&&o<=TF||o>=wF&&o<=kF}function Df(o,e,t,n){let i="",r=0,s=-1,a=0,l=0;for(let d=0;d<=o.length;++d){if(d<o.length)l=o.charCodeAt(d);else{if(n(l))break;l=gi}if(n(l)){if(!(s===d-1||a===1))if(a===2){if(i.length<2||r!==2||i.charCodeAt(i.length-1)!==il||i.charCodeAt(i.length-2)!==il){if(i.length>2){let u=i.lastIndexOf(t);u===-1?(i="",r=0):(i=i.slice(0,u),r=i.length-1-i.lastIndexOf(t)),s=d,a=0;continue}else if(i.length!==0){i="",r=0,s=d,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",r=2)}else i.length>0?i+=`${t}${o.slice(s+1,d)}`:i=o.slice(s+1,d),r=d-s-1;s=d,a=0}else l===il&&a!==-1?++a:a=-1}return i}function LF(o){return o?`${o[0]==="."?"":"."}${o}`:""}function y_(o,e){_F(e,"pathObject");let t=e.dir||e.root,n=e.base||`${e.name||""}${LF(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${o}${n}`:n}var pn={resolve(...o){let e="",t="",n=!1;for(let i=o.length-1;i>=-1;i--){let r;if(i>=0){if(r=o[i],wn(r,`paths[${i}]`),r.length===0)continue}else e.length===0?r=gh():(r=la[`=${e}`]||gh(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===Eo)&&(r=`${e}\\`));let s=r.length,a=0,l="",d=!1,u=r.charCodeAt(0);if(s===1)mt(u)&&(a=1,d=!0);else if(mt(u))if(d=!0,mt(r.charCodeAt(1))){let p=2,h=p;for(;p<s&&!mt(r.charCodeAt(p));)p++;if(p<s&&p!==h){let m=r.slice(h,p);for(h=p;p<s&&mt(r.charCodeAt(p));)p++;if(p<s&&p!==h){for(h=p;p<s&&!mt(r.charCodeAt(p));)p++;(p===s||p!==h)&&(l=`\\\\${m}\\${r.slice(h,p)}`,a=p)}}}else a=1;else nl(u)&&r.charCodeAt(1)===tl&&(l=r.slice(0,2),a=2,s>2&&mt(r.charCodeAt(2))&&(d=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=Df(t,!n,"\\",mt),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(o){wn(o,"path");let e=o.length;if(e===0)return".";let t=0,n,i=!1,r=o.charCodeAt(0);if(e===1)return kx(r)?"\\":o;if(mt(r))if(i=!0,mt(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!mt(o.charCodeAt(a));)a++;if(a<e&&a!==l){let d=o.slice(l,a);for(l=a;a<e&&mt(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!mt(o.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${o.slice(l)}\\`;a!==l&&(n=`\\\\${d}\\${o.slice(l,a)}`,t=a)}}}else t=1;else nl(r)&&o.charCodeAt(1)===tl&&(n=o.slice(0,2),t=2,e>2&&mt(o.charCodeAt(2))&&(i=!0,t=3));let s=t<e?Df(o.slice(t),!i,"\\",mt):"";return s.length===0&&!i&&(s="."),s.length>0&&mt(o.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(o){wn(o,"path");let e=o.length;if(e===0)return!1;let t=o.charCodeAt(0);return mt(t)||e>2&&nl(t)&&o.charCodeAt(1)===tl&&mt(o.charCodeAt(2))},join(...o){if(o.length===0)return".";let e,t;for(let r=0;r<o.length;++r){let s=o[r];wn(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&mt(t.charCodeAt(0))){++i;let r=t.length;r>1&&mt(t.charCodeAt(1))&&(++i,r>2&&(mt(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&mt(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return pn.normalize(e)},relative(o,e){if(wn(o,"from"),wn(e,"to"),o===e)return"";let t=pn.resolve(o),n=pn.resolve(e);if(t===n||(o=t.toLowerCase(),e=n.toLowerCase(),o===e))return"";let i=0;for(;i<o.length&&o.charCodeAt(i)===Eo;)i++;let r=o.length;for(;r-1>i&&o.charCodeAt(r-1)===Eo;)r--;let s=r-i,a=0;for(;a<e.length&&e.charCodeAt(a)===Eo;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Eo;)l--;let d=l-a,u=s<d?s:d,p=-1,h=0;for(;h<u;h++){let g=o.charCodeAt(i+h);if(g!==e.charCodeAt(a+h))break;g===Eo&&(p=h)}if(h!==u){if(p===-1)return n}else{if(d>u){if(e.charCodeAt(a+h)===Eo)return n.slice(a+h+1);if(h===2)return n.slice(a+h)}s>u&&(o.charCodeAt(i+h)===Eo?p=h:h===2&&(p=3)),p===-1&&(p=0)}let m="";for(h=i+p+1;h<=r;++h)(h===r||o.charCodeAt(h)===Eo)&&(m+=m.length===0?"..":"\\..");return a+=p,m.length>0?`${m}${n.slice(a,l)}`:(n.charCodeAt(a)===Eo&&++a,n.slice(a,l))},toNamespacedPath(o){if(typeof o!="string"||o.length===0)return o;let e=pn.resolve(o);if(e.length<=2)return o;if(e.charCodeAt(0)===Eo){if(e.charCodeAt(1)===Eo){let t=e.charCodeAt(2);if(t!==DF&&t!==il)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(nl(e.charCodeAt(0))&&e.charCodeAt(1)===tl&&e.charCodeAt(2)===Eo)return`\\\\?\\${e}`;return o},dirname(o){wn(o,"path");let e=o.length;if(e===0)return".";let t=-1,n=0,i=o.charCodeAt(0);if(e===1)return mt(i)?o:".";if(mt(i)){if(t=n=1,mt(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!mt(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&mt(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!mt(o.charCodeAt(a));)a++;if(a===e)return o;a!==l&&(t=n=a+1)}}}}else nl(i)&&o.charCodeAt(1)===tl&&(t=e>2&&mt(o.charCodeAt(2))?3:2,n=t);let r=-1,s=!0;for(let a=e-1;a>=n;--a)if(mt(o.charCodeAt(a))){if(!s){r=a;break}}else s=!1;if(r===-1){if(t===-1)return".";r=t}return o.slice(0,r)},basename(o,e){e!==void 0&&wn(e,"suffix"),wn(o,"path");let t=0,n=-1,i=!0,r;if(o.length>=2&&nl(o.charCodeAt(0))&&o.charCodeAt(1)===tl&&(t=2),e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let s=e.length-1,a=-1;for(r=o.length-1;r>=t;--r){let l=o.charCodeAt(r);if(mt(l)){if(!i){t=r+1;break}}else a===-1&&(i=!1,a=r+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=r):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=o.length),o.slice(t,n)}for(r=o.length-1;r>=t;--r)if(mt(o.charCodeAt(r))){if(!i){t=r+1;break}}else n===-1&&(i=!1,n=r+1);return n===-1?"":o.slice(t,n)},extname(o){wn(o,"path");let e=0,t=-1,n=0,i=-1,r=!0,s=0;o.length>=2&&o.charCodeAt(1)===tl&&nl(o.charCodeAt(0))&&(e=n=2);for(let a=o.length-1;a>=e;--a){let l=o.charCodeAt(a);if(mt(l)){if(!r){n=a+1;break}continue}i===-1&&(r=!1,i=a+1),l===il?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===n+1?"":o.slice(t,i)},format:y_.bind(null,"\\"),parse(o){wn(o,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;let t=o.length,n=0,i=o.charCodeAt(0);if(t===1)return mt(i)?(e.root=e.dir=o,e):(e.base=e.name=o,e);if(mt(i)){if(n=1,mt(o.charCodeAt(1))){let p=2,h=p;for(;p<t&&!mt(o.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&mt(o.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&!mt(o.charCodeAt(p));)p++;p===t?n=p:p!==h&&(n=p+1)}}}}else if(nl(i)&&o.charCodeAt(1)===tl){if(t<=2)return e.root=e.dir=o,e;if(n=2,mt(o.charCodeAt(2))){if(t===3)return e.root=e.dir=o,e;n=3}}n>0&&(e.root=o.slice(0,n));let r=-1,s=n,a=-1,l=!0,d=o.length-1,u=0;for(;d>=n;--d){if(i=o.charCodeAt(d),mt(i)){if(!l){s=d+1;break}continue}a===-1&&(l=!1,a=d+1),i===il?r===-1?r=d:u!==1&&(u=1):r!==-1&&(u=-1)}return a!==-1&&(r===-1||u===0||u===1&&r===a-1&&r===s+1?e.base=e.name=o.slice(s,a):(e.name=o.slice(s,r),e.base=o.slice(s,a),e.ext=o.slice(r,a))),s>0&&s!==n?e.dir=o.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},RF=(()=>{if(Co){let o=/\\/g;return()=>{let e=gh().replace(o,"/");return e.slice(e.indexOf("/"))}}return()=>gh()})(),rt={resolve(...o){let e="",t=!1;for(let n=o.length-1;n>=-1&&!t;n--){let i=n>=0?o[n]:RF();wn(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===gi)}return e=Df(e,!t,"/",kx),t?`/${e}`:e.length>0?e:"."},normalize(o){if(wn(o,"path"),o.length===0)return".";let e=o.charCodeAt(0)===gi,t=o.charCodeAt(o.length-1)===gi;return o=Df(o,!e,"/",kx),o.length===0?e?"/":t?"./":".":(t&&(o+="/"),e?`/${o}`:o)},isAbsolute(o){return wn(o,"path"),o.length>0&&o.charCodeAt(0)===gi},join(...o){if(o.length===0)return".";let e;for(let t=0;t<o.length;++t){let n=o[t];wn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":rt.normalize(e)},relative(o,e){if(wn(o,"from"),wn(e,"to"),o===e||(o=rt.resolve(o),e=rt.resolve(e),o===e))return"";let t=1,n=o.length,i=n-t,r=1,s=e.length-r,a=i<s?i:s,l=-1,d=0;for(;d<a;d++){let p=o.charCodeAt(t+d);if(p!==e.charCodeAt(r+d))break;p===gi&&(l=d)}if(d===a)if(s>a){if(e.charCodeAt(r+d)===gi)return e.slice(r+d+1);if(d===0)return e.slice(r+d)}else i>a&&(o.charCodeAt(t+d)===gi?l=d:d===0&&(l=0));let u="";for(d=t+l+1;d<=n;++d)(d===n||o.charCodeAt(d)===gi)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(r+l)}`},toNamespacedPath(o){return o},dirname(o){if(wn(o,"path"),o.length===0)return".";let e=o.charCodeAt(0)===gi,t=-1,n=!0;for(let i=o.length-1;i>=1;--i)if(o.charCodeAt(i)===gi){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":o.slice(0,t)},basename(o,e){e!==void 0&&wn(e,"ext"),wn(o,"path");let t=0,n=-1,i=!0,r;if(e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let s=e.length-1,a=-1;for(r=o.length-1;r>=0;--r){let l=o.charCodeAt(r);if(l===gi){if(!i){t=r+1;break}}else a===-1&&(i=!1,a=r+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=r):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=o.length),o.slice(t,n)}for(r=o.length-1;r>=0;--r)if(o.charCodeAt(r)===gi){if(!i){t=r+1;break}}else n===-1&&(i=!1,n=r+1);return n===-1?"":o.slice(t,n)},extname(o){wn(o,"path");let e=-1,t=0,n=-1,i=!0,r=0;for(let s=o.length-1;s>=0;--s){let a=o.charCodeAt(s);if(a===gi){if(!i){t=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===il?e===-1?e=s:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":o.slice(e,n)},format:y_.bind(null,"/"),parse(o){wn(o,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;let t=o.charCodeAt(0)===gi,n;t?(e.root="/",n=1):n=0;let i=-1,r=0,s=-1,a=!0,l=o.length-1,d=0;for(;l>=n;--l){let u=o.charCodeAt(l);if(u===gi){if(!a){r=l+1;break}continue}s===-1&&(a=!1,s=l+1),u===il?i===-1?i=l:d!==1&&(d=1):i!==-1&&(d=-1)}if(s!==-1){let u=r===0&&t?1:r;i===-1||d===0||d===1&&i===s-1&&i===r+1?e.base=e.name=o.slice(u,s):(e.name=o.slice(u,i),e.base=o.slice(u,s),e.ext=o.slice(i,s))}return r>0?e.dir=o.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};rt.win32=pn.win32=pn;rt.posix=pn.posix=rt;var gs=Co?pn.normalize:rt.normalize,ol=Co?pn.isAbsolute:rt.isAbsolute,so=Co?pn.join:rt.join,Hc=Co?pn.resolve:rt.resolve,I_=Co?pn.relative:rt.relative,Kc=Co?pn.dirname:rt.dirname,rl=Co?pn.basename:rt.basename,vd=Co?pn.extname:rt.extname,SH=Co?pn.format:rt.format,S_=Co?pn.parse:rt.parse,xH=Co?pn.toNamespacedPath:rt.toNamespacedPath,ao=Co?pn.sep:rt.sep,EH=Co?pn.delimiter:rt.delimiter;var OF=/^\w[\w\d+.-]*$/,PF=/^\//,MF=/^\/\//;function NF(o,e){if(!o.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${o.authority}", path: "${o.path}", query: "${o.query}", fragment: "${o.fragment}"}`);if(o.scheme&&!OF.test(o.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(o.path){if(o.authority){if(!PF.test(o.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(MF.test(o.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function FF(o,e){return!o&&!e?"file":o}function BF(o,e){switch(o){case"https":case"http":case"file":e?e[0]!==Tr&&(e=Tr+e):e=Tr;break}return e}var sn="",Tr="/",VF=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,j=class o{static isUri(e){return e instanceof o?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,t,n,i,r,s=!1){typeof e=="object"?(this.scheme=e.scheme||sn,this.authority=e.authority||sn,this.path=e.path||sn,this.query=e.query||sn,this.fragment=e.fragment||sn):(this.scheme=FF(e,s),this.authority=t||sn,this.path=BF(this.scheme,n||sn),this.query=i||sn,this.fragment=r||sn,NF(this,s))}get fsPath(){return fh(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:r,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=sn),n===void 0?n=this.authority:n===null&&(n=sn),i===void 0?i=this.path:i===null&&(i=sn),r===void 0?r=this.query:r===null&&(r=sn),s===void 0?s=this.fragment:s===null&&(s=sn),t===this.scheme&&n===this.authority&&i===this.path&&r===this.query&&s===this.fragment?this:new sl(t,n,i,r,s)}static parse(e,t=!1){let n=VF.exec(e);return n?new sl(n[2]||sn,_f(n[4]||sn),_f(n[5]||sn),_f(n[7]||sn),_f(n[9]||sn),t):new sl(sn,sn,sn,sn,sn)}static file(e){let t=sn;if(St&&(e=e.replace(/\\/g,Tr)),e[0]===Tr&&e[1]===Tr){let n=e.indexOf(Tr,2);n===-1?(t=e.substring(2),e=Tr):(t=e.substring(2,n),e=e.substring(n)||Tr)}return new sl("file",t,e,sn,sn)}static from(e,t){return new sl(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return St&&e.scheme==="file"?n=o.file(pn.join(fh(e,!0),...t)).path:n=rt.join(e.path,...t),e.with({path:n})}toString(e=!1){return _x(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof o)return e;{let t=new sl(e);return t._formatted=e.external??null,t._fsPath=e._sep===C_?e.fsPath??null:null,t}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var C_=St?1:void 0,sl=class extends j{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=fh(this,!1)),this._fsPath}toString(e=!1){return e?_x(this,!0):(this._formatted||(this._formatted=_x(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=C_),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},w_={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function x_(o,e,t){let n,i=-1;for(let r=0;r<o.length;r++){let s=o.charCodeAt(r);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||t&&s===91||t&&s===93||t&&s===58)i!==-1&&(n+=encodeURIComponent(o.substring(i,r)),i=-1),n!==void 0&&(n+=o.charAt(r));else{n===void 0&&(n=o.substr(0,r));let a=w_[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(o.substring(i,r)),i=-1),n+=a):i===-1&&(i=r)}}return i!==-1&&(n+=encodeURIComponent(o.substring(i))),n!==void 0?n:o}function WF(o){let e;for(let t=0;t<o.length;t++){let n=o.charCodeAt(t);n===35||n===63?(e===void 0&&(e=o.substr(0,t)),e+=w_[n]):e!==void 0&&(e+=o[t])}return e!==void 0?e:o}function fh(o,e){let t;return o.authority&&o.path.length>1&&o.scheme==="file"?t=`//${o.authority}${o.path}`:o.path.charCodeAt(0)===47&&(o.path.charCodeAt(1)>=65&&o.path.charCodeAt(1)<=90||o.path.charCodeAt(1)>=97&&o.path.charCodeAt(1)<=122)&&o.path.charCodeAt(2)===58?e?t=o.path.substr(1):t=o.path[1].toLowerCase()+o.path.substr(2):t=o.path,St&&(t=t.replace(/\//g,"\\")),t}function _x(o,e){let t=e?WF:x_,n="",{scheme:i,authority:r,path:s,query:a,fragment:l}=o;if(i&&(n+=i,n+=":"),(r||i==="file")&&(n+=Tr,n+=Tr),r){let d=r.indexOf("@");if(d!==-1){let u=r.substr(0,d);r=r.substr(d+1),d=u.lastIndexOf(":"),d===-1?n+=t(u,!1,!1):(n+=t(u.substr(0,d),!1,!1),n+=":",n+=t(u.substr(d+1),!1,!0)),n+="@"}r=r.toLowerCase(),d=r.lastIndexOf(":"),d===-1?n+=t(r,!1,!0):(n+=t(r.substr(0,d),!1,!0),n+=r.substr(d))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let d=s.charCodeAt(1);d>=65&&d<=90&&(s=`/${String.fromCharCode(d+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let d=s.charCodeAt(0);d>=65&&d<=90&&(s=`${String.fromCharCode(d+32)}:${s.substr(2)}`)}n+=t(s,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:x_(l,!1,!1)),n}function T_(o){try{return decodeURIComponent(o)}catch{return o.length>3?o.substr(0,3)+T_(o.substr(3)):o}}var E_=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function _f(o){return o.match(E_)?o.replace(E_,e=>T_(e)):o}function bh(o,e,t){let n=o.get(e);return n===void 0&&(n=t,o.set(e,n)),n}var Lx=class{constructor(e,t){this.uri=e;this.value=t}};function UF(o){return Array.isArray(o)}var fi=class o{static defaultToKey=e=>e.toString();[Symbol.toStringTag]="ResourceMap";map;toKey;constructor(e,t){if(e instanceof o)this.map=new Map(e.map),this.toKey=t??o.defaultToKey;else if(UF(e)){this.map=new Map,this.toKey=t??o.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??o.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new Lx(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[Symbol.iterator](){for(let[,e]of this.map)yield[e.uri,e.value]}},Lf=class{[Symbol.toStringTag]="ResourceSet";_map;constructor(e,t){!e||typeof e=="function"?this._map=new fi(e):(this._map=new fi(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,i)=>e.call(t,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[Symbol.iterator](){return this.keys()}};var Rx=class{[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){let n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return i}values(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return i}entries(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}},Rf=class extends Rx{_limit;_ratio;constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},or=class extends Rf{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}},Af=class extends Rf{constructor(e,t=1){super(e,t)}trim(e){this.trimNew(e)}set(e,t){return this._limit<=this.size&&!this.has(e)&&this.trim(Math.round(this._limit*this._ratio)-1),super.set(e,t),this}};var Gc=class{map=new Map;add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){let n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){let n=this.map.get(e);n&&n.forEach(t)}get(e){let t=this.map.get(e);return t||new Set}};function qc(o,e){let t=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=o.apply(t,arguments)}finally{e()}else i=o.apply(t,arguments);return i}}var wo;(R=>{function o(_){return _&&typeof _=="object"&&typeof _[Symbol.iterator]=="function"}R.is=o;let e=Object.freeze([]);function t(){return e}R.empty=t;function*n(_){yield _}R.single=n;function i(_){return o(_)?_:n(_)}R.wrap=i;function r(_){return _||e}R.from=r;function*s(_){for(let B=_.length-1;B>=0;B--)yield _[B]}R.reverse=s;function a(_){return!_||_[Symbol.iterator]().next().done===!0}R.isEmpty=a;function l(_){return _[Symbol.iterator]().next().value}R.first=l;function d(_,B){let K=0;for(let F of _)if(B(F,K++))return!0;return!1}R.some=d;function u(_,B){for(let K of _)if(B(K))return K}R.find=u;function*p(_,B){for(let K of _)B(K)&&(yield K)}R.filter=p;function*h(_,B){let K=0;for(let F of _)yield B(F,K++)}R.map=h;function*m(_,B){let K=0;for(let F of _)yield*B(F,K++)}R.flatMap=m;function*g(..._){for(let B of _)yield*B}R.concat=g;function f(_,B,K){let F=K;for(let V of _)F=B(F,V);return F}R.reduce=f;function*y(_,B,K=_.length){for(B<0&&(B+=_.length),K<0?K+=_.length:K>_.length&&(K=_.length);B<K;B++)yield _[B]}R.slice=y;function C(_,B=Number.POSITIVE_INFINITY){let K=[];if(B===0)return[K,_];let F=_[Symbol.iterator]();for(let V=0;V<B;V++){let oe=F.next();if(oe.done)return[K,R.empty()];K.push(oe.value)}return[K,{[Symbol.iterator](){return F}}]}R.consume=C;async function w(_){let B=[];for await(let K of _)B.push(K);return Promise.resolve(B)}R.asyncToArray=w})(wo||={});var zF=!1,yd=null;function HF(o){yd=o}if(zF){let o="__is_disposable_tracked__";HF(new class{trackDisposable(e){let t=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[o]||console.log(t)},3e3)}setParent(e,t){if(e&&e!==N.None)try{e[o]=!0}catch{}}markAsDisposed(e){if(e&&e!==N.None)try{e[o]=!0}catch{}}markAsSingleton(e){}})}function Id(o){return yd?.trackDisposable(o),o}function Sd(o){yd?.markAsDisposed(o)}function vh(o,e){yd?.setParent(o,e)}function KF(o,e){if(yd)for(let t of o)yd.setParent(t,e)}function al(o){return yd?.markAsSingleton(o),o}function Ax(o){return typeof o=="object"&&o!==null&&typeof o.dispose=="function"&&o.dispose.length===0}function Bt(o){if(wo.is(o)){let e=[];for(let t of o)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(o)?[]:o}else if(o)return o.dispose(),o}function k_(o){for(let e of o)Ax(e)&&e.dispose();return[]}function _i(...o){let e=re(()=>Bt(o));return KF(o,e),e}function re(o){let e=Id({dispose:qc(()=>{Sd(e),o()})});return e}var Y=class o{static DISABLE_DISPOSED_WARNING=!1;_toDispose=new Set;_isDisposed=!1;constructor(){Id(this)}dispose(){this._isDisposed||(Sd(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Bt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return vh(e,this),this._isDisposed?o.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),vh(e,null))}},N=class{static None=Object.freeze({dispose(){}});_store=new Y;constructor(){Id(this),vh(this._store,this)}dispose(){Sd(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}},ot=class{_value;_isDisposed=!1;constructor(){Id(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&vh(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,Sd(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&vh(e,null),e}};var kr=class{_store=new Map;_isDisposed=!1;constructor(){Id(this)}dispose(){Sd(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Bt(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){let t=this._store.get(e);return this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var D_=Object.freeze(function(o,e){let t=setTimeout(o.bind(e),0);return{dispose(){clearTimeout(t)}}}),yn;(n=>{function o(i){return i===n.None||i===n.Cancelled||i instanceof $c?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=o,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:G.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:D_})})(yn||={});var $c=class{_isCancelled=!1;_emitter=null;cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?D_:(this._emitter||(this._emitter=new x),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Wo=class{_token=void 0;_parentListener=void 0;constructor(e){this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new $c),this._token}cancel(){this._token?this._token instanceof $c&&this._token.cancel():this._token=yn.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof $c&&this._token.dispose():this._token=yn.None}};var hn=class o{static Undefined=new o(void 0);element;next;prev;constructor(e){this.element=e,this.next=o.Undefined,this.prev=o.Undefined}},bi=class{_first=hn.Undefined;_last=hn.Undefined;_size=0;get size(){return this._size}isEmpty(){return this._first===hn.Undefined}clear(){let e=this._first;for(;e!==hn.Undefined;){let t=e.next;e.prev=hn.Undefined,e.next=hn.Undefined,e=t}this._first=hn.Undefined,this._last=hn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new hn(e);if(this._first===hn.Undefined)this._first=n,this._last=n;else if(t){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==hn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==hn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==hn.Undefined&&e.next!==hn.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===hn.Undefined&&e.next===hn.Undefined?(this._first=hn.Undefined,this._last=hn.Undefined):e.next===hn.Undefined?(this._last=this._last.prev,this._last.next=hn.Undefined):e.prev===hn.Undefined&&(this._first=this._first.next,this._first.prev=hn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==hn.Undefined;)yield e.element,e=e.next}};var xd=(o,e)=>o===e;var Dr=class{constructor(e,t,n){this.owner=e;this.debugNameSource=t;this.referenceFn=n}getDebugName(e){return A_(e,this)}},__=new Map,Ox=new WeakMap;function A_(o,e){let t=Ox.get(o);if(t)return t;let n=GF(o,e);if(n){let i=__.get(n)??0;i++,__.set(n,i);let r=i===1?n:`${n}#${i}`;return Ox.set(o,r),r}}function GF(o,e){let t=Ox.get(o);if(t)return t;let n=e.owner?$F(e.owner)+".":"",i,r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(i=r(),i!==void 0)return n+i}else return n+r;let s=e.referenceFn;if(s!==void 0&&(i=Of(s),i!==void 0))return n+i;if(e.owner!==void 0){let a=qF(e.owner,o);if(a!==void 0)return n+a}}function qF(o,e){for(let t in o)if(o[t]===e)return t}var L_=new Map,R_=new WeakMap;function $F(o){let e=R_.get(o);if(e)return e;let t=jF(o),n=L_.get(t)??0;n++,L_.set(t,n);let i=n===1?t:`${t}#${n}`;return R_.set(o,i),i}function jF(o){let e=o.constructor;return e?e.name:"Object"}function Of(o){let e=o.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}function Pf(o,e){if(!o)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function Px(o,e="Unreachable"){throw new Error(e)}function jc(o){if(!o()){debugger;o(),bt(new ut("Assertion Failed"))}}function ll(o){return new Mf(new Dr(void 0,void 0,o),o,void 0,void 0)}var Mf=class{constructor(e,t,n,i){this._debugNameData=e;this._runFn=t;this.createChangeSummary=n;this._handleChange=i;this.changeSummary=this.createChangeSummary?.(),Uo()?.handleAutorunCreated(this),this._runIfNeeded(),Id(this)}state=2;updateCount=0;disposed=!1;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Sd(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;let t=this.disposed;try{if(!t){Uo()?.handleAutorunTriggered(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}catch(i){Uc(i)}}}finally{t||Uo()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}jc(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e))try{(this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:i=>i===e},this.changeSummary):!0)&&(this.state=2)}catch(n){Uc(n)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}};(e=>e.Observer=Mf)(ll||={});function Mx(o,e){return new Nf(new Dr(o.owner,o.debugName,o.debugReferenceFn),e,void 0,void 0,o.onLastObserverRemoved,o.equalsFn??xd)}O_(Mx);var Nf=class extends Ed{constructor(t,n,i,r,s=void 0,a){super();this._debugNameData=t;this._computeFn=n;this.createChangeSummary=i;this._handleChange=r;this._handleLastObserverRemoved=s;this._equalityComparator=a;this.changeSummary=this.createChangeSummary?.(),Uo()?.handleDerivedCreated(this)}state=0;value=void 0;updateCount=0;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary=void 0;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0;for(let t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){let t=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(let t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let t=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=t;let n=this.state!==0,i=this.value;this.state=3;let r=!1;try{let s=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,s)}finally{for(let a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}r=n&&!this._equalityComparator(i,this.value),Uo()?.handleDerivedRecomputed(this,{oldValue:i,newValue:this.value,change:void 0,didChange:r,hadValue:n})}catch(s){Uc(s)}if(r)for(let s of this.observers)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(t){this.updateCount++;let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}endUpdate(t){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this)}jc(()=>this.updateCount>=0)}handlePossibleChange(t){if(this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(t,n){if(this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:t,change:n,didChange:s=>s===t},this.changeSummary):!0}catch(s){Uc(s)}let r=this.state===3;if(i&&(this.state===1||r)&&(this.state=2,r))for(let s of this.observers)s.handlePossibleChange(this)}}readObservable(t){t.addObserver(this);let n=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),n}addObserver(t){let n=!this.observers.has(t)&&this.updateCount>0;super.addObserver(t),n&&t.beginUpdate(this)}removeObserver(t){let n=this.observers.has(t)&&this.updateCount>0;super.removeObserver(t),n&&t.endUpdate(this)}};function Bf(o){return new Nx(o)}var Nx=class extends yh{constructor(t){super();this.value=t}get debugName(){return this.toString()}get(){return this.value}addObserver(t){}removeObserver(t){}toString(){return`Const: ${this.value}`}};function Fx(...o){let e,t,n;return o.length===3?[e,t,n]=o:[t,n]=o,new dl(new Dr(e,void 0,n),t,n,()=>dl.globalTransaction,xd)}var dl=class extends Ed{constructor(t,n,i,r,s){super();this._debugNameData=t;this.event=n;this._getValue=i;this._getTransaction=r;this._equalityComparator=s}static globalTransaction;value;hasValue=!1;subscription;getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let t=this.getDebugName();return"From Event"+(t?`: ${t}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}handleEvent=t=>{let n=this._getValue(t),i=this.value,r=!this.hasValue||!this._equalityComparator(i,n),s=!1;r&&(this.value=n,this.hasValue&&(s=!0,Bx(this._getTransaction(),a=>{Uo()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:r,hadValue:this.hasValue});for(let l of this.observers)a.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")})),this.hasValue=!0),s||Uo()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:r,hadValue:this.hasValue})};onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(t=>{t.Observer=dl;function e(n,i){let r=!1;dl.globalTransaction===void 0&&(dl.globalTransaction=n,r=!0);try{i()}finally{r&&(dl.globalTransaction=void 0)}}t.batchEventsGlobally=e})(Fx||={});function M_(o){let e=new Ff(!1,void 0);return o.addObserver(e),re(()=>{o.removeObserver(e)})}B_(M_);function N_(o,e){let t=new Ff(!0,e);return o.addObserver(t),e?e(o.get()):o.reportChanges(),re(()=>{o.removeObserver(t)})}F_(N_);var Ff=class{constructor(e,t){this._forceRecompute=e;this._handleValue=t}_counter=0;beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}};var W_;function U_(o){W_=o}function Uo(){return W_}var Wf=class{indentation=0;textToConsoleArgs(e){return ZF([Yc(tB("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Yc(" "),_r(Sh(e.oldValue,70),{color:"red",strikeThrough:!0}),Yc(" "),_r(Sh(e.newValue,60),{color:"green"})]:[Yc(" (unchanged)")]:[Yc(" "),_r(Sh(e.newValue,60),{color:"green"}),Yc(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([Ih("observable value changed"),_r(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}changedObservablesSets=new WeakMap;formatChanges(e){if(e.size!==0)return _r(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,i)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,i]))}handleDerivedRecomputed(e,t){let n=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Ih("derived recomputed"),_r(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([Ih("observable from event triggered"),_r(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,i)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,i]))}handleAutorunTriggered(e){let t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Ih("autorun"),_r(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.textToConsoleArgs([Ih("transaction"),_r(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function ZF(o){let e=new Array,t=[],n="";function i(s){if("length"in s)for(let a of s)a&&i(a);else"text"in s?(n+=`%c${s.text}`,e.push(s.style),s.data&&t.push(...s.data)):"data"in s&&t.push(...s.data)}i(o);let r=[n,...e];return r.push(...t),r}function Yc(o){return _r(o,{color:"black"})}function Ih(o){return _r(nB(`${o}: `,10),{color:"black",bold:!0})}function _r(o,e={color:"black"}){function t(i){return Object.entries(i).reduce((r,[s,a])=>`${r}${s}:${a};`,"")}let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:o,style:t(n)}}function Sh(o,e){switch(typeof o){case"number":return""+o;case"string":return o.length+2<=e?`"${o}"`:`"${o.substr(0,e-7)}"+...`;case"boolean":return o?"true":"false";case"undefined":return"undefined";case"object":return o===null?"null":Array.isArray(o)?JF(o,e):eB(o,e);case"symbol":return o.toString();case"function":return`[[Function${o.name?" "+o.name:""}]]`;default:return""+o}}function JF(o,e){let t="[ ",n=!0;for(let i of o){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${Sh(i,e-t.length)}`}return t+=" ]",t}function eB(o,e){let t="{ ",n=!0;for(let[i,r]of Object.entries(o)){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${i}: ${Sh(r,e-t.length)}`}return t+=" }",t}function tB(o,e){let t="";for(let n=1;n<=e;n++)t+=o;return t}function nB(o,e){for(;o.length<e;)o+=" ";return o}var z_;function F_(o){z_=o}var H_;function B_(o){H_=o}var Vx;function O_(o){Vx=o}var yh=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){let n=t===void 0?void 0:e,i=t===void 0?e:t;return Vx({owner:n,debugName:()=>{let r=Of(i);if(r!==void 0)return r;let a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:i},r=>i(this.read(r),r))}flatten(){return Vx({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(z_(this,t)),this}keepObserved(e){return e.add(H_(this)),this}get debugValue(){return this.get()}},Ed=class extends yh{observers=new Set;addObserver(e){let t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};function Vf(o,e){let t=new Uf(o,e);try{o(t)}finally{t.finish()}}function Bx(o,e,t){o?e(o):Vf(e,t)}var Uf=class{constructor(e,t){this._fn=e;this._getDebugName=t;Uo()?.handleBeginTransaction(this)}updatingObservers=[];getDebugName(){return this._getDebugName?this._getDebugName():Of(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){let e=this.updatingObservers;for(let t=0;t<e.length;t++){let{observer:n,observable:i}=e[t];n.endUpdate(i)}this.updatingObservers=null,Uo()?.handleEndTransaction()}};var iB=!1;iB&&U_(new Wf);var oB=globalThis.performance&&typeof globalThis.performance.now=="function",Cd=class o{_startTime;_stopTime;_now;static create(e){return new o(e)}constructor(e){this._now=oB&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var Wx=Symbol("MicrotaskDelay");var rB=!1,K_=!1,sB=!1,G;(gt=>{gt.None=()=>N.None;function e(ve){if(sB){let{onDidAddListener:se}=ve,Ie=xh.create(),fe=0;ve.onDidAddListener=()=>{++fe===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Ie.print()),se?.()}}}function t(ve,se){return m(ve,()=>{},0,void 0,!0,void 0,se)}gt.defer=t;function n(ve){return(se,Ie=null,fe)=>{let Se=!1,qe;return qe=ve(Ue=>{if(!Se)return qe?qe.dispose():Se=!0,se.call(Ie,Ue)},null,fe),Se&&qe.dispose(),qe}}gt.once=n;function i(ve,se){return gt.once(gt.filter(ve,se))}gt.onceIf=i;function r(ve,se,Ie){return p((fe,Se=null,qe)=>ve(Ue=>fe.call(Se,se(Ue)),null,qe),Ie)}gt.map=r;function s(ve,se,Ie){return p((fe,Se=null,qe)=>ve(Ue=>{se(Ue),fe.call(Se,Ue)},null,qe),Ie)}gt.forEach=s;function a(ve,se,Ie){return p((fe,Se=null,qe)=>ve(Ue=>se(Ue)&&fe.call(Se,Ue),null,qe),Ie)}gt.filter=a;function l(ve){return ve}gt.signal=l;function d(...ve){return(se,Ie=null,fe)=>{let Se=_i(...ve.map(qe=>qe(Ue=>se.call(Ie,Ue))));return h(Se,fe)}}gt.any=d;function u(ve,se,Ie,fe){let Se=Ie;return r(ve,qe=>(Se=se(Se,qe),Se),fe)}gt.reduce=u;function p(ve,se){let Ie,fe={onWillAddFirstListener(){Ie=ve(Se.fire,Se)},onDidRemoveLastListener(){Ie?.dispose()}};se||e(fe);let Se=new x(fe);return se?.add(Se),Se.event}function h(ve,se){return se instanceof Array?se.push(ve):se&&se.add(ve),ve}function m(ve,se,Ie=100,fe=!1,Se=!1,qe,Ue){let _t,Xe,ke,Zn=0,Ln,io={leakWarningThreshold:qe,onWillAddFirstListener(){_t=ve($a=>{Zn++,Xe=se(Xe,$a),fe&&!ke&&(xo.fire(Xe),Xe=void 0),Ln=()=>{let ui=Xe;Xe=void 0,ke=void 0,(!fe||Zn>1)&&xo.fire(ui),Zn=0},typeof Ie=="number"?(clearTimeout(ke),ke=setTimeout(Ln,Ie)):ke===void 0&&(ke=0,queueMicrotask(Ln))})},onWillRemoveListener(){Se&&Zn>0&&Ln?.()},onDidRemoveLastListener(){Ln=void 0,_t.dispose()}};Ue||e(io);let xo=new x(io);return Ue?.add(xo),xo.event}gt.debounce=m;function g(ve,se=0,Ie){return gt.debounce(ve,(fe,Se)=>fe?(fe.push(Se),fe):[Se],se,void 0,!0,void 0,Ie)}gt.accumulate=g;function f(ve,se=(fe,Se)=>fe===Se,Ie){let fe=!0,Se;return a(ve,qe=>{let Ue=fe||!se(qe,Se);return fe=!1,Se=qe,Ue},Ie)}gt.latch=f;function y(ve,se,Ie){return[gt.filter(ve,se,Ie),gt.filter(ve,fe=>!se(fe),Ie)]}gt.split=y;function C(ve,se=!1,Ie=[],fe){let Se=Ie.slice(),qe=ve(Xe=>{Se?Se.push(Xe):_t.fire(Xe)});fe&&fe.add(qe);let Ue=()=>{Se?.forEach(Xe=>_t.fire(Xe)),Se=null},_t=new x({onWillAddFirstListener(){qe||(qe=ve(Xe=>_t.fire(Xe)),fe&&fe.add(qe))},onDidAddFirstListener(){Se&&(se?setTimeout(Ue):Ue())},onDidRemoveLastListener(){qe&&qe.dispose(),qe=null}});return fe&&fe.add(_t),_t.event}gt.buffer=C;function w(ve,se){return(fe,Se,qe)=>{let Ue=se(new _);return ve(function(_t){let Xe=Ue.evaluate(_t);Xe!==R&&fe.call(Se,Xe)},void 0,qe)}}gt.chain=w;let R=Symbol("HaltChainable");class _{steps=[];map(se){return this.steps.push(se),this}forEach(se){return this.steps.push(Ie=>(se(Ie),Ie)),this}filter(se){return this.steps.push(Ie=>se(Ie)?Ie:R),this}reduce(se,Ie){let fe=Ie;return this.steps.push(Se=>(fe=se(fe,Se),fe)),this}latch(se=(Ie,fe)=>Ie===fe){let Ie=!0,fe;return this.steps.push(Se=>{let qe=Ie||!se(Se,fe);return Ie=!1,fe=Se,qe?Se:R}),this}evaluate(se){for(let Ie of this.steps)if(se=Ie(se),se===R)break;return se}}function B(ve,se,Ie=fe=>fe){let fe=(..._t)=>Ue.fire(Ie(..._t)),Se=()=>ve.on(se,fe),qe=()=>ve.removeListener(se,fe),Ue=new x({onWillAddFirstListener:Se,onDidRemoveLastListener:qe});return Ue.event}gt.fromNodeEventEmitter=B;function K(ve,se,Ie=fe=>fe){let fe=(..._t)=>Ue.fire(Ie(..._t)),Se=()=>ve.addEventListener(se,fe),qe=()=>ve.removeEventListener(se,fe),Ue=new x({onWillAddFirstListener:Se,onDidRemoveLastListener:qe});return Ue.event}gt.fromDOMEventEmitter=K;function F(ve){return new Promise(se=>n(ve)(se))}gt.toPromise=F;function V(ve){let se=new x;return ve.then(Ie=>{se.fire(Ie)},()=>{se.fire(void 0)}).finally(()=>{se.dispose()}),se.event}gt.fromPromise=V;function oe(ve,se){return ve(Ie=>se.fire(Ie))}gt.forward=oe;function ge(ve,se,Ie){return se(Ie),ve(fe=>se(fe))}gt.runAndSubscribe=ge;class we{constructor(se,Ie){this._observable=se;let fe={onWillAddFirstListener:()=>{se.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{se.removeObserver(this)}};Ie||e(fe),this.emitter=new x(fe),Ie&&Ie.add(this.emitter)}emitter;_counter=0;_hasChanged=!1;beginUpdate(se){this._counter++}handlePossibleChange(se){}handleChange(se,Ie){this._hasChanged=!0}endUpdate(se){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function ht(ve,se){return new we(ve,se).emitter.event}gt.fromObservable=ht;function tt(ve){return(se,Ie,fe)=>{let Se=0,qe=!1,Ue={beginUpdate(){Se++},endUpdate(){Se--,Se===0&&(ve.reportChanges(),qe&&(qe=!1,se.call(Ie)))},handlePossibleChange(){},handleChange(){qe=!0}};ve.addObserver(Ue),ve.reportChanges();let _t={dispose(){ve.removeObserver(Ue)}};return fe instanceof Y?fe.add(_t):Array.isArray(fe)&&fe.push(_t),_t}}gt.fromObservableLight=tt})(G||={});var Ux=class o{static all=new Set;static _idPool=0;name;listenerCount=0;invocationCount=0;elapsedOverall=0;durations=[];_stopWatch;constructor(e){this.name=`${e}_${o._idPool++}`,o.all.add(this)}start(e){this._stopWatch=new Cd,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},G_=-1;var zx=class o{constructor(e,t,n=(o._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=t;this.name=n}static _idPool=1;_stacks;_warnCountdown=0;dispose(){this._stacks?.clear()}check(e,t){let n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[r,s]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${s}):`;console.warn(a),console.warn(r);let l=new Hx(a,r);this._errorHandler(l)}return()=>{let r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[n,i]of this._stacks)(!e||t<i)&&(e=[n,i],t=i);return e}},xh=class o{constructor(e){this.value=e}static create(){let e=new Error;return new o(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Hx=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},Kx=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},aB=0,Qc=class{constructor(e){this.value=e}stack;id=aB++},lB=2,q_=(o,e)=>{if(o instanceof Qc)e(o);else for(let t=0;t<o.length;t++){let n=o[t];n&&e(n)}},zf;if(rB){let o=[];setInterval(()=>{o.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(o.join(`
`)),o.length=0)},3e3),zf=new FinalizationRegistry(e=>{typeof e=="string"&&o.push(e)})}var x=class{_options;_leakageMon;_perfMon;_disposed;_event;_listeners;_deliveryQueue;_size=0;constructor(e){this._options=e,this._leakageMon=G_>0||this._options?.leakWarningThreshold?new zx(e?.onListenerError??bt,this._options?.leakWarningThreshold??G_):void 0,this._perfMon=this._options?._profName?new Ux(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(K_){let e=this._listeners;queueMicrotask(()=>{q_(e,t=>t.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,t,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let d=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],u=new Kx(`${l}. HINT: Stack shows most frequent listener (${d[1]}-times)`,d[0]);return(this._options?.onListenerError||bt)(u),N.None}if(this._disposed)return N.None;t&&(e=e.bind(t));let i=new Qc(e),r,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=xh.create(),r=this._leakageMon.check(i.stack,this._size+1)),K_&&(i.stack=s??xh.create()),this._listeners?this._listeners instanceof Qc?(this._deliveryQueue??=new Gx,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=re(()=>{zf?.unregister(a),r?.(),this._removeListener(i)});if(n instanceof Y?n.add(a):Array.isArray(n)&&n.push(a),zf){let l=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),d=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(l);zf.register(a,d?.[2]??l,a)}return a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*lB<=t.length){let r=0;for(let s=0;s<t.length;s++)t[s]?t[r++]=t[s]:i&&(this._deliveryQueue.end--,r<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=r}}_deliver(e,t){if(!e)return;let n=this._options?.onListenerError||bt;if(!n){e.value(t);return}try{e.value(t)}catch(i){n(i)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Qc)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Gx=class{i=-1;end=0;current;value;enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Xc=class extends x{_asyncDeliveryQueue;async fireAsync(e,t,n){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new bi),q_(this._listeners,i=>this._asyncDeliveryQueue.push([i.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){let[i,r]=this._asyncDeliveryQueue.shift(),s=[],a={...r,token:t,waitUntil:l=>{if(Object.isFrozen(s))throw new Error("waitUntil can NOT be called asynchronous");n&&(l=n(l,i)),s.push(l)}};try{i(a)}catch(l){bt(l);continue}Object.freeze(s),await Promise.allSettled(s).then(l=>{for(let d of l)d.status==="rejected"&&bt(d.reason)})}}},wd=class extends x{_isPaused=0;_eventQueue=new bi;_mergeFn;get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}},Hf=class extends wd{_delay;_handle;constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}},Kf=class extends x{_queuedEvents=[];_mergeFn;constructor(e){super(e),this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}},Eh=class{emitter;hasListeners=!1;events=[];constructor(){this.emitter=new x({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){let t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),re(qc(()=>{this.hasListeners&&this.unhook(t);let i=this.events.indexOf(t);this.events.splice(i,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(let e of this.events)e.listener?.dispose();this.events=[]}};var Zc=class{data=[];wrapEvent(e,t,n){return(i,r,s)=>e(a=>{let l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>i.call(r,a)):i.call(r,a);return}let d=l;if(!d){i.call(r,t(n,a));return}d.items??=[],d.items.push(a),d.buffers.length===0&&l.buffers.push(()=>{d.reducedResult??=n?d.items.reduce(t,n):d.items.reduce(t),i.call(r,d.reducedResult)})},void 0,s)}bufferEvents(e){let t={buffers:new Array};this.data.push(t);let n=e();return this.data.pop(),t.buffers.forEach(i=>i()),n}},Td=class{listening=!1;inputEvent=G.None;inputEventListener=N.None;emitter=new x({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}});event=this.emitter.event;set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}};var kd=class o{static INSTANCE=new o;mapWindowIdToZoomLevel=new Map;_onDidChangeZoomLevel=new x;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(n,e),this._onDidChangeZoomLevel.fire(n)}mapWindowIdToZoomFactor=new Map;getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}_onDidChangeFullscreen=new x;onDidChangeFullscreen=this._onDidChangeFullscreen.event;mapWindowIdToFullScreen=new Map;setFullscreen(e,t){if(this.isFullscreen(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToFullScreen.set(n,e),this._onDidChangeFullscreen.fire(n)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};function cB(o,e,t){typeof e=="string"&&(e=o.matchMedia(e)),e.addEventListener("change",t)}function $_(o){return kd.INSTANCE.getZoomLevel(o)}var U8=kd.INSTANCE.onDidChangeZoomLevel;function j_(o){return kd.INSTANCE.getZoomFactor(o)}function Y_(o,e){kd.INSTANCE.setFullscreen(o,e)}var z8=kd.INSTANCE.onDidChangeFullscreen,Jc=navigator.userAgent,To=Jc.indexOf("Firefox")>=0,da=Jc.indexOf("AppleWebKit")>=0,eu=Jc.indexOf("Chrome")>=0,fs=!eu&&Jc.indexOf("Safari")>=0,Q_=!eu&&!fs&&da,H8=Jc.indexOf("Electron/")>=0,K8=Jc.indexOf("Android")>=0,Gf=!1;if(typeof xe.matchMedia=="function"){let o=xe.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=xe.matchMedia("(display-mode: fullscreen)");Gf=o.matches,cB(xe,o,({matches:t})=>{Gf&&e.matches||(Gf=t)})}function X_(){return Gf}var Z_={clipboard:{writeText:wr||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:wr||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:wr||X_()?0:navigator.keyboard||fs?1:2,touch:"ontouchstart"in xe||navigator.maxTouchPoints>0,pointerEvents:xe.PointerEvent&&("ontouchstart"in xe||navigator.maxTouchPoints>0)};var wh=class{_keyCodeToStr;_strToKeyCode;constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},qf=new wh,qx=new wh,$x=new wh,Yx=new Array(230),uB={},pB=[],hB=Object.create(null),mB=Object.create(null);var J_=[],jx=[];for(let o=0;o<=193;o++)J_[o]=-1;for(let o=0;o<=132;o++)jx[o]=-1;(function(){let o="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",o,o],[1,1,"Hyper",0,o,0,o,o,o],[1,2,"Super",0,o,0,o,o,o],[1,3,"Fn",0,o,0,o,o,o],[1,4,"FnLock",0,o,0,o,o,o],[1,5,"Suspend",0,o,0,o,o,o],[1,6,"Resume",0,o,0,o,o,o],[1,7,"Turbo",0,o,0,o,o,o],[1,8,"Sleep",0,o,0,"VK_SLEEP",o,o],[1,9,"WakeUp",0,o,0,o,o,o],[0,10,"KeyA",31,"A",65,"VK_A",o,o],[0,11,"KeyB",32,"B",66,"VK_B",o,o],[0,12,"KeyC",33,"C",67,"VK_C",o,o],[0,13,"KeyD",34,"D",68,"VK_D",o,o],[0,14,"KeyE",35,"E",69,"VK_E",o,o],[0,15,"KeyF",36,"F",70,"VK_F",o,o],[0,16,"KeyG",37,"G",71,"VK_G",o,o],[0,17,"KeyH",38,"H",72,"VK_H",o,o],[0,18,"KeyI",39,"I",73,"VK_I",o,o],[0,19,"KeyJ",40,"J",74,"VK_J",o,o],[0,20,"KeyK",41,"K",75,"VK_K",o,o],[0,21,"KeyL",42,"L",76,"VK_L",o,o],[0,22,"KeyM",43,"M",77,"VK_M",o,o],[0,23,"KeyN",44,"N",78,"VK_N",o,o],[0,24,"KeyO",45,"O",79,"VK_O",o,o],[0,25,"KeyP",46,"P",80,"VK_P",o,o],[0,26,"KeyQ",47,"Q",81,"VK_Q",o,o],[0,27,"KeyR",48,"R",82,"VK_R",o,o],[0,28,"KeyS",49,"S",83,"VK_S",o,o],[0,29,"KeyT",50,"T",84,"VK_T",o,o],[0,30,"KeyU",51,"U",85,"VK_U",o,o],[0,31,"KeyV",52,"V",86,"VK_V",o,o],[0,32,"KeyW",53,"W",87,"VK_W",o,o],[0,33,"KeyX",54,"X",88,"VK_X",o,o],[0,34,"KeyY",55,"Y",89,"VK_Y",o,o],[0,35,"KeyZ",56,"Z",90,"VK_Z",o,o],[0,36,"Digit1",22,"1",49,"VK_1",o,o],[0,37,"Digit2",23,"2",50,"VK_2",o,o],[0,38,"Digit3",24,"3",51,"VK_3",o,o],[0,39,"Digit4",25,"4",52,"VK_4",o,o],[0,40,"Digit5",26,"5",53,"VK_5",o,o],[0,41,"Digit6",27,"6",54,"VK_6",o,o],[0,42,"Digit7",28,"7",55,"VK_7",o,o],[0,43,"Digit8",29,"8",56,"VK_8",o,o],[0,44,"Digit9",30,"9",57,"VK_9",o,o],[0,45,"Digit0",21,"0",48,"VK_0",o,o],[1,46,"Enter",3,"Enter",13,"VK_RETURN",o,o],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",o,o],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",o,o],[1,49,"Tab",2,"Tab",9,"VK_TAB",o,o],[1,50,"Space",10,"Space",32,"VK_SPACE",o,o],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,o,0,o,o,o],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",o,o],[1,64,"F1",59,"F1",112,"VK_F1",o,o],[1,65,"F2",60,"F2",113,"VK_F2",o,o],[1,66,"F3",61,"F3",114,"VK_F3",o,o],[1,67,"F4",62,"F4",115,"VK_F4",o,o],[1,68,"F5",63,"F5",116,"VK_F5",o,o],[1,69,"F6",64,"F6",117,"VK_F6",o,o],[1,70,"F7",65,"F7",118,"VK_F7",o,o],[1,71,"F8",66,"F8",119,"VK_F8",o,o],[1,72,"F9",67,"F9",120,"VK_F9",o,o],[1,73,"F10",68,"F10",121,"VK_F10",o,o],[1,74,"F11",69,"F11",122,"VK_F11",o,o],[1,75,"F12",70,"F12",123,"VK_F12",o,o],[1,76,"PrintScreen",0,o,0,o,o,o],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",o,o],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",o,o],[1,79,"Insert",19,"Insert",45,"VK_INSERT",o,o],[1,80,"Home",14,"Home",36,"VK_HOME",o,o],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",o,o],[1,82,"Delete",20,"Delete",46,"VK_DELETE",o,o],[1,83,"End",13,"End",35,"VK_END",o,o],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",o,o],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",o],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",o],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",o],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",o],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",o,o],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",o,o],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",o,o],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",o,o],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",o,o],[1,94,"NumpadEnter",3,o,0,o,o,o],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",o,o],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",o,o],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",o,o],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",o,o],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",o,o],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",o,o],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",o,o],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",o,o],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",o,o],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",o,o],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",o,o],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",o,o],[1,107,"ContextMenu",58,"ContextMenu",93,o,o,o],[1,108,"Power",0,o,0,o,o,o],[1,109,"NumpadEqual",0,o,0,o,o,o],[1,110,"F13",71,"F13",124,"VK_F13",o,o],[1,111,"F14",72,"F14",125,"VK_F14",o,o],[1,112,"F15",73,"F15",126,"VK_F15",o,o],[1,113,"F16",74,"F16",127,"VK_F16",o,o],[1,114,"F17",75,"F17",128,"VK_F17",o,o],[1,115,"F18",76,"F18",129,"VK_F18",o,o],[1,116,"F19",77,"F19",130,"VK_F19",o,o],[1,117,"F20",78,"F20",131,"VK_F20",o,o],[1,118,"F21",79,"F21",132,"VK_F21",o,o],[1,119,"F22",80,"F22",133,"VK_F22",o,o],[1,120,"F23",81,"F23",134,"VK_F23",o,o],[1,121,"F24",82,"F24",135,"VK_F24",o,o],[1,122,"Open",0,o,0,o,o,o],[1,123,"Help",0,o,0,o,o,o],[1,124,"Select",0,o,0,o,o,o],[1,125,"Again",0,o,0,o,o,o],[1,126,"Undo",0,o,0,o,o,o],[1,127,"Cut",0,o,0,o,o,o],[1,128,"Copy",0,o,0,o,o,o],[1,129,"Paste",0,o,0,o,o,o],[1,130,"Find",0,o,0,o,o,o],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",o,o],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",o,o],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",o,o],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",o,o],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",o,o],[1,136,"KanaMode",0,o,0,o,o,o],[0,137,"IntlYen",0,o,0,o,o,o],[1,138,"Convert",0,o,0,o,o,o],[1,139,"NonConvert",0,o,0,o,o,o],[1,140,"Lang1",0,o,0,o,o,o],[1,141,"Lang2",0,o,0,o,o,o],[1,142,"Lang3",0,o,0,o,o,o],[1,143,"Lang4",0,o,0,o,o,o],[1,144,"Lang5",0,o,0,o,o,o],[1,145,"Abort",0,o,0,o,o,o],[1,146,"Props",0,o,0,o,o,o],[1,147,"NumpadParenLeft",0,o,0,o,o,o],[1,148,"NumpadParenRight",0,o,0,o,o,o],[1,149,"NumpadBackspace",0,o,0,o,o,o],[1,150,"NumpadMemoryStore",0,o,0,o,o,o],[1,151,"NumpadMemoryRecall",0,o,0,o,o,o],[1,152,"NumpadMemoryClear",0,o,0,o,o,o],[1,153,"NumpadMemoryAdd",0,o,0,o,o,o],[1,154,"NumpadMemorySubtract",0,o,0,o,o,o],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",o,o],[1,156,"NumpadClearEntry",0,o,0,o,o,o],[1,0,o,5,"Ctrl",17,"VK_CONTROL",o,o],[1,0,o,4,"Shift",16,"VK_SHIFT",o,o],[1,0,o,6,"Alt",18,"VK_MENU",o,o],[1,0,o,57,"Meta",91,"VK_COMMAND",o,o],[1,157,"ControlLeft",5,o,0,"VK_LCONTROL",o,o],[1,158,"ShiftLeft",4,o,0,"VK_LSHIFT",o,o],[1,159,"AltLeft",6,o,0,"VK_LMENU",o,o],[1,160,"MetaLeft",57,o,0,"VK_LWIN",o,o],[1,161,"ControlRight",5,o,0,"VK_RCONTROL",o,o],[1,162,"ShiftRight",4,o,0,"VK_RSHIFT",o,o],[1,163,"AltRight",6,o,0,"VK_RMENU",o,o],[1,164,"MetaRight",57,o,0,"VK_RWIN",o,o],[1,165,"BrightnessUp",0,o,0,o,o,o],[1,166,"BrightnessDown",0,o,0,o,o,o],[1,167,"MediaPlay",0,o,0,o,o,o],[1,168,"MediaRecord",0,o,0,o,o,o],[1,169,"MediaFastForward",0,o,0,o,o,o],[1,170,"MediaRewind",0,o,0,o,o,o],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",o,o],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",o,o],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",o,o],[1,174,"Eject",0,o,0,o,o,o],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",o,o],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",o,o],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",o,o],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",o,o],[1,179,"LaunchApp1",0,o,0,"VK_MEDIA_LAUNCH_APP1",o,o],[1,180,"SelectTask",0,o,0,o,o,o],[1,181,"LaunchScreenSaver",0,o,0,o,o,o],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",o,o],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",o,o],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",o,o],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",o,o],[1,186,"BrowserStop",0,o,0,"VK_BROWSER_STOP",o,o],[1,187,"BrowserRefresh",0,o,0,"VK_BROWSER_REFRESH",o,o],[1,188,"BrowserFavorites",0,o,0,"VK_BROWSER_FAVORITES",o,o],[1,189,"ZoomToggle",0,o,0,o,o,o],[1,190,"MailReply",0,o,0,o,o,o],[1,191,"MailForward",0,o,0,o,o,o],[1,192,"MailSend",0,o,0,o,o,o],[1,0,o,114,"KeyInComposition",229,o,o,o],[1,0,o,116,"ABNT_C2",194,"VK_ABNT_C2",o,o],[1,0,o,96,"OEM_8",223,"VK_OEM_8",o,o],[1,0,o,0,o,0,"VK_KANA",o,o],[1,0,o,0,o,0,"VK_HANGUL",o,o],[1,0,o,0,o,0,"VK_JUNJA",o,o],[1,0,o,0,o,0,"VK_FINAL",o,o],[1,0,o,0,o,0,"VK_HANJA",o,o],[1,0,o,0,o,0,"VK_KANJI",o,o],[1,0,o,0,o,0,"VK_CONVERT",o,o],[1,0,o,0,o,0,"VK_NONCONVERT",o,o],[1,0,o,0,o,0,"VK_ACCEPT",o,o],[1,0,o,0,o,0,"VK_MODECHANGE",o,o],[1,0,o,0,o,0,"VK_SELECT",o,o],[1,0,o,0,o,0,"VK_PRINT",o,o],[1,0,o,0,o,0,"VK_EXECUTE",o,o],[1,0,o,0,o,0,"VK_SNAPSHOT",o,o],[1,0,o,0,o,0,"VK_HELP",o,o],[1,0,o,0,o,0,"VK_APPS",o,o],[1,0,o,0,o,0,"VK_PROCESSKEY",o,o],[1,0,o,0,o,0,"VK_PACKET",o,o],[1,0,o,0,o,0,"VK_DBE_SBCSCHAR",o,o],[1,0,o,0,o,0,"VK_DBE_DBCSCHAR",o,o],[1,0,o,0,o,0,"VK_ATTN",o,o],[1,0,o,0,o,0,"VK_CRSEL",o,o],[1,0,o,0,o,0,"VK_EXSEL",o,o],[1,0,o,0,o,0,"VK_EREOF",o,o],[1,0,o,0,o,0,"VK_PLAY",o,o],[1,0,o,0,o,0,"VK_ZOOM",o,o],[1,0,o,0,o,0,"VK_NONAME",o,o],[1,0,o,0,o,0,"VK_PA1",o,o],[1,0,o,0,o,0,"VK_OEM_CLEAR",o,o]],t=[],n=[];for(let i of e){let[r,s,a,l,d,u,p,h,m]=i;if(n[s]||(n[s]=!0,pB[s]=a,hB[a]=s,mB[a.toLowerCase()]=s,r&&(J_[s]=l,l!==0&&l!==3&&l!==5&&l!==4&&l!==6&&l!==57&&(jx[l]=s))),!t[l]){if(t[l]=!0,!d)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);qf.define(l,d),qx.define(l,h||d),$x.define(l,m||h||d)}u&&(Yx[u]=l),p&&(uB[p]=l)}jx[3]=46})();var Th;(s=>{function o(a){return qf.keyCodeToStr(a)}s.toString=o;function e(a){return qf.strToKeyCode(a)}s.fromString=e;function t(a){return qx.keyCodeToStr(a)}s.toUserSettingsUS=t;function n(a){return $x.keyCodeToStr(a)}s.toUserSettingsGeneral=n;function i(a){return qx.strToKeyCode(a)||$x.strToKeyCode(a)}s.fromUserSettings=i;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return qf.keyCodeToStr(a)}s.toElectronAccelerator=r})(Th||={});function rr(o,e){let t=(e&65535)<<16>>>0;return(o|t)>>>0}function Qx(o,e){if(typeof o=="number"){if(o===0)return null;let t=(o&65535)>>>0,n=(o&4294901760)>>>16;return n!==0?new tu([$f(t,e),$f(n,e)]):new tu([$f(t,e)])}else{let t=[];for(let n=0;n<o.length;n++)t.push($f(o[n],e));return new tu(t)}}function $f(o,e){let t=!!(o&2048),n=!!(o&256),i=e===2?n:t,r=!!(o&1024),s=!!(o&512),a=e===2?t:n,l=o&255;return new kh(i,r,s,a,l)}var kh=class o{constructor(e,t,n,i,r){this.ctrlKey=e;this.shiftKey=t;this.altKey=n;this.metaKey=i;this.keyCode=r}equals(e){return e instanceof o&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`K${e}${t}${n}${i}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new tu([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}};var tu=class{chords;constructor(e){if(e.length===0)throw gd("chords");this.chords=e}getHashCode(){let e="";for(let t=0,n=this.chords.length;t<n;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function gB(o){if(o.charCode){let t=String.fromCharCode(o.charCode).toUpperCase();return Th.fromString(t)}let e=o.keyCode;if(e===3)return 7;if(To)switch(e){case 59:return 85;case 60:if(Kt)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Fe)return 57;break}else if(da){if(Fe&&e===93)return 57;if(!Fe&&e===92)return 57}return Yx[e]||0}var fB=Fe?256:2048,bB=512,vB=1024,yB=Fe?2048:256;var pt=class{_standardKeyboardEventBrand=!0;browserEvent;target;ctrlKey;shiftKey;altKey;metaKey;altGraphKey;keyCode;code;_asKeybinding;_asKeyCodeChord;constructor(e){let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=gB(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=fB),this.altKey&&(t|=bB),this.shiftKey&&(t|=vB),this.metaKey&&(t|=yB),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new kh(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}};var e0=new WeakMap;function IB(o){if(!o.parent||o.parent===o)return null;try{let e=o.location,t=o.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return o.parent}var jf=class{static getSameOriginWindowChain(e){let t=e0.get(e);if(!t){t=[],e0.set(e,t);let n=e,i;do i=IB(n),i?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0,r=this.getSameOriginWindowChain(e);for(let s of r){let a=s.window.deref();if(n+=a?.scrollY??0,i+=a?.scrollX??0,a===t||!s.iframeElement)break;let l=s.iframeElement.getBoundingClientRect();n+=l.top,i+=l.left}return{top:n,left:i}}};var Tn=class{browserEvent;leftButton;middleButton;rightButton;buttons;target;detail;posx;posy;ctrlKey;shiftKey;altKey;metaKey;timestamp;constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=jf.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}};var Rr=class{browserEvent;deltaY;deltaX;target;constructor(e,t=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let i=!1;if(eu){let r=navigator.userAgent.match(/Chrome\/(\d+)/);i=(r?parseInt(r[1]):123)<=122}if(e){let r=e,s=e,a=e.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")i?this.deltaY=r.wheelDeltaY/(120*a):this.deltaY=r.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?To&&!Fe?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")fs&&St?this.deltaX=-(r.wheelDeltaX/120):i?this.deltaX=r.wheelDeltaX/(120*a):this.deltaX=r.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?To&&!Fe?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(i?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}};function t0(o){return o}var Yf=class{lastCache=void 0;lastArgKey=void 0;_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=t0):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}},_h=class{_map=new Map;_map2=new Map;get cachedValues(){return this._map}_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=t0):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);let n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}};var Jn=class{constructor(e){this.executor=e}_didRun=!1;_value;_error;get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function Xx(o){return o<0?0:o>255?255:o|0}function o0(o){return!o||typeof o!="string"?!0:o.trim().length===0}var SB=/{(\d+)}/g;function nu(o,...e){return e.length===0?o:o.replace(SB,function(t,n){let i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}function r0(o){return o.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function Lh(o){return o.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function lo(o){return o.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function s0(o,e,t="\u2026"){return o.length<=e?o:`${o.substr(0,e)}${t}`}function a0(o,e,t="\u2026"){if(o.length<=e)return o;let n=Math.ceil(e/2)-t.length/2,i=Math.floor(e/2)-t.length/2;return`${o.substr(0,n)}${t}${o.substr(o.length-i)}`}function Zf(o,e){if(!o||!e)return o;let t=e.length;if(t===0||o.length===0)return o;let n=0;for(;o.indexOf(e,n)===n;)n=n+t;return o.substring(n)}function Jf(o,e,t={}){if(!o)throw new Error("Cannot create regex from empty string");e||(o=lo(o)),t.wholeWord&&(/\B/.test(o.charAt(0))||(o="\\b"+o),/\B/.test(o.charAt(o.length-1))||(o=o+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(o,n)}function iu(o){return o.split(/\r\n|\r|\n/)}function qi(o){for(let e=0,t=o.length;e<t;e++){let n=o.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Tt(o,e=0,t=o.length){for(let n=e;n<t;n++){let i=o.charCodeAt(n);if(i!==32&&i!==9)return o.substring(e,n)}return o.substring(e,t)}function zo(o,e=o.length-1){for(let t=e;t>=0;t--){let n=o.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Rh(o,e){return o<e?-1:o>e?1:0}function l0(o,e,t=0,n=o.length,i=0,r=e.length){for(;t<n&&i<r;t++,i++){let l=o.charCodeAt(t),d=e.charCodeAt(i);if(l<d)return-1;if(l>d)return 1}let s=n-t,a=r-i;return s<a?-1:s>a?1:0}function Jx(o,e,t=0,n=o.length,i=0,r=e.length){for(;t<n&&i<r;t++,i++){let l=o.charCodeAt(t),d=e.charCodeAt(i);if(l===d)continue;if(l>=128||d>=128)return l0(o.toLowerCase(),e.toLowerCase(),t,n,i,r);Dd(l)&&(l-=32),Dd(d)&&(d-=32);let u=l-d;if(u!==0)return u}let s=n-t,a=r-i;return s<a?-1:s>a?1:0}function Ah(o){return o>=48&&o<=57}function Dd(o){return o>=97&&o<=122}function bs(o){return o>=65&&o<=90}function Ho(o,e){return o.length===e.length&&Jx(o,e)===0}function cl(o,e){let t=e.length;return e.length>o.length?!1:Jx(o,e,0,t)===0}function ko(o){return 55296<=o&&o<=56319}function ou(o){return 56320<=o&&o<=57343}function eb(o,e){return(o-55296<<10)+(e-56320)+65536}function ru(o,e,t){let n=o.charCodeAt(t);if(ko(n)&&t+1<e){let i=o.charCodeAt(t+1);if(ou(i))return eb(n,i)}return n}function xB(o,e){let t=o.charCodeAt(e-1);if(ou(t)&&e>1){let n=o.charCodeAt(e-2);if(ko(n))return eb(n,t)}return t}var _d=class{_str;_len;_offset;get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=xB(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=ru(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}},Ld=class{_iterator;get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new _d(e,t)}nextGraphemeLength(){let e=Qf.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let r=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(n0(i,s)){t.setOffset(r);break}i=s}return t.offset-n}prevGraphemeLength(){let e=Qf.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let r=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(n0(s,i)){t.setOffset(r);break}i=s}return n-t.offset}eol(){return this._iterator.eol()}};function eE(o,e){return new Ld(o,e).nextGraphemeLength()}function tE(o,e){return new Ld(o,e).prevGraphemeLength()}function d0(o,e){e>0&&ou(o.charCodeAt(e))&&e--;let t=e+eE(o,e);return[t-tE(o,t),t]}var Zx;function EB(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Oh(o){return Zx||(Zx=EB()),Zx.test(o)}var CB=/^[\t\n\r\x20-\x7E]*$/;function nE(o){return CB.test(o)}var iE=/[\u2028\u2029]/;function tb(o){return iE.test(o)}function c0(o){return o>=11904&&o<=55215||o>=63744&&o<=64255||o>=65281&&o<=65374}function Ph(o){return o>=127462&&o<=127487||o===8986||o===8987||o===9200||o===9203||o>=9728&&o<=10175||o===11088||o===11093||o>=127744&&o<=128591||o>=128640&&o<=128764||o>=128992&&o<=129008||o>=129280&&o<=129535||o>=129648&&o<=129782}var u0=String.fromCharCode(65279);function p0(o){return!!(o&&o.length>0&&o.charCodeAt(0)===65279)}function h0(o){let e=26;return o=o%(2*e),o<e?String.fromCharCode(97+o):String.fromCharCode(65+o-e)}function n0(o,e){return o===0?e!==5&&e!==7:o===2&&e===3?!1:o===4||o===2||o===3||e===4||e===2||e===3?!0:!(o===8&&(e===8||e===9||e===11||e===12)||(o===11||o===9)&&(e===9||e===10)||(o===12||o===10)&&e===10||e===5||e===13||e===7||o===1||o===13&&e===14||o===6&&e===6)}var Qf=class o{static _INSTANCE=null;static getInstance(){return o._INSTANCE||(o._INSTANCE=new o),o._INSTANCE}_data;constructor(){this._data=wB()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,n=t.length/3,i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}};function wB(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function m0(o,e){if(o===0)return 0;let t=TB(o,e);if(t!==void 0)return t;let n=new _d(e,o);return n.prevCodePoint(),n.offset}function TB(o,e){let t=new _d(e,o),n=t.prevCodePoint();for(;kB(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!Ph(n))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}function kB(o){return 127995<=o&&o<=127999}var i0=class o{constructor(e){this.confusableDictionary=e}static ambiguousCharacterData=new Jn(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));static cache=new Yf({getCacheKey:JSON.stringify},e=>{function t(u){let p=new Map;for(let h=0;h<u.length;h+=2)p.set(u[h],u[h+1]);return p}function n(u,p){let h=new Map(u);for(let[m,g]of p)h.set(m,g);return h}function i(u,p){if(!u)return p;let h=new Map;for(let[m,g]of u)p.has(m)&&h.set(m,g);return h}let r=this.ambiguousCharacterData.value,s=e.filter(u=>!u.startsWith("_")&&u in r);s.length===0&&(s=["_default"]);let a;for(let u of s){let p=t(r[u]);a=i(a,p)}let l=t(r._common),d=n(l,a);return new o(d)});static getInstance(e){return o.cache.get(Array.from(e))}static _locales=new Jn(()=>Object.keys(o.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));static getLocales(){return o._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){let n=e.codePointAt(t);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};function gn(o){return typeof o=="string"}function kn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}function Li(o){return typeof o=="number"&&!isNaN(o)}function nb(o){return o===!0||o===!1}function Un(o){return typeof o>"u"}function vi(o){return Un(o)||o===null}function su(o,e){if(!o)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function lt(o){if(vi(o))throw new Error("Assertion Failed: argument is undefined or null");return o}function oE(...o){let e=[];for(let t=0;t<o.length;t++){let n=o[t];if(vi(n))throw new Error(`Assertion Failed: argument at index ${t} is undefined or null`);e.push(n)}return e}var DB=Object.prototype.hasOwnProperty;function Rd(o){if(!kn(o))return!1;for(let e in o)if(DB.call(o,e))return!1;return!0}function au(o){return typeof o=="function"}function rE(...o){return o.length>0&&o.every(au)}function g0(o,e){let t=Math.min(o.length,e.length);for(let n=0;n<t;n++)_B(o[n],e[n])}function _B(o,e){if(gn(e)){if(typeof o!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(au(e)){try{if(o instanceof e)return}catch{}if(!vi(o)&&o.constructor===e||e.length===1&&e.call(void 0,o)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function ul(o){return o===47||o===92}function Mh(o){return o.replace(/[\\/]/g,rt.sep)}function b0(o){return o.indexOf("/")===-1&&(o=Mh(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}function sE(o,e=rt.sep){if(!o)return"";let t=o.length,n=o.charCodeAt(0);if(ul(n)){if(ul(o.charCodeAt(1))&&!ul(o.charCodeAt(2))){let r=3,s=r;for(;r<t&&!ul(o.charCodeAt(r));r++);if(s!==r&&!ul(o.charCodeAt(r+1))){for(r+=1;r<t;r++)if(ul(o.charCodeAt(r)))return o.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(y0(n)&&o.charCodeAt(1)===58)return ul(o.charCodeAt(2))?o.slice(0,2)+e:o.slice(0,2);let i=o.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(ul(o.charCodeAt(i)))return o.slice(0,i+1)}return""}var LB=/[\\/:\*\?"<>\|]/g,RB=/[/]/g,AB=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function v0(o,e=St){let t=e?LB:RB;return!(!o||o.length===0||/^\s+$/.test(o)||(t.lastIndex=0,t.test(o))||e&&AB.test(o)||o==="."||o===".."||e&&o[o.length-1]==="."||e&&o.length!==o.trim().length||o.length>255)}function Nh(o,e,t,n=ao){if(o===e)return!0;if(!o||!e||e.length>o.length)return!1;if(t){if(!cl(o,e))return!1;if(e.length===o.length)return!0;let r=e.length;return e.charAt(e.length-1)===n&&r--,o.charAt(r)===n}return e.charAt(e.length-1)!==n&&(e+=n),o.indexOf(e)===0}function y0(o){return o>=65&&o<=90||o>=97&&o<=122}function I0(o,e=St){return e?y0(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}function S0(o,e=St){return I0(o,e)?o[0]:void 0}function x0(o,e,t){return e.length>o.length?-1:o===e?0:(t&&(o=o.toLowerCase(),e=e.toLowerCase()),o.indexOf(e))}function E0(o){let e=o.split(":"),t,n,i;for(let r of e){let s=Number(r);Li(s)?n===void 0?n=s:i===void 0&&(i=s):t=t?[t,r].join(":"):r}if(!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:n!==void 0?n:void 0,column:i!==void 0?i:n!==void 0?1:void 0}}var me;(ke=>(ke.inMemory="inmemory",ke.vscode="vscode",ke.internal="private",ke.walkThrough="walkThrough",ke.walkThroughSnippet="walkThroughSnippet",ke.http="http",ke.https="https",ke.file="file",ke.mailto="mailto",ke.untitled="untitled",ke.data="data",ke.command="command",ke.vscodeRemote="vscode-remote",ke.vscodeRemoteResource="vscode-remote-resource",ke.vscodeManagedRemoteResource="vscode-managed-remote-resource",ke.vscodeUserData="vscode-userdata",ke.vscodeCustomEditor="vscode-custom-editor",ke.vscodeNotebookCell="vscode-notebook-cell",ke.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",ke.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",ke.vscodeNotebookCellOutput="vscode-notebook-cell-output",ke.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",ke.vscodeNotebookMetadata="vscode-notebook-metadata",ke.vscodeInteractiveInput="vscode-interactive-input",ke.vscodeSettings="vscode-settings",ke.vscodeWorkspaceTrust="vscode-workspace-trust",ke.vscodeTerminal="vscode-terminal",ke.vscodeChatCodeBlock="vscode-chat-code-block",ke.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",ke.vscodeChatSesssion="vscode-chat-editor",ke.webviewPanel="webview-panel",ke.vscodeWebview="vscode-webview",ke.extension="extension",ke.vscodeFileResource="vscode-file",ke.tmp="tmp",ke.vsls="vsls",ke.vscodeSourceControl="vscode-scm",ke.commentsInput="comment",ke.codeSetting="code-setting",ke.outputChannel="output"))(me||={});function ib(o,e){return j.isUri(o)?Ho(o.scheme,e):cl(o,e+":")}var PB="tkn",aE=class{_hosts=Object.create(null);_ports=Object.create(null);_connectionTokens=Object.create(null);_preferredWebSchema="http";_delegate=null;_serverRootPath="/";setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=MB(e,t)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return rt.join(this._serverRootPath,me.vscodeRemoteResource)}set(e,t,n){this._hosts[e]=t,this._ports[e]=n}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return bt(a),e}let t=e.authority,n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[t],r=this._connectionTokens[t],s=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(s+=`&${PB}=${encodeURIComponent(r)}`),j.from({scheme:Cn?this._preferredWebSchema:me.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},ob=new aE;function MB(o,e){return rt.join(e??"/",`${o.quality??"oss"}-${o.commit??"dev"}`)}var dE="vscode-app",lE=class o{static FALLBACK_AUTHORITY=dE;asBrowserUri(e){let t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===me.vscodeRemote?ob.rewrite(e):e.scheme===me.file&&(wr||h_===`${me.vscodeFileResource}://${o.FALLBACK_AUTHORITY}`)?e.with({scheme:me.vscodeFileResource,authority:e.authority||o.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===me.vscodeFileResource?e.with({scheme:me.file,authority:e.authority!==o.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){if(j.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return j.joinPath(j.parse(n,!0),e);let i=so(n,e);return j.file(i)}return j.parse(t.toUrl(e))}},vs=new lE,NB;(r=>{let o=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);r.CoopAndCoep=Object.freeze(o.get("3"));let t="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:j.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let l=a?.get(t);if(l)return o.get(l)}r.getHeadersFromQuery=n;function i(s,a,l){if(!globalThis.crossOriginIsolated)return;let d=a&&l?"3":l?"2":"1";s instanceof URLSearchParams?s.set(t,d):s[t]=d}r.addSearchParam=i})(NB||={});function ua(o){return fh(o,!0)}var Fh=class{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Rh(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===me.file)return Nh(ua(e),ua(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(cE(e.authority,t.authority))return Nh(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return j.joinPath(e,...t)}basenameOrAuthority(e){return Ri(e)||e.authority}basename(e){return rt.basename(e.path)}extname(e){return rt.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===me.file?t=j.file(Kc(ua(e))).path:(t=rt.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===me.file?t=j.file(gs(ua(e))).path:t=rt.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!cE(e.authority,t.authority))return;if(e.scheme===me.file){let r=I_(ua(e),ua(t));return St?Mh(r):r}let n=e.path||"/",i=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(let s=Math.min(n.length,i.length);r<s&&!(n.charCodeAt(r)!==i.charCodeAt(r)&&n.charAt(r).toLowerCase()!==i.charAt(r).toLowerCase());r++);n=i.substr(0,r)+n.substr(r)}return rt.relative(n,i)}resolvePath(e,t){if(e.scheme===me.file){let n=j.file(Hc(ua(e),t));return e.with({authority:n.authority,path:n.path})}return t=b0(t),e.with({path:rt.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Ho(e,t)}hasTrailingPathSeparator(e,t=ao){if(e.scheme===me.file){let n=ua(e);return n.length>sE(n).length&&n[n.length-1]===t}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ao){return C0(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ao){let n=!1;if(e.scheme===me.file){let i=ua(e);n=i!==void 0&&i.length===sE(i).length&&i[i.length-1]===t}else{t="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!C0(e,t)?e.with({path:e.path+"/"}):e}},xt=new Fh(()=>!1),FB=new Fh(o=>o.scheme===me.file?!Kt:!0),uE=new Fh(o=>!0),fn=xt.isEqual.bind(xt),_3=xt.isEqualOrParent.bind(xt),L3=xt.getComparisonKey.bind(xt),BB=xt.basenameOrAuthority.bind(xt),Ri=xt.basename.bind(xt),Ad=xt.extname.bind(xt),ys=xt.dirname.bind(xt),vt=xt.joinPath.bind(xt),R3=xt.normalizePath.bind(xt),lu=xt.relativePath.bind(xt),pE=xt.resolvePath.bind(xt),A3=xt.isAbsolutePath.bind(xt),cE=xt.isEqualAuthority.bind(xt),C0=xt.hasTrailingPathSeparator.bind(xt),O3=xt.removeTrailingPathSeparator.bind(xt),P3=xt.addTrailingPathSeparator.bind(xt);var w0;(r=>{r.META_DATA_LABEL="label",r.META_DATA_DESCRIPTION="description",r.META_DATA_SIZE="size",r.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(u=>{let[p,h]=u.split(":");p&&h&&a.set(p,h)});let d=s.path.substring(0,s.path.indexOf(";"));return d&&a.set(r.META_DATA_MIME,d),a}r.parseMetaData=i})(w0||={});function T0(o,e,t){if(e){let n=o.path;return n&&n[0]!==rt.sep&&(n=rt.sep+n),o.with({scheme:t,authority:e,path:n})}return o.with({scheme:t})}function lb(o){return!!o&&typeof o.then=="function"}function Uh(o){let e=new Wo,t=o(e.token),n=new Promise((i,r)=>{let s=e.token.onCancellationRequested(()=>{s.dispose(),r(new Gi)});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),i(a)},a=>{s.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,r){return n.then(i,r)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function zh(o,e,t){return new Promise((n,i)=>{let r=e.onCancellationRequested(()=>{r.dispose(),n(t)});o.then(n,i).finally(()=>r.dispose())})}function D0(){let o,e;return{promise:new Promise((n,i)=>{o=n,e=i}),resolve:o,reject:e}}var hE=class{activePromise;queuedPromise;queuedPromiseFactory;isDisposed=!1;constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let t=()=>{if(this.queuedPromise=null,this.isDisposed)return;let n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}dispose(){this.isDisposed=!0}};var VB=(o,e)=>{let t=!0,n=setTimeout(()=>{t=!1,e()},o);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},WB=o=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,o())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},Ar=class{constructor(e){this.defaultDelay=e;this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}deferred;completionPromise;doResolve;doReject;task;trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,r)=>{this.doResolve=i,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let i=this.task;return this.task=null,i()}}));let n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===Wx?WB(n):VB(t,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new Gi),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}},Vh=class{delayer;throttler;constructor(e){this.delayer=new Ar(e),this.throttler=new hE}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}},du=class{_isOpen;_promise;_completePromise;constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}};function $i(o,e){return e?new Promise((t,n)=>{let i=setTimeout(()=>{r.dispose(),t()},o),r=e.onCancellationRequested(()=>{clearTimeout(i),r.dispose(),n(new Gi)})}):Uh(t=>$i(o,t))}function db(o,e=0,t){let n=setTimeout(()=>{o(),t&&i.dispose()},e),i=re(()=>{clearTimeout(n),t?.deleteAndLeak(i)});return t?.add(i),i}var pa=class{_token;_isDisposed=!1;constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new ut("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new ut("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},rb=class{disposable=void 0;isDisposed=!1;cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new ut("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let i=n.setInterval(()=>{e()},t);this.disposable=re(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},yi=class{runner;timeoutToken;timeout;timeoutHandler;constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}};var pl,Bh;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Bh=(o,e)=>{wf(()=>{if(t)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:Bh=(o,e,t)=>{let n=o.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0),i=!1;return{dispose(){i||(i=!0,o.cancelIdleCallback(n))}}},pl=o=>Bh(globalThis,o)})();var sb=class{_executor;_handle;_didRun=!1;_value;_error;constructor(e,t){this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=Bh(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},Wh=class extends sb{constructor(e){super(globalThis,e)}};var ab=class{_running;_queued;isRunning(e){return typeof e=="number"?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,n){return this._running={taskId:e,cancel:()=>n?.(),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){let e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{let{promise:t,resolve:n,reject:i}=D0();this._queued={run:e,promise:t,promiseResolve:n,promiseReject:i}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}};var Or=class{completeCallback;errorCallback;outcome;get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}p;constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Gi)}},co;(t=>{async function o(n){let i,r=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return r}t.settled=o;function e(n){return new Promise(async(i,r)=>{try{await n(i,r)}catch(s){r(s)}})}t.withAsyncBody=e})(co||={});var k0=class o{static fromArray(e){return new o(t=>{t.emitMany(e)})}static fromPromise(e){return new o(async t=>{t.emitMany(await e)})}static fromPromises(e){return new o(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new o(async t=>{await Promise.all(e.map(async n=>{for await(let i of n)t.emitOne(i)}))})}static EMPTY=o.fromArray([]);_state;_results;_error;_onReturn;_onStateChanged;constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new x,queueMicrotask(async()=>{let n={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await G.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new o(async n=>{for await(let i of e)n.emitOne(t(i))})}map(e){return o.map(this,e)}static filter(e,t){return new o(async n=>{for await(let i of e)t(i)&&n.emitOne(i)})}filter(e){return o.filter(this,e)}static coalesce(e){return o.filter(e,t=>!!t)}coalesce(){return o.coalesce(this)}static async toPromise(e){let t=[];for await(let n of e)t.push(n);return t}toPromise(){return o.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var{entries:N0,setPrototypeOf:_0,isFrozen:UB,getPrototypeOf:zB,getOwnPropertyDescriptor:HB}=Object,{freeze:uo,seal:Mr,create:KB}=Object,{apply:yE,construct:IE}=typeof Reflect<"u"&&Reflect;yE||(yE=function(e,t,n){return e.apply(t,n)});uo||(uo=function(e){return e});Mr||(Mr=function(e){return e});IE||(IE=function(e,t){return new e(...t)});var GB=sr(Array.prototype.forEach),L0=sr(Array.prototype.pop),Hh=sr(Array.prototype.push),pb=sr(String.prototype.toLowerCase),mE=sr(String.prototype.toString),qB=sr(String.prototype.match),Pr=sr(String.prototype.replace),$B=sr(String.prototype.indexOf),jB=sr(String.prototype.trim),Ko=sr(RegExp.prototype.test),Kh=YB(TypeError);function sr(o){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return yE(o,e,n)}}function YB(o){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return IE(o,t)}}function yt(o,e,t){var n;t=(n=t)!==null&&n!==void 0?n:pb,_0&&_0(o,null);let i=e.length;for(;i--;){let r=e[i];if(typeof r=="string"){let s=t(r);s!==r&&(UB(e)||(e[i]=s),r=s)}o[r]=!0}return o}function cu(o){let e=KB(null);for(let[t,n]of N0(o))e[t]=n;return e}function cb(o,e){for(;o!==null;){let n=HB(o,e);if(n){if(n.get)return sr(n.get);if(typeof n.value=="function")return sr(n.value)}o=zB(o)}function t(n){return console.warn("fallback value for",n),null}return t}var R0=uo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),gE=uo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fE=uo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),QB=uo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bE=uo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),XB=uo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),A0=uo(["#text"]),O0=uo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),vE=uo(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P0=uo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ub=uo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ZB=Mr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),JB=Mr(/<%[\w\W]*|[\w\W]*%>/gm),e2=Mr(/\${[\w\W]*}/gm),t2=Mr(/^data-[\-\w.\u00B7-\uFFFF]/),n2=Mr(/^aria-[\-\w]+$/),F0=Mr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),i2=Mr(/^(?:\w+script|data):/i),o2=Mr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),B0=Mr(/^html$/i),M0=Object.freeze({__proto__:null,MUSTACHE_EXPR:ZB,ERB_EXPR:JB,TMPLIT_EXPR:e2,DATA_ATTR:t2,ARIA_ATTR:n2,IS_ALLOWED_URI:F0,IS_SCRIPT_OR_DATA:i2,ATTR_WHITESPACE:o2,DOCTYPE_NAME:B0}),r2=()=>typeof window>"u"?null:window,s2=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));let r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function V0(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r2(),e=_e=>V0(_e);if(e.version="3.0.5",e.removed=[],!o||!o.document||o.document.nodeType!==9)return e.isSupported=!1,e;let t=o.document,n=t.currentScript,{document:i}=o,{DocumentFragment:r,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:d,NamedNodeMap:u=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:m}=o,g=l.prototype,f=cb(g,"cloneNode"),y=cb(g,"nextSibling"),C=cb(g,"childNodes"),w=cb(g,"parentNode");if(typeof s=="function"){let _e=i.createElement("template");_e.content&&_e.content.ownerDocument&&(i=_e.content.ownerDocument)}let R,_="",{implementation:B,createNodeIterator:K,createDocumentFragment:F,getElementsByTagName:V}=i,{importNode:oe}=t,ge={};e.isSupported=typeof N0=="function"&&typeof w=="function"&&B&&B.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:we,ERB_EXPR:ht,TMPLIT_EXPR:tt,DATA_ATTR:gt,ARIA_ATTR:ve,IS_SCRIPT_OR_DATA:se,ATTR_WHITESPACE:Ie}=M0,{IS_ALLOWED_URI:fe}=M0,Se=null,qe=yt({},[...R0,...gE,...fE,...bE,...A0]),Ue=null,_t=yt({},[...O0,...vE,...P0,...ub]),Xe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ke=null,Zn=null,Ln=!0,io=!0,xo=!1,$a=!0,ui=!1,xr=!1,hd=!1,ja=!1,pi=!1,Ya=!1,Qa=!1,Vc=!0,Wc=!1,Oe="user-content-",na=!0,Xa=!1,ss={},ir=null,rh=yt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),md=null,sh=yt({},["audio","video","img","source","image","track"]),as=null,ah=yt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ls="http://www.w3.org/1998/Math/MathML",Fo="http://www.w3.org/2000/svg",xn="http://www.w3.org/1999/xhtml",Bo=xn,ia=!1,Hi=null,Za=yt({},[ls,Fo,xn],mE),Er,ds=["application/xhtml+xml","text/html"],de="text/html",ne,D=null,Z=i.createElement("form"),le=function(M){return M instanceof RegExp||M instanceof Function},$e=function(M){if(!(D&&D===M)){if((!M||typeof M!="object")&&(M={}),M=cu(M),Er=ds.indexOf(M.PARSER_MEDIA_TYPE)===-1?Er=de:Er=M.PARSER_MEDIA_TYPE,ne=Er==="application/xhtml+xml"?mE:pb,Se="ALLOWED_TAGS"in M?yt({},M.ALLOWED_TAGS,ne):qe,Ue="ALLOWED_ATTR"in M?yt({},M.ALLOWED_ATTR,ne):_t,Hi="ALLOWED_NAMESPACES"in M?yt({},M.ALLOWED_NAMESPACES,mE):Za,as="ADD_URI_SAFE_ATTR"in M?yt(cu(ah),M.ADD_URI_SAFE_ATTR,ne):ah,md="ADD_DATA_URI_TAGS"in M?yt(cu(sh),M.ADD_DATA_URI_TAGS,ne):sh,ir="FORBID_CONTENTS"in M?yt({},M.FORBID_CONTENTS,ne):rh,ke="FORBID_TAGS"in M?yt({},M.FORBID_TAGS,ne):{},Zn="FORBID_ATTR"in M?yt({},M.FORBID_ATTR,ne):{},ss="USE_PROFILES"in M?M.USE_PROFILES:!1,Ln=M.ALLOW_ARIA_ATTR!==!1,io=M.ALLOW_DATA_ATTR!==!1,xo=M.ALLOW_UNKNOWN_PROTOCOLS||!1,$a=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ui=M.SAFE_FOR_TEMPLATES||!1,xr=M.WHOLE_DOCUMENT||!1,pi=M.RETURN_DOM||!1,Ya=M.RETURN_DOM_FRAGMENT||!1,Qa=M.RETURN_TRUSTED_TYPE||!1,ja=M.FORCE_BODY||!1,Vc=M.SANITIZE_DOM!==!1,Wc=M.SANITIZE_NAMED_PROPS||!1,na=M.KEEP_CONTENT!==!1,Xa=M.IN_PLACE||!1,fe=M.ALLOWED_URI_REGEXP||F0,Bo=M.NAMESPACE||xn,Xe=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&le(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Xe.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&le(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Xe.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Xe.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ui&&(io=!1),Ya&&(pi=!0),ss&&(Se=yt({},[...A0]),Ue=[],ss.html===!0&&(yt(Se,R0),yt(Ue,O0)),ss.svg===!0&&(yt(Se,gE),yt(Ue,vE),yt(Ue,ub)),ss.svgFilters===!0&&(yt(Se,fE),yt(Ue,vE),yt(Ue,ub)),ss.mathMl===!0&&(yt(Se,bE),yt(Ue,P0),yt(Ue,ub))),M.ADD_TAGS&&(Se===qe&&(Se=cu(Se)),yt(Se,M.ADD_TAGS,ne)),M.ADD_ATTR&&(Ue===_t&&(Ue=cu(Ue)),yt(Ue,M.ADD_ATTR,ne)),M.ADD_URI_SAFE_ATTR&&yt(as,M.ADD_URI_SAFE_ATTR,ne),M.FORBID_CONTENTS&&(ir===rh&&(ir=cu(ir)),yt(ir,M.FORBID_CONTENTS,ne)),na&&(Se["#text"]=!0),xr&&yt(Se,["html","head","body"]),Se.table&&(yt(Se,["tbody"]),delete ke.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw Kh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Kh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=M.TRUSTED_TYPES_POLICY,_=R.createHTML("")}else R===void 0&&(R=s2(m,n)),R!==null&&typeof _=="string"&&(_=R.createHTML(""));uo&&uo(M),D=M}},Lt=yt({},["mi","mo","mn","ms","mtext"]),Vn=yt({},["foreignobject","desc","title","annotation-xml"]),hi=yt({},["title","style","font","a","script"]),Ne=yt({},gE);yt(Ne,fE),yt(Ne,QB);let S=yt({},bE);yt(S,XB);let E=function(M){let he=w(M);(!he||!he.tagName)&&(he={namespaceURI:Bo,tagName:"template"});let Te=pb(M.tagName),Ht=pb(he.tagName);return Hi[M.namespaceURI]?M.namespaceURI===Fo?he.namespaceURI===xn?Te==="svg":he.namespaceURI===ls?Te==="svg"&&(Ht==="annotation-xml"||Lt[Ht]):!!Ne[Te]:M.namespaceURI===ls?he.namespaceURI===xn?Te==="math":he.namespaceURI===Fo?Te==="math"&&Vn[Ht]:!!S[Te]:M.namespaceURI===xn?he.namespaceURI===Fo&&!Vn[Ht]||he.namespaceURI===ls&&!Lt[Ht]?!1:!S[Te]&&(hi[Te]||!Ne[Te]):!!(Er==="application/xhtml+xml"&&Hi[M.namespaceURI]):!1},T=function(M){Hh(e.removed,{element:M});try{M.parentNode.removeChild(M)}catch{M.remove()}},L=function(M,he){try{Hh(e.removed,{attribute:he.getAttributeNode(M),from:he})}catch{Hh(e.removed,{attribute:null,from:he})}if(he.removeAttribute(M),M==="is"&&!Ue[M])if(pi||Ya)try{T(he)}catch{}else try{he.setAttribute(M,"")}catch{}},O=function(M){let he,Te;if(ja)M="<remove></remove>"+M;else{let Ki=qB(M,/^[\r\n\t ]+/);Te=Ki&&Ki[0]}Er==="application/xhtml+xml"&&Bo===xn&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");let Ht=R?R.createHTML(M):M;if(Bo===xn)try{he=new h().parseFromString(Ht,Er)}catch{}if(!he||!he.documentElement){he=B.createDocument(Bo,"template",null);try{he.documentElement.innerHTML=ia?_:Ht}catch{}}let Rn=he.body||he.documentElement;return M&&Te&&Rn.insertBefore(i.createTextNode(Te),Rn.childNodes[0]||null),Bo===xn?V.call(he,xr?"html":"body")[0]:xr?he.documentElement:Rn},q=function(M){return K.call(M.ownerDocument||M,M,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},X=function(M){return M instanceof p&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof u)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},ye=function(M){return typeof a=="object"?M instanceof a:M&&typeof M=="object"&&typeof M.nodeType=="number"&&typeof M.nodeName=="string"},Ce=function(M,he,Te){ge[M]&&GB(ge[M],Ht=>{Ht.call(e,he,Te,D)})},Qe=function(M){let he;if(Ce("beforeSanitizeElements",M,null),X(M))return T(M),!0;let Te=ne(M.nodeName);if(Ce("uponSanitizeElement",M,{tagName:Te,allowedTags:Se}),M.hasChildNodes()&&!ye(M.firstElementChild)&&(!ye(M.content)||!ye(M.content.firstElementChild))&&Ko(/<[/\w]/g,M.innerHTML)&&Ko(/<[/\w]/g,M.textContent))return T(M),!0;if(!Se[Te]||ke[Te]){if(!ke[Te]&&Zt(Te)&&(Xe.tagNameCheck instanceof RegExp&&Ko(Xe.tagNameCheck,Te)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(Te)))return!1;if(na&&!ir[Te]){let Ht=w(M)||M.parentNode,Rn=C(M)||M.childNodes;if(Rn&&Ht){let Ki=Rn.length;for(let vn=Ki-1;vn>=0;--vn)Ht.insertBefore(f(Rn[vn],!0),y(M))}}return T(M),!0}return M instanceof l&&!E(M)||(Te==="noscript"||Te==="noembed"||Te==="noframes")&&Ko(/<\/no(script|embed|frames)/i,M.innerHTML)?(T(M),!0):(ui&&M.nodeType===3&&(he=M.textContent,he=Pr(he,we," "),he=Pr(he,ht," "),he=Pr(he,tt," "),M.textContent!==he&&(Hh(e.removed,{element:M.cloneNode()}),M.textContent=he)),Ce("afterSanitizeElements",M,null),!1)},wt=function(M,he,Te){if(Vc&&(he==="id"||he==="name")&&(Te in i||Te in Z))return!1;if(!(io&&!Zn[he]&&Ko(gt,he))){if(!(Ln&&Ko(ve,he))){if(!Ue[he]||Zn[he]){if(!(Zt(M)&&(Xe.tagNameCheck instanceof RegExp&&Ko(Xe.tagNameCheck,M)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(M))&&(Xe.attributeNameCheck instanceof RegExp&&Ko(Xe.attributeNameCheck,he)||Xe.attributeNameCheck instanceof Function&&Xe.attributeNameCheck(he))||he==="is"&&Xe.allowCustomizedBuiltInElements&&(Xe.tagNameCheck instanceof RegExp&&Ko(Xe.tagNameCheck,Te)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(Te))))return!1}else if(!as[he]){if(!Ko(fe,Pr(Te,Ie,""))){if(!((he==="src"||he==="xlink:href"||he==="href")&&M!=="script"&&$B(Te,"data:")===0&&md[M])){if(!(xo&&!Ko(se,Pr(Te,Ie,"")))){if(Te)return!1}}}}}}return!0},Zt=function(M){return M.indexOf("-")>0},En=function(M){let he,Te,Ht,Rn;Ce("beforeSanitizeAttributes",M,null);let{attributes:Ki}=M;if(!Ki)return;let vn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ue};for(Rn=Ki.length;Rn--;){he=Ki[Rn];let{name:cs,namespaceURI:px}=he;if(Te=cs==="value"?he.value:jB(he.value),Ht=ne(cs),vn.attrName=Ht,vn.attrValue=Te,vn.keepAttr=!0,vn.forceKeepAttr=void 0,Ce("uponSanitizeAttribute",M,vn),Te=vn.attrValue,vn.forceKeepAttr||(L(cs,M),!vn.keepAttr))continue;if(!$a&&Ko(/\/>/i,Te)){L(cs,M);continue}ui&&(Te=Pr(Te,we," "),Te=Pr(Te,ht," "),Te=Pr(Te,tt," "));let XD=ne(M.nodeName);if(wt(XD,Ht,Te)){if(Wc&&(Ht==="id"||Ht==="name")&&(L(cs,M),Te=Oe+Te),R&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!px)switch(m.getAttributeType(XD,Ht)){case"TrustedHTML":{Te=R.createHTML(Te);break}case"TrustedScriptURL":{Te=R.createScriptURL(Te);break}}try{px?M.setAttributeNS(px,cs,Te):M.setAttribute(cs,Te),L0(e.removed)}catch{}}}Ce("afterSanitizeAttributes",M,null)},rn=function _e(M){let he,Te=q(M);for(Ce("beforeSanitizeShadowDOM",M,null);he=Te.nextNode();)Ce("uponSanitizeShadowNode",he,null),!Qe(he)&&(he.content instanceof r&&_e(he.content),En(he));Ce("afterSanitizeShadowDOM",M,null)};return e.sanitize=function(_e){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he,Te,Ht,Rn;if(ia=!_e,ia&&(_e="<!-->"),typeof _e!="string"&&!ye(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw Kh("dirty is not a string, aborting")}else throw Kh("toString is not a function");if(!e.isSupported)return _e;if(hd||$e(M),e.removed=[],typeof _e=="string"&&(Xa=!1),Xa){if(_e.nodeName){let cs=ne(_e.nodeName);if(!Se[cs]||ke[cs])throw Kh("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof a)he=O("<!---->"),Te=he.ownerDocument.importNode(_e,!0),Te.nodeType===1&&Te.nodeName==="BODY"||Te.nodeName==="HTML"?he=Te:he.appendChild(Te);else{if(!pi&&!ui&&!xr&&_e.indexOf("<")===-1)return R&&Qa?R.createHTML(_e):_e;if(he=O(_e),!he)return pi?null:Qa?_:""}he&&ja&&T(he.firstChild);let Ki=q(Xa?_e:he);for(;Ht=Ki.nextNode();)Qe(Ht)||(Ht.content instanceof r&&rn(Ht.content),En(Ht));if(Xa)return _e;if(pi){if(Ya)for(Rn=F.call(he.ownerDocument);he.firstChild;)Rn.appendChild(he.firstChild);else Rn=he;return(Ue.shadowroot||Ue.shadowrootmode)&&(Rn=oe.call(t,Rn,!0)),Rn}let vn=xr?he.outerHTML:he.innerHTML;return xr&&Se["!doctype"]&&he.ownerDocument&&he.ownerDocument.doctype&&he.ownerDocument.doctype.name&&Ko(B0,he.ownerDocument.doctype.name)&&(vn="<!DOCTYPE "+he.ownerDocument.doctype.name+`>
`+vn),ui&&(vn=Pr(vn,we," "),vn=Pr(vn,ht," "),vn=Pr(vn,tt," ")),R&&Qa?R.createHTML(vn):vn},e.setConfig=function(_e){$e(_e),hd=!0},e.clearConfig=function(){D=null,hd=!1},e.isValidAttribute=function(_e,M,he){D||$e({});let Te=ne(_e),Ht=ne(M);return wt(Te,Ht,he)},e.addHook=function(_e,M){typeof M=="function"&&(ge[_e]=ge[_e]||[],Hh(ge[_e],M))},e.removeHook=function(_e){if(ge[_e])return L0(ge[_e])},e.removeHooks=function(_e){ge[_e]&&(ge[_e]=[])},e.removeAllHooks=function(){ge={}},e}var Is=V0();var Z3=Is.version,J3=Is.isSupported,Gh=Is.sanitize,e6=Is.setConfig,t6=Is.clearConfig,n6=Is.isValidAttribute,hb=Is.addHook,mb=Is.removeHook,i6=Is.removeHooks,o6=Is.removeAllHooks;function Nr(o){return xE(o,0)}function xE(o,e){switch(typeof o){case"object":return o===null?ha(349,e):Array.isArray(o)?l2(o,e):d2(o,e);case"string":return EE(o,e);case"boolean":return a2(o,e);case"number":return ha(o,e);case"undefined":return ha(937,e);default:return ha(617,e)}}function ha(o,e){return(e<<5)-e+o|0}function a2(o,e){return ha(o?433:863,e)}function EE(o,e){e=ha(149417,e);for(let t=0,n=o.length;t<n;t++)e=ha(o.charCodeAt(t),e);return e}function l2(o,e){return e=ha(104579,e),o.reduce((t,n)=>xE(n,t),e)}function d2(o,e){return e=ha(181387,e),Object.keys(o).sort().reduce((t,n)=>(t=EE(n,t),xE(o[n],t)),e)}function SE(o,e,t=32){let n=t-e,i=~((1<<n)-1);return(o<<e|(i&o)>>>n)>>>0}function U0(o,e=0,t=o.byteLength,n=0){for(let i=0;i<t;i++)o[e+i]=n}function c2(o,e,t="0"){for(;o.length<e;)o=t+o;return o}function qh(o,e=32){return o instanceof ArrayBuffer?Array.from(new Uint8Array(o)).map(t=>t.toString(16).padStart(2,"0")).join(""):c2((o>>>0).toString(16),e/4)}var z0=class o{static _bigBlock32=new DataView(new ArrayBuffer(320));_h0=1732584193;_h1=4023233417;_h2=2562383102;_h3=271733878;_h4=3285377520;_buff;_buffDV;_buffLen;_totalLen;_leftoverHighSurrogate;_finished;constructor(){this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let n=this._buff,i=this._buffLen,r=this._leftoverHighSurrogate,s,a;for(r!==0?(s=r,a=-1,r=0):(s=e.charCodeAt(0),a=0);;){let l=s;if(ko(s))if(a+1<t){let d=e.charCodeAt(a+1);ou(d)?(a++,l=eb(s,d)):l=65533}else{r=s;break}else ou(s)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),qh(this._h0)+qh(this._h1)+qh(this._h2)+qh(this._h3)+qh(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,U0(this._buff,this._buffLen),this._buffLen>56&&(this._step(),U0(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=o._bigBlock32,t=this._buffDV;for(let p=0;p<64;p+=4)e.setUint32(p,t.getUint32(p,!1),!1);for(let p=64;p<320;p+=4)e.setUint32(p,SE(e.getUint32(p-12,!1)^e.getUint32(p-32,!1)^e.getUint32(p-56,!1)^e.getUint32(p-64,!1),1),!1);let n=this._h0,i=this._h1,r=this._h2,s=this._h3,a=this._h4,l,d,u;for(let p=0;p<80;p++)p<20?(l=i&r|~i&s,d=1518500249):p<40?(l=i^r^s,d=1859775393):p<60?(l=i&r|i&s|r&s,d=2400959708):(l=i^r^s,d=3395469782),u=SE(n,5)+l+a+d+e.getUint32(p*4,!1)&4294967295,a=s,s=r,r=SE(i,30),i=n,n=u;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}};function po(o,e,t){return Math.min(Math.max(o,e),t)}var{registerWindow:G0,getWindow:Re,getDocument:w6,getWindows:jh,getWindowsCount:fb,getWindowId:hl,getWindowById:ma,hasWindow:T6,onDidRegisterWindow:Yh,onWillUnregisterWindow:k6,onDidUnregisterWindow:q0}=function(){let o=new Map;bf(xe,1);let e={window:xe,disposables:new Y};o.set(xe.vscodeWindowId,e);let t=new x,n=new x,i=new x;function r(s,a){return(typeof s=="number"?o.get(s):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:i.event,onDidUnregisterWindow:n.event,registerWindow(s){if(o.has(s.vscodeWindowId))return N.None;let a=new Y,l={window:s,disposables:a.add(new Y)};return o.set(s.vscodeWindowId,l),a.add(re(()=>{o.delete(s.vscodeWindowId),n.fire(s)})),a.add(W(s,ee.BEFORE_UNLOAD,()=>{i.fire(s)})),t.fire(l),a},getWindows(){return o.values()},getWindowsCount(){return o.size},getWindowId(s){return s.vscodeWindowId},hasWindow(s){return o.has(s)},getWindowById:r,getWindow(s){let a=s;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;let l=s;return l?.view?l.view.window:xe},getDocument(s){return Re(s).document}}}();function dn(o){for(;o.firstChild;)o.firstChild.remove()}var wE=class{_handler;_node;_type;_options;constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function W(o,e,t,n){return new wE(o,e,t,n)}function u2(o,e){return function(t){return e(new Tn(o,t))}}function p2(o){return function(e){return o(new pt(e))}}var zn=function(e,t,n,i){let r=n;return t==="click"||t==="mousedown"||t==="contextmenu"?r=u2(Re(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=p2(n)),W(e,t,r,i)};var kE,Yi;var gb=class extends rb{defaultTarget;constructor(e){super(),this.defaultTarget=e&&Re(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}},$h=class{_runner;priority;_canceled;constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){bt(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let o=new Map,e=new Map,t=new Map,n=new Map,i=r=>{t.set(r,!1);let s=o.get(r)??[];for(e.set(r,s),o.set(r,[]),n.set(r,!0);s.length>0;)s.sort($h.sort),s.shift().execute();n.set(r,!1)};Yi=(r,s,a=0)=>{let l=hl(r),d=new $h(s,a),u=o.get(l);return u||(u=[],o.set(l,u)),u.push(d),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>i(l))),d},kE=(r,s,a)=>{let l=hl(r);if(n.get(l)){let d=new $h(s,a),u=e.get(l);return u||(u=[],e.set(l,u)),u.push(d),d}else return Yi(r,s,a)}})();function $0(o){return Re(o).getComputedStyle(o,null)}function Qh(o,e){let t=Re(o),n=t.document;if(o!==n.body)return new ln(o.clientWidth,o.clientHeight);if(el&&t?.visualViewport)return new ln(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new ln(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new ln(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new ln(n.documentElement.clientWidth,n.documentElement.clientHeight);if(e)return Qh(e);throw new Error("Unable to figure out browser width and height")}var ji=class o{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let i=$0(e),r=i?i.getPropertyValue(t):"0";return o.convertToPixels(e,r)}static getBorderLeftWidth(e){return o.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return o.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return o.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return o.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return o.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return o.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return o.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return o.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return o.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return o.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return o.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return o.getDimension(e,"margin-bottom","marginBottom")}},ln=class o{constructor(e,t){this.width=e;this.height=t}static None=new o(0,0);with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new o(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof o?e:new o(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};function Xh(o){let e=o.offsetParent,t=o.offsetTop,n=o.offsetLeft;for(;(o=o.parentNode)!==null&&o!==o.ownerDocument.body&&o!==o.ownerDocument.documentElement;){t-=o.scrollTop;let i=Q0(o)?null:$0(o);i&&(n-=i.direction!=="rtl"?o.scrollLeft:-o.scrollLeft),o===e&&(n+=ji.getBorderLeftWidth(o),t+=ji.getBorderTopWidth(o),t+=o.offsetTop,n+=o.offsetLeft,e=o.offsetParent)}return{left:n,top:t}}function bb(o,e,t){typeof e=="number"&&(o.style.width=`${e}px`),typeof t=="number"&&(o.style.height=`${t}px`)}function j0(o,e,t,n,i,r="absolute"){typeof e=="number"&&(o.style.top=`${e}px`),typeof t=="number"&&(o.style.right=`${t}px`),typeof n=="number"&&(o.style.bottom=`${n}px`),typeof i=="number"&&(o.style.left=`${i}px`),o.style.position=r}function Zh(o){let e=o.getBoundingClientRect(),t=Re(o);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function pu(o){let e=ji.getMarginLeft(o)+ji.getMarginRight(o);return o.offsetWidth+e}function vb(o){let e=ji.getBorderLeftWidth(o)+ji.getBorderRightWidth(o),t=ji.getPaddingLeft(o)+ji.getPaddingRight(o);return o.offsetWidth-e-t}function Y0(o){let e=ji.getBorderTopWidth(o)+ji.getBorderBottomWidth(o),t=ji.getPaddingTop(o)+ji.getPaddingBottom(o);return o.offsetHeight-e-t}function yb(o){let e=ji.getMarginTop(o)+ji.getMarginBottom(o);return o.offsetHeight+e}function ho(o,e){return!!e?.contains(o)}function Q0(o){return o&&!!o.host&&!!o.mode}function h2(o){for(;o.parentNode;){if(o===o.ownerDocument?.body)return null;o=o.parentNode}return Q0(o)?o:null}function Go(){let o=Ib().activeElement;for(;o?.shadowRoot;)o=o.shadowRoot.activeElement;return o}function ar(o){return Go()===o}function DE(o){return ho(Go(),o)}function Ib(){return fb()<=1?xe.document:Array.from(jh()).map(({window:e})=>e.document).find(e=>e.hasFocus())??xe.document}function Pd(){return Ib().defaultView?.window??xe}var Sb=new Map;function X0(o){return Sb.has(o)}function lr(o=xe.document.head,e,t){let n=document.createElement("style");if(n.type="text/css",n.media="screen",e?.(n),o.appendChild(n),t&&t.add(re(()=>n.remove())),o===xe.document.head){let i=new Set;Sb.set(n,i);for(let{window:r,disposables:s}of jh()){if(r===xe)continue;let a=s.add(J0(n,i,r));t?.add(a)}}return n}function Z0(o){let e=new Y;for(let[t,n]of Sb)e.add(J0(t,n,o));return e}function J0(o,e,t){let n=new Y,i=o.cloneNode(!0);t.document.head.appendChild(i),n.add(re(()=>i.remove()));for(let r of g2(o))i.sheet?.insertRule(r.cssText,i.sheet?.cssRules.length);return n.add(xb.observe(o,n,{childList:!0})(()=>{i.textContent=o.textContent})),e.add(i),n.add(re(()=>e.delete(i))),n}var xb=new class{mutationObservers=new Map;observe(o,e,t){let n=this.mutationObservers.get(o);n||(n=new Map,this.mutationObservers.set(o,n));let i=Nr(t),r=n.get(i);if(r)r.users+=1;else{let s=new x,a=new MutationObserver(d=>s.fire(d));a.observe(o,t);let l=r={users:1,observer:a,onDidMutate:s.event};e.add(re(()=>{l.users-=1,l.users===0&&(s.dispose(),a.disconnect(),n?.delete(i),n?.size===0&&this.mutationObservers.delete(o))})),n.set(i,r)}return r.onDidMutate}};function eL(o=xe.document.head){return nL("meta",o)}function tL(o=xe.document.head){return nL("link",o)}function nL(o,e=xe.document.head){let t=document.createElement(o);return e.appendChild(t),t}var CE=null;function m2(){return CE||(CE=lr()),CE}function g2(o){return o?.sheet?.rules?o.sheet.rules:o?.sheet?.cssRules?o.sheet.cssRules:[]}function _E(o,e,t=m2()){if(!(!t||!e)){t.sheet?.insertRule(`${o} {${e}}`,0);for(let n of Sb.get(t)??[])_E(o,e,n)}}function Dn(o){return o instanceof HTMLElement||o instanceof Re(o).HTMLElement}function iL(o){return o instanceof SVGElement||o instanceof Re(o).SVGElement}function Eb(o){return o instanceof MouseEvent||o instanceof Re(o).MouseEvent}var ee={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:da?"webkitAnimationStart":"animationstart",ANIMATION_END:da?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:da?"webkitAnimationIteration":"animationiteration"};var Ae={stop:(o,e)=>(o.preventDefault(),e&&o.stopPropagation(),o)};var TE=class o extends N{_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_refreshStateHandler;static hasFocusWithin(e){if(Dn(e)){let t=h2(e),n=t?t.activeElement:e.ownerDocument.activeElement;return ho(n,e)}else{let t=e;return ho(t.document.activeElement,t.document)}}constructor(e){super();let t=o.hasFocusWithin(e),n=!1,i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,(Dn(e)?Re(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{o.hasFocusWithin(e)!==t&&(t?r():i())},this._register(W(e,ee.FOCUS,i,!0)),this._register(W(e,ee.BLUR,r,!0)),Dn(e)&&(this._register(W(e,ee.FOCUS_IN,()=>this._refreshStateHandler())),this._register(W(e,ee.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}};function qo(o){return new TE(o)}function oL(o,e){return o.after(e),e}function Pe(o,...e){if(o.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function Cb(o,e){return o.insertBefore(e,o.firstChild),e}function dr(o,...e){o.innerText="",Pe(o,...e)}var f2=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function rL(o,e,t,...n){let i=f2.exec(e);if(!i)throw new Error("Bad use of emmet");let r=i[1]||"div",s;return o!=="http://www.w3.org/1999/xhtml"?s=document.createElementNS(o,r):s=document.createElement(r),i[3]&&(s.id=i[3]),i[4]&&(s.className=i[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?s[a]=l:a==="selected"?l&&s.setAttribute(a,"true"):s.setAttribute(a,l))}),s.append(...n),s}function De(o,e,...t){return rL("http://www.w3.org/1999/xhtml",o,e,...t)}De.SVG=function(o,e,...t){return rL("http://www.w3.org/2000/svg",o,e,...t)};function ga(...o){for(let e of o)e.style.display="",e.removeAttribute("aria-hidden")}function ml(...o){for(let e of o)e.style.display="none",e.setAttribute("aria-hidden","true")}function LE(o){xe.open(o,"_blank","noopener")}var H0=780,K0=640;function RE(o){let e=Math.floor(xe.screenLeft+xe.innerWidth/2-H0/2),t=Math.floor(xe.screenTop+xe.innerHeight/2-K0/2);xe.open(o,"_blank",`width=${H0},height=${K0},top=${t},left=${e}`)}function sL(o,e=!0){let t=xe.open();return t?(e&&(t.opener=null),t.location.href=o,!0):!1}function aL(o,e){let t=()=>{e(),n=Yi(o,t)},n=Yi(o,t);return re(()=>n.dispose())}ob.setPreferredWebSchema(/^https:/.test(xe.location.href)?"https":"http");function gl(o){return o?`url('${vs.uriToBrowserUri(o).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function $o(o,e){if(o!==void 0){let t=o.match(/^\s*var\((.+)\)$/);if(t){let n=t[1].split(",",2);return n.length===2&&(e=$o(n[1].trim(),e)),`var(${n[0]}, ${e})`}return o}return e}function lL(o,e=!1){let t=document.createElement("a");return hb("afterSanitizeAttributes",n=>{for(let i of["href","src"])if(n.hasAttribute(i)){let r=n.getAttribute(i);if(i==="href"&&r.startsWith("#"))continue;if(t.href=r,!o.includes(t.protocol.replace(/:$/,""))){if(e&&i==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(i)}}}),re(()=>{mb("afterSanitizeAttributes")})}var D6=[me.http,me.https,me.command],dL=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),_6=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});function b2(o){let e=new Uint16Array(o.length);for(let i=0;i<e.length;i++)e[i]=o.charCodeAt(i);let t="",n=new Uint8Array(e.buffer);for(let i=0;i<n.length;i++)t+=String.fromCharCode(n[i]);return t}function AE(o){return btoa(b2(o))}var uu=class o extends x{_subscriptions=new Y;_keyStatus;static instance;constructor(){super(),this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(G.runAndSubscribe(Yh,({window:e,disposables:t})=>this.registerListeners(e,t),{window:xe,disposables:this._subscriptions}))}registerListeners(e,t){t.add(W(e,"keydown",n=>{if(n.defaultPrevented)return;let i=new pt(n);if(!(i.keyCode===6&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(i.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(W(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(W(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(W(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(W(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(W(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return this._keyStatus.altKey||this._keyStatus.ctrlKey||this._keyStatus.metaKey||this._keyStatus.shiftKey}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return o.instance||(o.instance=new o),o.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};var Od=class extends N{constructor(t,n){super();this.element=t;this.callbacks=n;this.registerListeners()}counter=0;dragStartTime=0;registerListeners(){this.callbacks.onDragStart&&this._register(W(this.element,ee.DRAG_START,t=>{this.callbacks.onDragStart?.(t)})),this.callbacks.onDrag&&this._register(W(this.element,ee.DRAG,t=>{this.callbacks.onDrag?.(t)})),this._register(W(this.element,ee.DRAG_ENTER,t=>{this.counter++,this.dragStartTime=t.timeStamp,this.callbacks.onDragEnter?.(t)})),this._register(W(this.element,ee.DRAG_OVER,t=>{t.preventDefault(),this.callbacks.onDragOver?.(t,t.timeStamp-this.dragStartTime)})),this._register(W(this.element,ee.DRAG_LEAVE,t=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(t))})),this._register(W(this.element,ee.DRAG_END,t=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(t)})),this._register(W(this.element,ee.DROP,t=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(t)}))}};function wb(o,e,t){for(let{name:n,value:i}of o.attributes)(!t||t.includes(n))&&e.setAttribute(n,i)}function v2(o,e,t){let n=o.getAttribute(t);n?e.setAttribute(t,n):e.removeAttribute(t)}function Tb(o,e,t){wb(o,e,t);let n=new Y;return n.add(xb.observe(o,n,{attributes:!0,attributeFilter:t})(i=>{for(let r of i)r.type==="attributes"&&r.attributeName&&v2(o,e,r.attributeName)})),n}function Ss(o){return o.tagName.toLowerCase()==="input"||o.tagName.toLowerCase()==="textarea"||Dn(o)&&!!o.editContext}var Ii=class extends N{_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_id;_label;_tooltip;_cssClass;_enabled=!0;_checked;_actionCallback;constructor(e,t="",n="",i=!0,r){super(),this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}},jo=class extends N{_onWillRun=this._register(new x);onWillRun=this._onWillRun.event;_onDidRun=this._register(new x);onDidRun=this._onDidRun.event;async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}},cn=class o{static join(...e){let t=[];for(let n of e)n.length&&(t.length?t=[...t,new o,...n]:t=n);return t}static ID="vs.actions.separator";id=o.ID;label="";tooltip="";class="separator";enabled=!1;checked=!1;async run(){}},fa=class{id;label;class;tooltip="";enabled=!0;checked=void 0;_actions;get actions(){return this._actions}constructor(e,t,n,i){this.id=e,this.label=t,this.class=i,this._actions=n}async run(){}};function ei(o){return{id:o.id,label:o.label,tooltip:o.tooltip??o.label,class:o.class,enabled:o.enabled??!0,checked:o.checked,run:async(...e)=>o.run(...e)}}var N6=new Uint32Array(10);var F6=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),B6=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),V6=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),W6=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function uL(...o){return function(e,t){for(let n=0,i=o.length;n<i;n++){let r=o[n](e,t);if(r)return r}return null}}var $6=pL.bind(void 0,!1),hu=pL.bind(void 0,!0);function pL(o,e,t){if(!t||t.length<e.length)return null;let n;return o?n=cl(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function y2(o,e){let t=e.toLowerCase().indexOf(o.toLowerCase());return t===-1?null:[{start:t,end:t+o.length}]}function I2(o,e){return PE(o.toLowerCase(),e.toLowerCase(),0,0)}function PE(o,e,t,n){if(t===o.length)return[];if(n===e.length)return null;if(o[t]===e[n]){let i=null;return(i=PE(o,e,t+1,n+1))?mL({start:n,end:n+1},i):null}return PE(o,e,t,n+1)}function BE(o){return 97<=o&&o<=122}function em(o){return 65<=o&&o<=90}function VE(o){return 48<=o&&o<=57}function S2(o){return o===32||o===9||o===10||o===13}var x2=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(o=>x2.add(o.charCodeAt(0)));function hL(o){return BE(o)||em(o)||VE(o)}function mL(o,e){return e.length===0?e=[o]:o.end===e[0].start?e[0].start=o.start:e.unshift(o),e}function gL(o,e){for(let t=e;t<o.length;t++){let n=o.charCodeAt(t);if(em(n)||VE(n)||t>0&&!hL(o.charCodeAt(t-1)))return t}return o.length}function ME(o,e,t,n){if(t===o.length)return[];if(n===e.length)return null;if(o[t]!==e[n].toLowerCase())return null;{let i=null,r=n+1;for(i=ME(o,e,t+1,n+1);!i&&(r=gL(e,r))<e.length;)i=ME(o,e,t+1,r),r++;return i===null?null:mL({start:n,end:n+1},i)}}function E2(o){let e=0,t=0,n=0,i=0,r=0;for(let u=0;u<o.length;u++)r=o.charCodeAt(u),em(r)&&e++,BE(r)&&t++,hL(r)&&n++,VE(r)&&i++;let s=e/o.length,a=t/o.length,l=n/o.length,d=i/o.length;return{upperPercent:s,lowerPercent:a,alphaPercent:l,numericPercent:d}}function C2(o){let{upperPercent:e,lowerPercent:t}=o;return t===0&&e>.6}function w2(o){let{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=o;return t>.2&&e<.8&&n>.6&&i<.2}function T2(o){let e=0,t=0,n=0,i=0;for(let r=0;r<o.length;r++)n=o.charCodeAt(r),em(n)&&e++,BE(n)&&t++,S2(n)&&i++;return(e===0||t===0)&&i===0?o.length<=30:e<=5}function fL(o,e){if(!e||(e=e.trim(),e.length===0)||!T2(o))return null;e.length>60&&(e=e.substring(0,60));let t=E2(e);if(!w2(t)){if(!C2(t))return null;e=e.toLowerCase()}let n=null,i=0;for(o=o.toLowerCase();i<e.length&&(n=ME(o,e,0,i))===null;)i=gL(e,i+1);return n}var j6=uL(hu,fL,y2),Y6=uL(hu,fL,I2),Q6=new or(1e4);function bL(o,e){let t=UE(o,o.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?vL(t):null}function vL(o){if(typeof o>"u")return[];let e=[],t=o[1];for(let n=o.length-1;n>1;n--){let i=o[n]+t,r=e[e.length-1];r&&r.end===i?r.end=i+1:e.push({start:i,end:i+1})}return e}var bl=128;function WE(){let o=[],e=[];for(let t=0;t<=bl;t++)e[t]=0;for(let t=0;t<=bl;t++)o.push(e.slice(0));return o}function yL(o){let e=[];for(let t=0;t<=o;t++)e[t]=0;return e}var IL=yL(2*bl),NE=yL(2*bl),xs=WE(),fl=WE(),Jh=WE(),k2=!1;function OE(o,e,t,n,i){function r(a,l,d=" "){for(;a.length<l;)a=d+a;return a}let s=` |   |${n.split("").map(a=>r(a,3)).join("|")}
`;for(let a=0;a<=t;a++)a===0?s+=" |":s+=`${e[a-1]}|`,s+=o[a].slice(0,i+1).map(l=>r(l.toString(),3)).join("|")+`
`;return s}function D2(o,e,t,n){o=o.substr(e),t=t.substr(n),console.log(OE(fl,o,o.length,t,t.length)),console.log(OE(Jh,o,o.length,t,t.length)),console.log(OE(xs,o,o.length,t,t.length))}function kb(o,e){if(e<0||e>=o.length)return!1;let t=o.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Ph(t)}}function cL(o,e){if(e<0||e>=o.length)return!1;switch(o.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function Db(o,e,t){return e[o]!==t[o]}function _2(o,e,t,n,i,r,s=!1){for(;e<t&&i<r;)o[e]===n[i]&&(s&&(IL[e]=i),e+=1),i+=1;return e===t}var SL;(t=>{t.Default=[-100,0];function e(n){return!n||n.length===2&&n[0]===-100&&n[1]===0}t.isDefault=e})(SL||={});var FE=class{constructor(e,t){this.firstMatchCanBeWeak=e;this.boostFullMatch=t}static default={boostFullMatch:!0,firstMatchCanBeWeak:!1}};function UE(o,e,t,n,i,r,s=FE.default){let a=o.length>bl?bl:o.length,l=n.length>bl?bl:n.length;if(t>=a||r>=l||a-t>l-r||!_2(e,t,a,i,r,l,!0))return;L2(a,l,t,r,e,i);let d=1,u=1,p=t,h=r,m=[!1];for(d=1,p=t;p<a;d++,p++){let w=IL[p],R=NE[p],_=p+1<a?NE[p+1]:l;for(u=w-r+1,h=w;h<_;u++,h++){let B=Number.MIN_SAFE_INTEGER,K=!1;h<=R&&(B=R2(o,e,p,t,n,i,h,l,r,xs[d-1][u-1]===0,m));let F=0;B!==Number.MAX_SAFE_INTEGER&&(K=!0,F=B+fl[d-1][u-1]);let V=h>w,oe=V?fl[d][u-1]+(xs[d][u-1]>0?-5:0):0,ge=h>w+1&&xs[d][u-1]>0,we=ge?fl[d][u-2]+(xs[d][u-2]>0?-5:0):0;if(ge&&(!V||we>=oe)&&(!K||we>=F))fl[d][u]=we,Jh[d][u]=3,xs[d][u]=0;else if(V&&(!K||oe>=F))fl[d][u]=oe,Jh[d][u]=2,xs[d][u]=0;else if(K)fl[d][u]=F,Jh[d][u]=1,xs[d][u]=xs[d-1][u-1]+1;else throw new Error("not possible")}}if(k2&&D2(o,t,n,r),!m[0]&&!s.firstMatchCanBeWeak)return;d--,u--;let g=[fl[d][u],r],f=0,y=0;for(;d>=1;){let w=u;do{let R=Jh[d][w];if(R===3)w=w-2;else if(R===2)w=w-1;else break}while(w>=1);f>1&&e[t+d-1]===i[r+u-1]&&!Db(w+r-1,n,i)&&f+1>xs[d][w]&&(w=u),w===u?f++:f=1,y||(y=w),d--,u=w-1,g.push(u)}l-r===a&&s.boostFullMatch&&(g[0]+=2);let C=y-a;return g[0]-=C,g}function L2(o,e,t,n,i,r){let s=o-1,a=e-1;for(;s>=t&&a>=n;)i[s]===r[a]&&(NE[s]=a,s--),a--}function R2(o,e,t,n,i,r,s,a,l,d,u){if(e[t]!==r[s])return Number.MIN_SAFE_INTEGER;let p=1,h=!1;return s===t-n?p=o[t]===i[s]?7:5:Db(s,i,r)&&(s===0||!Db(s-1,i,r))?(p=o[t]===i[s]?7:5,h=!0):kb(r,s)&&(s===0||!kb(r,s-1))?p=5:(kb(r,s-1)||cL(r,s-1))&&(p=5,h=!0),p>1&&t===n&&(u[0]=!0),h||(h=Db(s,i,r)||kb(r,s-1)||cL(r,s-1)),t===n?s>l&&(p-=h?3:5):d?p+=h?2:0:p+=h?0:1,s+1===a&&(p-=h?3:5),p}var zE=Object.create(null);function b(o,e){if(gn(e)){let t=zE[e];if(t===void 0)throw new Error(`${o} references an unknown codicon: ${e}`);e=t}return zE[o]=e,{id:o}}function HE(){return zE}var xL={add:b("add",6e4),plus:b("plus",6e4),gistNew:b("gist-new",6e4),repoCreate:b("repo-create",6e4),lightbulb:b("lightbulb",60001),lightBulb:b("light-bulb",60001),repo:b("repo",60002),repoDelete:b("repo-delete",60002),gistFork:b("gist-fork",60003),repoForked:b("repo-forked",60003),gitPullRequest:b("git-pull-request",60004),gitPullRequestAbandoned:b("git-pull-request-abandoned",60004),recordKeys:b("record-keys",60005),keyboard:b("keyboard",60005),tag:b("tag",60006),gitPullRequestLabel:b("git-pull-request-label",60006),tagAdd:b("tag-add",60006),tagRemove:b("tag-remove",60006),person:b("person",60007),personFollow:b("person-follow",60007),personOutline:b("person-outline",60007),personFilled:b("person-filled",60007),gitBranch:b("git-branch",60008),gitBranchCreate:b("git-branch-create",60008),gitBranchDelete:b("git-branch-delete",60008),sourceControl:b("source-control",60008),mirror:b("mirror",60009),mirrorPublic:b("mirror-public",60009),star:b("star",60010),starAdd:b("star-add",60010),starDelete:b("star-delete",60010),starEmpty:b("star-empty",60010),comment:b("comment",60011),commentAdd:b("comment-add",60011),alert:b("alert",60012),warning:b("warning",60012),search:b("search",60013),searchSave:b("search-save",60013),logOut:b("log-out",60014),signOut:b("sign-out",60014),logIn:b("log-in",60015),signIn:b("sign-in",60015),eye:b("eye",60016),eyeUnwatch:b("eye-unwatch",60016),eyeWatch:b("eye-watch",60016),circleFilled:b("circle-filled",60017),primitiveDot:b("primitive-dot",60017),closeDirty:b("close-dirty",60017),debugBreakpoint:b("debug-breakpoint",60017),debugBreakpointDisabled:b("debug-breakpoint-disabled",60017),debugHint:b("debug-hint",60017),terminalDecorationSuccess:b("terminal-decoration-success",60017),primitiveSquare:b("primitive-square",60018),edit:b("edit",60019),pencil:b("pencil",60019),info:b("info",60020),issueOpened:b("issue-opened",60020),gistPrivate:b("gist-private",60021),gitForkPrivate:b("git-fork-private",60021),lock:b("lock",60021),mirrorPrivate:b("mirror-private",60021),close:b("close",60022),removeClose:b("remove-close",60022),x:b("x",60022),repoSync:b("repo-sync",60023),sync:b("sync",60023),clone:b("clone",60024),desktopDownload:b("desktop-download",60024),beaker:b("beaker",60025),microscope:b("microscope",60025),vm:b("vm",60026),deviceDesktop:b("device-desktop",60026),file:b("file",60027),fileText:b("file-text",60027),more:b("more",60028),ellipsis:b("ellipsis",60028),kebabHorizontal:b("kebab-horizontal",60028),mailReply:b("mail-reply",60029),reply:b("reply",60029),organization:b("organization",60030),organizationFilled:b("organization-filled",60030),organizationOutline:b("organization-outline",60030),newFile:b("new-file",60031),fileAdd:b("file-add",60031),newFolder:b("new-folder",60032),fileDirectoryCreate:b("file-directory-create",60032),trash:b("trash",60033),trashcan:b("trashcan",60033),history:b("history",60034),clock:b("clock",60034),folder:b("folder",60035),fileDirectory:b("file-directory",60035),symbolFolder:b("symbol-folder",60035),logoGithub:b("logo-github",60036),markGithub:b("mark-github",60036),github:b("github",60036),terminal:b("terminal",60037),console:b("console",60037),repl:b("repl",60037),zap:b("zap",60038),symbolEvent:b("symbol-event",60038),error:b("error",60039),stop:b("stop",60039),variable:b("variable",60040),symbolVariable:b("symbol-variable",60040),array:b("array",60042),symbolArray:b("symbol-array",60042),symbolModule:b("symbol-module",60043),symbolPackage:b("symbol-package",60043),symbolNamespace:b("symbol-namespace",60043),symbolObject:b("symbol-object",60043),symbolMethod:b("symbol-method",60044),symbolFunction:b("symbol-function",60044),symbolConstructor:b("symbol-constructor",60044),symbolBoolean:b("symbol-boolean",60047),symbolNull:b("symbol-null",60047),symbolNumeric:b("symbol-numeric",60048),symbolNumber:b("symbol-number",60048),symbolStructure:b("symbol-structure",60049),symbolStruct:b("symbol-struct",60049),symbolParameter:b("symbol-parameter",60050),symbolTypeParameter:b("symbol-type-parameter",60050),symbolKey:b("symbol-key",60051),symbolText:b("symbol-text",60051),symbolReference:b("symbol-reference",60052),goToFile:b("go-to-file",60052),symbolEnum:b("symbol-enum",60053),symbolValue:b("symbol-value",60053),symbolRuler:b("symbol-ruler",60054),symbolUnit:b("symbol-unit",60054),activateBreakpoints:b("activate-breakpoints",60055),archive:b("archive",60056),arrowBoth:b("arrow-both",60057),arrowDown:b("arrow-down",60058),arrowLeft:b("arrow-left",60059),arrowRight:b("arrow-right",60060),arrowSmallDown:b("arrow-small-down",60061),arrowSmallLeft:b("arrow-small-left",60062),arrowSmallRight:b("arrow-small-right",60063),arrowSmallUp:b("arrow-small-up",60064),arrowUp:b("arrow-up",60065),bell:b("bell",60066),bold:b("bold",60067),book:b("book",60068),bookmark:b("bookmark",60069),debugBreakpointConditionalUnverified:b("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:b("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:b("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:b("debug-breakpoint-data-unverified",60072),debugBreakpointData:b("debug-breakpoint-data",60073),debugBreakpointDataDisabled:b("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:b("debug-breakpoint-log-unverified",60074),debugBreakpointLog:b("debug-breakpoint-log",60075),debugBreakpointLogDisabled:b("debug-breakpoint-log-disabled",60075),briefcase:b("briefcase",60076),broadcast:b("broadcast",60077),browser:b("browser",60078),bug:b("bug",60079),calendar:b("calendar",60080),caseSensitive:b("case-sensitive",60081),check:b("check",60082),checklist:b("checklist",60083),chevronDown:b("chevron-down",60084),chevronLeft:b("chevron-left",60085),chevronRight:b("chevron-right",60086),chevronUp:b("chevron-up",60087),chromeClose:b("chrome-close",60088),chromeMaximize:b("chrome-maximize",60089),chromeMinimize:b("chrome-minimize",60090),chromeRestore:b("chrome-restore",60091),circleOutline:b("circle-outline",60092),circle:b("circle",60092),debugBreakpointUnverified:b("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:b("terminal-decoration-incomplete",60092),circleSlash:b("circle-slash",60093),circuitBoard:b("circuit-board",60094),clearAll:b("clear-all",60095),clippy:b("clippy",60096),closeAll:b("close-all",60097),cloudDownload:b("cloud-download",60098),cloudUpload:b("cloud-upload",60099),code:b("code",60100),collapseAll:b("collapse-all",60101),colorMode:b("color-mode",60102),commentDiscussion:b("comment-discussion",60103),creditCard:b("credit-card",60105),dash:b("dash",60108),dashboard:b("dashboard",60109),database:b("database",60110),debugContinue:b("debug-continue",60111),debugDisconnect:b("debug-disconnect",60112),debugPause:b("debug-pause",60113),debugRestart:b("debug-restart",60114),debugStart:b("debug-start",60115),debugStepInto:b("debug-step-into",60116),debugStepOut:b("debug-step-out",60117),debugStepOver:b("debug-step-over",60118),debugStop:b("debug-stop",60119),debug:b("debug",60120),deviceCameraVideo:b("device-camera-video",60121),deviceCamera:b("device-camera",60122),deviceMobile:b("device-mobile",60123),diffAdded:b("diff-added",60124),diffIgnored:b("diff-ignored",60125),diffModified:b("diff-modified",60126),diffRemoved:b("diff-removed",60127),diffRenamed:b("diff-renamed",60128),diff:b("diff",60129),diffSidebyside:b("diff-sidebyside",60129),discard:b("discard",60130),editorLayout:b("editor-layout",60131),emptyWindow:b("empty-window",60132),exclude:b("exclude",60133),extensions:b("extensions",60134),eyeClosed:b("eye-closed",60135),fileBinary:b("file-binary",60136),fileCode:b("file-code",60137),fileMedia:b("file-media",60138),filePdf:b("file-pdf",60139),fileSubmodule:b("file-submodule",60140),fileSymlinkDirectory:b("file-symlink-directory",60141),fileSymlinkFile:b("file-symlink-file",60142),fileZip:b("file-zip",60143),files:b("files",60144),filter:b("filter",60145),flame:b("flame",60146),foldDown:b("fold-down",60147),foldUp:b("fold-up",60148),fold:b("fold",60149),folderActive:b("folder-active",60150),folderOpened:b("folder-opened",60151),gear:b("gear",60152),gift:b("gift",60153),gistSecret:b("gist-secret",60154),gist:b("gist",60155),gitCommit:b("git-commit",60156),gitCompare:b("git-compare",60157),compareChanges:b("compare-changes",60157),gitMerge:b("git-merge",60158),githubAction:b("github-action",60159),githubAlt:b("github-alt",60160),globe:b("globe",60161),grabber:b("grabber",60162),graph:b("graph",60163),gripper:b("gripper",60164),heart:b("heart",60165),home:b("home",60166),horizontalRule:b("horizontal-rule",60167),hubot:b("hubot",60168),inbox:b("inbox",60169),issueReopened:b("issue-reopened",60171),issues:b("issues",60172),italic:b("italic",60173),jersey:b("jersey",60174),json:b("json",60175),kebabVertical:b("kebab-vertical",60176),key:b("key",60177),law:b("law",60178),lightbulbAutofix:b("lightbulb-autofix",60179),linkExternal:b("link-external",60180),link:b("link",60181),listOrdered:b("list-ordered",60182),listUnordered:b("list-unordered",60183),liveShare:b("live-share",60184),loading:b("loading",60185),location:b("location",60186),mailRead:b("mail-read",60187),mail:b("mail",60188),markdown:b("markdown",60189),megaphone:b("megaphone",60190),mention:b("mention",60191),milestone:b("milestone",60192),gitPullRequestMilestone:b("git-pull-request-milestone",60192),mortarBoard:b("mortar-board",60193),move:b("move",60194),multipleWindows:b("multiple-windows",60195),mute:b("mute",60196),noNewline:b("no-newline",60197),note:b("note",60198),octoface:b("octoface",60199),openPreview:b("open-preview",60200),package:b("package",60201),paintcan:b("paintcan",60202),pin:b("pin",60203),play:b("play",60204),run:b("run",60204),plug:b("plug",60205),preserveCase:b("preserve-case",60206),preview:b("preview",60207),project:b("project",60208),pulse:b("pulse",60209),question:b("question",60210),quote:b("quote",60211),radioTower:b("radio-tower",60212),reactions:b("reactions",60213),references:b("references",60214),refresh:b("refresh",60215),regex:b("regex",60216),remoteExplorer:b("remote-explorer",60217),remote:b("remote",60218),remove:b("remove",60219),replaceAll:b("replace-all",60220),replace:b("replace",60221),repoClone:b("repo-clone",60222),repoForcePush:b("repo-force-push",60223),repoPull:b("repo-pull",60224),repoPush:b("repo-push",60225),report:b("report",60226),requestChanges:b("request-changes",60227),rocket:b("rocket",60228),rootFolderOpened:b("root-folder-opened",60229),rootFolder:b("root-folder",60230),rss:b("rss",60231),ruby:b("ruby",60232),saveAll:b("save-all",60233),saveAs:b("save-as",60234),save:b("save",60235),screenFull:b("screen-full",60236),screenNormal:b("screen-normal",60237),searchStop:b("search-stop",60238),server:b("server",60240),settingsGear:b("settings-gear",60241),settings:b("settings",60242),shield:b("shield",60243),smiley:b("smiley",60244),sortPrecedence:b("sort-precedence",60245),splitHorizontal:b("split-horizontal",60246),splitVertical:b("split-vertical",60247),squirrel:b("squirrel",60248),starFull:b("star-full",60249),starHalf:b("star-half",60250),symbolClass:b("symbol-class",60251),symbolColor:b("symbol-color",60252),symbolConstant:b("symbol-constant",60253),symbolEnumMember:b("symbol-enum-member",60254),symbolField:b("symbol-field",60255),symbolFile:b("symbol-file",60256),symbolInterface:b("symbol-interface",60257),symbolKeyword:b("symbol-keyword",60258),symbolMisc:b("symbol-misc",60259),symbolOperator:b("symbol-operator",60260),symbolProperty:b("symbol-property",60261),wrench:b("wrench",60261),wrenchSubaction:b("wrench-subaction",60261),symbolSnippet:b("symbol-snippet",60262),tasklist:b("tasklist",60263),telescope:b("telescope",60264),textSize:b("text-size",60265),threeBars:b("three-bars",60266),thumbsdown:b("thumbsdown",60267),thumbsup:b("thumbsup",60268),tools:b("tools",60269),triangleDown:b("triangle-down",60270),triangleLeft:b("triangle-left",60271),triangleRight:b("triangle-right",60272),triangleUp:b("triangle-up",60273),twitter:b("twitter",60274),unfold:b("unfold",60275),unlock:b("unlock",60276),unmute:b("unmute",60277),unverified:b("unverified",60278),verified:b("verified",60279),versions:b("versions",60280),vmActive:b("vm-active",60281),vmOutline:b("vm-outline",60282),vmRunning:b("vm-running",60283),watch:b("watch",60284),whitespace:b("whitespace",60285),wholeWord:b("whole-word",60286),window:b("window",60287),wordWrap:b("word-wrap",60288),zoomIn:b("zoom-in",60289),zoomOut:b("zoom-out",60290),listFilter:b("list-filter",60291),listFlat:b("list-flat",60292),listSelection:b("list-selection",60293),selection:b("selection",60293),listTree:b("list-tree",60294),debugBreakpointFunctionUnverified:b("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:b("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:b("debug-breakpoint-function-disabled",60296),debugStackframeActive:b("debug-stackframe-active",60297),circleSmallFilled:b("circle-small-filled",60298),debugStackframeDot:b("debug-stackframe-dot",60298),terminalDecorationMark:b("terminal-decoration-mark",60298),debugStackframe:b("debug-stackframe",60299),debugStackframeFocused:b("debug-stackframe-focused",60299),debugBreakpointUnsupported:b("debug-breakpoint-unsupported",60300),symbolString:b("symbol-string",60301),debugReverseContinue:b("debug-reverse-continue",60302),debugStepBack:b("debug-step-back",60303),debugRestartFrame:b("debug-restart-frame",60304),debugAlt:b("debug-alt",60305),callIncoming:b("call-incoming",60306),callOutgoing:b("call-outgoing",60307),menu:b("menu",60308),expandAll:b("expand-all",60309),feedback:b("feedback",60310),gitPullRequestReviewer:b("git-pull-request-reviewer",60310),groupByRefType:b("group-by-ref-type",60311),ungroupByRefType:b("ungroup-by-ref-type",60312),account:b("account",60313),gitPullRequestAssignee:b("git-pull-request-assignee",60313),bellDot:b("bell-dot",60314),debugConsole:b("debug-console",60315),library:b("library",60316),output:b("output",60317),runAll:b("run-all",60318),syncIgnored:b("sync-ignored",60319),pinned:b("pinned",60320),githubInverted:b("github-inverted",60321),serverProcess:b("server-process",60322),serverEnvironment:b("server-environment",60323),pass:b("pass",60324),issueClosed:b("issue-closed",60324),stopCircle:b("stop-circle",60325),playCircle:b("play-circle",60326),record:b("record",60327),debugAltSmall:b("debug-alt-small",60328),vmConnect:b("vm-connect",60329),cloud:b("cloud",60330),merge:b("merge",60331),export:b("export",60332),graphLeft:b("graph-left",60333),magnet:b("magnet",60334),notebook:b("notebook",60335),redo:b("redo",60336),checkAll:b("check-all",60337),pinnedDirty:b("pinned-dirty",60338),passFilled:b("pass-filled",60339),circleLargeFilled:b("circle-large-filled",60340),circleLarge:b("circle-large",60341),circleLargeOutline:b("circle-large-outline",60341),combine:b("combine",60342),gather:b("gather",60342),table:b("table",60343),variableGroup:b("variable-group",60344),typeHierarchy:b("type-hierarchy",60345),typeHierarchySub:b("type-hierarchy-sub",60346),typeHierarchySuper:b("type-hierarchy-super",60347),gitPullRequestCreate:b("git-pull-request-create",60348),runAbove:b("run-above",60349),runBelow:b("run-below",60350),notebookTemplate:b("notebook-template",60351),debugRerun:b("debug-rerun",60352),workspaceTrusted:b("workspace-trusted",60353),workspaceUntrusted:b("workspace-untrusted",60354),workspaceUnknown:b("workspace-unknown",60355),terminalCmd:b("terminal-cmd",60356),terminalDebian:b("terminal-debian",60357),terminalLinux:b("terminal-linux",60358),terminalPowershell:b("terminal-powershell",60359),terminalTmux:b("terminal-tmux",60360),terminalUbuntu:b("terminal-ubuntu",60361),terminalBash:b("terminal-bash",60362),arrowSwap:b("arrow-swap",60363),copy:b("copy",60364),personAdd:b("person-add",60365),filterFilled:b("filter-filled",60366),wand:b("wand",60367),debugLineByLine:b("debug-line-by-line",60368),inspect:b("inspect",60369),layers:b("layers",60370),layersDot:b("layers-dot",60371),layersActive:b("layers-active",60372),compass:b("compass",60373),compassDot:b("compass-dot",60374),compassActive:b("compass-active",60375),azure:b("azure",60376),issueDraft:b("issue-draft",60377),gitPullRequestClosed:b("git-pull-request-closed",60378),gitPullRequestDraft:b("git-pull-request-draft",60379),debugAll:b("debug-all",60380),debugCoverage:b("debug-coverage",60381),runErrors:b("run-errors",60382),folderLibrary:b("folder-library",60383),debugContinueSmall:b("debug-continue-small",60384),beakerStop:b("beaker-stop",60385),graphLine:b("graph-line",60386),graphScatter:b("graph-scatter",60387),pieChart:b("pie-chart",60388),bracket:b("bracket",60175),bracketDot:b("bracket-dot",60389),bracketError:b("bracket-error",60390),lockSmall:b("lock-small",60391),azureDevops:b("azure-devops",60392),verifiedFilled:b("verified-filled",60393),newline:b("newline",60394),layout:b("layout",60395),layoutActivitybarLeft:b("layout-activitybar-left",60396),layoutActivitybarRight:b("layout-activitybar-right",60397),layoutPanelLeft:b("layout-panel-left",60398),layoutPanelCenter:b("layout-panel-center",60399),layoutPanelJustify:b("layout-panel-justify",60400),layoutPanelRight:b("layout-panel-right",60401),layoutPanel:b("layout-panel",60402),layoutSidebarLeft:b("layout-sidebar-left",60403),layoutSidebarRight:b("layout-sidebar-right",60404),layoutStatusbar:b("layout-statusbar",60405),layoutMenubar:b("layout-menubar",60406),layoutCentered:b("layout-centered",60407),target:b("target",60408),indent:b("indent",60409),recordSmall:b("record-small",60410),errorSmall:b("error-small",60411),terminalDecorationError:b("terminal-decoration-error",60411),arrowCircleDown:b("arrow-circle-down",60412),arrowCircleLeft:b("arrow-circle-left",60413),arrowCircleRight:b("arrow-circle-right",60414),arrowCircleUp:b("arrow-circle-up",60415),layoutSidebarRightOff:b("layout-sidebar-right-off",60416),layoutPanelOff:b("layout-panel-off",60417),layoutSidebarLeftOff:b("layout-sidebar-left-off",60418),blank:b("blank",60419),heartFilled:b("heart-filled",60420),map:b("map",60421),mapHorizontal:b("map-horizontal",60421),foldHorizontal:b("fold-horizontal",60421),mapFilled:b("map-filled",60422),mapHorizontalFilled:b("map-horizontal-filled",60422),foldHorizontalFilled:b("fold-horizontal-filled",60422),circleSmall:b("circle-small",60423),bellSlash:b("bell-slash",60424),bellSlashDot:b("bell-slash-dot",60425),commentUnresolved:b("comment-unresolved",60426),gitPullRequestGoToChanges:b("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:b("git-pull-request-new-changes",60428),searchFuzzy:b("search-fuzzy",60429),commentDraft:b("comment-draft",60430),send:b("send",60431),sparkle:b("sparkle",60432),insert:b("insert",60433),mic:b("mic",60434),thumbsdownFilled:b("thumbsdown-filled",60435),thumbsupFilled:b("thumbsup-filled",60436),coffee:b("coffee",60437),snake:b("snake",60438),game:b("game",60439),vr:b("vr",60440),chip:b("chip",60441),piano:b("piano",60442),music:b("music",60443),micFilled:b("mic-filled",60444),repoFetch:b("repo-fetch",60445),copilot:b("copilot",60446),lightbulbSparkle:b("lightbulb-sparkle",60447),robot:b("robot",60448),sparkleFilled:b("sparkle-filled",60449),diffSingle:b("diff-single",60450),diffMultiple:b("diff-multiple",60451),surroundWith:b("surround-with",60452),share:b("share",60453),gitStash:b("git-stash",60454),gitStashApply:b("git-stash-apply",60455),gitStashPop:b("git-stash-pop",60456),vscode:b("vscode",60457),vscodeInsiders:b("vscode-insiders",60458),codeOss:b("code-oss",60459),runCoverage:b("run-coverage",60460),runAllCoverage:b("run-all-coverage",60461),coverage:b("coverage",60462),githubProject:b("github-project",60463),mapVertical:b("map-vertical",60464),foldVertical:b("fold-vertical",60464),mapVerticalFilled:b("map-vertical-filled",60465),foldVerticalFilled:b("fold-vertical-filled",60465),goToSearch:b("go-to-search",60466),percentage:b("percentage",60467),sortPercentage:b("sort-percentage",60467),attach:b("attach",60468)};var A2={dialogError:b("dialog-error","error"),dialogWarning:b("dialog-warning","warning"),dialogInfo:b("dialog-info","info"),dialogClose:b("dialog-close","close"),treeItemExpanded:b("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:b("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:b("tree-filter-on-type-off","list-selection"),treeFilterClear:b("tree-filter-clear","close"),treeItemLoading:b("tree-item-loading","loading"),menuSelection:b("menu-selection","check"),menuSubmenu:b("menu-submenu","chevron-right"),menuBarMore:b("menubar-more","more"),scrollbarButtonLeft:b("scrollbar-button-left","triangle-left"),scrollbarButtonRight:b("scrollbar-button-right","triangle-right"),scrollbarButtonUp:b("scrollbar-button-up","triangle-up"),scrollbarButtonDown:b("scrollbar-button-down","triangle-down"),toolBarMore:b("toolbar-more","more"),quickInputBack:b("quick-input-back","arrow-left"),dropDownButton:b("drop-down-button",60084),symbolCustomColor:b("symbol-customcolor",60252),exportIcon:b("export",60332),workspaceUnspecified:b("workspace-unspecified",60355),newLine:b("newline",60394),thumbsDownFilled:b("thumbsdown-filled",60435),thumbsUpFilled:b("thumbsup-filled",60436),gitFetch:b("git-fetch",60445),lightbulbSparkleAutofix:b("lightbulb-sparkle-autofix",60447),debugBreakpointPending:b("debug-breakpoint-pending",60377)},Q={...xL,...A2};var EL;(e=>{function o(t){return t&&typeof t=="object"&&typeof t.id=="string"}e.isThemeColor=o})(EL||={});var je;(f=>{f.iconNameSegment="[A-Za-z0-9]+",f.iconNameExpression="[A-Za-z0-9-]+",f.iconModifierExpression="~[A-Za-z]+",f.iconNameCharacter="[A-Za-z0-9~-]";let i=new RegExp(`^(${f.iconNameExpression})(${f.iconModifierExpression})?$`);function r(y){let C=i.exec(y.id);if(!C)return r(Q.error);let[,w,R]=C,_=["codicon","codicon-"+w];return R&&_.push("codicon-modifier-"+R.substring(1)),_}f.asClassNameArray=r;function s(y){return r(y).join(" ")}f.asClassName=s;function a(y){return"."+r(y).join(".")}f.asCSSSelector=a;function l(y){return y&&typeof y=="object"&&typeof y.id=="string"&&(typeof y.color>"u"||EL.isThemeColor(y.color))}f.isThemeIcon=l;let d=new RegExp(`^\\$\\((${f.iconNameExpression}(?:${f.iconModifierExpression})?)\\)$`);function u(y){let C=d.exec(y);if(!C)return;let[,w]=C;return{id:w}}f.fromString=u;function p(y){return{id:y}}f.fromId=p;function h(y,C){let w=y.id,R=w.lastIndexOf("~");return R!==-1&&(w=w.substring(0,R)),C&&(w=`${w}~${C}`),{id:w}}f.modify=h;function m(y){let C=y.id.lastIndexOf("~");if(C!==-1)return y.id.substring(C+1)}f.getModifier=m;function g(y,C){return y.id===C.id&&y.color?.id===C.color?.id}f.isEqual=g})(je||={});var KE=new RegExp(`\\$\\(${je.iconNameExpression}(?:${je.iconModifierExpression})?\\)`,"g"),O2=new RegExp(`(\\\\)?${KE.source}`,"g");function CL(o){return o.replace(O2,(e,t)=>t?e:`\\${e}`)}var P2=new RegExp(`\\\\${KE.source}`,"g");function wL(o){return o.replace(P2,e=>`\\${e}`)}var fK=new RegExp(`(\\s)?(\\\\)?${KE.source}(\\s)?`,"g");var bK=new RegExp(`\\$\\(${je.iconNameCharacter}+\\)`,"g");var GE=class{value;isTrusted;supportThemeIcons;supportHtml;baseUri;constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw gd("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=M2(this.supportThemeIcons?CL(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${N2(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){let n=new RegExp(lo(t),"g");return e.replace(n,(i,r)=>e.charAt(r-1)!=="\\"?`\\${i}`:i)}};function vl(o){return o instanceof GE?!0:o&&typeof o=="object"?typeof o.value=="string"&&(typeof o.isTrusted=="boolean"||typeof o.isTrusted=="object"||o.isTrusted===void 0)&&(typeof o.supportThemeIcons=="boolean"||o.supportThemeIcons===void 0):!1}function _b(o,e){return o===e?!0:!o||!e?!1:o.value===e.value&&o.isTrusted===e.isTrusted&&o.supportThemeIcons===e.supportThemeIcons&&o.supportHtml===e.supportHtml&&(o.baseUri===e.baseUri||!!o.baseUri&&!!e.baseUri&&fn(j.from(o.baseUri),j.from(e.baseUri)))}function M2(o){return o.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function N2(o,e){let t=o.match(/^`+/gm)?.reduce((i,r)=>i.length>r.length?i:r).length??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,o,`${"`".repeat(n)}`].join(`
`)}function tm(o){return o.replace(/"/g,"&quot;")}function Lb(o){return o&&o.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function TL(o){let e=[],t=o.split("|").map(i=>i.trim());o=t[0];let n=t[1];if(n){let i=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),s=i?i[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),d=isFinite(parseInt(s));l&&e.push(`width="${a}"`),d&&e.push(`height="${s}"`)}return{href:o,dimensions:e}}function kL(o){let e=!1,t=new Map,n=new Map;if(F2(o,u=>{if(o===u)return!0;let p=JSON.stringify(u);if(p.length<30)return!0;let h=t.get(p);if(!h){let m={schemas:[u]};return t.set(p,m),n.set(u,m),!0}return h.schemas.push(u),n.set(u,h),e=!0,!1}),t.clear(),!e)return JSON.stringify(o);let r="$defs";for(;o.hasOwnProperty(r);)r+="_";let s=[];function a(u){return JSON.stringify(u,(p,h)=>{if(h!==u){let m=n.get(h);if(m&&m.schemas.length>1)return m.id||(m.id=`_${s.length}`,s.push(m.schemas[0])),{$ref:`#/${r}/${m.id}`}}return h})}let l=a(o),d=[];for(let u=0;u<s.length;u++)d.push(`"_${u}":${a(s[u])}`);return d.length?`${l.substring(0,l.length-1)},"${r}":{${d.join(",")}}}`:l}function mu(o){return typeof o=="object"&&o!==null}function F2(o,e){if(!o||typeof o!="object")return;let t=(...l)=>{for(let d of l)mu(d)&&s.push(d)},n=(...l)=>{for(let d of l)if(mu(d))for(let u in d){let p=d[u];mu(p)&&s.push(p)}},i=(...l)=>{for(let d of l)if(Array.isArray(d))for(let u of d)mu(u)&&s.push(u)},r=l=>{if(Array.isArray(l))for(let d of l)mu(d)&&s.push(d);else mu(l)&&s.push(l)},s=[o],a=s.pop();for(;a;)e(a)&&(t(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),n(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),i(a.anyOf,a.allOf,a.oneOf,a.prefixItems),r(a.items)),a=s.pop()}function gu(o){if(!o||typeof o!="object"||o instanceof RegExp)return o;let e=Array.isArray(o)?[]:{};return Object.entries(o).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?gu(n):n}),e}var B2=Object.prototype.hasOwnProperty;function $E(o,e){return qE(o,e,new Set)}function qE(o,e,t){if(vi(o))return o;let n=e(o);if(typeof n<"u")return n;if(Array.isArray(o)){let i=[];for(let r of o)i.push(qE(r,e,t));return i}if(kn(o)){if(t.has(o))throw new Error("Cannot clone recursive data-structure");t.add(o);let i={};for(let r in o)B2.call(o,r)&&(i[r]=qE(o[r],e,t));return t.delete(o),i}return o}function Si(o,e){if(o===e)return!0;if(o==null||e===null||e===void 0||typeof o!=typeof e||typeof o!="object"||Array.isArray(o)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(o)){if(o.length!==e.length)return!1;for(t=0;t<o.length;t++)if(!Si(o[t],e[t]))return!1}else{let i=[];for(n in o)i.push(n);i.sort();let r=[];for(n in e)r.push(n);if(r.sort(),!Si(i,r))return!1;for(t=0;t<i.length;t++)if(!Si(o[i[t]],e[i[t]]))return!1}return!0}var YE=class o{constructor(e,t,n,i,r,s,a){this._forceIntegerValues=e;this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,r=r|0,s=s|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),r<0&&(r=0),a+r>s&&(a=s-r),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=r,this.scrollHeight=s,this.scrollTop=a}_scrollStateBrand=void 0;rawScrollLeft;rawScrollTop;width;scrollWidth;scrollLeft;height;scrollHeight;scrollTop;equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new o(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new o(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){let n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:r,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:l}}},ba=class extends N{_scrollableBrand=void 0;_smoothScrollDuration;_scheduleAtNextAnimationFrame;_state;_smoothScrolling;_onScroll=this._register(new x);onScroll=this._onScroll.event;constructor(e){super(),this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new YE(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new Ab(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=Ab.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}},Rb=class{scrollLeft;scrollTop;isDone;constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};function jE(o,e){let t=e-o;return function(n){return o+t*U2(n)}}function V2(o,e,t){return function(n){return n<t?o(n/t):e((n-t)/(1-t))}}var Ab=class o{from;to;duration;startTime;animationFrameDisposable;scrollLeft;scrollTop;constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,s;return e<t?(r=e+.75*n,s=t-.75*n):(r=e-.75*n,s=t+.75*n),V2(jE(e,r),jE(s,t),.33)}return jE(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;if(t<1){let n=this.scrollLeft(t),i=this.scrollTop(t);return new Rb(n,i,!1)}return new Rb(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return o.start(e,t,n)}static start(e,t,n){n=n+10;let i=Date.now()-10;return new o(e,t,i,n)}};function W2(o){return Math.pow(o,3)}function U2(o){return 1-W2(1-o)}var Ob=new class{_zoomLevel=0;_onDidChangeZoomLevel=new x;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(){return this._zoomLevel}setZoomLevel(o){o=Math.min(Math.max(-5,o),20),this._zoomLevel!==o&&(this._zoomLevel=o,this._onDidChangeZoomLevel.fire(this._zoomLevel))}};var z2=Fe?1.5:1.35,QE=8,nm=class o{_bareFontInfoBrand=void 0;static createFromValidatedSettings(e,t,n){let i=e.get(50),r=e.get(54),s=e.get(53),a=e.get(52),l=e.get(55),d=e.get(68),u=e.get(65);return o._create(i,r,s,a,l,d,u,t,n)}static createFromRawSettings(e,t,n=!1){let i=yl.fontFamily.validate(e.fontFamily),r=yl.fontWeight.validate(e.fontWeight),s=yl.fontSize.validate(e.fontSize),a=yl.fontLigatures2.validate(e.fontLigatures),l=yl.fontVariations.validate(e.fontVariations),d=yl.lineHeight.validate(e.lineHeight),u=yl.letterSpacing.validate(e.letterSpacing);return o._create(i,r,s,a,l,d,u,t,n)}static _create(e,t,n,i,r,s,a,l,d){s===0?s=z2*n:s<QE&&(s=s*n),s=Math.round(s),s<QE&&(s=QE);let u=1+(d?0:Ob.getZoomLevel()*.1);return n*=u,s*=u,r===bu.TRANSLATE&&(t==="normal"||t==="bold"?r=bu.OFF:(r=`'wght' ${parseInt(t,10)}`,t="normal")),new o({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,fontVariationSettings:r,lineHeight:s,letterSpacing:a})}pixelRatio;fontFamily;fontWeight;fontSize;fontFeatureSettings;fontVariationSettings;lineHeight;letterSpacing;constructor(e){this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let e=Fr.fontFamily,t=o._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}},XE=2,fu=class extends nm{_editorStylingBrand=void 0;version=XE;isTrusted;isMonospace;typicalHalfwidthCharacterWidth;typicalFullwidthCharacterWidth;canUseHalfwidthRightwardsArrow;spaceWidth;middotWidth;wsmiddotWidth;maxDigitWidth;constructor(e,t){super(e),this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}};var Es={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var ZE="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function H2(o=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let t of ZE)o.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}var JE=H2();function im(o){let e=JE;if(o&&o instanceof RegExp)if(o.global)e=o;else{let t="g";o.ignoreCase&&(t+="i"),o.multiline&&(t+="m"),o.unicode&&(t+="u"),e=new RegExp(o.source,t)}return e.lastIndex=0,e}var _L=new bi;_L.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Pb(o,e,t,n,i){if(e=im(e),i||(i=wo.first(_L)),t.length>i.maxLen){let d=o-i.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,o+i.maxLen/2),Pb(o,e,t,n,i)}let r=Date.now(),s=o-1-n,a=-1,l=null;for(let d=1;!(Date.now()-r>=i.timeBudget);d++){let u=s-i.windowSize*d;e.lastIndex=Math.max(0,u);let p=K2(e,t,s,a);if(!p&&l||(l=p,u<=0))break;a=u}if(l){let d={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,d}return null}function K2(o,e,t,n){let i;for(;i=o.exec(e);){let r=i.index||0;if(r<=t&&o.lastIndex>=t)return i;if(n>0&&r>n)return null}return null}function eC(...o){switch(o.length){case 1:return c("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",o[0]);case 2:return c("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",o[0],o[1]);case 3:return c("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",o[0],o[1],o[2]);default:return}}var G2=c("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),q2=c("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),Il=class o{static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw n_(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static _regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0)));static _keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);_input="";_start=0;_current=0;_tokens=[];_errors=[];get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){let t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){let t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(eC("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(eC("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(eC("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){let t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy;_string(){this.stringRe.lastIndex=this._start;let e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;let t=this._input.substring(this._start,this._current),n=o._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(G2);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(q2);return}let r=this._input.charCodeAt(e);if(t)t=!1;else if(r===47&&!n){e++;break}else r===91?n=!0:r===92?t=!0:r===93&&(n=!1);e++}for(;e<this._input.length&&o._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;let i=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};var om=class{ctor;staticArguments;supportsDelayedInstantiation;constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}};var rm=class{_entries=new Map;constructor(...e){for(let[t,n]of e)this.set(t,n)}set(e,t){let n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var Sl;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(r){return r[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n})(Sl||={});var Ze=H("instantiationService");function $2(o,e,t){e[Sl.DI_TARGET]===e?e[Sl.DI_DEPENDENCIES].push({id:o,index:t}):(e[Sl.DI_DEPENDENCIES]=[{id:o,index:t}],e[Sl.DI_TARGET]=e)}function H(o){if(Sl.serviceIds.has(o))return Sl.serviceIds.get(o);let e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");$2(e,t,i)};return e.toString=()=>o,Sl.serviceIds.set(o,e),e}var ti=new Map;ti.set("false",!1);ti.set("true",!0);ti.set("isMac",Fe);ti.set("isLinux",Kt);ti.set("isWindows",St);ti.set("isWeb",Cn);ti.set("isMacNative",Fe&&!Cn);ti.set("isEdge",v_);ti.set("isFirefox",Tf);ti.set("isChrome",Cx);ti.set("isSafari",b_);var j2=Object.prototype.hasOwnProperty;var Y2={regexParsingWithErrorRecovery:!0},Q2=c("contextkey.parser.error.emptyString","Empty context key expression"),X2=c("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),Z2=c("contextkey.parser.error.noInAfterNot","'in' after 'not'."),LL=c("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),J2=c("contextkey.parser.error.unexpectedToken","Unexpected token"),eV=c("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),tV=c("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),nV=c("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?"),tC=class o{constructor(e=Y2){this._config=e}static _parseError=new Error;_scanner=new Il;_tokens=[];_current=0;_parsingErrors=[];get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}parse(e){if(e===""){this._parsingErrors.push({message:Q2,offset:0,lexeme:"",additionalInfo:X2});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{let t=this._expr();if(!this._isAtEnd()){let n=this._peek(),i=n.type===17?eV:void 0;throw this._parsingErrors.push({message:J2,offset:n.offset,lexeme:Il.getLexeme(n),additionalInfo:i}),o._parseError}return t}catch(t){if(t!==o._parseError)throw t;return}}_expr(){return this._or()}_or(){let e=[this._and()];for(;this._matchOne(16);){let t=this._and();e.push(t)}return e.length===1?e[0]:$.or(...e)}_and(){let e=[this._term()];for(;this._matchOne(15);){let t=this._term();e.push(t)}return e.length===1?e[0]:$.and(...e)}_term(){if(this._matchOne(2)){let e=this._peek();switch(e.type){case 11:return this._advance(),Ai.INSTANCE;case 12:return this._advance(),Qi.INSTANCE;case 0:{this._advance();let t=this._expr();return this._consume(1,LL),t?.negate()}case 17:return this._advance(),Nd.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){let e=this._peek();switch(e.type){case 11:return this._advance(),$.true();case 12:return this._advance(),$.false();case 0:{this._advance();let t=this._expr();return this._consume(1,LL),t}case 17:{let t=e.lexeme;if(this._advance(),this._matchOne(9)){let i=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),i.type!==10)throw this._errExpectedButGot("REGEX",i);let r=i.lexeme,s=r.lastIndexOf("/"),a=s===r.length-1?void 0:this._removeFlagsGY(r.substring(s+1)),l;try{l=new RegExp(r.substring(1,s),a)}catch{throw this._errExpectedButGot("REGEX",i)}return hm.create(t,l)}switch(i.type){case 10:case 19:{let r=[i.lexeme];this._advance();let s=this._peek(),a=0;for(let h=0;h<i.lexeme.length;h++)i.lexeme.charCodeAt(h)===40?a++:i.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&s.type!==15&&s.type!==16;){switch(s.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:i.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;r.push(Il.getLexeme(s)),this._advance(),s=this._peek()}let l=r.join(""),d=l.lastIndexOf("/"),u=d===l.length-1?void 0:this._removeFlagsGY(l.substring(d+1)),p;try{p=new RegExp(l.substring(1,d),u)}catch{throw this._errExpectedButGot("REGEX",i)}return $.regex(t,p)}case 18:{let r=i.lexeme;this._advance();let s=null;if(!o0(r)){let a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){let d=r.slice(a+1,l),u=r[l+1]==="i"?"i":"";try{s=new RegExp(d,u)}catch{throw this._errExpectedButGot("REGEX",i)}}}if(s===null)throw this._errExpectedButGot("REGEX",i);return hm.create(t,s)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,Z2);let i=this._value();return $.notIn(t,i)}switch(this._peek().type){case 3:{this._advance();let i=this._value();if(this._previous().type===18)return $.equals(t,i);switch(i){case"true":return $.has(t);case"false":return $.not(t);default:return $.equals(t,i)}}case 4:{this._advance();let i=this._value();if(this._previous().type===18)return $.notEquals(t,i);switch(i){case"true":return $.not(t);case"false":return $.has(t);default:return $.notEquals(t,i)}}case 5:return this._advance(),um.create(t,this._value());case 6:return this._advance(),pm.create(t,this._value());case 7:return this._advance(),dm.create(t,this._value());case 8:return this._advance(),cm.create(t,this._value());case 13:return this._advance(),$.in(t,this._value());default:return $.has(t)}}case 20:throw this._parsingErrors.push({message:tV,offset:e.offset,lexeme:"",additionalInfo:nV}),o._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_flagsGYRe=/g|y/g;_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){let i=c("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Il.getLexeme(t)),r=t.offset,s=Il.getLexeme(t);return this._parsingErrors.push({message:i,offset:r,lexeme:s,additionalInfo:n}),o._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},$=class{static false(){return Ai.INSTANCE}static true(){return Qi.INSTANCE}static has(e){return Md.create(e)}static equals(e,t){return am.create(e,t)}static notEquals(e,t){return lm.create(e,t)}static regex(e,t){return hm.create(e,t)}static in(e,t){return Mb.create(e,t)}static notIn(e,t){return Nb.create(e,t)}static not(e){return Nd.create(e)}static and(...e){return Fb.create(e,null,!0)}static or(...e){return mm.create(e,null,!0)}static greater(e,t){return dm.create(e,t)}static greaterEquals(e,t){return cm.create(e,t)}static smaller(e,t){return um.create(e,t)}static smallerEquals(e,t){return pm.create(e,t)}static _parser=new tC({regexParsingWithErrorRecovery:!1});static deserialize(e){return e==null?void 0:this._parser.parse(e)}};function sm(o,e){return o.cmp(e)}var Ai=class o{static INSTANCE=new o;type=0;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return Qi.INSTANCE}},Qi=class o{static INSTANCE=new o;type=1;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return Ai.INSTANCE}},Md=class o{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=ti.get(e);return typeof n=="boolean"?n?Qi.INSTANCE:Ai.INSTANCE:new o(e,t)}type=2;cmp(e){return e.type!==this.type?this.type-e.type:OL(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=ti.get(this.key);return typeof e=="boolean"?e?Qi.INSTANCE:Ai.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=Nd.create(this.key,this)),this.negated}},am=class o{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?Md.create(e,n):Nd.create(e,n);let i=ti.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Qi.INSTANCE:Ai.INSTANCE:new o(e,t,n)}type=4;cmp(e){return e.type!==this.type?this.type-e.type:Fd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=ti.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Qi.INSTANCE:Ai.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=lm.create(this.key,this.value,this)),this.negated}},Mb=class o{constructor(e,t){this.key=e;this.valueKey=t}static create(e,t){return new o(e,t)}type=10;negated=null;cmp(e){return e.type!==this.type?this.type-e.type:Fd(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?j2.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=Nb.create(this.key,this.valueKey)),this.negated}},Nb=class o{constructor(e,t){this.key=e;this.valueKey=t;this._negated=Mb.create(e,t)}static create(e,t){return new o(e,t)}type=11;_negated;cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}},lm=class o{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?Nd.create(e,n):Md.create(e,n);let i=ti.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Ai.INSTANCE:Qi.INSTANCE:new o(e,t,n)}type=5;cmp(e){return e.type!==this.type?this.type-e.type:Fd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=ti.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Ai.INSTANCE:Qi.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=am.create(this.key,this.value,this)),this.negated}},Nd=class o{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=ti.get(e);return typeof n=="boolean"?n?Ai.INSTANCE:Qi.INSTANCE:new o(e,t)}type=3;cmp(e){return e.type!==this.type?this.type-e.type:OL(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=ti.get(this.key);return typeof e=="boolean"?e?Ai.INSTANCE:Qi.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=Md.create(this.key,this)),this.negated}};function Bb(o,e){if(typeof o=="string"){let t=parseFloat(o);isNaN(t)||(o=t)}return typeof o=="string"||typeof o=="number"?e(o):Ai.INSTANCE}var dm=class o{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return Bb(t,i=>new o(e,i,n))}type=12;cmp(e){return e.type!==this.type?this.type-e.type:Fd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=pm.create(this.key,this.value,this)),this.negated}},cm=class o{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return Bb(t,i=>new o(e,i,n))}type=13;cmp(e){return e.type!==this.type?this.type-e.type:Fd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=um.create(this.key,this.value,this)),this.negated}},um=class o{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return Bb(t,i=>new o(e,i,n))}type=14;cmp(e){return e.type!==this.type?this.type-e.type:Fd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=cm.create(this.key,this.value,this)),this.negated}},pm=class o{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return Bb(t,i=>new o(e,i,n))}type=15;cmp(e){return e.type!==this.type?this.type-e.type:Fd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=dm.create(this.key,this.value,this)),this.negated}},hm=class o{constructor(e,t){this.key=e;this.regexp=t}static create(e,t){return new o(e,t)}type=7;negated=null;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=nC.create(this)),this.negated}},nC=class o{constructor(e){this._actual=e}static create(e){return new o(e)}type=8;cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new o(this._actual.map(e))}negate(){return this._actual}};function AL(o){let e=null;for(let t=0,n=o.length;t<n;t++){let i=o[t].substituteConstants();if(o[t]!==i&&e===null){e=[];for(let r=0;r<t;r++)e[r]=o[r]}e!==null&&(e[t]=i)}return e===null?o:e}var Fb=class o{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return o._normalizeArr(e,t,n)}type=6;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let i=sm(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=AL(this.expr);return e===this.expr?this:o.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){let i=[],r=!1;for(let s of e)if(s){if(s.type===1){r=!0;continue}if(s.type===0)return Ai.INSTANCE;if(s.type===6){i.push(...s.expr);continue}i.push(s)}if(i.length===0&&r)return Qi.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(sm);for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];for(;i.length>1;){let s=i[i.length-1];if(s.type!==9)break;i.pop();let a=i.pop(),l=i.length===0,d=mm.create(s.expr.map(u=>o.create([u,a],null,n)),null,l);d&&(i.push(d),i.sort(sm))}if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)if(i[s].negate().equals(i[a]))return Ai.INSTANCE;if(i.length===1)return i[0]}return new o(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new o(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=mm.create(e,this,!0)}return this.negated}},mm=class o{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return o._normalizeArr(e,t,n)}type=9;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let i=sm(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=AL(this.expr);return e===this.expr?this:o.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],r=!1;if(e){for(let s=0,a=e.length;s<a;s++){let l=e[s];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return Qi.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&r)return Ai.INSTANCE;i.sort(sm)}if(i.length!==0){if(i.length===1)return i[0];for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)if(i[s].negate().equals(i[a]))return Qi.INSTANCE;if(i.length===1)return i[0]}return new o(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new o(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){let t=e.shift(),n=e.shift(),i=[];for(let r of RL(t))for(let s of RL(n))i.push(Fb.create([r,s],null,!1));e.unshift(o.create(i,null,!1))}this.negated=o.create(e,this,!0)}return this.negated}},U=class o extends Md{static _info=[];static all(){return o._info.values()}_defaultValue;constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?o._info.push({...n,key:e}):n!==!0&&o._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return am.create(this.key,e)}notEqualsTo(e){return lm.create(this.key,e)}},st=H("contextKeyService");function OL(o,e){return o<e?-1:o>e?1:0}function Fd(o,e,t,n){return o<t?-1:o>t?1:e<n?-1:e>n?1:0}function RL(o){return o.type===9?o.expr:[o]}var Cs=H("accessibilityService");var DG=new U("accessibilityModeEnabled",!1);var PL="ACCESSIBLE_VIEW_SHOWN_";var Yo=H("environmentService"),WG=Yo;var bn=H("contextService");function yu(o){let e=o;return typeof e?.id=="string"&&j.isUri(e.uri)}var rV={id:"ext-dev"},sV={id:"empty-window"};function ML(o,e){if(typeof o=="string"||typeof o>"u")return typeof o=="string"?{id:rl(o)}:e?rV:sV;let t=o;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function Wb(o){let e=o;return typeof e?.id=="string"&&j.isUri(e.configPath)}var NL="code-workspace",aV=`.${NL}`,eq=[{name:c("codeWorkspace","Code Workspace"),extensions:[NL]}];function FL(o){let e;return j.isUri(o)?e=o:e=o.configuration,e?.scheme===me.tmp}function BL(o){return(typeof o=="string"?vd(o):Ad(o))===aV}var He=H("configurationService");function VL(o){return o.applicationValue!==void 0||o.userValue!==void 0||o.userLocalValue!==void 0||o.userRemoteValue!==void 0||o.workspaceValue!==void 0||o.workspaceFolderValue!==void 0}function WL(o){return o.replace(/[\[\]]/g,"")}var iC=class{data=new Map;add(e,t){Pf(gn(e)),Pf(kn(t)),Pf(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}},Be=new iC;var va={JSONContribution:"base.contributions.json"};function lV(o){return o.length>0&&o.charAt(o.length-1)==="#"?o.substring(0,o.length-1):o}var oC=class{schemasById;_onDidChangeSchema=new x;onDidChangeSchema=this._onDidChangeSchema.event;constructor(){this.schemasById={}}registerSchema(e,t){this.schemasById[lV(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){let t=this.schemasById[e];return t?kL(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}},dV=new oC;Be.add(va.JSONContribution,dV);var Sq=H("policy");var ws={Configuration:"base.contributions.configuration"};var zb={properties:{},patternProperties:{}},Hb={properties:{},patternProperties:{}},Kb={properties:{},patternProperties:{}},Gb={properties:{},patternProperties:{}},qb={properties:{},patternProperties:{}},gm={properties:{},patternProperties:{}},Bd="vscode://schemas/settings/resourceLanguage";var $b=Be.as(va.JSONContribution),rC=class{registeredConfigurationDefaults=[];configurationDefaultsOverrides;defaultLanguageConfigurationOverridesNode;configurationContributors;configurationProperties;policyConfigurations;excludedConfigurationProperties;resourceLanguageSettingsSchema;overrideIdentifiers=new Set;_onDidSchemaChange=new x;onDidSchemaChange=this._onDidSchemaChange.event;_onDidUpdateConfiguration=new x;onDidUpdateConfiguration=this._onDidUpdateConfiguration.event;constructor(){this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:c("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},$b.registerSchema(Bd,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let n=new Set;this.doRegisterConfigurations(e,t,n),$b.registerSchema(Bd,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){let t=new Set;this.doDeregisterConfigurations(e,t),$b.registerSchema(Bd,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){let n=new Set;this.doDeregisterConfigurations(t,n),this.doRegisterConfigurations(e,!1,n),$b.registerSchema(Bd,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){let t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);let n=[];for(let{overrides:i,source:r}of e)for(let s in i){t.add(s);let a=this.configurationDefaultsOverrides.get(s)??this.configurationDefaultsOverrides.set(s,{configurationDefaultOverrides:[]}).get(s),l=i[s];if(a.configurationDefaultOverrides.push({value:l,source:r}),Iu.test(s)){let d=this.mergeDefaultConfigurationsForOverrideIdentifier(s,l,r,a.configurationDefaultOverrideValue);if(!d)continue;a.configurationDefaultOverrideValue=d,this.updateDefaultOverrideProperty(s,d,r),n.push(...cV(s))}else{let d=this.mergeDefaultConfigurationsForConfigurationProperty(s,l,r,a.configurationDefaultOverrideValue);if(!d)continue;a.configurationDefaultOverrideValue=d;let u=this.configurationProperties[s];u&&(this.updatePropertyDefaultValue(s,u),this.updateSchema(s,u))}}this.doRegisterOverrideIdentifiers(n)}deregisterDefaultConfigurations(e){let t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(let n of e){let i=this.registeredConfigurationDefaults.indexOf(n);i!==-1&&this.registeredConfigurationDefaults.splice(i,1)}for(let{overrides:n,source:i}of e)for(let r in n){let s=this.configurationDefaultsOverrides.get(r);if(!s)continue;let a=s.configurationDefaultOverrides.findIndex(l=>i?l.source?.id===i.id:l.value===n[r]);if(a!==-1){if(s.configurationDefaultOverrides.splice(a,1),s.configurationDefaultOverrides.length===0&&this.configurationDefaultsOverrides.delete(r),Iu.test(r)){let l;for(let d of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForOverrideIdentifier(r,d.value,d.source,l);l&&!Rd(l.value)?(s.configurationDefaultOverrideValue=l,this.updateDefaultOverrideProperty(r,l,i)):(this.configurationDefaultsOverrides.delete(r),delete this.configurationProperties[r],delete this.defaultLanguageConfigurationOverridesNode.properties[r])}else{let l;for(let u of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForConfigurationProperty(r,u.value,u.source,l);s.configurationDefaultOverrideValue=l;let d=this.configurationProperties[r];d&&(this.updatePropertyDefaultValue(r,d),this.updateSchema(r,d))}t.add(r)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,n){let i={type:"object",default:t.value,description:c("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",WL(e)),$ref:Bd,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=i,this.defaultLanguageConfigurationOverridesNode.properties[e]=i}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,i){let r=i?.value||{},s=i?.source??new Map;if(!(s instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(let a of Object.keys(t)){let l=t[a];if(kn(l)&&(Un(r[a])||kn(r[a]))){if(r[a]={...r[a]??{},...l},n)for(let u in l)s.set(`${a}.${u}`,n)}else r[a]=l,n?s.set(a,n):s.delete(a)}return{value:r,source:s}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,i){let r=this.configurationProperties[e],s=i?.value??r?.defaultDefaultValue,a=n;if(kn(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(Un(s)||kn(s)))){if(a=i?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(let d in t)n&&a.set(`${e}.${d}`,n);t={...kn(s)?s:{},...t}}return{value:t,source:a}}deltaConfiguration(e){let t=!1,n=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,n),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,n),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,n),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(i=>{this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties,void 0,n),this.configurationContributors.push(i),this.registerJSONConfiguration(i)})}doDeregisterConfigurations(e,t){let n=i=>{if(i.properties)for(let r in i.properties){t.add(r);let s=this.configurationProperties[r];s?.policy?.name&&this.policyConfigurations.delete(s.policy.name),delete this.configurationProperties[r],this.removeFromSchema(r,i.properties[r])}i.allOf?.forEach(r=>n(r))};for(let i of e){n(i);let r=this.configurationContributors.indexOf(i);r!==-1&&this.configurationContributors.splice(r,1)}}validateAndRegisterProperties(e,t=!0,n,i,r=3,s){r=vi(e.scope)?r:e.scope;let a=e.properties;if(a)for(let d in a){let u=a[d];if(t&&pV(d,u)){delete a[d];continue}if(u.source=n,u.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,u),Iu.test(d)?u.scope=void 0:(u.scope=vi(u.scope)?r:u.scope,u.restricted=vi(u.restricted)?!!i?.includes(d):u.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d],a[d].policy?.name&&this.policyConfigurations.set(a[d].policy.name,d);!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),s.add(d)}let l=e.allOf;if(l)for(let d of l)this.validateAndRegisterProperties(d,t,n,i,r,s)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){let e=new Map;for(let[t,n]of this.configurationDefaultsOverrides)n.configurationDefaultOverrideValue&&e.set(t,n.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){let t=n=>{let i=n.properties;if(i)for(let s in i)this.updateSchema(s,i[s]);n.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(zb.properties[e]=t,t.scope){case 1:Hb.properties[e]=t;break;case 2:Kb.properties[e]=t;break;case 6:Gb.properties[e]=t;break;case 3:qb.properties[e]=t;break;case 4:gm.properties[e]=t;break;case 5:gm.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(delete zb.properties[e],t.scope){case 1:delete Hb.properties[e];break;case 2:delete Kb.properties[e];break;case 6:delete Gb.properties[e];break;case 3:delete qb.properties[e];break;case 4:case 5:delete gm.properties[e],delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,n={type:"object",description:c("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:c("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Bd};this.updatePropertyDefaultValue(t,n),zb.properties[t]=n,Hb.properties[t]=n,Kb.properties[t]=n,Gb.properties[t]=n,qb.properties[t]=n,gm.properties[t]=n}}registerOverridePropertyPatternKey(){let e={type:"object",description:c("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:c("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Bd};zb.patternProperties[Vd]=e,Hb.patternProperties[Vd]=e,Kb.patternProperties[Vd]=e,Gb.patternProperties[Vd]=e,qb.patternProperties[Vd]=e,gm.patternProperties[Vd]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue,i,r;n&&(!t.disallowConfigurationDefault||!n.source)&&(i=n.value,r=n.source),Un(i)&&(i=t.defaultDefaultValue,r=void 0),Un(i)&&(i=uV(t.type)),t.default=i,t.defaultValueSource=r}},zL="\\[([^\\]]+)\\]",UL=new RegExp(zL,"g"),Vd=`^(${zL})+$`,Iu=new RegExp(Vd);function cV(o){let e=[];if(Iu.test(o)){let t=UL.exec(o);for(;t?.length;){let n=t[1].trim();n&&e.push(n),t=UL.exec(o)}}return ra(e)}function uV(o){switch(Array.isArray(o)?o[0]:o){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var jb=new rC;Be.add(ws.Configuration,jb);function pV(o,e){return o.trim()?Iu.test(o)?c("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",o):jb.getConfigurationProperties()[o]!==void 0?c("config.property.duplicate","Cannot register '{0}'. This property is already registered.",o):e.policy?.name&&jb.getPolicyConfigurations().get(e.policy?.name)!==void 0?c("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",o,e.policy?.name,jb.getPolicyConfigurations().get(e.policy?.name)):null:c("config.property.empty","Cannot register an empty property")}var mV=8,Yb=class{_values;constructor(e){this._values=e}hasChanged(e){return this._values[e]}},fm=class{stableMinimapLayoutInput;stableFitMaxMinimapScale;stableFitRemainingWidth;constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Rt=class{id;name;defaultValue;schema;constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Qb(e,t)}compute(e,t,n){return n}},xu=class{constructor(e,t){this.newValue=e;this.didChange=t}};function Qb(o,e){if(typeof o!="object"||typeof e!="object"||!o||!e)return new xu(e,o!==e);if(Array.isArray(o)||Array.isArray(e)){let n=Array.isArray(o)&&Array.isArray(e)&&Wn(o,e);return new xu(e,!n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){let i=Qb(o[n],e[n]);i.didChange&&(o[n]=i.newValue,t=!0)}return new xu(o,t)}var Ud=class{id;name;defaultValue;schema=void 0;constructor(e){this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Qb(e,t)}validate(e){return this.defaultValue}},xl=class{id;name;defaultValue;schema;constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Qb(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}};function Ee(o,e){return typeof o>"u"?e:o==="false"?!1:!!o}var Ye=class extends xl{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Ee(e,this.defaultValue)}};function gV(o,e,t,n){if(typeof o>"u")return e;let i=parseInt(o,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}var kt=class o extends xl{static clampedInt(e,t,n,i){return gV(e,t,n,i)}minimum;maximum;constructor(e,t,n,i,r,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=i,s.maximum=r),super(e,t,n,s),this.minimum=i,this.maximum=r}validate(e){return o.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}};var cr=class o extends xl{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;let n=parseFloat(e);return isNaN(n)?t:n}validationFn;constructor(e,t,n,i,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=i}validate(e){return this.validationFn(o.float(e,this.defaultValue))}},xi=class o extends xl{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return o.string(e,this.defaultValue)}};function nn(o,e,t,n){return typeof o!="string"?e:n&&o in n?n[o]:t.indexOf(o)===-1?e:o}var Vt=class extends xl{_allowedValues;constructor(e,t,n,i,r=void 0){typeof r<"u"&&(r.type="string",r.enum=i,r.default=n),super(e,t,n,r),this._allowedValues=i}validate(e){return nn(e,this.defaultValue,this._allowedValues)}},Su=class extends Rt{_allowedValues;_convert;constructor(e,t,n,i,r,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=i),super(e,t,n,a),this._allowedValues=r,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function fV(o){switch(o){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var sC=class extends Rt{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[c("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),c("accessibilitySupport.on","Optimize for usage with a Screen Reader."),c("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:c("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}},aC=class extends Rt{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:c("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:c("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertSpace:Ee(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Ee(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};function bV(o){switch(o){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}function vV(o){switch(o){case"line":return 1;case"block":return 2;case"underline":return 3;case"line-thin":return 4;case"block-outline":return 5;case"underline-thin":return 6}}var lC=class extends Ud{constructor(){super(144)}compute(e,t,n){let i=["monaco-editor"];return t.get(40)&&i.push(t.get(40)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(75)==="default"?i.push("mouse-default"):t.get(75)==="copy"&&i.push("mouse-copy"),t.get(113)&&i.push("showUnused"),t.get(142)&&i.push("showDeprecated"),i.join(" ")}},dC=class extends Ye{constructor(){super(38,"emptySelectionClipboard",!0,{description:c("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}},cC=class extends Rt{constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(42,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:c("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[c("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),c("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),c("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:c("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[c("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),c("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),c("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:c("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:c("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Fe},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:c("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:c("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{cursorMoveOnType:Ee(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":nn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":nn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Ee(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Ee(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Ee(t.loop,this.defaultValue.loop)}}},bm=class o extends Rt{static OFF='"liga" off, "calt" off';static ON='"liga" on, "calt" on';constructor(){super(52,"fontLigatures",o.OFF,{anyOf:[{type:"boolean",description:c("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:c("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:c("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?o.OFF:e==="true"?o.ON:e:e?o.ON:o.OFF}},bu=class o extends Rt{static OFF="normal";static TRANSLATE="translate";constructor(){super(55,"fontVariations",o.OFF,{anyOf:[{type:"boolean",description:c("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:c("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:c("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?o.OFF:e==="true"?o.TRANSLATE:e:e?o.TRANSLATE:o.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}},uC=class extends Ud{constructor(){super(51)}compute(e,t,n){return e.fontInfo}},pC=class extends xl{constructor(){super(53,"fontSize",Fr.fontSize,{type:"number",minimum:6,maximum:100,default:Fr.fontSize,description:c("fontSize","Controls the font size in pixels.")})}validate(e){let t=cr.float(e,this.defaultValue);return t===0?Fr.fontSize:cr.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}},hC=class o extends Rt{static SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];static MINIMUM_VALUE=1;static MAXIMUM_VALUE=1e3;constructor(){super(54,"fontWeight",Fr.fontWeight,{anyOf:[{type:"number",minimum:o.MINIMUM_VALUE,maximum:o.MAXIMUM_VALUE,errorMessage:c("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:o.SUGGESTION_VALUES}],default:Fr.fontWeight,description:c("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(kt.clampedInt(e,Fr.fontWeight,o.MINIMUM_VALUE,o.MAXIMUM_VALUE))}},mC=class extends Rt{constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[c("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),c("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),c("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(59,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:c("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:c("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:c("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:c("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:c("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:c("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:c("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:c("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:c("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:c("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:c("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{multiple:nn(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??nn(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??nn(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??nn(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??nn(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??nn(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??nn(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:xi.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:xi.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:xi.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:xi.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:xi.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:xi.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},gC=class extends Rt{constructor(){let e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(61,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:c("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:c("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:c("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:c("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:c("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),delay:kt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Ee(t.sticky,this.defaultValue.sticky),hidingDelay:kt.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Ee(t.above,this.defaultValue.above)}}};var fC=class o extends Ud{constructor(){super(147)}compute(e,t,n){return o.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight),i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));let r=(n+e.viewLineCount+i)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:r,minimapLineCount:s}}static _computeMinimapLayout(e,t){let n=e.outerWidth,i=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};let s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.paddingTop===s.paddingTop&&e.paddingBottom===s.paddingBottom&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,l=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,p=e.minimap.renderCharacters,h=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale,m=e.minimap.maxColumn,g=e.minimap.size,f=e.minimap.side,y=e.verticalScrollbarWidth,C=e.viewLineCount,w=e.remainingWidth,R=e.isViewportWrapping,_=p?2:3,B=Math.floor(r*i),K=B/r,F=!1,V=!1,oe=_*h,ge=h/r,we=1;if(g==="fill"||g==="fit"){let{typicalViewportLineCount:fe,extraLinesBeforeFirstLine:Se,extraLinesBeyondLastLine:qe,desiredRatio:Ue,minimapLineCount:_t}=o.computeContainedMinimapLineCount({viewLineCount:C,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:i,lineHeight:l,pixelRatio:r});if(C/_t>1)F=!0,V=!0,h=1,oe=1,ge=h/r;else{let ke=!1,Zn=h+1;if(g==="fit"){let Ln=Math.ceil((Se+C+qe)*oe);R&&a&&w<=t.stableFitRemainingWidth?(ke=!0,Zn=t.stableFitMaxMinimapScale):ke=Ln>B}if(g==="fill"||ke){F=!0;let Ln=h;oe=Math.min(l*r,Math.max(1,Math.floor(1/Ue))),R&&a&&w<=t.stableFitRemainingWidth&&(Zn=t.stableFitMaxMinimapScale),h=Math.min(Zn,Math.max(1,Math.floor(oe/_))),h>Ln&&(we=Math.min(2,h/Ln)),ge=h/r/we,B=Math.ceil(Math.max(fe,Se+C+qe)*oe),R?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=w,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}let ht=Math.floor(m*ge),tt=Math.min(ht,Math.max(0,Math.floor((w-y-2)*ge/(d+ge)))+mV),gt=Math.floor(r*tt),ve=gt/r;gt=Math.floor(gt*we);let se=p?1:2,Ie=f==="left"?0:n-tt-y;return{renderMinimap:se,minimapLeft:Ie,minimapWidth:tt,minimapHeightIsEditorHeight:F,minimapIsSampling:V,minimapScale:h,minimapLineHeight:oe,minimapCanvasInnerWidth:gt,minimapCanvasInnerHeight:B,minimapCanvasOuterWidth:ve,minimapCanvasOuterHeight:K}}static computeLayout(e,t){let n=t.outerWidth|0,i=t.outerHeight|0,r=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,d=t.pixelRatio,u=t.viewLineCount,p=e.get(139),h=p==="inherit"?e.get(138):p,m=h==="inherit"?e.get(134):h,g=e.get(137),f=t.isDominatedByLongLines,y=e.get(58),C=e.get(69).renderType!==0,w=e.get(70),R=e.get(107),_=e.get(85),B=e.get(74),K=e.get(105),F=K.verticalScrollbarSize,V=K.verticalHasArrows,oe=K.arrowSize,ge=K.horizontalScrollbarSize,we=e.get(44),ht=e.get(112)!=="never",tt=e.get(67);we&&ht&&(tt+=16);let gt=0;if(C){let xo=Math.max(s,w);gt=Math.round(xo*l)}let ve=0;y&&(ve=r*t.glyphMarginDecorationLaneCount);let se=0,Ie=se+ve,fe=Ie+gt,Se=fe+tt,qe=n-ve-gt-tt,Ue=!1,_t=!1,Xe=-1;h==="inherit"&&f?(Ue=!0,_t=!0):m==="on"||m==="bounded"?_t=!0:m==="wordWrapColumn"&&(Xe=g);let ke=o._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:R,paddingTop:_.top,paddingBottom:_.bottom,minimap:B,verticalScrollbarWidth:F,viewLineCount:u,remainingWidth:qe,isViewportWrapping:_t},t.memory||new fm);ke.renderMinimap!==0&&ke.minimapLeft===0&&(se+=ke.minimapWidth,Ie+=ke.minimapWidth,fe+=ke.minimapWidth,Se+=ke.minimapWidth);let Zn=qe-ke.minimapWidth,Ln=Math.max(1,Math.floor((Zn-F-2)/a)),io=V?oe:0;return _t&&(Xe=Math.max(1,Ln),m==="bounded"&&(Xe=Math.min(Xe,g))),{width:n,height:i,glyphMarginLeft:se,glyphMarginWidth:ve,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:Ie,lineNumbersWidth:gt,decorationsLeft:fe,decorationsWidth:tt,contentLeft:Se,contentWidth:Zn,minimap:ke,viewportColumn:Ln,isWordWrapMinified:Ue,isViewportWrapping:_t,wrappingColumn:Xe,verticalScrollbarWidth:F,horizontalScrollbarHeight:ge,overviewRuler:{top:io,width:F,height:i-2*io,right:0}}}},bC=class extends Rt{constructor(){super(141,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[c("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),c("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:c("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return nn(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}};var vC=class extends Rt{constructor(){let e={enabled:"onCode"};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:["off","onCode","on"],default:e.enabled,enumDescriptions:[c("editor.lightbulb.enabled.off","Disable the code action menu."),c("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),c("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:c("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:nn(e.enabled,this.defaultValue.enabled,["off","onCode","on"])}}},yC=class extends Rt{constructor(){let e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(117,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:c("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:c("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:c("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:c("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),maxLineCount:kt.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:nn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Ee(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},IC=class extends Rt{constructor(){let e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(143,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:c("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[c("editor.inlayHints.on","Inlay hints are enabled"),c("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Fe?"Ctrl+Option":"Ctrl+Alt"),c("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Fe?"Ctrl+Option":"Ctrl+Alt"),c("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:c("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:c("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:c("inlayHints.padding","Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:c("inlayHints.maximumLength","Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:nn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:kt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:xi.string(t.fontFamily,this.defaultValue.fontFamily),padding:Ee(t.padding,this.defaultValue.padding),maximumLength:kt.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},SC=class extends Rt{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):kt.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?kt.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}},xC=class extends cr{constructor(){super(68,"lineHeight",Fr.lineHeight,e=>cr.clamp(e,0,150),{markdownDescription:c("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}},EC=class extends Rt{constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:c("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:c("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[c("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),c("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),c("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:c("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:c("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:c("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:c("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:c("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:c("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:c("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:c("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:c("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:c("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),autohide:Ee(t.autohide,this.defaultValue.autohide),size:nn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:nn(t.side,this.defaultValue.side,["right","left"]),showSlider:nn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Ee(t.renderCharacters,this.defaultValue.renderCharacters),scale:kt.clampedInt(t.scale,1,1,3),maxColumn:kt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Ee(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Ee(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:cr.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:cr.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function yV(o){return o==="ctrlCmd"?Fe?"metaKey":"ctrlKey":"altKey"}var CC=class extends Rt{constructor(){super(85,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:c("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:c("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{top:kt.clampedInt(t.top,0,0,1e3),bottom:kt.clampedInt(t.bottom,0,0,1e3)}}},wC=class extends Rt{constructor(){let e={enabled:!0,cycle:!0};super(87,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:c("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:c("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),cycle:Ee(t.cycle,this.defaultValue.cycle)}}},TC=class extends Ud{constructor(){super(145)}compute(e,t,n){return e.pixelRatio}},kC=class extends Rt{constructor(){super(89,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},DC=class extends Rt{defaultValue;constructor(){let e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[c("on","Quick suggestions show inside the suggest widget"),c("inline","Quick suggestions show as ghost text"),c("off","Quick suggestions are disabled")]}];super(91,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:c("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:c("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:c("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:c("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){let d=e?"on":"off";return{comments:d,strings:d,other:d}}if(!e||typeof e!="object")return this.defaultValue;let{other:t,comments:n,strings:i}=e,r=["on","inline","off"],s,a,l;return typeof t=="boolean"?s=t?"on":"off":s=nn(t,this.defaultValue.other,r),typeof n=="boolean"?a=n?"on":"off":a=nn(n,this.defaultValue.comments,r),typeof i=="boolean"?l=i?"on":"off":l=nn(i,this.defaultValue.strings,r),{other:s,comments:a,strings:l}}};var _C=class extends Rt{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[c("lineNumbers.off","Line numbers are not rendered."),c("lineNumbers.on","Line numbers are rendered as absolute number."),c("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),c("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:c("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}};var LC=class extends Rt{constructor(){let e=[],t={type:"number",description:c("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(104,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:c("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:c("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:kt.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){let i=n;t.push({column:kt.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}},RC=class extends Rt{constructor(){super(94,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function HL(o,e){if(typeof o!="string")return e;switch(o){case"hidden":return 2;case"visible":return 3;default:return 1}}var AC=class extends Rt{constructor(){let e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(105,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[c("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),c("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),c("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:c("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[c("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),c("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),c("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:c("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:c("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:c("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:c("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:c("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e,n=kt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=kt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:kt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:HL(t.vertical,this.defaultValue.vertical),horizontal:HL(t.horizontal,this.defaultValue.horizontal),useShadows:Ee(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Ee(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Ee(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Ee(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Ee(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:kt.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:kt.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Ee(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Ee(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},Br="inUntrustedWorkspace",Wd={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},OC=class extends Rt{constructor(){let e={nonBasicASCII:Br,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Br,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(127,"unicodeHighlight",e,{[Wd.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Br],default:e.nonBasicASCII,description:c("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Wd.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:c("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Wd.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:c("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Wd.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Br],default:e.includeComments,description:c("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Wd.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Br],default:e.includeStrings,description:c("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Wd.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:c("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Wd.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:c("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(Si(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(Si(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));let i=super.applyUpdate(e,t);return n?new xu(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{nonBasicASCII:Eu(t.nonBasicASCII,Br,[!0,!1,Br]),invisibleCharacters:Ee(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Ee(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Eu(t.includeComments,Br,[!0,!1,Br]),includeStrings:Eu(t.includeStrings,Br,[!0,!1,Br]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;let n={};for(let[i,r]of Object.entries(e))r===!0&&(n[i]=!0);return n}},PC=class extends Rt{constructor(){let e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1};super(63,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:c("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[c("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),c("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),c("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:c("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:c("inlineSuggest.syntaxHighlightingEnabled","Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:c("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:c("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),mode:nn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:nn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Ee(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Ee(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:xi.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:Ee(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled)}}},MC=class extends Rt{constructor(){let e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(64,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:c("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[c("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),c("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),c("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:c("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:c("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),showToolbar:nn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:xi.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Ee(t.keepOnBlur,this.defaultValue.keepOnBlur)}}},NC=class extends Rt{constructor(){let e={enabled:Es.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Es.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:c("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Ee(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},FC=class extends Rt{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[c("editor.guides.bracketPairs.true","Enables bracket pair guides."),c("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),c("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:c("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[c("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),c("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),c("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:c("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:c("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:c("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[c("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),c("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),c("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:c("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{bracketPairs:Eu(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Eu(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Ee(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Ee(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Eu(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Eu(o,e,t){let n=t.indexOf(o);return n===-1?e:t[n]}var BC=class extends Rt{constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(120,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[c("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),c("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:c("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:c("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:c("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:c("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[c("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),c("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),c("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),c("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:c("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:c("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:c("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:c("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:c("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:c("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:c("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:c("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertMode:nn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Ee(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Ee(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Ee(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Ee(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:nn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Ee(t.showIcons,this.defaultValue.showIcons),showStatusBar:Ee(t.showStatusBar,this.defaultValue.showStatusBar),preview:Ee(t.preview,this.defaultValue.preview),previewMode:nn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Ee(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Ee(t.showMethods,this.defaultValue.showMethods),showFunctions:Ee(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Ee(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Ee(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Ee(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Ee(t.showFields,this.defaultValue.showFields),showVariables:Ee(t.showVariables,this.defaultValue.showVariables),showClasses:Ee(t.showClasses,this.defaultValue.showClasses),showStructs:Ee(t.showStructs,this.defaultValue.showStructs),showInterfaces:Ee(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Ee(t.showModules,this.defaultValue.showModules),showProperties:Ee(t.showProperties,this.defaultValue.showProperties),showEvents:Ee(t.showEvents,this.defaultValue.showEvents),showOperators:Ee(t.showOperators,this.defaultValue.showOperators),showUnits:Ee(t.showUnits,this.defaultValue.showUnits),showValues:Ee(t.showValues,this.defaultValue.showValues),showConstants:Ee(t.showConstants,this.defaultValue.showConstants),showEnums:Ee(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Ee(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Ee(t.showKeywords,this.defaultValue.showKeywords),showWords:Ee(t.showWords,this.defaultValue.showWords),showColors:Ee(t.showColors,this.defaultValue.showColors),showFiles:Ee(t.showFiles,this.defaultValue.showFiles),showReferences:Ee(t.showReferences,this.defaultValue.showReferences),showFolders:Ee(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Ee(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Ee(t.showSnippets,this.defaultValue.showSnippets),showUsers:Ee(t.showUsers,this.defaultValue.showUsers),showIssues:Ee(t.showIssues,this.defaultValue.showIssues)}}},VC=class extends Rt{constructor(){super(115,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:c("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:c("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Ee(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Ee(e.selectSubwords,this.defaultValue.selectSubwords)}}},WC=class extends Rt{constructor(){let e=[];super(132,"wordSegmenterLocales",e,{anyOf:[{description:c("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:c("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}};var UC=class extends Rt{constructor(){super(140,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[c("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),c("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),c("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),c("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:c("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}},zC=class extends Ud{constructor(){super(148)}compute(e,t,n){let i=t.get(147);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},HC=class extends Rt{constructor(){let e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:c("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[c("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),c("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),showDropSelector:nn(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},KC=class extends Rt{constructor(){let e={enabled:!0,showPasteSelector:"afterPaste"};super(86,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:c("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[c("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),c("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),showPasteSelector:nn(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},IV="Consolas, 'Courier New', monospace",SV="Menlo, Monaco, 'Courier New', monospace",xV="'Droid Sans Mono', 'monospace', monospace",Fr={fontFamily:Fe?SV:Kt?xV:IV,fontWeight:"normal",fontSize:Fe?12:14,lineHeight:0,letterSpacing:0},Cu=[];function z(o){return Cu[o.id]=o,o}var yl={acceptSuggestionOnCommitCharacter:z(new Ye(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:c("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:z(new Vt(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",c("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:c("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:z(new sC),accessibilityPageSize:z(new kt(3,"accessibilityPageSize",10,1,1073741824,{description:c("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:z(new xi(4,"ariaLabel",c("editorViewAccessibleLabel","Editor content"))),ariaRequired:z(new Ye(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:z(new Ye(8,"screenReaderAnnounceInlineSuggestion",!0,{description:c("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:z(new Vt(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),c("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:c("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:z(new Vt(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),c("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:c("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:z(new Vt(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",c("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:c("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:z(new Vt(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",c("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:c("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:z(new Vt(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),c("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:c("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:z(new Su(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],fV,{enumDescriptions:[c("editor.autoIndent.none","The editor will not insert indentation automatically."),c("editor.autoIndent.keep","The editor will keep the current line's indentation."),c("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),c("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),c("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:c("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:z(new Ye(13,"automaticLayout",!1)),autoSurround:z(new Vt(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[c("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),c("editor.autoSurround.quotes","Surround with quotes but not brackets."),c("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:c("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:z(new NC),bracketPairGuides:z(new FC),stickyTabStops:z(new Ye(118,"stickyTabStops",!1,{description:c("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:z(new Ye(17,"codeLens",!0,{description:c("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:z(new xi(18,"codeLensFontFamily","",{description:c("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:z(new kt(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:c("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:z(new Ye(20,"colorDecorators",!0,{description:c("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:z(new Vt(150,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[c("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),c("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),c("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:c("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:z(new kt(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:c("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:z(new Ye(22,"columnSelection",!1,{description:c("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:z(new aC),contextmenu:z(new Ye(24,"contextmenu",!0)),copyWithSyntaxHighlighting:z(new Ye(25,"copyWithSyntaxHighlighting",!0,{description:c("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:z(new Su(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],bV,{description:c("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:z(new Vt(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[c("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),c("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),c("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:c("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:z(new Su(28,"cursorStyle",1,"line",["line","block","underline","line-thin","block-outline","underline-thin"],vV,{description:c("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:z(new kt(29,"cursorSurroundingLines",0,0,1073741824,{description:c("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:z(new Vt(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[c("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),c("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:c("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:z(new kt(31,"cursorWidth",0,0,1073741824,{markdownDescription:c("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:z(new Ye(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:z(new Ye(33,"disableMonospaceOptimizations",!1)),domReadOnly:z(new Ye(34,"domReadOnly",!1)),dragAndDrop:z(new Ye(35,"dragAndDrop",!0,{description:c("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:z(new dC),dropIntoEditor:z(new HC),experimentalEditContextEnabled:z(new Ye(37,"experimentalEditContextEnabled",!1,{description:c("experimentalEditContextEnabled","Sets whether the new experimental edit context should be used instead of the text area.")})),stickyScroll:z(new yC),experimentalWhitespaceRendering:z(new Vt(39,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[c("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),c("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),c("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:c("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:z(new xi(40,"extraEditorClassName","")),fastScrollSensitivity:z(new cr(41,"fastScrollSensitivity",5,o=>o<=0?5:o,{markdownDescription:c("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:z(new cC),fixedOverflowWidgets:z(new Ye(43,"fixedOverflowWidgets",!1)),folding:z(new Ye(44,"folding",!0,{description:c("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:z(new Vt(45,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[c("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),c("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:c("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:z(new Ye(46,"foldingHighlight",!0,{description:c("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:z(new Ye(47,"foldingImportsByDefault",!1,{description:c("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:z(new kt(48,"foldingMaximumRegions",5e3,10,65e3,{description:c("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:z(new Ye(49,"unfoldOnClickAfterEndOfLine",!1,{description:c("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:z(new xi(50,"fontFamily",Fr.fontFamily,{description:c("fontFamily","Controls the font family.")})),fontInfo:z(new uC),fontLigatures2:z(new bm),fontSize:z(new pC),fontWeight:z(new hC),fontVariations:z(new bu),formatOnPaste:z(new Ye(56,"formatOnPaste",!1,{description:c("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:z(new Ye(57,"formatOnType",!1,{description:c("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:z(new Ye(58,"glyphMargin",!0,{description:c("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:z(new mC),hideCursorInOverviewRuler:z(new Ye(60,"hideCursorInOverviewRuler",!1,{description:c("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:z(new gC),inDiffEditor:z(new Ye(62,"inDiffEditor",!1)),letterSpacing:z(new cr(65,"letterSpacing",Fr.letterSpacing,o=>cr.clamp(o,-5,20),{description:c("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:z(new vC),lineDecorationsWidth:z(new SC),lineHeight:z(new xC),lineNumbers:z(new _C),lineNumbersMinChars:z(new kt(70,"lineNumbersMinChars",5,1,300)),linkedEditing:z(new Ye(71,"linkedEditing",!1,{description:c("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:z(new Ye(72,"links",!0,{description:c("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:z(new Vt(73,"matchBrackets","always",["always","near","never"],{description:c("matchBrackets","Highlight matching brackets.")})),minimap:z(new EC),mouseStyle:z(new Vt(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:z(new cr(76,"mouseWheelScrollSensitivity",1,o=>o===0?1:o,{markdownDescription:c("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:z(new Ye(77,"mouseWheelZoom",!1,{markdownDescription:Fe?c("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):c("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:z(new Ye(78,"multiCursorMergeOverlapping",!0,{description:c("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:z(new Su(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],yV,{markdownEnumDescriptions:[c("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),c("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:c({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:z(new Vt(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[c("multiCursorPaste.spread","Each cursor pastes a single line of the text."),c("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:c("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:z(new kt(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:c("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:z(new Vt(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[c("occurrencesHighlight.off","Does not highlight occurrences."),c("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),c("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:c("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:z(new Ye(83,"overviewRulerBorder",!0,{description:c("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:z(new kt(84,"overviewRulerLanes",3,0,3)),padding:z(new CC),pasteAs:z(new KC),parameterHints:z(new wC),peekWidgetDefaultFocus:z(new Vt(88,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[c("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),c("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:c("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:z(new kC),definitionLinkOpensInPeek:z(new Ye(90,"definitionLinkOpensInPeek",!1,{description:c("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:z(new DC),quickSuggestionsDelay:z(new kt(92,"quickSuggestionsDelay",10,0,1073741824,{description:c("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:z(new Ye(93,"readOnly",!1)),readOnlyMessage:z(new RC),renameOnType:z(new Ye(95,"renameOnType",!1,{description:c("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:c("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:z(new Ye(96,"renderControlCharacters",!0,{description:c("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:z(new Vt(97,"renderFinalNewline",Kt?"dimmed":"on",["off","on","dimmed"],{description:c("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:z(new Vt(98,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",c("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:c("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:z(new Ye(99,"renderLineHighlightOnlyWhenFocus",!1,{description:c("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:z(new Vt(100,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:z(new Vt(101,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",c("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),c("renderWhitespace.selection","Render whitespace characters only on selected text."),c("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:c("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:z(new kt(102,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:z(new Ye(103,"roundedSelection",!0,{description:c("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:z(new LC),scrollbar:z(new AC),scrollBeyondLastColumn:z(new kt(106,"scrollBeyondLastColumn",4,0,1073741824,{description:c("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:z(new Ye(107,"scrollBeyondLastLine",!0,{description:c("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:z(new Ye(108,"scrollPredominantAxis",!0,{description:c("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:z(new Ye(109,"selectionClipboard",!0,{description:c("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Kt})),selectionHighlight:z(new Ye(110,"selectionHighlight",!0,{description:c("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:z(new Ye(111,"selectOnLineNumbers",!0)),showFoldingControls:z(new Vt(112,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[c("showFoldingControls.always","Always show the folding controls."),c("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),c("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:c("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:z(new Ye(113,"showUnused",!0,{description:c("showUnused","Controls fading out of unused code.")})),showDeprecated:z(new Ye(142,"showDeprecated",!0,{description:c("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:z(new IC),snippetSuggestions:z(new Vt(114,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[c("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),c("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),c("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),c("snippetSuggestions.none","Do not show snippet suggestions.")],description:c("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:z(new VC),smoothScrolling:z(new Ye(116,"smoothScrolling",!1,{description:c("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:z(new kt(119,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:z(new BC),inlineSuggest:z(new PC),inlineEdit:z(new MC),inlineCompletionsAccessibilityVerbose:z(new Ye(151,"inlineCompletionsAccessibilityVerbose",!1,{description:c("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:z(new kt(121,"suggestFontSize",0,0,1e3,{markdownDescription:c("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:z(new kt(122,"suggestLineHeight",0,0,1e3,{markdownDescription:c("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:z(new Ye(123,"suggestOnTriggerCharacters",!0,{description:c("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:z(new Vt(124,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[c("suggestSelection.first","Always select the first suggestion."),c("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),c("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:c("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:z(new Vt(125,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[c("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),c("tabCompletion.off","Disable tab completions."),c("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:c("tabCompletion","Enables tab completions.")})),tabIndex:z(new kt(126,"tabIndex",0,-1,1073741824)),unicodeHighlight:z(new OC),unusualLineTerminators:z(new Vt(128,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[c("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),c("unusualLineTerminators.off","Unusual line terminators are ignored."),c("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:c("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:z(new Ye(129,"useShadowDOM",!0)),useTabStops:z(new Ye(130,"useTabStops",!0,{description:c("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:z(new Vt(131,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[c("wordBreak.normal","Use the default line break rule."),c("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:c("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:z(new WC),wordSeparators:z(new xi(133,"wordSeparators",ZE,{description:c("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:z(new Vt(134,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[c("wordWrap.off","Lines will never wrap."),c("wordWrap.on","Lines will wrap at the viewport width."),c({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),c({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:c({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:z(new xi(135,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:z(new xi(136,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:z(new kt(137,"wordWrapColumn",80,1,1073741824,{markdownDescription:c({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:z(new Vt(138,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:z(new Vt(139,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:z(new lC),defaultColorDecorators:z(new Ye(149,"defaultColorDecorators",!1,{markdownDescription:c("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:z(new TC),tabFocusMode:z(new Ye(146,"tabFocusMode",!1,{markdownDescription:c("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:z(new fC),wrappingInfo:z(new zC),wrappingIndent:z(new UC),wrappingStrategy:z(new bC)};var te=class o{lineNumber;column;constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new o(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return o.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return o.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return o.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){let r=e.column|0,s=t.column|0;return r-s}return n-i}clone(){return new o(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new o(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var P=class o{startLineNumber;startColumn;endLineNumber;endColumn;constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return o.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return o.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return o.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return o.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return o.plusRange(this,e)}static plusRange(e,t){let n,i,r,s;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,s=e.endColumn),new o(n,i,r,s)}intersectRanges(e){return o.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,r=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,l=t.startColumn,d=t.endLineNumber,u=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),r>d?(r=d,s=u):r===d&&(s=Math.min(s,u)),n>r||n===r&&i>s?null:new o(n,i,r,s)}equalsRange(e){return o.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return o.getEndPosition(this)}static getEndPosition(e){return new te(e.endLineNumber,e.endColumn)}getStartPosition(){return o.getStartPosition(this)}static getStartPosition(e){return new te(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new o(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new o(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return o.collapseToStart(this)}static collapseToStart(e){return new o(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return o.collapseToEnd(this)}static collapseToEnd(e){return new o(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new o(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new o(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new o(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){let r=e.startLineNumber|0,s=t.startLineNumber|0;if(r===s){let a=e.startColumn|0,l=t.startColumn|0;if(a===l){let d=e.endLineNumber|0,u=t.endLineNumber|0;if(d===u){let p=e.endColumn|0,h=t.endColumn|0;return p-h}return d-u}return a-l}return r-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var Je=class o extends P{selectionStartLineNumber;selectionStartColumn;positionLineNumber;positionColumn;constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return o.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new o(this.startLineNumber,this.startColumn,e,t):new o(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new te(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new te(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new o(e,t,this.endLineNumber,this.endColumn):new o(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new o(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new o(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new o(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new o(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,r){return r===0?new o(e,t,n,i):new o(n,i,e,t)}};var Ei=class{static insert(e,t){return{range:new P(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}};function vm(o,e){return new GC(o,e)}var GC=class{constructor(e,t){this.reducer=e;this.options=t}state={flowing:!1,ended:!1,destroyed:!1};buffer={data:[],error:[]};listeners={data:[],error:[],end:[]};pendingWritePromises=[];pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(t=>this.pendingWritePromises.push(t))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(typeof e<"u"&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){this.listeners.error.length===0?bt(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors();break}}removeListener(e,t){if(this.state.destroyed)return;let n;switch(e){case"data":n=this.listeners.data;break;case"end":n=this.listeners.end;break;case"error":n=this.listeners.error;break}if(n){let i=n.indexOf(t);i>=0&&n.splice(i,1)}}flowData(){if(this.buffer.data.length>0){let e=this.reducer(this.buffer.data);this.emitData(e),this.buffer.data.length=0;let t=[...this.pendingWritePromises];this.pendingWritePromises.length=0,t.forEach(n=>n())}}flowErrors(){if(this.listeners.error.length>0){for(let e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}};function qC(o,e,t){o.on("error",n=>{t?.isCancellationRequested||e.onError(n)}),o.on("end",()=>{t?.isCancellationRequested||e.onEnd()}),o.on("data",n=>{t?.isCancellationRequested||e.onData(n)})}function KL(o,e){let t=vm(e);return t.end(o),t}function GL(o){let e=!1;return{read:()=>e?null:(e=!0,o)}}var Xb=typeof Buffer<"u",CV=new Jn(()=>new Uint8Array(256)),$C,jC,Jt=class o{static alloc(e){return Xb?new o(Buffer.allocUnsafe(e)):new o(new Uint8Array(e))}static wrap(e){return Xb&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new o(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&Xb?new o(Buffer.from(e)):($C||($C=new TextEncoder),new o($C.encode(e)))}static fromByteArray(e){let t=o.alloc(e.length);for(let n=0,i=e.length;n<i;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].byteLength}let n=o.alloc(t),i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];n.set(a,i),i+=a.byteLength}return n}buffer;byteLength;constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let e=o.alloc(this.byteLength);return e.set(this),e}toString(){return Xb?this.buffer.toString():(jC||(jC=new TextDecoder),jC.decode(this.buffer))}slice(e,t){return new o(this.buffer.subarray(e,t))}set(e,t){if(e instanceof o)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return Hn(this.buffer,e)}writeUInt32BE(e,t){Kn(this.buffer,e,t)}readUInt32LE(e){return TV(this.buffer,e)}writeUInt32LE(e,t){kV(this.buffer,e,t)}readUInt8(e){return Zb(this.buffer,e)}writeUInt8(e,t){Jb(this.buffer,e,t)}indexOf(e,t=0){return wV(this.buffer,e instanceof o?e.buffer:e,t)}};function wV(o,e,t=0){let n=e.byteLength,i=o.byteLength;if(n===0)return 0;if(n===1)return o.indexOf(e[0]);if(n>i-t)return-1;let r=CV.value;r.fill(e.length);for(let d=0;d<e.length;d++)r[e[d]]=e.length-d-1;let s=t+e.length-1,a=s,l=-1;for(;s<i;)if(o[s]===e[a]){if(a===0){l=s;break}s--,a--}else s+=Math.max(e.length-a,r[o[s]]),a=e.length-1;return l}function qL(o,e){return o[e+0]<<0>>>0|o[e+1]<<8>>>0}function $L(o,e,t){o[t+0]=e&255,e=e>>>8,o[t+1]=e&255}function Hn(o,e){return o[e]*2**24+o[e+1]*2**16+o[e+2]*2**8+o[e+3]}function Kn(o,e,t){o[t+3]=e,e=e>>>8,o[t+2]=e,e=e>>>8,o[t+1]=e,e=e>>>8,o[t]=e}function TV(o,e){return o[e+0]<<0>>>0|o[e+1]<<8>>>0|o[e+2]<<16>>>0|o[e+3]<<24>>>0}function kV(o,e,t){o[t+0]=e&255,e=e>>>8,o[t+1]=e&255,e=e>>>8,o[t+2]=e&255,e=e>>>8,o[t+3]=e&255}function Zb(o,e){return o[e]}function Jb(o,e,t){o[t]=e}function jL(o){return GL(o)}function YL(o){return KL(o,e=>Jt.concat(e))}var QC;function QL(){return QC||(QC=new TextDecoder("UTF-16LE")),QC}var XC;function DV(){return XC||(XC=new TextDecoder("UTF-16BE")),XC}var ZC;function XL(){return ZC||(ZC=f_()?QL():DV()),ZC}function ZL(o,e,t){let n=new Uint16Array(o.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?_V(o,e,t):QL().decode(n)}function _V(o,e,t){let n=[],i=0;for(let r=0;r<t;r++){let s=qL(o,e);e+=2,n[i++]=String.fromCharCode(s)}return n.join("")}function ev(o){return o.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var Do=class o{constructor(e,t,n,i){this.oldPosition=e;this.oldText=t;this.newPosition=n;this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${ev(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${ev(this.oldText)}")`:`(replace@${this.oldPosition} "${ev(this.oldText)}" with "${ev(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){let i=t.length;Kn(e,i,n),n+=4;for(let r=0;r<i;r++)$L(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){let n=Hn(e,t);return t+=4,ZL(e,t,n)}writeSize(){return 8+o._writeStringSize(this.oldText)+o._writeStringSize(this.newText)}write(e,t){return Kn(e,this.oldPosition,t),t+=4,Kn(e,this.newPosition,t),t+=4,t=o._writeString(e,this.oldText,t),t=o._writeString(e,this.newText,t),t}static read(e,t,n){let i=Hn(e,t);t+=4;let r=Hn(e,t);t+=4;let s=o._readString(e,t);t+=o._writeStringSize(s);let a=o._readString(e,t);return t+=o._writeStringSize(a),n.push(new o(i,s,r,a)),t}};function JL(o,e){return o===null||o.length===0?e:new JC(o,e).compress()}var JC=class o{_prevEdits;_currEdits;_result;_resultLen;_prevLen;_prevDeltaOffset;_currLen;_currDeltaOffset;constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){let[d,u]=o._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(d),i=u;continue}if(n.newPosition<i.oldPosition){let[d,u]=o._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(d),n=u;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){let[d,u]=o._splitPrev(n,i.oldLength);a=d,l=i,n=u,i=this._getCurr(++t)}else{let[d,u]=o._splitCurr(i,n.newLength);a=n,l=d,n=this._getPrev(++e),i=u}this._result[this._resultLen++]=new Do(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}let r=o._merge(this._result);return o._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=o._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=o._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Do(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Do(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let n=e.newText.substr(0,t),i=e.newText.substr(t);return[new Do(e.oldPosition,e.oldText,e.newPosition,n),new Do(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){let n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new Do(e.oldPosition,n,e.newPosition,e.newText),new Do(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,i=e[0];for(let r=1;r<e.length;r++){let s=e[r];i.oldEnd===s.oldPosition?i=new Do(i.oldPosition,i.oldText+s.oldText,i.newPosition,i.newText+s.newText):(t[n++]=i,i=s)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let i=0;i<e.length;i++){let r=e[i];r.oldText!==r.newText&&(t[n++]=r)}return t}};var tv=class o{_asciiMap;_map;_defaultValue;constructor(e){let t=Xx(e);this._defaultValue=t,this._asciiMap=o._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let n=Xx(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}};var ew=class extends tv{intlSegmenterLocales;_segmenter=null;_cachedLine=null;_cachedSegments=[];constructor(e,t){super(0),this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,i=e.length;n<i;n++)this.set(e.charCodeAt(n),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(let i of this._getIntlSegmenterWordsOnLine(e)){if(i.index>t)break;n=i}return n}findNextIntlWordAtOrAfterOffset(e,t){for(let n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){let t=[];for(let n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}},eR=new or(10);function zd(o,e){let t=`${o}/${e.join(",")}`,n=eR.get(t);return n||(n=new ew(o,e),eR.set(t,n)),n}function Cl(o,e){let t=Math.pow(10,e);return Math.round(o*t)/t}var Ge=class{_rgbaBrand=void 0;r;g;b;a;constructor(e,t,n,i=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Cl(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},El=class o{_hslaBrand=void 0;h;s;l;a;constructor(e,t,n,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Cl(Math.max(Math.min(1,t),0),3),this.l=Cl(Math.max(Math.min(1,n),0),3),this.a=Cl(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,i=e.b/255,r=e.a,s=Math.max(t,n,i),a=Math.min(t,n,i),l=0,d=0,u=(a+s)/2,p=s-a;if(p>0){switch(d=Math.min(u<=.5?p/(2*u):p/(2-2*u),1),s){case t:l=(n-i)/p+(n<i?6:0);break;case n:l=(i-t)/p+2;break;case i:l=(t-n)/p+4;break}l*=60,l=Math.round(l)}return new o(l,d,u,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){let t=e.h/360,{s:n,l:i,a:r}=e,s,a,l;if(n===0)s=a=l=i;else{let d=i<.5?i*(1+n):i+n-i*n,u=2*i-d;s=o._hue2rgb(u,d,t+1/3),a=o._hue2rgb(u,d,t),l=o._hue2rgb(u,d,t-1/3)}return new Ge(Math.round(s*255),Math.round(a*255),Math.round(l*255),r)}},wu=class o{_hsvaBrand=void 0;h;s;v;a;constructor(e,t,n,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Cl(Math.max(Math.min(1,t),0),3),this.v=Cl(Math.max(Math.min(1,n),0),3),this.a=Cl(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),a=r-s,l=r===0?0:a/r,d;return a===0?d=0:r===t?d=((n-i)/a%6+6)%6:r===n?d=(i-t)/a+2:d=(t-n)/a+4,new o(Math.round(d*60),l,r,e.a)}static toRGBA(e){let{h:t,s:n,v:i,a:r}=e,s=i*n,a=s*(1-Math.abs(t/60%2-1)),l=i-s,[d,u,p]=[0,0,0];return t<60?(d=s,u=a):t<120?(d=a,u=s):t<180?(u=s,p=a):t<240?(u=a,p=s):t<300?(d=a,p=s):t<=360&&(d=s,p=a),d=Math.round((d+l)*255),u=Math.round((u+l)*255),p=Math.round((p+l)*255),new Ge(d,u,p,r)}},A=class o{static fromHex(e){return o.Format.CSS.parseHex(e)||o.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}rgba;_hsla;get hsla(){return this._hsla?this._hsla:El.fromRGBA(this.rgba)}_hsva;get hsva(){return this._hsva?this._hsva:wu.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Ge)this.rgba=e;else if(e instanceof El)this._hsla=e,this.rgba=El.toRGBA(e);else if(e instanceof wu)this._hsva=e,this.rgba=wu.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Ge.equals(this.rgba,e.rgba)&&El.equals(this.hsla,e.hsla)&&wu.equals(this.hsva,e.hsva)}getRelativeLuminance(){let e=o._relativeLuminanceForComponent(this.rgba.r),t=o._relativeLuminanceForComponent(this.rgba.g),n=o._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return Cl(i,4)}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new o(new El(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new o(new El(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){let{r:t,g:n,b:i,a:r}=this.rgba;return new o(new Ge(t,n,i,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new o(new Ge(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){let t=e.rgba,n=this.rgba.a,i=t.a,r=n+i*(1-n);if(r<1e-6)return o.transparent;let s=this.rgba.r*n/r+t.r*i*(1-n)/r,a=this.rgba.g*n/r+t.g*i*(1-n)/r,l=this.rgba.b*n/r+t.b*i*(1-n)/r;return new o(new Ge(s,a,l,r))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;let{r:t,g:n,b:i,a:r}=this.rgba;return new o(new Ge(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-n),e.rgba.b-r*(e.rgba.b-i),1))}flatten(...e){let t=e.reduceRight((n,i)=>o._flatten(i,n));return o._flatten(this,t)}static _flatten(e,t){let n=1-e.rgba.a;return new o(new Ge(n*t.rgba.r+e.rgba.a*e.rgba.r,n*t.rgba.g+e.rgba.a*e.rgba.g,n*t.rgba.b+e.rgba.a*e.rgba.b))}_toString;toString(){return this._toString||(this._toString=o.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;let i=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-i)/r,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;let i=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(i-r)/i,e.darken(n)}static white=new o(new Ge(255,255,255,1));static black=new o(new Ge(0,0,0,1));static red=new o(new Ge(255,0,0,1));static blue=new o(new Ge(0,0,255,1));static green=new o(new Ge(0,255,0,1));static cyan=new o(new Ge(0,255,255,1));static lightgrey=new o(new Ge(211,211,211,1));static transparent=new o(new Ge(0,0,0,0))};(e=>{let o;(n=>{let t;(g=>{function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:e.Format.CSS.formatRGBA(f)}g.formatRGB=i;function r(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}g.formatRGBA=r;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:e.Format.CSS.formatHSLA(f)}g.formatHSL=s;function a(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}g.formatHSLA=a;function l(f){let y=f.toString(16);return y.length!==2?"0"+y:y}function d(f){return`#${l(f.rgba.r)}${l(f.rgba.g)}${l(f.rgba.b)}`}g.formatHex=d;function u(f,y=!1){return y&&f.rgba.a===1?e.Format.CSS.formatHex(f):`#${l(f.rgba.r)}${l(f.rgba.g)}${l(f.rgba.b)}${l(Math.round(f.rgba.a*255))}`}g.formatHexA=u;function p(f){return f.isOpaque()?e.Format.CSS.formatHex(f):e.Format.CSS.formatRGBA(f)}g.format=p;function h(f){let y=f.length;if(y===0||f.charCodeAt(0)!==35)return null;if(y===7){let C=16*m(f.charCodeAt(1))+m(f.charCodeAt(2)),w=16*m(f.charCodeAt(3))+m(f.charCodeAt(4)),R=16*m(f.charCodeAt(5))+m(f.charCodeAt(6));return new e(new Ge(C,w,R,1))}if(y===9){let C=16*m(f.charCodeAt(1))+m(f.charCodeAt(2)),w=16*m(f.charCodeAt(3))+m(f.charCodeAt(4)),R=16*m(f.charCodeAt(5))+m(f.charCodeAt(6)),_=16*m(f.charCodeAt(7))+m(f.charCodeAt(8));return new e(new Ge(C,w,R,_/255))}if(y===4){let C=m(f.charCodeAt(1)),w=m(f.charCodeAt(2)),R=m(f.charCodeAt(3));return new e(new Ge(16*C+C,16*w+w,16*R+R))}if(y===5){let C=m(f.charCodeAt(1)),w=m(f.charCodeAt(2)),R=m(f.charCodeAt(3)),_=m(f.charCodeAt(4));return new e(new Ge(16*C+C,16*w+w,16*R+R,(16*_+_)/255))}return null}g.parseHex=h;function m(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(t=n.CSS||={})})(o=e.Format||={})})(A||={});var wl=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let o;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?o=crypto.getRandomValues.bind(crypto):o=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){o(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,r="";return r+=t[e[i++]],r+=t[e[i++]],r+=t[e[i++]],r+=t[e[i++]],r+="-",r+=t[e[i++]],r+=t[e[i++]],r+="-",r+=t[e[i++]],r+=t[e[i++]],r+="-",r+=t[e[i++]],r+=t[e[i++]],r+="-",r+=t[e[i++]],r+=t[e[i++]],r+=t[e[i++]],r+=t[e[i++]],r+=t[e[i++]],r+=t[e[i++]],r}}();var nv=Object.freeze({create:o=>ra(o.map(e=>e.toString())).join(`\r
`),split:o=>o.split(`\r
`),parse:o=>nv.split(o).filter(e=>!e.startsWith("#"))});var tR=class o{constructor(e){this.value=e}static sep=".";static None=new o("@@none@@");static Empty=new o("");equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+o.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new o((this.value?[this.value,...e]:e).join(o.sep))}};var _o=class{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){let n=this.getForeground(e),i=this.getFontStyle(e),r=`color: ${t[n]};`;i&1&&(r+="font-style: italic;"),i&2&&(r+="font-weight: bold;");let s="";return i&4&&(s+=" underline"),i&8&&(s+=" line-through"),s&&(r+=`text-decoration:${s};`),r}static getPresentationFromMetadata(e){let t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}};var iv="**",nR="/",ov="[/\\\\]",rv="[^/\\\\]",RV=/\//g;function iR(o,e){switch(o){case 0:return"";case 1:return`${rv}*?`;default:return`(?:${ov}|${rv}+${ov}${e?`|${ov}${rv}+`:""})*?`}}function oR(o,e){if(!o)return[];let t=[],n=!1,i=!1,r="";for(let s of o){switch(s){case e:if(!n&&!i){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}r+=s}return r&&t.push(r),t}function dR(o){if(!o)return"";let e="",t=oR(o,nR);if(t.every(n=>n===iv))e=".*";else{let n=!1;t.forEach((i,r)=>{if(i===iv){if(n)return;e+=iR(2,r===t.length-1)}else{let s=!1,a="",l=!1,d="";for(let u of i){if(u!=="}"&&s){a+=u;continue}if(l&&(u!=="]"||!d)){let p;u==="-"?p=u:(u==="^"||u==="!")&&!d?p="^":u===nR?p="":p=lo(u),d+=p;continue}switch(u){case"{":s=!0;continue;case"[":l=!0;continue;case"}":{let h=`(?:${oR(a,",").map(m=>dR(m)).join("|")})`;e+=h,s=!1,a="";break}case"]":{e+="["+d+"]",l=!1,d="";break}case"?":e+=rv;continue;case"*":e+=iR(1);continue;default:e+=lo(u)}}r<t.length-1&&(t[r+1]!==iv||r+2<t.length)&&(e+=ov)}n=i===iv})}return e}var AV=/^\*\*\/\*\.[\w\.-]+$/,OV=/^\*\*\/([\w\.-]+)\/?$/,PV=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,MV=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,NV=/^\*\*((\/[\w\.-]+)+)\/?$/,FV=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,rR=new or(1e4),sR=function(){return!1},Ts=function(){return null};function nw(o,e){if(!o)return Ts;let t;typeof o!="string"?t=o.pattern:t=o,t=t.trim();let n=`${t}_${!!e.trimForExclusions}`,i=rR.get(n);if(i)return aR(i,o);let r;return AV.test(t)?i=BV(t.substr(4),t):(r=OV.exec(tw(t,e)))?i=VV(r[1],t):(e.trimForExclusions?MV:PV).test(t)?i=WV(t,e):(r=NV.exec(tw(t,e)))?i=lR(r[1].substr(1),t,!0):(r=FV.exec(tw(t,e)))?i=lR(r[1],t,!1):i=UV(t),rR.set(n,i),aR(i,o)}function aR(o,e){if(typeof e=="string")return o;let t=function(n,i){return Nh(n,e.base,!Kt)?o(Zf(n.substr(e.base.length),ao),i):null};return t.allBasenames=o.allBasenames,t.allPaths=o.allPaths,t.basenames=o.basenames,t.patterns=o.patterns,t}function tw(o,e){return e.trimForExclusions&&o.endsWith("/**")?o.substr(0,o.length-2):o}function BV(o,e){return function(t,n){return typeof t=="string"&&t.endsWith(o)?e:null}}function VV(o,e){let t=`/${o}`,n=`\\${o}`,i=function(s,a){return typeof s!="string"?null:a?a===o?e:null:s===o||s.endsWith(t)||s.endsWith(n)?e:null},r=[o];return i.basenames=r,i.patterns=[e],i.allBasenames=r,i}function WV(o,e){let t=cR(o.slice(1,-1).split(",").map(a=>nw(a,e)).filter(a=>a!==Ts),o),n=t.length;if(!n)return Ts;if(n===1)return t[0];let i=function(a,l){for(let d=0,u=t.length;d<u;d++)if(t[d](a,l))return o;return null},r=t.find(a=>!!a.allBasenames);r&&(i.allBasenames=r.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function lR(o,e,t){let n=ao===rt.sep,i=n?o:o.replace(RV,ao),r=ao+i,s=rt.sep+o,a;return t?a=function(l,d){return typeof l=="string"&&(l===i||l.endsWith(r)||!n&&(l===o||l.endsWith(s)))?e:null}:a=function(l,d){return typeof l=="string"&&(l===i||!n&&l===o)?e:null},a.allPaths=[(t?"*/":"./")+o],a}function UV(o){try{let e=new RegExp(`^${dR(o)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?o:null}}catch{return Ts}}function ym(o,e={}){if(!o)return sR;if(typeof o=="string"||zV(o)){let t=nw(o,e);if(t===Ts)return sR;let n=function(i,r){return!!t(i,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return HV(o,e)}function zV(o){let e=o;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function HV(o,e){let t=cR(Object.getOwnPropertyNames(o).map(a=>KV(a,o[a],e)).filter(a=>a!==Ts)),n=t.length;if(!n)return Ts;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];let a=function(u,p){let h;for(let m=0,g=t.length;m<g;m++){let f=t[m](u,p);if(typeof f=="string")return f;lb(f)&&(h||(h=[]),h.push(f))}return h?(async()=>{for(let m of h){let g=await m;if(typeof g=="string")return g}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);let d=t.reduce((u,p)=>p.allPaths?u.concat(p.allPaths):u,[]);return d.length&&(a.allPaths=d),a}let i=function(a,l,d){let u,p;for(let h=0,m=t.length;h<m;h++){let g=t[h];g.requiresSiblings&&d&&(l||(l=rl(a)),u||(u=l.substr(0,l.length-vd(a).length)));let f=g(a,l,u,d);if(typeof f=="string")return f;lb(f)&&(p||(p=[]),p.push(f))}return p?(async()=>{for(let h of p){let m=await h;if(typeof m=="string")return m}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(i.allBasenames=r.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function KV(o,e,t){if(e===!1)return Ts;let n=nw(o,t);if(n===Ts)return Ts;if(typeof e=="boolean")return n;if(e){let i=e.when;if(typeof i=="string"){let r=(s,a,l,d)=>{if(!d||!n(s,a))return null;let u=i.replace("$(basename)",()=>l),p=d(u);return lb(p)?p.then(h=>h?o:null):p?o:null};return r.requiresSiblings=!0,r}}return n}function cR(o,e){let t=o.filter(a=>!!a.basenames);if(t.length<2)return o;let n=t.reduce((a,l)=>{let d=l.basenames;return d?a.concat(d):a},[]),i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{let d=l.patterns;return d?a.concat(d):a},[]);let r=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){let p=a.charCodeAt(u-1);if(p===47||p===92)break}l=a.substr(u)}let d=n.indexOf(l);return d!==-1?i[d]:null};r.basenames=n,r.patterns=i,r.allBasenames=n;let s=o.filter(a=>!a.basenames);return s.push(r),s}var Im=class{_tokenizationSupports=new Map;_factories=new Map;_onDidChange=new x;onDidChange=this._onDidChange.event;_colorMap;constructor(){this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),re(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();let n=new iw(this,e,t);return this._factories.set(e,n),re(()=>{let i=this._factories.get(e);!i||i!==n||(this._factories.delete(e),i.dispose())})}async getOrCreate(e){let t=this.get(e);if(t)return t;let n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;let n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},iw=class extends N{constructor(t,n,i){super();this._registry=t;this._languageId=n;this._factory=i}_isDisposed=!1;_resolvePromise=null;_isResolved=!1;get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){let t=await this._factory.tokenizationSupport;this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t))}};function mo(o){let e=0,t=0,n=0,i=0;for(let r=0,s=o.length;r<s;r++){let a=o.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<s&&o.charCodeAt(r+1)===10?(i|=2,r++):i|=3,n=r+1):a===10&&(i|=1,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=o.length),[e,t,o.length-n,i]}var Gt=class o{constructor(e,t){this.start=e;this.endExclusive=t;if(e>t)throw new ut(`Invalid range: ${this.toString()}`)}static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let i=n;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(n===i)t.splice(n,0,e);else{let r=Math.min(e.start,t[n].start),s=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(n,i-n,new o(r,s))}}static tryCreate(e,t){if(!(e>t))return new o(e,t)}static ofLength(e){return new o(0,e)}static ofStartAndLength(e,t){return new o(e,e+t)}static emptyAt(e){return new o(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new o(this.start+e,this.endExclusive+e)}deltaStart(e){return new o(this.start+e,this.endExclusive)}deltaEnd(e){return new o(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new o(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new o(t,n)}intersectionLength(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-t)}intersects(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}intersectsOrTouches(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new ut(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new ut(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let t=[];for(let n=this.start;n<this.endExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}};var rw=class o{constructor(e){this._tokenInfo=e}static create(e){return new o(e)}forEach(e){let t=0;for(let n of this._tokenInfo){let i=new Gt(t,t+n.length);e(i,n),t+=n.length}}slice(e){let t=[],n=0;for(let i of this._tokenInfo){let r=n,s=r+i.length;if(s>e.start){if(r>=e.endExclusive)break;let a=Math.max(0,e.start-r),l=Math.max(0,s-e.endExclusive);t.push(new sv(i.length-a-l,i.metadata))}n+=i.length}return o.create(t)}},sv=class{constructor(e,t){this.length=e;this.metadata=t}},av=class{_tokens=[];add(e,t){this._tokens.push(new sv(e,t))}build(){return rw.create(this._tokens)}};var Pn=class o{static createEmpty(e,t){let n=o.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new o(i,e,t)}static createFromTextAndMetadata(e,t){let n=0,i="",r=new Array;for(let{text:s,metadata:a}of e)r.push(n+s.length,a),n+=s.length,i+=s;return new o(new Uint32Array(r),i,t)}static convertToEndOffset(e,t){let i=(e.length>>>1)-1;for(let r=0;r<i;r++)e[r<<1]=e[r+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){let r=n+Math.floor((i-n)/2),s=e[r<<1];if(s===t)return r+1;s<t?n=r+1:s>t&&(i=r)}return n}_lineTokensBrand=void 0;_tokens;_tokensCount;_text;languageIdCodec;static defaultTokenMetadata=(32768|2<<24)>>>0;constructor(e,t,n){this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof o?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let i=t<<1,r=i+(n<<1);for(let s=i;s<r;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],n=_o.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return _o.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return _o.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return _o.getClassNameFromMetadata(t)}getInlineStyle(e,t){let n=this._tokens[(e<<1)+1];return _o.getInlineStyleFromMetadata(n,t)}getPresentation(e){let t=this._tokens[(e<<1)+1];return _o.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return o.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new sw(this,e,t,n)}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="",r=new Array,s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(s,a);let d=this._tokens[(t<<1)+1];r.push(i.length,d),t++,s=a}else if(l){if(l.offset>s){i+=this._text.substring(s,l.offset);let d=this._tokens[(t<<1)+1];r.push(i.length,d),s=l.offset}i+=l.text,r.push(i.length,l.tokenMetadata),n++}else break}return new o(new Uint32Array(r),i,this.languageIdCodec)}getTokensInRange(e){let t=new av,n=this.findTokenIndexAtOffset(e.start),i=this.findTokenIndexAtOffset(e.endExclusive);for(let r=n;r<=i;r++){let a=new Gt(this.getStartOffset(r),this.getEndOffset(r)).intersectionLength(e);a>0&&t.add(a,this.getMetadata(r))}return t.build()}getTokenText(e){let t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){let t=this.getCount();for(let n=0;n<t;n++)e(n)}},sw=class o{_source;_startOffset;_endOffset;_deltaOffset;_firstTokenIndex;_tokensCount;languageIdCodec;constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,s=e.getCount();r<s&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof o?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){let t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),i=this._source.getEndOffset(t),r=this._source.getTokenText(t);return n<this._startOffset&&(r=r.substring(this._startOffset-n)),i>this._endOffset&&(r=r.substring(0,r.length-(i-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}};function pR(o,e){let t=e.lineNumber;if(!o.tokenization.isCheapToTokenize(t))return;o.tokenization.forceTokenization(t);let n=o.tokenization.getLineTokens(t),i=n.findTokenIndexAtOffset(e.column-1);return n.getStandardTokenType(i)}var ks=new Uint32Array(0).buffer,Gn=class o{static deleteBeginning(e,t){return e===null||e===ks?e:o.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===ks)return e;let n=Ds(e),i=n[n.length-2];return o.delete(e,t,i)}static delete(e,t,n){if(e===null||e===ks||t===n)return e;let i=Ds(e),r=i.length>>>1;if(t===0&&i[i.length-2]===n)return ks;let s=Pn.findIndexInTokensArray(i,t),a=s>0?i[s-1<<1]:0,l=i[s<<1];if(n<l){let m=n-t;for(let g=s;g<r;g++)i[g<<1]-=m;return e}let d,u;a!==t?(i[s<<1]=t,d=s+1<<1,u=t):(d=s<<1,u=a);let p=n-t;for(let m=s+1;m<r;m++){let g=i[m<<1]-p;g>u&&(i[d++]=g,i[d++]=i[(m<<1)+1],u=g)}if(d===i.length)return e;let h=new Uint32Array(d);return h.set(i.subarray(0,d),0),h.buffer}static append(e,t){if(t===ks)return e;if(e===ks)return t;if(e===null)return e;if(t===null)return null;let n=Ds(e),i=Ds(t),r=i.length>>>1,s=new Uint32Array(n.length+i.length);s.set(n,0);let a=n.length,l=n[n.length-2];for(let d=0;d<r;d++)s[a++]=i[d<<1]+l,s[a++]=i[(d<<1)+1];return s.buffer}static insert(e,t,n){if(e===null||e===ks)return e;let i=Ds(e),r=i.length>>>1,s=Pn.findIndexInTokensArray(i,t);s>0&&i[s-1<<1]===t&&s--;for(let a=s;a<r;a++)i[a<<1]+=n;return e}};function Ds(o){return o instanceof Uint32Array?o:new Uint32Array(o)}var Oi=class o{static fromRange(e){return new o(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new o(e.startLineNumber,e.endLineNumber+1)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new o(e.startLineNumber,t.startLineNumber),new o(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new o(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new o(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=new lv(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new lv(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new ut("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)t=Math.min(t,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new o(t,n)}static ofLength(e,t){return new o(e,e+t)}static deserialize(e){return new o(e[0],e[1])}startLineNumber;endLineNumberExclusive;constructor(e,t){if(e>t)throw new ut(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new o(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new o(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new o(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new o(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new P(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new P(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Gt(this.startLineNumber-1,this.endLineNumberExclusive-1)}},lv=class o{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let t=vf(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=dh(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){let i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{let i=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,i)}}contains(e){let t=gx(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=gx(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let t=[],n=0,i=0,r=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[n],l=e._normalizedRanges[i];a.startLineNumber<l.startLineNumber?(s=a,n++):(s=l,i++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[i],i++);r===null?r=s:r.endLineNumberExclusive>=s.startLineNumber?r=new Oi(r.startLineNumber,Math.max(r.endLineNumberExclusive,s.endLineNumberExclusive)):(t.push(r),r=s)}return r!==null&&t.push(r),new o(t)}subtractFrom(e){let t=vf(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=dh(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new o([e]);let i=[],r=e.startLineNumber;for(let s=t;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>r&&i.push(new Oi(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&i.push(new Oi(r,e.endLineNumberExclusive)),new o(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let t=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let r=this._normalizedRanges[n],s=e._normalizedRanges[i],a=r.intersect(s);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<s.endLineNumberExclusive?n++:i++}return new o(t)}getWithDelta(e){return new o(this._normalizedRanges.map(t=>t.delta(e)))}};var Sm=class o{static deserialize(e,t,n){let i=new Uint32Array(e.buffer),r=Hn(e,t);t+=4;let s=Hn(e,t);t+=4;let a=[];for(let l=0;l<s;l++){let d=Hn(e,t);t+=4,a.push(i.subarray(t/4,t/4+d/4)),t+=d}return n.push(new o(r,a)),t}_startLineNumber;_tokens;get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new Oi(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){let n=this._tokens[t];if(!(n instanceof Uint32Array))throw new Error("Not supported!");e+=4,e+=n.byteLength}return e}serialize(e,t){Kn(e,this._startLineNumber,t),t+=4,Kn(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++){let i=this._tokens[n];if(!(i instanceof Uint32Array))throw new Error("Not supported!");Kn(e,i.byteLength,t),t+=4,e.set(new Uint8Array(i.buffer),t),t+=i.byteLength}return t}applyEdit(e,t){let[n,i]=mo(t);this._acceptDeleteRange(e),this._acceptInsertText(new te(e.startLineNumber,e.startColumn),n,i)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let i=n-t;this._startLineNumber-=i;return}if(!(t>=this._tokens.length)){if(t<0&&n>=this._tokens.length){this._startLineNumber=0,this._tokens=[];return}if(t===n){this._tokens[t]=Gn.delete(this._tokens[t],e.startColumn-1,e.endColumn-1);return}if(t>=0)if(this._tokens[t]=Gn.deleteEnding(this._tokens[t],e.startColumn-1),n<this._tokens.length){let i=Gn.deleteBeginning(this._tokens[n],e.endColumn-1);this._tokens[t]=Gn.append(this._tokens[t],i),this._tokens.splice(t+1,n-t)}else this._tokens[t]=Gn.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{let i=-t;this._startLineNumber-=i,this._tokens[n]=Gn.deleteBeginning(this._tokens[n],e.endColumn-1),this._tokens=this._tokens.slice(n)}}}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let i=e.lineNumber-this._startLineNumber;if(i<0){this._startLineNumber+=t;return}if(!(i>=this._tokens.length)){if(t===0){this._tokens[i]=Gn.insert(this._tokens[i],e.column-1,n);return}this._tokens[i]=Gn.deleteEnding(this._tokens[i],e.column-1),this._tokens[i]=Gn.insert(this._tokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._tokens=Ja(this._tokens,e,n)}};var dv=(i=>(i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error",i))(dv||{});(a=>{let o="error",e="warning",t="warn",n="info",i="ignore";function r(l){return l?Ho(o,l)?3:Ho(e,l)||Ho(t,l)?2:Ho(n,l)?1:0:0}a.fromValue=r;function s(l){switch(l){case 3:return o;case 2:return e;case 1:return n;default:return i}}a.toString=s})(dv||={});var In=dv;var Et=Object.freeze({View:ue("view","View"),Help:ue("help","Help"),Test:ue("test","Test"),File:ue("file","File"),Preferences:ue("preferences","Preferences"),Developer:ue({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});var Ci=H("commandService"),go=new class{_commands=new Map;_onDidRegisterCommand=new x;onDidRegisterCommand=this._onDidRegisterCommand.event;registerCommand(o,e){if(!o)throw new Error("invalid command");if(typeof o=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:o,handler:e})}if(o.metadata&&Array.isArray(o.metadata.args)){let s=[];for(let l of o.metadata.args)s.push(l.constraint);let a=o.handler;o.handler=function(l,...d){return g0(d,s),a(l,...d)}}let{id:t}=o,n=this._commands.get(t);n||(n=new bi,this._commands.set(t,n));let i=n.unshift(o),r=re(()=>{i(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(o,e){return go.registerCommand(o,(t,...n)=>t.get(Ci).executeCommand(e,...n))}getCommand(o){let e=this._commands.get(o);if(!(!e||e.isEmpty()))return wo.first(e)}getCommands(){let o=new Map;for(let e of this._commands.keys()){let t=this.getCommand(e);t&&o.set(e,t)}return o}};go.registerCommand("noop",()=>{});function hR(o){return o?o.condition!==void 0:!1}var mR=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var Qo=class{value;_lower;constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){let n=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return Ho(n,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},xm=class{_set=new Set;get size(){return this._set.size}constructor(e){if(e)for(let t of e)this.add(t)}add(e){this._set.add(Qo.toKey(e))}delete(e){return this._set.delete(Qo.toKey(e))}has(e){return this._set.has(Qo.toKey(e))}};var NY=H("IBuiltinExtensionsScannerService");var Hd=(i=>(i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error",i))(Hd||{});(r=>{function o(s,a){return a-s}r.compare=o;let e=Object.create(null);e[8]=c("sev.error","Error"),e[4]=c("sev.warning","Warning"),e[2]=c("sev.info","Info");function t(s){return e[s]||""}r.toString=t;function n(s){switch(s){case In.Error:return 8;case In.Warning:return 4;case In.Info:return 2;case In.Ignore:return 1}}r.fromSeverity=n;function i(s){switch(s){case 8:return In.Error;case 4:return In.Warning;case 2:return In.Info;case 1:return In.Ignore}}r.toSeverity=i})(Hd||={});var cv;(n=>{let o="";function e(i){return t(i,!0)}n.makeKey=e;function t(i,r){let s=[o];return i.source?s.push(i.source.replace("\xA6","\\\xA6")):s.push(o),i.code?typeof i.code=="string"?s.push(i.code.replace("\xA6","\\\xA6")):s.push(i.code.value.replace("\xA6","\\\xA6")):s.push(o),i.severity!==void 0&&i.severity!==null?s.push(Hd.toString(i.severity)):s.push(o),i.message&&r?s.push(i.message.replace("\xA6","\\\xA6")):s.push(o),i.startLineNumber!==void 0&&i.startLineNumber!==null?s.push(i.startLineNumber.toString()):s.push(o),i.startColumn!==void 0&&i.startColumn!==null?s.push(i.startColumn.toString()):s.push(o),i.endLineNumber!==void 0&&i.endLineNumber!==null?s.push(i.endLineNumber.toString()):s.push(o),i.endColumn!==void 0&&i.endColumn!==null?s.push(i.endColumn.toString()):s.push(o),s.push(o),s.join("\xA6")}n.makeKeyOptionalMessage=t})(cv||={});var uv=H("markerService");var pv=class{constructor(e,t){this.tokens=e;this.endState=t}_encodedTokenizationResultBrand=void 0};var jV;(i=>{let o=new Map;o.set(0,Q.symbolMethod),o.set(1,Q.symbolFunction),o.set(2,Q.symbolConstructor),o.set(3,Q.symbolField),o.set(4,Q.symbolVariable),o.set(5,Q.symbolClass),o.set(6,Q.symbolStruct),o.set(7,Q.symbolInterface),o.set(8,Q.symbolModule),o.set(9,Q.symbolProperty),o.set(10,Q.symbolEvent),o.set(11,Q.symbolOperator),o.set(12,Q.symbolUnit),o.set(13,Q.symbolValue),o.set(15,Q.symbolEnum),o.set(14,Q.symbolConstant),o.set(15,Q.symbolEnum),o.set(16,Q.symbolEnumMember),o.set(17,Q.symbolKeyword),o.set(27,Q.symbolSnippet),o.set(18,Q.symbolText),o.set(19,Q.symbolColor),o.set(20,Q.symbolFile),o.set(21,Q.symbolReference),o.set(22,Q.symbolCustomColor),o.set(23,Q.symbolFolder),o.set(24,Q.symbolTypeParameter),o.set(25,Q.account),o.set(26,Q.issues);function e(r){let s=o.get(r);return s||(console.info("No codicon found for CompletionItemKind "+r),s=Q.symbolProperty),s}i.toIcon=e;let t=new Map;t.set("method",0),t.set("function",1),t.set("constructor",2),t.set("field",3),t.set("variable",4),t.set("class",5),t.set("struct",6),t.set("interface",7),t.set("module",8),t.set("property",9),t.set("event",10),t.set("operator",11),t.set("unit",12),t.set("value",13),t.set("constant",14),t.set("enum",15),t.set("enum-member",16),t.set("enumMember",16),t.set("keyword",17),t.set("snippet",27),t.set("text",18),t.set("color",19),t.set("file",20),t.set("reference",21),t.set("customcolor",22),t.set("folder",23),t.set("type-parameter",24),t.set("typeParameter",24),t.set("account",25),t.set("issue",26);function n(r,s){let a=t.get(r);return typeof a>"u"&&!s&&(a=9),a}i.fromString=n})(jV||={});var MQ={17:c("Array","array"),16:c("Boolean","boolean"),4:c("Class","class"),13:c("Constant","constant"),8:c("Constructor","constructor"),9:c("Enum","enumeration"),21:c("EnumMember","enumeration member"),23:c("Event","event"),7:c("Field","field"),0:c("File","file"),11:c("Function","function"),10:c("Interface","interface"),19:c("Key","key"),5:c("Method","method"),1:c("Module","module"),2:c("Namespace","namespace"),20:c("Null","null"),15:c("Number","number"),18:c("Object","object"),24:c("Operator","operator"),3:c("Package","package"),6:c("Property","property"),14:c("String","string"),22:c("Struct","struct"),25:c("TypeParameter","type parameter"),12:c("Variable","variable")};var YV;(t=>{let o=new Map;o.set(0,Q.symbolFile),o.set(1,Q.symbolModule),o.set(2,Q.symbolNamespace),o.set(3,Q.symbolPackage),o.set(4,Q.symbolClass),o.set(5,Q.symbolMethod),o.set(6,Q.symbolProperty),o.set(7,Q.symbolField),o.set(8,Q.symbolConstructor),o.set(9,Q.symbolEnum),o.set(10,Q.symbolInterface),o.set(11,Q.symbolFunction),o.set(12,Q.symbolVariable),o.set(13,Q.symbolConstant),o.set(14,Q.symbolString),o.set(15,Q.symbolNumber),o.set(16,Q.symbolBoolean),o.set(17,Q.symbolArray),o.set(18,Q.symbolObject),o.set(19,Q.symbolKey),o.set(20,Q.symbolNull),o.set(21,Q.symbolEnumMember),o.set(22,Q.symbolStruct),o.set(23,Q.symbolEvent),o.set(24,Q.symbolOperator),o.set(25,Q.symbolTypeParameter);function e(n){let i=o.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=Q.symbolProperty),i}t.toIcon=e})(YV||={});var gR=class o{constructor(e){this.value=e}static Comment=new o("comment");static Imports=new o("imports");static Region=new o("region");static fromValue(e){switch(e){case"comment":return o.Comment;case"imports":return o.Imports;case"region":return o.Region}return new o(e)}};var QV;(e=>{function o(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}e.is=o})(QV||={});var lw=new Im,Em=new Im;var Pi=H("languageService");function ya(o,e){let t=o.getCount(),n=o.findTokenIndexAtOffset(e),i=o.getLanguageId(n),r=n;for(;r+1<t&&o.getLanguageId(r+1)===i;)r++;let s=n;for(;s>0&&o.getLanguageId(s-1)===i;)s--;return new dw(o,i,s,r+1,o.getStartOffset(s),o.getEndOffset(r))}var dw=class{_scopedLineTokensBrand=void 0;languageIdCodec;languageId;_actual;_firstTokenIndex;_lastTokenIndex;firstCharOffset;_lastCharOffset;constructor(e,t,n,i,r,s){this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=r,this._lastCharOffset=s,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}},fR=(e=>(e[e.value=3]="value",e))(fR||{});function pr(o){return(o&fR.value)!==0}var Tu=class{open;close;_inString;_inComment;_inRegEx;_neutralCharacter=null;_neutralCharacterSearched=!1;constructor(e){if(this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;let n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){let i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}},hv=class{autoClosingPairsOpenByStart;autoClosingPairsOpenByEnd;autoClosingPairsCloseByStart;autoClosingPairsCloseByEnd;autoClosingPairsCloseSingleChar;constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let t of e)Cm(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Cm(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Cm(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Cm(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Cm(this.autoClosingPairsCloseSingleChar,t.close,t)}};function Cm(o,e,t){o.has(e)?o.get(e).push(t):o.set(e,[t])}var cw=class o{_richEditBracketBrand=void 0;languageId;index;open;close;forwardRegex;reversedRegex;_openSet;_closeSet;constructor(e,t,n,i,r,s){this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=r,this.reversedRegex=s,this._openSet=o._toSet(this.open),this._closeSet=o._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let n of e)t.add(n);return t}};function XV(o){let e=o.length;o=o.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);let t=[];for(let s=0;s<e;s++)t[s]=s;let n=(s,a)=>{let[l,d]=s,[u,p]=a;return l===u||l===p||d===u||d===p},i=(s,a)=>{let l=Math.min(s,a),d=Math.max(s,a);for(let u=0;u<e;u++)t[u]===d&&(t[u]=l)};for(let s=0;s<e;s++){let a=o[s];for(let l=s+1;l<e;l++){let d=o[l];n(a,d)&&i(t[s],t[l])}}let r=[];for(let s=0;s<e;s++){let a=[],l=[];for(let d=0;d<e;d++)if(t[d]===s){let[u,p]=o[d];a.push(u),l.push(p)}a.length>0&&r.push({open:a,close:l})}return r}var mv=class{_richEditBracketsBrand=void 0;brackets;forwardRegex;reversedRegex;maxBracketLength;textIsBracket;textIsOpenBracket;constructor(e,t){let n=XV(t);this.brackets=n.map((i,r)=>new cw(e,r,i.open,i.close,ZV(i.open,i.close,n,r),JV(i.open,i.close,n,r))),this.forwardRegex=eW(this.brackets),this.reversedRegex=tW(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let i of this.brackets){for(let r of i.open)this.textIsBracket[r]=i,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(let r of i.close)this.textIsBracket[r]=i,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}};function bR(o,e,t,n){for(let i=0,r=e.length;i<r;i++){if(i===t)continue;let s=e[i];for(let a of s.open)a.indexOf(o)>=0&&n.push(a);for(let a of s.close)a.indexOf(o)>=0&&n.push(a)}}function vR(o,e){return o.length-e.length}function gv(o){if(o.length<=1)return o;let e=[],t=new Set;for(let n of o)t.has(n)||(e.push(n),t.add(n));return e}function ZV(o,e,t,n){let i=[];i=i.concat(o),i=i.concat(e);for(let r=0,s=i.length;r<s;r++)bR(i[r],t,n,i);return i=gv(i),i.sort(vR),i.reverse(),ku(i)}function JV(o,e,t,n){let i=[];i=i.concat(o),i=i.concat(e);for(let r=0,s=i.length;r<s;r++)bR(i[r],t,n,i);return i=gv(i),i.sort(vR),i.reverse(),ku(i.map(uw))}function eW(o){let e=[];for(let t of o){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=gv(e),ku(e)}function tW(o){let e=[];for(let t of o){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=gv(e),ku(e.map(uw))}function nW(o){let e=/^[\w ]+$/.test(o);return o=lo(o),e?`\\b${o}\\b`:o}function ku(o,e){let t=`(${o.map(nW).join(")|(")})`;return Jf(t,!0,e)}var uw=function(){function o(n){let i=new Uint16Array(n.length),r=0;for(let s=n.length-1;s>=0;s--)i[r++]=n.charCodeAt(s);return XL().decode(i)}let e=null,t=null;return function(i){return e!==i&&(e=i,t=o(e)),t}}(),Xi=class{static _findPrevBracketInText(e,t,n,i){let r=n.match(e);if(!r)return null;let s=n.length-(r.index||0),a=r[0].length,l=i+s;return new P(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,r){let a=uw(n).substring(n.length-r,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){let r=n.match(e);if(!r)return null;let s=r.index||0,a=r[0].length;if(a===0)return null;let l=i+s;return new P(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,r){let s=n.substring(i,r);return this.findNextBracketInText(e,t,s,i)}};var fv=class{constructor(e,t){this.languageId=e;let n=t.brackets?yR(t.brackets):[],i=new _h(a=>{let l=new Set;return{info:new pw(this,a,l),closing:l}}),r=new _h(a=>{let l=new Set,d=new Set;return{info:new hw(this,a,l,d),opening:l,openingColorized:d}});for(let[a,l]of n){let d=i.get(a),u=r.get(l);d.closing.add(u.info),u.opening.add(d.info)}let s=t.colorizedBracketPairs?yR(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(let[a,l]of s){let d=i.get(a),u=r.get(l);d.closing.add(u.info),u.openingColorized.add(d.info),u.opening.add(d.info)}this._openingBrackets=new Map([...i.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info]))}_openingBrackets;_closingBrackets;get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){let t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return ku(t,e)}};function yR(o){return o.filter(([e,t])=>e!==""&&t!=="")}var bv=class{constructor(e,t){this.config=e;this.bracketText=t}get languageId(){return this.config.languageId}},pw=class extends bv{constructor(t,n,i){super(t,n);this.openedBrackets=i}isOpeningBracket=!0},hw=class extends bv{constructor(t,n,i,r){super(t,n);this.openingBrackets=i;this.openingColorizedBrackets=r}isOpeningBracket=!1;closes(t){return t.config!==this.config?!1:this.openingBrackets.has(t)}closesColorized(t){return t.config!==this.config?!1:this.openingColorizedBrackets.has(t)}getOpeningBrackets(){return[...this.openingBrackets]}};var un=class o{static _nextVisibleColumn(e,t,n){return e===9?o.nextRenderTabStop(t,n):c0(e)||Ph(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){let i=Math.min(t-1,e.length),r=e.substring(0,i),s=new Ld(r),a=0;for(;!s.eol();){let l=ru(r,i,s.offset);s.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static toStatusbarColumn(e,t,n){let i=e.substring(0,Math.min(t-1,e.length)),r=new _d(i),s=0;for(;!r.eol();)r.nextCodePoint()===9?s=o.nextRenderTabStop(s,n):s=s+1;return s+1}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;let i=e.length,r=new Ld(e),s=0,a=1;for(;!r.eol();){let l=ru(e,i,r.offset);r.nextGraphemeLength();let d=this._nextVisibleColumn(l,s,n),u=r.offset+1;if(d>=t){let p=t-s;return d-t<p?u:a}s=d,a=u}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}};var Du=class o{constructor(e,t){this.lineCount=e;this.columnCount=t}static zero=new o(0,0);static lengthDiffNonNegative(e,t){return t.isLessThan(e)?o.zero:e.lineCount===t.lineCount?new o(0,t.columnCount-e.columnCount):new o(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new o(0,t.column-e.column):new o(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return o.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(let i of e)i===`
`?(t++,n=0):n++;return new o(t,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new o(this.lineCount,this.columnCount+e.columnCount):new o(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new P(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new P(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new P(1,1,this.lineCount+1,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new te(e.lineNumber,e.column+this.columnCount):new te(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};function IR(o,e,t,n){return o!==t?qt(t-o,n):qt(0,n-e)}var Mn=0;function _u(o){return o===0}var Lo=2**26;function qt(o,e){return o*Lo+e}function Mi(o){let e=o,t=Math.floor(e/Lo),n=e-t*Lo;return new Du(t,n)}function SR(o){return Math.floor(o/Lo)}function Wt(o,e){let t=o+e;return e>=Lo&&(t=t-o%Lo),t}function xR(o,e){return o.reduce((t,n)=>Wt(t,e(n)),Mn)}function mw(o,e){return o===e}function Kd(o,e){let t=o,n=e;if(n-t<=0)return Mn;let r=Math.floor(t/Lo),s=Math.floor(n/Lo),a=n-s*Lo;if(r===s){let l=t-r*Lo;return qt(0,a-l)}else return qt(s-r,a)}function Ia(o,e){return o<e}function Tl(o,e){return o<=e}function Lu(o,e){return o>=e}function kl(o){return qt(o.lineNumber-1,o.column-1)}function Dl(o,e){let t=o,n=Math.floor(t/Lo),i=t-n*Lo,r=e,s=Math.floor(r/Lo),a=r-s*Lo;return new P(n+1,i+1,s+1,a+1)}function ER(o){let e=iu(o);return qt(e.length-1,e[e.length-1].length)}var vv=[],ni=class o{constructor(e,t){this.items=e;this.additionalItems=t}static cache=new Array(129);static create(e,t){if(e<=128&&t.length===0){let n=o.cache[e];return n||(n=new o(e,t),o.cache[e]=n),n}return new o(e,t)}static empty=o.create(0,vv);static getEmpty(){return this.empty}add(e,t){let n=t.getKey(e),i=n>>5;if(i===0){let s=1<<n|this.items;return s===this.items?this:o.create(s,this.additionalItems)}i--;let r=this.additionalItems.slice(0);for(;r.length<i;)r.push(0);return r[i]|=1<<(n&31),o.create(this.items,r)}has(e,t){let n=t.getKey(e),i=n>>5;return i===0?(this.items&1<<n)!==0:(i--,((this.additionalItems[i]||0)&1<<(n&31))!==0)}merge(e){let t=this.items|e.items;if(this.additionalItems===vv&&e.additionalItems===vv)return t===this.items?this:t===e.items?e:o.create(t,vv);let n=[];for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){let r=this.additionalItems[i]||0,s=e.additionalItems[i]||0;n.push(r|s)}return o.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}},gw={getKey(o){return o}},yv=class{items=new Map;getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find(([t,n])=>n===e)?.[0]}reverseLookupSet(e){let t=[];for(let[n]of this.items)e.has(n,this)&&t.push(n);return t}keys(){return this.items.keys()}};var Iv=class o{static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_WHITESPACE=` 
	`;_autoClosingPairs;_surroundingPairs;_autoCloseBeforeForQuotes;_autoCloseBeforeForBrackets;constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Tu(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Tu({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){let t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Tu({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:o.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:o.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};var Sv=class{_richEditBrackets;constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let n of t.close){let i=n.charAt(n.length-1);e.push(i)}return ra(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let i=t.findTokenIndexAtOffset(n-1);if(pr(t.getStandardTokenType(i)))return null;let r=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=Xi.findPrevBracketInRange(r,1,s,0,s.length);if(!a)return null;let l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;let u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}};function xv(o){return o.global&&(o.lastIndex=0),!0}var Ev=class{_indentationRules;constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&xv(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&xv(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&xv(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&xv(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}};var Cv=class o{_brackets;_regExpRules;constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{let n=o._createOpenBracketRegExp(t[0]),i=o._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let r=0,s=this._regExpRules.length;r<s;r++){let a=this._regExpRules[r];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let r=0,s=this._brackets.length;r<s;r++){let a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:2}}if(e>=2&&n.length>0){for(let r=0,s=this._brackets.length;r<s;r++)if(this._brackets[r].openRegExp.test(n))return{indentAction:1}}return null}static _createOpenBracketRegExp(e){let t=lo(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",o._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=lo(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,o._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return bt(t),null}}};var iW=[];function qn(o,e,t){e instanceof om||(e=new om(e,[],!!t)),iW.push([o,e])}var Sa=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});var oW={ModesRegistry:"editor.modesRegistry"},fw=class{_languages;_onDidChangeLanguages=new x;onDidChangeLanguages=this._onDidChangeLanguages.event;constructor(){this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}},CR=new fw;Be.add(oW.ModesRegistry,CR);var _l="plaintext",rW=".txt";CR.registerLanguage({id:_l,extensions:[rW],aliases:[c("plainText.alias","Plain Text"),"text"],mimetypes:[Sa.text]});Be.as(ws.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var Tm=class{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}},fo=H("languageConfigurationService"),wm=class extends N{constructor(t,n){super();this.configurationService=t;this.languageService=n;let i=new Set(Object.values(bw));this._register(this.configurationService.onDidChangeConfiguration(r=>{let s=r.change.keys.some(l=>i.has(l)),a=r.change.overrides.filter(([l,d])=>d.some(u=>i.has(u))).map(([l])=>l);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new Tm(void 0));else for(let l of a)this.languageService.isRegisteredLanguageId(l)&&(this.configurations.delete(l),this.onDidChangeEmitter.fire(new Tm(l)))})),this._register(this._registry.onDidChange(r=>{this.configurations.delete(r.languageId),this.onDidChangeEmitter.fire(new Tm(r.languageId))}))}_serviceBrand;_registry=this._register(new yw);onDidChangeEmitter=this._register(new x);onDidChange=this.onDidChangeEmitter.event;configurations=new Map;register(t,n,i){return this._registry.register(t,n,i)}getLanguageConfiguration(t){let n=this.configurations.get(t);return n||(n=sW(t,this._registry,this.configurationService,this.languageService),this.configurations.set(t,n)),n}};wm=k([I(0,He),I(1,Pi)],wm);function sW(o,e,t,n){let i=e.getLanguageConfiguration(o);if(!i){if(!n.isRegisteredLanguageId(o))return new Ru(o,{});i=new Ru(o,{})}let r=aW(i.languageId,t),s=TR([i.underlyingConfig,r]);return new Ru(i.languageId,s)}var bw={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function aW(o,e){let t=e.getValue(bw.brackets,{overrideIdentifier:o}),n=e.getValue(bw.colorizedBracketPairs,{overrideIdentifier:o});return{brackets:wR(t),colorizedBracketPairs:wR(n)}}function wR(o){if(Array.isArray(o))return o.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function _v(o,e,t){let n=o.getLineContent(e),i=Tt(n);return i.length>t-1&&(i=i.substring(0,t-1)),i}var vw=class{constructor(e){this.languageId=e;this._entries=[],this._order=0,this._resolved=null}_entries;_order;_resolved=null;register(e,t){let n=new kv(e,t,++this._order);return this._entries.push(n),this._resolved=null,re(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new Ru(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(kv.cmp),TR(this._entries.map(e=>e.configuration)))}};function TR(o){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let t of o)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}var kv=class{constructor(e,t,n){this.configuration=e;this.priority=t;this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}},Dv=class{constructor(e){this.languageId=e}},yw=class extends N{_entries=new Map;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;constructor(){super(),this._register(this.register(_l,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new vw(e),this._entries.set(e,i));let r=i.register(t,n);return this._onDidChange.fire(new Dv(e)),re(()=>{r.dispose(),this._onDidChange.fire(new Dv(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}},Ru=class o{constructor(e,t){this.languageId=e;this.underlyingConfig=t;this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Cv(this.underlyingConfig):null,this.comments=o._handleComments(this.underlyingConfig),this.characterPair=new Iv(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||JE,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new Ev(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new fv(e,this.underlyingConfig)}_brackets;_electricCharacter;_onEnterSupport;comments;characterPair;wordDefinition;indentRulesSupport;indentationRules;foldingRules;bracketsNew;getWordDefinition(){return im(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new mv(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new Sv(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new hv(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[i,r]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=r}return n}};qn(fo,wm,1);var Iw=class o{constructor(e){this.map=e}static createFromLanguage(e,t){function n(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}let i=new Map;for(let r of e.bracketsNew.openingBrackets){let s=qt(0,r.bracketText.length),a=n(r),l=ni.getEmpty().add(a,gw);i.set(r.bracketText,new Wr(s,1,a,l,km.create(s,r,l)))}for(let r of e.bracketsNew.closingBrackets){let s=qt(0,r.bracketText.length),a=ni.getEmpty(),l=r.getOpeningBrackets();for(let d of l)a=a.add(n(d),gw);i.set(r.bracketText,new Wr(s,2,n(l[0]),a,km.create(s,r,a)))}return new o(i)}hasRegExp=!1;_regExpGlobal=null;getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>lW(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}};function lW(o){let e=lo(o);return/^[\w ]+/.test(o)&&(e=`\\b${e}`),/[\w ]+$/.test(o)&&(e=`${e}\\b`),e}var Lv=class{constructor(e,t){this.denseKeyProvider=e;this.getLanguageConfiguration=t}languageIdToBracketTokens=new Map;didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=Iw.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}};var Wr=class{constructor(e,t,n,i,r){this.length=e;this.kind=t;this.bracketId=n;this.bracketIds=i;this.astNode=r}},Rv=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;reader=new Sw(this.textModel,this.bracketTokens);_offset=Mn;get offset(){return this._offset}get length(){return qt(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=Wt(this._offset,e);let t=Mi(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}didPeek=!1;peeked=null;read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Wt(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}},Sw=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;lineIdx=0;line=null;lineCharOffset=0;lineTokens=null;lineTokenOffset=0;setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}peekedToken=null;read(){if(this.peekedToken){let r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,n=0;for(;;){let r=this.lineTokens,s=r.getCount(),a=null;if(this.lineTokenOffset<s){let l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let d=_o.getTokenType(l)===0,u=_o.containsBalancedBrackets(l),p=r.getEndOffset(this.lineTokenOffset);if(u&&d&&this.lineCharOffset<p){let h=r.getLanguageId(this.lineTokenOffset),m=this.line.substring(this.lineCharOffset,p),g=this.bracketTokens.getSingleLanguageBracketTokens(h),f=g.regExpGlobal;if(f){f.lastIndex=0;let y=f.exec(m);y&&(a=g.getToken(y[0]),a&&(this.lineCharOffset+=y.index))}}if(n+=p-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=p}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}let i=IR(e,t,this.lineIdx,this.lineCharOffset);return new Wr(i,0,-1,ni.getEmpty(),new Ur(i))}},Av=class{constructor(e,t){this.text=e;let n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,r=[],s,a=0,l=0,d=0,u=0,p=[];for(let g=0;g<60;g++)p.push(new Wr(qt(0,g),0,-1,ni.getEmpty(),new Ur(qt(0,g))));let h=[];for(let g=0;g<60;g++)h.push(new Wr(qt(1,g),0,-1,ni.getEmpty(),new Ur(qt(1,g))));if(i)for(i.lastIndex=0;(s=i.exec(e))!==null;){let g=s.index,f=s[0];if(f===`
`)a++,l=g+1;else{if(d!==g){let y;if(u===a){let C=g-d;if(C<p.length)y=p[C];else{let w=qt(0,C);y=new Wr(w,0,-1,ni.getEmpty(),new Ur(w))}}else{let C=a-u,w=g-l;if(C===1&&w<h.length)y=h[w];else{let R=qt(C,w);y=new Wr(R,0,-1,ni.getEmpty(),new Ur(R))}}r.push(y)}r.push(t.getToken(f)),d=g+f.length,u=a}}let m=e.length;if(d!==m){let g=u===a?qt(0,m-d):qt(a-u,m-l);r.push(new Wr(g,0,-1,ni.getEmpty(),new Ur(g)))}this.length=qt(a,m-l),this.tokens=r}_offset=Mn;tokens;idx=0;get offset(){return this._offset}length;read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new yf}getText(){return this.text}};var Dm=class{_length;get length(){return this._length}constructor(e){this._length=e}},_m=class o extends Dm{constructor(t,n,i,r,s){super(t);this.openingBracket=n;this.child=i;this.closingBracket=r;this.missingOpeningBracketIds=s}static create(t,n,i){let r=t.length;return n&&(r=Wt(r,n.length)),i&&(r=Wt(r,i.length)),new o(r,t,n,i,n?n.missingOpeningBracketIds:ni.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(t){switch(t){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){let t=[];return t.push(this.openingBracket),this.child&&t.push(this.child),this.closingBracket&&t.push(this.closingBracket),t}canBeReused(t){return!(this.closingBracket===null||t.intersects(this.missingOpeningBracketIds))}flattenLists(){return o.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new o(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(t,n){return this.child?this.child.computeMinIndentation(Wt(t,this.openingBracket.length),n):Number.MAX_SAFE_INTEGER}},Ro=class o extends Dm{constructor(t,n,i){super(t);this.listHeight=n;this._missingOpeningBracketIds=i}static create23(t,n,i,r=!1){let s=t.length,a=t.missingOpeningBracketIds;if(t.listHeight!==n.listHeight)throw new Error("Invalid list heights");if(s=Wt(s,n.length),a=a.merge(n.missingOpeningBracketIds),i){if(t.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=Wt(s,i.length),a=a.merge(i.missingOpeningBracketIds)}return r?new xw(s,t.listHeight+1,t,n,i,a):new Lm(s,t.listHeight+1,t,n,i,a)}static create(t,n=!1){if(t.length===0)return this.getEmpty();{let i=t[0].length,r=t[0].missingOpeningBracketIds;for(let s=1;s<t.length;s++)i=Wt(i,t[s].length),r=r.merge(t[s].missingOpeningBracketIds);return n?new Ov(i,t[0].listHeight+1,t,r):new Rm(i,t[0].listHeight+1,t,r)}}static getEmpty(){return new Ov(Mn,0,[],ni.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}cachedMinIndentation=-1;throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let t=this.childrenLength;if(t===0)return;let n=this.getChild(t-1),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(t-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let n=this.getChild(0),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(0,i),i}canBeReused(t){if(t.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let n=this;for(;n.kind===4;){let i=n.childrenLength;if(i===0)throw new ut;n=n.getChild(i-1)}return n.canBeReused(t)}handleChildrenChanged(){this.throwIfImmutable();let t=this.childrenLength,n=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<t;r++){let s=this.getChild(r);n=Wt(n,s.length),i=i.merge(s.missingOpeningBracketIds)}this._length=n,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}flattenLists(){let t=[];for(let n of this.children){let i=n.flattenLists();i.kind===4?t.push(...i.children):t.push(i)}return o.create(t)}computeMinIndentation(t,n){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,r=t;for(let s=0;s<this.childrenLength;s++){let a=this.getChild(s);a&&(i=Math.min(i,a.computeMinIndentation(r,n)),r=Wt(r,a.length))}return this.cachedMinIndentation=i,i}},Lm=class o extends Ro{constructor(t,n,i,r,s,a){super(t,n,a);this._item1=i;this._item2=r;this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(t){switch(t){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(t,n){switch(t){case 0:this._item1=n;return;case 1:this._item2=n;return;case 2:this._item3=n;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new o(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=t,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item3;return this._item3=null,this.handleChildrenChanged(),t}prependChildOfSameHeight(t){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=t,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),t}toMutable(){return this}},xw=class extends Lm{toMutable(){return new Lm(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},Rm=class o extends Ro{constructor(t,n,i,r){super(t,n,r);this._children=i}get childrenLength(){return this._children.length}getChild(t){return this._children[t]}setChild(t,n){this._children[t]=n}get children(){return this._children}deepClone(){let t=new Array(this._children.length);for(let n=0;n<this._children.length;n++)t[n]=this._children[n].deepClone();return new o(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){this.throwIfImmutable(),this._children.push(t),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let t=this._children.pop();return this.handleChildrenChanged(),t}prependChildOfSameHeight(t){this.throwIfImmutable(),this._children.unshift(t),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let t=this._children.shift();return this.handleChildrenChanged(),t}toMutable(){return this}},Ov=class extends Rm{toMutable(){return new Rm(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},cW=[],Am=class extends Dm{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return cW}flattenLists(){return this}deepClone(){return this}},Ur=class extends Am{get kind(){return 0}get missingOpeningBracketIds(){return ni.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let n=Mi(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=SR(Wt(e,this.length))+1,s=Number.MAX_SAFE_INTEGER;for(let a=i;a<=r;a++){let l=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(l===0)continue;let u=un.visibleColumnFromColumn(d,l,t.getOptions().tabSize);s=Math.min(s,u)}return s}},km=class o extends Am{constructor(t,n,i){super(t);this.bracketInfo=n;this.bracketIds=i}static create(t,n,i){return new o(t,n,i)}get kind(){return 1}get missingOpeningBracketIds(){return ni.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(t){return!1}computeMinIndentation(t,n){return Number.MAX_SAFE_INTEGER}},Pv=class extends Am{get kind(){return 3}missingOpeningBracketIds;constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};var Om=class{constructor(e,t,n,i){this.range=e;this.nestingLevel=t;this.nestingLevelOfEqualBracketType=n;this.isInvalid=i}},Ew=class{constructor(e,t,n,i,r,s){this.range=e;this.openingBracketRange=t;this.closingBracketRange=n;this.nestingLevel=i;this.nestingLevelOfEqualBracketType=r;this.bracketPairNode=s}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}},Mv=class extends Ew{constructor(t,n,i,r,s,a,l){super(t,n,i,r,s,a);this.minVisibleColumnIndentation=l}};var Nv=class{changeType=1},Pm=class o{constructor(e,t,n,i,r){this.ownerId=e;this.lineNumber=t;this.column=n;this.options=i;this.order=r}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(let r of t)n+=e.substring(i,r.column-1),i=r.column-1,n+=r.options.content;return n+=e.substring(i),n}static fromDecorations(e){let t=[];for(let n of e)n.options.before&&n.options.before.content.length>0&&t.push(new o(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new o(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}withText(e){return new o(this.ownerId,this.lineNumber,this.column,{...this.options,content:e},this.order)}},Mm=class{changeType=2;lineNumber;detail;injectedText;constructor(e,t,n){this.lineNumber=e,this.detail=t,this.injectedText=n}},Fv=class{changeType=3;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}},Bv=class{changeType=4;fromLineNumber;toLineNumber;detail;injectedTexts;constructor(e,t,n,i){this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}},Vv=class{changeType=5},Gd=class o{changes;versionId;isUndoing;isRedoing;resultingSelection;constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){let n=[].concat(e.changes).concat(t.changes),i=t.versionId,r=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new o(n,i,r,s)}},Wv=class{changes;constructor(e){this.changes=e}},Uv=class o{constructor(e,t){this.rawContentChangedEvent=e;this.contentChangedEvent=t}merge(e){let t=Gd.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=o._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new o(t,n)}static _mergeChangeEvents(e,t){let n=[].concat(e.changes).concat(t.changes),i=t.eol,r=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,d=e.isEolChange&&t.isEolChange;return{changes:n,eol:i,isEolChange:d,versionId:r,isUndoing:s,isRedoing:a,isFlush:l}}};var qd=class{constructor(e,t,n,i,r,s){this.visibleColumn=e;this.column=t;this.className=n;this.horizontalLine=i;this.forWrappedLinesAfterColumn=r;this.forWrappedLinesBeforeOrAtColumn=s;if(e!==-1==(t!==-1))throw new Error}},Au=class{constructor(e,t){this.top=e;this.endColumn=t}};var zv=class o{constructor(e){this.edits=e;let t=-1;for(let n of e){if(!(n.replaceRange.start>=t))throw new ut(`Edits must be disjoint and sorted. Found ${n} after ${t}`);t=n.replaceRange.endExclusive}}static empty=new o([]);static fromJson(e){return new o(e.map(zr.fromJson))}static replace(e,t){return new o([new zr(e,t)])}static insert(e,t){return o.replace(Gt.emptyAt(e),t)}normalize(){let e=[],t;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(t&&t.replaceRange.endExclusive===n.replaceRange.start?t=new zr(t.replaceRange.join(n.replaceRange),t.newText+n.newText):(t&&e.push(t),t=n));return t&&e.push(t),new o(e)}toString(){return`[${this.edits.map(t=>t.toString()).join(", ")}]`}apply(e){let t=[],n=0;for(let i of this.edits)t.push(e.substring(n,i.replaceRange.start)),t.push(i.newText),n=i.replaceRange.endExclusive;return t.push(e.substring(n)),t.join("")}compose(e){return uW(this,e)}inverse(e){let t=[],n=0;for(let i of this.edits)t.push(new zr(Gt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new o(t)}getNewTextRanges(){let e=[],t=0;for(let n of this.edits)e.push(Gt.ofStartAndLength(n.replaceRange.start+t,n.newText.length)),t+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let t=[],n=0,i=0,r=0;for(;i<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[i];if(a)s?a.replaceRange.intersects(s.replaceRange)?i++:a.replaceRange.start<s.replaceRange.start?(t.push(new zr(a.replaceRange.delta(r),a.newText)),i++):(n++,r+=s.newText.length-s.replaceRange.length):(t.push(new zr(a.replaceRange.delta(r),a.newText)),i++);else break}return new o(t)}applyToOffset(e){let t=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+t;t+=n.newText.length-n.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new Gt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-t){if(e-t<n.replaceRange.start+i)return n.replaceRange.start;t+=i-n.replaceRange.length}else break}return e-t}},zr=class o{constructor(e,t){this.replaceRange=e;this.newText=t}static fromJson(e){return new o(Gt.ofStartAndLength(e.pos,e.len),e.txt)}static insert(e,t){return new o(Gt.emptyAt(e),t)}toString(){return`${this.replaceRange} -> "${this.newText}"`}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function uW(o,e){if(o=o.normalize(),e=e.normalize(),o.isEmpty)return e;if(e.isEmpty)return o;let t=[...o.edits],n=[],i=0;for(let r of e.edits){for(;;){let d=t[0];if(!d||d.replaceRange.start+i+d.newText.length>=r.replaceRange.start)break;t.shift(),n.push(d),i+=d.newText.length-d.replaceRange.length}let s=i,a,l;for(;;){let d=t[0];if(!d||d.replaceRange.start+i>r.replaceRange.endExclusive)break;a||(a=d),l=d,t.shift(),i+=d.newText.length-d.replaceRange.length}if(!a)n.push(new zr(r.replaceRange.delta(-i),r.newText));else{let d="",u=r.replaceRange.start-(a.replaceRange.start+s);u>0&&(d=a.newText.slice(0,u));let p=l.replaceRange.endExclusive+i-r.replaceRange.endExclusive;if(p>0){let g=new zr(Gt.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));t.unshift(g),i-=g.newText.length-g.replaceRange.length}let h=d+r.newText,m=new Gt(Math.min(a.replaceRange.start,r.replaceRange.start-s),r.replaceRange.endExclusive-i);n.push(new zr(m,h))}}for(;;){let r=t.shift();if(!r)break;n.push(r)}return new zv(n).normalize()}var _R=H("undoRedoService");var kR=class o{static _ID=0;id;order;constructor(){this.id=o._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new o},DR=class o{static _ID=0;id;order;constructor(){this.id=o._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new o};var Ou=class{_textModelResolvedOptionsBrand=void 0;tabSize;indentSize;_indentSizeIsTabSize;insertSpaces;defaultEOL;trimAutoWhitespace;bracketPairColorizationOptions;get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Si(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},Ll=class{_findMatchBrand=void 0;range;matches;constructor(e,t){this.range=e,this.matches=t}};function LR(o){return o&&typeof o.read=="function"}var Pu=class{constructor(e,t,n,i,r,s){this.identifier=e;this.range=t;this.text=n;this.forceMoveMarkers=i;this.isAutoWhitespaceEdit=r;this._isTracked=s}},Hv=class{regex;wordSeparators;simpleSearch;constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}},Kv=class{constructor(e,t,n){this.reverseEdits=e;this.changes=t;this.trimAutoWhitespaceLineNumbers=n}};function RR(o){return o&&typeof o.id=="string"}var Cw={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var Ut=H("fileService");function AR(o){return!!(o.capabilities&2048)}var Mu=class o extends Error{constructor(t,n){super(t);this.code=n}static create(t,n){let i=new o(t.toString(),n);return mW(i,n),i}};function ww(o,e){return Mu.create(o,e)}function mW(o,e){return o.name=e?`${e} (FileSystemError)`:"FileSystemError",o}function gW(o){if(!o)return"Unknown";if(o instanceof Mu)return o.code;let e=/^(.+) \(FileSystemError\)$/.exec(o.name);if(!e)return"Unknown";switch(e[1]){case"EntryExists":return"EntryExists";case"EntryIsADirectory":return"EntryIsADirectory";case"EntryNotADirectory":return"EntryNotADirectory";case"EntryNotFound":return"EntryNotFound";case"EntryTooLarge":return"EntryTooLarge";case"EntryWriteLocked":return"EntryWriteLocked";case"NoPermissions":return"NoPermissions";case"Unavailable":return"Unavailable"}return"Unknown"}function OR(o){if(o instanceof Nm)return o.fileOperationResult;switch(gW(o)){case"EntryNotFound":return 1;case"EntryIsADirectory":return 0;case"EntryNotADirectory":return 9;case"EntryWriteLocked":return 5;case"NoPermissions":return 6;case"EntryExists":return 4;case"EntryTooLarge":return 7;default:return 10}}var Nm=class extends Error{constructor(t,n,i){super(t);this.fileOperationResult=n;this.options=i}};var Gv=class extends Nm{constructor(t,n,i){super(t,2,i);this.stat=n}};var Hr={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},Nu={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},Tw="files.associations";var PR="files.readonlyInclude",MR="files.readonlyExclude";var Fm="";var hr=class o{static KB=1024;static MB=o.KB*o.KB;static GB=o.MB*o.KB;static TB=o.GB*o.KB;static formatSize(e){return Li(e)||(e=0),e<o.KB?c("sizeB","{0}B",e.toFixed(0)):e<o.MB?c("sizeKB","{0}KB",(e/o.KB).toFixed(2)):e<o.GB?c("sizeMB","{0}MB",(e/o.MB).toFixed(2)):e<o.TB?c("sizeGB","{0}GB",(e/o.GB).toFixed(2)):c("sizeTB","{0}TB",(e/o.TB).toFixed(2))}};function NR(o){let e=typeof o=="string"||o?.scheme===me.vscodeRemote;return typeof o!="string"&&o?.scheme===me.file?1024*hr.MB:e?10*hr.MB:Cn?50*hr.MB:1024*hr.MB}var Bm=H("textModelService");var FR="";var Rl=class extends N{_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;resolved=!1;async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}};var mr=H("modelService");var Al=H("ILanguageDetectionService"),kw="languageDetection",BR="automaticlanguagedetection.likelywrong";var _s=class extends Rl{constructor(t,n,i,r,s){super();this.modelService=t;this.languageService=n;this.languageDetectionService=i;this.accessibilityService=r;s&&this.handleExistingModel(s)}static AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;textEditorModelHandle=void 0;createdEditorModel;modelDisposeListener=this._register(new ot);autoDetectLanguageThrottler=this._register(new Vh(_s.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY));handleExistingModel(t){let n=this.modelService.getModel(t);if(!n)throw new Error(`Document with resource ${t.toString(!0)} does not exist`);this.textEditorModelHandle=t,this.registerModelDisposeListener(n)}registerModelDisposeListener(t){this.modelDisposeListener.value=t.onWillDispose(()=>{this.textEditorModelHandle=void 0,this.dispose()})}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}_hasLanguageSetExplicitly=!1;get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}setLanguageId(t,n){this._hasLanguageSetExplicitly=!0,this.setLanguageIdInternal(t,n)}setLanguageIdInternal(t,n){this.isResolved()&&(!t||t===this.textEditorModel.getLanguageId()||this.textEditorModel.setLanguage(this.languageService.createById(t),n))}installModelListeners(t){let n=this._register(t.onDidChangeLanguage(i=>{i.source!==kw&&(this._hasLanguageSetExplicitly=!0,n.dispose())}))}getLanguageId(){return this.textEditorModel?.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger(()=>this.doAutoDetectLanguage())}async doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(this.getLanguageId()??_l))return;let t=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),n=this.getLanguageId();if(t&&t!==n&&!this.isDisposed()){this.setLanguageIdInternal(t,kw);let i=this.languageService.getLanguageName(t);this.accessibilityService.alert(c("languageAutoDetected","Language {0} was automatically detected and set as the language mode.",i??t))}}createTextEditorModel(t,n,i){let r=this.getFirstLineText(t),s=this.getOrCreateLanguage(n,this.languageService,i,r);return this.doCreateTextEditorModel(t,s,n)}doCreateTextEditorModel(t,n,i){let r=i&&this.modelService.getModel(i);return r?this.updateTextEditorModel(t,n.languageId):(r=this.modelService.createModel(t,n,i),this.createdEditorModel=!0,this.registerModelDisposeListener(r)),this.textEditorModelHandle=r.uri,r}getFirstLineText(t){let n=t;return typeof n.getFirstLineText=="function"?n.getFirstLineText(1e3):t.getLineContent(1).substr(0,1e3)}getOrCreateLanguage(t,n,i,r){return!i||i===_l?n.createByFilepathOrFirstLine(t??null,r):n.createById(i)}updateTextEditorModel(t,n){this.isResolved()&&(t&&this.modelService.updateModel(this.textEditorModel,t),n&&n!==_l&&this.textEditorModel.getLanguageId()!==n&&this.textEditorModel.setLanguage(this.languageService.createById(n)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}};_s=k([I(0,mr),I(1,Pi),I(2,Al),I(3,Cs)],_s);var qv=H("workingCopyBackupService");var ii=H("textResourceConfigurationService"),woe=H("textResourcePropertiesService");function fW(o,e,t){let n=0;for(let r=0;r<o.length;r++)o.charAt(r)==="	"?n=un.nextIndentTabStop(n,e):n++;let i="";if(!t){let r=Math.floor(n/e);n=n%e;for(let s=0;s<r;s++)i+="	"}for(let r=0;r<n;r++)i+=" ";return i}function Vm(o,e,t){let n=qi(o);return n===-1&&(n=o.length),fW(o.substring(0,n),e,t)+o.substring(n)}var $d=class o{constructor(e,t,n){this.startOffset=e;this.endOffset=t;this.newLength=n}static fromModelContentChanges(e){return e.map(n=>{let i=P.lift(n.range);return new o(kl(i.getStartPosition()),kl(i.getEndPosition()),ER(n.text))}).reverse()}toString(){return`[${Mi(this.startOffset)}...${Mi(this.endOffset)}) -> ${Mi(this.newLength)}`}},$v=class{nextEditIdx=0;deltaOldToNewLineCount=0;deltaOldToNewColumnCount=0;deltaLineIdxInOld=-1;edits;constructor(e){this.edits=e.map(t=>Dw.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:Kd(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?qt(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):qt(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=Mi(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?qt(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):qt(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Tl(n,e)){this.nextEditIdx++;let i=Mi(n),r=Mi(this.translateOldToCur(t.endOffsetBeforeObj)),s=i.lineCount-r.lineCount;this.deltaOldToNewLineCount+=s;let a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},Dw=class o{static from(e){return new o(e.startOffset,e.endOffset,e.newLength)}endOffsetBeforeObj;endOffsetAfterObj;offsetObj;constructor(e,t,n){this.endOffsetBeforeObj=Mi(t),this.endOffsetAfterObj=Mi(Wt(e,n)),this.offsetObj=Mi(e)}};function UR(o){if(o.length===0)return null;if(o.length===1)return o[0];let e=0;function t(){if(e>=o.length)return null;let s=e,a=o[s].listHeight;for(e++;e<o.length&&o[e].listHeight===a;)e++;return e-s>=2?Lw(s===0&&e===o.length?o:o.slice(s,e),!1):o[s]}let n=t(),i=t();if(!i)return n;for(let s=t();s;s=t())VR(n,i)<=VR(i,s)?(n=_w(n,i),i=s):i=_w(i,s);return _w(n,i)}function Lw(o,e=!1){if(o.length===0)return null;if(o.length===1)return o[0];let t=o.length;for(;t>3;){let n=t>>1;for(let i=0;i<n;i++){let r=i<<1;o[i]=Ro.create23(o[r],o[r+1],r+3===t?o[r+2]:null,e)}t=n}return Ro.create23(o[0],o[1],t>=3?o[2]:null,e)}function VR(o,e){return Math.abs(o.listHeight-e.listHeight)}function _w(o,e){return o.listHeight===e.listHeight?Ro.create23(o,e,null,!1):o.listHeight>e.listHeight?bW(o,e):vW(e,o)}function bW(o,e){o=o.toMutable();let t=o,n=[],i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){let s=n[r];i?s.childrenLength>=3?i=Ro.create23(s.unappendChild(),i,null,!1):(s.appendChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?Ro.create23(o,i,null,!1):o}function vW(o,e){o=o.toMutable();let t=o,n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let r=n.length-1;r>=0;r--){let s=n[r];i?s.childrenLength>=3?i=Ro.create23(i,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?Ro.create23(i,o,null,!1):o}var jv=class{nextNodes;offsets;idxs;lastOffset=Mn;constructor(e){this.nextNodes=[e],this.offsets=[Mn],this.idxs=[]}readLongestNodeAt(e,t){if(Ia(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){let n=Wm(this.nextNodes);if(!n)return;let i=Wm(this.offsets);if(Ia(e,i))return;if(Ia(i,e))if(Wt(i,n.length)<=e)this.nextNodeAfterCurrent();else{let r=Rw(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(i),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{let r=Rw(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(i),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){let e=Wm(this.offsets),t=Wm(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let n=Wm(this.nextNodes),i=Rw(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(Wt(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}};function Rw(o,e=-1){for(;;){if(e++,e>=o.childrenLength)return-1;if(o.getChild(e))return e}}function Wm(o){return o.length>0?o[o.length-1]:void 0}function Ow(o,e,t,n){return new Aw(o,e,t,n).parseDocument()}var Aw=class{constructor(e,t,n,i){this.tokenizer=e;this.createImmutableLists=i;if(n&&i)throw new Error("Not supported");this.oldNodeReader=n?new jv(n):void 0,this.positionMapper=new $v(t)}oldNodeReader;positionMapper;_itemsConstructed=0;_itemsFromCache=0;get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(ni.getEmpty(),0);return e||(e=Ro.getEmpty()),e}parseList(e,t){let n=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){let s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===4&&r.childrenLength===0||n.push(r)}return this.oldNodeReader?UR(n):Lw(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!_u(t)){let n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>t!==null&&!Ia(i.length,t)?!1:i.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;let n=this.tokenizer.read();switch(n.kind){case 2:return new Pv(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new Ur(n.length);let i=e.merge(n.bracketIds),r=this.parseList(i,t+1),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===n.bracketId||s.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),_m.create(n.astNode,r,s.astNode)):_m.create(n.astNode,r,null)}default:throw new Error("unexpected")}}};function Pw(o,e){if(o.length===0)return e;if(e.length===0)return o;let t=new fd(zR(o)),n=zR(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=t.dequeue();function r(d){if(d===void 0){let p=t.takeWhile(h=>!0)||[];return i&&p.unshift(i),p}let u=[];for(;i&&!_u(d);){let[p,h]=i.splitAt(d);u.push(p),d=Kd(p.lengthAfter,d),i=h??t.dequeue()}return _u(d)||u.push(new Um(!1,d,d)),u}let s=[];function a(d,u,p){if(s.length>0&&mw(s[s.length-1].endOffset,d)){let h=s[s.length-1];s[s.length-1]=new $d(h.startOffset,u,Wt(h.newLength,p))}else s.push({startOffset:d,endOffset:u,newLength:p})}let l=Mn;for(let d of n){let u=r(d.lengthBefore);if(d.modified){let p=xR(u,m=>m.lengthBefore),h=Wt(l,p);a(l,h,d.lengthAfter),l=h}else for(let p of u){let h=l;l=Wt(l,p.lengthBefore),p.modified&&a(h,l,p.lengthAfter)}}return s}var Um=class o{constructor(e,t,n){this.modified=e;this.lengthBefore=t;this.lengthAfter=n}splitAt(e){let t=Kd(e,this.lengthAfter);return mw(t,Mn)?[this,void 0]:this.modified?[new o(this.modified,this.lengthBefore,e),new o(this.modified,Mn,t)]:[new o(this.modified,e,e),new o(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Mi(this.lengthBefore)} -> ${Mi(this.lengthAfter)}`}};function zR(o){let e=[],t=Mn;for(let n of o){let i=Kd(t,n.startOffset);_u(i)||e.push(new Um(!1,i,i));let r=Kd(n.startOffset,n.endOffset);e.push(new Um(!0,r,n.newLength)),t=n.endOffset}return e}var Yv=class extends N{constructor(t,n){super();this.textModel=t;this.getLanguageConfiguration=n;if(t.tokenization.hasTokens)t.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),r=new Av(this.textModel.getValue(),i);this.initialAstWithoutTokens=Ow(r,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}didChangeEmitter=new x;initialAstWithoutTokens;astWithTokens;denseKeyProvider=new yv;brackets=new Lv(this.denseKeyProvider,this.getLanguageConfiguration);didLanguageChange(t){return this.brackets.didLanguageChange(t)}onDidChange=this.didChangeEmitter.event;queuedTextEditsForInitialAstWithoutTokens=[];queuedTextEdits=[];handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){let t=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,t||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:t}){let n=t.map(i=>new $d(qt(i.fromLineNumber-1,0),qt(i.toLineNumber,0),qt(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(n,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(t){let n=$d.fromModelContentChanges(t.changes);this.handleEdits(n,!1)}handleEdits(t,n){let i=Pw(this.queuedTextEdits,t);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!n&&(this.queuedTextEditsForInitialAstWithoutTokens=Pw(this.queuedTextEditsForInitialAstWithoutTokens,t))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(t,n,i){let s=n,a=new Rv(this.textModel,this.brackets);return Ow(a,t,s,i)}getBracketsInRange(t,n){this.flushQueue();let i=qt(t.startLineNumber-1,t.startColumn-1),r=qt(t.endLineNumber-1,t.endColumn-1);return new oa(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens;Mw(a,Mn,a.length,i,r,s,0,0,new Map,n)})}getBracketPairsInRange(t,n){this.flushQueue();let i=kl(t.getStartPosition()),r=kl(t.getEndPosition());return new oa(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens,l=new Nw(s,n,this.textModel);Fw(a,Mn,a.length,i,r,l,0,new Map)})}getFirstBracketAfter(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return GR(n,Mn,n.length,kl(t))}getFirstBracketBefore(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return KR(n,Mn,n.length,kl(t))}};function KR(o,e,t,n){if(o.kind===4||o.kind===2){let i=[];for(let r of o.children)t=Wt(e,r.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=i.length-1;r>=0;r--){let{nodeOffsetStart:s,nodeOffsetEnd:a}=i[r];if(Ia(s,n)){let l=KR(o.children[r],s,a,n);if(l)return l}}return null}else{if(o.kind===3)return null;if(o.kind===1){let i=Dl(e,t);return{bracketInfo:o.bracketInfo,range:i}}}return null}function GR(o,e,t,n){if(o.kind===4||o.kind===2){for(let i of o.children){if(t=Wt(e,i.length),Ia(n,t)){let r=GR(i,e,t,n);if(r)return r}e=t}return null}else{if(o.kind===3)return null;if(o.kind===1){let i=Dl(e,t);return{bracketInfo:o.bracketInfo,range:i}}}return null}function Mw(o,e,t,n,i,r,s,a,l,d,u=!1){if(s>200)return!0;e:for(;;)switch(o.kind){case 4:{let p=o.childrenLength;for(let h=0;h<p;h++){let m=o.getChild(h);if(m){if(t=Wt(e,m.length),Tl(e,i)&&Lu(t,n)){if(Lu(t,i)){o=m;continue e}if(!Mw(m,e,t,n,i,r,s,0,l,d))return!1}e=t}}return!0}case 2:{let p=!d||!o.closingBracket||o.closingBracket.bracketInfo.closesColorized(o.openingBracket.bracketInfo),h=0;if(l){let g=l.get(o.openingBracket.text);g===void 0&&(g=0),h=g,p&&(g++,l.set(o.openingBracket.text,g))}let m=o.childrenLength;for(let g=0;g<m;g++){let f=o.getChild(g);if(f){if(t=Wt(e,f.length),Tl(e,i)&&Lu(t,n)){if(Lu(t,i)&&f.kind!==1){o=f,p?(s++,a=h+1):a=h;continue e}if((p||f.kind!==1||!o.closingBracket)&&!Mw(f,e,t,n,i,r,p?s+1:s,p?h+1:h,l,d,!o.closingBracket))return!1}e=t}}return l?.set(o.openingBracket.text,h),!0}case 3:{let p=Dl(e,t);return r(new Om(p,s-1,0,!0))}case 1:{let p=Dl(e,t);return r(new Om(p,s-1,a-1,u))}case 0:return!0}}var Nw=class{constructor(e,t,n){this.push=e;this.includeMinIndentation=t;this.textModel=n}};function Fw(o,e,t,n,i,r,s,a){if(s>200)return!0;let l=!0;if(o.kind===2){let d=0;if(a){let h=a.get(o.openingBracket.text);h===void 0&&(h=0),d=h,h++,a.set(o.openingBracket.text,h)}let u=Wt(e,o.openingBracket.length),p=-1;if(r.includeMinIndentation&&(p=o.computeMinIndentation(e,r.textModel)),l=r.push(new Mv(Dl(e,t),Dl(e,u),o.closingBracket?Dl(Wt(u,o.child?.length||Mn),t):void 0,s,d,o,p)),e=u,l&&o.child){let h=o.child;if(t=Wt(e,h.length),Tl(e,i)&&Lu(t,n)&&(l=Fw(h,e,t,n,i,r,s+1,a),!l))return!1}a?.set(o.openingBracket.text,d)}else{let d=e;for(let u of o.children){let p=d;if(d=Wt(d,u.length),Tl(p,i)&&Tl(n,d)&&(l=Fw(u,p,d,n,i,r,s,a),!l))return!1}}return l}var Xv=class extends N{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}bracketPairsTree=this._register(new ot);onDidChangeEmitter=new x;onDidChange=this.onDidChangeEmitter.event;get canBuildAST(){return this.textModel.getValueLength()<=5e6}bracketsRequested=!1;handleLanguageConfigurationServiceChange(t){(!t.languageId||this.bracketPairsTree.value?.object.didLanguageChange(t.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(t){this.bracketPairsTree.value?.object.handleContentChanged(t)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(t){this.bracketPairsTree.value?.object.handleDidChangeTokens(t)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let t=new Y;this.bracketPairsTree.value=yW(t.add(new Yv(this.textModel,n=>this.languageConfigurationService.getLanguageConfiguration(n))),t),t.add(this.bracketPairsTree.value.object.onDidChange(n=>this.onDidChangeEmitter.fire(n))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!1)||oa.empty}getBracketPairsInRangeWithMinIndentation(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!0)||oa.empty}getBracketsInRange(t,n=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(t,n)||oa.empty}findMatchingBracketUp(t,n,i){let r=this.textModel.validatePosition(n),s=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);if(this.canBuildAST){let a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(t);if(!a)return null;let l=this.getBracketPairsInRange(P.fromPositions(n,n)).findLast(d=>a.closes(d.openingBracketInfo));return l?l.openingBracketRange:null}else{let a=t.toLowerCase(),l=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!l)return null;let d=l.textIsBracket[a];return d?Qv(this._findMatchingBracketUp(d,r,Bw(i))):null}}matchBracket(t,n){if(this.canBuildAST){let i=this.getBracketPairsInRange(P.fromPositions(t,t)).filter(r=>r.closingBracketRange!==void 0&&(r.openingBracketRange.containsPosition(t)||r.closingBracketRange.containsPosition(t))).findLastMaxBy(Ix(r=>r.openingBracketRange.containsPosition(t)?r.openingBracketRange:r.closingBracketRange,P.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{let i=Bw(n);return this._matchBracket(this.textModel.validatePosition(t),i)}}_establishBracketSearchOffsets(t,n,i,r){let s=n.getCount(),a=n.getLanguageId(r),l=Math.max(0,t.column-1-i.maxBracketLength);for(let u=r-1;u>=0;u--){let p=n.getEndOffset(u);if(p<=l)break;if(pr(n.getStandardTokenType(u))||n.getLanguageId(u)!==a){l=p;break}}let d=Math.min(n.getLineContent().length,t.column-1+i.maxBracketLength);for(let u=r+1;u<s;u++){let p=n.getStartOffset(u);if(p>=d)break;if(pr(n.getStandardTokenType(u))||n.getLanguageId(u)!==a){d=p;break}}return{searchStartOffset:l,searchEndOffset:d}}_matchBracket(t,n){let i=t.lineNumber,r=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),a=r.findTokenIndexAtOffset(t.column-1);if(a<0)return null;let l=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(a)).brackets;if(l&&!pr(r.getStandardTokenType(a))){let{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(t,r,l,a),p=null;for(;;){let h=Xi.findNextBracketInRange(l.forwardRegex,i,s,d,u);if(!h)break;if(h.startColumn<=t.column&&t.column<=h.endColumn){let m=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,l.textIsBracket[m],l.textIsOpenBracket[m],n);if(g){if(g instanceof Ea)return null;p=g}}d=h.endColumn-1}if(p)return p}if(a>0&&r.getStartOffset(a)===t.column-1){let d=a-1,u=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(d)).brackets;if(u&&!pr(r.getStandardTokenType(d))){let{searchStartOffset:p,searchEndOffset:h}=this._establishBracketSearchOffsets(t,r,u,d),m=Xi.findPrevBracketInRange(u.reversedRegex,i,s,p,h);if(m&&m.startColumn<=t.column&&t.column<=m.endColumn){let g=s.substring(m.startColumn-1,m.endColumn-1).toLowerCase(),f=this._matchFoundBracket(m,u.textIsBracket[g],u.textIsOpenBracket[g],n);if(f)return f instanceof Ea?null:f}}}return null}_matchFoundBracket(t,n,i,r){if(!n)return null;let s=i?this._findMatchingBracketDown(n,t.getEndPosition(),r):this._findMatchingBracketUp(n,t.getStartPosition(),r);return s?s instanceof Ea?s:[t,s]:null}_findMatchingBracketUp(t,n,i){let r=t.languageId,s=t.reversedRegex,a=-1,l=0,d=(u,p,h,m)=>{for(;;){if(i&&++l%100===0&&!i())return Ea.INSTANCE;let g=Xi.findPrevBracketInRange(s,u,p,h,m);if(!g)break;let f=p.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(t.isOpen(f)?a++:t.isClose(f)&&a--,a===0)return g;m=g.startColumn-1}return null};for(let u=n.lineNumber;u>=1;u--){let p=this.textModel.tokenization.getLineTokens(u),h=p.getCount(),m=this.textModel.getLineContent(u),g=h-1,f=m.length,y=m.length;u===n.lineNumber&&(g=p.findTokenIndexAtOffset(n.column-1),f=n.column-1,y=n.column-1);let C=!0;for(;g>=0;g--){let w=p.getLanguageId(g)===r&&!pr(p.getStandardTokenType(g));if(w)C?f=p.getStartOffset(g):(f=p.getStartOffset(g),y=p.getEndOffset(g));else if(C&&f!==y){let R=d(u,m,f,y);if(R)return R}C=w}if(C&&f!==y){let w=d(u,m,f,y);if(w)return w}}return null}_findMatchingBracketDown(t,n,i){let r=t.languageId,s=t.forwardRegex,a=1,l=0,d=(p,h,m,g)=>{for(;;){if(i&&++l%100===0&&!i())return Ea.INSTANCE;let f=Xi.findNextBracketInRange(s,p,h,m,g);if(!f)break;let y=h.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(t.isOpen(y)?a++:t.isClose(y)&&a--,a===0)return f;m=f.endColumn-1}return null},u=this.textModel.getLineCount();for(let p=n.lineNumber;p<=u;p++){let h=this.textModel.tokenization.getLineTokens(p),m=h.getCount(),g=this.textModel.getLineContent(p),f=0,y=0,C=0;p===n.lineNumber&&(f=h.findTokenIndexAtOffset(n.column-1),y=n.column-1,C=n.column-1);let w=!0;for(;f<m;f++){let R=h.getLanguageId(f)===r&&!pr(h.getStandardTokenType(f));if(R)w||(y=h.getStartOffset(f)),C=h.getEndOffset(f);else if(w&&y!==C){let _=d(p,g,y,C);if(_)return _}w=R}if(w&&y!==C){let R=d(p,g,y,C);if(R)return R}}return null}findPrevBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(n)||null;let i=null,r=null,s=null;for(let a=n.lineNumber;a>=1;a--){let l=this.textModel.tokenization.getLineTokens(a),d=l.getCount(),u=this.textModel.getLineContent(a),p=d-1,h=u.length,m=u.length;if(a===n.lineNumber){p=l.findTokenIndexAtOffset(n.column-1),h=n.column-1,m=n.column-1;let f=l.getLanguageId(p);i!==f&&(i=f,r=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let g=!0;for(;p>=0;p--){let f=l.getLanguageId(p);if(i!==f){if(r&&s&&g&&h!==m){let C=Xi.findPrevBracketInRange(r.reversedRegex,a,u,h,m);if(C)return this._toFoundBracket(s,C);g=!1}i=f,r=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}let y=!!r&&!pr(l.getStandardTokenType(p));if(y)g?h=l.getStartOffset(p):(h=l.getStartOffset(p),m=l.getEndOffset(p));else if(s&&r&&g&&h!==m){let C=Xi.findPrevBracketInRange(r.reversedRegex,a,u,h,m);if(C)return this._toFoundBracket(s,C)}g=y}if(s&&r&&g&&h!==m){let f=Xi.findPrevBracketInRange(r.reversedRegex,a,u,h,m);if(f)return this._toFoundBracket(s,f)}}return null}findNextBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(n)||null;let i=this.textModel.getLineCount(),r=null,s=null,a=null;for(let l=n.lineNumber;l<=i;l++){let d=this.textModel.tokenization.getLineTokens(l),u=d.getCount(),p=this.textModel.getLineContent(l),h=0,m=0,g=0;if(l===n.lineNumber){h=d.findTokenIndexAtOffset(n.column-1),m=n.column-1,g=n.column-1;let y=d.getLanguageId(h);r!==y&&(r=y,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let f=!0;for(;h<u;h++){let y=d.getLanguageId(h);if(r!==y){if(a&&s&&f&&m!==g){let w=Xi.findNextBracketInRange(s.forwardRegex,l,p,m,g);if(w)return this._toFoundBracket(a,w);f=!1}r=y,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}let C=!!s&&!pr(d.getStandardTokenType(h));if(C)f||(m=d.getStartOffset(h)),g=d.getEndOffset(h);else if(a&&s&&f&&m!==g){let w=Xi.findNextBracketInRange(s.forwardRegex,l,p,m,g);if(w)return this._toFoundBracket(a,w)}f=C}if(a&&s&&f&&m!==g){let y=Xi.findNextBracketInRange(s.forwardRegex,l,p,m,g);if(y)return this._toFoundBracket(a,y)}}return null}findEnclosingBrackets(t,n){let i=this.textModel.validatePosition(t);if(this.canBuildAST){let g=P.fromPositions(i),f=this.getBracketPairsInRange(P.fromPositions(i,i)).findLast(y=>y.closingBracketRange!==void 0&&y.range.strictContainsRange(g));return f?[f.openingBracketRange,f.closingBracketRange]:null}let r=Bw(n),s=this.textModel.getLineCount(),a=new Map,l=[],d=(g,f)=>{if(!a.has(g)){let y=[];for(let C=0,w=f?f.brackets.length:0;C<w;C++)y[C]=0;a.set(g,y)}l=a.get(g)},u=0,p=(g,f,y,C,w)=>{for(;;){if(r&&++u%100===0&&!r())return Ea.INSTANCE;let R=Xi.findNextBracketInRange(g.forwardRegex,f,y,C,w);if(!R)break;let _=y.substring(R.startColumn-1,R.endColumn-1).toLowerCase(),B=g.textIsBracket[_];if(B&&(B.isOpen(_)?l[B.index]++:B.isClose(_)&&l[B.index]--,l[B.index]===-1))return this._matchFoundBracket(R,B,!1,r);C=R.endColumn-1}return null},h=null,m=null;for(let g=i.lineNumber;g<=s;g++){let f=this.textModel.tokenization.getLineTokens(g),y=f.getCount(),C=this.textModel.getLineContent(g),w=0,R=0,_=0;if(g===i.lineNumber){w=f.findTokenIndexAtOffset(i.column-1),R=i.column-1,_=i.column-1;let K=f.getLanguageId(w);h!==K&&(h=K,m=this.languageConfigurationService.getLanguageConfiguration(h).brackets,d(h,m))}let B=!0;for(;w<y;w++){let K=f.getLanguageId(w);if(h!==K){if(m&&B&&R!==_){let V=p(m,g,C,R,_);if(V)return Qv(V);B=!1}h=K,m=this.languageConfigurationService.getLanguageConfiguration(h).brackets,d(h,m)}let F=!!m&&!pr(f.getStandardTokenType(w));if(F)B||(R=f.getStartOffset(w)),_=f.getEndOffset(w);else if(m&&B&&R!==_){let V=p(m,g,C,R,_);if(V)return Qv(V)}B=F}if(m&&B&&R!==_){let K=p(m,g,C,R,_);if(K)return Qv(K)}}return null}_toFoundBracket(t,n){if(!n)return null;let i=this.textModel.getValueInRange(n);i=i.toLowerCase();let r=t.getBracketInfo(i);return r?{range:n,bracketInfo:r}:null}};function yW(o,e){return{object:o,dispose:()=>e?.dispose()}}function Bw(o){if(typeof o>"u")return()=>!0;{let e=Date.now();return()=>Date.now()-e<=o}}var Ea=class o{static INSTANCE=new o;_searchCanceledBrand=void 0;constructor(){}};function Qv(o){return o instanceof Ea?null:o}var IW={IconContribution:"base.contributions.icons"},SW;(e=>{function o(t,n){let i=t.defaults;for(;je.isThemeIcon(i);){let r=Fu.getIcon(i.id);if(!r)return;i=r.defaults}return i}e.getDefinition=o})(SW||={});var xW;(t=>{function o(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}t.toJSONObject=o;function e(n){let i=r=>gn(r)?r:void 0;if(n&&Array.isArray(n.src)&&n.src.every(r=>gn(r.format)&&gn(r.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(r=>({format:r.format,location:j.parse(r.location)}))}}t.fromJSONObject=e})(xW||={});var Vw=class{_onDidChange=new x;onDidChange=this._onDidChange.event;iconsById;iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:c("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:c("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}};iconReferenceSchema={type:"string",pattern:`^${je.iconNameExpression}$`,enum:[],enumDescriptions:[]};iconFontsById;constructor(){this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){let r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;let l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}let s={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];let t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){let n=this.iconFontsById[e];return n||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(r,s)=>r.id.localeCompare(s.id),t=r=>{for(;je.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let i=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(let r of i.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${je.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(let r of i.filter(s=>!je.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}},Fu=new Vw;Be.add(IW.IconContribution,Fu);function Dt(o,e,t,n){return Fu.registerIcon(o,e,t,n)}function EW(){let o=HE();for(let e in o){let t="\\"+o[e].toString(16);Fu.registerIcon(e,{fontCharacter:t})}}EW();var $R="vscode://schemas/icons",jR=Be.as(va.JSONContribution);jR.registerSchema($R,Fu.getIconSchema());var qR=new yi(()=>jR.notifySchemaChanged($R),200);Fu.onDidChange(()=>{qR.isScheduled()||qR.schedule()});var Kse=Dt("widget-close",Q.close,c("widgetClose","Icon for the close action in widgets.")),Gse=Dt("goto-previous-location",Q.arrowUp,c("previousChangeIcon","Icon for goto previous editor location.")),qse=Dt("goto-next-location",Q.arrowDown,c("nextChangeIcon","Icon for goto next editor location.")),Ww=je.modify(Q.sync,"spin"),YR=je.modify(Q.loading,"spin");function QR(o){return o==="hcDark"||o==="hcLight"}function Uw(o){return o==="dark"||o==="hcDark"}var en=H("themeService");var uae=Q.file,pae=Q.folder;var wW={ThemingContribution:"base.contributions.theming"},zw=class{themingParticipants=[];onThemingParticipantAddedEmitter;constructor(){this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new x}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),re(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}},XR=new zw;Be.add(wW.ThemingContribution,XR);function Zv(o){return XR.onColorThemeChange(o)}var Bu=class extends N{constructor(t){super();this.themeService=t;this.theme=t.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(n=>this.onThemeChange(n)))}theme;onThemeChange(t){this.theme=t,this.updateStyles()}updateStyles(){}getColor(t,n){let i=this.theme.getColor(t);return i&&n&&(i=n(i,this.theme)),i?i.toString():null}};function JR(o){return`--vscode-${o.replace(/\./g,"-")}`}function J(o){return`var(${JR(o)})`}function eA(o,e){return`var(${JR(o)}, ${e})`}function TW(o){return o!==null&&typeof o=="object"&&"light"in o&&"dark"in o}var kW={ColorContribution:"base.contributions.colors"},DW="default",Hw=class{_onDidChangeSchema=new x;onDidChangeSchema=this._onDidChangeSchema.event;colorsById;colorSchema={type:"object",properties:{}};colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]};constructor(){this.colorsById={}}notifyThemeUpdate(e){for(let t of Object.keys(this.colorsById)){let n=e.getColor(t);n&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body=`\${1:${n.toString()}}`)}this._onDidChangeSchema.fire()}registerColor(e,t,n,i=!1,r){let s={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:r};this.colorsById[e]=s;let a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),i&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=c("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:DW,description:c("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];let t=this.colorReferenceSchema.enum.indexOf(e);t!==-1&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let n=this.colorsById[e];if(n?.defaults){let i=TW(n.defaults)?n.defaults[t.type]:n.defaults;return Kr(i,t)}}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){let e=(t,n)=>{let i=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return i!==r?i-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}},Jv=new Hw;Be.add(kW.ColorContribution,Jv);function v(o,e,t,n,i){return Jv.registerColor(o,e,t,n,i)}function _W(o,e){switch(o.op){case 0:return Kr(o.value,e)?.darken(o.factor);case 1:return Kr(o.value,e)?.lighten(o.factor);case 2:return Kr(o.value,e)?.transparent(o.factor);case 3:{let t=Kr(o.background,e);return t?Kr(o.value,e)?.makeOpaque(t):Kr(o.value,e)}case 4:for(let t of o.values){let n=Kr(t,e);if(n)return n}return;case 6:return Kr(e.defines(o.if)?o.then:o.else,e);case 5:{let t=Kr(o.value,e);if(!t)return;let n=Kr(o.background,e);return n?t.isDarkerThan(n)?A.getLighterColor(t,n,o.factor).transparent(o.transparency):A.getDarkerColor(t,n,o.factor).transparent(o.transparency):t.transparent(o.factor*o.transparency)}default:throw Px(o)}}function Ni(o,e){return{op:0,value:o,factor:e}}function Zi(o,e){return{op:1,value:o,factor:e}}function ce(o,e){return{op:2,value:o,factor:e}}function Kw(...o){return{op:4,values:o}}function tA(o,e,t){return{op:6,if:o,then:e,else:t}}function Gw(o,e,t,n){return{op:5,value:o,background:e,factor:t,transparency:n}}function Kr(o,e){if(o!==null){if(typeof o=="string")return o[0]==="#"?A.fromHex(o):e.getColor(o);if(o instanceof A)return o;if(typeof o=="object")return _W(o,e)}}var nA="vscode://schemas/workbench-colors",iA=Be.as(va.JSONContribution);iA.registerSchema(nA,Jv.getColorSchema());var ZR=new yi(()=>iA.notifySchemaChanged(nA),200);Jv.onDidChangeSchema(()=>{ZR.isScheduled()||ZR.schedule()});var at=v("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},c("foreground","Overall foreground color. This color is only used if not overridden by a component.")),_ae=v("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},c("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),qw=v("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},c("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),Lae=v("descriptionForeground",{light:"#717171",dark:ce(at,.7),hcDark:ce(at,.7),hcLight:ce(at,.7)},c("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),zm=v("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},c("iconForeground","The default color for icons in the workbench.")),Fi=v("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},c("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),pe=v("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},c("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),It=v("contrastActiveBorder",{light:null,dark:null,hcDark:Fi,hcLight:Fi},c("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),Rae=v("selection.background",null,c("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),ey=v("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},c("textLinkForeground","Foreground color for links in text.")),Aae=v("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},c("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),Oae=v("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:A.black,hcLight:"#292929"},c("textSeparatorForeground","Color for text separators.")),Pae=v("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},c("textPreformatForeground","Foreground color for preformatted text segments.")),Mae=v("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},c("textPreformatBackground","Background color for preformatted text segments.")),Nae=v("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},c("textBlockQuoteBackground","Background color for block quotes in text.")),Fae=v("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:A.white,hcLight:"#292929"},c("textBlockQuoteBorder","Border color for block quotes in text.")),Bae=v("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:A.black,hcLight:"#F2F2F2"},c("textCodeBlockBackground","Background color for code blocks in text."));var Hae=v("sash.hoverBorder",Fi,c("sashActiveBorder","Border color of active sashes.")),Ol=v("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:A.black,hcLight:"#0F4A85"},c("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),ty=v("badge.foreground",{dark:A.white,light:"#333",hcDark:A.white,hcLight:A.white},c("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),Pl=v("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},c("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),ny=v("scrollbarSlider.background",{dark:A.fromHex("#797979").transparent(.4),light:A.fromHex("#646464").transparent(.4),hcDark:ce(pe,.6),hcLight:ce(pe,.4)},c("scrollbarSliderBackground","Scrollbar slider background color.")),iy=v("scrollbarSlider.hoverBackground",{dark:A.fromHex("#646464").transparent(.7),light:A.fromHex("#646464").transparent(.7),hcDark:ce(pe,.8),hcLight:ce(pe,.8)},c("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),oy=v("scrollbarSlider.activeBackground",{dark:A.fromHex("#BFBFBF").transparent(.4),light:A.fromHex("#000000").transparent(.6),hcDark:pe,hcLight:pe},c("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),oA=v("progressBar.background",{dark:A.fromHex("#0E70C0"),light:A.fromHex("#0E70C0"),hcDark:pe,hcLight:pe},c("progressBarBackground","Background color of the progress bar that can show for long running operations."));var gr=v("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:A.black,hcLight:A.white},c("editorBackground","Editor background color.")),Ml=v("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:A.white,hcLight:at},c("editorForeground","Editor default foreground color.")),Yae=v("editorStickyScroll.background",gr,c("editorStickyScrollBackground","Background color of sticky scroll in the editor")),Qae=v("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:A.fromHex("#0F4A85").transparent(.1)},c("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),Xae=v("editorStickyScroll.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("editorStickyScrollBorder","Border color of sticky scroll in the editor")),Zae=v("editorStickyScroll.shadow",Pl,c("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),oi=v("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:A.white},c("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Ls=v("editorWidget.foreground",at,c("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Qw=v("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:pe,hcLight:pe},c("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),Jae=v("editorWidget.resizeBorder",null,c("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),ele=v("editorError.background",null,c("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Km=v("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},c("editorError.foreground","Foreground color of error squigglies in the editor.")),tle=v("editorError.border",{dark:null,light:null,hcDark:A.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},c("errorBorder","If set, color of double underlines for errors in the editor.")),uA=v("editorWarning.background",null,c("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Ao=v("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},c("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),zu=v("editorWarning.border",{dark:null,light:null,hcDark:A.fromHex("#FFCC00").transparent(.8),hcLight:A.fromHex("#FFCC00").transparent(.8)},c("warningBorder","If set, color of double underlines for warnings in the editor.")),nle=v("editorInfo.background",null,c("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),fr=v("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},c("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Hu=v("editorInfo.border",{dark:null,light:null,hcDark:A.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},c("infoBorder","If set, color of double underlines for infos in the editor.")),ile=v("editorHint.foreground",{dark:A.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},c("editorHint.foreground","Foreground color of hint squigglies in the editor.")),ole=v("editorHint.border",{dark:null,light:null,hcDark:A.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},c("hintBorder","If set, color of double underlines for hints in the editor.")),rle=v("editorLink.activeForeground",{dark:"#4E94CE",light:A.blue,hcDark:A.cyan,hcLight:"#292929"},c("activeLinkForeground","Color of active links.")),Vu=v("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},c("editorSelectionBackground","Color of the editor selection.")),sle=v("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:A.white},c("editorSelectionForeground","Color of the selected text for high contrast.")),ale=v("editor.inactiveSelectionBackground",{light:ce(Vu,.5),dark:ce(Vu,.5),hcDark:ce(Vu,.7),hcLight:ce(Vu,.5)},c("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),lle=v("editor.selectionHighlightBackground",{light:Gw(Vu,gr,.3,.6),dark:Gw(Vu,gr,.3,.6),hcDark:null,hcLight:null},c("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),dle=v("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:It,hcLight:It},c("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),cle=v("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},c("editorFindMatch","Color of the current search match.")),ule=v("editor.findMatchForeground",null,c("editorFindMatchForeground","Text color of the current search match.")),Gr=v("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},c("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),ple=v("editor.findMatchHighlightForeground",null,c("findMatchHighlightForeground","Foreground color of the other search matches."),!0),hle=v("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},c("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),mle=v("editor.findMatchBorder",{light:null,dark:null,hcDark:It,hcLight:It},c("editorFindMatchBorder","Border color of the current search match.")),Nl=v("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:It,hcLight:It},c("findMatchHighlightBorder","Border color of the other search matches.")),gle=v("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:ce(It,.4),hcLight:ce(It,.4)},c("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),fle=v("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},c("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),rA=v("editorHoverWidget.background",oi,c("hoverBackground","Background color of the editor hover.")),ble=v("editorHoverWidget.foreground",Ls,c("hoverForeground","Foreground color of the editor hover.")),vle=v("editorHoverWidget.border",Qw,c("hoverBorder","Border color of the editor hover.")),yle=v("editorHoverWidget.statusBarBackground",{dark:Zi(rA,.2),light:Ni(rA,.05),hcDark:oi,hcLight:oi},c("statusBarBackground","Background color of the editor hover status bar.")),pA=v("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:A.white,hcLight:A.black},c("editorInlayHintForeground","Foreground color of inline hints")),hA=v("editorInlayHint.background",{dark:ce(Ol,.1),light:ce(Ol,.1),hcDark:ce(A.white,.1),hcLight:ce(Ol,.1)},c("editorInlayHintBackground","Background color of inline hints")),Ile=v("editorInlayHint.typeForeground",pA,c("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Sle=v("editorInlayHint.typeBackground",hA,c("editorInlayHintBackgroundTypes","Background color of inline hints for types")),xle=v("editorInlayHint.parameterForeground",pA,c("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),Ele=v("editorInlayHint.parameterBackground",hA,c("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),LW=v("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},c("editorLightBulbForeground","The color used for the lightbulb actions icon.")),Cle=v("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},c("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),wle=v("editorLightBulbAi.foreground",LW,c("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),Tle=v("editor.snippetTabstopHighlightBackground",{dark:new A(new Ge(124,124,124,.3)),light:new A(new Ge(10,50,100,.2)),hcDark:new A(new Ge(124,124,124,.3)),hcLight:new A(new Ge(10,50,100,.2))},c("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),kle=v("editor.snippetTabstopHighlightBorder",null,c("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),Dle=v("editor.snippetFinalTabstopHighlightBackground",null,c("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),_le=v("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new A(new Ge(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},c("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),sA=new A(new Ge(155,185,85,.2)),aA=new A(new Ge(255,0,0,.2)),Lle=v("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},c("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Rle=v("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},c("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Ale=v("diffEditor.insertedLineBackground",{dark:sA,light:sA,hcDark:null,hcLight:null},c("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Ole=v("diffEditor.removedLineBackground",{dark:aA,light:aA,hcDark:null,hcLight:null},c("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Ple=v("diffEditorGutter.insertedLineBackground",null,c("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),Mle=v("diffEditorGutter.removedLineBackground",null,c("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),Nle=v("diffEditorOverview.insertedForeground",null,c("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),Fle=v("diffEditorOverview.removedForeground",null,c("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),Ble=v("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},c("diffEditorInsertedOutline","Outline color for the text that got inserted.")),Vle=v("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},c("diffEditorRemovedOutline","Outline color for text that got removed.")),Wle=v("diffEditor.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("diffEditorBorder","Border color between the two text editors.")),Ule=v("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},c("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),zle=v("diffEditor.unchangedRegionBackground","sideBar.background",c("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),Hle=v("diffEditor.unchangedRegionForeground","foreground",c("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),Kle=v("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},c("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),Ku=v("widget.shadow",{dark:ce(A.black,.36),light:ce(A.black,.16),hcDark:null,hcLight:null},c("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Gm=v("widget.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("widgetBorder","Border color of widgets such as find/replace inside the editor.")),Hm=v("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},c("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),Gle=v("toolbar.hoverOutline",{dark:null,light:null,hcDark:It,hcLight:It},c("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),qle=v("toolbar.activeBackground",{dark:Zi(Hm,.1),light:Ni(Hm,.1),hcDark:null,hcLight:null},c("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),mA=v("breadcrumb.foreground",ce(at,.8),c("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),gA=v("breadcrumb.background",gr,c("breadcrumbsBackground","Background color of breadcrumb items.")),Xw=v("breadcrumb.focusForeground",{light:Ni(at,.2),dark:Zi(at,.1),hcDark:Zi(at,.1),hcLight:Zi(at,.1)},c("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),fA=v("breadcrumb.activeSelectionForeground",{light:Ni(at,.2),dark:Zi(at,.1),hcDark:Zi(at,.1),hcLight:Zi(at,.1)},c("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),$le=v("breadcrumbPicker.background",oi,c("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),bA=.5,lA=A.fromHex("#40C8AE").transparent(bA),dA=A.fromHex("#40A6FF").transparent(bA),cA=A.fromHex("#606060").transparent(.4),Zw=.4,Wu=1,$w=v("merge.currentHeaderBackground",{dark:lA,light:lA,hcDark:null,hcLight:null},c("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),jle=v("merge.currentContentBackground",ce($w,Zw),c("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),jw=v("merge.incomingHeaderBackground",{dark:dA,light:dA,hcDark:null,hcLight:null},c("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Yle=v("merge.incomingContentBackground",ce(jw,Zw),c("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Yw=v("merge.commonHeaderBackground",{dark:cA,light:cA,hcDark:null,hcLight:null},c("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Qle=v("merge.commonContentBackground",ce(Yw,Zw),c("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Uu=v("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},c("mergeBorder","Border color on headers and the splitter in inline merge-conflicts.")),Xle=v("editorOverviewRuler.currentContentForeground",{dark:ce($w,Wu),light:ce($w,Wu),hcDark:Uu,hcLight:Uu},c("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),Zle=v("editorOverviewRuler.incomingContentForeground",{dark:ce(jw,Wu),light:ce(jw,Wu),hcDark:Uu,hcLight:Uu},c("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),Jle=v("editorOverviewRuler.commonContentForeground",{dark:ce(Yw,Wu),light:ce(Yw,Wu),hcDark:Uu,hcLight:Uu},c("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),ede=v("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},c("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),tde=v("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",c("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),vA=v("problemsErrorIcon.foreground",Km,c("problemsErrorIconForeground","The color used for the problems error icon.")),yA=v("problemsWarningIcon.foreground",Ao,c("problemsWarningIconForeground","The color used for the problems warning icon.")),IA=v("problemsInfoIcon.foreground",fr,c("problemsInfoIconForeground","The color used for the problems info icon."));var SA=v("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},c("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),ade=v("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},c("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),lde=v("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},c("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),dde=v("minimap.infoHighlight",{dark:fr,light:fr,hcDark:Hu,hcLight:Hu},c("minimapInfo","Minimap marker color for infos.")),cde=v("minimap.warningHighlight",{dark:Ao,light:Ao,hcDark:zu,hcLight:zu},c("overviewRuleWarning","Minimap marker color for warnings.")),ude=v("minimap.errorHighlight",{dark:new A(new Ge(255,18,18,.7)),light:new A(new Ge(255,18,18,.7)),hcDark:new A(new Ge(255,50,50,1)),hcLight:"#B5200D"},c("minimapError","Minimap marker color for errors.")),pde=v("minimap.background",null,c("minimapBackground","Minimap background color.")),hde=v("minimap.foregroundOpacity",A.fromHex("#000f"),c("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),mde=v("minimapSlider.background",ce(ny,.5),c("minimapSliderBackground","Minimap slider background color.")),gde=v("minimapSlider.hoverBackground",ce(iy,.5),c("minimapSliderHoverBackground","Minimap slider background color when hovering.")),fde=v("minimapSlider.activeBackground",ce(oy,.5),c("minimapSliderActiveBackground","Minimap slider background color when clicked on."));var xde=v("charts.foreground",at,c("chartsForeground","The foreground color used in charts.")),Ede=v("charts.lines",ce(at,.5),c("chartsLines","The color used for horizontal lines in charts.")),Cde=v("charts.red",Km,c("chartsRed","The red color used in chart visualizations.")),wde=v("charts.blue",fr,c("chartsBlue","The blue color used in chart visualizations.")),Tde=v("charts.yellow",Ao,c("chartsYellow","The yellow color used in chart visualizations.")),kde=v("charts.orange",SA,c("chartsOrange","The orange color used in chart visualizations.")),Dde=v("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},c("chartsGreen","The green color used in chart visualizations.")),_de=v("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},c("chartsPurple","The purple color used in chart visualizations."));var xA=v("input.background",{dark:"#3C3C3C",light:A.white,hcDark:A.black,hcLight:A.white},c("inputBoxBackground","Input box background.")),EA=v("input.foreground",at,c("inputBoxForeground","Input box foreground.")),$u=v("input.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("inputBoxBorder","Input box border.")),Jw=v("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:pe,hcLight:pe},c("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),RW=v("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},c("inputOption.hoverBackground","Background color of activated options in input fields.")),eT=v("inputOption.activeBackground",{dark:ce(Fi,.4),light:ce(Fi,.2),hcDark:A.transparent,hcLight:A.transparent},c("inputOption.activeBackground","Background hover color of options in input fields.")),tT=v("inputOption.activeForeground",{dark:A.white,light:A.black,hcDark:at,hcLight:at},c("inputOption.activeForeground","Foreground color of activated options in input fields.")),Mde=v("input.placeholderForeground",{light:ce(at,.5),dark:ce(at,.5),hcDark:ce(at,.7),hcLight:ce(at,.7)},c("inputPlaceholderForeground","Input box foreground color for placeholder text.")),CA=v("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:A.black,hcLight:A.white},c("inputValidationInfoBackground","Input validation background color for information severity.")),wA=v("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:at},c("inputValidationInfoForeground","Input validation foreground color for information severity.")),TA=v("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:pe,hcLight:pe},c("inputValidationInfoBorder","Input validation border color for information severity.")),kA=v("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:A.black,hcLight:A.white},c("inputValidationWarningBackground","Input validation background color for warning severity.")),DA=v("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:at},c("inputValidationWarningForeground","Input validation foreground color for warning severity.")),_A=v("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:pe,hcLight:pe},c("inputValidationWarningBorder","Input validation border color for warning severity.")),LA=v("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:A.black,hcLight:A.white},c("inputValidationErrorBackground","Input validation background color for error severity.")),RA=v("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:at},c("inputValidationErrorForeground","Input validation foreground color for error severity.")),AA=v("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:pe,hcLight:pe},c("inputValidationErrorBorder","Input validation border color for error severity.")),ju=v("dropdown.background",{dark:"#3C3C3C",light:A.white,hcDark:A.black,hcLight:A.white},c("dropdownBackground","Dropdown background.")),OA=v("dropdown.listBackground",{dark:null,light:null,hcDark:A.black,hcLight:A.white},c("dropdownListBackground","Dropdown list background.")),qm=v("dropdown.foreground",{dark:"#F0F0F0",light:at,hcDark:A.white,hcLight:at},c("dropdownForeground","Dropdown foreground.")),$m=v("dropdown.border",{dark:ju,light:"#CECECE",hcDark:pe,hcLight:pe},c("dropdownBorder","Dropdown border.")),nT=v("button.foreground",A.white,c("buttonForeground","Button foreground color.")),PA=v("button.separator",ce(nT,.4),c("buttonSeparator","Button separator color.")),Gu=v("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},c("buttonBackground","Button background color.")),MA=v("button.hoverBackground",{dark:Zi(Gu,.2),light:Ni(Gu,.2),hcDark:Gu,hcLight:Gu},c("buttonHoverBackground","Button background color when hovering.")),NA=v("button.border",pe,c("buttonBorder","Button border color.")),FA=v("button.secondaryForeground",{dark:A.white,light:A.white,hcDark:A.white,hcLight:at},c("buttonSecondaryForeground","Secondary button foreground color.")),ry=v("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:A.white},c("buttonSecondaryBackground","Secondary button background color.")),BA=v("button.secondaryHoverBackground",{dark:Zi(ry,.2),light:Ni(ry,.2),hcDark:null,hcLight:null},c("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),qu=v("radio.activeForeground",tT,c("radioActiveForeground","Foreground color of active radio option.")),VA=v("radio.activeBackground",eT,c("radioBackground","Background color of active radio option.")),WA=v("radio.activeBorder",Jw,c("radioActiveBorder","Border color of the active radio option.")),UA=v("radio.inactiveForeground",null,c("radioInactiveForeground","Foreground color of inactive radio option.")),zA=v("radio.inactiveBackground",null,c("radioInactiveBackground","Background color of inactive radio option.")),HA=v("radio.inactiveBorder",{light:ce(qu,.2),dark:ce(qu,.2),hcDark:ce(qu,.4),hcLight:ce(qu,.2)},c("radioInactiveBorder","Border color of the inactive radio option.")),KA=v("radio.inactiveHoverBackground",RW,c("radioHoverBackground","Background color of inactive active radio option when hovering.")),GA=v("checkbox.background",ju,c("checkbox.background","Background color of checkbox widget.")),Nde=v("checkbox.selectBackground",oi,c("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),qA=v("checkbox.foreground",qm,c("checkbox.foreground","Foreground color of checkbox widget.")),$A=v("checkbox.border",$m,c("checkbox.border","Border color of checkbox widget.")),Fde=v("checkbox.selectBorder",zm,c("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),jA=v("keybindingLabel.background",{dark:new A(new Ge(128,128,128,.17)),light:new A(new Ge(221,221,221,.4)),hcDark:A.transparent,hcLight:A.transparent},c("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),YA=v("keybindingLabel.foreground",{dark:A.fromHex("#CCCCCC"),light:A.fromHex("#555555"),hcDark:A.white,hcLight:at},c("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),QA=v("keybindingLabel.border",{dark:new A(new Ge(51,51,51,.6)),light:new A(new Ge(204,204,204,.4)),hcDark:new A(new Ge(111,195,223)),hcLight:pe},c("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),XA=v("keybindingLabel.bottomBorder",{dark:new A(new Ge(68,68,68,.6)),light:new A(new Ge(187,187,187,.4)),hcDark:new A(new Ge(111,195,223)),hcLight:at},c("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut."));var ZA=v("list.focusBackground",null,c("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),JA=v("list.focusForeground",null,c("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eO=v("list.focusOutline",{dark:Fi,light:Fi,hcDark:It,hcLight:It},c("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),tO=v("list.focusAndSelectionOutline",null,c("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),bo=v("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:A.fromHex("#0F4A85").transparent(.1)},c("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Rs=v("list.activeSelectionForeground",{dark:A.white,light:A.white,hcDark:null,hcLight:null},c("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ay=v("list.activeSelectionIconForeground",null,c("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nO=v("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:A.fromHex("#0F4A85").transparent(.1)},c("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),iO=v("list.inactiveSelectionForeground",null,c("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),oO=v("list.inactiveSelectionIconForeground",null,c("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),rO=v("list.inactiveFocusBackground",null,c("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),sO=v("list.inactiveFocusOutline",null,c("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),iT=v("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:A.white.transparent(.1),hcLight:A.fromHex("#0F4A85").transparent(.1)},c("listHoverBackground","List/Tree background when hovering over items using the mouse.")),oT=v("list.hoverForeground",null,c("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),aO=v("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},c("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),lO=v("list.dropBetweenBackground",{dark:zm,light:zm,hcDark:null,hcLight:null},c("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),sy=v("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Fi,hcLight:Fi},c("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Hde=v("list.focusHighlightForeground",{dark:sy,light:tA(bo,sy,"#BBE7FF"),hcDark:sy,hcLight:sy},c("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),Kde=v("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},c("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),Gde=v("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},c("listErrorForeground","Foreground color of list items containing errors.")),qde=v("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},c("listWarningForeground","Foreground color of list items containing warnings.")),dO=v("listFilterWidget.background",{light:Ni(oi,0),dark:Zi(oi,0),hcDark:oi,hcLight:oi},c("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),cO=v("listFilterWidget.outline",{dark:A.transparent,light:A.transparent,hcDark:"#f38518",hcLight:"#007ACC"},c("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),uO=v("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:pe,hcLight:pe},c("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),pO=v("listFilterWidget.shadow",Ku,c("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),$de=v("list.filterMatchBackground",{dark:Gr,light:Gr,hcDark:null,hcLight:null},c("listFilterMatchHighlight","Background color of the filtered match.")),jde=v("list.filterMatchBorder",{dark:Nl,light:Nl,hcDark:pe,hcLight:It},c("listFilterMatchHighlightBorder","Border color of the filtered match.")),Yde=v("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},c("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized.")),Yu=v("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},c("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),hO=v("tree.inactiveIndentGuidesStroke",ce(Yu,.4),c("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),mO=v("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},c("tableColumnsBorder","Table border color between columns.")),gO=v("tree.tableOddRowsBackground",{dark:ce(at,.04),light:ce(at,.04),hcDark:null,hcLight:null},c("tableOddRowsBackgroundColor","Background color for odd table rows.")),Qde=v("editorActionList.background",oi,c("editorActionListBackground","Action List background color.")),Xde=v("editorActionList.foreground",Ls,c("editorActionListForeground","Action List foreground color.")),Zde=v("editorActionList.focusForeground",Rs,c("editorActionListFocusForeground","Action List foreground color for the focused item.")),Jde=v("editorActionList.focusBackground",bo,c("editorActionListFocusBackground","Action List background color for the focused item."));var fO=v("menu.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("menuBorder","Border color of menus.")),bO=v("menu.foreground",qm,c("menuForeground","Foreground color of menu items.")),vO=v("menu.background",ju,c("menuBackground","Background color of menu items.")),yO=v("menu.selectionForeground",Rs,c("menuSelectionForeground","Foreground color of the selected menu item in menus.")),IO=v("menu.selectionBackground",bo,c("menuSelectionBackground","Background color of the selected menu item in menus.")),SO=v("menu.selectionBorder",{dark:null,light:null,hcDark:It,hcLight:It},c("menuSelectionBorder","Border color of the selected menu item in menus.")),xO=v("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:pe,hcLight:pe},c("menuSeparatorBackground","Color of a separator menu item in menus."));var cce=v("quickInput.background",oi,c("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),uce=v("quickInput.foreground",Ls,c("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),pce=v("quickInputTitle.background",{dark:new A(new Ge(255,255,255,.105)),light:new A(new Ge(0,0,0,.06)),hcDark:"#000000",hcLight:A.white},c("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),CO=v("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:A.white,hcLight:"#0F4A85"},c("pickerGroupForeground","Quick picker color for grouping labels.")),hce=v("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:A.white,hcLight:"#0F4A85"},c("pickerGroupBorder","Quick picker color for grouping borders.")),EO=v("quickInput.list.focusBackground",null,"",void 0,c("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),wO=v("quickInputList.focusForeground",Rs,c("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),TO=v("quickInputList.focusIconForeground",ay,c("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),kO=v("quickInputList.focusBackground",{dark:Kw(EO,bo),light:Kw(EO,bo),hcDark:null,hcLight:null},c("quickInput.listFocusBackground","Quick picker background color for the focused item."));var vce=v("search.resultsInfoForeground",{light:at,dark:ce(at,.65),hcDark:at,hcLight:at},c("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),yce=v("searchEditor.findMatchBackground",{light:ce(Gr,.66),dark:ce(Gr,.66),hcDark:Gr,hcLight:Gr},c("searchEditor.queryMatch","Color of the Search Editor query matches.")),Ice=v("searchEditor.findMatchBorder",{light:ce(Nl,.66),dark:ce(Nl,.66),hcDark:Nl,hcLight:Nl},c("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var AW=v("editor.lineHighlightBackground",null,c("lineHighlight","Background color for the highlight of line at the cursor position.")),Fce=v("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:pe},c("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),Bce=v("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},c("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),Vce=v("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:It,hcLight:It},c("rangeHighlightBorder","Background color of the border around highlighted ranges.")),Wce=v("editor.symbolHighlightBackground",{dark:Gr,light:Gr,hcDark:null,hcLight:null},c("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),Uce=v("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:It,hcLight:It},c("symbolHighlightBorder","Background color of the border around highlighted symbols.")),DO=v("editorCursor.foreground",{dark:"#AEAFAD",light:A.black,hcDark:A.white,hcLight:"#0F4A85"},c("caret","Color of the editor cursor.")),_O=v("editorCursor.background",null,c("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),zce=v("editorMultiCursor.primary.foreground",DO,c("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),Hce=v("editorMultiCursor.primary.background",_O,c("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Kce=v("editorMultiCursor.secondary.foreground",DO,c("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),Gce=v("editorMultiCursor.secondary.background",_O,c("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),LO=v("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},c("editorWhitespaces","Color of whitespace characters in the editor.")),qce=v("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:A.white,hcLight:"#292929"},c("editorLineNumbers","Color of editor line numbers.")),OW=v("editorIndentGuide.background",LO,c("editorIndentGuides","Color of the editor indentation guides."),!1,c("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),PW=v("editorIndentGuide.activeBackground",LO,c("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,c("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),$ce=v("editorIndentGuide.background1",OW,c("editorIndentGuides1","Color of the editor indentation guides (1).")),jce=v("editorIndentGuide.background2","#00000000",c("editorIndentGuides2","Color of the editor indentation guides (2).")),Yce=v("editorIndentGuide.background3","#00000000",c("editorIndentGuides3","Color of the editor indentation guides (3).")),Qce=v("editorIndentGuide.background4","#00000000",c("editorIndentGuides4","Color of the editor indentation guides (4).")),Xce=v("editorIndentGuide.background5","#00000000",c("editorIndentGuides5","Color of the editor indentation guides (5).")),Zce=v("editorIndentGuide.background6","#00000000",c("editorIndentGuides6","Color of the editor indentation guides (6).")),Jce=v("editorIndentGuide.activeBackground1",PW,c("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),eue=v("editorIndentGuide.activeBackground2","#00000000",c("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),tue=v("editorIndentGuide.activeBackground3","#00000000",c("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),nue=v("editorIndentGuide.activeBackground4","#00000000",c("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),iue=v("editorIndentGuide.activeBackground5","#00000000",c("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),oue=v("editorIndentGuide.activeBackground6","#00000000",c("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),MW=v("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:It,hcLight:It},c("editorActiveLineNumber","Color of editor active line number"),!1,c("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),rue=v("editorLineNumber.activeForeground",MW,c("editorActiveLineNumber","Color of editor active line number")),sue=v("editorLineNumber.dimmedForeground",null,c("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),aue=v("editorRuler.foreground",{dark:"#5A5A5A",light:A.lightgrey,hcDark:A.white,hcLight:"#292929"},c("editorRuler","Color of the editor rulers.")),lue=v("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},c("editorCodeLensForeground","Foreground color of editor CodeLens")),due=v("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},c("editorBracketMatchBackground","Background color behind matching brackets")),cue=v("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:pe,hcLight:pe},c("editorBracketMatchBorder","Color for matching brackets boxes")),uue=v("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},c("editorOverviewRulerBorder","Color of the overview ruler border.")),pue=v("editorOverviewRuler.background",null,c("editorOverviewRulerBackground","Background color of the editor overview ruler.")),hue=v("editorGutter.background",gr,c("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),mue=v("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:A.fromHex("#fff").transparent(.8),hcLight:pe},c("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),gue=v("editorUnnecessaryCode.opacity",{dark:A.fromHex("#000a"),light:A.fromHex("#0007"),hcDark:null,hcLight:null},c("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),fue=v("editorGhostText.border",{dark:null,light:null,hcDark:A.fromHex("#fff").transparent(.8),hcLight:A.fromHex("#292929").transparent(.8)},c("editorGhostTextBorder","Border color of ghost text in the editor.")),bue=v("editorGhostText.foreground",{dark:A.fromHex("#ffffff56"),light:A.fromHex("#0007"),hcDark:null,hcLight:null},c("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),vue=v("editorGhostText.background",null,c("editorGhostTextBackground","Background color of the ghost text in the editor.")),NW=new A(new Ge(0,122,204,.6)),yue=v("editorOverviewRuler.rangeHighlightForeground",NW,c("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Iue=v("editorOverviewRuler.errorForeground",{dark:new A(new Ge(255,18,18,.7)),light:new A(new Ge(255,18,18,.7)),hcDark:new A(new Ge(255,50,50,1)),hcLight:"#B5200D"},c("overviewRuleError","Overview ruler marker color for errors.")),Sue=v("editorOverviewRuler.warningForeground",{dark:Ao,light:Ao,hcDark:zu,hcLight:zu},c("overviewRuleWarning","Overview ruler marker color for warnings.")),xue=v("editorOverviewRuler.infoForeground",{dark:fr,light:fr,hcDark:Hu,hcLight:Hu},c("overviewRuleInfo","Overview ruler marker color for infos.")),RO=v("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},c("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),AO=v("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},c("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),OO=v("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},c("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),PO=v("editorBracketHighlight.foreground4","#00000000",c("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),MO=v("editorBracketHighlight.foreground5","#00000000",c("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),NO=v("editorBracketHighlight.foreground6","#00000000",c("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),FO=v("editorBracketHighlight.unexpectedBracket.foreground",{dark:new A(new Ge(255,18,18,.8)),light:new A(new Ge(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},c("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),Eue=v("editorBracketPairGuide.background1","#00000000",c("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Cue=v("editorBracketPairGuide.background2","#00000000",c("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),wue=v("editorBracketPairGuide.background3","#00000000",c("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Tue=v("editorBracketPairGuide.background4","#00000000",c("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),kue=v("editorBracketPairGuide.background5","#00000000",c("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Due=v("editorBracketPairGuide.background6","#00000000",c("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),_ue=v("editorBracketPairGuide.activeBackground1","#00000000",c("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Lue=v("editorBracketPairGuide.activeBackground2","#00000000",c("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Rue=v("editorBracketPairGuide.activeBackground3","#00000000",c("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Aue=v("editorBracketPairGuide.activeBackground4","#00000000",c("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Oue=v("editorBracketPairGuide.activeBackground5","#00000000",c("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Pue=v("editorBracketPairGuide.activeBackground6","#00000000",c("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),Mue=v("editorUnicodeHighlight.border",Ao,c("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),Nue=v("editorUnicodeHighlight.background",uA,c("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Zv((o,e)=>{let t=o.getColor(gr),n=o.getColor(AW),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)});var ly=class extends N{constructor(t){super();this.textModel=t;this.colorizationOptions=t.getOptions().bracketPairColorizationOptions,this._register(t.bracketPairs.onDidChange(n=>{this.onDidChangeEmitter.fire()}))}colorizationOptions;colorProvider=new dy;onDidChangeEmitter=new x;onDidChange=this.onDidChangeEmitter.event;handleDidChangeOptions(t){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(t,n,i,r){return r?[]:n===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(t,!0).map(a=>({id:`bracket${a.range.toString()}-${a.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(a,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:a.range})).toArray():[]}getAllDecorations(t,n){return t===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new P(1,1,this.textModel.getLineCount(),1),t,n):[]}},dy=class{unexpectedClosingBracketClassName="unexpected-closing-bracket";getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};Zv((o,e)=>{let t=[RO,AO,OO,PO,MO,NO],n=new dy;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${o.getColor(FO)}; }`);let i=t.map(r=>o.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){let s=i[r%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${s}; }`)}});function Qu(o){return o.toString()}var vo=class o{constructor(e,t,n,i,r,s,a){this.beforeVersionId=e;this.afterVersionId=t;this.beforeEOL=n;this.afterEOL=i;this.beforeCursorState=r;this.afterCursorState=s;this.changes=a}static create(e,t){let n=e.getAlternativeVersionId(),i=aT(e);return new o(n,n,i,i,t,t,[])}append(e,t,n,i,r){t.length>0&&(this.changes=JL(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Kn(e,t?t.length:0,n),n+=4,t)for(let i of t)Kn(e,i.selectionStartLineNumber,n),n+=4,Kn(e,i.selectionStartColumn,n),n+=4,Kn(e,i.positionLineNumber,n),n+=4,Kn(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){let i=Hn(e,t);t+=4;for(let r=0;r<i;r++){let s=Hn(e,t);t+=4;let a=Hn(e,t);t+=4;let l=Hn(e,t);t+=4;let d=Hn(e,t);t+=4,n.push(new Je(s,a,l,d))}return t}serialize(){let e=10+o._writeSelectionsSize(this.beforeCursorState)+o._writeSelectionsSize(this.afterCursorState)+4;for(let i of this.changes)e+=i.writeSize();let t=new Uint8Array(e),n=0;Kn(t,this.beforeVersionId,n),n+=4,Kn(t,this.afterVersionId,n),n+=4,Jb(t,this.beforeEOL,n),n+=1,Jb(t,this.afterEOL,n),n+=1,n=o._writeSelections(t,this.beforeCursorState,n),n=o._writeSelections(t,this.afterCursorState,n),Kn(t,this.changes.length,n),n+=4;for(let i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){let t=new Uint8Array(e),n=0,i=Hn(t,n);n+=4;let r=Hn(t,n);n+=4;let s=Zb(t,n);n+=1;let a=Zb(t,n);n+=1;let l=[];n=o._readSelections(t,n,l);let d=[];n=o._readSelections(t,n,d);let u=Hn(t,n);n+=4;let p=[];for(let h=0;h<u;h++)n=Do.read(t,n,p);return new o(i,r,s,a,l,d,p)}},cy=class{constructor(e,t,n,i){this.label=e;this.code=t;this.model=n,this._data=vo.create(n,i)}model;_data;get type(){return 0}get resource(){return j.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof vo?this._data:vo.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(j.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof vo}append(e,t,n,i,r){this._data instanceof vo&&this._data.append(e,t,n,i,r)}close(){this._data instanceof vo&&(this._data=this._data.serialize())}open(){this._data instanceof vo||(this._data=vo.deserialize(this._data))}undo(){if(j.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof vo&&(this._data=this._data.serialize());let e=vo.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(j.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof vo&&(this._data=this._data.serialize());let e=vo.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof vo&&(this._data=this._data.serialize()),this._data.byteLength+168}},sT=class{constructor(e,t,n){this.label=e;this.code=t;this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(let i of this._editStackElementsArr){let r=Qu(i.resource);this._editStackElementsMap.set(r,i)}this._delegate=null}type=1;_isOpen;_editStackElementsArr;_editStackElementsMap;_delegate;get resources(){return this._editStackElementsArr.map(e=>e.resource)}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){let e=[];for(let t of this._editStackElementsArr)j.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){let t=Qu(e);return this._editStackElementsMap.has(t)}setModel(e){let t=Qu(j.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=Qu(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,r){let s=Qu(e.uri);this._editStackElementsMap.get(s).append(e,t,n,i,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=Qu(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${Ri(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};function aT(o){return o.getEOL()===`
`?0:1}function rT(o){return o?o instanceof cy||o instanceof sT:!1}var uy=class o{_model;_undoRedoService;constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);rT(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);rT(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){let n=this._undoRedoService.getLastElement(this._model.uri);if(rT(n)&&n.canAppend(this._model))return n;let i=new cy(c("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){let t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],aT(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,i){let r=this._getOrCreateEditStackElement(e,i),s=this._model.applyEdits(t,!0),a=o._computeCursorState(n,s),l=s.map((d,u)=>({index:u,textChange:d.textChange}));return l.sort((d,u)=>d.textChange.oldPosition===u.textChange.oldPosition?d.index-u.index:d.textChange.oldPosition-u.textChange.oldPosition),r.append(this._model,l.map(d=>d.textChange),aT(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return bt(n),null}}};var Xu=class extends N{_isDisposed=!1;dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}};function VO(o,e){let t=0,n=0,i=o.length;for(;n<i;){let r=o.charCodeAt(n);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;n++}return n===i?-1:t}var py=class extends Xu{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}getLanguageConfiguration(t){return this.languageConfigurationService.getLanguageConfiguration(t)}_computeIndentLevel(t){return VO(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(t,n,i){this.assertNotDisposed();let r=this.textModel.getLineCount();if(t<1||t>r)throw new ut("Illegal value for lineNumber");let s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=-2,d=-1,u=-2,p=-1,h=V=>{if(l!==-1&&(l===-2||l>V-1)){l=-1,d=-1;for(let oe=V-2;oe>=0;oe--){let ge=this._computeIndentLevel(oe);if(ge>=0){l=oe,d=ge;break}}}if(u===-2){u=-1,p=-1;for(let oe=V;oe<r;oe++){let ge=this._computeIndentLevel(oe);if(ge>=0){u=oe,p=ge;break}}}},m=-2,g=-1,f=-2,y=-1,C=V=>{if(m===-2){m=-1,g=-1;for(let oe=V-2;oe>=0;oe--){let ge=this._computeIndentLevel(oe);if(ge>=0){m=oe,g=ge;break}}}if(f!==-1&&(f===-2||f<V-1)){f=-1,y=-1;for(let oe=V;oe<r;oe++){let ge=this._computeIndentLevel(oe);if(ge>=0){f=oe,y=ge;break}}}},w=0,R=!0,_=0,B=!0,K=0,F=0;for(let V=0;R||B;V++){let oe=t-V,ge=t+V;V>1&&(oe<1||oe<n)&&(R=!1),V>1&&(ge>r||ge>i)&&(B=!1),V>5e4&&(R=!1,B=!1);let we=-1;if(R&&oe>=1){let tt=this._computeIndentLevel(oe-1);tt>=0?(u=oe-1,p=tt,we=Math.ceil(tt/this.textModel.getOptions().indentSize)):(h(oe),we=this._getIndentLevelForWhitespaceLine(a,d,p))}let ht=-1;if(B&&ge<=r){let tt=this._computeIndentLevel(ge-1);tt>=0?(m=ge-1,g=tt,ht=Math.ceil(tt/this.textModel.getOptions().indentSize)):(C(ge),ht=this._getIndentLevelForWhitespaceLine(a,g,y))}if(V===0){F=we;continue}if(V===1){if(ge<=r&&ht>=0&&F+1===ht){R=!1,w=ge,_=ge,K=ht;continue}if(oe>=1&&we>=0&&we-1===F){B=!1,w=oe,_=oe,K=we;continue}if(w=t,_=t,K=F,K===0)return{startLineNumber:w,endLineNumber:_,indent:K}}R&&(we>=K?w=oe:R=!1),B&&(ht>=K?_=ge:B=!1)}return{startLineNumber:w,endLineNumber:_,indent:K}}getLinesBracketGuides(t,n,i,r){let s=[];for(let h=t;h<=n;h++)s.push([]);let a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new P(t,1,n,this.textModel.getLineMaxColumn(n))).toArray(),d;if(i&&l.length>0){let h=(t<=i.lineNumber&&i.lineNumber<=n?l:this.textModel.bracketPairs.getBracketPairsInRange(P.fromPositions(i)).toArray()).filter(m=>P.strictContainsPosition(m.range,i));d=JD(h,m=>a||m.range.startLineNumber!==m.range.endLineNumber)?.range}let u=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,p=new lT;for(let h of l){if(!h.closingBracketRange)continue;let m=d&&h.range.equalsRange(d);if(!m&&!r.includeInactive)continue;let g=p.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,u)+(r.highlightActive&&m?" "+p.activeClassName:""),f=h.openingBracketRange.getStartPosition(),y=h.closingBracketRange.getStartPosition(),C=r.horizontalGuides===2||r.horizontalGuides===1&&m;if(h.range.startLineNumber===h.range.endLineNumber){a&&C&&s[h.range.startLineNumber-t].push(new qd(-1,h.openingBracketRange.getEndPosition().column,g,new Au(!1,y.column),-1,-1));continue}let w=this.getVisibleColumnFromPosition(y),R=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),_=Math.min(R,w,h.minVisibleColumnIndentation+1),B=!1;qi(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(B=!0);let V=Math.max(f.lineNumber,t),oe=Math.min(y.lineNumber,n),ge=B?1:0;for(let we=V;we<oe+ge;we++)s[we-t].push(new qd(_,-1,g,null,we===f.lineNumber?f.column:-1,we===y.lineNumber?y.column:-1));C&&(f.lineNumber>=t&&R>_&&s[f.lineNumber-t].push(new qd(_,-1,g,new Au(!1,f.column),-1,-1)),y.lineNumber<=n&&w>_&&s[y.lineNumber-t].push(new qd(_,-1,g,new Au(!B,y.column),-1,-1)))}for(let h of s)h.sort((m,g)=>m.visibleColumn-g.visibleColumn);return s}getVisibleColumnFromPosition(t){return un.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(t,n){this.assertNotDisposed();let i=this.textModel.getLineCount();if(t<1||t>i)throw new Error("Illegal value for startLineNumber");if(n<1||n>i)throw new Error("Illegal value for endLineNumber");let r=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=new Array(n-t+1),d=-2,u=-1,p=-2,h=-1;for(let m=t;m<=n;m++){let g=m-t,f=this._computeIndentLevel(m-1);if(f>=0){d=m-1,u=f,l[g]=Math.ceil(f/r.indentSize);continue}if(d===-2){d=-1,u=-1;for(let y=m-2;y>=0;y--){let C=this._computeIndentLevel(y);if(C>=0){d=y,u=C;break}}}if(p!==-1&&(p===-2||p<m-1)){p=-1,h=-1;for(let y=m;y<i;y++){let C=this._computeIndentLevel(y);if(C>=0){p=y,h=C;break}}}l[g]=this._getIndentLevelForWhitespaceLine(a,u,h)}return l}_getIndentLevelForWhitespaceLine(t,n,i){let r=this.textModel.getOptions();return n===-1||i===-1?0:n<i?1+Math.floor(n/r.indentSize):n===i||t?Math.ceil(i/r.indentSize):1+Math.floor(i/r.indentSize)}},lT=class{activeClassName="indent-active";getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};var dT=class{spacesDiff=0;looksLikeAlignment=!1};function FW(o,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){let h=o.charCodeAt(r),m=t.charCodeAt(r);if(h!==m)break}let s=0,a=0;for(let h=r;h<e;h++)o.charCodeAt(h)===32?s++:a++;let l=0,d=0;for(let h=r;h<n;h++)t.charCodeAt(h)===32?l++:d++;if(s>0&&a>0||l>0&&d>0)return;let u=Math.abs(a-d),p=Math.abs(s-l);if(u===0){i.spacesDiff=p,p>0&&0<=l-1&&l-1<o.length&&l<t.length&&t.charCodeAt(l)!==32&&o.charCodeAt(l-1)===32&&o.charCodeAt(o.length-1)===44&&(i.looksLikeAlignment=!0);return}if(p%u===0){i.spacesDiff=p/u;return}}function cT(o,e,t){let n=Math.min(o.getLineCount(),1e4),i=0,r=0,s="",a=0,l=[2,4,6,8,3,5,7],d=8,u=[0,0,0,0,0,0,0,0,0],p=new dT;for(let g=1;g<=n;g++){let f=o.getLineLength(g),y=o.getLineContent(g),C=f<=65536,w=!1,R=0,_=0,B=0;for(let F=0,V=f;F<V;F++){let oe=C?y.charCodeAt(F):o.getLineCharCode(g,F);if(oe===9)B++;else if(oe===32)_++;else{w=!0,R=F;break}}if(!w||(B>0?i++:_>1&&r++,FW(s,a,y,R,p),p.looksLikeAlignment&&!(t&&e===p.spacesDiff)))continue;let K=p.spacesDiff;K<=d&&u[K]++,s=y,a=R}let h=t;i!==r&&(h=i<r);let m=e;if(h){let g=h?0:.1*n;l.forEach(f=>{let y=u[f];y>g&&(g=y,m=f)}),m===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(m=2)}return{insertSpaces:h,tabSize:m}}function Ji(o){return(o.metadata&1)>>>0}function Pt(o,e){o.metadata=o.metadata&254|e<<0}function $n(o){return(o.metadata&2)>>>1===1}function At(o,e){o.metadata=o.metadata&253|(e?1:0)<<1}function $O(o){return(o.metadata&4)>>>2===1}function WO(o,e){o.metadata=o.metadata&251|(e?1:0)<<2}function jO(o){return(o.metadata&64)>>>6===1}function UO(o,e){o.metadata=o.metadata&191|(e?1:0)<<6}function VW(o){return(o.metadata&24)>>>3}function zO(o,e){o.metadata=o.metadata&231|e<<3}function WW(o){return(o.metadata&32)>>>5===1}function HO(o,e){o.metadata=o.metadata&223|(e?1:0)<<5}var Qm=class{metadata;parent;left;right;start;end;delta;maxEnd;id;ownerId;options;cachedVersionId;cachedAbsoluteStart;cachedAbsoluteEnd;range;constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Pt(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,WO(this,!1),UO(this,!1),zO(this,1),HO(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,At(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;let t=this.options.className;WO(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),UO(this,this.options.glyphMarginClassName!==null),zO(this,this.options.stickiness),HO(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},Ke=new Qm(null,0,0);Ke.parent=Ke;Ke.left=Ke;Ke.right=Ke;Pt(Ke,0);var Ju=class{root;requestNormalizeDelta;constructor(){this.root=Ke,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,r,s){return this.root===Ke?[]:$W(this,e,t,n,i,r,s)}search(e,t,n,i){return this.root===Ke?[]:KO(this,e,t,n,i)}collectNodesFromOwner(e){return GW(this,e)}collectNodesPostOrder(){return qW(this)}insert(e){GO(this,e),this._normalizeDeltaIfNecessary()}delete(e){qO(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let n=e,i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;let r=n.start+i,s=n.end+i;n.setCachedOffsets(r,s,t)}acceptReplace(e,t,n,i){let r=HW(this,e,e+t);for(let s=0,a=r.length;s<a;s++){let l=r[s];qO(this,l)}this._normalizeDeltaIfNecessary(),KW(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=r.length;s<a;s++){let l=r[s];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,zW(l,e,e+t,n,i),l.maxEnd=l.end,GO(this,l)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return KO(this,0,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,UW(this))}};function UW(o){let e=o.root,t=0;for(;e!==Ke;){if(e.left!==Ke&&!$n(e.left)){e=e.left;continue}if(e.right!==Ke&&!$n(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Ca(e),At(e,!0),At(e.left,!1),At(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}At(o.root,!1)}function Zu(o,e,t,n){return o<t?!0:o>t||n===1?!1:n===2?!0:e}function zW(o,e,t,n,i){let r=VW(o),s=r===0||r===2,a=r===1||r===2,l=t-e,d=n,u=Math.min(l,d),p=o.start,h=!1,m=o.end,g=!1;e<=p&&m<=t&&WW(o)&&(o.start=e,h=!0,o.end=e,g=!0);{let y=i?1:l>0?2:0;!h&&Zu(p,s,e,y)&&(h=!0),!g&&Zu(m,a,e,y)&&(g=!0)}if(u>0&&!i){let y=l>d?2:0;!h&&Zu(p,s,e+u,y)&&(h=!0),!g&&Zu(m,a,e+u,y)&&(g=!0)}{let y=i?1:0;!h&&Zu(p,s,t,y)&&(o.start=e+d,h=!0),!g&&Zu(m,a,t,y)&&(o.end=e+d,g=!0)}let f=d-l;h||(o.start=Math.max(0,p+f)),g||(o.end=Math.max(0,m+f)),o.start>o.end&&(o.end=o.start)}function HW(o,e,t){let n=o.root,i=0,r=0,s=0,a=0,l=[],d=0;for(;n!==Ke;){if($n(n)){At(n.left,!1),At(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!$n(n.left)){if(r=i+n.maxEnd,r<e){At(n,!0);continue}if(n.left!==Ke){n=n.left;continue}}if(s=i+n.start,s>t){At(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(s,a,0),l[d++]=n),At(n,!0),n.right!==Ke&&!$n(n.right)){i+=n.delta,n=n.right;continue}}return At(o.root,!1),l}function KW(o,e,t,n){let i=o.root,r=0,s=0,a=0,l=n-(t-e);for(;i!==Ke;){if($n(i)){At(i.left,!1),At(i.right,!1),i===i.parent.right&&(r-=i.parent.delta),Ca(i),i=i.parent;continue}if(!$n(i.left)){if(s=r+i.maxEnd,s<e){At(i,!0);continue}if(i.left!==Ke){i=i.left;continue}}if(a=r+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(o.requestNormalizeDelta=!0),At(i,!0);continue}if(At(i,!0),i.right!==Ke&&!$n(i.right)){r+=i.delta,i=i.right;continue}}At(o.root,!1)}function GW(o,e){let t=o.root,n=[],i=0;for(;t!==Ke;){if($n(t)){At(t.left,!1),At(t.right,!1),t=t.parent;continue}if(t.left!==Ke&&!$n(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),At(t,!0),t.right!==Ke&&!$n(t.right)){t=t.right;continue}}return At(o.root,!1),n}function qW(o){let e=o.root,t=[],n=0;for(;e!==Ke;){if($n(e)){At(e.left,!1),At(e.right,!1),e=e.parent;continue}if(e.left!==Ke&&!$n(e.left)){e=e.left;continue}if(e.right!==Ke&&!$n(e.right)){e=e.right;continue}t[n++]=e,At(e,!0)}return At(o.root,!1),t}function KO(o,e,t,n,i){let r=o.root,s=0,a=0,l=0,d=[],u=0;for(;r!==Ke;){if($n(r)){At(r.left,!1),At(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),r=r.parent;continue}if(r.left!==Ke&&!$n(r.left)){r=r.left;continue}a=s+r.start,l=s+r.end,r.setCachedOffsets(a,l,n);let p=!0;if(e&&r.ownerId&&r.ownerId!==e&&(p=!1),t&&$O(r)&&(p=!1),i&&!jO(r)&&(p=!1),p&&(d[u++]=r),At(r,!0),r.right!==Ke&&!$n(r.right)){s+=r.delta,r=r.right;continue}}return At(o.root,!1),d}function $W(o,e,t,n,i,r,s){let a=o.root,l=0,d=0,u=0,p=0,h=[],m=0;for(;a!==Ke;){if($n(a)){At(a.left,!1),At(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!$n(a.left)){if(d=l+a.maxEnd,d<e){At(a,!0);continue}if(a.left!==Ke){a=a.left;continue}}if(u=l+a.start,u>t){At(a,!0);continue}if(p=l+a.end,p>=e){a.setCachedOffsets(u,p,r);let g=!0;n&&a.ownerId&&a.ownerId!==n&&(g=!1),i&&$O(a)&&(g=!1),s&&!jO(a)&&(g=!1),g&&(h[m++]=a)}if(At(a,!0),a.right!==Ke&&!$n(a.right)){l+=a.delta,a=a.right;continue}}return At(o.root,!1),h}function GO(o,e){if(o.root===Ke)return e.parent=Ke,e.left=Ke,e.right=Ke,Pt(e,0),o.root=e,o.root;jW(o,e),Fl(e.parent);let t=e;for(;t!==o.root&&Ji(t.parent)===1;)if(t.parent===t.parent.parent.left){let n=t.parent.parent.right;Ji(n)===1?(Pt(t.parent,0),Pt(n,0),Pt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,jm(o,t)),Pt(t.parent,0),Pt(t.parent.parent,1),Ym(o,t.parent.parent))}else{let n=t.parent.parent.left;Ji(n)===1?(Pt(t.parent,0),Pt(n,0),Pt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Ym(o,t)),Pt(t.parent,0),Pt(t.parent.parent,1),jm(o,t.parent.parent))}return Pt(o.root,0),e}function jW(o,e){let t=0,n=o.root,i=e.start,r=e.end;for(;;)if(QW(i,r,n.start+t,n.end+t)<0)if(n.left===Ke){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Ke){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Ke,e.right=Ke,Pt(e,1)}function qO(o,e){let t,n;if(e.left===Ke?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Ke?(t=e.left,n=e):(n=YW(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(o.requestNormalizeDelta=!0)),n===o.root){o.root=t,Pt(t,0),e.detach(),uT(),Ca(t),o.root.parent=Ke;return}let i=Ji(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Pt(n,Ji(e)),e===o.root?o.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Ke&&(n.left.parent=n),n.right!==Ke&&(n.right.parent=n)),e.detach(),i){Fl(t.parent),n!==e&&(Fl(n),Fl(n.parent)),uT();return}Fl(t),Fl(t.parent),n!==e&&(Fl(n),Fl(n.parent));let r;for(;t!==o.root&&Ji(t)===0;)t===t.parent.left?(r=t.parent.right,Ji(r)===1&&(Pt(r,0),Pt(t.parent,1),jm(o,t.parent),r=t.parent.right),Ji(r.left)===0&&Ji(r.right)===0?(Pt(r,1),t=t.parent):(Ji(r.right)===0&&(Pt(r.left,0),Pt(r,1),Ym(o,r),r=t.parent.right),Pt(r,Ji(t.parent)),Pt(t.parent,0),Pt(r.right,0),jm(o,t.parent),t=o.root)):(r=t.parent.left,Ji(r)===1&&(Pt(r,0),Pt(t.parent,1),Ym(o,t.parent),r=t.parent.left),Ji(r.left)===0&&Ji(r.right)===0?(Pt(r,1),t=t.parent):(Ji(r.left)===0&&(Pt(r.right,0),Pt(r,1),jm(o,r),r=t.parent.left),Pt(r,Ji(t.parent)),Pt(t.parent,0),Pt(r.left,0),Ym(o,t.parent),t=o.root));Pt(t,0),uT()}function YW(o){for(;o.left!==Ke;)o=o.left;return o}function uT(){Ke.parent=Ke,Ke.delta=0,Ke.start=0,Ke.end=0}function jm(o,e){let t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Ke&&(t.left.parent=e),t.parent=e.parent,e.parent===Ke?o.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Ca(e),Ca(t)}function Ym(o,e){let t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(o.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Ke&&(t.right.parent=e),t.parent=e.parent,e.parent===Ke?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Ca(e),Ca(t)}function YO(o){let e=o.end;if(o.left!==Ke){let t=o.left.maxEnd;t>e&&(e=t)}if(o.right!==Ke){let t=o.right.maxEnd+o.delta;t>e&&(e=t)}return e}function Ca(o){o.maxEnd=YO(o)}function Fl(o){for(;o!==Ke;){let e=YO(o);if(o.maxEnd===e)return;o.maxEnd=e,o=o.parent}}function QW(o,e,t,n){return o===t?e-n:o-t}var ep=class{parent;left;right;color;piece;size_left;lf_left;constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Le)return hy(this.right);let e=this;for(;e.parent!==Le&&e.parent.left!==e;)e=e.parent;return e.parent===Le?Le:e.parent}prev(){if(this.left!==Le)return hT(this.left);let e=this;for(;e.parent!==Le&&e.parent.right!==e;)e=e.parent;return e.parent===Le?Le:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};var Le=new ep(null,0);Le.parent=Le;Le.left=Le;Le.right=Le;Le.color=0;function hy(o){for(;o.left!==Le;)o=o.left;return o}function hT(o){for(;o.right!==Le;)o=o.right;return o}function mT(o){return o===Le?0:o.size_left+o.piece.length+mT(o.right)}function gT(o){return o===Le?0:o.lf_left+o.piece.lineFeedCnt+gT(o.right)}function pT(){Le.parent=Le}function Zm(o,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Le&&(t.left.parent=e),t.parent=e.parent,e.parent===Le?o.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function Jm(o,e){let t=e.left;e.left=t.right,t.right!==Le&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Le?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function eg(o,e){let t,n;if(e.left===Le?(n=e,t=n.right):e.right===Le?(n=e,t=n.left):(n=hy(e.right),t=n.right),n===o.root){o.root=t,t.color=0,e.detach(),pT(),o.root.parent=Le;return}let i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,Xm(o,t)):(n.parent===e?t.parent=n:t.parent=n.parent,Xm(o,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===o.root?o.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Le&&(n.left.parent=n),n.right!==Le&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,Xm(o,n)),e.detach(),t.parent.left===t){let s=mT(t),a=gT(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let l=s-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,As(o,t.parent,l,d)}}if(Xm(o,t.parent),i){pT();return}let r;for(;t!==o.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,Zm(o,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,Jm(o,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,Zm(o,t.parent),t=o.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,Jm(o,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,Zm(o,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,Jm(o,t.parent),t=o.root));t.color=0,pT()}function fT(o,e){for(Xm(o,e);e!==o.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){let t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,Zm(o,e)),e.parent.color=0,e.parent.parent.color=1,Jm(o,e.parent.parent))}else{let t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,Jm(o,e)),e.parent.color=0,e.parent.parent.color=1,Zm(o,e.parent.parent))}o.root.color=0}function As(o,e,t,n){for(;e!==o.root&&e!==Le;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function Xm(o,e){let t=0,n=0;if(e!==o.root){for(;e!==o.root&&e===e.parent.right;)e=e.parent;if(e!==o.root)for(e=e.parent,t=mT(e.left)-e.size_left,n=gT(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==o.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}var XW=999,wa=class{searchString;isRegex;matchCase;wordSeparators;constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=ZW(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Jf(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new Hv(t,this.wordSeparators?zd(this.wordSeparators,[]):null,n?this.searchString:null)}};function ZW(o){if(!o||o.length===0)return!1;for(let e=0,t=o.length;e<t;e++){let n=o.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;let i=o.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}function Bl(o,e,t){if(!t)return new Ll(o,null);let n=[];for(let i=0,r=e.length;i<r;i++)n[i]=e[i];return new Ll(o,n)}var my=class{_lineFeedsOffsets;constructor(e){let t=[],n=0;for(let i=0,r=e.length;i<r;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){let r=n+((i-n)/2>>0);t[r]>=e?i=r-1:t[r+1]>=e?(n=r,i=r):n=r+1}return n+1}},jd=class{static findMatches(e,t,n,i,r){let s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new Vl(s.wordSeparators,s.regex),i,r):this._doFindMatchesLineByLine(e,n,s,i,r):[]}static _getMultilineMatchRange(e,t,n,i,r,s){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let d;if(i){let m=i.findLineFeedCountBeforeOffset(r+s.length)-l;d=a+s.length+m}else d=a+s.length;let u=e.getPositionAt(a),p=e.getPositionAt(d);return new P(u.lineNumber,u.column,p.lineNumber,p.column)}static _doFindMatchesMultiline(e,t,n,i,r){let s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new my(a):null,d=[],u=0,p;for(n.reset(0);p=n.next(a);)if(d[u++]=Bl(this._getMultilineMatchRange(e,s,a,l,p.index,p[0]),p,i),u>=r)return d;return d}static _doFindMatchesLineByLine(e,t,n,i,r){let s=[],a=0;if(t.startLineNumber===t.endLineNumber){let d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,s,i,r),s}let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,s,i,r);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<r;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,s,i,r);if(a<r){let d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,s,i,r)}return s}static _findMatchesInLine(e,t,n,i,r,s,a,l){let d=e.wordSeparators;if(!a&&e.simpleSearch){let h=e.simpleSearch,m=h.length,g=t.length,f=-m;for(;(f=t.indexOf(h,f+m))!==-1;)if((!d||gy(d,t,g,f,m))&&(s[r++]=new Ll(new P(n,f+1+i,n,f+1+m+i),null),r>=l))return r;return r}let u=new Vl(e.wordSeparators,e.regex),p;u.reset(0);do if(p=u.next(t),p&&(s[r++]=Bl(new P(n,p.index+1+i,n,p.index+1+p[0].length+i),p,a),r>=l))return r;while(p);return r}static findNextMatch(e,t,n,i){let r=t.parseSearchRequest();if(!r)return null;let s=new Vl(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,s,i):this._doFindNextMatchLineByLine(e,n,s,i)}static _doFindNextMatchMultiline(e,t,n,i){let r=new te(t.lineNumber,1),s=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new P(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new my(l):null;n.reset(t.column-1);let u=n.next(l);return u?Bl(this._getMultilineMatchRange(e,s,l,d,u.index,u[0]),u,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new te(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){let r=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),l=this._findFirstMatchInLine(n,a,s,t.column,i);if(l)return l;for(let d=1;d<=r;d++){let u=(s+d-1)%r,p=e.getLineContent(u+1),h=this._findFirstMatchInLine(n,p,u+1,1,i);if(h)return h}return null}static _findFirstMatchInLine(e,t,n,i,r){e.reset(i-1);let s=e.next(t);return s?Bl(new P(n,s.index+1,n,s.index+1+s[0].length),s,r):null}static findPreviousMatch(e,t,n,i){let r=t.parseSearchRequest();if(!r)return null;let s=new Vl(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,i):this._doFindPreviousMatchLineByLine(e,n,s,i)}static _doFindPreviousMatchMultiline(e,t,n,i){let r=this._doFindMatchesMultiline(e,new P(1,1,t.lineNumber,t.column),n,i,10*XW);if(r.length>0)return r[r.length-1];let s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new te(s,e.getLineMaxColumn(s)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){let r=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,s,i);if(l)return l;for(let d=1;d<=r;d++){let u=(r+s-d-1)%r,p=e.getLineContent(u+1),h=this._findLastMatchInLine(n,p,u+1,i);if(h)return h}return null}static _findLastMatchInLine(e,t,n,i){let r=null,s;for(e.reset(0);s=e.next(t);)r=Bl(new P(n,s.index+1,n,s.index+1+s[0].length),s,i);return r}};function JW(o,e,t,n,i){if(n===0)return!0;let r=e.charCodeAt(n-1);if(o.get(r)!==0||r===13||r===10)return!0;if(i>0){let s=e.charCodeAt(n);if(o.get(s)!==0)return!0}return!1}function e4(o,e,t,n,i){if(n+i===t)return!0;let r=e.charCodeAt(n+i);if(o.get(r)!==0||r===13||r===10)return!0;if(i>0){let s=e.charCodeAt(n+i-1);if(o.get(s)!==0)return!0}return!1}function gy(o,e,t,n,i){return JW(o,e,t,n,i)&&e4(o,e,t,n,i)}var Vl=class{_wordSeparators;_searchRegex;_prevMatchStartIndex;_prevMatchLength;constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;let i=n.index,r=n[0].length;if(i===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){ru(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=r,!this._wordSeparators||gy(this._wordSeparators,e,t,i,r))return n}while(n);return null}};var Ta=65535;function ZO(o){let e;return o[o.length-1]<65536?e=new Uint16Array(o.length):e=new Uint32Array(o.length),e.set(o,0),e}var bT=class{constructor(e,t,n,i,r){this.lineStarts=e;this.cr=t;this.lf=n;this.crlf=i;this.isBasicASCII=r}};function Os(o,e=!0){let t=[0],n=1;for(let i=0,r=o.length;i<r;i++){let s=o.charCodeAt(i);s===13?i+1<r&&o.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:s===10&&(t[n++]=i+1)}return e?ZO(t):t}function JO(o,e){o.length=0,o[0]=0;let t=1,n=0,i=0,r=0,s=!0;for(let l=0,d=e.length;l<d;l++){let u=e.charCodeAt(l);u===13?l+1<d&&e.charCodeAt(l+1)===10?(r++,o[t++]=l+2,l++):(n++,o[t++]=l+1):u===10?(i++,o[t++]=l+1):s&&u!==9&&(u<32||u>126)&&(s=!1)}let a=new bT(ZO(o),n,i,r,s);return o.length=0,a}var Bi=class{bufferIndex;start;end;length;lineFeedCnt;constructor(e,t,n,i,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=r}},Ps=class{buffer;lineStarts;constructor(e,t){this.buffer=e,this.lineStarts=t}},vT=class{_pieces;_index;_tree;_BOM;constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Le&&e.iterate(e.root,n=>(n!==Le&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},yT=class{_limit;_cache;constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let i=0;i<n.length;i++){let r=n[i];if(r.node.parent===null||r.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){let i=[];for(let r of n)r!==null&&i.push(r);this._cache=i}}},fy=class{root;_buffers;_lineCnt;_length;_EOL;_EOLLength;_EOLNormalized;_lastChangeBufferPos;_searchCache;_lastVisitedLine;constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Ps("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Le,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let r=0,s=e.length;r<s;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=Os(e[r].buffer));let a=new Bi(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),i=this.rbInsertRight(i,a)}this._searchCache=new yT(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Ta,n=t-Math.floor(t/3),i=n*2,r="",s=0,a=[];if(this.iterate(this.root,l=>{let d=this.getNodeContent(l),u=d.length;if(s<=n||s+u<i)return r+=d,s+=u,!0;let p=r.replace(/\r\n|\r|\n/g,e);return a.push(new Ps(p,Os(p))),r=d,s=u,!0}),s>0){let l=r.replace(/\r\n|\r|\n/g,e);a.push(new Ps(l,Os(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new vT(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===Le)return!0;let r=this.getNodeContent(i),s=r.length,a=e.nodeAt(t),l=e.nodeAt(t+s),d=e.getValueInRange2(a,l);return t+=s,r===d})}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Le;)if(i.left!==Le&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;let r=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=r+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;for(;t!==Le;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){let s=this.getOffsetAt(n+1,1),a=i-s;return new te(n+1,a+1)}return new te(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Le){let r=this.getOffsetAt(n+1,1),s=i-e-r;return new te(n+1,s+1)}else t=t.right;return new te(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(d+e.remainder,d+t.remainder)}let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=i.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==Le;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(l,l+t.remainder);break}else s+=a.substr(l,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",i=!1;return this.iterate(this.root,r=>{if(r===Le)return!0;let s=r.piece,a=s.length;if(a===0)return!0;let l=this._buffers[s.bufferIndex].buffer,d=this._buffers[s.bufferIndex].lineStarts,u=s.start.line,p=s.end.line,h=d[u]+s.start.column;if(i&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(u===p)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(i=!0,n+=l.substr(h,a-1)):n+=l.substr(h,a),!0;n+=this._EOLNormalized?l.substring(h,Math.max(h,d[u+1]-this._EOLLength)):l.substring(h,d[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let m=u+1;m<p;m++)n=this._EOLNormalized?l.substring(d[m],d[m+1]-this._EOLLength):l.substring(d[m],d[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(d[p]+s.end.column-1)===13?(i=!0,s.end.column===0?t--:n=l.substr(d[p],s.end.column-1)):n=l.substr(d[p],s.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){let t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){let t=this.nodeAt(e);if(t.remainder===t.node.piece.length){let n=t.node.next();if(!n||n===Le)return"";let i=this._buffers[n.piece.bufferIndex],r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.buffer.substring(r,r+n.piece.length)}else{let n=this._buffers[t.node.piece.bufferIndex],i=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),r=i+t.remainder,s=i+t.node.piece.length;return n.buffer.substring(r,s)}}findMatchesInNode(e,t,n,i,r,s,a,l,d,u,p){let h=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),f=this.offsetInBuffer(e.piece.bufferIndex,s),y,C={line:0,column:0},w,R;t._wordSeparators?(w=h.buffer.substring(g,f),R=_=>_+g,t.reset(0)):(w=h.buffer,R=_=>_,t.reset(g));do if(y=t.next(w),y){if(R(y.index)>=f)return u;this.positionInBuffer(e,R(y.index)-m,C);let _=this.getLineFeedCnt(e.piece.bufferIndex,r,C),B=C.line===r.line?C.column-r.column+i:C.column+1,K=B+y[0].length;if(p[u++]=Bl(new P(n+_,B,n+_,K),y,l),R(y.index)+y[0].length>=f||u>=d)return u}while(y);return u}findMatchesLineByLine(e,t,n,i){let r=[],s=0,a=new Vl(t.wordSeparators,t.regex),l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let u=this.positionInBuffer(l.node,l.remainder),p=this.positionInBuffer(d.node,d.remainder);if(l.node===d.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,p,t,n,i,s,r),r;let h=e.startLineNumber,m=l.node;for(;m!==d.node;){let f=this.getLineFeedCnt(m.piece.bufferIndex,u,m.piece.end);if(f>=1){let C=this._buffers[m.piece.bufferIndex].lineStarts,w=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),R=C[u.line+f],_=h===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(m,a,h,_,u,this.positionInBuffer(m,R-w),t,n,i,s,r),s>=i)return r;h+=f}let y=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){let C=this.getLineContent(h).substring(y,e.endColumn-1);return s=this._findMatchesInLine(t,a,C,e.endLineNumber,y,s,r,n,i),r}if(s=this._findMatchesInLine(t,a,this.getLineContent(h).substr(y),h,y,s,r,n,i),s>=i)return r;h++,l=this.nodeAt2(h,1),m=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){let f=h===e.startLineNumber?e.startColumn-1:0,y=this.getLineContent(h).substring(f,e.endColumn-1);return s=this._findMatchesInLine(t,a,y,e.endLineNumber,f,s,r,n,i),r}let g=h===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(d.node,a,h,g,u,p,t,n,i,s,r),r}_findMatchesInLine(e,t,n,i,r,s,a,l,d){let u=e.wordSeparators;if(!l&&e.simpleSearch){let h=e.simpleSearch,m=h.length,g=n.length,f=-m;for(;(f=n.indexOf(h,f+m))!==-1;)if((!u||gy(u,n,g,f,m))&&(a[s++]=new Ll(new P(i,f+1+r,i,f+1+m+r),null),s>=d))return s;return s}let p;t.reset(0);do if(p=t.next(n),p&&(a[s++]=Bl(new P(i,p.index+1+r,i,p.index+1+p[0].length+r),p,l),s>=d))return s;while(p);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Le){let{node:i,remainder:r,nodeStartOffset:s}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,d=this.positionInBuffer(i,r);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<Ta){this.appendToNode(i,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(s+i.piece.length>e){let u=[],p=new Bi(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,r)===10){let f={line:p.start.line+1,column:0};p=new Bi(p.bufferIndex,f,p.end,this.getLineFeedCnt(p.bufferIndex,f,p.end),p.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,r-1)===13){let f=this.positionInBuffer(i,r-1);this.deleteNodeTail(i,f),t="\r"+t,i.piece.length===0&&u.push(i)}else this.deleteNodeTail(i,d);else this.deleteNodeTail(i,d);let h=this.createNewPieces(t);p.length>0&&this.rbInsertRight(i,p);let m=i;for(let g=0;g<h.length;g++)m=this.rbInsertRight(m,h[g]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,i)}else{let i=this.createNewPieces(t),r=this.rbInsertLeft(null,i[0]);for(let s=1;s<i.length;s++)r=this.rbInsertRight(r,i[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Le)return;let n=this.nodeAt(e),i=this.nodeAt(e+t),r=n.node,s=i.node;if(r===s){let h=this.positionInBuffer(r,n.remainder),m=this.positionInBuffer(r,i.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){let g=r.next();eg(this,r),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(r,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,h),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,h,m),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);let d=this.positionInBuffer(s,i.remainder);this.deleteNodeHead(s,d),s.piece.length===0&&a.push(s);let u=r.next();for(let h=u;h!==Le&&h!==s;h=h.next())a.push(h);let p=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(p),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},l=new Bi(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=l,e+=`
`,As(this,t,-1,-1),t.piece.length===0&&n.push(t)}let i=this.createNewPieces(e),r=this.rbInsertLeft(t,i[i.length-1]);for(let s=i.length-2;s>=0;s--)r=this.rbInsertLeft(r,i[s]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),r=i;for(let s=1;s<n.length;s++)r=this.rbInsertRight(r,n[s]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){let i=e.piece,r=e.piece.bufferIndex,s=this._buffers[r].lineStarts,l=s[i.start.line]+i.start.column+t,d=i.start.line,u=i.end.line,p=0,h=0,m=0;for(;d<=u&&(p=d+(u-d)/2|0,m=s[p],p!==u);)if(h=s[p+1],l<m)u=p-1;else if(l>=h)d=p+1;else break;return n?(n.line=p,n.column=l-m,null):{line:p,column:l-m}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;let r=i[n.line+1],s=i[n.line]+n.column;if(r>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)eg(this,e[t])}createNewPieces(e){if(e.length>Ta){let u=[];for(;e.length>Ta;){let h=e.charCodeAt(Ta-1),m;h===13||h>=55296&&h<=56319?(m=e.substring(0,Ta-1),e=e.substring(Ta-1)):(m=e.substring(0,Ta),e=e.substring(Ta));let g=Os(m);u.push(new Bi(this._buffers.length,{line:0,column:0},{line:g.length-1,column:m.length-g[g.length-1]},g.length-1,m.length)),this._buffers.push(new Ps(m,g))}let p=Os(e);return u.push(new Bi(this._buffers.length,{line:0,column:0},{line:p.length-1,column:e.length-p[p.length-1]},p.length-1,e.length)),this._buffers.push(new Ps(e,p)),u}let t=this._buffers[0].buffer.length,n=Os(e,!1),i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let u=0;u<n.length;u++)n[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<n.length;u++)n[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}let r=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[s],l={line:s,column:a},d=new Bi(0,i,l,this.getLineFeedCnt(0,i,l),r-t);return this._lastChangeBufferPos=l,[d]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,i="",r=this._searchCache.get2(e);if(r){n=r.node;let s=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+s,l+n.piece.length);else{let d=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+s,l+d-t)}}else{let s=0,a=e;for(;n!==Le;)if(n.left!==Le&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),u=this._buffers[n.piece.bufferIndex].buffer,p=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),u.substring(p+l,p+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=d.substring(u+l,u+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Le;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=s.substring(l,l+a-t),i}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=s.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Le;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,i=this.positionInBuffer(e,t),r=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(s!==r)return{index:s,remainder:0}}return{index:r,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[r]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){let n=e.piece,i=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),l=this.getLineFeedCnt(n.bufferIndex,n.start,s),d=l-i,u=a-r,p=n.length+u;e.piece=new Bi(n.bufferIndex,n.start,s,l,p),As(this,e,u,d)}deleteNodeHead(e,t){let n=e.piece,i=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),l=this.offsetInBuffer(n.bufferIndex,s),d=a-i,u=r-l,p=n.length+u;e.piece=new Bi(n.bufferIndex,s,n.end,a,p),As(this,e,u,d)}shrinkNode(e,t,n){let i=e.piece,r=i.start,s=i.end,a=i.length,l=i.lineFeedCnt,d=t,u=this.getLineFeedCnt(i.bufferIndex,i.start,d),p=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,r);e.piece=new Bi(i.bufferIndex,i.start,d,u,p),As(this,e,p-a,u-l);let h=new Bi(i.bufferIndex,n,s,this.getLineFeedCnt(i.bufferIndex,n,s),this.offsetInBuffer(i.bufferIndex,s)-this.offsetInBuffer(i.bufferIndex,n)),m=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let r=Os(t,!1);for(let m=0;m<r.length;m++)r[m]+=i;if(n){let m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));let s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],l={line:s,column:a},d=e.piece.length+t.length,u=e.piece.lineFeedCnt,p=this.getLineFeedCnt(0,e.piece.start,l),h=p-u;e.piece=new Bi(e.piece.bufferIndex,e.piece.start,l,p,d),this._lastChangeBufferPos=l,As(this,e,t.length,h)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Le;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;let r={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Le;)if(n.left!==Le&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(r+t-1,s),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:i};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Le;){if(n.piece.lineFeedCnt>0){let r=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:s}}else if(n.piece.length>=t-1){let r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Le||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,r=n[i]+t.start.column;return i===n.length-1||n[i+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Le||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],i=this._buffers[e.piece.bufferIndex].lineStarts,r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};let s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Bi(e.piece.bufferIndex,e.piece.start,r,a,s),As(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0},d=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Bi(t.piece.bufferIndex,l,t.piece.end,u,d),As(this,t,-1,-1),t.piece.length===0&&n.push(t);let p=this.createNewPieces(`\r
`);this.rbInsertRight(e,p[0]);for(let h=0;h<n.length;h++)eg(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)eg(this,n);else{let i=n.piece,r={line:i.start.line+1,column:0},s=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,r,i.end);n.piece=new Bi(i.bufferIndex,r,i.end,a,s),As(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Le)return t(Le);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Le)return"";let t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,r)}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){let n=new ep(t,1);if(n.left=Le,n.right=Le,n.parent=Le,n.size_left=0,n.lf_left=0,this.root===Le)this.root=n,n.color=0;else if(e.right===Le)e.right=n,n.parent=e;else{let r=hy(e.right);r.left=n,n.parent=r}return fT(this,n),n}rbInsertLeft(e,t){let n=new ep(t,1);if(n.left=Le,n.right=Le,n.parent=Le,n.size_left=0,n.lf_left=0,this.root===Le)this.root=n,n.color=0;else if(e.left===Le)e.left=n,n.parent=e;else{let i=hT(e.left);i.right=n,n.parent=i}return fT(this,n),n}getContentOfSubTree(e){let t="";return this.iterate(e,n=>(t+=this.getNodeContent(n),!0)),t}};var tp=class o extends N{_pieceTree;_BOM;_mightContainRTL;_mightContainUnusualLineTerminators;_mightContainNonBasicASCII;_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;constructor(e,t,n,i,r,s,a){super(),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=r,this._pieceTree=new fy(e,n,a)}equals(e){return!(e instanceof o)||this._BOM!==e._BOM||this.getEOL()!==e.getEOL()?!1:this._pieceTree.equal(e._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t,i=this.getPositionAt(e),r=this.getPositionAt(n);return new P(i.lineNumber,i.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";let n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn),r=0,s=this._getEndOfLine(t),a=this.getEOL();if(s.length!==a.length){let l=s.length-a.length,d=e.endLineNumber-e.startLineNumber;r=l*d}return i-n+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0,i=e.startLineNumber,r=e.endLineNumber;for(let s=i;s<=r;s++){let a=this.getLineContent(s),l=s===i?e.startColumn-1:0,d=s===r?e.endColumn-1:a.length;for(let u=l;u<d;u++)ko(a.charCodeAt(u))?(n=n+1,u=u+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-i),n}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){let t=qi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=zo(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,l=[];for(let f=0;f<e.length;f++){let y=e[f];a&&y._isTracked&&(a=!1);let C=y.range;if(y.text){let K=!0;s||(K=!nE(y.text),s=K),!i&&K&&(i=Oh(y.text)),!r&&K&&(r=tb(y.text))}let w="",R=0,_=0,B=0;if(y.text){let K;[R,_,B,K]=mo(y.text);let F=this.getEOL(),V=F===`\r
`?2:1;K===0||K===V?w=y.text:w=y.text.replace(/\r\n|\r|\n/g,F)}l[f]={sortIndex:f,identifier:y.identifier||null,range:C,rangeOffset:this.getOffsetAt(C.startLineNumber,C.startColumn),rangeLength:this.getValueLengthInRange(C),text:w,eolCount:R,firstLineLength:_,lastLineLength:B,forceMoveMarkers:!!y.forceMoveMarkers,isAutoWhitespaceEdit:y.isAutoWhitespaceEdit||!1}}l.sort(o._sortOpsAscending);let d=!1;for(let f=0,y=l.length-1;f<y;f++){let C=l[f].range.getEndPosition(),w=l[f+1].range.getStartPosition();if(w.isBeforeOrEqual(C)){if(w.isBefore(C))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(l=this._reduceOperations(l));let u=n||t?o._getInverseEditRanges(l):[],p=[];if(t)for(let f=0;f<l.length;f++){let y=l[f],C=u[f];if(y.isAutoWhitespaceEdit&&y.range.isEmpty())for(let w=C.startLineNumber;w<=C.endLineNumber;w++){let R="";w===C.startLineNumber&&(R=this.getLineContent(y.range.startLineNumber),qi(R)!==-1)||p.push({lineNumber:w,oldContent:R})}}let h=null;if(n){let f=0;h=[];for(let y=0;y<l.length;y++){let C=l[y],w=u[y],R=this.getValueInRange(C.range),_=C.rangeOffset+f;f+=C.text.length-R.length,h[y]={sortIndex:C.sortIndex,identifier:C.identifier,range:w,text:R,textChange:new Do(C.rangeOffset,R,_,C.text)}}d||h.sort((y,C)=>y.sortIndex-C.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=s;let m=this._doApplyEdits(l),g=null;if(t&&p.length>0){p.sort((f,y)=>y.lineNumber-f.lineNumber),g=[];for(let f=0,y=p.length;f<y;f++){let C=p[f].lineNumber;if(f>0&&p[f-1].lineNumber===C)continue;let w=p[f].oldContent,R=this.getLineContent(C);R.length===0||R===w||qi(R)!==-1||g.push(C)}}return this._onDidChangeContent.fire(),new Kv(h,m,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,n=e[0].range,i=e[e.length-1].range,r=new P(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn),s=n.startLineNumber,a=n.startColumn,l=[];for(let m=0,g=e.length;m<g;m++){let f=e[m],y=f.range;t=t||f.forceMoveMarkers,l.push(this.getValueInRange(new P(s,a,y.startLineNumber,y.startColumn))),f.text.length>0&&l.push(f.text),s=y.endLineNumber,a=y.endColumn}let d=l.join(""),[u,p,h]=mo(d);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:d,eolCount:u,firstLineLength:p,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(o._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let i=e[n],r=i.range.startLineNumber,s=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(r===a&&s===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);let d=new P(r,s,a,l);t.push({range:d,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){let n=e.startLineNumber,i=e.startColumn,[r,s,a]=mo(t),l;if(t.length>0){let d=r+1;d===1?l=new P(n,i,n,i+s):l=new P(n,i,n+d-1,a+1)}else l=new P(n,i,n,i);return l}static _getInverseEditRanges(e){let t=[],n=0,i=0,r=null;for(let s=0,a=e.length;s<a;s++){let l=e[s],d,u;r?r.range.endLineNumber===l.range.startLineNumber?(d=n,u=i+(l.range.startColumn-r.range.endColumn)):(d=n+(l.range.startLineNumber-r.range.endLineNumber),u=l.range.startColumn):(d=l.range.startLineNumber,u=l.range.startColumn);let p;if(l.text.length>0){let h=l.eolCount+1;h===1?p=new P(d,u,d,u+l.firstLineLength):p=new P(d,u,d+h-1,l.lastLineLength+1)}else p=new P(d,u,d,u);n=p.endLineNumber,i=p.endColumn,t.push(p),r=l}return t}static _sortOpsAscending(e,t){let n=P.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=P.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}};var IT=class{constructor(e,t,n,i,r,s,a,l,d){this._chunks=e;this._bom=t;this._cr=n;this._lf=i;this._crlf=r;this._containsRTL=s;this._containsUnusualLineTerminators=a;this._isBasicASCII=l;this._normalizeEOL=d}_getEOL(e){let t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,s=n.length;r<s;r++){let a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=Os(a);n[r]=new Ps(a,l)}let i=new tp(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},np=class{chunks;BOM;_hasPreviousChar;_previousChar;_tmpLineStarts;cr;lf;crlf;containsRTL;containsUnusualLineTerminators;isBasicASCII;constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&p0(e)&&(this.BOM=u0,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=JO(this._tmpLineStarts,e);this.chunks.push(new Ps(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=Oh(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=tb(e)))}finish(e=!0){return this._finish(),new IT(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=Os(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}};var n4=new class{clone(){return this}equals(o){return this===o}};function eP(o,e){let t=new Uint32Array(2);return t[0]=0,t[1]=(o<<0|0|0|32768|2<<24)>>>0,new pv(t,e===null?n4:e)}var by=class{constructor(e){this._default=e}_store=[];get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}let i=this._store.slice(0,e),r=this._store.slice(e+t),s=i4(n,this._default);this._store=i.concat(s,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;let n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=Ja(this._store,e,n)}};function i4(o,e){let t=[];for(let n=0;n<o;n++)t[n]=e;return t}var Yd=class{static deserialize(e){let t=0,n=Hn(e,t);t+=4;let i=[];for(let r=0;r<n;r++)t=Sm.deserialize(e,t,i);return i}_tokens;constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new Sm(e,[t]))}finalize(){return this._tokens}serialize(){let e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;Kn(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++)t=this._tokens[n].serialize(e,t)}};var ST=class{constructor(e,t){this.tokenizationSupport=t;this.store=new op(e)}initialState=this.tokenizationSupport.getInitialState();store;getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}},vy=class extends ST{constructor(t,n,i,r){super(t,n);this._textModel=i;this._languageIdCodec=r}updateTokensUntilLine(t,n){let i=this._textModel.getLanguageId();for(;;){let r=this.getFirstInvalidLine();if(!r||r.lineNumber>n)break;let s=this._textModel.getLineContent(r.lineNumber),a=ip(this._languageIdCodec,i,this.tokenizationSupport,s,!0,r.startState);t.add(r.lineNumber,a.tokens),this.store.setEndState(r.lineNumber,a.endState)}}getTokenTypeIfInsertingCharacter(t,n){let i=this.getStartState(t.lineNumber);if(!i)return 0;let r=this._textModel.getLanguageId(),s=this._textModel.getLineContent(t.lineNumber),a=s.substring(0,t.column-1)+n+s.substring(t.column-1),l=ip(this._languageIdCodec,r,this.tokenizationSupport,a,!0,i),d=new Pn(l.tokens,a,this._languageIdCodec);if(d.getCount()===0)return 0;let u=d.findTokenIndexAtOffset(t.column-1);return d.getStandardTokenType(u)}tokenizeLineWithEdit(t,n){let i=this.getStartState(t);if(!i)return{mainLineTokens:null,additionalLines:null};let r=this._textModel.getLineContent(t),s=n.lineEdit.apply(r),a=this._textModel.getLanguageIdAtPosition(t,0),l=ip(this._languageIdCodec,a,this.tokenizationSupport,s,!0,i),d=null;if(n.additionalLines){d=[];let p=l.endState;for(let h of n.additionalLines){let m=ip(this._languageIdCodec,a,this.tokenizationSupport,h,!0,p);d.push(new Pn(m.tokens,h,this._languageIdCodec)),p=m.endState}}return{mainLineTokens:new Pn(l.tokens,s,this._languageIdCodec),additionalLines:d}}hasAccurateTokensForLine(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n}isCheapToTokenize(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n||t===n&&this._textModel.getLineLength(t)<2048}tokenizeHeuristically(t,n,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(t,i),{heuristicTokens:!1};let r=this.guessStartState(n),s=this._textModel.getLanguageId();for(let a=n;a<=i;a++){let l=this._textModel.getLineContent(a),d=ip(this._languageIdCodec,s,this.tokenizationSupport,l,!0,r);t.add(a,d.tokens),r=d.endState}return{heuristicTokens:!0}}guessStartState(t){let n=this._textModel.getLineFirstNonWhitespaceColumn(t),i=[],r=null;for(let l=t-1;n>1&&l>=1;l--){let d=this._textModel.getLineFirstNonWhitespaceColumn(l);if(d!==0&&d<n&&(i.push(this._textModel.getLineContent(l)),n=d,r=this.getStartState(l),r))break}r||(r=this.tokenizationSupport.getInitialState()),i.reverse();let s=this._textModel.getLanguageId(),a=r;for(let l of i)a=ip(this._languageIdCodec,s,this.tokenizationSupport,l,!1,a).endState;return a}},op=class{constructor(e){this.lineCount=e;this._invalidEndStatesLineNumbers.addRange(new Gt(1,e+1))}_tokenizationStateStore=new xT;_invalidEndStatesLineNumbers=new ET;getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new ut("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);let n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Gt(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Gt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(let t of e){let[n]=mo(t.text);this.acceptChange(new Oi(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Gt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){let t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;let n=this.getStartState(t,e);if(!n)throw new ut("Start state must be defined");return{lineNumber:t,startState:n}}},xT=class{_lineEndStates=new by(null);getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){let n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}acceptChanges(e){for(let t of e){let[n]=mo(t.text);this.acceptChange(new Oi(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}},ET=class{_ranges=[];getRanges(){return this._ranges}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;let e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new Gt(e.start+1,e.endExclusive),e.start}delete(e){let t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){let n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Gt(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new Gt(n.start,e):this._ranges.splice(t,1,new Gt(n.start,e),new Gt(e+1,n.endExclusive))}}addRange(e){Gt.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let i=n;for(;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;let r=t-e.length;for(let s=i;s<this._ranges.length;s++)this._ranges[s]=this._ranges[s].delta(r);if(n===i){let s=new Gt(e.start,e.start+t);s.isEmpty||this._ranges.splice(n,0,s)}else{let s=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),l=new Gt(s,a+r);l.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}};function ip(o,e,t,n,i,r){let s=null;if(t)try{s=t.tokenizeEncoded(n,i,r.clone())}catch(a){bt(a)}return s||(s=eP(o.encodeLanguageId(e),r)),Pn.convertToEndOffset(s.tokens,n.length),s}var yy=class{constructor(e,t){this._tokenizerWithStateStore=e;this._backgroundTokenStore=t}_isDisposed=!1;dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_isScheduled=!1;_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,pl(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?wf(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){let e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new Yd,n=Cd.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){let t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Oi(e,t))}};var Iy=class{_onDidChangeVisibleRanges=new x;onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event;_views=new Set;attachView(){let e=new CT(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}},CT=class{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){let n=e.map(i=>new Oi(i.startLineNumber,i.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}},Sy=class extends N{constructor(t){super();this._refreshTokens=t}runner=this._register(new yi(()=>this.update(),50));_computedLineRanges=[];_lineRanges=[];get lineRanges(){return this._lineRanges}update(){Wn(this._computedLineRanges,this._lineRanges,(t,n)=>t.equals(n))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(t){this._lineRanges=t.visibleLineRanges,t.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}},rp=class extends N{constructor(t,n,i){super();this._languageIdCodec=t;this._textModel=n;this.getLanguageId=i}_backgroundTokenizationState=1;get backgroundTokenizationState(){return this._backgroundTokenizationState}_onDidChangeBackgroundTokenizationState=this._register(new x);onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;_onDidChangeTokens=this._register(new x);onDidChangeTokens=this._onDidChangeTokens.event;tokenizeIfCheap(t){this.isCheapToTokenize(t)&&this.forceTokenization(t)}};var tP=H("treeSitterParserService");var tg=class extends rp{constructor(t,n,i,r){super(n,i,r);this._treeSitterService=t;this._initialize()}_tokenizationSupport=null;_lastLanguageId;_initialize(){let t=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==t)&&(this._lastLanguageId=t,this._tokenizationSupport=Em.get(t))}getLineTokens(t){let n=this._textModel.getLineContent(t);if(this._tokenizationSupport){let i=this._tokenizationSupport.tokenizeEncoded(t,this._textModel);if(i)return new Pn(i,n,this._languageIdCodec)}return Pn.createEmpty(n,this._languageIdCodec)}resetTokenization(t=!0){t&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(t){t.isFlush&&this.resetTokenization(!1)}forceTokenization(t){}hasAccurateTokensForLine(t){return!0}isCheapToTokenize(t){return!0}getTokenTypeIfInsertingCharacter(t,n,i){return 0}tokenizeLineWithEdit(t,n){return{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}};var ng=class o{_lineTokens;_len;_languageIdCodec;constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==ks)return new Pn(Ds(i),n,this._languageIdCodec);let r=new Uint32Array(2);return r[0]=n.length,r[1]=nP(this._languageIdCodec.encodeLanguageId(e)),new Pn(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){let i=n?Ds(n):null;if(t===0){let r=!1;if(i&&i.length>1&&(r=_o.getLanguageId(i[1])!==e),!r)return ks}if(!i||i.length===0){let r=new Uint32Array(2);return r[0]=t,r[1]=nP(e),r.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=Ja(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,r){let s=o._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);let a=this._lineTokens[t];return this._lineTokens[t]=s,r?!o._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let n=Ds(e),i=Ds(t);if(n.length!==i.length)return!1;for(let r=0,s=n.length;r<s;r++)if(n[r]!==i[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new te(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Gn.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Gn.deleteEnding(this._lineTokens[t],e.startColumn-1);let n=e.endLineNumber-1,i=null;n<this._len&&(i=Gn.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Gn.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=Gn.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=Gn.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=Gn.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};let n=[];for(let i=0,r=e.length;i<r;i++){let s=e[i],a=0,l=0,d=!1;for(let u=s.startLineNumber;u<=s.endLineNumber;u++)d?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),s.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),s.getLineTokens(u),!0)&&(d=!0,a=u,l=u);d&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}};function nP(o){return(o<<0|0|0|32768|2<<24|1024)>>>0}var xy=class o{_pieces;_isComplete;_languageIdCodec;constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){let r=t[0].getRange(),s=t[t.length-1].getRange();if(!r||!s)return e;n=e.plusRange(r).plusRange(s)}let i=null;for(let r=0,s=this._pieces.length;r<s;r++){let a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:r};continue}let[l,d]=a.split(n);if(l.isEmpty()){i=i||{index:r};continue}d.isEmpty()||(this._pieces.splice(r,1,l,d),r++,s++,i=i||{index:r})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=Ja(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;let n=this._pieces;if(n.length===0)return t;let i=o._findFirstPieceWithLine(n,e),r=n[i].getLineTokens(e);if(!r)return t;let s=t.getCount(),a=r.getCount(),l=0,d=[],u=0,p=0,h=(m,g)=>{m!==p&&(p=m,d[u++]=m,d[u++]=g)};for(let m=0;m<a;m++){let g=r.getStartCharacter(m),f=r.getEndCharacter(m),y=r.getMetadata(m),C=((y&1?2048:0)|(y&2?4096:0)|(y&4?8192:0)|(y&8?16384:0)|(y&16?16744448:0)|(y&32?4278190080:0))>>>0,w=~C>>>0;for(;l<s&&t.getEndOffset(l)<=g;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<s&&t.getStartOffset(l)<g&&h(g,t.getMetadata(l));l<s&&t.getEndOffset(l)<f;)h(t.getEndOffset(l),t.getMetadata(l)&w|y&C),l++;if(l<s)h(f,t.getMetadata(l)&w|y&C),t.getEndOffset(l)===f&&l++;else{let R=Math.min(Math.max(0,l-1),s-1);h(f,t.getMetadata(R)&w|y&C)}}for(;l<s;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Pn(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let r=n+Math.floor((i-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)i=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,i,r){for(let s of this._pieces)s.acceptEdit(e,t,n,i,r)}};var ka=class extends Xu{constructor(t,n,i,r,s,a,l){super();this._textModel=t;this._bracketPairsTextModelPart=n;this._languageId=i;this._attachedViews=r;this._languageService=s;this._languageConfigurationService=a;this._treeSitterService=l;this._register(this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(G.filter(Em.onDidChange,d=>d.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}_semanticTokens=new xy(this._languageService.languageIdCodec);_onDidChangeLanguage=this._register(new x);onDidChangeLanguage=this._onDidChangeLanguage.event;_onDidChangeLanguageConfiguration=this._register(new x);onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event;_onDidChangeTokens=this._register(new x);onDidChangeTokens=this._onDidChangeTokens.event;_tokens;_tokensDisposables=this._register(new Y);createGrammarTokens(){return this._register(new Ey(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new tg(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(t){let n=this._tokens!==void 0;this._tokens?.dispose(),this._tokens=t?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(i=>{this._emitModelTokensChangedEvent(i)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(i=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),n&&this._tokens.resetTokenization()}createPreferredTokenProvider(){Em.get(this._languageId)?this._tokens instanceof tg||this.createTokens(!0):this._tokens instanceof Ey||this.createTokens(!1)}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(t){t.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(t){if(t.isFlush)this._semanticTokens.flush();else if(!t.isEolChange)for(let n of t.changes){let[i,r,s]=mo(n.text);this._semanticTokens.acceptEdit(n.range,i,r,s,n.text.length>0?n.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(t)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(t){this.validateLineNumber(t);let n=this._tokens.getLineTokens(t);return this._semanticTokens.addSparseTokens(t,n)}_emitModelTokensChangedEvent(t){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(t),this._onDidChangeTokens.fire(t))}validateLineNumber(t){if(t<1||t>this._textModel.getLineCount())throw new ut("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(t){this.validateLineNumber(t),this._tokens.forceTokenization(t)}hasAccurateTokensForLine(t){return this.validateLineNumber(t),this._tokens.hasAccurateTokensForLine(t)}isCheapToTokenize(t){return this.validateLineNumber(t),this._tokens.isCheapToTokenize(t)}tokenizeIfCheap(t){this.validateLineNumber(t),this._tokens.tokenizeIfCheap(t)}getTokenTypeIfInsertingCharacter(t,n,i){return this._tokens.getTokenTypeIfInsertingCharacter(t,n,i)}tokenizeLineWithEdit(t,n){return this._tokens.tokenizeLineWithEdit(t,n)}setSemanticTokens(t,n){this._semanticTokens.set(t,n),this._emitModelTokensChangedEvent({semanticTokensApplied:t!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(t,n){if(this.hasCompleteSemanticTokens())return;let i=this._textModel.validateRange(this._semanticTokens.setPartial(t,n));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(t){this.assertNotDisposed();let n=this._textModel.validatePosition(t),i=this._textModel.getLineContent(n.lineNumber),r=this.getLineTokens(n.lineNumber),s=r.findTokenIndexAtOffset(n.column-1),[a,l]=ka._findLanguageBoundaries(r,s),d=Pb(n.column,this.getLanguageConfiguration(r.getLanguageId(s)).getWordDefinition(),i.substring(a,l),a);if(d&&d.startColumn<=t.column&&t.column<=d.endColumn)return d;if(s>0&&a===n.column-1){let[u,p]=ka._findLanguageBoundaries(r,s-1),h=Pb(n.column,this.getLanguageConfiguration(r.getLanguageId(s-1)).getWordDefinition(),i.substring(u,p),u);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn)return h}return null}getLanguageConfiguration(t){return this._languageConfigurationService.getLanguageConfiguration(t)}static _findLanguageBoundaries(t,n){let i=t.getLanguageId(n),r=0;for(let a=n;a>=0&&t.getLanguageId(a)===i;a--)r=t.getStartOffset(a);let s=t.getLineContent().length;for(let a=n,l=t.getCount();a<l&&t.getLanguageId(a)===i;a++)s=t.getEndOffset(a);return[r,s]}getWordUntilPosition(t){let n=this.getWordAtPosition(t);return n?{word:n.word.substr(0,t.column-n.startColumn),startColumn:n.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(t,n){let i=this._textModel.validatePosition(new te(t,n)),r=this.getLineTokens(i.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(i.column-1))}setLanguageId(t,n="api"){if(this._languageId===t)return;let i={oldLanguage:this._languageId,newLanguage:t,source:n};this._languageId=t,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};ka=k([I(4,Pi),I(5,fo),I(6,tP)],ka);var Ey=class extends rp{_tokenizer=null;_defaultBackgroundTokenizer=null;_backgroundTokenizer=this._register(new ot);_tokens=new ng(this._languageIdCodec);_debugBackgroundTokens;_debugBackgroundStates;_debugBackgroundTokenizer=this._register(new ot);_attachedViewStates=this._register(new kr);constructor(e,t,n,i){super(e,t,n),this._register(lw.onDidChange(r=>{let s=this.getLanguageId();r.changedLanguages.indexOf(s)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(i.onDidChangeVisibleRanges(({view:r,state:s})=>{if(s){let a=this._attachedViewStates.get(r);a||(a=new Sy(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(s)}else this._attachedViewStates.deleteAndDispose(r)}))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new op(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let r=lw.get(this.getLanguageId());if(!r)return[null,null];let s;try{s=r.getInitialState()}catch(a){return bt(a),[null,null]}return[r,s]},[n,i]=t();if(n&&i?this._tokenizer=new vy(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let r={setTokens:s=>{this.setTokens(s)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;let s=2;this._backgroundTokenizationState=s,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(s,a)=>{if(!this._tokenizer)return;let l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&s>=l&&this._tokenizer?.store.setEndState(s,a)}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new yy(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),n?.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new ng(this._languageIdCodec),this._debugBackgroundStates=new op(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:s=>{this._debugBackgroundTokens?.setMultilineTokens(s,this._textModel)},backgroundTokenizationFinished(){},setEndState:(s,a)=>{this._debugBackgroundStates?.setEndState(s,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(let t of e.changes){let[n,i]=mo(t.text);this._tokens.acceptEdit(t.range,n,i),this._debugBackgroundTokens?.acceptEdit(t.range,n,i)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){let{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){let e=Oi.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(let t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);let n=new Yd,{heuristicTokens:i}=this._tokenizer.tokenizeHeuristically(n,e,t),r=this.setTokens(n.finalize());if(i)for(let s of r.changes)this._backgroundTokenizer.value?.requestTokens(s.fromLineNumber,s.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){let t=new Yd;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){let t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){let i=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(i)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;let i=this._textModel.validatePosition(new te(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLineWithEdit(e,t)):{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._tokens.hasTokens}};function og(o){let e=new np;return e.acceptChunk(o),e.finish()}function sP(o){return new Promise((e,t)=>{let n=new np,i=!1;qC(o,{onData:r=>{n.acceptChunk(typeof r=="string"?r:r.toString())},onError:r=>{i||(i=!0,t(r))},onEnd:()=>{i||(i=!0,e(n.finish()))}})})}function o4(o){let e=new np,t;for(;typeof(t=o.read())=="string";)e.acceptChunk(t);return e.finish()}function iP(o,e){let t;return typeof o=="string"?t=og(o):LR(o)?t=o4(o):t=o,t.create(e)}var Cy=0,r4=999,s4=1e4,TT=class{_source;_eos;constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}},ig=()=>{throw new Error("Invalid change accessor")};var Ns=class extends N{constructor(t,n,i,r=null,s,a,l,d){super();this._undoRedoService=s;this._languageService=a;this._languageConfigurationService=l;this.instantiationService=d;Cy++,this.id="$model"+Cy,this.isForSimpleWidget=i.isForSimpleWidget,typeof r>"u"||r===null?this._associatedResource=j.parse("inmemory://model/"+Cy):this._associatedResource=r,this._attachedEditorCount=0;let{textBuffer:u,disposable:p}=iP(t,i.defaultEOL);this._buffer=u,this._bufferDisposable=p,this._options=Ns.resolveOptions(this._buffer,i);let h=typeof n=="string"?n:n.languageId;typeof n!="string"&&(this._languageSelectionListener.value=n.onDidChange(()=>this._setLanguage(n.languageId))),this._bracketPairs=this._register(new Xv(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new py(this,this._languageConfigurationService)),this._decorationProvider=this._register(new ly(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(ka,this,this._bracketPairs,h,this._attachedViews);let m=this._buffer.getLineCount(),g=this._buffer.getValueLengthInRange(new P(1,1,m,this._buffer.getLineLength(m)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=g>Ns.LARGE_FILE_SIZE_THRESHOLD||m>Ns.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=g>Ns.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=g>Ns._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=h0(Cy),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Ty,this._commandManager=new uy(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(h),this._register(this._languageConfigurationService.onDidChange(f=>{this._bracketPairs.handleLanguageConfigurationServiceChange(f),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(f)}))}static _MODEL_SYNC_LIMIT=50*1024*1024;static LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;static LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;static LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;static DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Es.tabSize,indentSize:Es.indentSize,insertSpaces:Es.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Es.trimAutoWhitespace,largeFileOptimizations:Es.largeFileOptimizations,bracketPairColorizationOptions:Es.bracketPairColorizationOptions};static resolveOptions(t,n){if(n.detectIndentation){let i=cT(t,n.tabSize,n.insertSpaces);return new Ou({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:n.trimAutoWhitespace,defaultEOL:n.defaultEOL,bracketPairColorizationOptions:n.bracketPairColorizationOptions})}return new Ou(n)}_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;_onDidChangeDecorations=this._register(new LT(t=>this.handleBeforeFireDecorationsChangedEvent(t)));onDidChangeDecorations=this._onDidChangeDecorations.event;get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}_onDidChangeOptions=this._register(new x);onDidChangeOptions=this._onDidChangeOptions.event;_onDidChangeAttached=this._register(new x);onDidChangeAttached=this._onDidChangeAttached.event;_onDidChangeInjectedText=this._register(new x);_eventEmitter=this._register(new RT);onDidChangeContent(t){return this._eventEmitter.slowEvent(n=>t(n.contentChangedEvent))}onDidChangeContentOrInjectedText(t){return _i(this._eventEmitter.fastEvent(n=>t(n)),this._onDidChangeInjectedText.event(n=>t(n)))}id;isForSimpleWidget;_associatedResource;_attachedEditorCount;_buffer;_bufferDisposable;_options;_languageSelectionListener=this._register(new ot);_isDisposed;__isDisposing;_isDisposing(){return this.__isDisposing}_versionId;_alternativeVersionId;_initialUndoRedoSnapshot;_isTooLargeForSyncing;_isTooLargeForTokenization;_isTooLargeForHeapOperation;_commandManager;_isUndoing;_isRedoing;_trimAutoWhitespaceLines;_instanceId;_deltaDecorationCallCnt=0;_lastDecorationId;_decorations;_decorationsTree;_decorationProvider;_tokenizationTextModelPart;get tokenization(){return this._tokenizationTextModelPart}_bracketPairs;get bracketPairs(){return this._bracketPairs}_guidesTextModelPart;get guides(){return this._guidesTextModelPart}_attachedViews=new Iy;dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let t=new tp([],"",`
`,!1,!1,!0,!0);t.dispose(),this._buffer=t,this._bufferDisposable=N.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new ut("Model is disposed!")}equalsTextBuffer(t){return this._assertNotDisposed(),this._buffer.equals(t)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(t,n){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(n),this._bracketPairs.handleDidChangeContent(n),this._eventEmitter.fire(new Uv(t,n)))}setValue(t){if(this._assertNotDisposed(),t==null)throw gd();let{textBuffer:n,disposable:i}=iP(t,this._options.defaultEOL);this._setValueFromTextBuffer(n,i)}_createContentChanged2(t,n,i,r,s,a,l,d){return{changes:[{range:t,rangeOffset:n,rangeLength:i,text:r}],eol:this._buffer.getEOL(),isEolChange:d,versionId:this.getVersionId(),isUndoing:s,isRedoing:a,isFlush:l}}_setValueFromTextBuffer(t,n){this._assertNotDisposed();let i=this.getFullModelRange(),r=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._buffer=t,this._bufferDisposable.dispose(),this._bufferDisposable=n,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new Ty,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Gd([new Nv],this._versionId,!1,!1),this._createContentChanged2(new P(1,1,s,a),0,r,this.getValue(),!1,!1,!0,!1))}setEOL(t){this._assertNotDisposed();let n=t===1?`\r
`:`
`;if(this._buffer.getEOL()===n)return;let i=this.getFullModelRange(),r=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(n),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Gd([new Vv],this._versionId,!1,!1),this._createContentChanged2(new P(1,1,s,a),0,r,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let t=this.getVersionId(),n=this._decorationsTree.collectNodesPostOrder();for(let i=0,r=n.length;i<r;i++){let s=n[i],a=s.range,l=s.cachedAbsoluteStart-s.start,d=this._buffer.getOffsetAt(a.startLineNumber,a.startColumn),u=this._buffer.getOffsetAt(a.endLineNumber,a.endColumn);s.cachedAbsoluteStart=d,s.cachedAbsoluteEnd=u,s.cachedVersionId=t,s.start=d-l,s.end=u-l,Ca(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(t){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(t)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let t=0,n=0,i=this._buffer.getLineCount();for(let r=1;r<=i;r++){let s=this._buffer.getLineLength(r);s>=s4?n+=s:t+=s}return n>t}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(t){this._assertNotDisposed();let n=typeof t.tabSize<"u"?t.tabSize:this._options.tabSize,i=typeof t.indentSize<"u"?t.indentSize:this._options.originalIndentSize,r=typeof t.insertSpaces<"u"?t.insertSpaces:this._options.insertSpaces,s=typeof t.trimAutoWhitespace<"u"?t.trimAutoWhitespace:this._options.trimAutoWhitespace,a=typeof t.bracketColorizationOptions<"u"?t.bracketColorizationOptions:this._options.bracketPairColorizationOptions,l=new Ou({tabSize:n,indentSize:i,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:a});if(this._options.equals(l))return;let d=this._options.createChangeEvent(l);this._options=l,this._bracketPairs.handleDidChangeOptions(d),this._decorationProvider.handleDidChangeOptions(d),this._onDidChangeOptions.fire(d)}detectIndentation(t,n){this._assertNotDisposed();let i=cT(this._buffer,n,t);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(t){return this._assertNotDisposed(),Vm(t,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(t=null){let n=this.findMatches(iE.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(t,n.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(t){this._assertNotDisposed();let n=this._validatePosition(t.lineNumber,t.column,0);return this._buffer.getOffsetAt(n.lineNumber,n.column)}getPositionAt(t){this._assertNotDisposed();let n=Math.min(this._buffer.getLength(),Math.max(0,t));return this._buffer.getPositionAt(n)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(t){this._versionId=t}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t}_overwriteInitialUndoRedoSnapshot(t){this._initialUndoRedoSnapshot=t}getValue(t,n=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new ut("Operation would exceed heap memory limits");let i=this.getFullModelRange(),r=this.getValueInRange(i,t);return n?this._buffer.getBOM()+r:r}createSnapshot(t=!1){return new TT(this._buffer.createSnapshot(t))}getValueLength(t,n=!1){this._assertNotDisposed();let i=this.getFullModelRange(),r=this.getValueLengthInRange(i,t);return n?this._buffer.getBOM().length+r:r}getValueInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(t),n)}getValueLengthInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(t),n)}getCharacterCountInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(t),n)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ut("Illegal value for lineNumber");return this._buffer.getLineContent(t)}getLineLength(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ut("Illegal value for lineNumber");return this._buffer.getLineLength(t)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new ut("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(t){return this._assertNotDisposed(),1}getLineMaxColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ut("Illegal value for lineNumber");return this._buffer.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ut("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(t)}getLineLastNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ut("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(t)}_validateRangeRelaxedNoAllocations(t){let n=this._buffer.getLineCount(),i=t.startLineNumber,r=t.startColumn,s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),a=Math.floor(typeof r=="number"&&!isNaN(r)?r:1);if(s<1)s=1,a=1;else if(s>n)s=n,a=this.getLineMaxColumn(s);else if(a<=1)a=1;else{let h=this.getLineMaxColumn(s);a>=h&&(a=h)}let l=t.endLineNumber,d=t.endColumn,u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1),p=Math.floor(typeof d=="number"&&!isNaN(d)?d:1);if(u<1)u=1,p=1;else if(u>n)u=n,p=this.getLineMaxColumn(u);else if(p<=1)p=1;else{let h=this.getLineMaxColumn(u);p>=h&&(p=h)}return i===s&&r===a&&l===u&&d===p&&t instanceof P&&!(t instanceof Je)?t:new P(s,a,u,p)}_isValidPosition(t,n,i){if(typeof t!="number"||typeof n!="number"||isNaN(t)||isNaN(n)||t<1||n<1||(t|0)!==t||(n|0)!==n)return!1;let r=this._buffer.getLineCount();if(t>r)return!1;if(n===1)return!0;let s=this.getLineMaxColumn(t);if(n>s)return!1;if(i===1){let a=this._buffer.getLineCharCode(t,n-2);if(ko(a))return!1}return!0}_validatePosition(t,n,i){let r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),a=this._buffer.getLineCount();if(r<1)return new te(1,1);if(r>a)return new te(a,this.getLineMaxColumn(a));if(s<=1)return new te(r,1);let l=this.getLineMaxColumn(r);if(s>=l)return new te(r,l);if(i===1){let d=this._buffer.getLineCharCode(r,s-2);if(ko(d))return new te(r,s-1)}return new te(r,s)}validatePosition(t){let n=1;return this._assertNotDisposed(),t instanceof te&&this._isValidPosition(t.lineNumber,t.column,n)?t:this._validatePosition(t.lineNumber,t.column,n)}_isValidRange(t,n){let i=t.startLineNumber,r=t.startColumn,s=t.endLineNumber,a=t.endColumn;if(!this._isValidPosition(i,r,0)||!this._isValidPosition(s,a,0))return!1;if(n===1){let l=r>1?this._buffer.getLineCharCode(i,r-2):0,d=a>1&&a<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,a-2):0,u=ko(l),p=ko(d);return!u&&!p}return!0}validateRange(t){let n=1;if(this._assertNotDisposed(),t instanceof P&&!(t instanceof Je)&&this._isValidRange(t,n))return t;let i=this._validatePosition(t.startLineNumber,t.startColumn,0),r=this._validatePosition(t.endLineNumber,t.endColumn,0),s=i.lineNumber,a=i.column,l=r.lineNumber,d=r.column;if(n===1){let u=a>1?this._buffer.getLineCharCode(s,a-2):0,p=d>1&&d<=this._buffer.getLineLength(l)?this._buffer.getLineCharCode(l,d-2):0,h=ko(u),m=ko(p);return!h&&!m?new P(s,a,l,d):s===l&&a===d?new P(s,a-1,l,d-1):h&&m?new P(s,a-1,l,d+1):h?new P(s,a-1,l,d):new P(s,a,l,d+1)}return new P(s,a,l,d)}modifyPosition(t,n){this._assertNotDisposed();let i=this.getOffsetAt(t)+n;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();let t=this.getLineCount();return new P(1,1,t,this.getLineMaxColumn(t))}findMatchesLineByLine(t,n,i,r){return this._buffer.findMatchesLineByLine(t,n,i,r)}findMatches(t,n,i,r,s,a,l=r4){this._assertNotDisposed();let d=null;n!==null&&(Array.isArray(n)||(n=[n]),n.every(h=>P.isIRange(h))&&(d=n.map(h=>this.validateRange(h)))),d===null&&(d=[this.getFullModelRange()]),d=d.sort((h,m)=>h.startLineNumber-m.startLineNumber||h.startColumn-m.startColumn);let u=[];u.push(d.reduce((h,m)=>P.areIntersecting(h,m)?h.plusRange(m):(u.push(h),m)));let p;if(!i&&t.indexOf(`
`)<0){let m=new wa(t,i,r,s).parseSearchRequest();if(!m)return[];p=g=>this.findMatchesLineByLine(g,m,a,l)}else p=h=>jd.findMatches(this,new wa(t,i,r,s),h,a,l);return u.map(p).reduce((h,m)=>h.concat(m),[])}findNextMatch(t,n,i,r,s,a){this._assertNotDisposed();let l=this.validatePosition(n);if(!i&&t.indexOf(`
`)<0){let u=new wa(t,i,r,s).parseSearchRequest();if(!u)return null;let p=this.getLineCount(),h=new P(l.lineNumber,l.column,p,this.getLineMaxColumn(p)),m=this.findMatchesLineByLine(h,u,a,1);return jd.findNextMatch(this,new wa(t,i,r,s),l,a),m.length>0||(h=new P(1,1,l.lineNumber,this.getLineMaxColumn(l.lineNumber)),m=this.findMatchesLineByLine(h,u,a,1),m.length>0)?m[0]:null}return jd.findNextMatch(this,new wa(t,i,r,s),l,a)}findPreviousMatch(t,n,i,r,s,a){this._assertNotDisposed();let l=this.validatePosition(n);return jd.findPreviousMatch(this,new wa(t,i,r,s),l,a)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(t){if((this.getEOL()===`
`?0:1)!==t)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(t){return t instanceof Pu?t:new Pu(t.identifier||null,this.validateRange(t.range),t.text,t.forceMoveMarkers||!1,t.isAutoWhitespaceEdit||!1,t._isTracked||!1)}_validateEditOperations(t){let n=[];for(let i=0,r=t.length;i<r;i++)n[i]=this._validateEditOperation(t[i]);return n}pushEditOperations(t,n,i,r){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(t,this._validateEditOperations(n),i,r)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(t,n,i,r){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=n.map(l=>({range:this.validateRange(l.range),text:l.text})),a=!0;if(t)for(let l=0,d=t.length;l<d;l++){let u=t[l],p=!1;for(let h=0,m=s.length;h<m;h++){let g=s[h].range,f=g.startLineNumber>u.endLineNumber,y=u.startLineNumber>g.endLineNumber;if(!f&&!y){p=!0;break}}if(!p){a=!1;break}}if(a)for(let l=0,d=this._trimAutoWhitespaceLines.length;l<d;l++){let u=this._trimAutoWhitespaceLines[l],p=this.getLineMaxColumn(u),h=!0;for(let m=0,g=s.length;m<g;m++){let f=s[m].range,y=s[m].text;if(!(u<f.startLineNumber||u>f.endLineNumber)&&!(u===f.startLineNumber&&f.startColumn===p&&f.isEmpty()&&y&&y.length>0&&y.charAt(0)===`
`)&&!(u===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&y&&y.length>0&&y.charAt(y.length-1)===`
`)){h=!1;break}}if(h){let m=new P(u,1,u,p);n.push(new Pu(null,m,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(t,n,i,r)}_applyUndo(t,n,i,r){let s=t.map(a=>{let l=this.getPositionAt(a.newPosition),d=this.getPositionAt(a.newEnd);return{range:new P(l.lineNumber,l.column,d.lineNumber,d.column),text:a.oldText}});this._applyUndoRedoEdits(s,n,!0,!1,i,r)}_applyRedo(t,n,i,r){let s=t.map(a=>{let l=this.getPositionAt(a.oldPosition),d=this.getPositionAt(a.oldEnd);return{range:new P(l.lineNumber,l.column,d.lineNumber,d.column),text:a.newText}});this._applyUndoRedoEdits(s,n,!1,!0,i,r)}_applyUndoRedoEdits(t,n,i,r,s,a){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=r,this.applyEdits(t,!1),this.setEOL(n),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(a),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(t,n=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let i=this._validateEditOperations(t);return this._doApplyEdits(i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(t,n){let i=this._buffer.getLineCount(),r=this._buffer.applyEdits(t,this._options.trimAutoWhitespace,n),s=this._buffer.getLineCount(),a=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,a.length!==0){for(let u=0,p=a.length;u<p;u++){let h=a[u];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let l=[];this._increaseVersionId();let d=i;for(let u=0,p=a.length;u<p;u++){let h=a[u],[m]=mo(h.text);this._onDidChangeDecorations.fire();let g=h.range.startLineNumber,f=h.range.endLineNumber,y=f-g,C=m,w=Math.min(y,C),R=C-y,_=s-d-R+g,B=_,K=_+C,F=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new te(B,1)),this.getOffsetAt(new te(K,this.getLineMaxColumn(K))),0),V=Pm.fromDecorations(F),oe=new fd(V);for(let ge=w;ge>=0;ge--){let we=g+ge,ht=_+ge;oe.takeFromEndWhile(gt=>gt.lineNumber>ht);let tt=oe.takeFromEndWhile(gt=>gt.lineNumber===ht);l.push(new Mm(we,this.getLineContent(ht),tt))}if(w<y){let ge=g+w;l.push(new Fv(ge+1,f))}if(w<C){let ge=new fd(V),we=g+w,ht=C-w,tt=s-d-ht+we+1,gt=[],ve=[];for(let se=0;se<ht;se++){let Ie=tt+se;ve[se]=this.getLineContent(Ie),ge.takeWhile(fe=>fe.lineNumber<Ie),gt[se]=ge.takeWhile(fe=>fe.lineNumber===Ie)}l.push(new Bv(we+1,g+C,ve,gt))}d+=R}this._emitContentChangedEvent(new Gd(l,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:a,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(t){if(t===null||t.size===0)return;let i=Array.from(t).map(r=>new Mm(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeInjectedText.fire(new Wv(i))}changeDecorations(t,n=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(n,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(t,n){let i={addDecoration:(s,a)=>this._deltaDecorationsImpl(t,[],[{range:s,options:a}])[0],changeDecoration:(s,a)=>{this._changeDecorationImpl(s,a)},changeDecorationOptions:(s,a)=>{this._changeDecorationOptionsImpl(s,rP(a))},removeDecoration:s=>{this._deltaDecorationsImpl(t,[s],[])},deltaDecorations:(s,a)=>s.length===0&&a.length===0?[]:this._deltaDecorationsImpl(t,s,a)},r=null;try{r=n(i)}catch(s){bt(s)}return i.addDecoration=ig,i.changeDecoration=ig,i.changeDecorationOptions=ig,i.removeDecoration=ig,i.deltaDecorations=ig,r}deltaDecorations(t,n,i=0){if(this._assertNotDisposed(),t||(t=[]),t.length===0&&n.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),bt(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,t,n)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(t){return this.getDecorationRange(t)}_setTrackedRange(t,n,i){let r=t?this._decorations[t]:null;if(!r)return n?this._deltaDecorationsImpl(0,[],[{range:n,options:oP[i]}],!0)[0]:null;if(!n)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;let s=this._validateRangeRelaxedNoAllocations(n),a=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),l=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),a,l,s),r.setOptions(oP[i]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(t){if(this._isDisposed)return;let n=this._decorationsTree.collectNodesFromOwner(t);for(let i=0,r=n.length;i<r;i++){let s=n[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(t){let n=this._decorations[t];return n?n.options:null}getDecorationRange(t){let n=this._decorations[t];return n?this._decorationsTree.getNodeRange(this,n):null}getLineDecorations(t,n=0,i=!1){return t<1||t>this.getLineCount()?[]:this.getLinesDecorations(t,t,n,i)}getLinesDecorations(t,n,i=0,r=!1,s=!1){let a=this.getLineCount(),l=Math.min(a,Math.max(1,t)),d=Math.min(a,Math.max(1,n)),u=this.getLineMaxColumn(d),p=new P(l,1,d,u),h=this._getDecorationsInRange(p,i,r,s);return yx(h,this._decorationProvider.getDecorationsInRange(p,i,r)),h}getDecorationsInRange(t,n=0,i=!1,r=!1,s=!1){let a=this.validateRange(t),l=this._getDecorationsInRange(a,n,i,s);return yx(l,this._decorationProvider.getDecorationsInRange(a,n,i,r)),l}getOverviewRulerDecorations(t=0,n=!1){return this._decorationsTree.getAll(this,t,n,!0,!1)}getInjectedTextDecorations(t=0){return this._decorationsTree.getAllInjectedText(this,t)}_getInjectedTextInLine(t){let n=this._buffer.getOffsetAt(t,1),i=n+this._buffer.getLineLength(t),r=this._decorationsTree.getInjectedTextInInterval(this,n,i,0);return Pm.fromDecorations(r).filter(s=>s.lineNumber===t)}getAllDecorations(t=0,n=!1){let i=this._decorationsTree.getAll(this,t,n,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(t,n)),i}getAllMarginDecorations(t=0){return this._decorationsTree.getAll(this,t,!1,!1,!0)}_getDecorationsInRange(t,n,i,r){let s=this._buffer.getOffsetAt(t.startLineNumber,t.startColumn),a=this._buffer.getOffsetAt(t.endLineNumber,t.endColumn);return this._decorationsTree.getAllInInterval(this,s,a,n,i,r)}getRangeAt(t,n){return this._buffer.getRangeAt(t,n-t)}_changeDecorationImpl(t,n){let i=this._decorations[t];if(!i)return;if(i.options.after){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}let r=this._validateRangeRelaxedNoAllocations(n),s=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,a,r),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(t,n){let i=this._decorations[t];if(!i)return;let r=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(n.overviewRuler&&n.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(n),i.options.after||n.after){let d=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber)}if(i.options.before||n.before){let d=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber)}let a=r!==s,l=l4(n)!==wy(i);a||l?(this._decorationsTree.delete(i),i.setOptions(n),this._decorationsTree.insert(i)):i.setOptions(n)}_deltaDecorationsImpl(t,n,i,r=!1){let s=this.getVersionId(),a=n.length,l=0,d=i.length,u=0;this._onDidChangeDecorations.beginDeferredEmit();try{let p=new Array(d);for(;l<a||u<d;){let h=null;if(l<a){do h=this._decorations[n[l++]];while(!h&&l<a);if(h){if(h.options.after){let m=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(m.endLineNumber)}if(h.options.before){let m=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(m.startLineNumber)}this._decorationsTree.delete(h),r||this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(u<d){if(!h){let w=++this._lastDecorationId,R=`${this._instanceId};${w}`;h=new Qm(R,0,0),this._decorations[R]=h}let m=i[u],g=this._validateRangeRelaxedNoAllocations(m.range),f=rP(m.options),y=this._buffer.getOffsetAt(g.startLineNumber,g.startColumn),C=this._buffer.getOffsetAt(g.endLineNumber,g.endColumn);h.ownerId=t,h.reset(s,y,C,g),h.setOptions(f),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber),r||this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(h),p[u]=h.id,u++}else h&&delete this._decorations[h.id]}return p}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(t,n){typeof t=="string"?(this._languageSelectionListener.clear(),this._setLanguage(t,n)):(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId,n)),this._setLanguage(t.languageId,n))}_setLanguage(t,n){this.tokenization.setLanguageId(t,n),this._languageService.requestRichLanguageFeatures(t)}getLanguageIdAtPosition(t,n){return this.tokenization.getLanguageIdAtPosition(t,n)}getWordAtPosition(t){return this._tokenizationTextModelPart.getWordAtPosition(t)}getWordUntilPosition(t){return this._tokenizationTextModelPart.getWordUntilPosition(t)}normalizePosition(t,n){return t}getLineIndentColumn(t){return a4(this.getLineContent(t))+1}};Ns=k([I(4,_R),I(5,Pi),I(6,fo),I(7,Ze)],Ns);function a4(o){let e=0;for(let t of o)if(t===" "||t==="	")e++;else break;return e}function wT(o){return!!(o.options.overviewRuler&&o.options.overviewRuler.color)}function l4(o){return!!o.after||!!o.before}function wy(o){return!!o.options.after||!!o.options.before}var Ty=class{_decorationsTree0;_decorationsTree1;_injectedTextDecorationsTree;constructor(){this._decorationsTree0=new Ju,this._decorationsTree1=new Ju,this._injectedTextDecorationsTree=new Ju}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(let n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,r,s){let a=e.getVersionId(),l=this._intervalSearch(t,n,i,r,a,s);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,i,r,s){let a=this._decorationsTree0.intervalSearch(e,t,n,i,r,s),l=this._decorationsTree1.intervalSearch(e,t,n,i,r,s),d=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,r,s);return a.concat(l).concat(d)}getInjectedTextInInterval(e,t,n,i){let r=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,r,!1);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){let n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,i).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,n,i,r){let s=e.getVersionId(),a=this._search(t,n,i,s,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,i,r){if(n)return this._decorationsTree1.search(e,t,i,r);{let s=this._decorationsTree0.search(e,t,i,r),a=this._decorationsTree1.search(e,t,i,r),l=this._injectedTextDecorationsTree.search(e,t,i,r);return s.concat(a).concat(l)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){wy(e)?this._injectedTextDecorationsTree.insert(e):wT(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){wy(e)?this._injectedTextDecorationsTree.delete(e):wT(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){wy(e)?this._injectedTextDecorationsTree.resolveNode(e,t):wT(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}};function Ms(o){return o.replace(/[^a-z0-9\-_]/gi," ")}var ky=class{color;darkColor;constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}},kT=class extends ky{position;_resolvedColor;constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:2}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}},DT=class{position;persistLane;constructor(e){this.position=e?.position??2,this.persistLane=e?.persistLane}},_T=class extends ky{position;sectionHeaderStyle;sectionHeaderText;_resolvedColor;constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?A.fromHex(e):t.getColor(e.id)}},Dy=class o{static from(e){return e instanceof o?e:new o(e)}content;tokens;inlineClassName;inlineClassNameAffectsLetterSpacing;attachedData;cursorStops;constructor(e){this.content=e.content||"",this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}},Fs=class o{static EMPTY;static register(e){return new o(e)}static createDynamic(e){return new o(e)}description;blockClassName;blockIsAfterEnd;blockDoesNotCollapse;blockPadding;stickiness;zIndex;className;shouldFillLineOnLineBreak;hoverMessage;glyphMarginHoverMessage;isWholeLine;showIfCollapsed;collapseOnReplaceEdit;overviewRuler;minimap;glyphMargin;glyphMarginClassName;linesDecorationsClassName;lineNumberClassName;lineNumberHoverMessage;linesDecorationsTooltip;firstLineDecorationClassName;marginClassName;inlineClassName;inlineClassNameAffectsLetterSpacing;beforeContentClassName;afterContentClassName;after;before;hideInCommentTokens;hideInStringTokens;constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?Ms(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Ms(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new kT(e.overviewRuler):null,this.minimap=e.minimap?new _T(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new DT(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Ms(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Ms(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?Ms(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?r0(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Ms(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Ms(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Ms(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Ms(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Ms(e.afterContentClassName):null,this.after=e.after?Dy.from(e.after):null,this.before=e.before?Dy.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}};Fs.EMPTY=Fs.register({description:"empty"});var oP=[Fs.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Fs.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Fs.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Fs.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function rP(o){return o instanceof Fs?o:Fs.createDynamic(o)}var LT=class extends N{constructor(t){super();this.handleBeforeFire=t;this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}_actual=this._register(new x);event=this._actual.event;_deferredCnt;_shouldFireDeferred;_affectsMinimap;_affectsOverviewRuler;_affectedInjectedTextLines=null;_affectsGlyphMargin;_affectsLineNumber;hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(t){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(t)}checkAffectedAndFire(t){this._affectsMinimap||=!!t.minimap?.position,this._affectsOverviewRuler||=!!t.overviewRuler?.color,this._affectsGlyphMargin||=!!t.glyphMarginClassName,this._affectsLineNumber||=!!t.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);let t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(t)}},RT=class extends N{_fastEmitter=this._register(new x);fastEvent=this._fastEmitter.event;_slowEmitter=this._register(new x);slowEvent=this._slowEmitter.event;_deferredCnt;_deferredEvent;constructor(){super(),this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}};var Wl=H("workingCopyService"),AT=class extends N{_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidUnregister=this._register(new x);onDidUnregister=this._onDidUnregister.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;get workingCopies(){return Array.from(this._workingCopies.values())}_workingCopies=new Set;mapResourceToWorkingCopies=new fi;mapWorkingCopyToListeners=this._register(new kr);registerWorkingCopy(e){let t=this.mapResourceToWorkingCopies.get(e.resource);if(t?.has(e.typeId))throw new Error(`Cannot register more than one working copy with the same resource ${e.resource.toString()} and type ${e.typeId}.`);this._workingCopies.add(e),t||(t=new Map,this.mapResourceToWorkingCopies.set(e.resource,t)),t.set(e.typeId,e);let n=new Y;return n.add(e.onDidChangeContent(()=>this._onDidChangeContent.fire(e))),n.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),n.add(e.onDidSave(i=>this._onDidSave.fire({workingCopy:e,...i}))),this.mapWorkingCopyToListeners.set(e,n),this._onDidRegister.fire(e),e.isDirty()&&this._onDidChangeDirty.fire(e),re(()=>{this.unregisterWorkingCopy(e),this._onDidUnregister.fire(e)})}unregisterWorkingCopy(e){this._workingCopies.delete(e);let t=this.mapResourceToWorkingCopies.get(e.resource);t?.delete(e.typeId)&&t.size===0&&this.mapResourceToWorkingCopies.delete(e.resource),e.isDirty()&&this._onDidChangeDirty.fire(e),this.mapWorkingCopyToListeners.deleteAndDispose(e)}has(e){return j.isUri(e)?this.mapResourceToWorkingCopies.has(e):this.mapResourceToWorkingCopies.get(e.resource)?.has(e.typeId)??!1}get(e){return this.mapResourceToWorkingCopies.get(e.resource)?.get(e.typeId)}getAll(e){let t=this.mapResourceToWorkingCopies.get(e);if(t)return Array.from(t.values())}get hasDirty(){for(let e of this._workingCopies)if(e.isDirty())return!0;return!1}get dirtyCount(){let e=0;for(let t of this._workingCopies)t.isDirty()&&e++;return e}get dirtyWorkingCopies(){return this.workingCopies.filter(e=>e.isDirty())}get modifiedCount(){let e=0;for(let t of this._workingCopies)t.isModified()&&e++;return e}get modifiedWorkingCopies(){return this.workingCopies.filter(e=>e.isModified())}isDirty(e,t){let n=this.mapResourceToWorkingCopies.get(e);if(n){if(typeof t=="string")return n.get(t)?.isDirty()??!1;for(let[,i]of n)if(i.isDirty())return!0}return!1}};qn(Wl,AT,1);var Xo=H("labelService");var $t=H("telemetryService"),Xve=H("customEndpointTelemetryService");var aP=H("productService"),lP="vscode://schemas/vscode-product";var br=H("dialogService");var Pye=H("fileDialogService");var qr=class extends rg{_onDidChangeDirty=this._register(new x);_onDidChangeLabel=this._register(new x);_onDidChangeCapabilities=this._register(new x);_onWillDispose=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;onDidChangeLabel=this._onDidChangeLabel.event;onDidChangeCapabilities=this._onDidChangeCapabilities.event;onWillDispose=this._onWillDispose.event;closeHandler;get editorId(){}get capabilities(){return 2}hasCapability(e){return e===0?this.capabilities===0:(this.capabilities&e)!==0}isReadonly(){return this.hasCapability(2)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(0)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}matches(e){if(jn(e))return this===e;let t=e.options?.override;return this.editorId!==t&&t!==void 0&&this.editorId!==void 0?!1:fn(this.resource,eo.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}};var Yn=class extends qr{constructor(t,n,i,r,s){super();this.preferredName=t;this.preferredDescription=n;this.secondary=i;this.primary=r;this.editorService=s;this.registerListeners()}static ID="workbench.editorinputs.sidebysideEditorInput";get typeId(){return Yn.ID}get capabilities(){let t=this.primary.capabilities;return t&=-33,this.secondary.hasCapability(16)&&(t|=16),this.secondary.hasCapability(8)&&(t|=8),t|=256,t}get resource(){if(this.hasIdenticalSides)return this.primary.resource}hasIdenticalSides=this.primary.matches(this.secondary);registerListeners(){this._register(G.once(G.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this._register(this.primary.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.primary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.secondary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.primary.onDidChangeLabel(()=>this._onDidChangeLabel.fire())),this._register(this.secondary.onDidChangeLabel(()=>this._onDidChangeLabel.fire()))}getName(){let t=this.getPreferredName();return t||(this.hasIdenticalSides?this.primary.getName():c("sideBySideLabels","{0} - {1}",this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.preferredName}getDescription(t){let n=this.getPreferredDescription();return n||(this.hasIdenticalSides?this.primary.getDescription(t):super.getDescription(t))}getPreferredDescription(){return this.preferredDescription}getTitle(t){let n;this.hasIdenticalSides?n=this.primary.getTitle(t)??this.getName():n=super.getTitle(t);let i=this.getPreferredTitle();return i&&(n=`${i} (${n})`),n}getPreferredTitle(){if(this.preferredName&&this.preferredDescription)return`${this.preferredName} ${this.preferredDescription}`;if(this.preferredName||this.preferredDescription)return this.preferredName??this.preferredDescription}getLabelExtraClasses(){return this.hasIdenticalSides?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.hasIdenticalSides?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return{...this.primary.getTelemetryDescriptor(),...super.getTelemetryDescriptor()}}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(t,n){let i=await this.primary.save(t,n);return this.saveResultToEditor(i)}async saveAs(t,n){let i=await this.primary.saveAs(t,n);return this.saveResultToEditor(i)}saveResultToEditor(t){if(!t||!this.hasIdenticalSides)return t;if(this.primary.matches(t))return this;if(t instanceof qr)return new Yn(this.preferredName,this.preferredDescription,t,t,this.editorService);if(!$r(t)&&!ap(t)&&!Bs(t)&&!Vs(t))return{primary:t,secondary:t,label:this.preferredName,description:this.preferredDescription}}revert(t,n){return this.primary.revert(t,n)}async rename(t,n){if(!this.hasIdenticalSides)return;let i=await this.primary.rename(t,n);if(i){if(jn(i.editor))return{editor:new Yn(this.preferredName,this.preferredDescription,i.editor,i.editor,this.editorService),options:{...i.options,viewState:sp(this,t,this.editorService)}};if(_y(i.editor))return{editor:{label:this.preferredName,description:this.preferredDescription,primary:i.editor,secondary:i.editor,options:{...i.options,viewState:sp(this,t,this.editorService)}}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(t){let n=this.primary.toUntyped(t),i=this.secondary.toUntyped(t);if(n&&i&&!$r(n)&&!$r(i)&&!ap(n)&&!ap(i)&&!Bs(n)&&!Bs(i)&&!Vs(n)&&!Vs(i)){let r={label:this.preferredName,description:this.preferredDescription,primary:n,secondary:i};return typeof t?.preserveViewState=="number"&&(r.options={viewState:sp(this,t.preserveViewState,this.editorService)}),r}}matches(t){return this===t?!0:OT(t)||$r(t)?!1:t instanceof Yn?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):Bs(t)?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):!1}};Yn=k([I(4,Xt)],Yn);var PT={LEFT:"left",RIGHT:"right",FIRST:"first",LAST:"last"};function c4(o){let e=o;return!!(e&&typeof e=="object"&&Array.isArray(e.editors)&&Array.isArray(e.mru))}var Ws=class extends N{constructor(t,n,i){super();this.instantiationService=n;this.configurationService=i;c4(t)?this._id=this.deserialize(t):this._id=Ws.IDS++,this.onConfigurationUpdated(),this.registerListeners()}static IDS=0;_onDidModelChange=this._register(new x({leakWarningThreshold:500}));onDidModelChange=this._onDidModelChange.event;_id;get id(){return this._id}editors=[];mru=[];editorListeners=new Set;locked=!1;selection=[];get active(){return this.selection[0]??null}preview=null;sticky=-1;transient=new Set;editorOpenPositioning;focusRecentEditorAfterClose;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationUpdated(t)))}onConfigurationUpdated(t){t&&!t.affectsConfiguration("workbench.editor.openPositioning")&&!t.affectsConfiguration("workbench.editor.focusRecentEditorAfterClose")||(this.editorOpenPositioning=this.configurationService.getValue("workbench.editor.openPositioning"),this.focusRecentEditorAfterClose=this.configurationService.getValue("workbench.editor.focusRecentEditorAfterClose"))}get count(){return this.editors.length}get stickyCount(){return this.sticky+1}getEditors(t,n){let i=t===0?this.mru.slice(0):this.editors.slice(0);return n?.excludeSticky?t===0?i.filter(r=>!this.isSticky(r)):i.slice(this.sticky+1):i}getEditorByIndex(t){return this.editors[t]}get activeEditor(){return this.active}isActive(t){return this.matches(this.active,t)}get previewEditor(){return this.preview}openEditor(t,n){let i=n?.sticky||typeof n?.index=="number"&&this.isSticky(n.index),r=n?.pinned||n?.sticky,s=!!n?.transient,a=n?.active||!this.activeEditor||!r&&this.preview===this.activeEditor,l=this.findEditor(t,n);if(l){let[d,u]=l;return this.doSetTransient(d,u,s===!1?!1:this.isTransient(d)),r&&this.doPin(d,u),this.setSelection(a?d:this.activeEditor,n?.inactiveSelection??[]),n&&typeof n.index=="number"&&this.moveEditor(d,n.index),i&&this.doStick(d,this.indexOf(d)),{editor:d,isNew:!1}}else{let d=t,u=this.indexOf(this.active),p;if(n&&typeof n.index=="number"?p=n.index:this.editorOpenPositioning===PT.FIRST?(p=0,!i&&this.isSticky(p)&&(p=this.sticky+1)):this.editorOpenPositioning===PT.LAST?p=this.editors.length:(this.editorOpenPositioning===PT.LEFT?u===0||!this.editors.length?p=0:p=u:p=u+1,!i&&this.isSticky(p)&&(p=this.sticky+1)),i&&(this.sticky++,this.isSticky(p)||(p=this.sticky)),(r||!this.preview)&&this.splice(p,!1,d),s&&this.doSetTransient(d,p,!0),!r){if(this.preview){let m=this.indexOf(this.preview);p>m&&p--,this.replaceEditor(this.preview,d,p,!a)}this.preview=d}this.registerEditorListeners(d);let h={kind:5,editor:d,editorIndex:p};return this._onDidModelChange.fire(h),this.setSelection(a?d:this.activeEditor,n?.inactiveSelection??[]),{editor:d,isNew:!0}}}registerEditorListeners(t){let n=new Y;this.editorListeners.add(n),n.add(G.once(t.onWillDispose)(()=>{let i=this.editors.indexOf(t);if(i>=0){let r={kind:15,editor:t,editorIndex:i};this._onDidModelChange.fire(r)}})),n.add(t.onDidChangeDirty(()=>{let i={kind:14,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(t.onDidChangeLabel(()=>{let i={kind:9,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(t.onDidChangeCapabilities(()=>{let i={kind:10,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(this.onDidModelChange(i=>{i.kind===6&&i.editor?.matches(t)&&(Bt(n),this.editorListeners.delete(n))}))}replaceEditor(t,n,i,r=!0){let s=this.doCloseEditor(t,1,r);if(this.splice(i,!1,n),s){let a={kind:6,...s};this._onDidModelChange.fire(a)}}closeEditor(t,n=0,i=!0){let r=this.doCloseEditor(t,n,i);if(r){let s={kind:6,...r};return this._onDidModelChange.fire(s),r}}doCloseEditor(t,n,i){let r=this.indexOf(t);if(r===-1)return;let s=this.editors[r],a=this.isSticky(r),l=this.active===s;if(i&&l)if(this.mru.length>1){let d;this.focusRecentEditorAfterClose?d=this.mru[1]:r===this.editors.length-1?d=this.editors[r-1]:d=this.editors[r+1];let u=this.selection.filter(p=>p!==s&&p!==d);this.doSetSelection(d,this.editors.indexOf(d),u)}else this.doSetSelection(null,void 0,[]);else if(!l&&this.doIsSelected(s)){let d=this.selection.filter(u=>u!==s&&u!==this.activeEditor);this.doSetSelection(this.activeEditor,this.indexOf(this.activeEditor),d)}return this.preview===s&&(this.preview=null),this.transient.delete(s),this.splice(r,!0),{editor:s,sticky:a,editorIndex:r,context:n}}moveEditor(t,n){n>=this.editors.length?n=this.editors.length-1:n<0&&(n=0);let i=this.indexOf(t);if(i<0||n===i)return;let r=this.editors[i],s=this.sticky;this.isSticky(i)&&n>this.sticky?this.sticky--:!this.isSticky(i)&&n<=this.sticky&&this.sticky++,this.editors.splice(i,1),this.editors.splice(n,0,r);let a={kind:7,editor:r,oldEditorIndex:i,editorIndex:n};if(this._onDidModelChange.fire(a),s!==this.sticky){let l={kind:13,editor:r,editorIndex:n};this._onDidModelChange.fire(l)}return r}setActive(t){let n;return t?n=this.setEditorActive(t):this.setGroupActive(),n}setGroupActive(){this._onDidModelChange.fire({kind:0})}setEditorActive(t){let n=this.findEditor(t);if(!n)return;let[i,r]=n;return this.doSetSelection(i,r,[]),i}get selectedEditors(){return this.editors.filter(t=>this.doIsSelected(t))}isSelected(t){let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.doIsSelected(n)}doIsSelected(t){return this.selection.includes(t)}setSelection(t,n){let i=this.findEditor(t);if(!i)return;let[r,s]=i,a=new Set;for(let l of n){let d=this.findEditor(l);if(!d)return;let[u]=d;u!==r&&a.add(u)}this.doSetSelection(r,s,Array.from(a))}doSetSelection(t,n,i){let r=this.activeEditor,s=this.selection,a;t?a=[t,...i]:a=[],this.selection=a;let l=t&&typeof n=="number"&&r!==t;if(l){let d=this.indexOf(t,this.mru);this.mru.splice(d,1),this.mru.unshift(t);let u={kind:8,editor:t,editorIndex:n};this._onDidModelChange.fire(u)}if(l||s.length!==a.length||s.some(d=>!a.includes(d))){let d={kind:4};this._onDidModelChange.fire(d)}}setIndex(t){this._onDidModelChange.fire({kind:1})}setLabel(t){this._onDidModelChange.fire({kind:2})}pin(t){let n=this.findEditor(t);if(!n)return;let[i,r]=n;return this.doPin(i,r),i}doPin(t,n){if(this.isPinned(t))return;this.setTransient(t,!1),this.preview=null;let i={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(i)}unpin(t){let n=this.findEditor(t);if(!n)return;let[i,r]=n;return this.doUnpin(i,r),i}doUnpin(t,n){if(!this.isPinned(t))return;let i=this.preview;this.preview=t;let r={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(r),i&&this.closeEditor(i,3)}isPinned(t){let n;return typeof t=="number"?n=this.editors[t]:n=t,!this.matches(this.preview,n)}stick(t){let n=this.findEditor(t);if(!n)return;let[i,r]=n;return this.doStick(i,r),i}doStick(t,n){if(this.isSticky(n))return;this.pin(t);let i=this.sticky+1;this.moveEditor(t,i),this.sticky++;let r={kind:13,editor:t,editorIndex:i};this._onDidModelChange.fire(r)}unstick(t){let n=this.findEditor(t);if(!n)return;let[i,r]=n;return this.doUnstick(i,r),i}doUnstick(t,n){if(!this.isSticky(n))return;let i=this.sticky;this.moveEditor(t,i),this.sticky--;let r={kind:13,editor:t,editorIndex:i};this._onDidModelChange.fire(r)}isSticky(t){if(this.sticky<0)return!1;let n;return typeof t=="number"?n=t:n=this.indexOf(t),n<0?!1:n<=this.sticky}setTransient(t,n){if(!n&&this.transient.size===0)return;let i=this.findEditor(t);if(!i)return;let[r,s]=i;return this.doSetTransient(r,s,n),r}doSetTransient(t,n,i){if(i){if(this.transient.has(t))return;this.transient.add(t)}else{if(!this.transient.has(t))return;this.transient.delete(t)}let r={kind:12,editor:t,editorIndex:n};this._onDidModelChange.fire(r)}isTransient(t){if(this.transient.size===0)return!1;let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.transient.has(n)}splice(t,n,i){let r=this.editors[t];if(n&&this.isSticky(t)&&this.sticky--,i?this.editors.splice(t,n?1:0,i):this.editors.splice(t,n?1:0),!n&&i)this.mru.length===0?this.mru.push(i):this.mru.splice(1,0,i);else{let s=this.indexOf(r,this.mru);n&&!i?this.mru.splice(s,1):n&&i&&this.mru.splice(s,1,i)}}indexOf(t,n=this.editors,i){let r=-1;if(!t)return r;for(let s=0;s<n.length;s++){let a=n[s];if(this.matches(a,t,i))if(i?.supportSideBySide&&a instanceof Yn&&!(t instanceof Yn))r=s;else{r=s;break}}return r}findEditor(t,n){let i=this.indexOf(t,this.editors,n);if(i!==-1)return[this.editors[i],i]}isFirst(t,n=this.editors){return this.matches(n[0],t)}isLast(t,n=this.editors){return this.matches(n[n.length-1],t)}contains(t,n){return this.indexOf(t,this.editors,n)!==-1}matches(t,n,i){if(!t||!n)return!1;if(i?.supportSideBySide&&t instanceof Yn&&!(n instanceof Yn))switch(i.supportSideBySide){case 4:if(this.matches(t.primary,n,i)||this.matches(t.secondary,n,i))return!0;break;case 3:if(this.matches(t.primary,n,i)&&this.matches(t.secondary,n,i))return!0;break}let r=t===n;return i?.strictEquals?r:r||t.matches(n)}get isLocked(){return this.locked}lock(t){this.isLocked!==t&&(this.locked=t,this._onDidModelChange.fire({kind:3}))}clone(){let t=this.instantiationService.createInstance(Ws,void 0);t.editors=this.editors.slice(0),t.mru=this.mru.slice(0),t.preview=this.preview,t.selection=this.selection.slice(0),t.sticky=this.sticky;for(let n of t.editors)t.registerEditorListeners(n);return t}serialize(){let t=Be.as(Da.EditorFactory),n=[],i=[],r,s=this.sticky;for(let l=0;l<this.editors.length;l++){let d=this.editors[l],u=!1,p=t.getEditorSerializer(d);if(p){let h=p.canSerialize(d)?p.serialize(d):void 0;typeof h=="string"?(u=!0,i.push({id:d.typeId,value:h}),n.push(d),this.preview===d&&(r=n.length-1)):u=!1}!u&&this.isSticky(l)&&s--}let a=this.mru.map(l=>this.indexOf(l,n)).filter(l=>l>=0);return{id:this.id,locked:this.locked?!0:void 0,editors:i,mru:a,preview:r,sticky:s>=0?s:void 0}}deserialize(t){let n=Be.as(Da.EditorFactory);return typeof t.id=="number"?(this._id=t.id,Ws.IDS=Math.max(t.id+1,Ws.IDS)):this._id=Ws.IDS++,t.locked&&(this.locked=!0),this.editors=An(t.editors.map((i,r)=>{let s,a=n.getEditorSerializer(i.id);if(a){let l=a.deserialize(this.instantiationService,i.value);l instanceof qr&&(s=l,this.registerEditorListeners(s))}return!s&&typeof t.sticky=="number"&&r<=t.sticky&&t.sticky--,s})),this.mru=An(t.mru.map(i=>this.editors[i])),this.selection=this.mru.length>0?[this.mru[0]]:[],typeof t.preview=="number"&&(this.preview=this.editors[t.preview]),typeof t.sticky=="number"&&(this.sticky=t.sticky),this._id}dispose(){Bt(Array.from(this.editorListeners)),this.editorListeners.clear(),this.transient.clear(),super.dispose()}};Ws=k([I(1,Ze),I(2,He)],Ws);var ag={exports:{}};(function(){function e(r){let s=[];typeof r=="number"&&s.push("code/timeOrigin",r);function a(d){s.push(d,Date.now())}function l(){let d=[];for(let u=0;u<s.length;u+=2)d.push({name:s[u],startTime:s[u+1]});return d}return{mark:a,getMarks:l}}function t(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?e():{mark(r){performance.mark(r)},getMarks(){let r=performance.timeOrigin;typeof r!="number"&&(r=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);let s=[{name:"code/timeOrigin",startTime:Math.round(r)}];for(let a of performance.getEntriesByType("mark"))s.push({name:a.name,startTime:Math.round(r+a.startTime)});return s}};if(typeof process=="object"){let r=performance?.timeOrigin;return e(r)}else return console.trace("perf-util loaded in UNKNOWN environment"),e()}function n(r){return r.MonacoPerformanceMarks||(r.MonacoPerformanceMarks=t()),r.MonacoPerformanceMarks}var i;typeof global=="object"?i=global:typeof self=="object"?i=self:i={},typeof ag=="object"&&typeof ag.exports=="object"?ag.exports=n(i):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),i.perf=n(i))})();var _n=ag.exports.mark,GIe=ag.exports.getMarks;function MT(o,e){return e&&(o.stack||o.stacktrace)?c("stackTrace.format","{0}: {1}",pP(o),uP(o.stack)||uP(o.stacktrace)):pP(o)}function uP(o){return Array.isArray(o)?o.join(`
`):o}function pP(o){return o.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${o.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof o.code=="string"&&typeof o.errno=="number"&&typeof o.syscall=="string"?c("nodeExceptionMessage","A system error occurred ({0})",o.message):o.message||c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function Us(o=null,e=!1){if(!o)return c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(o)){let t=An(o),n=Us(t[0],e);return t.length>1?c("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(gn(o))return o;if(o.detail){let t=o.detail;if(t.error)return MT(t.error,e);if(t.exception)return MT(t.exception,e)}return o.stack?MT(o,e):o.message?o.message:c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function Ly(o){let e=o;return e instanceof Error&&Array.isArray(e.actions)}var wi=H("logService"),bSe=H("loggerService");function Ry(o){switch(o){case 1:return"trace";case 2:return"debug";case 3:return"info";case 4:return"warn";case 5:return"error";case 0:return"off"}}var vSe=new U("logLevel",Ry(3));var Qd=H("IUriIdentityService");function hP(o){let e=o;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&j.isUri(e.location)&&j.isUri(e.globalStorageHome)&&j.isUri(e.settingsResource)&&j.isUri(e.keybindingsResource)&&j.isUri(e.tasksResource)&&j.isUri(e.snippetsHome)&&j.isUri(e.extensionsResource))}var mP=H("IUserDataProfilesService");function Ay(o,e,t,n,i,r){return{id:o,name:e,location:t,isDefault:!1,shortName:i?.shortName,icon:i?.icon,globalStorageHome:r&&i?.useDefaultFlags?.globalState?r.globalStorageHome:vt(t,"globalStorage"),settingsResource:r&&i?.useDefaultFlags?.settings?r.settingsResource:vt(t,"settings.json"),keybindingsResource:r&&i?.useDefaultFlags?.keybindings?r.keybindingsResource:vt(t,"keybindings.json"),tasksResource:r&&i?.useDefaultFlags?.tasks?r.tasksResource:vt(t,"tasks.json"),snippetsHome:r&&i?.useDefaultFlags?.snippets?r.snippetsHome:vt(t,"snippets"),extensionsResource:r&&i?.useDefaultFlags?.extensions?r.extensionsResource:vt(t,"extensions.json"),cacheHome:vt(n,o),useDefaultFlags:i?.useDefaultFlags,isTransient:i?.transient}}var Oy=class extends N{constructor(t,n,i,r){super();this.environmentService=t;this.fileService=n;this.uriIdentityService=i;this.logService=r;this.profilesHome=vt(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=vt(this.environmentService.cacheHome,"CachedProfilesData")}static PROFILES_KEY="userDataProfiles";static PROFILE_ASSOCIATIONS_KEY="profileAssociations";_serviceBrand;enabled=!0;profilesHome;profilesCacheHome;get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}_onDidChangeProfiles=this._register(new x);onDidChangeProfiles=this._onDidChangeProfiles.event;_onWillCreateProfile=this._register(new x);onWillCreateProfile=this._onWillCreateProfile.event;_onWillRemoveProfile=this._register(new x);onWillRemoveProfile=this._onWillRemoveProfile.event;_onDidResetWorkspaces=this._register(new x);onDidResetWorkspaces=this._onDidResetWorkspaces.event;profileCreationPromises=new Map;transientProfilesObject={profiles:[],folders:new fi,workspaces:new fi,emptyWindows:new Map};init(){this._profilesObject=void 0}setEnablement(t){this.enabled!==t&&(this._profilesObject=void 0,this.enabled=t)}isEnabled(){return this.enabled}_profilesObject;get profilesObject(){if(!this._profilesObject){let t=this.createDefaultProfile(),n=[t];if(this.enabled)try{for(let s of this.getStoredProfiles()){if(!s.name||!gn(s.name)||!s.location){this.logService.warn("Skipping the invalid stored profile",s.location||s.name);continue}n.push(Ay(Ri(s.location),s.name,s.location,this.profilesCacheHome,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.logService.error(s)}let i=new fi,r=new Map;if(n.length)try{let s=this.getStoredProfileAssociations();if(s.workspaces)for(let[a,l]of Object.entries(s.workspaces)){let d=j.parse(a),u=n.find(p=>p.id===l);u&&i.set(d,u)}if(s.emptyWindows)for(let[a,l]of Object.entries(s.emptyWindows)){let d=n.find(u=>u.id===l);d&&r.set(a,d)}}catch(s){this.logService.error(s)}this._profilesObject={profiles:n,workspaces:i,emptyWindows:r}}return this._profilesObject}createDefaultProfile(){let t=Ay("__default__profile__",c("defaultProfile","Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...t,extensionsResource:this.getDefaultProfileExtensionsLocation()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){let n="Temp",i=new RegExp(`${lo(n)}\\s(\\d+)`),r=0;for(let a of this.profiles){let l=i.exec(a.name),d=l?parseInt(l[1]):0;r=d>r?d:r}let s=`${n} ${r+1}`;return this.createProfile(Nr(wl()).toString(16),s,{transient:!0},t)}async createNamedProfile(t,n,i){return this.createProfile(Nr(wl()).toString(16),t,n,i)}async createProfile(t,n,i,r){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let s=await this.doCreateProfile(t,n,i);return r&&await this.setProfileForWorkspace(r,s),s}async doCreateProfile(t,n,i){if(!gn(n)||!n)throw new Error("Name of the profile is mandatory and must be of type `string`");let r=this.profileCreationPromises.get(n);return r||(r=(async()=>{try{if(this.profiles.find(d=>d.name===n||d.id===t))throw new Error(`Profile with ${n} name already exists`);let a=Ay(t,n,vt(this.profilesHome,t),this.profilesCacheHome,i,this.defaultProfile);await this.fileService.createFolder(a.location);let l=[];return this._onWillCreateProfile.fire({profile:a,join(d){l.push(d)}}),await co.settled(l),this.updateProfiles([a],[],[]),a}finally{this.profileCreationPromises.delete(n)}})(),this.profileCreationPromises.set(n,r)),r}async updateProfile(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find(r=>r.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);return i=Ay(i.id,n.name??i.name,i.location,this.profilesCacheHome,{shortName:n.shortName??i.shortName,icon:n.icon===null?void 0:n.icon??i.icon,transient:n.transient??i.isTransient,useDefaultFlags:n.useDefaultFlags??i.useDefaultFlags},this.defaultProfile),this.updateProfiles([],[],[i]),i}async removeProfile(t){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");let n=this.profiles.find(r=>r.id===t.id);if(!n)throw new Error(`Profile '${t.name}' does not exist`);let i=[];this._onWillRemoveProfile.fire({profile:n,join(r){i.push(r)}});try{await Promise.allSettled(i)}catch(r){this.logService.error(r)}for(let r of[...this.profilesObject.emptyWindows.keys()])n.id===this.profilesObject.emptyWindows.get(r)?.id&&this.profilesObject.emptyWindows.delete(r);for(let r of[...this.profilesObject.workspaces.keys()])n.id===this.profilesObject.workspaces.get(r)?.id&&this.profilesObject.workspaces.delete(r);this.updateStoredProfileAssociations(),this.updateProfiles([],[n],[]);try{await this.fileService.del(n.cacheHome,{recursive:!0})}catch(r){OR(r)!==1&&this.logService.error(r)}}async setProfileForWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find(r=>r.id===n.id);if(!i)throw new Error(`Profile '${n.name}' does not exist`);this.updateWorkspaceAssociation(t,i)}unsetWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");this.updateWorkspaceAssociation(t,void 0,n)}async resetWorkspaces(){this.transientProfilesObject.folders.clear(),this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindows.clear(),this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(this.enabled&&await this.fileService.exists(this.profilesHome)){let t=await this.fileService.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(n=>n.isDirectory&&this.profiles.every(i=>!this.uriIdentityService.extUri.isEqual(i.location,n.resource))).map(n=>this.fileService.del(n.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.enabled)return;let t=this.transientProfilesObject.profiles.filter(n=>!this.isProfileAssociatedToWorkspace(n));await Promise.allSettled(t.map(n=>this.removeProfile(n)))}getProfileForWorkspace(t){let n=this.getWorkspace(t),i=j.isUri(n)?this.profilesObject.workspaces.get(n):this.profilesObject.emptyWindows.get(n);return i||(yu(t)?this.transientProfilesObject.folders.get(t.uri):Wb(t)?this.transientProfilesObject.workspaces.get(t.configPath):this.transientProfilesObject.emptyWindows.get(t.id))}getWorkspace(t){return yu(t)?t.uri:Wb(t)?t.configPath:t.id}isProfileAssociatedToWorkspace(t){return!!([...this.profilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.profilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.folders.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location)))}updateProfiles(t,n,i){let r=[...this.profiles,...t],s=[],a=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];for(let l of r){if(l.isDefault||n.some(u=>l.id===u.id))continue;l=i.find(u=>l.id===u.id)??l;let d=a.find(u=>l.id===u.id);if(l.isTransient)this.transientProfilesObject.profiles.push(l);else{if(d){for(let[u,p]of this.transientProfilesObject.emptyWindows.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:u},l);break}for(let[u,p]of this.transientProfilesObject.workspaces.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",configPath:u},l);break}for(let[u,p]of this.transientProfilesObject.folders.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",uri:u},l);break}}s.push({location:l.location,name:l.name,shortName:l.shortName,icon:l.icon,useDefaultFlags:l.useDefaultFlags})}}this.saveStoredProfiles(s),this._profilesObject=void 0,this.triggerProfilesChanges(t,n,i)}triggerProfilesChanges(t,n,i){this._onDidChangeProfiles.fire({added:t,removed:n,updated:i,all:this.profiles})}updateWorkspaceAssociation(t,n,i){if(i=n?.isTransient?!0:i,i)yu(t)?(this.transientProfilesObject.folders.delete(t.uri),n&&this.transientProfilesObject.folders.set(t.uri,n)):Wb(t)?(this.transientProfilesObject.workspaces.delete(t.configPath),n&&this.transientProfilesObject.workspaces.set(t.configPath,n)):(this.transientProfilesObject.emptyWindows.delete(t.id),n&&this.transientProfilesObject.emptyWindows.set(t.id,n));else{this.updateWorkspaceAssociation(t,void 0,!0);let r=this.getWorkspace(t);j.isUri(r)?(this.profilesObject.workspaces.delete(r),n&&this.profilesObject.workspaces.set(r,n)):(this.profilesObject.emptyWindows.delete(r),n&&this.profilesObject.emptyWindows.set(r,n)),this.updateStoredProfileAssociations()}}updateStoredProfileAssociations(){let t={};for(let[i,r]of this.profilesObject.workspaces.entries())t[i.toString()]=r.id;let n={};for(let[i,r]of this.profilesObject.emptyWindows.entries())n[i.toString()]=r.id;this.saveStoredProfileAssociations({workspaces:t,emptyWindows:n}),this._profilesObject=void 0}migrateStoredProfileAssociations(t){let n={},i=this.createDefaultProfile();if(t.workspaces)for(let[s,a]of Object.entries(t.workspaces)){let l=j.parse(a);n[s]=this.uriIdentityService.extUri.isEqual(l,i.location)?i.id:this.uriIdentityService.extUri.basename(l)}let r={};if(t.emptyWindows)for(let[s,a]of Object.entries(t.emptyWindows)){let l=j.parse(a);r[s]=this.uriIdentityService.extUri.isEqual(l,i.location)?i.id:this.uriIdentityService.extUri.basename(l)}return{workspaces:n,emptyWindows:r}}getStoredProfiles(){return[]}saveStoredProfiles(t){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(t){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};Oy=k([I(0,Yo),I(1,Ut),I(2,Qd),I(3,wi)],Oy);var FT={WIDTH:400,WIDTH_WITH_VERTICAL_PANEL:600,HEIGHT:270};var BT=class o{_coreKeybindings;_extensionKeybindings;_cachedMergedKeybindings;constructor(){this._coreKeybindings=new bi,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ms===1){if(e&&e.win)return e.win}else if(ms===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){let t=o.bindToCurrentPlatform(e),n=new Y;if(t&&t.primary){let i=Qx(t.primary,ms);i&&n.add(this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let i=0,r=t.secondary.length;i<r;i++){let s=t.secondary[i],a=Qx(s,ms);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-i-1,e.when))}return n}setExtensionKeybindings(e){let t=[],n=0;for(let i of e)i.keybinding&&(t[n++]={keybinding:i.keybinding,command:i.id,commandArgs:i.args,when:i.when,weight1:i.weight,weight2:0,extensionId:i.extensionId||null,isBuiltinExtension:i.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return _i(this.registerKeybindingRule(e),go.registerCommand(e))}_registerDefaultKeybinding(e,t,n,i,r,s){let a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:s,weight1:i,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,re(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(f4)),this._cachedMergedKeybindings.slice(0)}},ri=new BT,g4={EditorModes:"platform.keybindingsRegistry"};Be.add(g4.EditorModes,ri);function f4(o,e){if(o.weight1!==e.weight1)return o.weight1-e.weight1;if(o.command&&e.command){if(o.command<e.command)return-1;if(o.command>e.command)return 1}return o.weight2-e.weight2}function lp(o){return o.command!==void 0}function gP(o){return o.submenu!==void 0}var be=class o{static _instances=new Map;static CommandPalette=new o("CommandPalette");static DebugBreakpointsContext=new o("DebugBreakpointsContext");static DebugCallStackContext=new o("DebugCallStackContext");static DebugConsoleContext=new o("DebugConsoleContext");static DebugVariablesContext=new o("DebugVariablesContext");static NotebookVariablesContext=new o("NotebookVariablesContext");static DebugHoverContext=new o("DebugHoverContext");static DebugWatchContext=new o("DebugWatchContext");static DebugToolBar=new o("DebugToolBar");static DebugToolBarStop=new o("DebugToolBarStop");static DebugCallStackToolbar=new o("DebugCallStackToolbar");static DebugCreateConfiguration=new o("DebugCreateConfiguration");static EditorContext=new o("EditorContext");static SimpleEditorContext=new o("SimpleEditorContext");static EditorContent=new o("EditorContent");static EditorLineNumberContext=new o("EditorLineNumberContext");static EditorContextCopy=new o("EditorContextCopy");static EditorContextPeek=new o("EditorContextPeek");static EditorContextShare=new o("EditorContextShare");static EditorTitle=new o("EditorTitle");static EditorTitleRun=new o("EditorTitleRun");static EditorTitleContext=new o("EditorTitleContext");static EditorTitleContextShare=new o("EditorTitleContextShare");static EmptyEditorGroup=new o("EmptyEditorGroup");static EmptyEditorGroupContext=new o("EmptyEditorGroupContext");static EditorTabsBarContext=new o("EditorTabsBarContext");static EditorTabsBarShowTabsSubmenu=new o("EditorTabsBarShowTabsSubmenu");static EditorTabsBarShowTabsZenModeSubmenu=new o("EditorTabsBarShowTabsZenModeSubmenu");static EditorActionsPositionSubmenu=new o("EditorActionsPositionSubmenu");static ExplorerContext=new o("ExplorerContext");static ExplorerContextShare=new o("ExplorerContextShare");static ExtensionContext=new o("ExtensionContext");static ExtensionEditorContextMenu=new o("ExtensionEditorContextMenu");static GlobalActivity=new o("GlobalActivity");static CommandCenter=new o("CommandCenter");static CommandCenterCenter=new o("CommandCenterCenter");static LayoutControlMenuSubmenu=new o("LayoutControlMenuSubmenu");static LayoutControlMenu=new o("LayoutControlMenu");static MenubarMainMenu=new o("MenubarMainMenu");static MenubarAppearanceMenu=new o("MenubarAppearanceMenu");static MenubarDebugMenu=new o("MenubarDebugMenu");static MenubarEditMenu=new o("MenubarEditMenu");static MenubarCopy=new o("MenubarCopy");static MenubarFileMenu=new o("MenubarFileMenu");static MenubarGoMenu=new o("MenubarGoMenu");static MenubarHelpMenu=new o("MenubarHelpMenu");static MenubarLayoutMenu=new o("MenubarLayoutMenu");static MenubarNewBreakpointMenu=new o("MenubarNewBreakpointMenu");static PanelAlignmentMenu=new o("PanelAlignmentMenu");static PanelPositionMenu=new o("PanelPositionMenu");static ActivityBarPositionMenu=new o("ActivityBarPositionMenu");static MenubarPreferencesMenu=new o("MenubarPreferencesMenu");static MenubarRecentMenu=new o("MenubarRecentMenu");static MenubarSelectionMenu=new o("MenubarSelectionMenu");static MenubarShare=new o("MenubarShare");static MenubarSwitchEditorMenu=new o("MenubarSwitchEditorMenu");static MenubarSwitchGroupMenu=new o("MenubarSwitchGroupMenu");static MenubarTerminalMenu=new o("MenubarTerminalMenu");static MenubarViewMenu=new o("MenubarViewMenu");static MenubarHomeMenu=new o("MenubarHomeMenu");static OpenEditorsContext=new o("OpenEditorsContext");static OpenEditorsContextShare=new o("OpenEditorsContextShare");static ProblemsPanelContext=new o("ProblemsPanelContext");static SCMInputBox=new o("SCMInputBox");static SCMChangesContext=new o("SCMChangesContext");static SCMChangeContext=new o("SCMChangeContext");static SCMResourceContext=new o("SCMResourceContext");static SCMResourceContextShare=new o("SCMResourceContextShare");static SCMResourceFolderContext=new o("SCMResourceFolderContext");static SCMResourceGroupContext=new o("SCMResourceGroupContext");static SCMSourceControl=new o("SCMSourceControl");static SCMSourceControlInline=new o("SCMSourceControlInline");static SCMSourceControlTitle=new o("SCMSourceControlTitle");static SCMHistoryTitle=new o("SCMHistoryTitle");static SCMTitle=new o("SCMTitle");static SearchContext=new o("SearchContext");static SearchActionMenu=new o("SearchActionContext");static StatusBarWindowIndicatorMenu=new o("StatusBarWindowIndicatorMenu");static StatusBarRemoteIndicatorMenu=new o("StatusBarRemoteIndicatorMenu");static StickyScrollContext=new o("StickyScrollContext");static TestItem=new o("TestItem");static TestItemGutter=new o("TestItemGutter");static TestProfilesContext=new o("TestProfilesContext");static TestMessageContext=new o("TestMessageContext");static TestMessageContent=new o("TestMessageContent");static TestPeekElement=new o("TestPeekElement");static TestPeekTitle=new o("TestPeekTitle");static TestCallStack=new o("TestCallStack");static TouchBarContext=new o("TouchBarContext");static TitleBarContext=new o("TitleBarContext");static TitleBarTitleContext=new o("TitleBarTitleContext");static TunnelContext=new o("TunnelContext");static TunnelPrivacy=new o("TunnelPrivacy");static TunnelProtocol=new o("TunnelProtocol");static TunnelPortInline=new o("TunnelInline");static TunnelTitle=new o("TunnelTitle");static TunnelLocalAddressInline=new o("TunnelLocalAddressInline");static TunnelOriginInline=new o("TunnelOriginInline");static ViewItemContext=new o("ViewItemContext");static ViewContainerTitle=new o("ViewContainerTitle");static ViewContainerTitleContext=new o("ViewContainerTitleContext");static ViewTitle=new o("ViewTitle");static ViewTitleContext=new o("ViewTitleContext");static CommentEditorActions=new o("CommentEditorActions");static CommentThreadTitle=new o("CommentThreadTitle");static CommentThreadActions=new o("CommentThreadActions");static CommentThreadAdditionalActions=new o("CommentThreadAdditionalActions");static CommentThreadTitleContext=new o("CommentThreadTitleContext");static CommentThreadCommentContext=new o("CommentThreadCommentContext");static CommentTitle=new o("CommentTitle");static CommentActions=new o("CommentActions");static CommentsViewThreadActions=new o("CommentsViewThreadActions");static InteractiveToolbar=new o("InteractiveToolbar");static InteractiveCellTitle=new o("InteractiveCellTitle");static InteractiveCellDelete=new o("InteractiveCellDelete");static InteractiveCellExecute=new o("InteractiveCellExecute");static InteractiveInputExecute=new o("InteractiveInputExecute");static InteractiveInputConfig=new o("InteractiveInputConfig");static ReplInputExecute=new o("ReplInputExecute");static IssueReporter=new o("IssueReporter");static NotebookToolbar=new o("NotebookToolbar");static NotebookStickyScrollContext=new o("NotebookStickyScrollContext");static NotebookCellTitle=new o("NotebookCellTitle");static NotebookCellDelete=new o("NotebookCellDelete");static NotebookCellInsert=new o("NotebookCellInsert");static NotebookCellBetween=new o("NotebookCellBetween");static NotebookCellListTop=new o("NotebookCellTop");static NotebookCellExecute=new o("NotebookCellExecute");static NotebookCellExecuteGoTo=new o("NotebookCellExecuteGoTo");static NotebookCellExecutePrimary=new o("NotebookCellExecutePrimary");static NotebookDiffCellInputTitle=new o("NotebookDiffCellInputTitle");static NotebookDiffCellMetadataTitle=new o("NotebookDiffCellMetadataTitle");static NotebookDiffCellOutputsTitle=new o("NotebookDiffCellOutputsTitle");static NotebookOutputToolbar=new o("NotebookOutputToolbar");static NotebookOutlineFilter=new o("NotebookOutlineFilter");static NotebookOutlineActionMenu=new o("NotebookOutlineActionMenu");static NotebookEditorLayoutConfigure=new o("NotebookEditorLayoutConfigure");static NotebookKernelSource=new o("NotebookKernelSource");static BulkEditTitle=new o("BulkEditTitle");static BulkEditContext=new o("BulkEditContext");static TimelineItemContext=new o("TimelineItemContext");static TimelineTitle=new o("TimelineTitle");static TimelineTitleContext=new o("TimelineTitleContext");static TimelineFilterSubMenu=new o("TimelineFilterSubMenu");static AccountsContext=new o("AccountsContext");static SidebarTitle=new o("SidebarTitle");static PanelTitle=new o("PanelTitle");static AuxiliaryBarTitle=new o("AuxiliaryBarTitle");static AuxiliaryBarHeader=new o("AuxiliaryBarHeader");static TerminalInstanceContext=new o("TerminalInstanceContext");static TerminalEditorInstanceContext=new o("TerminalEditorInstanceContext");static TerminalNewDropdownContext=new o("TerminalNewDropdownContext");static TerminalTabContext=new o("TerminalTabContext");static TerminalTabEmptyAreaContext=new o("TerminalTabEmptyAreaContext");static TerminalStickyScrollContext=new o("TerminalStickyScrollContext");static WebviewContext=new o("WebviewContext");static InlineCompletionsActions=new o("InlineCompletionsActions");static InlineEditsActions=new o("InlineEditsActions");static InlineEditActions=new o("InlineEditActions");static NewFile=new o("NewFile");static MergeInput1Toolbar=new o("MergeToolbar1Toolbar");static MergeInput2Toolbar=new o("MergeToolbar2Toolbar");static MergeBaseToolbar=new o("MergeBaseToolbar");static MergeInputResultToolbar=new o("MergeToolbarResultToolbar");static InlineSuggestionToolbar=new o("InlineSuggestionToolbar");static InlineEditToolbar=new o("InlineEditToolbar");static ChatContext=new o("ChatContext");static ChatCodeBlock=new o("ChatCodeblock");static ChatCompareBlock=new o("ChatCompareBlock");static ChatMessageTitle=new o("ChatMessageTitle");static ChatExecute=new o("ChatExecute");static ChatExecuteSecondary=new o("ChatExecuteSecondary");static ChatInputSide=new o("ChatInputSide");static AccessibleView=new o("AccessibleView");static MultiDiffEditorFileToolbar=new o("MultiDiffEditorFileToolbar");static DiffEditorHunkToolbar=new o("DiffEditorHunkToolbar");static DiffEditorSelectionToolbar=new o("DiffEditorSelectionToolbar");static for(e){return o._instances.get(e)??new o(e)}id;constructor(e){if(o._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);o._instances.set(e,this),this.id=e}},_a=H("menuService"),Xd=class o{constructor(e){this.id=e;this.has=t=>t===e}static _all=new Map;static for(e){let t=this._all.get(e);return t||(t=new o(e),this._all.set(e,t)),t}static merge(e){let t=new Set;for(let n of e)n instanceof o&&t.add(n.id);return t}has},Ft=new class{_commands=new Map;_menuItems=new Map;_onDidChangeMenu=new Kf({merge:Xd.merge});onDidChangeMenu=this._onDidChangeMenu.event;addCommand(o){return this._commands.set(o.id,o),this._onDidChangeMenu.fire(Xd.for(be.CommandPalette)),re(()=>{this._commands.delete(o.id)&&this._onDidChangeMenu.fire(Xd.for(be.CommandPalette))})}getCommand(o){return this._commands.get(o)}getCommands(){let o=new Map;return this._commands.forEach((e,t)=>o.set(t,e)),o}appendMenuItem(o,e){let t=this._menuItems.get(o);t||(t=new bi,this._menuItems.set(o,t));let n=t.push(e);return this._onDidChangeMenu.fire(Xd.for(o)),re(()=>{n(),this._onDidChangeMenu.fire(Xd.for(o))})}appendMenuItems(o){let e=new Y;for(let{id:t,item:n}of o)e.add(this.appendMenuItem(t,n));return e}getMenuItems(o){let e;return this._menuItems.has(o)?e=[...this._menuItems.get(o)]:e=[],o===be.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(o){let e=new Set;for(let t of o)lp(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||o.push({command:t})})}},Ti=class extends fa{constructor(t,n,i){super(`submenuitem.${t.submenu.id}`,typeof t.title=="string"?t.title:t.title.value,i,"submenu");this.item=t;this.hideActions=n}},Vi=class{constructor(e,t,n,i,r,s,a){this.hideActions=i;this.menuKeybinding=r;this._commandService=a;this.id=e.id,this.label=Vi.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){let d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&je.isThemeIcon(d.icon)&&(l=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}l||(l=je.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new Vi(t,void 0,n,i,void 0,s,a):void 0,this._options=n,this.class=l&&je.asClassName(l)}static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}item;alt;_options;id;label;tooltip;class;enabled;checked;run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};Vi=k([I(5,st),I(6,Ci)],Vi);var et=class{constructor(e){this.desc=e}};function ze(o){let e=[],t=new o,{f1:n,menu:i,keybinding:r,...s}=t.desc;if(go.getCommand(s.id))throw new Error(`Cannot register two commands with the same id: ${s.id}`);if(e.push(go.registerCommand({id:s.id,handler:(a,...l)=>t.run(a,...l),metadata:s.metadata})),Array.isArray(i))for(let a of i)e.push(Ft.appendMenuItem(a.id,{command:{...s,precondition:a.precondition===null?void 0:s.precondition},...a}));else i&&e.push(Ft.appendMenuItem(i.id,{command:{...s,precondition:i.precondition===null?void 0:s.precondition},...i}));if(n&&(e.push(Ft.appendMenuItem(be.CommandPalette,{command:s,when:s.precondition})),e.push(Ft.addCommand(s))),Array.isArray(r))for(let a of r)e.push(ri.registerKeybindingRule({...a,id:s.id,when:s.precondition?$.and(s.precondition,a.when):a.when}));else r&&e.push(ri.registerKeybindingRule({...r,id:s.id,when:s.precondition?$.and(s.precondition,r.when):r.when}));return{dispose(){Bt(e)}}}var Ul=H("editorGroupsService");var Xt=H("editorService");var VT=class{constructor(e,t,n){this.id=e;this.dependencies=t;this.callback=n}};var fP=class o{static INSTANCE=new o;_isWebWorker=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope";_isRenderer=typeof document=="object";_defineCalls=[];_state=1;_amdPolicy;constructor(){}_initialize(){if(this._state===1){if(globalThis.define){console.log("[amdX] AMD loader already present externally"),this._state=3;return}}else return;this._state=2,globalThis.define=(e,t,n)=>{typeof e!="string"&&(n=t,t=e,e=null),(typeof t!="object"||!Array.isArray(t))&&(n=t,t=null),this._defineCalls.push(new VT(e,t,n))},globalThis.define.amd=!0,this._isRenderer?this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){if(e.startsWith(window.location.origin)||e.startsWith(`${me.vscodeFileResource}://${dE}`))return e;throw new Error(`[trusted_script_src] Invalid script url: ${e}`)}}):this._isWebWorker&&(this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){return e}}))}async load(e){if(this._initialize(),this._state===3)return new Promise(s=>{let a=wl();console.log(`[amdX] Using external define("${a}", ["${e}"])`),globalThis.define(a,[e],function(l){console.log(`[amdX] Got a result for ${a}: ${!!l}`),s(l)})});let t=await(this._isWebWorker?this._workerLoadScript(e):this._isRenderer?this._rendererLoadScript(e):this._nodeJSLoadScript(e));if(!t){console.warn(`Did not receive a define call from script ${e}`);return}let n={},i=[],r=[];if(Array.isArray(t.dependencies))for(let s of t.dependencies)s==="exports"?i.push(n):r.push(s);if(r.length>0)throw new Error(`Cannot resolve dependencies for script ${e}. The dependencies are: ${r.join(", ")}`);return typeof t.callback=="function"?t.callback(...i)??n:t.callback}_rendererLoadScript(e){return new Promise((t,n)=>{let i=document.createElement("script");i.setAttribute("async","async"),i.setAttribute("type","text/javascript");let r=()=>{i.removeEventListener("load",s),i.removeEventListener("error",a)},s=l=>{r(),t(this._defineCalls.pop())},a=l=>{r(),n(l)};i.addEventListener("load",s),i.addEventListener("error",a),this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),i.setAttribute("src",e),window.document.getElementsByTagName("head")[0].appendChild(i)})}async _workerLoadScript(e){return this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),await import(e),this._defineCalls.pop()}async _nodeJSLoadScript(e){try{let t=(await import("fs")).default,n=(await import("vm")).default,i=(await import("module")).default,r=j.parse(e).fsPath,s=t.readFileSync(r).toString(),a=i.wrap(s.replace(/^#!.*/,""));return new n.Script(a).runInThisContext().apply(),this._defineCalls.pop()}catch(t){throw t}}};var WT="utf8";var mwe=512*8,gwe=512*128;var Zo={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},fwe=(()=>{let o={};for(let e in Zo)Zo[e].guessableName&&(o[e]=Zo[e]);return o})();var jr=class extends _s{constructor(t,n,i,r,s,a,l,d,u,p,h,m,g,f,y){super(l,a,f,y);this.resource=t;this.hasAssociatedFilePath=n;this.initialValue=i;this.preferredLanguageId=r;this.preferredEncoding=s;this.workingCopyBackupService=d;this.textResourceConfigurationService=u;this.workingCopyService=p;this.textFileService=h;this.labelService=m;this.editorService=g;this._register(this.workingCopyService.registerWorkingCopy(this)),r&&this.setLanguageId(r),this.onConfigurationChange(void 0,!1),this.registerListeners()}static FIRST_LINE_NAME_MAX_LENGTH=40;static FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=this.FIRST_LINE_NAME_MAX_LENGTH*10;static ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}";_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeName=this._register(new x);onDidChangeName=this._onDidChangeName.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new x);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new x);onDidRevert=this._onDidRevert.event;typeId=FR;capabilities=2;configuredLabelFormat="content";cachedModelFirstLineWords=void 0;get name(){return this.configuredLabelFormat==="content"&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration(t=>this.onConfigurationChange(t,!0)))}onConfigurationChange(t,n){if(!t||t.affectsConfiguration(this.resource,"files.encoding")){let i=this.textResourceConfigurationService.getValue(this.resource,"files.encoding");this.configuredEncoding!==i&&typeof i=="string"&&(this.configuredEncoding=i,n&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!t||t.affectsConfiguration(this.resource,"workbench.editor.untitled.labelFormat")){let i=this.textResourceConfigurationService.getValue(this.resource,"workbench.editor.untitled.labelFormat");this.configuredLabelFormat!==i&&(i==="content"||i==="name")&&(this.configuredLabelFormat=i,n&&this._onDidChangeName.fire())}}setLanguageId(t,n){let i=t===jr.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:t;this.preferredLanguageId=i,i&&super.setLanguageId(i,n)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}configuredEncoding;getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(t){let n=this.getEncoding();this.preferredEncoding=t,n!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}dirty=this.hasAssociatedFilePath||!!this.initialValue;isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(t){this.dirty!==t&&(this.dirty=t,this._onDidChangeDirty.fire())}async save(t){let n=await this.textFileService.save(this.resource,t);return n&&this._onDidSave.fire({reason:t?.reason,source:t?.source}),!!n}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(og(""))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(t){let n;return this.isResolved()?n=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:WT}):typeof this.initialValue=="string"&&(n=jL(Jt.fromString(this.initialValue))),{content:n}}ignoreDirtyOnModelContentChange=!1;async resolve(){let t=!1,n=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let r,s=await this.workingCopyBackupService.resolve(this);s?(r=s.value,n=!0):r=YL(Jt.fromString(this.initialValue||""));let a=await sP(await this.textFileService.getDecodedStream(this.resource,r,{encoding:WT}));this.createTextEditorModel(a,this.resource,this.preferredLanguageId),t=!0}let i=lt(this.textEditorModel);return this.installModelListeners(i),t&&((n||this.initialValue)&&this.updateNameFromFirstLine(i),this.setDirty(this.hasAssociatedFilePath||!!n||!!this.initialValue),(n||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n))),this._register(t.onDidChangeLanguage(()=>this.onConfigurationChange(void 0,!0))),super.installModelListeners(t)}onModelContentChanged(t,n){this.ignoreDirtyOnModelContentChange||(!this.hasAssociatedFilePath&&t.getLineCount()===1&&t.getLineLength(1)===0?this.setDirty(!1):this.setDirty(!0)),n.changes.some(i=>(i.range.startLineNumber===1||i.range.endLineNumber===1)&&i.range.startColumn<=jr.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH)&&this.updateNameFromFirstLine(t),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(t){if(this.hasAssociatedFilePath)return;let n,i=t.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:jr.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g," ").replace(/\u202E/g,"");i=i.substr(0,d0(i,jr.FIRST_LINE_NAME_MAX_LENGTH)[0]),i&&im().exec(i)&&(n=i),n!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=n,this._onDidChangeName.fire())}isReadonly(){return!1}};jr=k([I(5,Pi),I(6,mr),I(7,qv),I(8,ii),I(9,Wl),I(10,Jo),I(11,Xo),I(12,Xt),I(13,Al),I(14,Cs)],jr);var v4=H("untitledTextEditorService"),Zd=class extends N{constructor(t,n){super();this.instantiationService=t;this.configurationService=n}static UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX=/Untitled-\d+/;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new x);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidCreate=this._register(new x);onDidCreate=this._onDidCreate.event;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;_onDidChangeLabel=this._register(new x);onDidChangeLabel=this._onDidChangeLabel.event;mapResourceToModel=new fi;get(t){return this.mapResourceToModel.get(t)}getValue(t){return this.get(t)?.textEditorModel?.getValue()}async resolve(t){let n=this.doCreateOrGet(t);return await n.resolve(),n}create(t){return this.doCreateOrGet(t)}doCreateOrGet(t=Object.create(null)){let n=this.massageOptions(t);return n.untitledResource&&this.mapResourceToModel.has(n.untitledResource)?this.mapResourceToModel.get(n.untitledResource):this.doCreate(n)}massageOptions(t){let n=Object.create(null);if(t.associatedResource?(n.untitledResource=j.from({scheme:me.untitled,authority:t.associatedResource.authority,fragment:t.associatedResource.fragment,path:t.associatedResource.path,query:t.associatedResource.query}),n.associatedResource=t.associatedResource):t.untitledResource?.scheme===me.untitled&&(n.untitledResource=t.untitledResource),t.languageId)n.languageId=t.languageId;else if(!n.associatedResource){let i=this.configurationService.getValue();i.files?.defaultLanguage&&(n.languageId=i.files.defaultLanguage)}return n.encoding=t.encoding,n.initialValue=t.initialValue,n}doCreate(t){let n=t.untitledResource;if(!n){let r=1;do n=j.from({scheme:me.untitled,path:`Untitled-${r}`}),r++;while(this.mapResourceToModel.has(n))}let i=this._register(this.instantiationService.createInstance(jr,n,!!t.associatedResource,t.initialValue,t.languageId,t.encoding));return this.registerModel(i),i}registerModel(t){let n=new Y;n.add(t.onDidChangeDirty(()=>this._onDidChangeDirty.fire(t))),n.add(t.onDidChangeName(()=>this._onDidChangeLabel.fire(t))),n.add(t.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(t))),n.add(t.onWillDispose(()=>this._onWillDispose.fire(t))),G.once(t.onWillDispose)(()=>{this.mapResourceToModel.delete(t.resource),n.dispose()}),this.mapResourceToModel.set(t.resource,t),this._onDidCreate.fire(t),t.isDirty()&&this._onDidChangeDirty.fire(t)}isUntitledWithAssociatedResource(t){return t.scheme===me.untitled&&t.path.length>1&&!Zd.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX.test(t.path)}canDispose(t){return t.isDisposed()?!0:this.doCanDispose(t)}async doCanDispose(t){return t.isDirty()?(await G.toPromise(t.onDidChangeDirty),this.canDispose(t)):!0}};Zd=k([I(0,Ze),I(1,He)],Zd);qn(v4,Zd,1);var vP=In,La=H("notificationService");var UT=H("progressService");var y4=Object.freeze({total(){},worked(){},done(){}}),yP=class{constructor(e){this.callback=e}static None=Object.freeze({report(){}});_value;get value(){return this._value}report(e){this._value=e,this.callback(this._value)}};var Py=class extends N{deferred=new Or;reporter;lastStep;constructor(e,t){super(),t.withProgress(e,n=>(this.reporter=n,this.lastStep&&n.report(this.lastStep),this.deferred.p)),this._register(re(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};Py=k([I(1,UT)],Py);var BTe=H("editorProgressService");var dp=class extends N{constructor(t,n){super();this.logService=t;this.configurationService=n}participants=new bi;addFileOperationParticipant(t){let n=this.participants.push(t);return re(()=>n())}async participate(t,n,i,r){let s=this.configurationService.getValue("files.participants.timeout");if(!(typeof s!="number"||s<=0))for(let a of this.participants)try{await a.participate(t,n,i,s,r)}catch(l){this.logService.warn(l)}}dispose(){this.participants.clear(),super.dispose()}};dp=k([I(0,wi),I(1,He)],dp);var yo=class extends N{constructor(t,n,i,r){super();this.getExpression=t;this.shouldUpdate=n;this.contextService=i;this.configurationService=r;this.updateExpressions(!1),this.registerListeners()}static NO_FOLDER=null;_onExpressionChange=this._register(new x);onExpressionChange=this._onExpressionChange.event;mapFolderToParsedExpression=new Map;mapFolderToConfiguredExpression=new Map;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{this.shouldUpdate(t)&&this.updateExpressions(!0)})),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.updateExpressions(!0)))}updateExpressions(t){let n=!1;for(let a of this.contextService.getWorkspace().folders){let l=a.uri.toString(),d=this.doGetExpression(a.uri),u=this.mapFolderToConfiguredExpression.get(l);d?(!u||!Si(u.expression,d.expression))&&(n=!0,this.mapFolderToParsedExpression.set(l,ym(d.expression)),this.mapFolderToConfiguredExpression.set(l,d)):u&&(n=!0,this.mapFolderToParsedExpression.delete(l),this.mapFolderToConfiguredExpression.delete(l))}let i=new Lf(this.contextService.getWorkspace().folders.map(a=>a.uri));for(let[a]of this.mapFolderToConfiguredExpression)a!==yo.NO_FOLDER&&(i.has(j.parse(a))||(this.mapFolderToParsedExpression.delete(a),this.mapFolderToConfiguredExpression.delete(a),n=!0));let r=this.doGetExpression(void 0),s=this.mapFolderToConfiguredExpression.get(yo.NO_FOLDER);r?(!s||!Si(s.expression,r.expression))&&(n=!0,this.mapFolderToParsedExpression.set(yo.NO_FOLDER,ym(r.expression)),this.mapFolderToConfiguredExpression.set(yo.NO_FOLDER,r)):s&&(n=!0,this.mapFolderToParsedExpression.delete(yo.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(yo.NO_FOLDER)),t&&n&&this._onExpressionChange.fire()}doGetExpression(t){let n=this.getExpression(t);if(!n)return;let i=Object.keys(n);if(i.length===0)return;let r=!1,s=Object.create(null);for(let a of i){r||(r=ol(a));let l=a,d=S0(l,!0);if(d){let u=d.toLowerCase();d!==d.toLowerCase()&&(l=`${u}${l.substring(1)}`)}s[l]=n[a]}return{expression:s,hasAbsolutePath:r}}matches(t,n){if(this.mapFolderToParsedExpression.size===0)return!1;let i=this.contextService.getWorkspaceFolder(t),r,s;if(i&&this.mapFolderToParsedExpression.has(i.uri.toString())?(r=this.mapFolderToParsedExpression.get(i.uri.toString()),s=this.mapFolderToConfiguredExpression.get(i.uri.toString())):(r=this.mapFolderToParsedExpression.get(yo.NO_FOLDER),s=this.mapFolderToConfiguredExpression.get(yo.NO_FOLDER)),!r)return!1;let a;return i?a=lu(i.uri,t):a=this.uriToPath(t),typeof a=="string"&&r(a,void 0,n)?!0:a!==this.uriToPath(t)&&s?.hasAbsolutePath?!!r(this.uriToPath(t),void 0,n):!1}uriToPath(t){return t.scheme===me.file?t.fsPath:t.path}};yo=k([I(2,bn),I(3,He)],yo);var I4=new U("autoSaveAfterShortDelayContext",!1,!0);var zs=H("filesConfigurationService"),Io=class extends N{constructor(t,n,i,r,s,a,l,d){super();this.contextKeyService=t;this.configurationService=n;this.contextService=i;this.environmentService=r;this.uriIdentityService=s;this.fileService=a;this.markerService=l;this.textResourceConfigurationService=d;let u=n.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,u.files),this.currentFilesAssociationConfiguration=u?.files?.associations,this.currentHotExitConfiguration=u?.files?.hotExit||Nu.ON_EXIT,this.onFilesConfigurationChange(u,!1),this.registerListeners()}static DEFAULT_AUTO_SAVE_MODE=Cn?Hr.AFTER_DELAY:Hr.OFF;static DEFAULT_AUTO_SAVE_DELAY=1e3;static READONLY_MESSAGES={providerReadonly:{value:c("providerReadonly","Editor is read-only because the file system of the file is read-only."),isTrusted:!0},sessionReadonly:{value:c({key:"sessionReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},configuredReadonly:{value:c({key:"configuredReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure or [toggle for this session](command:{1}).",`workbench.action.openSettings?${encodeURIComponent('["files.readonly"]')}`,"workbench.action.files.toggleActiveEditorReadonlyInSession"),isTrusted:!0},fileLocked:{value:c({key:"fileLocked",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},fileReadonly:{value:c("fileReadonly","Editor is read-only because the file is read-only."),isTrusted:!0}};_onDidChangeAutoSaveConfiguration=this._register(new x);onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event;_onDidChangeAutoSaveDisabled=this._register(new x);onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event;_onDidChangeFilesAssociation=this._register(new x);onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event;_onDidChangeReadonly=this._register(new x);onDidChangeReadonly=this._onDidChangeReadonly.event;currentGlobalAutoSaveConfiguration;currentFilesAssociationConfiguration;currentHotExitConfiguration;autoSaveConfigurationCache=new or(1e3);autoSaveDisabledOverrides=new fi;autoSaveAfterShortDelayContext=I4.bindTo(this.contextKeyService);readonlyIncludeMatcher=this._register(new Wh(()=>this.createReadonlyMatcher(PR)));readonlyExcludeMatcher=this._register(new Wh(()=>this.createReadonlyMatcher(MR)));configuredReadonlyFromPermissions;sessionReadonlyOverrides=new fi(t=>this.uriIdentityService.extUri.getComparisonKey(t));createReadonlyMatcher(t){let n=this._register(new yo(i=>this.configurationService.getValue(t,{resource:i}),i=>i.affectsConfiguration(t),this.contextService,this.configurationService));return this._register(n.onExpressionChange(()=>this._onDidChangeReadonly.fire())),n}isReadonly(t,n){let i=this.fileService.getProvider(t.scheme);if(i&&AR(i))return i.readOnlyMessage??Io.READONLY_MESSAGES.providerReadonly;let r=this.sessionReadonlyOverrides.get(t);return typeof r=="boolean"?r===!0?Io.READONLY_MESSAGES.sessionReadonly:!1:this.uriIdentityService.extUri.isEqualOrParent(t,this.environmentService.userRoamingDataHome)||this.uriIdentityService.extUri.isEqual(t,this.contextService.getWorkspace().configuration??void 0)?!1:this.readonlyIncludeMatcher.value.matches(t)?this.readonlyExcludeMatcher.value.matches(t)?!1:Io.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&n?.locked?Io.READONLY_MESSAGES.fileLocked:n?.readonly?Io.READONLY_MESSAGES.fileReadonly:!1}async updateReadonly(t,n){if(n==="toggle"){let i;try{i=await this.fileService.resolve(t,{resolveMetadata:!0})}catch{}n=!this.isReadonly(t,i)}n==="reset"?this.sessionReadonlyOverrides.delete(t):this.sessionReadonlyOverrides.set(t,n),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration("files")&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)}))}onFilesConfigurationChange(t,n){this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,t.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(this.getAutoSaveMode(void 0).mode===1),n&&this._onDidChangeAutoSaveConfiguration.fire();let i=t?.files?.associations;Si(this.currentFilesAssociationConfiguration,i)||(this.currentFilesAssociationConfiguration=i,n&&this._onDidChangeFilesAssociation.fire());let r=t?.files?.hotExit;r===Nu.OFF||r===Nu.ON_EXIT_AND_WINDOW_CLOSE?this.currentHotExitConfiguration=r:this.currentHotExitConfiguration=Nu.ON_EXIT;let s=!!t?.files?.readonlyFromPermissions;s!==!!this.configuredReadonlyFromPermissions&&(this.configuredReadonlyFromPermissions=s,n&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(t){let n=this.toResource(t);if(n){let i=this.autoSaveConfigurationCache.get(n);return i||(i=this.computeAutoSaveConfiguration(n,this.textResourceConfigurationService.getValue(n,"files")),this.autoSaveConfigurationCache.set(n,i)),i}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(t,n){let i,r,s,a,l,d;switch(n?.autoSave??Io.DEFAULT_AUTO_SAVE_MODE){case Hr.AFTER_DELAY:{i="afterDelay",r=typeof n?.autoSaveDelay=="number"&&n.autoSaveDelay>=0?n.autoSaveDelay:Io.DEFAULT_AUTO_SAVE_DELAY,d=r<=Io.DEFAULT_AUTO_SAVE_DELAY;break}case Hr.ON_FOCUS_CHANGE:i="onFocusChange";break;case Hr.ON_WINDOW_CHANGE:i="onWindowChange";break}return n?.autoSaveWorkspaceFilesOnly===!0&&(s=!0,t&&!this.contextService.isInsideWorkspace(t)&&(l=!0,d=void 0)),n?.autoSaveWhenNoErrors===!0&&(a=!0,d=void 0),{autoSave:i,autoSaveDelay:r,autoSaveWorkspaceFilesOnly:s,autoSaveWhenNoErrors:a,isOutOfWorkspace:l,isShortAutoSaveDelay:d}}toResource(t){return t instanceof qr?eo.getOriginalUri(t,{supportSideBySide:1}):t}hasShortAutoSaveDelay(t){let n=this.toResource(t);return this.getAutoSaveConfiguration(n).isShortAutoSaveDelay?!n||!this.autoSaveDisabledOverrides.has(n):!1}getAutoSaveMode(t,n){let i=this.toResource(t);if(i&&this.autoSaveDisabledOverrides.has(i))return{mode:0,reason:4};let r=this.getAutoSaveConfiguration(i);if(typeof r.autoSave>"u")return{mode:0,reason:1};if(typeof n=="number"&&(r.autoSave==="afterDelay"&&n!==2||r.autoSave==="onFocusChange"&&n!==3&&n!==4||r.autoSave==="onWindowChange"&&n!==4))return{mode:0,reason:1};if(i){if(r.autoSaveWorkspaceFilesOnly&&r.isOutOfWorkspace)return{mode:0,reason:2};if(r.autoSaveWhenNoErrors&&this.markerService.read({resource:i,take:1,severities:8}).length>0)return{mode:0,reason:3}}switch(r.autoSave){case"afterDelay":return typeof r.autoSaveDelay=="number"&&r.autoSaveDelay<=Io.DEFAULT_AUTO_SAVE_DELAY?{mode:r.autoSaveWhenNoErrors?2:1}:{mode:2};case"onFocusChange":return{mode:3};case"onWindowChange":return{mode:4}}}async toggleAutoSave(){let t=this.configurationService.getValue("files.autoSave"),n;return[Hr.AFTER_DELAY,Hr.ON_FOCUS_CHANGE,Hr.ON_WINDOW_CHANGE].some(i=>i===t)?n=Hr.OFF:n=Hr.AFTER_DELAY,this.configurationService.updateValue("files.autoSave",n)}disableAutoSave(t){let n=this.toResource(t);if(!n)return N.None;let i=this.autoSaveDisabledOverrides.get(n)??0;return this.autoSaveDisabledOverrides.set(n,i+1),i===0&&this._onDidChangeAutoSaveDisabled.fire(n),re(()=>{let r=this.autoSaveDisabledOverrides.get(n)??0;r<=1?(this.autoSaveDisabledOverrides.delete(n),this._onDidChangeAutoSaveDisabled.fire(n)):this.autoSaveDisabledOverrides.set(n,r-1)})}get isHotExitEnabled(){return this.contextService.getWorkspace().transient?!1:this.currentHotExitConfiguration!==Nu.OFF}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(t,n){return this.configurationService.getValue("files.saveConflictResolution",{resource:t,overrideIdentifier:n})!=="overwriteFileOnDisk"}};Io=k([I(0,st),I(1,He),I(2,bn),I(3,Yo),I(4,Qd),I(5,Ut),I(6,uv),I(7,ii)],Io);qn(zs,Io,0);var zT=H("workingCopyEditorService"),lg=class extends N{constructor(t){super();this.editorService=t}_onDidRegisterHandler=this._register(new x);onDidRegisterHandler=this._onDidRegisterHandler.event;handlers=new Set;registerHandler(t){return this.handlers.add(t),this._onDidRegisterHandler.fire(t),re(()=>this.handlers.delete(t))}findEditor(t){for(let n of this.editorService.getEditors(0))if(this.isOpen(t,n.editor))return n}isOpen(t,n){for(let i of this.handlers)if(i.isOpen(t,n))return!0;return!1}};lg=k([I(0,Xt)],lg);qn(zT,lg,1);var IP=H("elevatedFileService");var cp=class extends N{constructor(t,n){super();this.resource=t;this.fileService=n;this._register(this.fileService.onDidFilesChange(i=>this.onDidFilesChange(i)))}_onDidChangeOrphaned=this._register(new x);onDidChangeOrphaned=this._onDidChangeOrphaned.event;orphaned=!1;isOrphaned(){return this.orphaned}async onDidFilesChange(t){let n=!1,i;if(this.orphaned?t.contains(this.resource,1)&&(i=!1,n=!0):t.contains(this.resource,2)&&(i=!0,n=!0),n&&this.orphaned!==i){let r=!1;i&&(await $i(100,yn.None),this.isDisposed()?r=!0:r=!await this.fileService.exists(this.resource)),this.orphaned!==r&&!this.isDisposed()&&this.setOrphaned(r)}}setOrphaned(t){this.orphaned!==t&&(this.orphaned=t,this._onDidChangeOrphaned.fire())}_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;isDisposed(){return this._store.isDisposed}dispose(){this.orphaned=!1,this._onWillDispose.fire(),super.dispose()}isModified(){return this.isDirty()}};cp=k([I(1,Ut)],cp);var Jd=class extends cp{constructor(t,n,i,r,s,a,l,d,u,p,h,m,g,f,y,C){super(n,a);this.typeId=t;this.name=i;this.modelFactory=r;this.externalResolver=s;this.logService=l;this.workingCopyFileService=d;this.filesConfigurationService=u;this.workingCopyBackupService=p;this.notificationService=m;this.workingCopyEditorService=g;this.editorService=f;this.elevatedFileService=y;this.progressService=C;this._register(h.registerWorkingCopy(this)),this.registerListeners()}capabilities=0;_model=void 0;get model(){return this._model}_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidResolve=this._register(new x);onDidResolve=this._onDidResolve.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidSaveError=this._register(new x);onDidSaveError=this._onDidSaveError.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new x);onDidRevert=this._onDidRevert.event;_onDidChangeReadonly=this._register(new x);onDidChangeReadonly=this._onDidChangeReadonly.event;registerListeners(){this._register(this.filesConfigurationService.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))}dirty=!1;savedVersionId;isDirty(){return this.dirty}markModified(){this.setDirty(!0)}setDirty(t){if(!this.isResolved())return;let n=this.dirty;this.doSetDirty(t),t!==n&&this._onDidChangeDirty.fire()}doSetDirty(t){let n=this.dirty,i=this.inConflictMode,r=this.inErrorMode,s=this.savedVersionId;return t?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.isResolved()&&(this.savedVersionId=this.model.versionId)),()=>{this.dirty=n,this.inConflictMode=i,this.inErrorMode=r,this.savedVersionId=s}}lastResolvedFileStat;isResolved(){return!!this.model}async resolve(t){if(this.trace("resolve() - enter"),this.isDisposed()){this.trace("resolve() - exit - without resolving because file working copy is disposed");return}if(!t?.contents&&(this.dirty||this.saveSequentializer.isRunning())){this.trace("resolve() - exit - without resolving because file working copy is dirty or being saved");return}return this.doResolve(t)}async doResolve(t){if(t?.contents)return this.resolveFromBuffer(t.contents);if(!(!this.isResolved()&&await this.resolveFromBackup()))return this.resolveFromFile(t)}async resolveFromBuffer(t){this.trace("resolveFromBuffer()");let n,i,r,s;try{let a=await this.fileService.stat(this.resource);n=a.mtime,i=a.ctime,r=a.size,s=a.etag,this.setOrphaned(!1)}catch(a){n=Date.now(),i=Date.now(),r=0,s=Fm,this.setOrphaned(a.fileOperationResult===1)}return this.resolveFromContent({resource:this.resource,name:this.name,mtime:n,ctime:i,size:r,etag:s,value:t,readonly:!1,locked:!1},!0)}async resolveFromBackup(){let t=await this.workingCopyBackupService.resolve(this);return this.isResolved()?(this.trace("resolveFromBackup() - exit - withoutresolving because previously new file working copy got created meanwhile"),!0):t?(await this.doResolveFromBackup(t),!0):!1}async doResolveFromBackup(t){this.trace("doResolveFromBackup()"),await this.resolveFromContent({resource:this.resource,name:this.name,mtime:t.meta?t.meta.mtime:Date.now(),ctime:t.meta?t.meta.ctime:Date.now(),size:t.meta?t.meta.size:0,etag:t.meta?t.meta.etag:Fm,value:t.value,readonly:!1,locked:!1},!0),t.meta&&t.meta.orphaned&&this.setOrphaned(!0)}async resolveFromFile(t){this.trace("resolveFromFile()");let n=t?.forceReadFromFile,i;n?i=Fm:this.lastResolvedFileStat&&(i=this.lastResolvedFileStat.etag);let r=this.versionId;try{let s=await this.fileService.readFileStream(this.resource,{etag:i,limits:t?.limits});if(this.setOrphaned(!1),r!==this.versionId){this.trace("resolveFromFile() - exit - without resolving because file working copy content changed");return}await this.resolveFromContent(s,!1)}catch(s){let a=s.fileOperationResult;if(this.setOrphaned(a===1),this.isResolved()&&a===2){s instanceof Gv&&this.updateLastResolvedFileStat(s.stat);return}if(this.isResolved()&&a===1&&!n)return;throw s}}async resolveFromContent(t,n){if(this.trace("resolveFromContent() - enter"),this.isDisposed()){this.trace("resolveFromContent() - exit - because working copy is disposed");return}this.updateLastResolvedFileStat({resource:this.resource,name:t.name,mtime:t.mtime,ctime:t.ctime,size:t.size,etag:t.etag,readonly:t.readonly,locked:t.locked,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0}),this.isResolved()?await this.doUpdateModel(t.value):await this.doCreateModel(t.value),this.setDirty(!!n),this._onDidResolve.fire()}async doCreateModel(t){this.trace("doCreateModel()"),this._model=this._register(await this.modelFactory.createModel(this.resource,t,yn.None)),this.installModelListeners(this._model)}ignoreDirtyOnModelContentChange=!1;async doUpdateModel(t){this.trace("doUpdateModel()"),this.ignoreDirtyOnModelContentChange=!0;try{await this.model?.update(t,yn.None)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n.isUndoing||n.isRedoing))),this._register(t.onWillDispose(()=>this.dispose()))}onModelContentChanged(t,n){if(this.trace("onModelContentChanged() - enter"),this.versionId++,this.trace(`onModelContentChanged() - new versionId ${this.versionId}`),n&&(this.lastContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(t.versionId===this.savedVersionId){this.trace("onModelContentChanged() - model content changed back to last saved version");let i=this.dirty;this.setDirty(!1),i&&this._onDidRevert.fire()}else this.trace("onModelContentChanged() - model content changed and marked as dirty"),this.setDirty(!0);this._onDidChangeContent.fire()}async forceResolveFromFile(){this.isDisposed()||await this.externalResolver({forceReadFromFile:!0})}get backupDelay(){return this.model?.configuration?.backupDelay}async backup(t){let n;this.lastResolvedFileStat&&(n={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.isOrphaned()});let i;return this.isResolved()&&(i=await zh(this.model.snapshot(2,t),t)),{meta:n,content:i}}versionId=0;static UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500;lastContentChangeFromUndoRedo=void 0;saveSequentializer=new ab;ignoreSaveFromSaveParticipants=!1;async save(t=Object.create(null)){return this.isResolved()?this.isReadonly()?(this.trace("save() - ignoring request for readonly resource"),!1):(this.hasState(3)||this.hasState(5))&&(t.reason===2||t.reason===3||t.reason===4)?(this.trace("save() - ignoring auto save request for file working copy that is in conflict or error"),!1):(this.trace("save() - enter"),await this.doSave(t),this.trace("save() - exit"),this.hasState(0)):!1}async doSave(t){typeof t.reason!="number"&&(t.reason=1);let n=this.versionId;if(this.trace(`doSave(${n}) - enter with versionId ${n}`),this.ignoreSaveFromSaveParticipants){this.trace(`doSave(${n}) - exit - refusing to save() recursively from save participant`);return}if(this.saveSequentializer.isRunning(n))return this.trace(`doSave(${n}) - exit - found a running save for versionId ${n}`),this.saveSequentializer.running;if(!t.force&&!this.dirty){this.trace(`doSave(${n}) - exit - because not dirty and/or versionId is different (this.isDirty: ${this.dirty}, this.versionId: ${this.versionId})`);return}if(this.saveSequentializer.isRunning())return this.trace(`doSave(${n}) - exit - because busy saving`),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue(()=>this.doSave(t));this.isResolved()&&this.model.pushStackElement();let i=new Wo;return this.progressService.withProgress({title:c("saveParticipants","Saving '{0}'",this.name),location:10,cancellable:!0,delay:this.isDirty()?3e3:5e3},r=>this.doSaveSequential(n,t,r,i),()=>{i.cancel()}).finally(()=>{i.dispose()})}doSaveSequential(t,n,i,r){return this.saveSequentializer.run(t,(async()=>{if(this.isResolved()&&!n.skipSaveParticipants&&this.workingCopyFileService.hasSaveParticipants)try{if(n.reason===2&&typeof this.lastContentChangeFromUndoRedo=="number"){let l=Date.now()-this.lastContentChangeFromUndoRedo;l<Jd.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await $i(Jd.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-l)}if(!r.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{await this.workingCopyFileService.runSaveParticipants(this,{reason:n.reason??1,savedFrom:n.from},i,r.token)}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(l){this.logService.error(`[stored file working copy] runSaveParticipants(${t}) - resulted in an error: ${l.toString()}`,this.resource.toString(),this.typeId)}if(r.token.isCancellationRequested||this.isDisposed()||!this.isResolved())return;t=this.versionId,this.inErrorMode=!1,i.report({message:c("saveTextFile","Writing into file...")}),this.trace(`doSave(${t}) - before write()`);let s=lt(this.lastResolvedFileStat),a=this;return this.saveSequentializer.run(t,(async()=>{try{let l={mtime:s.mtime,etag:n.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(s.resource)?Fm:s.etag,unlock:n.writeUnlock},d;if(typeof a.model.save=="function")try{d=await a.model.save(l,r.token)}catch(u){if(r.token.isCancellationRequested)return;throw u}else{let u=await zh(a.model.snapshot(1,r.token),r.token);if(r.token.isCancellationRequested)return;r.dispose(),n?.writeElevated&&this.elevatedFileService.isSupported(s.resource)?d=await this.elevatedFileService.writeFileElevated(s.resource,lt(u),l):d=await this.fileService.writeFile(s.resource,lt(u),l)}this.handleSaveSuccess(d,t,n)}catch(l){this.handleSaveError(l,t,n)}})(),()=>r.cancel())})(),()=>r.cancel())}handleSaveSuccess(t,n,i){this.updateLastResolvedFileStat(t),n===this.versionId?(this.trace(`handleSaveSuccess(${n}) - setting dirty to false because versionId did not change`),this.setDirty(!1)):this.trace(`handleSaveSuccess(${n}) - not setting dirty to false because versionId did change meanwhile`),this.setOrphaned(!1),this._onDidSave.fire({reason:i.reason,stat:t,source:i.source})}handleSaveError(t,n,i){if((i.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,[`[stored file working copy] handleSaveError(${n}) - exit - resulted in a save error: ${t.toString()}`,this.resource.toString(),this.typeId]),i.ignoreErrorHandler)throw t;this.setDirty(!0),this.inErrorMode=!0,t.fileOperationResult===3&&(this.inConflictMode=!0),this.doHandleSaveError(t,i),this._onDidSaveError.fire()}doHandleSaveError(t,n){let i=t,r=[],s;if(i.fileOperationResult===3)s=c("staleSaveError","Failed to save '{0}': The content of the file is newer. Do you want to overwrite the file with your changes?",this.name),r.push(ei({id:"fileWorkingCopy.overwrite",label:c("overwrite","Overwrite"),run:()=>this.save({...n,ignoreModifiedSince:!0,reason:1})})),r.push(ei({id:"fileWorkingCopy.revert",label:c("revert","Revert"),run:()=>this.revert()}));else{let d=i.fileOperationResult===5,u=d&&i.options?.unlock,p=i.fileOperationResult===6,h=this.elevatedFileService.isSupported(this.resource);Ly(t)&&r.push(...t.actions),h&&(p||u)?r.push(ei({id:"fileWorkingCopy.saveElevated",label:u?St?c("overwriteElevated","Overwrite as Admin..."):c("overwriteElevatedSudo","Overwrite as Sudo..."):St?c("saveElevated","Retry as Admin..."):c("saveElevatedSudo","Retry as Sudo..."),run:()=>{this.save({...n,writeElevated:!0,writeUnlock:u,reason:1})}})):d?r.push(ei({id:"fileWorkingCopy.unlock",label:c("overwrite","Overwrite"),run:()=>this.save({...n,writeUnlock:!0,reason:1})})):r.push(ei({id:"fileWorkingCopy.retry",label:c("retry","Retry"),run:()=>this.save({...n,reason:1})})),r.push(ei({id:"fileWorkingCopy.saveAs",label:c("saveAs","Save As..."),run:async()=>{let m=this.workingCopyEditorService.findEditor(this);m&&((await this.editorService.save(m,{saveAs:!0,reason:1})).success||this.doHandleSaveError(t,n))}})),r.push(ei({id:"fileWorkingCopy.revert",label:c("revert","Revert"),run:()=>this.revert()})),d?u&&h?s=St?c("readonlySaveErrorAdmin","Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",this.name):c("readonlySaveErrorSudo","Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",this.name):s=c("readonlySaveError","Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",this.name):h&&p?s=St?c("permissionDeniedSaveError","Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",this.name):c("permissionDeniedSaveErrorSudo","Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",this.name):s=c({key:"genericSaveError",comment:["{0} is the resource that failed to save and {1} the error message"]},"Failed to save '{0}': {1}",this.name,Us(t,!1))}let a=this.notificationService.notify({id:`${Nr(this.resource.toString())}`,severity:vP.Error,message:s,actions:{primary:r}}),l=this._register(G.once(G.any(this.onDidSave,this.onDidRevert))(()=>a.close()));this._register(G.once(a.onDidClose)(()=>l.dispose()))}updateLastResolvedFileStat(t){let n=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=t.mtime?this.lastResolvedFileStat=t:this.lastResolvedFileStat={...this.lastResolvedFileStat,readonly:t.readonly,locked:t.locked}:this.lastResolvedFileStat=t,this.isReadonly()!==n&&this._onDidChangeReadonly.fire()}async revert(t){if(!this.isResolved()||!this.dirty&&!t?.force)return;this.trace("revert()");let n=this.dirty,i=this.doSetDirty(!1);if(!t?.soft)try{await this.forceResolveFromFile()}catch(s){if(s.fileOperationResult!==1)throw i(),s}this._onDidRevert.fire(),n&&this._onDidChangeDirty.fire()}inConflictMode=!1;inErrorMode=!1;hasState(t){switch(t){case 3:return this.inConflictMode;case 1:return this.dirty;case 5:return this.inErrorMode;case 4:return this.isOrphaned();case 2:return this.saveSequentializer.isRunning();case 0:return!this.dirty}}async joinState(t){return this.saveSequentializer.running}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}trace(t){this.logService.trace(`[stored file working copy] ${t}`,this.resource.toString(),this.typeId)}dispose(){this.trace("dispose()"),this.inConflictMode=!1,this.inErrorMode=!1,this._model=void 0,super.dispose()}};Jd=k([I(5,Ut),I(6,wi),I(7,HT),I(8,zs),I(9,qv),I(10,Wl),I(11,La),I(12,zT),I(13,Xt),I(14,IP),I(15,UT)],Jd);var up=class extends N{constructor(t){super();this.logService=t}saveParticipants=[];get length(){return this.saveParticipants.length}addSaveParticipant(t){let n=Sf(this.saveParticipants,t);return re(()=>n())}async participate(t,n,i,r){t.model?.pushStackElement();for(let s of this.saveParticipants){if(r.isCancellationRequested||t.isDisposed())break;try{let a=s.participate(t,n,i,r);await zh(a,r)}catch(a){this.logService.warn(a)}}t.model?.pushStackElement()}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length),super.dispose()}};up=k([I(0,wi)],up);var HT=H("workingCopyFileService"),dg=class extends N{constructor(t,n,i,r){super();this.fileService=t;this.workingCopyService=n;this.instantiationService=i;this.uriIdentityService=r;this._register(this.registerWorkingCopyProvider(s=>this.workingCopyService.workingCopies.filter(a=>this.fileService.hasProvider(s)?this.uriIdentityService.extUri.isEqualOrParent(a.resource,s):this.uriIdentityService.extUri.isEqual(a.resource,s))))}_onWillRunWorkingCopyFileOperation=this._register(new Xc);onWillRunWorkingCopyFileOperation=this._onWillRunWorkingCopyFileOperation.event;_onDidFailWorkingCopyFileOperation=this._register(new Xc);onDidFailWorkingCopyFileOperation=this._onDidFailWorkingCopyFileOperation.event;_onDidRunWorkingCopyFileOperation=this._register(new Xc);onDidRunWorkingCopyFileOperation=this._onDidRunWorkingCopyFileOperation.event;correlationIds=0;create(t,n,i){return this.doCreateFileOrFolder(t,!0,n,i)}createFolder(t,n,i){return this.doCreateFileOrFolder(t,!1,n,i)}async doCreateFileOrFolder(t,n,i,r){if(t.length===0)return[];if(n){let u=(await co.settled(t.map(p=>this.fileService.canCreateFile(p.resource,{overwrite:p.overwrite})))).find(p=>p instanceof Error);if(u instanceof Error)throw u}let s=t.map(d=>({target:d.resource}));await this.runFileOperationParticipants(s,0,r,i);let a={correlationId:this.correlationIds++,operation:0,files:s};await this._onWillRunWorkingCopyFileOperation.fireAsync(a,yn.None);let l;try{n?l=await co.settled(t.map(d=>this.fileService.createFile(d.resource,d.contents,{overwrite:d.overwrite}))):l=await co.settled(t.map(d=>this.fileService.createFolder(d.resource)))}catch(d){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(a,yn.None),d}return await this._onDidRunWorkingCopyFileOperation.fireAsync(a,yn.None),l}async move(t,n,i){return this.doMoveOrCopy(t,!0,n,i)}async copy(t,n,i){return this.doMoveOrCopy(t,!1,n,i)}async doMoveOrCopy(t,n,i,r){let s=[];for(let{file:{source:d,target:u},overwrite:p}of t){let h=await(n?this.fileService.canMove(d,u,p):this.fileService.canCopy(d,u,p));if(h instanceof Error)throw h}let a=t.map(d=>d.file);await this.runFileOperationParticipants(a,n?2:3,r,i);let l={correlationId:this.correlationIds++,operation:n?2:3,files:a};await this._onWillRunWorkingCopyFileOperation.fireAsync(l,yn.None);try{for(let{file:{source:d,target:u},overwrite:p}of t){if(!this.uriIdentityService.extUri.isEqual(d,u)){let h=n?[...this.getDirty(d),...this.getDirty(u)]:this.getDirty(u);await co.settled(h.map(m=>m.revert({soft:!0})))}n?s.push(await this.fileService.move(d,u,p)):s.push(await this.fileService.copy(d,u,p))}}catch(d){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(l,yn.None),d}return await this._onDidRunWorkingCopyFileOperation.fireAsync(l,yn.None),s}async delete(t,n,i){for(let a of t){let l=await this.fileService.canDelete(a.resource,{recursive:a.recursive,useTrash:a.useTrash});if(l instanceof Error)throw l}let r=t.map(a=>({target:a.resource}));await this.runFileOperationParticipants(r,1,i,n);let s={correlationId:this.correlationIds++,operation:1,files:r};await this._onWillRunWorkingCopyFileOperation.fireAsync(s,yn.None);for(let a of t){let l=this.getDirty(a.resource);await co.settled(l.map(d=>d.revert({soft:!0})))}try{for(let a of t)await this.fileService.del(a.resource,{recursive:a.recursive,useTrash:a.useTrash})}catch(a){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(s,yn.None),a}await this._onDidRunWorkingCopyFileOperation.fireAsync(s,yn.None)}fileOperationParticipants=this._register(this.instantiationService.createInstance(dp));addFileOperationParticipant(t){return this.fileOperationParticipants.addFileOperationParticipant(t)}runFileOperationParticipants(t,n,i,r){return this.fileOperationParticipants.participate(t,n,i,r)}saveParticipants=this._register(this.instantiationService.createInstance(up));get hasSaveParticipants(){return this.saveParticipants.length>0}addSaveParticipant(t){return this.saveParticipants.addSaveParticipant(t)}runSaveParticipants(t,n,i,r){return this.saveParticipants.participate(t,n,i,r)}workingCopyProviders=[];registerWorkingCopyProvider(t){let n=Sf(this.workingCopyProviders,t);return re(n)}getDirty(t){let n=new Set;for(let i of this.workingCopyProviders)for(let r of i(t))r.isDirty()&&n.add(r);return Array.from(n)}};dg=k([I(0,Ut),I(1,Wl),I(2,Ze),I(3,Qd)],dg);qn(HT,dg,1);var Jo=H("textFileService");var E4;(e=>e.DEFAULT={allowTrailingComma:!0})(E4||={});var Qn=H("keybindingService");var KT=".vscode",w4="settings",FLe=`${KT}/${w4}.json`;var BLe=[1],VLe=[2,3,4,5,6],T4=[3,4,5],WLe=[1,...T4],ULe=[2,3,4,5,6],k4=[3,4,5,6],D4=[4,5,6],My="tasks",SP="launch",EP=Object.create(null);EP[My]=`${KT}/${My}.json`;EP[SP]=`${KT}/${SP}.json`;var _4=Object.create(null);_4[My]=`${My}.json`;var zLe=He;var GT=class extends Rl{_currentResultGroups=new Map;updateResultGroup(e,t){return t?this._currentResultGroups.set(e,t):this._currentResultGroups.delete(e),this.removeDuplicateResults(),this.update()}removeDuplicateResults(){let e=new Set;[...this._currentResultGroups.keys()].sort((t,n)=>this._currentResultGroups.get(t).order-this._currentResultGroups.get(n).order).forEach(t=>{let n=this._currentResultGroups.get(t);n.result.filterMatches=n.result.filterMatches.filter(i=>!e.has(i.setting.key)),n.result.filterMatches.forEach(i=>e.add(i.setting.key))})}filterSettings(e,t,n){let i=this.filterGroups,r=[];for(let s of i){let a=t(s);for(let l of s.sections)for(let d of l.settings){let u=n(d,s);(a||u)&&r.push({setting:d,matches:u&&u.matches,matchType:u?.matchType??0,score:u?.score??0})}}return r}getPreference(e){for(let t of this.settingsGroups)for(let n of t.sections)for(let i of n.settings)if(e===i.key)return i}collectMetadata(e){let t=Object.create(null),n=!1;return e.forEach(i=>{i.result.metadata&&(t[i.id]=i.result.metadata,n=!0)}),n?t:null}get filterGroups(){return this.settingsGroups}};var Ny=class extends GT{constructor(t,n){super();this._defaultSettings=t;this._register(n.onDidChangeConfiguration(i=>{i.source===7&&(this.dirty=!0,this._onDidChangeGroups.fire())})),this._register(Be.as(ws.Configuration).onDidSchemaChange(i=>{this.dirty=!0,this._onDidChangeGroups.fire()}))}_onDidChangeGroups=this._register(new x);onDidChangeGroups=this._onDidChangeGroups.event;additionalGroups=[];dirty=!1;get filterGroups(){return this.settingsGroups.slice(1)}get settingsGroups(){let t=this._defaultSettings.getSettingsGroups(this.dirty);return this.dirty=!1,[...t,...this.additionalGroups]}setAdditionalGroups(t){this.additionalGroups=t}findValueMatches(t,n){return[]}update(){throw new Error("Not supported")}};Ny=k([I(1,He)],Ny);function L4(o){return"// "+c("defaultKeybindingsHeader","Override key bindings by placing them into your key bindings file.")+`
`+o.getDefaultKeybindingsContent()}var Fy=class{constructor(e,t){this._uri=e;this.keybindingService=t}_content;get uri(){return this._uri}get content(){return this._content||(this._content=L4(this.keybindingService)),this._content}getPreference(){return null}dispose(){}};Fy=k([I(1,Qn)],Fy);var cg=H("preferencesService");var Da={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},pp={id:"default",displayName:c("promptOpenWith.defaultEditor.displayName","Text Editor"),providerDisplayName:c("builtinProviderDisplayName","Built-in")},wP="workbench.editor.sidebysideEditor";var TP="workbench.editors.binaryResourceDiffEditor";function YT(o){let e=o;return!!e&&typeof e.getSelection=="function"&&!!e.onDidChangeSelection}function sp(o,e,t){for(let n of t.visibleEditorPanes)if(n.group.id===e&&o.matches(n.input))return n.getViewState()}function _y(o){if(jn(o))return!1;let e=o;return j.isUri(e?.resource)}function $r(o){if(jn(o))return!1;let e=o;return e?.original!==void 0&&e.modified!==void 0}function ap(o){if(jn(o))return!1;let e=o;return!e||e.resources&&!Array.isArray(e.resources)?!1:!!e.resources||!!e.multiDiffSource}function Bs(o){if(jn(o)||$r(o))return!1;let e=o;return e?.primary!==void 0&&e.secondary!==void 0}function kP(o){if(jn(o))return!1;let e=o;return e?e.resource===void 0||e.resource.scheme===me.untitled||e.forceUntitled===!0:!1}function Vs(o){if(jn(o))return!1;let e=o;return j.isUri(e?.base?.resource)&&j.isUri(e?.input1?.resource)&&j.isUri(e?.input2?.resource)&&j.isUri(e?.result?.resource)}var qT=class{mapIdToSaveSource=new Map;registerSource(e,t){let n=this.mapIdToSaveSource.get(e);return n||(n={source:e,label:t},this.mapIdToSaveSource.set(e,n)),n.source}getSourceLabel(e){return this.mapIdToSaveSource.get(e)?.label??e}},POe=new qT;var rg=class extends N{};function jn(o){return o instanceof rg}function A4(o){let e=o;return j.isUri(e?.preferredResource)}function O4(o){let e=o;return jn(e?.primary)&&jn(e?.secondary)}function OT(o){let e=o;return jn(e?.modified)&&jn(e?.original)}function QT(o){let e=o;return typeof e?.groupId=="number"&&jn(e.editor)}var $T=class{getOriginalUri(e,t){if(!e)return;if(Vs(e))return eo.getOriginalUri(e.result,t);if(t?.supportSideBySide){let{primary:i,secondary:r}=this.getSideEditors(e);if(i&&r){if(t?.supportSideBySide===3)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(r,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?i:r}}if($r(e)||ap(e)||Bs(e)||Vs(e))return;let n=A4(e)?e.preferredResource:e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}getSideEditors(e){return O4(e)||Bs(e)?{primary:e.primary,secondary:e.secondary}:OT(e)||$r(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(Vs(e))return eo.getCanonicalUri(e.result,t);if(t?.supportSideBySide){let{primary:i,secondary:r}=this.getSideEditors(e);if(i&&r){if(t?.supportSideBySide===3)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(r,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?i:r}}if($r(e)||ap(e)||Bs(e)||Vs(e))return;let n=e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}filterUri(e,t){if(Array.isArray(t)){if(t.some(n=>e.scheme===n))return e}else if(t===e.scheme)return e}};var eo=new $T;var jT=class{instantiationService;fileEditorFactory;editorSerializerConstructors=new Map;editorSerializerInstances=new Map;start(e){let t=this.instantiationService=e.get(Ze);for(let[n,i]of this.editorSerializerConstructors)this.createEditorSerializer(n,i,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,n){let i=n.createInstance(t);this.editorSerializerInstances.set(e,i)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return lt(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),re(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get(typeof e=="string"?e:e.typeId)}};Be.add(Da.EditorFactory,new jT);function By(o){return Ly(o)}var Hs=class extends N{constructor(t,n){super();this.configurationService=t;this.workspaceContextService=n;this.storeEnablementState(),this.storeCustomPatterns(),this.registerListeners()}_serviceBrand;static SETTING_ID_PATTERNS="workbench.editor.customLabels.patterns";static SETTING_ID_ENABLED="workbench.editor.customLabels.enabled";_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;patterns=[];enabled=!0;cache=new Af(1e3);registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration(Hs.SETTING_ID_ENABLED)){let n=this.enabled;this.storeEnablementState(),n!==this.enabled&&this.patterns.length>0&&this._onDidChange.fire()}else t.affectsConfiguration(Hs.SETTING_ID_PATTERNS)&&(this.cache.clear(),this.storeCustomPatterns(),this._onDidChange.fire())}))}storeEnablementState(){this.enabled=this.configurationService.getValue(Hs.SETTING_ID_ENABLED)}_templateRegexValidation=/[a-zA-Z0-9]/;storeCustomPatterns(){this.patterns=[];let t=this.configurationService.getValue(Hs.SETTING_ID_PATTERNS);for(let n in t){let i=t[n];if(!this._templateRegexValidation.test(i))continue;let r=ol(n),s=ym(n);this.patterns.push({pattern:n,template:i,isAbsolutePath:r,parsedPattern:s})}this.patterns.sort((n,i)=>this.patternWeight(i.pattern)-this.patternWeight(n.pattern))}patternWeight(t){let n=0;for(let i of t.split("/"))i==="**"?n+=1:i==="*"?n+=10:i.includes("*")||i.includes("?")?n+=50:i!==""&&(n+=100);return n}getName(t){if(!this.enabled||this.patterns.length===0)return;let n=t.toString(),i=this.cache.get(n);if(i!==void 0)return i??void 0;let r=this.applyPatterns(t);return this.cache.set(n,r??null),r}applyPatterns(t){let n=this.workspaceContextService.getWorkspaceFolder(t),i;for(let r of this.patterns){let s;if(n&&!r.isAbsolutePath?(i||(i=lu(ys(n.uri),t)??t.path),s=i):s=t.path,r.parsedPattern(s))return this.applyTemplate(r.template,t,s)}}_parsedTemplateExpression=/\$\{(dirname|filename|extname|extname\((?<extnameN>[-+]?\d+)\)|dirname\((?<dirnameN>[-+]?\d+)\))\}/g;_filenameCaptureExpression=/(?<filename>^\.*[^.]*)/;applyTemplate(t,n,i){let r;return t.replace(this._parsedTemplateExpression,(s,a,...l)=>{r=r??S_(n.path);let{dirnameN:d="0",extnameN:u="0"}=l.pop();if(a==="filename"){let{filename:p}=this._filenameCaptureExpression.exec(r.base)?.groups??{};if(p)return p}else if(a==="extname"){let p=this.getExtnames(r.base);if(p)return p}else if(a.startsWith("extname")){let p=parseInt(u),h=this.getNthExtname(r.base,p);if(h)return h}else if(a.startsWith("dirname")){let p=parseInt(d),h=this.getNthDirname(Kc(i),p);if(h)return h}return s})}removeLeadingDot(t){let n=t;for(;n.startsWith(".");)n=n.slice(1);return n}getNthDirname(t,n){t=t.startsWith("/")?t.slice(1):t;let i=t.split("/");return this.getNthFragment(i,n)}getExtnames(t){return this.removeLeadingDot(t).split(".").slice(1).join(".")}getNthExtname(t,n){let i=this.removeLeadingDot(t).split(".");return i.shift(),this.getNthFragment(i,n)}getNthFragment(t,n){let i=t.length,r;n<0?r=Math.abs(n)-1:r=i-n-1;let s=t[r];if(!(s===void 0||s===""))return s}};Hs=k([I(0,He),I(1,bn)],Hs);var zl=H("ICustomEditorLabelService");qn(zl,Hs,1);var hp=class extends qr{constructor(t,n,i,r,s,a,l){super();this.resource=t;this.labelService=i;this.fileService=r;this.filesConfigurationService=s;this.textResourceConfigurationService=a;this.customEditorLabelService=l;this._preferredResource=n||t,this.registerListeners()}get capabilities(){let t=32;return this.fileService.hasProvider(this.resource)?this.filesConfigurationService.isReadonly(this.resource)&&(t|=2):t|=4,t&2||(t|=128),t}_preferredResource;get preferredResource(){return this._preferredResource}registerListeners(){this._register(this.labelService.onDidChangeFormatters(t=>this.onLabelEvent(t.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations(t=>this.onLabelEvent(t.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderCapabilities(t=>this.onLabelEvent(t.scheme))),this._register(this.customEditorLabelService.onDidChange(()=>this.updateLabel()))}onLabelEvent(t){t===this._preferredResource.scheme&&this.updateLabel()}updateLabel(){this._name=void 0,this._shortDescription=void 0,this._mediumDescription=void 0,this._longDescription=void 0,this._shortTitle=void 0,this._mediumTitle=void 0,this._longTitle=void 0,this._onDidChangeLabel.fire()}setPreferredResource(t){fn(t,this._preferredResource)||(this._preferredResource=t,this.updateLabel())}_name=void 0;getName(){return typeof this._name!="string"&&(this._name=this.customEditorLabelService.getName(this._preferredResource)??this.labelService.getUriBasenameLabel(this._preferredResource)),this._name}getDescription(t=1){switch(t){case 0:return this.shortDescription;case 2:return this.longDescription;case 1:default:return this.mediumDescription}}_shortDescription=void 0;get shortDescription(){return typeof this._shortDescription!="string"&&(this._shortDescription=this.labelService.getUriBasenameLabel(ys(this._preferredResource))),this._shortDescription}_mediumDescription=void 0;get mediumDescription(){return typeof this._mediumDescription!="string"&&(this._mediumDescription=this.labelService.getUriLabel(ys(this._preferredResource),{relative:!0})),this._mediumDescription}_longDescription=void 0;get longDescription(){return typeof this._longDescription!="string"&&(this._longDescription=this.labelService.getUriLabel(ys(this._preferredResource))),this._longDescription}_shortTitle=void 0;get shortTitle(){return typeof this._shortTitle!="string"&&(this._shortTitle=this.getName()),this._shortTitle}_mediumTitle=void 0;get mediumTitle(){return typeof this._mediumTitle!="string"&&(this._mediumTitle=this.labelService.getUriLabel(this._preferredResource,{relative:!0})),this._mediumTitle}_longTitle=void 0;get longTitle(){return typeof this._longTitle!="string"&&(this._longTitle=this.labelService.getUriLabel(this._preferredResource)),this._longTitle}getTitle(t){switch(t){case 0:return this.shortTitle;case 2:return this.longTitle;default:case 1:return this.mediumTitle}}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource)}ensureLimits(t){if(t?.limits)return t.limits;let n=NR(this.resource),i,r=this.textResourceConfigurationService.inspect(this.resource,null,"workbench.editorLargeFileConfirmation");return VL(r)&&(i=r.value*hr.MB),{size:i??n}}};hp=k([I(2,Xo),I(3,Ut),I(4,zs),I(5,ii),I(6,zl)],hp);var mp=class extends _s{constructor(e,t,n,i,r){super(n,t,i,r,e)}dispose(){this.textEditorModelHandle&&this.modelService.destroyModel(this.textEditorModelHandle),super.dispose()}};mp=k([I(1,Pi),I(2,mr),I(3,Al),I(4,Cs)],mp);var ec=class extends hp{constructor(t,n,i,r,s,a,l,d,u){super(t,n,s,a,l,d,u);this.editorService=i;this.textFileService=r}save(t,n){return this.resource.scheme!==me.untitled&&!this.fileService.hasProvider(this.resource)?this.saveAs(t,n):this.doSave(n,!1,t)}saveAs(t,n){return this.doSave(n,!0,t)}async doSave(t,n,i){let r;if(n?r=await this.textFileService.saveAs(this.resource,void 0,{...t,suggestedTarget:this.preferredResource}):r=await this.textFileService.save(this.resource,t),!!r)return{resource:r}}async revert(t,n){await this.textFileService.revert(this.resource,n)}};ec=k([I(2,Xt),I(3,Jo),I(4,Xo),I(5,Ut),I(6,zs),I(7,ii),I(8,zl)],ec);var tc=class extends ec{constructor(t,n,i,r,s,a,l,d,u,p,h,m,g){super(t,void 0,d,l,p,u,h,m,g);this.name=n;this.description=i;this.preferredLanguageId=r;this.preferredContents=s;this.textModelService=a}static ID="workbench.editors.resourceEditorInput";get typeId(){return tc.ID}get editorId(){return pp.id}cachedModel=void 0;modelReference=void 0;getName(){return this.name||super.getName()}setName(t){this.name!==t&&(this.name=t,this._onDidChangeLabel.fire())}getDescription(){return this.description}setDescription(t){this.description!==t&&(this.description=t,this._onDidChangeLabel.fire())}setLanguageId(t,n){this.setPreferredLanguageId(t),this.cachedModel?.setLanguageId(t,n)}setPreferredLanguageId(t){this.preferredLanguageId=t}setPreferredContents(t){this.preferredContents=t}async resolve(){let t=this.preferredContents,n=this.preferredLanguageId;this.preferredContents=void 0,this.preferredLanguageId=void 0,this.modelReference||(this.modelReference=this.textModelService.createModelReference(this.resource));let i=await this.modelReference,r=i.object;if(!(r instanceof mp))throw i.dispose(),this.modelReference=void 0,new Error(`Unexpected model for TextResourceEditorInput: ${this.resource}`);return this.cachedModel=r,(typeof t=="string"||typeof n=="string")&&r.updateTextEditorModel(typeof t=="string"?og(t):void 0,n),r}matches(t){return this===t?!0:t instanceof tc?fn(t.resource,this.resource):_y(t)?super.matches(t):!1}dispose(){this.modelReference&&(this.modelReference.then(t=>t.dispose()),this.modelReference=void 0),this.cachedModel=void 0,super.dispose()}};tc=k([I(5,Bm),I(6,Jo),I(7,Xt),I(8,Ut),I(9,Xo),I(10,zs),I(11,ii),I(12,zl)],tc);var Ra=Yo;function DP(o){return o.scheme!==me.file&&o.scheme!==me.vscodeRemote}function P4(o){if(o.folders.length)return o.folders.every(e=>DP(e.uri))?o.folders[0].uri:void 0;if(o.configuration&&DP(o.configuration))return o.configuration}function _P(o){return P4(o)?.scheme}function ie(o,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");let r=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,s)}),this[r]}}function XT(o){return JSON.stringify(o,M4)}function ug(o){let e=JSON.parse(o);return e=gp(e),e}function M4(o,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function gp(o,e=0){if(!o||e>200)return o;if(typeof o=="object"){switch(o.$mid){case 1:return j.revive(o);case 2:return new RegExp(o.source,o.flags);case 17:return new Date(o.source)}if(o instanceof Jt||o instanceof Uint8Array)return o;if(Array.isArray(o))for(let t=0;t<o.length;++t)o[t]=gp(o[t],e+1);else for(let t in o)Object.hasOwnProperty.call(o,t)&&(o[t]=gp(o[t],e+1))}return o}function LP(o){switch(o){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}function RP(o){switch(o){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}function fp(o){let e=0;for(let t=0;;t+=7){let n=o.read(1);if(e|=(n.buffer[0]&127)<<t,!(n.buffer[0]&128))return e}}var N4=Hl(0);function bp(o,e){if(e===0){o.write(N4);return}let t=0;for(let i=e;i!==0;i=i>>>7)t++;let n=Jt.alloc(t);for(let i=0;e!==0;i++)n.buffer[i]=e&127,e=e>>>7,e>0&&(n.buffer[i]|=128);o.write(n)}var JT=class{constructor(e){this.buffer=e}pos=0;read(e){let t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}},ek=class{buffers=[];get buffer(){return Jt.concat(this.buffers)}write(e){this.buffers.push(e)}};function Hl(o){let e=Jt.alloc(1);return e.writeUInt8(o,0),e}var nc={Undefined:Hl(0),String:Hl(1),Buffer:Hl(2),VSBuffer:Hl(3),Array:Hl(4),Object:Hl(5),Uint:Hl(6)},F4=typeof Buffer<"u";function tk(o,e){if(typeof e>"u")o.write(nc.Undefined);else if(typeof e=="string"){let t=Jt.fromString(e);o.write(nc.String),bp(o,t.byteLength),o.write(t)}else if(F4&&Buffer.isBuffer(e)){let t=Jt.wrap(e);o.write(nc.Buffer),bp(o,t.byteLength),o.write(t)}else if(e instanceof Jt)o.write(nc.VSBuffer),bp(o,e.byteLength),o.write(e);else if(Array.isArray(e)){o.write(nc.Array),bp(o,e.length);for(let t of e)tk(o,t)}else if(typeof e=="number"&&(e|0)===e)o.write(nc.Uint),bp(o,e);else{let t=Jt.fromString(JSON.stringify(e));o.write(nc.Object),bp(o,t.byteLength),o.write(t)}}function nk(o){switch(o.read(1).readUInt8(0)){case 0:return;case 1:return o.read(fp(o)).toString();case 2:return o.read(fp(o)).buffer;case 3:return o.read(fp(o));case 4:{let t=fp(o),n=[];for(let i=0;i<t;i++)n.push(nk(o));return n}case 5:return JSON.parse(o.read(fp(o)).toString());case 6:return fp(o)}}var ZT=class{constructor(e,t=null){this.protocol=e;this.protocolListener=this.protocol.onMessage(n=>this.onBuffer(n)),this.logger=t}isDisposed=!1;state=0;activeRequests=new Set;handlers=new Map;lastRequestId=0;protocolListener;logger;_onDidInitialize=new x;onDidInitialize=this._onDidInitialize.event;getChannel(e){let t=this;return{call(n,i,r){return t.isDisposed?Promise.reject(new Gi):t.requestPromise(e,n,i,r)},listen(n,i){return t.isDisposed?G.None:t.requestEvent(e,n,i)}}}requestPromise(e,t,n,i=yn.None){let r=this.lastRequestId++,a={id:r,type:100,channelName:e,name:t,arg:n};if(i.isCancellationRequested)return Promise.reject(new Gi);let l;return new Promise((u,p)=>{if(i.isCancellationRequested)return p(new Gi);let h=()=>{let y=C=>{switch(C.type){case 201:this.handlers.delete(r),u(C.data);break;case 202:{this.handlers.delete(r);let w=new Error(C.data.message);w.stack=Array.isArray(C.data.stack)?C.data.stack.join(`
`):C.data.stack,w.name=C.data.name,p(w);break}case 203:this.handlers.delete(r),p(C.data);break}};this.handlers.set(r,y),this.sendRequest(a)},m=null;this.state===1?h():(m=Uh(y=>this.whenInitialized()),m.then(()=>{m=null,h()}));let g=()=>{m?(m.cancel(),m=null):this.sendRequest({id:r,type:101}),p(new Gi)},f=i.onCancellationRequested(g);l=_i(re(g),f),this.activeRequests.add(l)}).finally(()=>{l.dispose(),this.activeRequests.delete(l)})}requestEvent(e,t,n){let i=this.lastRequestId++,s={id:i,type:102,channelName:e,name:t,arg:n},a=null,l=new x({onWillAddFirstListener:()=>{a=Uh(u=>this.whenInitialized()),a.then(()=>{a=null,this.activeRequests.add(l),this.sendRequest(s)})},onDidRemoveLastListener:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(l),this.sendRequest({id:i,type:103}))}}),d=u=>l.fire(u.data);return this.handlers.set(i,d),l.event}sendRequest(e){switch(e.type){case 100:case 102:{let t=this.send([e.type,e.id,e.channelName,e.name],e.arg);this.logger?.logOutgoing(t,e.id,0,`${LP(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{let t=this.send([e.type,e.id]);this.logger?.logOutgoing(t,e.id,0,LP(e.type));return}}}send(e,t=void 0){let n=new ek;return tk(n,e),tk(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{return this.protocol.send(e),e.byteLength}catch{return 0}}onBuffer(e){let t=new JT(e),n=nk(t),i=nk(t),r=n[0];switch(r){case 200:return this.logger?.logIncoming(e.byteLength,0,0,RP(r)),this.onResponse({type:n[0]});case 201:case 202:case 204:case 203:return this.logger?.logIncoming(e.byteLength,n[1],0,RP(r),i),this.onResponse({type:n[0],id:n[1],data:i})}}onResponse(e){if(e.type===200){this.state=1,this._onDidInitialize.fire();return}this.handlers.get(e.id)?.(e)}get onDidInitializePromise(){return G.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===1?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),Bt(this.activeRequests.values()),this.activeRequests.clear()}};k([ie],ZT.prototype,"onDidInitializePromise",1);var B4;(i=>{function o(r,s,a){let l=r,d=a&&a.disableMarshalling,u=new Map;for(let p in l)t(p)&&u.set(p,G.buffer(l[p],!0,void 0,s));return new class{listen(p,h,m){let g=u.get(h);if(g)return g;let f=l[h];if(typeof f=="function"){if(n(h))return f.call(l,m);if(t(h))return u.set(h,G.buffer(l[h],!0,void 0,s)),u.get(h)}throw new us(`Event not found: ${h}`)}call(p,h,m){let g=l[h];if(typeof g=="function"){if(!d&&Array.isArray(m))for(let y=0;y<m.length;y++)m[y]=gp(m[y]);let f=g.apply(l,m);return f instanceof Promise||(f=Promise.resolve(f)),f}throw new us(`Method not found: ${h}`)}}}i.fromService=o;function e(r,s){let a=s&&s.disableMarshalling;return new Proxy({},{get(l,d){if(typeof d=="string")return s?.properties?.has(d)?s.properties.get(d):n(d)?function(u){return r.listen(d,u)}:t(d)?r.listen(d):async function(...u){let p;s&&!vi(s.context)?p=[s.context,...u]:p=u;let h=await r.call(d,p);return a?h:gp(h)};throw new us(`Property not found: ${String(d)}`)}})}i.toService=e;function t(r){return r[0]==="o"&&r[1]==="n"&&bs(r.charCodeAt(2))}function n(r){return/^onDynamic/.test(r)&&bs(r.charCodeAt(9))}})(B4||={});var V4="diagnosticsService",eNe=H(V4);var W4;(s=>{s.enableDiagnostics=!1,s.records=[];let t=new WeakMap,n=0;function i(a,l){if(!t.has(a)){let d=String(++n);t.set(a,d)}return t.get(a)}function r(a,l,d,u){}s.traceSocketEvent=r})(W4||={});var vNe=H("remoteAuthorityResolverService");var _Ne=H("remoteSocketFactoryService");var U4="signService",ANe=H(U4);var dFe=30*1e3;var Vy=H("remoteAgentService"),_Fe=new class{maxSampleCount=5;sampleDelay=2e3;initial=[];maxInitialCount=3;average=[];maxAverageCount=100;highLatencyMultiple=2;highLatencyMinThreshold=500;highLatencyMaxThreshold=1500;lastMeasurement=void 0;get latency(){return this.lastMeasurement}async measure(o){let e=1/0;for(let n=0;n<this.maxSampleCount;n++){let i=await o.getRoundTripTime();if(i===void 0)return;e=Math.min(e,i/2),await $i(this.sampleDelay)}this.average.push(e),this.average.length>this.maxAverageCount&&this.average.shift();let t;return this.initial.length<this.maxInitialCount?this.initial.push(e):t=this.initial.reduce((n,i)=>n+i,0)/this.initial.length,this.lastMeasurement={initial:t,current:e,average:this.average.reduce((n,i)=>n+i,0)/this.average.length,high:typeof t>"u"?!1:e>this.highLatencyMaxThreshold||e>this.highLatencyMinThreshold&&e>t*this.highLatencyMultiple},this.lastMeasurement}};var AP=H("pathService"),vp=class{constructor(e,t,n,i){this.localUserHome=e;this.remoteAgentService=t;this.environmentService=n;this.contextService=i;this.resolveOS=(async()=>(await this.remoteAgentService.getEnvironment())?.os||ms)(),this.resolveUserHome=(async()=>{let r=await this.remoteAgentService.getEnvironment();return this.maybeUnresolvedUserHome=r?.userHome??e})()}resolveOS;resolveUserHome;maybeUnresolvedUserHome;hasValidBasename(e,t,n){return typeof t=="string"||typeof t>"u"?this.resolveOS.then(i=>this.doHasValidBasename(e,i,t)):this.doHasValidBasename(e,t,n)}doHasValidBasename(e,t,n){return e.scheme===me.file||e.scheme===me.vscodeRemote?v0(n??Ri(e),t===1):!0}get defaultUriScheme(){return vp.findDefaultUriScheme(this.environmentService,this.contextService)}static findDefaultUriScheme(e,t){if(e.remoteAuthority)return me.vscodeRemote;let n=_P(t.getWorkspace());if(n)return n;let i=t.getWorkspace().folders[0];if(i)return i.uri.scheme;let r=t.getWorkspace().configuration;return r?r.scheme:me.file}userHome(e){return e?.preferLocal?this.localUserHome:this.resolveUserHome}get resolvedUserHome(){return this.maybeUnresolvedUserHome}get path(){return this.resolveOS.then(e=>e===1?pn:rt)}async fileURI(e){let t="";if(await this.resolveOS===1&&(e=e.replace(/\\/g,"/")),e[0]==="/"&&e[1]==="/"){let i=e.indexOf("/",2);i===-1?(t=e.substring(2),e="/"):(t=e.substring(2,i),e=e.substring(i)||"/")}return j.from({scheme:me.file,authority:t,path:e,query:"",fragment:""})}};vp=k([I(1,Vy),I(2,Ra),I(3,bn)],vp);var Yr=class extends ec{constructor(t,n,i,r,s,a,l,d,u,p,h){super(t.resource,void 0,r,n,i,s,d,p,h);this.model=t;this.environmentService=a;this.pathService=l;this.textModelService=u;this.registerModelListeners(t),this._register(this.textFileService.untitled.onDidCreate(m=>this.onDidCreateUntitledModel(m)))}static ID="workbench.editors.untitledEditorInput";get typeId(){return Yr.ID}get editorId(){return pp.id}modelResolve=void 0;modelDisposables=this._register(new Y);cachedUntitledTextEditorModelReference=void 0;registerModelListeners(t){this.modelDisposables.clear(),this.modelDisposables.add(t.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this.modelDisposables.add(t.onDidChangeName(()=>this._onDidChangeLabel.fire())),this.modelDisposables.add(t.onDidRevert(()=>this.dispose()))}onDidCreateUntitledModel(t){fn(t.resource,this.model.resource)&&t!==this.model&&(this.model=t,this.registerModelListeners(t))}getName(){return this.model.name}getDescription(t=1){if(!this.model.hasAssociatedFilePath){let n=this.resource.path;return n!==this.getName()?n:void 0}return super.getDescription(t)}getTitle(t){if(!this.model.hasAssociatedFilePath){let n=this.getName(),i=this.getDescription();return i&&i!==n?`${n} \u2022 ${i}`:n}return super.getTitle(t)}isDirty(){return this.model.isDirty()}getEncoding(){return this.model.getEncoding()}setEncoding(t,n){return this.model.setEncoding(t)}get hasLanguageSetExplicitly(){return this.model.hasLanguageSetExplicitly}get hasAssociatedFilePath(){return this.model.hasAssociatedFilePath}setLanguageId(t,n){this.model.setLanguageId(t,n)}getLanguageId(){return this.model.getLanguageId()}async resolve(){return this.modelResolve||(this.modelResolve=(async()=>{this.cachedUntitledTextEditorModelReference=await this.textModelService.createModelReference(this.resource)})()),await this.modelResolve,this.isDisposed()&&this.disposeModelReference(),this.model}toUntyped(t){let n={resource:this.model.hasAssociatedFilePath?T0(this.model.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme):this.resource,forceUntitled:!0,options:{override:this.editorId}};return typeof t?.preserveViewState=="number"&&(n.encoding=this.getEncoding(),n.languageId=this.getLanguageId(),n.contents=this.model.isModified()?this.model.textEditorModel?.getValue():void 0,n.options.viewState=sp(this,t.preserveViewState,this.editorService),typeof n.contents=="string"&&!this.model.hasAssociatedFilePath&&!t.preserveResource&&(n.resource=void 0)),n}matches(t){return this===t?!0:t instanceof Yr?fn(t.resource,this.resource):kP(t)?super.matches(t):!1}dispose(){this.modelResolve=void 0,this.disposeModelReference(),super.dispose()}disposeModelReference(){Bt(this.cachedUntitledTextEditorModelReference),this.cachedUntitledTextEditorModelReference=void 0}};Yr=k([I(1,Jo),I(2,Xo),I(3,Xt),I(4,Ut),I(5,Ra),I(6,AP),I(7,zs),I(8,Bm),I(9,ii),I(10,zl)],Yr);var OP=2e4,NP,ik,PP,ok,MP;function yp(o){NP&&(ik.textContent!==o?(dn(PP),Wy(ik,o)):(dn(ik),Wy(PP,o)))}function pg(o){NP&&(ok.textContent!==o?(dn(MP),Wy(ok,o)):(dn(ok),Wy(MP,o)))}function Wy(o,e){dn(o),e.length>OP&&(e=e.substr(0,OP)),o.textContent=e,o.style.visibility="hidden",o.style.visibility="visible"}var Ct;(r=>(r.Tap="-monaco-gesturetap",r.Change="-monaco-gesturechange",r.Start="-monaco-gesturestart",r.End="-monaco-gesturesend",r.Contextmenu="-monaco-gesturecontextmenu"))(Ct||={});var ki=class ki extends N{static SCROLL_FRICTION=-.005;static INSTANCE;static HOLD_DELAY=700;dispatched=!1;targets=new bi;ignoreTargets=new bi;handle;activeTouches;_lastSetTapCountTime;static CLEAR_TAP_COUNT_TIME=400;constructor(){super(),this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(G.runAndSubscribe(Yh,({window:e,disposables:t})=>{t.add(W(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(W(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(W(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:xe,disposables:this._store}))}static addTarget(e){if(!ki.isTouchDevice())return N.None;ki.INSTANCE||(ki.INSTANCE=al(new ki));let t=ki.INSTANCE.targets.push(e);return re(t)}static ignoreTarget(e){if(!ki.isTouchDevice())return N.None;ki.INSTANCE||(ki.INSTANCE=al(new ki));let t=ki.INSTANCE.ignoreTargets.push(e);return re(t)}static isTouchDevice(){return"ontouchstart"in xe||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){let r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let s=this.newGestureEvent(Ct.Start,r.target);s.pageX=r.pageX,s.pageY=r.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){let n=Date.now(),i=Object.keys(this.activeTouches).length;for(let r=0,s=t.changedTouches.length;r<s;r++){let a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}let l=this.activeTouches[a.identifier],d=Date.now()-l.initialTimeStamp;if(d<ki.HOLD_DELAY&&Math.abs(l.initialPageX-oo(l.rollingPageX))<30&&Math.abs(l.initialPageY-oo(l.rollingPageY))<30){let u=this.newGestureEvent(Ct.Tap,l.initialTarget);u.pageX=oo(l.rollingPageX),u.pageY=oo(l.rollingPageY),this.dispatchEvent(u)}else if(d>=ki.HOLD_DELAY&&Math.abs(l.initialPageX-oo(l.rollingPageX))<30&&Math.abs(l.initialPageY-oo(l.rollingPageY))<30){let u=this.newGestureEvent(Ct.Contextmenu,l.initialTarget);u.pageX=oo(l.rollingPageX),u.pageY=oo(l.rollingPageY),this.dispatchEvent(u)}else if(i===1){let u=oo(l.rollingPageX),p=oo(l.rollingPageY),h=oo(l.rollingTimestamps)-l.rollingTimestamps[0],m=u-l.rollingPageX[0],g=p-l.rollingPageY[0],f=[...this.targets].filter(y=>l.initialTarget instanceof Node&&y.contains(l.initialTarget));this.inertia(e,f,n,Math.abs(m)/h,m>0?1:-1,u,Math.abs(g)/h,g>0?1:-1,p)}this.dispatchEvent(this.newGestureEvent(Ct.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Ct.Tap){let t=new Date().getTime(),n=0;t-this._lastSetTapCountTime>ki.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Ct.Change||e.type===Ct.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(e.initialTarget))return;let t=[];for(let n of this.targets)if(n.contains(e.initialTarget)){let i=0,r=e.initialTarget;for(;r&&r!==n;)i++,r=r.parentElement;t.push([i,n])}t.sort((n,i)=>n[0]-i[0]);for(let[n,i]of t)i.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,i,r,s,a,l,d){this.handle=Yi(e,()=>{let u=Date.now(),p=u-n,h=0,m=0,g=!0;i+=ki.SCROLL_FRICTION*p,a+=ki.SCROLL_FRICTION*p,i>0&&(g=!1,h=r*i*p),a>0&&(g=!1,m=l*a*p);let f=this.newGestureEvent(Ct.Change);f.translationX=h,f.translationY=m,t.forEach(y=>y.dispatchEvent(f)),g||this.inertia(e,t,u,i,r,s+h,a,l,d+m)})}onTouchMove(e){let t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}let s=this.activeTouches[r.identifier],a=this.newGestureEvent(Ct.Change,s.initialTarget);a.translationX=r.pageX-oo(s.rollingPageX),a.translationY=r.pageY-oo(s.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(r.pageX),s.rollingPageY.push(r.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};k([ie],ki,"isTouchDevice",1);var tn=ki;var We=class{emitter;get event(){return this.emitter.event}constructor(e,t,n){let i=r=>this.emitter.fire(r);this.emitter=new x({onWillAddFirstListener:()=>e.addEventListener(t,i,n),onDidRemoveLastListener:()=>e.removeEventListener(t,i,n)})}dispose(){this.emitter.dispose()}};var H4=!1;var K4=4,G4=new x;var q4=300,$4=new x;var hg=class{constructor(e){this.el=e}disposables=new Y;get onPointerMove(){return this.disposables.add(new We(Re(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new We(Re(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}};k([ie],hg.prototype,"onPointerMove",1),k([ie],hg.prototype,"onPointerUp",1);var mg=class{constructor(e){this.el=e}disposables=new Y;get onPointerMove(){return this.disposables.add(new We(this.el,Ct.Change)).event}get onPointerUp(){return this.disposables.add(new We(this.el,Ct.End)).event}dispose(){this.disposables.dispose()}};k([ie],mg.prototype,"onPointerMove",1),k([ie],mg.prototype,"onPointerUp",1);var Ip=class{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}};k([ie],Ip.prototype,"onPointerMove",1),k([ie],Ip.prototype,"onPointerUp",1);var FP="pointer-events-disabled",gg=class o extends N{el;layoutProvider;orientation;size;hoverDelay=q4;hoverDelayer=this._register(new Ar(this.hoverDelay));_state=3;onDidEnablementChange=this._register(new x);_onDidStart=this._register(new x);_onDidChange=this._register(new x);_onDidReset=this._register(new x);_onDidEnd=this._register(new x);orthogonalStartSashDisposables=this._register(new Y);_orthogonalStartSash;orthogonalStartDragHandleDisposables=this._register(new Y);_orthogonalStartDragHandle;orthogonalEndSashDisposables=this._register(new Y);_orthogonalEndSash;orthogonalEndDragHandleDisposables=this._register(new Y);_orthogonalEndDragHandle;get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}onDidStart=this._onDidStart.event;onDidChange=this._onDidChange.event;onDidReset=this._onDidReset.event;onDidEnd=this._onDidEnd.event;linkedSash=void 0;set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){let t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Pe(this.el,De(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(re(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new We(this._orthogonalStartDragHandle,"mouseenter")).event(()=>o.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new We(this._orthogonalStartDragHandle,"mouseleave")).event(()=>o.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){let t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Pe(this.el,De(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(re(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new We(this._orthogonalEndDragHandle,"mouseenter")).event(()=>o.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new We(this._orthogonalEndDragHandle,"mouseleave")).event(()=>o.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.el=Pe(e,De(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Fe&&this.el.classList.add("mac");let i=this._register(new We(this.el,"mousedown")).event;this._register(i(p=>this.onPointerStart(p,new hg(e)),this));let r=this._register(new We(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));let s=this._register(new We(this.el,"mouseenter")).event;this._register(s(()=>o.onMouseEnter(this)));let a=this._register(new We(this.el,"mouseleave")).event;this._register(a(()=>o.onMouseLeave(this))),this._register(tn.addTarget(this.el));let l=this._register(new We(this.el,Ct.Start)).event;this._register(l(p=>this.onPointerStart(p,new mg(this.el)),this));let d=this._register(new We(this.el,Ct.Tap)).event,u;this._register(d(p=>{if(u){clearTimeout(u),u=void 0,this.onPointerDoublePress(p);return}clearTimeout(u),u=setTimeout(()=>u=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=K4,this._register(G4.event(p=>{this.size=p,this.layout()}))),this._register($4.event(p=>this.hoverDelay=p)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",H4),this.layout()}onPointerStart(e,t){Ae.stop(e);let n=!1;if(!e.__orthogonalSashEvent){let g=this.getOrthogonalSash(e);g&&(n=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new Ip(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Ip(t))),!this.state)return;let i=this.el.ownerDocument.getElementsByTagName("iframe");for(let g of i)g.classList.add(FP);let r=e.pageX,s=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:s,currentY:s,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);let d=lr(this.el),u=()=>{let g="";n?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=Fe?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=Fe?"col-resize":"ew-resize",d.textContent=`* { cursor: ${g} !important; }`},p=new Y;u(),n||this.onDidEnablementChange.event(u,null,p);let h=g=>{Ae.stop(g,!1);let f={startX:r,currentX:g.pageX,startY:s,currentY:g.pageY,altKey:a};this._onDidChange.fire(f)},m=g=>{Ae.stop(g,!1),d.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),p.dispose();for(let f of i)f.classList.remove(FP)};t.onPointerMove(h,null,p),t.onPointerUp(m,null,p),p.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&o.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&o.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){o.onMouseLeave(this)}layout(){if(this.orientation===0){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){let t=e.initialTarget??e.target;if(!(!t||!Dn(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}};var Uy=class extends N{_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_referenceDomElement;_width;_height;_resizeObserver;constructor(e,t){super(),this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null,t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()},n=!1,i=!1,r=()=>{if(n&&!i)try{n=!1,i=!0,t()}finally{Yi(Re(this._referenceDomElement),()=>{i=!1,r()})}};this._resizeObserver=new ResizeObserver(s=>{s&&s[0]&&s[0].contentRect?e={width:s[0].contentRect.width,height:s[0].contentRect.height}:e=null,n=!0,r()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}};var rk=class extends N{_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_listener;_mediaQueryList;constructor(e){super(),this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}},sk=class extends N{_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_value;get value(){return this._value}constructor(e){super(),this._value=this._getPixelRatio(e);let t=this._register(new rk(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){let t=document.createElement("canvas").getContext("2d"),n=e.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},ak=class{mapWindowIdToPixelRatioMonitor=new Map;_getOrCreatePixelRatioMonitor(e){let t=hl(e),n=this.mapWindowIdToPixelRatioMonitor.get(t);return n||(n=al(new sk(e)),this.mapWindowIdToPixelRatioMonitor.set(t,n),al(G.once(q0)(({vscodeWindowId:i})=>{i===t&&(n?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))}))),n}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}},Sp=new ak;var fg=class{constructor(e){this.domNode=e}_maxWidth="";_width="";_height="";_top="";_left="";_bottom="";_right="";_paddingTop="";_paddingLeft="";_paddingBottom="";_paddingRight="";_fontFamily="";_fontWeight="";_fontSize="";_fontStyle="";_fontFeatureSettings="";_fontVariationSettings="";_textDecoration="";_lineHeight="";_letterSpacing="";_className="";_display="";_position="";_visibility="";_color="";_backgroundColor="";_layerHint=!1;_contain="none";_boxShadow="";setMaxWidth(e){let t=Oo(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=Oo(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=Oo(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=Oo(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=Oo(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=Oo(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=Oo(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=Oo(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=Oo(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=Oo(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=Oo(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=Oo(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=Oo(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=Oo(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function Oo(o){return typeof o=="number"?`${o}px`:o}function ic(o){return new fg(o)}function zy(o,e){o instanceof fg?(o.setFontFamily(e.getMassagedFontFamily()),o.setFontWeight(e.fontWeight),o.setFontSize(e.fontSize),o.setFontFeatureSettings(e.fontFeatureSettings),o.setFontVariationSettings(e.fontVariationSettings),o.setLineHeight(e.lineHeight),o.setLetterSpacing(e.letterSpacing)):(o.style.fontFamily=e.getMassagedFontFamily(),o.style.fontWeight=e.fontWeight,o.style.fontSize=e.fontSize+"px",o.style.fontFeatureSettings=e.fontFeatureSettings,o.style.fontVariationSettings=e.fontVariationSettings,o.style.lineHeight=e.lineHeight+"px",o.style.letterSpacing=e.letterSpacing+"px")}var Hy=class{chr;type;width;constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}},lk=class o{_bareFontInfo;_requests;_container;_testElements;constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";let t=document.createElement("div");zy(t,this._bareFontInfo),e.appendChild(t);let n=document.createElement("div");zy(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);let i=document.createElement("div");zy(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);let r=[];for(let s of this._requests){let a;s.type===0&&(a=t),s.type===2&&(a=n),s.type===1&&(a=i),a.appendChild(document.createElement("br"));let l=document.createElement("span");o._render(l,s),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let n="\xA0";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){let n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}};function BP(o,e,t){new lk(e,t).read(o)}var dk=class extends N{_cache=new Map;_evictUntrustedReadingsTimeout=-1;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){let t=hl(e),n=this._cache.get(t);return n||(n=new ck,this._cache.set(t,n)),n}_writeToCache(e,t,n){this._ensureCache(e).put(t,n),!n.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){let t=this._ensureCache(e),n=t.getValues(),i=!1;for(let r of n)r.isTrusted||(i=!0,t.remove(r));i&&this._onDidChange.fire()}serializeFontInfo(e){return this._ensureCache(e).getValues().filter(n=>n.isTrusted)}restoreFontInfo(e,t){for(let n of t){if(n.version!==XE)continue;let i=new fu(n,!1);this._writeToCache(e,i,i)}}readFontInfo(e,t){let n=this._ensureCache(e);if(!n.has(t)){let i=this._actualReadFontInfo(e,t);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new fu({pixelRatio:Sp.getInstance(e).value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(e,t,i)}return n.get(t)}_createRequest(e,t,n,i){let r=new Hy(e,t);return n.push(r),i?.push(r),r}_actualReadFontInfo(e,t){let n=[],i=[],r=this._createRequest("n",0,n,i),s=this._createRequest("\uFF4D",0,n,null),a=this._createRequest(" ",0,n,i),l=this._createRequest("0",0,n,i),d=this._createRequest("1",0,n,i),u=this._createRequest("2",0,n,i),p=this._createRequest("3",0,n,i),h=this._createRequest("4",0,n,i),m=this._createRequest("5",0,n,i),g=this._createRequest("6",0,n,i),f=this._createRequest("7",0,n,i),y=this._createRequest("8",0,n,i),C=this._createRequest("9",0,n,i),w=this._createRequest("\u2192",0,n,i),R=this._createRequest("\uFFEB",0,n,null),_=this._createRequest("\xB7",0,n,i),B=this._createRequest("\u2E31",0,n,null),K="|/-_ilm%";for(let we=0,ht=K.length;we<ht;we++)this._createRequest(K.charAt(we),0,n,i),this._createRequest(K.charAt(we),1,n,i),this._createRequest(K.charAt(we),2,n,i);BP(e,t,n);let F=Math.max(l.width,d.width,u.width,p.width,h.width,m.width,g.width,f.width,y.width,C.width),V=t.fontFeatureSettings===bm.OFF,oe=i[0].width;for(let we=1,ht=i.length;V&&we<ht;we++){let tt=oe-i[we].width;if(tt<-.001||tt>.001){V=!1;break}}let ge=!0;return V&&R.width!==oe&&(ge=!1),R.width>w.width&&(ge=!1),new fu({pixelRatio:Sp.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:V,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:ge,spaceWidth:a.width,middotWidth:_.width,wsmiddotWidth:B.width,maxDigitWidth:F},!0)}},ck=class{_keys;_values;constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){let t=e.getId();return!!this._values[t]}get(e){let t=e.getId();return this._values[t]}put(e,t){let n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){let t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}},uk=new dk;var bg=class o{constructor(e,t){this.key=e;this.migrate=t}static items=[];apply(e){let t=o._read(e,this.key),n=r=>o._read(e,r),i=(r,s)=>o._write(e,r,s);this.migrate(t,n,i)}static _read(e,t){if(typeof e>"u")return;let n=t.indexOf(".");if(n>=0){let i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){let i=t.indexOf(".");if(i>=0){let r=t.substring(0,i);e[r]=e[r]||{},this._write(e[r],t.substring(i+1),n);return}e[t]=n}};function Qr(o,e){bg.items.push(new bg(o,e))}function So(o,e){Qr(o,(t,n,i)=>{if(typeof t<"u"){for(let[r,s]of e)if(t===r){i(o,s);return}}})}function VP(o){bg.items.forEach(e=>e.apply(o))}So("wordWrap",[[!0,"on"],[!1,"off"]]);So("lineNumbers",[[!0,"on"],[!1,"off"]]);So("cursorBlinking",[["visible","solid"]]);So("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);So("renderLineHighlight",[[!0,"line"],[!1,"none"]]);So("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);So("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);So("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);So("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);So("autoIndent",[[!1,"advanced"],[!0,"full"]]);So("matchBrackets",[[!0,"always"],[!1,"never"]]);So("renderFinalNewline",[[!0,"on"],[!1,"off"]]);So("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);So("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);So("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);Qr("autoClosingBrackets",(o,e,t)=>{o===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Qr("renderIndentGuides",(o,e,t)=>{typeof o<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!o))});Qr("highlightActiveIndentGuide",(o,e,t)=>{typeof o<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!o))});var j4={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Qr("suggest.filteredTypes",(o,e,t)=>{if(o&&typeof o=="object"){for(let n of Object.entries(j4))o[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});Qr("quickSuggestions",(o,e,t)=>{if(typeof o=="boolean"){let n=o?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});Qr("experimental.stickyScroll.enabled",(o,e,t)=>{typeof o=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",o))});Qr("experimental.stickyScroll.maxLineCount",(o,e,t)=>{typeof o=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",o))});Qr("codeActionsOnSave",(o,e,t)=>{if(o&&typeof o=="object"){let n=!1,i={};for(let r of Object.entries(o))typeof r[1]=="boolean"?(n=!0,i[r[0]]=r[1]?"explicit":"never"):i[r[0]]=r[1];n&&t("codeActionsOnSave",i)}});Qr("codeActionWidget.includeNearbyQuickfixes",(o,e,t)=>{typeof o=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",o))});Qr("lightbulb.enabled",(o,e,t)=>{typeof o=="boolean"&&t("lightbulb.enabled",o?void 0:"off")});var pk=class{_tabFocus=!1;_onDidChangeTabFocus=new x;onDidChangeTabFocus=this._onDidChangeTabFocus.event;getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}},oc=new pk;var Ky=class extends N{constructor(t,n,i,r,s){super();this._accessibilityService=s;this.isSimpleWidget=t,this.contextMenuId=n,this._containerObserver=this._register(new Uy(r,i.dimension)),this._targetWindowId=Re(r).vscodeWindowId,this._rawOptions=WP(i),this._validatedOptions=rc.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Ob.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(oc.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(uk.onDidChange(()=>this._recomputeOptions())),this._register(Sp.getInstance(Re(r)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidChangeFast=this._register(new x);onDidChangeFast=this._onDidChangeFast.event;isSimpleWidget;contextMenuId;_containerObserver;_isDominatedByLongLines=!1;_viewLineCount=1;_lineNumbersDigitCount=1;_reservedHeight=0;_glyphMarginDecorationLaneCount=1;_targetWindowId;_computeOptionsMemory=new fm;_rawOptions;_validatedOptions;options;_recomputeOptions(){let t=this._computeOptions(),n=rc.checkEquals(this.options,t);n!==null&&(this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n))}_computeOptions(){let t=this._readEnvConfiguration(),n=nm.createFromValidatedSettings(this._validatedOptions,t.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(n),r={memory:this._computeOptionsMemory,outerWidth:t.outerWidth,outerHeight:t.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:t.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:t.emptySelectionClipboard,pixelRatio:t.pixelRatio,tabFocusMode:oc.getTabFocusMode(),accessibilitySupport:t.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return rc.computeOptions(this._validatedOptions,r)}_readEnvConfiguration(){return{extraEditorClassName:Q4(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:da||To,pixelRatio:Sp.getInstance(ma(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(t){return uk.readFontInfo(ma(this._targetWindowId,!0).window,t)}getRawOptions(){return this._rawOptions}updateOptions(t){let n=WP(t);rc.applyUpdate(this._rawOptions,n)&&(this._validatedOptions=rc.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(t){this._containerObserver.observe(t)}setIsDominatedByLongLines(t){this._isDominatedByLongLines!==t&&(this._isDominatedByLongLines=t,this._recomputeOptions())}setModelLineCount(t){let n=Y4(t);this._lineNumbersDigitCount!==n&&(this._lineNumbersDigitCount=n,this._recomputeOptions())}setViewLineCount(t){this._viewLineCount!==t&&(this._viewLineCount=t,this._recomputeOptions())}setReservedHeight(t){this._reservedHeight!==t&&(this._reservedHeight=t,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(t){this._glyphMarginDecorationLaneCount!==t&&(this._glyphMarginDecorationLaneCount=t,this._recomputeOptions())}};Ky=k([I(4,Cs)],Ky);function Y4(o){let e=0;for(;o;)o=Math.floor(o/10),e++;return e||1}function Q4(){let o="";return!fs&&!Q_&&(o+="no-user-select "),fs&&(o+="no-minimap-shadow ",o+="enable-user-select "),Fe&&(o+="mac "),o}var hk=class{_values=[];_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},mk=class{_values=[];_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}},rc=class o{static validateOptions(e){let t=new hk;for(let n of Cu){let i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){let n=new mk;for(let i of Cu)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Wn(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!o._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){let n=[],i=!1;for(let r of Cu){let s=!o._deepEquals(e._read(r.id),t._read(r.id));n[r.id]=s,s&&(i=!0)}return i?new Yb(n):null}static applyUpdate(e,t){let n=!1;for(let i of Cu)if(t.hasOwnProperty(i.name)){let r=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=r.newValue,n=n||r.didChange}return n}};function WP(o){let e=gu(o);return VP(e),e}var nt=class o{_cursorStateBrand=void 0;static fromModelState(e){return new gk(e)}static fromViewState(e){return new fk(e)}static fromModelSelection(e){let t=Je.liftSelection(e),n=new to(P.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return o.fromModelState(n)}static fromModelSelections(e){let t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}modelState;viewState;constructor(e,t){this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}},gk=class{modelState;viewState;constructor(e){this.modelState=e,this.viewState=null}},fk=class{modelState;viewState;constructor(e){this.modelState=null,this.viewState=e}};var to=class o{constructor(e,t,n,i,r){this.selectionStart=e;this.selectionStartKind=t;this.selectionStartLeftoverVisibleColumns=n;this.position=i;this.leftoverVisibleColumns=r;this.selection=o._computeSelection(this.selectionStart,this.position)}_singleCursorStateBrand=void 0;selection;equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new o(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new te(t,n),i):new o(new P(t,n,t,n),0,i,new te(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Je.fromPositions(e.getStartPosition(),t):Je.fromPositions(e.getEndPosition(),t)}},si=class{_editOperationResultBrand=void 0;type;commands;shouldPushStackElementBefore;shouldPushStackElementAfter;constructor(e,t,n){this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}};function Xr(o){return o==="'"||o==='"'||o==="`"}function UP(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===Cw.ICodeEditor:!1}function tU(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===Cw.IDiffEditor:!1}function nU(o){return!!o&&typeof o=="object"&&typeof o.onDidChangeActiveEditor=="function"}function Ks(o){return UP(o)?o:tU(o)?o.getModifiedEditor():nU(o)&&UP(o.activeCodeEditor)?o.activeCodeEditor:null}var xp=H("codeEditorService");var sc=class{id;precondition;_kbOpts;_menuOpts;metadata;constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let t of e){let n=t.kbExpr;this.precondition&&(n?n=$.and(n,this.precondition):n=this.precondition);let i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};ri.registerKeybindingRule(i)}}go.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Ft.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}},vg=class extends sc{_implementations=[];addImplementation(e,t,n,i){return this._implementations.push({priority:e,name:t,implementation:n,when:i}),this._implementations.sort((r,s)=>s.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===n){this._implementations.splice(r,1);return}}}}runCommand(e,t){let n=e.get(wi),i=e.get(st);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let r of this._implementations){if(r.when){let a=i.getContext(Go());if(!r.when.evaluate(a))continue}let s=r.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof s=="boolean"?void 0:s}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}},Gy=class extends sc{constructor(t,n){super(n);this.command=t}runCommand(t,n){return this.command.runCommand(t,n)}},Ep=class o extends sc{static bindToContribution(e){return class extends o{_callback;constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,i,r){let s=e(i);s&&this._callback(s,r)}}}static runEditorCommand(e,t,n,i){let r=e.get(xp),s=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(s)return s.invokeWithinContext(a=>{if(a.get(st).contextMatchesRules(n??void 0))return i(a,s,t)})}runCommand(e,t){return o.runEditorCommand(e,t,this.precondition,(n,i,r)=>this.runEditorCommand(n,i,r))}},mn=class o extends Ep{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=be.EditorContext),i.title||(i.title=e.label),i.when=$.and(e.precondition,i.when),i}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}label;alias;constructor(e){super(o.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get($t).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};function Ve(o){return Zr.INSTANCE.registerEditorCommand(o),o}function Ot(o){let e=new o;return Zr.INSTANCE.registerEditorAction(e),e}function zP(o,e,t){Zr.INSTANCE.registerEditorContribution(o,e,t)}var iU;(r=>{function o(s){return Zr.INSTANCE.getEditorCommand(s)}r.getEditorCommand=o;function e(){return Zr.INSTANCE.getEditorActions()}r.getEditorActions=e;function t(){return Zr.INSTANCE.getEditorContributions()}r.getEditorContributions=t;function n(s){return Zr.INSTANCE.getEditorContributions().filter(a=>s.indexOf(a.id)>=0)}r.getSomeEditorContributions=n;function i(){return Zr.INSTANCE.getDiffEditorContributions()}r.getDiffEditorContributions=i})(iU||={});var oU={EditorCommonContributions:"editor.contributions"},Zr=class o{static INSTANCE=new o;editorContributions=[];diffEditorContributions=[];editorActions=[];editorCommands=Object.create(null);constructor(){}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}registerDiffEditorContribution(e,t){this.diffEditorContributions.push({id:e,ctor:t})}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};Be.add(oU.EditorCommonContributions,Zr.INSTANCE);function yg(o){return o.register(),o}var bk=yg(new vg({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:be.MenubarEditMenu,group:"1_do",title:c({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:be.CommandPalette,group:"",title:c("undo","Undo"),order:1}]}));yg(new Gy(bk,{id:"default:undo",precondition:void 0}));var vk=yg(new vg({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:be.MenubarEditMenu,group:"1_do",title:c({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:be.CommandPalette,group:"",title:c("redo","Redo"),order:1}]}));yg(new Gy(vk,{id:"default:redo",precondition:void 0}));var HP=yg(new vg({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:be.MenubarSelectionMenu,group:"1_basic",title:c({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:be.CommandPalette,group:"",title:c("selectAll","Select All"),order:1}]}));var Kl=class o{static columnSelect(e,t,n,i,r,s){let a=Math.abs(r-n)+1,l=n>r,d=i>s,u=i<s,p=[];for(let h=0;h<a;h++){let m=n+(l?-h:h),g=e.columnFromVisibleColumn(t,m,i),f=e.columnFromVisibleColumn(t,m,s),y=e.visibleColumnFromColumn(t,new te(m,g)),C=e.visibleColumnFromColumn(t,new te(m,f));u&&(y>s||C<i)||d&&(C>i||y<s)||p.push(new to(new P(m,g,m,g),0,0,new te(m,f),0))}if(p.length===0)for(let h=0;h<a;h++){let m=n+(l?-h:h),g=t.getLineMaxColumn(m);p.push(new to(new P(m,g,m,g),0,0,new te(m,g),0))}return{viewStates:p,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:r,toVisualColumn:s}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,o.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0,r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),s=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=r;l<=s;l++){let d=t.getLineMaxColumn(l),u=e.visibleColumnFromColumn(t,new te(l,d));i=Math.max(i,u)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){let r=i?e.pageSize:1,s=Math.max(1,n.toViewLineNumber-r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){let r=i?e.pageSize:1,s=Math.min(t.getLineCount(),n.toViewLineNumber+r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}};var Nn=class{_range;_text;insertsAutoWhitespace;constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return Je.fromPositions(i.getEndPosition())}},qy=class{_range;_text;constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return Je.fromRange(i,0)}},ac=class{_range;_text;insertsAutoWhitespace;constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return Je.fromPositions(i.getStartPosition())}},lc=class{_range;_text;_columnDeltaOffset;_lineNumberDeltaOffset;insertsAutoWhitespace;constructor(e,t,n,i,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return Je.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}},Cp=class{_range;_text;_initialSelection;_forceMoveMarkers;_selectionId;constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};var Ig=class o{static whitespaceVisibleColumn(e,t,n){let i=e.length,r=0,s=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[s,a,r];switch(r%n===0&&(s=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=un.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===i?[s,a,r]:[-1,-1,-1]}static atomicPosition(e,t,n,i){let r=e.length,[s,a,l]=o.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let d;switch(i){case 0:d=!0;break;case 1:d=!1;break;case 2:if(l%n===0)return t;d=l%n<=n/2;break}if(d){if(s===-1)return-1;let h=a;for(let m=s;m<r;++m){if(h===a+n)return s;switch(e.charCodeAt(m)){case 32:h+=1;break;case 9:h=un.nextRenderTabStop(h,n);break;default:return-1}}return h===a+n?s:-1}let u=un.nextRenderTabStop(l,n),p=l;for(let h=t;h<r;h++){if(p===u)return h;switch(e.charCodeAt(h)){case 32:p+=1;break;case 9:p=un.nextRenderTabStop(p,n);break;default:return-1}}return p===u?r:-1}};var Sg=class{_cursorPositionBrand=void 0;lineNumber;column;leftoverVisibleColumns;constructor(e,t,n){this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}},on=class o{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-tE(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){let n=t.lineNumber-1;return new te(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){let i=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),s=Ig.atomicPosition(r,t.column-1,n,0);if(s!==-1&&s+1>=i)return new te(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){let i=e.stickyTabStops?o.leftPositionAtomicSoftTabs(t,n,e.tabSize):o.leftPosition(t,n);return new Sg(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,r){let s,a;if(n.hasSelection()&&!i)s=n.selection.startLineNumber,a=n.selection.startColumn;else{let l=n.position.delta(void 0,-(r-1)),d=t.normalizePosition(o.clipPositionColumn(l,t),0),u=o.left(e,t,d);s=u.lineNumber,a=u.column}return n.move(i,s,a,0)}static clipPositionColumn(e,t){return new te(e.lineNumber,o.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+eE(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new te(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,r){if(n<e.getLineIndentColumn(t)){let s=e.getLineContent(t),a=Ig.atomicPosition(s,n-1,i,1);if(a!==-1)return new te(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){let i=e.stickyTabStops?o.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):o.rightPosition(t,n.lineNumber,n.column);return new Sg(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,r){let s,a;if(n.hasSelection()&&!i)s=n.selection.endLineNumber,a=n.selection.endColumn;else{let l=n.position.delta(void 0,r-1),d=t.normalizePosition(o.clipPositionColumn(l,t),1),u=o.right(e,t,d);s=u.lineNumber,a=u.column}return n.move(i,s,a,0)}static vertical(e,t,n,i,r,s,a,l){let d=un.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+r,u=t.getLineCount(),p=n===1&&i===1,h=n===u&&i===t.getLineMaxColumn(n),m=s<n?p:h;if(n=s,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>u?(n=u,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,d),m?r=0:r=d-un.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),l!==void 0){let g=new te(n,i),f=t.normalizePosition(g,l);r=r+(i-f.column),n=f.lineNumber,i=f.column}return new Sg(n,i,r)}static down(e,t,n,i,r,s,a){return this.vertical(e,t,n,i,r,n+s,a,4)}static moveDown(e,t,n,i,r){let s,a;n.hasSelection()&&!i?(s=n.selection.endLineNumber,a=n.selection.endColumn):(s=n.position.lineNumber,a=n.position.column);let l=0,d;do if(d=o.down(e,t,s+l,a,n.leftoverVisibleColumns,r,!0),t.normalizePosition(new te(d.lineNumber,d.column),2).lineNumber>s)break;while(l++<10&&s+l<t.getLineCount());return n.move(i,d.lineNumber,d.column,d.leftoverVisibleColumns)}static translateDown(e,t,n){let i=n.selection,r=o.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=o.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new to(new P(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new te(s.lineNumber,s.column),s.leftoverVisibleColumns)}static up(e,t,n,i,r,s,a){return this.vertical(e,t,n,i,r,n-s,a,3)}static moveUp(e,t,n,i,r){let s,a;n.hasSelection()&&!i?(s=n.selection.startLineNumber,a=n.selection.startColumn):(s=n.position.lineNumber,a=n.position.column);let l=o.up(e,t,s,a,n.leftoverVisibleColumns,r,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let i=n.selection,r=o.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=o.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new to(new P(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new te(s.lineNumber,s.column),s.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let r=n.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,n,i){let r=t.getLineCount(),s=n.position.lineNumber;for(;s<r&&this._isBlankLine(t,s);)s++;for(;s<r&&!this._isBlankLine(t,s);)s++;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,n,i){let r=n.position.lineNumber,s=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||s,l;return n.position.column===a?l=s:l=a,n.move(i,r,l,0)}static moveToEndOfLine(e,t,n,i,r){let s=n.position.lineNumber,a=t.getLineMaxColumn(s);return n.move(i,s,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){let r=t.getLineCount(),s=t.getLineMaxColumn(r);return n.move(i,r,s,0)}};var dc=class o{static deleteRight(e,t,n,i){let r=[],s=e!==3;for(let a=0,l=i.length;a<l;a++){let d=i[a],u=d;if(u.isEmpty()){let p=d.getPosition(),h=on.right(t,n,p);u=new P(h.lineNumber,h.column,p.lineNumber,p.column)}if(u.isEmpty()){r[a]=null;continue}u.startLineNumber!==u.endLineNumber&&(s=!0),r[a]=new Nn(u,"")}return[s,r]}static isAutoClosingPairDelete(e,t,n,i,r,s,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,d=s.length;l<d;l++){let u=s[l],p=u.getPosition();if(!u.isEmpty())return!1;let h=r.getLineContent(p.lineNumber);if(p.column<2||p.column>=h.length+1)return!1;let m=h.charAt(p.column-2),g=i.get(m);if(!g)return!1;if(Xr(m)){if(n==="never")return!1}else if(t==="never")return!1;let f=h.charAt(p.column-1),y=!1;for(let C of g)C.open===m&&C.close===f&&(y=!0);if(!y)return!1;if(e==="auto"){let C=!1;for(let w=0,R=a.length;w<R;w++){let _=a[w];if(p.lineNumber===_.startLineNumber&&p.column===_.startColumn){C=!0;break}}if(!C)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let i=[];for(let r=0,s=n.length;r<s;r++){let a=n[r].getPosition(),l=new P(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[r]=new Nn(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,r))return this._runAutoClosingPairDelete(t,n,i);let s=[],a=e!==2;for(let l=0,d=i.length;l<d;l++){let u=o.getDeleteRange(i[l],n,t);if(u.isEmpty()){s[l]=null;continue}u.startLineNumber!==u.endLineNumber&&(a=!0),s[l]=new Nn(u,"")}return[a,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;let i=e.getPosition();if(n.useTabStops&&i.column>1){let r=t.getLineContent(i.lineNumber),s=qi(r),a=s===-1?r.length+1:s+1;if(i.column<=a){let l=n.visibleColumnFromColumn(t,i),d=un.prevIndentTabStop(l,n.indentSize),u=n.columnFromVisibleColumn(t,i.lineNumber,d);return new P(i.lineNumber,u,i.lineNumber,i.column)}}return P.fromPositions(o.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){let n=m0(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){let n=e.lineNumber-1;return new te(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let i=[],r=null;n.sort((s,a)=>te.compare(s.getStartPosition(),a.getEndPosition()));for(let s=0,a=n.length;s<a;s++){let l=n[s];if(l.isEmpty())if(e.emptySelectionClipboard){let d=l.getPosition(),u,p,h,m;d.lineNumber<t.getLineCount()?(u=d.lineNumber,p=1,h=d.lineNumber+1,m=1):d.lineNumber>1&&r?.endLineNumber!==d.lineNumber?(u=d.lineNumber-1,p=t.getLineMaxColumn(d.lineNumber-1),h=d.lineNumber,m=t.getLineMaxColumn(d.lineNumber)):(u=d.lineNumber,p=1,h=d.lineNumber,m=t.getLineMaxColumn(d.lineNumber));let g=new P(u,p,h,m);r=g,g.isEmpty()?i[s]=null:i[s]=new Nn(g,"")}else i[s]=null;else i[s]=new Nn(l,"")}return new si(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}};var $y=class o{static _createWord(e,t,n,i,r){return{start:i,end:r,wordType:t,nextCharClass:n}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0,r=t.findPrevIntlWordBeforeOrAtOffset(e,n.column-2);for(let s=n.column-2;s>=0;s--){let a=e.charCodeAt(s),l=t.get(a);if(r&&s===r.index)return this._createIntlWord(r,l);if(l===0){if(i===2)return this._createWord(e,i,l,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,s+1,this._findEndOfWord(e,t,i,s+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){let r=t.findNextIntlWordAtOrAfterOffset(e,i),s=e.length;for(let a=i;a<s;a++){let l=e.charCodeAt(a),d=t.get(l);if(r&&a===r.index+r.segment.length||d===1||n===1&&d===2||n===2&&d===0)return a}return s}static _findNextWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0,r=e.length,s=t.findNextIntlWordAtOrAfterOffset(e,n.column-1);for(let a=n.column-1;a<r;a++){let l=e.charCodeAt(a),d=t.get(l);if(s&&a===s.index)return this._createIntlWord(s,d);if(d===0){if(i===2)return this._createWord(e,i,d,this._findStartOfWord(e,t,i,a-1),a);i=1}else if(d===2){if(i===1)return this._createWord(e,i,d,this._findStartOfWord(e,t,i,a-1),a);i=2}else if(d===1&&i!==0)return this._createWord(e,i,d,this._findStartOfWord(e,t,i,a-1),a)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,r-1),r):null}static _findStartOfWord(e,t,n,i){let r=t.findPrevIntlWordBeforeOrAtOffset(e,i);for(let s=i;s>=0;s--){let a=e.charCodeAt(s),l=t.get(a);if(r&&s===r.index)return s;if(l===1||n===1&&l===2||n===2&&l===0)return s+1}return 0}static moveWordLeft(e,t,n,i,r){let s=n.lineNumber,a=n.column;a===1&&s>1&&(s=s-1,a=t.getLineMaxColumn(s));let l=o._findPreviousWordOnLine(e,t,new te(s,a));if(i===0)return new te(s,l?l.start+1:1);if(i===1)return!r&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=o._findPreviousWordOnLine(e,t,new te(s,l.start+1))),new te(s,l?l.start+1:1);if(i===3){for(;l&&l.wordType===2;)l=o._findPreviousWordOnLine(e,t,new te(s,l.start+1));return new te(s,l?l.start+1:1)}return l&&a<=l.end+1&&(l=o._findPreviousWordOnLine(e,t,new te(s,l.start+1))),new te(s,l?l.end+1:1)}static _moveWordPartLeft(e,t){let n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new te(n-1,e.getLineMaxColumn(n-1)):t;let r=e.getLineContent(n);for(let s=t.column-1;s>1;s--){let a=r.charCodeAt(s-2),l=r.charCodeAt(s-1);if(a===95&&l!==95)return new te(n,s);if(a===45&&l!==45)return new te(n,s);if((Dd(a)||Ah(a))&&bs(l))return new te(n,s);if(bs(a)&&bs(l)&&s+1<i){let d=r.charCodeAt(s);if(Dd(d)||Ah(d))return new te(n,s)}}return new te(n,1)}static moveWordRight(e,t,n,i){let r=n.lineNumber,s=n.column,a=!1;s===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,s=1);let l=o._findNextWordOnLine(e,t,new te(r,s));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=o._findNextWordOnLine(e,t,new te(r,l.end+1))),l?s=l.end+1:s=t.getLineMaxColumn(r);else if(i===3){for(a&&(s=0);l&&(l.wordType===2||l.start+1<=s);)l=o._findNextWordOnLine(e,t,new te(r,l.end+1));l?s=l.start+1:s=t.getLineMaxColumn(r)}else l&&!a&&s>=l.start+1&&(l=o._findNextWordOnLine(e,t,new te(r,l.end+1))),l?s=l.start+1:s=t.getLineMaxColumn(r);return new te(r,s)}static _moveWordPartRight(e,t){let n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new te(n+1,1):t;let r=e.getLineContent(n);for(let s=t.column+1;s<i;s++){let a=r.charCodeAt(s-2),l=r.charCodeAt(s-1);if(a!==95&&l===95)return new te(n,s);if(a!==45&&l===45)return new te(n,s);if((Dd(a)||Ah(a))&&bs(l))return new te(n,s);if(bs(a)&&bs(l)&&s+1<i){let d=r.charCodeAt(s);if(Dd(d)||Ah(d))return new te(n,s)}}return new te(n,i)}static _deleteWordLeftWhitespace(e,t){let n=e.getLineContent(t.lineNumber),i=t.column-2,r=zo(n,i);return r+1<i?new P(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){let n=e.wordSeparators,i=e.model,r=e.selection,s=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(dc.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){let p=e.selection.getPosition();return new P(p.lineNumber,p.column-1,p.lineNumber,p.column+1)}let a=new te(r.positionLineNumber,r.positionColumn),l=a.lineNumber,d=a.column;if(l===1&&d===1)return null;if(s){let p=this._deleteWordLeftWhitespace(i,a);if(p)return p}let u=o._findPreviousWordOnLine(n,i,a);return t===0?u?d=u.start+1:d>1?d=1:(l--,d=i.getLineMaxColumn(l)):(u&&d<=u.end+1&&(u=o._findPreviousWordOnLine(n,i,new te(l,u.start+1))),u?d=u.end+1:d>1?d=1:(l--,d=i.getLineMaxColumn(l))),new P(l,d,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;let i=new te(n.positionLineNumber,n.positionColumn),r=this._deleteInsideWordWhitespace(t,i);return r||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){let n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){let n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,r))return null;let s=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,s))return null;for(;r>0&&this._charAtIsWhitespace(n,r-1);)r--;for(;s+1<i&&this._charAtIsWhitespace(n,s+1);)s++;return new P(t.lineNumber,r+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){let i=t.getLineContent(n.lineNumber),r=i.length;if(r===0)return n.lineNumber>1?new P(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new P(n.lineNumber,1,n.lineNumber+1,1):new P(n.lineNumber,1,n.lineNumber,1);let s=p=>p.start+1<=n.column&&n.column<=p.end+1,a=(p,h)=>(p=Math.min(p,n.column),h=Math.max(h,n.column),new P(n.lineNumber,p,n.lineNumber,h)),l=p=>{let h=p.start+1,m=p.end+1,g=!1;for(;m-1<r&&this._charAtIsWhitespace(i,m-1);)g=!0,m++;if(!g)for(;h>1&&this._charAtIsWhitespace(i,h-2);)h--;return a(h,m)},d=o._findPreviousWordOnLine(e,t,n);if(d&&s(d))return l(d);let u=o._findNextWordOnLine(e,t,n);return u&&s(u)?l(u):d&&u?a(d.end+1,u.start+1):d?a(d.start+1,d.end+1):u?a(u.start+1,u.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;let n=t.getPosition(),i=o._moveWordPartLeft(e,n);return new P(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let i=t;i<n;i++){let r=e.charAt(i);if(r!==" "&&r!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){let n=e.getLineContent(t.lineNumber),i=t.column-1,r=this._findFirstNonWhitespaceChar(n,i);return i+1<r?new P(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){let n=e.wordSeparators,i=e.model,r=e.selection,s=e.whitespaceHeuristics;if(!r.isEmpty())return r;let a=new te(r.positionLineNumber,r.positionColumn),l=a.lineNumber,d=a.column,u=i.getLineCount(),p=i.getLineMaxColumn(l);if(l===u&&d===p)return null;if(s){let m=this._deleteWordRightWhitespace(i,a);if(m)return m}let h=o._findNextWordOnLine(n,i,a);return t===2?h?d=h.end+1:d<p||l===u?d=p:(l++,h=o._findNextWordOnLine(n,i,new te(l,1)),h?d=h.start+1:d=i.getLineMaxColumn(l)):(h&&d>=h.start+1&&(h=o._findNextWordOnLine(n,i,new te(l,h.end+1))),h?d=h.start+1:d<p||l===u?d=p:(l++,h=o._findNextWordOnLine(n,i,new te(l,1)),h?d=h.start+1:d=i.getLineMaxColumn(l))),new P(l,d,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;let n=t.getPosition(),i=o._moveWordPartRight(e,n);return new P(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){let i=new P(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n,i){let r=zd(t,n),s=o._findPreviousWordOnLine(r,e,i);if(s&&s.wordType===1&&s.start<=i.column-1&&i.column-1<=s.end)return o._createWordAtPosition(e,i.lineNumber,s);let a=o._findNextWordOnLine(r,e,i);return a&&a.wordType===1&&a.start<=i.column-1&&i.column-1<=a.end?o._createWordAtPosition(e,i.lineNumber,a):null}static word(e,t,n,i,r){let s=zd(e.wordSeparators,e.wordSegmenterLocales),a=o._findPreviousWordOnLine(s,t,r),l=o._findNextWordOnLine(s,t,r);if(!i){let m,g;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(m=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(m=l.start+1,g=l.end+1):(a?m=a.end+1:m=1,l?g=l.start+1:g=t.getLineMaxColumn(r.lineNumber)),new to(new P(r.lineNumber,m,r.lineNumber,g),1,0,new te(r.lineNumber,g),0)}let d,u;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(d=a.start+1,u=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(d=l.start+1,u=l.end+1):(d=r.column,u=r.column);let p=r.lineNumber,h;if(n.selectionStart.containsPosition(r))h=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){h=d;let m=new te(p,h);n.selectionStart.containsPosition(m)&&(h=n.selectionStart.endColumn)}else{h=u;let m=new te(p,h);n.selectionStart.containsPosition(m)&&(h=n.selectionStart.startColumn)}return n.move(!0,p,h,0)}};var Fn=class{static addCursorDown(e,t,n){let i=[],r=0;for(let s=0,a=t.length;s<a;s++){let l=t[s];i[r++]=new nt(l.modelState,l.viewState),n?i[r++]=nt.fromModelState(on.translateDown(e.cursorConfig,e.model,l.modelState)):i[r++]=nt.fromViewState(on.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){let i=[],r=0;for(let s=0,a=t.length;s<a;s++){let l=t[s];i[r++]=new nt(l.modelState,l.viewState),n?i[r++]=nt.fromModelState(on.translateUp(e.cursorConfig,e.model,l.modelState)):i[r++]=nt.fromViewState(on.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r];i[r]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){let i=t.viewState.position.column,r=t.modelState.position.column,s=i===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!s&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return nt.fromViewState(on.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return nt.fromModelState(on.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=this._moveToLineEnd(e,l,n,i)}return r}static _moveToLineEnd(e,t,n,i){let r=t.viewState.position,s=e.getLineMaxColumn(r.lineNumber),a=r.column===s,l=t.modelState.position,d=e.model.getLineMaxColumn(l.lineNumber),u=s-r.column===d-l.column;return a||u?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return nt.fromViewState(on.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return nt.fromModelState(on.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){let n=[];for(let i=0,r=t.length;i<r;i++){let s=t[i],a=s.modelState.selection.startLineNumber,l=e.model.getLineCount(),d=s.modelState.selection.endLineNumber,u;d===l?u=e.model.getLineMaxColumn(l):(d++,u=1),n[i]=nt.fromModelState(new to(new P(a,1,a,1),0,0,new te(d,u),0))}return n}static moveToBeginningOfBuffer(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r];i[r]=nt.fromModelState(on.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r];i[r]=nt.fromModelState(on.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){let n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return nt.fromModelState(new to(new P(1,1,1,1),0,0,new te(n,i),0))}static line(e,t,n,i,r){let s=e.model.validatePosition(i),a=r?e.coordinatesConverter.validateViewPosition(new te(r.lineNumber,r.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n){let d=e.model.getLineCount(),u=s.lineNumber+1,p=1;return u>d&&(u=d,p=e.model.getLineMaxColumn(u)),nt.fromModelState(new to(new P(s.lineNumber,1,u,p),2,0,new te(u,p),0))}let l=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<l)return nt.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(s.lineNumber>l){let d=e.getLineCount(),u=a.lineNumber+1,p=1;return u>d&&(u=d,p=e.getLineMaxColumn(u)),nt.fromViewState(t.viewState.move(!0,u,p,0))}else{let d=t.modelState.selectionStart.getEndPosition();return nt.fromModelState(t.modelState.move(!0,d.lineNumber,d.column,0))}}static word(e,t,n,i){let r=e.model.validatePosition(i);return nt.fromModelState($y.word(e.cursorConfig,e.model,t.modelState,n,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new nt(t.modelState,t.viewState);let n=t.viewState.position.lineNumber,i=t.viewState.position.column;return nt.fromViewState(new to(new P(n,i,n,i),0,0,new te(n,i),0))}static moveTo(e,t,n,i,r){if(n){if(t.modelState.selectionStartKind===1)return this.word(e,t,n,i);if(t.modelState.selectionStartKind===2)return this.line(e,t,n,i,r)}let s=e.model.validatePosition(i),a=r?e.coordinatesConverter.validateViewPosition(new te(r.lineNumber,r.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return nt.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,r,s){switch(n){case Me.Direction.Left:return s===Me.Unit.HalfLine?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,r);case Me.Direction.Right:return s===Me.Unit.HalfLine?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,r);case Me.Direction.Up:return s===Me.Unit.WrappedLine?this._moveUpByViewLines(e,t,i,r):this._moveUpByModelLines(e,t,i,r);case Me.Direction.Down:return s===Me.Unit.WrappedLine?this._moveDownByViewLines(e,t,i,r):this._moveDownByModelLines(e,t,i,r);case Me.Direction.PrevBlankLine:return s===Me.Unit.WrappedLine?t.map(a=>nt.fromViewState(on.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>nt.fromModelState(on.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case Me.Direction.NextBlankLine:return s===Me.Unit.WrappedLine?t.map(a=>nt.fromViewState(on.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>nt.fromModelState(on.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case Me.Direction.WrappedLineStart:return this._moveToViewMinColumn(e,t,i);case Me.Direction.WrappedLineFirstNonWhitespaceCharacter:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case Me.Direction.WrappedLineColumnCenter:return this._moveToViewCenterColumn(e,t,i);case Me.Direction.WrappedLineEnd:return this._moveToViewMaxColumn(e,t,i);case Me.Direction.WrappedLineLastNonWhitespaceCharacter:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,r){let s=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(n){case Me.Direction.ViewPortTop:{let l=this._firstLineNumberInRange(e.model,a,r),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case Me.Direction.ViewPortBottom:{let l=this._lastLineNumberInRange(e.model,a,r),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case Me.Direction.ViewPortCenter:{let l=Math.round((a.startLineNumber+a.endLineNumber)/2),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case Me.Direction.ViewPortIfOutside:{let l=[];for(let d=0,u=t.length;d<u;d++){let p=t[d];l[d]=this.findPositionInViewportIfOutside(e,p,s,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){let r=t.viewState.position.lineNumber;if(n.startLineNumber<=r&&r<=n.endLineNumber-1)return new nt(t.modelState,t.viewState);{let s;r>n.endLineNumber-1?s=n.endLineNumber-1:r<n.startLineNumber?s=n.startLineNumber:s=r;let a=on.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,s,!1);return nt.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(r=>nt.fromViewState(on.moveLeft(e.cursorConfig,e,r.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,d=Math.round(e.getLineLength(l)/2);i[r]=nt.fromViewState(on.moveLeft(e.cursorConfig,e,a.viewState,n,d))}return i}static _moveRight(e,t,n,i){return t.map(r=>nt.fromViewState(on.moveRight(e.cursorConfig,e,r.viewState,n,i)))}static _moveHalfLineRight(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,d=Math.round(e.getLineLength(l)/2);i[r]=nt.fromViewState(on.moveRight(e.cursorConfig,e,a.viewState,n,d))}return i}static _moveDownByViewLines(e,t,n,i){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=nt.fromViewState(on.moveDown(e.cursorConfig,e,l.viewState,n,i))}return r}static _moveDownByModelLines(e,t,n,i){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=nt.fromModelState(on.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return r}static _moveUpByViewLines(e,t,n,i){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=nt.fromViewState(on.moveUp(e.cursorConfig,e,l.viewState,n,i))}return r}static _moveUpByModelLines(e,t,n,i){let r=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];r[s]=nt.fromModelState(on.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return r}static _moveToViewPosition(e,t,n,i,r){return nt.fromViewState(t.viewState.move(n,i,r,0))}static _moveToModelPosition(e,t,n,i,r){return nt.fromModelState(t.modelState.move(n,i,r,0))}static _moveToViewMinColumn(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,d=e.getLineMinColumn(l);i[r]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,d=e.getLineFirstNonWhitespaceColumn(l);i[r]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewCenterColumn(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,d=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[r]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewMaxColumn(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,d=e.getLineMaxColumn(l);i[r]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=a.viewState.position.lineNumber,d=e.getLineLastNonWhitespaceColumn(l);i[r]=this._moveToViewPosition(e,a,n,l,d)}return i}},Me;(a=>{let o=function(l){if(!kn(l))return!1;let d=l;return!(!gn(d.to)||!Un(d.select)&&!nb(d.select)||!Un(d.by)&&!gn(d.by)||!Un(d.value)&&!Li(d.value))};a.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:o,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},a.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},a.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function i(l){if(!l.to)return null;let d;switch(l.to){case a.RawDirection.Left:d=0;break;case a.RawDirection.Right:d=1;break;case a.RawDirection.Up:d=2;break;case a.RawDirection.Down:d=3;break;case a.RawDirection.PrevBlankLine:d=4;break;case a.RawDirection.NextBlankLine:d=5;break;case a.RawDirection.WrappedLineStart:d=6;break;case a.RawDirection.WrappedLineFirstNonWhitespaceCharacter:d=7;break;case a.RawDirection.WrappedLineColumnCenter:d=8;break;case a.RawDirection.WrappedLineEnd:d=9;break;case a.RawDirection.WrappedLineLastNonWhitespaceCharacter:d=10;break;case a.RawDirection.ViewPortTop:d=11;break;case a.RawDirection.ViewPortBottom:d=13;break;case a.RawDirection.ViewPortCenter:d=12;break;case a.RawDirection.ViewPortIfOutside:d=14;break;default:return null}let u=0;switch(l.by){case a.RawUnit.Line:u=1;break;case a.RawUnit.WrappedLine:u=2;break;case a.RawUnit.Character:u=3;break;case a.RawUnit.HalfLine:u=4;break}return{direction:d,unit:u,select:!!l.select,value:l.value||1}}a.parse=i;let r;(F=>(F[F.Left=0]="Left",F[F.Right=1]="Right",F[F.Up=2]="Up",F[F.Down=3]="Down",F[F.PrevBlankLine=4]="PrevBlankLine",F[F.NextBlankLine=5]="NextBlankLine",F[F.WrappedLineStart=6]="WrappedLineStart",F[F.WrappedLineFirstNonWhitespaceCharacter=7]="WrappedLineFirstNonWhitespaceCharacter",F[F.WrappedLineColumnCenter=8]="WrappedLineColumnCenter",F[F.WrappedLineEnd=9]="WrappedLineEnd",F[F.WrappedLineLastNonWhitespaceCharacter=10]="WrappedLineLastNonWhitespaceCharacter",F[F.ViewPortTop=11]="ViewPortTop",F[F.ViewPortCenter=12]="ViewPortCenter",F[F.ViewPortBottom=13]="ViewPortBottom",F[F.ViewPortIfOutside=14]="ViewPortIfOutside"))(r=a.Direction||={});let s;(m=>(m[m.None=0]="None",m[m.Line=1]="Line",m[m.WrappedLine=2]="WrappedLine",m[m.Character=3]="Character",m[m.HalfLine=4]="HalfLine"))(s=a.Unit||={})})(Me||={});function rU(o,e,t){let n=o.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let i,r=-1;for(i=e-1;i>=1;i--){if(o.tokenization.getLanguageIdAtPosition(i,0)!==n)return r;let s=o.getLineContent(i);if(t.shouldIgnore(i)||/^\s+$/.test(s)||s===""){r=i;continue}return i}}return-1}function wp(o,e,t,n=!0,i){if(o<4)return null;let r=i.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;let s=new uc(e,r,i);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};let a=rU(e,t,s);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(s.shouldIncrease(a)||s.shouldIndentNextLine(a)){let l=e.getLineContent(a);return{indentation:Tt(l),action:1,line:a}}else if(s.shouldDecrease(a)){let l=e.getLineContent(a);return{indentation:Tt(l),action:null,line:a}}else{if(a===1)return{indentation:Tt(e.getLineContent(a)),action:null,line:a};let l=a-1,d=r.getIndentMetadata(e.getLineContent(l));if(!(d&3)&&d&4){let u=0;for(let p=l-1;p>0;p--)if(!s.shouldIndentNextLine(p)){u=p;break}return{indentation:Tt(e.getLineContent(u+1)),action:null,line:u+1}}if(n)return{indentation:Tt(e.getLineContent(a)),action:null,line:a};for(let u=a;u>0;u--){if(s.shouldIncrease(u))return{indentation:Tt(e.getLineContent(u)),action:1,line:u};if(s.shouldIndentNextLine(u)){let p=0;for(let h=u-1;h>0;h--)if(!s.shouldIndentNextLine(u)){p=h;break}return{indentation:Tt(e.getLineContent(p+1)),action:null,line:p+1}}else if(s.shouldDecrease(u))return{indentation:Tt(e.getLineContent(u)),action:null,line:u}}return{indentation:Tt(e.getLineContent(1)),action:null,line:1}}}function cc(o,e,t,n,i,r){if(o<4)return null;let s=r.getLanguageConfiguration(t);if(!s)return null;let a=r.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;let l=new uc(e,a,r),d=wp(o,e,n,void 0,r);if(d){let u=d.line;if(u!==void 0){let p=!0;for(let h=u;h<n-1;h++)if(!/^\s*$/.test(e.getLineContent(h))){p=!1;break}if(p){let h=s.onEnter(o,"",e.getLineContent(u),"");if(h){let m=Tt(e.getLineContent(u));return h.removeText&&(m=m.substring(0,m.length-h.removeText)),h.indentAction===1||h.indentAction===2?m=i.shiftIndent(m):h.indentAction===3&&(m=i.unshiftIndent(m)),l.shouldDecrease(n)&&(m=i.unshiftIndent(m)),h.appendText&&(m+=h.appendText),Tt(m)}}}return l.shouldDecrease(n)?d.action===1?d.indentation:i.unshiftIndent(d.indentation):d.action===1?i.shiftIndent(d.indentation):d.indentation}return null}function qP(o,e,t,n,i){if(o<4)return null;let r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),s=i.getLanguageConfiguration(r).indentRulesSupport;if(!s)return null;e.tokenization.forceTokenization(t.startLineNumber);let l=new pc(e,i).getProcessedTokenContextAroundRange(t),d=l.afterRangeProcessedTokens,u=l.beforeRangeProcessedTokens,p=Tt(u.getLineContent()),h=sU(e,t.startLineNumber,u),m=Yy(e,t.getStartPosition()),g=e.getLineContent(t.startLineNumber),f=Tt(g),y=wp(o,h,t.startLineNumber+1,void 0,i);if(!y){let w=m?f:p;return{beforeEnter:w,afterEnter:w}}let C=m?f:y.indentation;return y.action===1&&(C=n.shiftIndent(C)),s.shouldDecrease(d.getLineContent())&&(C=n.unshiftIndent(C)),{beforeEnter:m?f:p,afterEnter:C}}function $P(o,e,t,n,i,r){let s=o.autoIndent;if(s<4||Yy(e,t.getStartPosition()))return null;let l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),d=r.getLanguageConfiguration(l).indentRulesSupport;if(!d)return null;let p=new pc(e,r).getProcessedTokenContextAroundRange(t),h=p.beforeRangeProcessedTokens.getLineContent(),m=p.afterRangeProcessedTokens.getLineContent(),g=h+m,f=h+n+m;if(!d.shouldDecrease(g)&&d.shouldDecrease(f)){let C=wp(s,e,t.startLineNumber,!1,r);if(!C)return null;let w=C.indentation;return C.action!==1&&(w=i.unshiftIndent(w)),w}let y=t.startLineNumber-1;if(y>0){let C=e.getLineContent(y);if(d.shouldIndentNextLine(C)&&d.shouldIncrease(f)){let R=wp(s,e,t.startLineNumber,!1,r)?.indentation;if(R!==void 0){let _=e.getLineContent(t.startLineNumber),B=Tt(_),F=i.shiftIndent(R)===B,V=/^\s*$/.test(g),oe=o.autoClosingPairs.autoClosingPairsOpenByEnd.get(n),we=oe&&oe.length>0&&V;if(F&&we)return R}}}return null}function jy(o,e,t){let n=t.getLanguageConfiguration(o.getLanguageId()).indentRulesSupport;return!n||e<1||e>o.getLineCount()?null:n.getIndentMetadata(o.getLineContent(e))}function sU(o,e,t){return{tokenization:{getLineTokens:i=>i===e?t:o.tokenization.getLineTokens(i),getLanguageId:()=>o.getLanguageId(),getLanguageIdAtPosition:(i,r)=>o.getLanguageIdAtPosition(i,r)},getLineContent:i=>i===e?t.getLineContent():o.getLineContent(i)}}var uc=class{_indentRulesSupport;_indentationLineProcessor;constructor(e,t,n){this._indentRulesSupport=t,this._indentationLineProcessor=new Qy(e,n)}shouldIncrease(e,t){let n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(n)}shouldDecrease(e,t){let n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(n)}shouldIgnore(e,t){let n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(n)}shouldIndentNextLine(e,t){let n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(n)}},pc=class{model;indentationLineProcessor;constructor(e,t){this.model=e,this.indentationLineProcessor=new Qy(e,t)}getProcessedTokenContextAroundRange(e){let t=this._getProcessedTokensBeforeRange(e),n=this._getProcessedTokensAfterRange(e),i=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:n,previousLineProcessedTokens:i}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);let t=this.model.tokenization.getLineTokens(e.startLineNumber),n=ya(t,e.startColumn-1),i;if(Yy(this.model,e.getStartPosition())){let s=e.startColumn-1-n.firstCharOffset,a=n.firstCharOffset,l=a+s;i=t.sliceAndInflate(a,l,0)}else{let s=e.startColumn-1;i=t.sliceAndInflate(0,s,0)}return this.indentationLineProcessor.getProcessedTokens(i)}_getProcessedTokensAfterRange(e){let t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);let n=this.model.tokenization.getLineTokens(t.lineNumber),i=ya(n,t.column-1),r=t.column-1-i.firstCharOffset,s=i.firstCharOffset+r,a=i.firstCharOffset+i.getLineLength(),l=n.sliceAndInflate(s,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){let t=m=>{this.model.tokenization.forceTokenization(m);let g=this.model.tokenization.getLineTokens(m),f=this.model.getLineMaxColumn(m)-1;return ya(g,f)};this.model.tokenization.forceTokenization(e.startLineNumber);let n=this.model.tokenization.getLineTokens(e.startLineNumber),i=ya(n,e.startColumn-1),r=Pn.createEmpty("",i.languageIdCodec),s=e.startLineNumber-1;if(s===0||!(i.firstCharOffset===0))return r;let d=t(s);if(!(i.languageId===d.languageId))return r;let p=d.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(p)}},Qy=class{constructor(e,t){this.model=e;this.languageConfigurationService=t}getProcessedLine(e,t){let n=(s,a)=>{let l=Tt(s);return a+s.substring(l.length)};this.model.tokenization.forceTokenization?.(e);let i=this.model.tokenization.getLineTokens(e),r=this.getProcessedTokens(i).getLineContent();return t!==void 0&&(r=n(r,t)),r}getProcessedTokens(e){let t=l=>l===2||l===3||l===1,n=e.getLanguageId(0),r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew.getBracketRegExp({global:!0}),s=[];return e.forEach(l=>{let d=e.getStandardTokenType(l),u=e.getTokenText(l);t(d)&&(u=u.replace(r,""));let p=e.getMetadata(l);s.push({text:u,metadata:p})}),Pn.createFromTextAndMetadata(s,e.languageIdCodec)}};function Yy(o,e){o.tokenization.forceTokenization(e.lineNumber);let t=o.tokenization.getLineTokens(e.lineNumber),n=ya(t,e.column-1),i=n.firstCharOffset===0,r=t.getLanguageId(0)===n.languageId;return!i&&!r}function Oa(o,e,t,n){e.tokenization.forceTokenization(t.startLineNumber);let i=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=n.getLanguageConfiguration(i);if(!r)return null;let a=new pc(e,n).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),d=a.beforeRangeProcessedTokens.getLineContent(),u=a.afterRangeProcessedTokens.getLineContent(),p=r.onEnter(o,l,d,u);if(!p)return null;let h=p.indentAction,m=p.appendText,g=p.removeText||0;m?h===1&&(m="	"+m):h===1||h===2?m="	":m="";let f=_v(e,t.startLineNumber,t.startColumn);return g&&(f=f.substring(0,f.length-g)),{indentAction:h,appendText:m,removeText:g,indentation:f}}var Sk=Object.create(null);function hc(o,e){if(e<=0)return"";Sk[o]||(Sk[o]=["",o]);let t=Sk[o];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+o;return t[e]}var Sn=class{constructor(e,t,n){this._languageConfigurationService=n;this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,i,r){let s=un.visibleColumnFromColumn(e,t,n);if(r){let a=hc(" ",i),d=un.prevIndentTabStop(s,i)/i;return hc(a,d)}else{let a="	",d=un.prevRenderTabStop(s,n)/n;return hc(a,d)}}static shiftIndent(e,t,n,i,r){let s=un.visibleColumnFromColumn(e,t,n);if(r){let a=hc(" ",i),d=un.nextIndentTabStop(s,i)/i;return hc(a,d)}else{let a="	",d=un.nextRenderTabStop(s,n)/n;return hc(a,d)}}_opts;_selection;_selectionId;_useLastEditRangeForCursorEndPosition;_selectionStartColumnStaysPut;_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){let n=this._selection.startLineNumber,i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);let{tabSize:r,indentSize:s,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let d=0,u=0;for(let p=n;p<=i;p++,d=u){u=0;let h=e.getLineContent(p),m=qi(h);if(this._opts.isUnshift&&(h.length===0||m===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(m===-1&&(m=h.length),p>1&&un.visibleColumnFromColumn(h,m+1,r)%s!==0&&e.tokenization.isCheapToTokenize(p-1)){let y=Oa(this._opts.autoIndent,e,new P(p-1,e.getLineMaxColumn(p-1),p-1,e.getLineMaxColumn(p-1)),this._languageConfigurationService);if(y){if(u=d,y.appendText)for(let C=0,w=y.appendText.length;C<w&&u<s&&y.appendText.charCodeAt(C)===32;C++)u++;y.removeText&&(u=Math.max(0,u-y.removeText));for(let C=0;C<u&&!(m===0||h.charCodeAt(m-1)!==32);C++)m--}}if(this._opts.isUnshift&&m===0)continue;let g;this._opts.isUnshift?g=Sn.unshiftIndent(h,m+1,r,s,a):g=Sn.shiftIndent(h,m+1,r,s,a),this._addEditOperation(t,new P(p,1,p,m+1),g),p===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=m+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);let d=a?hc(" ",s):"	";for(let u=n;u<=i;u++){let p=e.getLineContent(u),h=qi(p);if(!(this._opts.isUnshift&&(p.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&p.length===0)&&(h===-1&&(h=p.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,s);for(let m=0;m<h;m++)if(p.charCodeAt(m)===9){h=m+1;break}this._addEditOperation(t,new P(u,1,u,h+1),"")}else this._addEditOperation(t,new P(u,1,u,1),d),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let i=t.getInverseEditOperations()[0];return new Je(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}let n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new Je(n.startLineNumber,i,n.endLineNumber,n.endColumn):new Je(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}};Sn=k([I(2,fo)],Sn);var Xy=class{_range;_charBeforeSelection;_charAfterSelection;constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new P(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new P(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),i=n[0].range,r=n[1].range;return new Je(i.endLineNumber,i.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}},Zy=class{constructor(e,t,n){this._position=e;this._text=t;this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new P(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new Je(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}};var Jy=class{static getEdits(e,t,n,i,r){if(!r&&this._isAutoIndentType(e,t,n)){let s=[];for(let l of n){let d=this._findActualIndentationForSelection(e,t,l,i);if(d===null)return;s.push({selection:l,indentation:d})}let a=Tp.getAutoClosingPairClose(e,t,n,i,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,s,i,a)}}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,r=n.length;i<r;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,n,i){let r=$P(e,t,n,i,{shiftIndent:a=>xg(e,a),unshiftIndent:a=>kp(e,a)},e.languageConfigurationService);if(r===null)return null;let s=_v(t,n.startLineNumber,n.startColumn);return r===e.normalizeIndentation(s)?null:r}static _getIndentationAndAutoClosingPairEdits(e,t,n,i,r){let s=n.map(({selection:l,indentation:d})=>{if(r!==null){let u=this._getEditFromIndentationAndSelection(e,t,d,l,i,!1);return new Ek(u,l,i,r)}else{let u=this._getEditFromIndentationAndSelection(e,t,d,l,i,!0);return mc(u.range,u.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new si(4,s,a)}static _getEditFromIndentationAndSelection(e,t,n,i,r,s=!0){let a=i.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a),d=e.normalizeIndentation(n);if(l!==0){let p=t.getLineContent(a);d+=p.substring(l-1,i.startColumn-1)}return d+=s?r:"",{range:new P(a,1,i.endLineNumber,i.endColumn),text:d}}},eI=class{static getEdits(e,t,n,i,r,s){if(QP(t,n,i,r,s))return this._runAutoClosingOvertype(e,i,s)}static _runAutoClosingOvertype(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let l=t[r].getPosition(),d=new P(l.lineNumber,l.column,l.lineNumber,l.column+1);i[r]=new Nn(d,n)}return new si(4,i,{shouldPushStackElementBefore:cI(e,4),shouldPushStackElementAfter:!1})}},tI=class{static getEdits(e,t,n,i,r){if(QP(e,t,n,i,r)){let s=n.map(a=>new Nn(new P(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new si(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}},Tp=class{static getEdits(e,t,n,i,r,s){if(!s){let a=this.getAutoClosingPairClose(e,t,n,i,r);if(a!==null)return this._runAutoClosingOpenCharType(n,i,r,a)}}static _runAutoClosingOpenCharType(e,t,n,i){let r=[];for(let s=0,a=e.length;s<a;s++){let l=e[s];r[s]=new xk(l,t,!n,i)}return new si(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,n,i,r){for(let g of n)if(!g.isEmpty())return null;let s=n.map(g=>{let f=g.getPosition();return r?{lineNumber:f.lineNumber,beforeColumn:f.column-i.length,afterColumn:f.column}:{lineNumber:f.lineNumber,beforeColumn:f.column,afterColumn:f.column}}),a=this._findAutoClosingPairOpen(e,t,s.map(g=>new te(g.lineNumber,g.beforeColumn)),i);if(!a)return null;let l,d;if(Xr(i)?(l=e.autoClosingQuotes,d=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,d=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,d=e.shouldAutoCloseBefore.bracket),l==="never")return null;let p=this._findContainedAutoClosingPair(e,a),h=p?p.close:"",m=!0;for(let g of s){let{lineNumber:f,beforeColumn:y,afterColumn:C}=g,w=t.getLineContent(f),R=w.substring(0,y-1),_=w.substring(C-1);if(_.startsWith(h)||(m=!1),_.length>0){let V=_.charAt(0);if(!this._isBeforeClosingBrace(e,_)&&!d(V))return null}if(a.open.length===1&&(i==="'"||i==='"')&&l!=="always"){let V=zd(e.wordSeparators,[]);if(R.length>0){let oe=R.charCodeAt(R.length-1);if(V.get(oe)===0)return null}}if(!t.tokenization.isCheapToTokenize(f))return null;t.tokenization.forceTokenization(f);let B=t.tokenization.getLineTokens(f),K=ya(B,y-1);if(!a.shouldAutoClose(K,y-K.firstCharOffset))return null;let F=a.findNeutralCharacter();if(F){let V=t.tokenization.getTokenTypeIfInsertingCharacter(f,y,F);if(!a.isOK(V))return null}}return m?a.close.substring(0,a.close.length-h.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;let n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[],r=null;for(let s of i)s.open!==t.open&&t.open.includes(s.open)&&t.close.endsWith(s.close)&&(!r||s.open.length>r.open.length)&&(r=s);return r}static _findAutoClosingPairOpen(e,t,n,i){let r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!r)return null;let s=null;for(let a of r)if(s===null||a.open.length>s.open.length){let l=!0;for(let d of n)if(t.getValueInRange(new P(d.lineNumber,d.column-a.open.length+1,d.lineNumber,d.column))+i!==a.open){l=!1;break}l&&(s=a)}return s}static _isBeforeClosingBrace(e,t){let n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],s=i.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!s&&a}},nI=class{static getEdits(e,t,n,i,r){if(!r&&this._isSurroundSelectionType(e,t,n,i))return this._runSurroundSelectionType(e,n,i)}static _runSurroundSelectionType(e,t,n){let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=e.surroundingPairs[n];i[r]=new Xy(a,n,l)}return new si(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,n,i){if(!wk(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;let r=Xr(i);for(let s of n){if(s.isEmpty())return!1;let a=!0;for(let l=s.startLineNumber;l<=s.endLineNumber;l++){let d=t.getLineContent(l),u=l===s.startLineNumber?s.startColumn-1:0,p=l===s.endLineNumber?s.endColumn-1:d.length,h=d.substring(u,p);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(r&&s.startLineNumber===s.endLineNumber&&s.startColumn+1===s.endColumn){let l=t.getValueInRange(s);if(Xr(l))return!1}}return!0}},iI=class{static getEdits(e,t,n,i,r,s){if(!s&&this._isTypeInterceptorElectricChar(t,n,i)){let a=this._typeInterceptorElectricChar(e,t,n,i[0],r);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,r){if(!t.electricChars.hasOwnProperty(r)||!i.isEmpty())return null;let s=i.getPosition();n.tokenization.forceTokenization(s.lineNumber);let a=n.tokenization.getLineTokens(s.lineNumber),l;try{l=t.onElectricCharacter(r,a,s.column)}catch(d){return bt(d),null}if(!l)return null;if(l.matchOpenBracket){let d=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,u=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:s.lineNumber,column:d},500);if(u){if(u.startLineNumber===s.lineNumber)return null;let p=n.getLineContent(u.startLineNumber),h=Tt(p),m=t.normalizeIndentation(h),g=n.getLineContent(s.lineNumber),f=n.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,y=g.substring(f-1,s.column-1),C=m+y+r,w=new P(s.lineNumber,1,s.lineNumber,s.column),R=new Nn(w,C);return new si(Ck(C,e),[R],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}},oI=class{static getEdits(e,t,n){let i=[];for(let s=0,a=t.length;s<a;s++)i[s]=new Nn(t[s],n);let r=Ck(n,e);return new si(r,i,{shouldPushStackElementBefore:cI(e,r),shouldPushStackElementAfter:!1})}},Pa=class{static getEdits(e,t,n,i,r){if(!r&&i===`
`){let s=[];for(let a=0,l=n.length;a<l;a++)s[a]=this._enter(e,t,!1,n[a]);return new si(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,n,i){if(e.autoIndent===0)return mc(i,`
`,n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(i.startLineNumber),d=Tt(l).substring(0,i.startColumn-1);return mc(i,`
`+e.normalizeIndentation(d),n)}let r=Oa(e.autoIndent,t,i,e.languageConfigurationService);if(r){if(r.indentAction===0)return mc(i,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===1)return mc(i,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===2){let l=e.normalizeIndentation(r.indentation),d=e.normalizeIndentation(r.indentation+r.appendText),u=`
`+d+`
`+l;return n?new ac(i,u,!0):new lc(i,u,-1,d.length-l.length,!0)}else if(r.indentAction===3){let l=kp(e,r.indentation);return mc(i,`
`+e.normalizeIndentation(l+r.appendText),n)}}let s=t.getLineContent(i.startLineNumber),a=Tt(s).substring(0,i.startColumn-1);if(e.autoIndent>=4){let l=qP(e.autoIndent,t,i,{unshiftIndent:d=>kp(e,d),shiftIndent:d=>xg(e,d),normalizeIndentation:d=>e.normalizeIndentation(d)},e.languageConfigurationService);if(l){let d=e.visibleColumnFromColumn(t,i.getEndPosition()),u=i.endColumn,p=t.getLineContent(i.endLineNumber),h=qi(p);if(h>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,h+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new ac(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let m=0;return u<=h+1&&(e.insertSpaces||(d=Math.ceil(d/e.indentSize)),m=Math.min(d+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new lc(i,`
`+e.normalizeIndentation(l.afterEnter),0,m,!0)}}}return mc(i,`
`+e.normalizeIndentation(a),n)}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let i=[];for(let r=0,s=n.length;r<s;r++){let a=n[r].positionLineNumber;if(a===1)i[r]=new ac(new P(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);i[r]=this._enter(e,t,!1,new P(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let i=[];for(let r=0,s=n.length;r<s;r++){let a=n[r].positionLineNumber,l=t.getLineMaxColumn(a);i[r]=this._enter(e,t,!1,new P(a,l,a,l))}return i}static lineBreakInsert(e,t,n){let i=[];for(let r=0,s=n.length;r<s;r++)i[r]=this._enter(e,t,!0,n[r]);return i}},rI=class{static getEdits(e,t,n,i,r,s){let a=this._distributePasteToCursors(e,n,i,r,s);return a?(n=n.sort(P.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,r)}static _distributePasteToCursors(e,t,n,i,r){if(i||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substring(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substring(0,n.length-1));let s=iu(n);if(s.length===t.length)return s}return null}static _distributedPaste(e,t,n,i){let r=[];for(let s=0,a=n.length;s<a;s++)r[s]=new Nn(n[s],i[s]);return new si(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,r){let s=[];for(let a=0,l=n.length;a<l;a++){let d=n[a],u=d.getPosition();if(r&&!d.isEmpty()&&(r=!1),r&&i.indexOf(`
`)!==i.length-1&&(r=!1),r){let p=new P(u.lineNumber,1,u.lineNumber,1);s[a]=new Cp(p,i,d,!0)}else s[a]=new Nn(d,i)}return new si(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}},sI=class{static getEdits(e,t,n,i,r,s,a,l){let d=i.map(u=>this._compositionType(n,u,r,s,a,l));return new si(4,d,{shouldPushStackElementBefore:cI(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,r,s){if(!t.isEmpty())return null;let a=t.getPosition(),l=Math.max(1,a.column-i),d=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),u=new P(a.lineNumber,l,a.lineNumber,d);return e.getValueInRange(u)===n&&s===0?null:new lc(u,n,0,s)}},aI=class{static getEdits(e,t,n){let i=[];for(let s=0,a=t.length;s<a;s++)i[s]=new Nn(t[s],n);let r=Ck(n,e);return new si(r,i,{shouldPushStackElementBefore:cI(e,r),shouldPushStackElementAfter:!1})}},lI=class{static getCommands(e,t,n){let i=[];for(let r=0,s=n.length;r<s;r++){let a=n[r];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let d=this._goodIndentForLine(e,t,a.startLineNumber);d=d||"	";let u=e.normalizeIndentation(d);if(!l.startsWith(u)){i[r]=new Nn(new P(a.startLineNumber,1,a.startLineNumber,l.length+1),u,!0);continue}}i[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[r]=new Sn(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static _goodIndentForLine(e,t,n){let i=null,r="",s=wp(e.autoIndent,t,n,!1,e.languageConfigurationService);if(s)i=s.action,r=s.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){let u=t.getLineContent(a);if(zo(u)>=0)break}if(a<1)return null;let l=t.getLineMaxColumn(a),d=Oa(e.autoIndent,t,new P(a,l,a,l),e.languageConfigurationService);d&&(r=d.indentation+d.appendText)}return i&&(i===1&&(r=xg(e,r)),i===3&&(r=kp(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,i){let r="",s=n.getStartPosition();if(e.insertSpaces){let a=e.visibleColumnFromColumn(t,s),l=e.indentSize,d=l-a%l;for(let u=0;u<d;u++)r+=" "}else r="	";return new Nn(n,r,i)}},dI=class extends lc{_openCharacter;_closeCharacter;closeCharacterRange;enclosingRange;constructor(e,t,n,i,r,s){super(e,t,n,i),this._openCharacter=r,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,n){return this.closeCharacterRange=new P(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new P(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,n)}},xk=class extends dI{constructor(e,t,n,i){let r=(n?t:"")+i,s=0,a=-i.length;super(e,r,s,a,t,i)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,i,t)}},Ek=class extends dI{_autoIndentationEdit;_autoClosingEdit;constructor(e,t,n,i){let r=n+i,s=0,a=n.length;super(t,r,s,a,n,i),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:r}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){let n=t.getInverseEditOperations();if(n.length!==2)throw new Error("There should be two inverse edit operations!");let i=n[0].range,r=n[1].range,s=i.plusRange(r);return this._computeCursorStateWithRange(e,s,t)}};function Ck(o,e){return o===" "?e===5||e===6?6:5:4}function cI(o,e){return YP(o)&&!YP(e)?!0:o===5?!1:jP(o)!==jP(e)}function jP(o){return o===6||o===5?"space":o}function YP(o){return o===4||o===5||o===6}function QP(o,e,t,n,i){if(o.autoClosingOvertype==="never"||!o.autoClosingPairs.autoClosingPairsCloseSingleChar.has(i))return!1;for(let r=0,s=t.length;r<s;r++){let a=t[r];if(!a.isEmpty())return!1;let l=a.getPosition(),d=e.getLineContent(l.lineNumber);if(d.charAt(l.column-1)!==i)return!1;let p=Xr(i);if((l.column>2?d.charCodeAt(l.column-2):0)===92&&p)return!1;if(o.autoClosingOvertype==="auto"){let m=!1;for(let g=0,f=n.length;g<f;g++){let y=n[g];if(l.lineNumber===y.startLineNumber&&l.column===y.startColumn){m=!0;break}}if(!m)return!1}}return!0}function mc(o,e,t){return t?new ac(o,e,!0):new Nn(o,e,!0)}function xg(o,e,t){return t=t||1,Sn.shiftIndent(e,e.length+t,o.tabSize,o.indentSize,o.insertSpaces)}function kp(o,e,t){return t=t||1,Sn.unshiftIndent(e,e.length+t,o.tabSize,o.indentSize,o.insertSpaces)}function wk(o,e){return Xr(e)?o.autoSurround==="quotes"||o.autoSurround==="languageDefined":o.autoSurround==="brackets"||o.autoSurround==="languageDefined"}var gc=class{static indent(e,t,n){if(t===null||n===null)return[];let i=[];for(let r=0,s=n.length;r<s;r++)i[r]=new Sn(n[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){let i=[];for(let r=0,s=n.length;r<s;r++)i[r]=new Sn(n[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static shiftIndent(e,t,n){return xg(e,t,n)}static unshiftIndent(e,t,n){return kp(e,t,n)}static paste(e,t,n,i,r,s){return rI.getEdits(e,t,n,i,r,s)}static tab(e,t,n){return lI.getCommands(e,t,n)}static compositionType(e,t,n,i,r,s,a,l){return sI.getEdits(e,t,n,i,r,s,a,l)}static compositionEndWithInterceptors(e,t,n,i,r,s){if(!i)return null;let a=null;for(let h of i)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;let l=a,d=!1;for(let h of i)if(h.deletedText.length!==0){d=!0;break}if(d){if(!wk(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;let h=Xr(l);for(let f of i)if(f.deletedSelectionStart!==0||f.deletedSelectionEnd!==f.deletedText.length||/^[ \t]+$/.test(f.deletedText)||h&&Xr(f.deletedText))return null;let m=[];for(let f of r){if(!f.isEmpty())return null;m.push(f.getPosition())}if(m.length!==i.length)return null;let g=[];for(let f=0,y=m.length;f<y;f++)g.push(new Zy(m[f],i[f].deletedText,t.surroundingPairs[l]));return new si(4,g,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}let u=tI.getEdits(t,n,r,s,l);if(u!==void 0)return u;let p=Tp.getEdits(t,n,r,l,!0,!1);return p!==void 0?p:null}static typeWithInterceptors(e,t,n,i,r,s,a){let l=Pa.getEdits(n,i,r,a,e);if(l!==void 0)return l;let d=Jy.getEdits(n,i,r,a,e);if(d!==void 0)return d;let u=eI.getEdits(t,n,i,r,s,a);if(u!==void 0)return u;let p=Tp.getEdits(n,i,r,a,!1,e);if(p!==void 0)return p;let h=nI.getEdits(n,i,r,a,e);if(h!==void 0)return h;let m=iI.getEdits(t,n,i,r,a,e);return m!==void 0?m:oI.getEdits(t,r,a)}static typeWithoutInterceptors(e,t,n,i,r){return aI.getEdits(e,i,r)}};var ae;(Oe=>(Oe.editorSimpleInput=new U("editorSimpleInput",!1,!0),Oe.editorTextFocus=new U("editorTextFocus",!1,c("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),Oe.focus=new U("editorFocus",!1,c("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),Oe.textInputFocus=new U("textInputFocus",!1,c("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),Oe.readOnly=new U("editorReadonly",!1,c("editorReadonly","Whether the editor is read-only")),Oe.inDiffEditor=new U("inDiffEditor",!1,c("inDiffEditor","Whether the context is a diff editor")),Oe.isEmbeddedDiffEditor=new U("isEmbeddedDiffEditor",!1,c("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),Oe.multiDiffEditorAllCollapsed=new U("multiDiffEditorAllCollapsed",void 0,c("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),Oe.hasChanges=new U("diffEditorHasChanges",!1,c("diffEditorHasChanges","Whether the diff editor has changes")),Oe.comparingMovedCode=new U("comparingMovedCode",!1,c("comparingMovedCode","Whether a moved code block is selected for comparison")),Oe.accessibleDiffViewerVisible=new U("accessibleDiffViewerVisible",!1,c("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),Oe.diffEditorRenderSideBySideInlineBreakpointReached=new U("diffEditorRenderSideBySideInlineBreakpointReached",!1,c("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),Oe.diffEditorInlineMode=new U("diffEditorInlineMode",!1,c("diffEditorInlineMode","Whether inline mode is active")),Oe.diffEditorOriginalWritable=new U("diffEditorOriginalWritable",!1,c("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),Oe.diffEditorModifiedWritable=new U("diffEditorModifiedWritable",!1,c("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),Oe.diffEditorOriginalUri=new U("diffEditorOriginalUri","",c("diffEditorOriginalUri","The uri of the original document")),Oe.diffEditorModifiedUri=new U("diffEditorModifiedUri","",c("diffEditorModifiedUri","The uri of the modified document")),Oe.columnSelection=new U("editorColumnSelection",!1,c("editorColumnSelection","Whether `editor.columnSelection` is enabled")),Oe.writable=Oe.readOnly.toNegated(),Oe.hasNonEmptySelection=new U("editorHasSelection",!1,c("editorHasSelection","Whether the editor has text selected")),Oe.hasOnlyEmptySelection=Oe.hasNonEmptySelection.toNegated(),Oe.hasMultipleSelections=new U("editorHasMultipleSelections",!1,c("editorHasMultipleSelections","Whether the editor has multiple selections")),Oe.hasSingleSelection=Oe.hasMultipleSelections.toNegated(),Oe.tabMovesFocus=new U("editorTabMovesFocus",!1,c("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),Oe.tabDoesNotMoveFocus=Oe.tabMovesFocus.toNegated(),Oe.isInEmbeddedEditor=new U("isInEmbeddedEditor",!1,!0),Oe.canUndo=new U("canUndo",!1,!0),Oe.canRedo=new U("canRedo",!1,!0),Oe.hoverVisible=new U("editorHoverVisible",!1,c("editorHoverVisible","Whether the editor hover is visible")),Oe.hoverFocused=new U("editorHoverFocused",!1,c("editorHoverFocused","Whether the editor hover is focused")),Oe.stickyScrollFocused=new U("stickyScrollFocused",!1,c("stickyScrollFocused","Whether the sticky scroll is focused")),Oe.stickyScrollVisible=new U("stickyScrollVisible",!1,c("stickyScrollVisible","Whether the sticky scroll is visible")),Oe.standaloneColorPickerVisible=new U("standaloneColorPickerVisible",!1,c("standaloneColorPickerVisible","Whether the standalone color picker is visible")),Oe.standaloneColorPickerFocused=new U("standaloneColorPickerFocused",!1,c("standaloneColorPickerFocused","Whether the standalone color picker is focused")),Oe.inCompositeEditor=new U("inCompositeEditor",void 0,c("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),Oe.notInCompositeEditor=Oe.inCompositeEditor.toNegated(),Oe.languageId=new U("editorLangId","",c("editorLangId","The language identifier of the editor")),Oe.hasCompletionItemProvider=new U("editorHasCompletionItemProvider",!1,c("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),Oe.hasCodeActionsProvider=new U("editorHasCodeActionsProvider",!1,c("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),Oe.hasCodeLensProvider=new U("editorHasCodeLensProvider",!1,c("editorHasCodeLensProvider","Whether the editor has a code lens provider")),Oe.hasDefinitionProvider=new U("editorHasDefinitionProvider",!1,c("editorHasDefinitionProvider","Whether the editor has a definition provider")),Oe.hasDeclarationProvider=new U("editorHasDeclarationProvider",!1,c("editorHasDeclarationProvider","Whether the editor has a declaration provider")),Oe.hasImplementationProvider=new U("editorHasImplementationProvider",!1,c("editorHasImplementationProvider","Whether the editor has an implementation provider")),Oe.hasTypeDefinitionProvider=new U("editorHasTypeDefinitionProvider",!1,c("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),Oe.hasHoverProvider=new U("editorHasHoverProvider",!1,c("editorHasHoverProvider","Whether the editor has a hover provider")),Oe.hasDocumentHighlightProvider=new U("editorHasDocumentHighlightProvider",!1,c("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),Oe.hasDocumentSymbolProvider=new U("editorHasDocumentSymbolProvider",!1,c("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),Oe.hasReferenceProvider=new U("editorHasReferenceProvider",!1,c("editorHasReferenceProvider","Whether the editor has a reference provider")),Oe.hasRenameProvider=new U("editorHasRenameProvider",!1,c("editorHasRenameProvider","Whether the editor has a rename provider")),Oe.hasSignatureHelpProvider=new U("editorHasSignatureHelpProvider",!1,c("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),Oe.hasInlayHintsProvider=new U("editorHasInlayHintsProvider",!1,c("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),Oe.hasDocumentFormattingProvider=new U("editorHasDocumentFormattingProvider",!1,c("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),Oe.hasDocumentSelectionFormattingProvider=new U("editorHasDocumentSelectionFormattingProvider",!1,c("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),Oe.hasMultipleDocumentFormattingProvider=new U("editorHasMultipleDocumentFormattingProvider",!1,c("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),Oe.hasMultipleDocumentSelectionFormattingProvider=new U("editorHasMultipleDocumentSelectionFormattingProvider",!1,c("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))))(ae||={});var it=0,jt=class extends Ep{runEditorCommand(e,t,n){let i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}},ai;(a=>{let o=function(l){if(!kn(l))return!1;let d=l;return!(!gn(d.to)||!Un(d.by)&&!gn(d.by)||!Un(d.value)&&!Li(d.value)||!Un(d.revealCursor)&&!nb(d.revealCursor))};a.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:o,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},a.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},a.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function i(l){let d;switch(l.to){case a.RawDirection.Up:d=1;break;case a.RawDirection.Right:d=2;break;case a.RawDirection.Down:d=3;break;case a.RawDirection.Left:d=4;break;default:return null}let u;switch(l.by){case a.RawUnit.Line:u=1;break;case a.RawUnit.WrappedLine:u=2;break;case a.RawUnit.Page:u=3;break;case a.RawUnit.HalfPage:u=4;break;case a.RawUnit.Editor:u=5;break;case a.RawUnit.Column:u=6;break;default:u=2}let p=Math.floor(l.value||1),h=!!l.revealCursor;return{direction:d,unit:u,value:p,revealCursor:h,select:!!l.select}}a.parse=i;let r;(h=>(h[h.Up=1]="Up",h[h.Right=2]="Right",h[h.Down=3]="Down",h[h.Left=4]="Left"))(r=a.Direction||={});let s;(g=>(g[g.Line=1]="Line",g[g.WrappedLine=2]="WrappedLine",g[g.Page=3]="Page",g[g.HalfPage=4]="HalfPage",g[g.Editor=5]="Editor",g[g.Column=6]="Column"))(s=a.Unit||={})})(ai||={});var Eg;(n=>{let o=function(i){if(!kn(i))return!1;let r=i;return!(!Li(r.lineNumber)&&!gn(r.lineNumber)||!Un(r.at)&&!gn(r.at))};n.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:o,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Eg||={});var Cg=class{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{let i=t.get(xp).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{let i=Go();return i&&Ss(i)?(this.runDOMCommand(i),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{let i=t.get(xp).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){let i=this.runEditorCommand(e,t,n);return i||!0}};var fc;(de=>{class o extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){if(!Z.position)return;D.model.pushStackElement(),D.setCursorStates(Z.source,3,[Fn.moveTo(D,D.getPrimaryCursorState(),this._inSelectionMode,Z.position,Z.viewPosition)])&&Z.revealType!==2&&D.revealAllCursors(Z.source,!0,!0)}}de.MoveTo=Ve(new o({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),de.MoveToSelect=Ve(new o({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class n extends jt{runCoreEditorCommand(D,Z){D.model.pushStackElement();let le=this._getColumnSelectResult(D,D.getPrimaryCursorState(),D.getCursorColumnSelectData(),Z);le!==null&&(D.setCursorStates(Z.source,3,le.viewStates.map($e=>nt.fromViewState($e))),D.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:le.fromLineNumber,fromViewVisualColumn:le.fromVisualColumn,toViewLineNumber:le.toLineNumber,toViewVisualColumn:le.toVisualColumn}),le.reversed?D.revealTopMostCursor(Z.source):D.revealBottomMostCursor(Z.source))}}de.ColumnSelect=Ve(new class extends n{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(ne,D,Z,le){if(typeof le.position>"u"||typeof le.viewPosition>"u"||typeof le.mouseColumn>"u")return null;let $e=ne.model.validatePosition(le.position),Lt=ne.coordinatesConverter.validateViewPosition(new te(le.viewPosition.lineNumber,le.viewPosition.column),$e),Vn=le.doColumnSelect?Z.fromViewLineNumber:Lt.lineNumber,hi=le.doColumnSelect?Z.fromViewVisualColumn:le.mouseColumn-1;return Kl.columnSelect(ne.cursorConfig,ne,Vn,hi,Lt.lineNumber,le.mouseColumn-1)}}),de.CursorColumnSelectLeft=Ve(new class extends n{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(ne,D,Z,le){return Kl.columnSelectLeft(ne.cursorConfig,ne,Z)}}),de.CursorColumnSelectRight=Ve(new class extends n{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(ne,D,Z,le){return Kl.columnSelectRight(ne.cursorConfig,ne,Z)}});class a extends n{_isPaged;constructor(D){super(D),this._isPaged=D.isPaged}_getColumnSelectResult(D,Z,le,$e){return Kl.columnSelectUp(D.cursorConfig,D,le,this._isPaged)}}de.CursorColumnSelectUp=Ve(new a({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:3600,linux:{primary:0}}})),de.CursorColumnSelectPageUp=Ve(new a({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:3595,linux:{primary:0}}}));class u extends n{_isPaged;constructor(D){super(D),this._isPaged=D.isPaged}_getColumnSelectResult(D,Z,le,$e){return Kl.columnSelectDown(D.cursorConfig,D,le,this._isPaged)}}de.CursorColumnSelectDown=Ve(new u({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:3602,linux:{primary:0}}})),de.CursorColumnSelectPageDown=Ve(new u({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:3596,linux:{primary:0}}}));class m extends jt{constructor(){super({id:"cursorMove",precondition:void 0,metadata:Me.metadata})}runCoreEditorCommand(D,Z){let le=Me.parse(Z);le&&this._runCursorMove(D,Z.source,le)}_runCursorMove(D,Z,le){D.model.pushStackElement(),D.setCursorStates(Z,3,m._move(D,D.getCursorStates(),le)),D.revealAllCursors(Z,!0)}static _move(D,Z,le){let $e=le.select,Lt=le.value;switch(le.direction){case Me.Direction.Left:case Me.Direction.Right:case Me.Direction.Up:case Me.Direction.Down:case Me.Direction.PrevBlankLine:case Me.Direction.NextBlankLine:case Me.Direction.WrappedLineStart:case Me.Direction.WrappedLineFirstNonWhitespaceCharacter:case Me.Direction.WrappedLineColumnCenter:case Me.Direction.WrappedLineEnd:case Me.Direction.WrappedLineLastNonWhitespaceCharacter:return Fn.simpleMove(D,Z,le.direction,$e,Lt,le.unit);case Me.Direction.ViewPortTop:case Me.Direction.ViewPortBottom:case Me.Direction.ViewPortCenter:case Me.Direction.ViewPortIfOutside:return Fn.viewportMove(D,Z,le.direction,$e,Lt);default:return null}}}de.CursorMoveImpl=m,de.CursorMove=Ve(new m);let f;(D=>D[D.PAGE_SIZE_MARKER=-1]="PAGE_SIZE_MARKER")(f||={});class y extends jt{_staticArgs;constructor(D){super(D),this._staticArgs=D.args}runCoreEditorCommand(D,Z){let le=this._staticArgs;this._staticArgs.value===-1&&(le={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:Z.pageSize||D.cursorConfig.pageSize}),D.model.pushStackElement(),D.setCursorStates(Z.source,3,Fn.simpleMove(D,D.getCursorStates(),le.direction,le.select,le.value,le.unit)),D.revealAllCursors(Z.source,!0)}}de.CursorLeft=Ve(new y({args:{direction:Me.Direction.Left,unit:Me.Unit.None,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),de.CursorLeftSelect=Ve(new y({args:{direction:Me.Direction.Left,unit:Me.Unit.None,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:1039}})),de.CursorRight=Ve(new y({args:{direction:Me.Direction.Right,unit:Me.Unit.None,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),de.CursorRightSelect=Ve(new y({args:{direction:Me.Direction.Right,unit:Me.Unit.None,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:1041}})),de.CursorUp=Ve(new y({args:{direction:Me.Direction.Up,unit:Me.Unit.WrappedLine,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),de.CursorUpSelect=Ve(new y({args:{direction:Me.Direction.Up,unit:Me.Unit.WrappedLine,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),de.CursorPageUp=Ve(new y({args:{direction:Me.Direction.Up,unit:Me.Unit.WrappedLine,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:11}})),de.CursorPageUpSelect=Ve(new y({args:{direction:Me.Direction.Up,unit:Me.Unit.WrappedLine,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:1035}})),de.CursorDown=Ve(new y({args:{direction:Me.Direction.Down,unit:Me.Unit.WrappedLine,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),de.CursorDownSelect=Ve(new y({args:{direction:Me.Direction.Down,unit:Me.Unit.WrappedLine,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),de.CursorPageDown=Ve(new y({args:{direction:Me.Direction.Down,unit:Me.Unit.WrappedLine,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:12}})),de.CursorPageDownSelect=Ve(new y({args:{direction:Me.Direction.Down,unit:Me.Unit.WrappedLine,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:1036}})),de.CreateCursor=Ve(new class extends jt{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(ne,D){if(!D.position)return;let Z;D.wholeLine?Z=Fn.line(ne,ne.getPrimaryCursorState(),!1,D.position,D.viewPosition):Z=Fn.moveTo(ne,ne.getPrimaryCursorState(),!1,D.position,D.viewPosition);let le=ne.getCursorStates();if(le.length>1){let $e=Z.modelState?Z.modelState.position:null,Lt=Z.viewState?Z.viewState.position:null;for(let Vn=0,hi=le.length;Vn<hi;Vn++){let Ne=le[Vn];if(!($e&&!Ne.modelState.selection.containsPosition($e))&&!(Lt&&!Ne.viewState.selection.containsPosition(Lt))){le.splice(Vn,1),ne.model.pushStackElement(),ne.setCursorStates(D.source,3,le);return}}}le.push(Z),ne.model.pushStackElement(),ne.setCursorStates(D.source,3,le)}}),de.LastCursorMoveToSelect=Ve(new class extends jt{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(ne,D){if(!D.position)return;let Z=ne.getLastAddedCursorIndex(),le=ne.getCursorStates(),$e=le.slice(0);$e[Z]=Fn.moveTo(ne,le[Z],!0,D.position,D.viewPosition),ne.model.pushStackElement(),ne.setCursorStates(D.source,3,$e)}});class ve extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){D.model.pushStackElement(),D.setCursorStates(Z.source,3,Fn.moveToBeginningOfLine(D,D.getCursorStates(),this._inSelectionMode)),D.revealAllCursors(Z.source,!0)}}de.CursorHome=Ve(new ve({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),de.CursorHomeSelect=Ve(new ve({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class fe extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){D.model.pushStackElement(),D.setCursorStates(Z.source,3,this._exec(D.getCursorStates())),D.revealAllCursors(Z.source,!0)}_exec(D){let Z=[];for(let le=0,$e=D.length;le<$e;le++){let Lt=D[le],Vn=Lt.modelState.position.lineNumber;Z[le]=nt.fromModelState(Lt.modelState.move(this._inSelectionMode,Vn,1,0))}return Z}}de.CursorLineStart=Ve(new fe({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:0,mac:{primary:287}}})),de.CursorLineStartSelect=Ve(new fe({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:0,mac:{primary:1311}}}));class Ue extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){D.model.pushStackElement(),D.setCursorStates(Z.source,3,Fn.moveToEndOfLine(D,D.getCursorStates(),this._inSelectionMode,Z.sticky||!1)),D.revealAllCursors(Z.source,!0)}}de.CursorEnd=Ve(new Ue({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:it,kbExpr:ae.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:c("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),de.CursorEndSelect=Ve(new Ue({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:it,kbExpr:ae.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:c("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class ke extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){D.model.pushStackElement(),D.setCursorStates(Z.source,3,this._exec(D,D.getCursorStates())),D.revealAllCursors(Z.source,!0)}_exec(D,Z){let le=[];for(let $e=0,Lt=Z.length;$e<Lt;$e++){let Vn=Z[$e],hi=Vn.modelState.position.lineNumber,Ne=D.model.getLineMaxColumn(hi);le[$e]=nt.fromModelState(Vn.modelState.move(this._inSelectionMode,hi,Ne,0))}return le}}de.CursorLineEnd=Ve(new ke({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:0,mac:{primary:291}}})),de.CursorLineEndSelect=Ve(new ke({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:0,mac:{primary:1315}}}));class io extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){D.model.pushStackElement(),D.setCursorStates(Z.source,3,Fn.moveToBeginningOfBuffer(D,D.getCursorStates(),this._inSelectionMode)),D.revealAllCursors(Z.source,!0)}}de.CursorTop=Ve(new io({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:2062,mac:{primary:2064}}})),de.CursorTopSelect=Ve(new io({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:3086,mac:{primary:3088}}}));class ui extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){D.model.pushStackElement(),D.setCursorStates(Z.source,3,Fn.moveToEndOfBuffer(D,D.getCursorStates(),this._inSelectionMode)),D.revealAllCursors(Z.source,!0)}}de.CursorBottom=Ve(new ui({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:2061,mac:{primary:2066}}})),de.CursorBottomSelect=Ve(new ui({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:3085,mac:{primary:3090}}}));class ja extends jt{constructor(){super({id:"editorScroll",precondition:void 0,metadata:ai.metadata})}determineScrollMethod(D){let Z=[6],le=[1,2,3,4,5,6],$e=[4,2],Lt=[1,3];return Z.includes(D.unit)&&$e.includes(D.direction)?this._runHorizontalEditorScroll.bind(this):le.includes(D.unit)&&Lt.includes(D.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(D,Z){let le=ai.parse(Z);if(!le)return;let $e=this.determineScrollMethod(le);$e&&$e(D,Z.source,le)}_runVerticalEditorScroll(D,Z,le){let $e=this._computeDesiredScrollTop(D,le);if(le.revealCursor){let Lt=D.getCompletelyVisibleViewRangeAtScrollTop($e);D.setCursorStates(Z,3,[Fn.findPositionInViewportIfOutside(D,D.getPrimaryCursorState(),Lt,le.select)])}D.viewLayout.setScrollPosition({scrollTop:$e},0)}_computeDesiredScrollTop(D,Z){if(Z.unit===1){let Lt=D.viewLayout.getFutureViewport(),Vn=D.getCompletelyVisibleViewRangeAtScrollTop(Lt.top),hi=D.coordinatesConverter.convertViewRangeToModelRange(Vn),Ne;Z.direction===1?Ne=Math.max(1,hi.startLineNumber-Z.value):Ne=Math.min(D.model.getLineCount(),hi.startLineNumber+Z.value);let S=D.coordinatesConverter.convertModelPositionToViewPosition(new te(Ne,1));return D.viewLayout.getVerticalOffsetForLineNumber(S.lineNumber)}if(Z.unit===5){let Lt=0;return Z.direction===3&&(Lt=D.model.getLineCount()-D.cursorConfig.pageSize),D.viewLayout.getVerticalOffsetForLineNumber(Lt)}let le;Z.unit===3?le=D.cursorConfig.pageSize*Z.value:Z.unit===4?le=Math.round(D.cursorConfig.pageSize/2)*Z.value:le=Z.value;let $e=(Z.direction===1?-1:1)*le;return D.viewLayout.getCurrentScrollTop()+$e*D.cursorConfig.lineHeight}_runHorizontalEditorScroll(D,Z,le){let $e=this._computeDesiredScrollLeft(D,le);D.viewLayout.setScrollPosition({scrollLeft:$e},0)}_computeDesiredScrollLeft(D,Z){let le=(Z.direction===4?-1:1)*Z.value;return D.viewLayout.getCurrentScrollLeft()+le*D.cursorConfig.typicalHalfwidthCharacterWidth}}de.EditorScrollImpl=ja,de.EditorScroll=Ve(new ja),de.ScrollLineUp=Ve(new class extends jt{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(ne,D){de.EditorScroll.runCoreEditorCommand(ne,{to:ai.RawDirection.Up,by:ai.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:D.source})}}),de.ScrollPageUp=Ve(new class extends jt{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(ne,D){de.EditorScroll.runCoreEditorCommand(ne,{to:ai.RawDirection.Up,by:ai.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:D.source})}}),de.ScrollEditorTop=Ve(new class extends jt{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus}})}runCoreEditorCommand(ne,D){de.EditorScroll.runCoreEditorCommand(ne,{to:ai.RawDirection.Up,by:ai.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:D.source})}}),de.ScrollLineDown=Ve(new class extends jt{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(ne,D){de.EditorScroll.runCoreEditorCommand(ne,{to:ai.RawDirection.Down,by:ai.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:D.source})}}),de.ScrollPageDown=Ve(new class extends jt{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(ne,D){de.EditorScroll.runCoreEditorCommand(ne,{to:ai.RawDirection.Down,by:ai.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:D.source})}}),de.ScrollEditorBottom=Ve(new class extends jt{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus}})}runCoreEditorCommand(ne,D){de.EditorScroll.runCoreEditorCommand(ne,{to:ai.RawDirection.Down,by:ai.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:D.source})}}),de.ScrollLeft=Ve(new class extends jt{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus}})}runCoreEditorCommand(ne,D){de.EditorScroll.runCoreEditorCommand(ne,{to:ai.RawDirection.Left,by:ai.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:D.source})}}),de.ScrollRight=Ve(new class extends jt{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus}})}runCoreEditorCommand(ne,D){de.EditorScroll.runCoreEditorCommand(ne,{to:ai.RawDirection.Right,by:ai.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:D.source})}});class ir extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){Z.position&&(D.model.pushStackElement(),D.setCursorStates(Z.source,3,[Fn.word(D,D.getPrimaryCursorState(),this._inSelectionMode,Z.position)]),Z.revealType!==2&&D.revealAllCursors(Z.source,!0,!0))}}de.WordSelect=Ve(new ir({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),de.WordSelectDrag=Ve(new ir({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),de.LastCursorWordSelect=Ve(new class extends jt{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(ne,D){if(!D.position)return;let Z=ne.getLastAddedCursorIndex(),le=ne.getCursorStates(),$e=le.slice(0),Lt=le[Z];$e[Z]=Fn.word(ne,Lt,Lt.modelState.hasSelection(),D.position),ne.model.pushStackElement(),ne.setCursorStates(D.source,3,$e)}});class as extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){Z.position&&(D.model.pushStackElement(),D.setCursorStates(Z.source,3,[Fn.line(D,D.getPrimaryCursorState(),this._inSelectionMode,Z.position,Z.viewPosition)]),Z.revealType!==2&&D.revealAllCursors(Z.source,!1,!0))}}de.LineSelect=Ve(new as({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),de.LineSelectDrag=Ve(new as({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class Fo extends jt{_inSelectionMode;constructor(D){super(D),this._inSelectionMode=D.inSelectionMode}runCoreEditorCommand(D,Z){if(!Z.position)return;let le=D.getLastAddedCursorIndex(),$e=D.getCursorStates(),Lt=$e.slice(0);Lt[le]=Fn.line(D,$e[le],this._inSelectionMode,Z.position,Z.viewPosition),D.model.pushStackElement(),D.setCursorStates(Z.source,3,Lt)}}de.LastCursorLineSelect=Ve(new Fo({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),de.LastCursorLineSelectDrag=Ve(new Fo({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),de.CancelSelection=Ve(new class extends jt{constructor(){super({id:"cancelSelection",precondition:ae.hasNonEmptySelection,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(ne,D){ne.model.pushStackElement(),ne.setCursorStates(D.source,3,[Fn.cancelSelection(ne,ne.getPrimaryCursorState())]),ne.revealAllCursors(D.source,!0)}}),de.RemoveSecondaryCursors=Ve(new class extends jt{constructor(){super({id:"removeSecondaryCursors",precondition:ae.hasMultipleSelections,kbOpts:{weight:it+1,kbExpr:ae.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(ne,D){ne.model.pushStackElement(),ne.setCursorStates(D.source,3,[ne.getPrimaryCursorState()]),ne.revealAllCursors(D.source,!0),pg(c("removedCursor","Removed secondary cursors"))}}),de.RevealLine=Ve(new class extends jt{constructor(){super({id:"revealLine",precondition:void 0,metadata:Eg.metadata})}runCoreEditorCommand(ne,D){let Z=D,le=Z.lineNumber||0,$e=typeof le=="number"?le+1:parseInt(le)+1;$e<1&&($e=1);let Lt=ne.model.getLineCount();$e>Lt&&($e=Lt);let Vn=new P($e,1,$e,ne.model.getLineMaxColumn($e)),hi=0;if(Z.at)switch(Z.at){case Eg.RawAtArgument.Top:hi=3;break;case Eg.RawAtArgument.Center:hi=1;break;case Eg.RawAtArgument.Bottom:hi=4;break;default:break}let Ne=ne.coordinatesConverter.convertModelRangeToViewRange(Vn);ne.revealRange(D.source,!1,Ne,hi,0)}}),de.SelectAll=new class extends Cg{constructor(){super(HP)}runDOMCommand(ne){To&&(ne.focus(),ne.select()),ne.ownerDocument.execCommand("selectAll")}runEditorCommand(ne,D,Z){let le=D._getViewModel();le&&this.runCoreEditorCommand(le,Z)}runCoreEditorCommand(ne,D){ne.model.pushStackElement(),ne.setCursorStates("keyboard",3,[Fn.selectAll(ne,ne.getPrimaryCursorState())])}},de.SetSelection=Ve(new class extends jt{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(ne,D){D.selection&&(ne.model.pushStackElement(),ne.setCursorStates(D.source,3,[nt.fromModelSelection(D.selection)]))}})})(fc||={});var aU=$.and(ae.textInputFocus,ae.columnSelection);function Dp(o,e){ri.registerKeybindingRule({id:o,primary:e,when:aU,weight:it+1})}Dp(fc.CursorColumnSelectLeft.id,1039);Dp(fc.CursorColumnSelectRight.id,1041);Dp(fc.CursorColumnSelectUp.id,1040);Dp(fc.CursorColumnSelectPageUp.id,1035);Dp(fc.CursorColumnSelectDown.id,1042);Dp(fc.CursorColumnSelectPageDown.id,1036);function XP(o){return o.register(),o}var Tk;(l=>{class o extends Ep{runEditorCommand(u,p,h){let m=p._getViewModel();m&&this.runCoreEditingCommand(p,m,h||{})}}l.CoreEditingCommand=o,l.LineBreakInsert=Ve(new class extends o{constructor(){super({id:"lineBreakInsert",precondition:ae.writable,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(d,u,p){d.pushUndoStop(),d.executeCommands(this.id,Pa.lineBreakInsert(u.cursorConfig,u.model,u.getCursorStates().map(h=>h.modelState.selection)))}}),l.Outdent=Ve(new class extends o{constructor(){super({id:"outdent",precondition:ae.writable,kbOpts:{weight:it,kbExpr:$.and(ae.editorTextFocus,ae.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(d,u,p){d.pushUndoStop(),d.executeCommands(this.id,gc.outdent(u.cursorConfig,u.model,u.getCursorStates().map(h=>h.modelState.selection))),d.pushUndoStop()}}),l.Tab=Ve(new class extends o{constructor(){super({id:"tab",precondition:ae.writable,kbOpts:{weight:it,kbExpr:$.and(ae.editorTextFocus,ae.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(d,u,p){d.pushUndoStop(),d.executeCommands(this.id,gc.tab(u.cursorConfig,u.model,u.getCursorStates().map(h=>h.modelState.selection))),d.pushUndoStop()}}),l.DeleteLeft=Ve(new class extends o{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(d,u,p){let[h,m]=dc.deleteLeft(u.getPrevEditOperationType(),u.cursorConfig,u.model,u.getCursorStates().map(g=>g.modelState.selection),u.getCursorAutoClosedCharacters());h&&d.pushUndoStop(),d.executeCommands(this.id,m),u.setPrevEditOperationType(2)}}),l.DeleteRight=Ve(new class extends o{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:it,kbExpr:ae.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(d,u,p){let[h,m]=dc.deleteRight(u.getPrevEditOperationType(),u.cursorConfig,u.model,u.getCursorStates().map(g=>g.modelState.selection));h&&d.pushUndoStop(),d.executeCommands(this.id,m),u.setPrevEditOperationType(3)}}),l.Undo=new class extends Cg{constructor(){super(bk)}runDOMCommand(d){d.ownerDocument.execCommand("undo")}runEditorCommand(d,u,p){if(!(!u.hasModel()||u.getOption(93)===!0))return u.getModel().undo()}},l.Redo=new class extends Cg{constructor(){super(vk)}runDOMCommand(d){d.ownerDocument.execCommand("redo")}runEditorCommand(d,u,p){if(!(!u.hasModel()||u.getOption(93)===!0))return u.getModel().redo()}}})(Tk||={});var uI=class extends sc{_handlerId;constructor(e,t,n){super({id:e,precondition:void 0,metadata:n}),this._handlerId=t}runCommand(e,t){let n=e.get(xp).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}};function bc(o,e){XP(new uI("default:"+o,o)),XP(new uI(o,o,e))}bc("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});bc("replacePreviousChar");bc("compositionType");bc("compositionStart");bc("compositionEnd");bc("paste");bc("cut");var pI=class{_selection;_selectionId;_cursors;_trimInRegexesAndStrings;constructor(e,t,n){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=n}getEditOperations(e,t){let n=lU(e,this._cursors,this._trimInRegexesAndStrings);for(let i=0,r=n.length;i<r;i++){let s=n[i];t.addEditOperation(s.range,s.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};function lU(o,e,t){e.sort((a,l)=>a.lineNumber===l.lineNumber?a.column-l.column:a.lineNumber-l.lineNumber);for(let a=e.length-2;a>=0;a--)e[a].lineNumber===e[a+1].lineNumber&&e.splice(a,1);let n=[],i=0,r=0,s=e.length;for(let a=1,l=o.getLineCount();a<=l;a++){let d=o.getLineContent(a),u=d.length+1,p=0;if(r<s&&e[r].lineNumber===a&&(p=e[r].column,r++,p===u)||d.length===0)continue;let h=zo(d),m=0;if(h===-1)m=1;else if(h!==d.length-1)m=h+2;else continue;if(!t){if(!o.tokenization.hasAccurateTokensForLine(a))continue;let g=o.tokenization.getLineTokens(a),f=g.getStandardTokenType(g.findTokenIndexAtOffset(m));if(f===2||f===3)continue}m=Math.max(p,m),n[i++]=Ei.delete(new P(a,m,a,u))}return n}var wg=class{_selection;_isCopyingDown;_noop;_selectionDirection;_selectionId;_startLineNumberDelta;_endLineNumberDelta;constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let i=[];for(let s=n.startLineNumber;s<=n.endLineNumber;s++)i.push(e.getLineContent(s));let r=i.join(`
`);r===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new P(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new P(n.startLineNumber,1,n.startLineNumber,1),r+`
`):t.addEditOperation(new P(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+r),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,r=n.startColumn,s=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,r=1),this._endLineNumberDelta!==0&&(s=s+this._endLineNumberDelta,a=1),n=Je.createWithDirection(i,r,s,a,this._selectionDirection)}return n}};function Wi(o,e){let t=0;for(let n=0;n<o.length;n++)o.charAt(n)==="	"?t+=e:t++;return t}function vc(o,e,t){o=o<0?0:o;let n="";if(!t){let i=Math.floor(o/e);o=o%e;for(let r=0;r<i;r++)n+="	"}for(let i=0;i<o;i++)n+=" ";return n}var _p=class{constructor(e,t,n,i){this._languageConfigurationService=i;this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}_selection;_isMovingDown;_autoIndent;_selectionId;_moveEndPositionDown;_moveEndLineSelectionShrink;getEditOperations(e,t){let n=()=>e.getLanguageId(),i=(p,h)=>e.getLanguageIdAtPosition(p,h),r=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===r){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let s=this._selection;s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(this._moveEndPositionDown=!0,s=s.setEndPosition(s.endLineNumber-1,e.getLineMaxColumn(s.endLineNumber-1)));let{tabSize:a,indentSize:l,insertSpaces:d}=e.getOptions(),u=this.buildIndentConverter(a,l,d);if(s.startLineNumber===s.endLineNumber&&e.getLineMaxColumn(s.startLineNumber)===1){let p=s.startLineNumber,h=this._isMovingDown?p+1:p-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new P(1,1,1,1),null):(t.addEditOperation(new P(p,1,p,1),e.getLineContent(h)),t.addEditOperation(new P(h,1,h,e.getLineMaxColumn(h)),null)),s=new Je(h,1,h,1)}else{let p,h;if(this._isMovingDown){p=s.endLineNumber+1,h=e.getLineContent(p),t.addEditOperation(new P(p-1,e.getLineMaxColumn(p-1),p,e.getLineMaxColumn(p)),null);let m=h;if(this.shouldAutoIndent(e,s)){let g=this.matchEnterRule(e,u,a,p,s.startLineNumber-1);if(g!==null){let y=Tt(e.getLineContent(p)),C=g+Wi(y,a);m=vc(C,a,d)+this.trimStart(h)}else{let y={tokenization:{getLineTokens:w=>w===s.startLineNumber?e.tokenization.getLineTokens(p):e.tokenization.getLineTokens(w),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:w=>w===s.startLineNumber?e.getLineContent(p):e.getLineContent(w)},C=cc(this._autoIndent,y,e.getLanguageIdAtPosition(p,1),s.startLineNumber,u,this._languageConfigurationService);if(C!==null){let w=Tt(e.getLineContent(p)),R=Wi(C,a),_=Wi(w,a);R!==_&&(m=vc(R,a,d)+this.trimStart(h))}}t.addEditOperation(new P(s.startLineNumber,1,s.startLineNumber,1),m+`
`);let f=this.matchEnterRuleMovingDown(e,u,a,s.startLineNumber,p,m);if(f!==null)f!==0&&this.getIndentEditsOfMovingBlock(e,t,s,a,d,f);else{let y={tokenization:{getLineTokens:w=>w===s.startLineNumber?e.tokenization.getLineTokens(p):w>=s.startLineNumber+1&&w<=s.endLineNumber+1?e.tokenization.getLineTokens(w-1):e.tokenization.getLineTokens(w),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:w=>w===s.startLineNumber?m:w>=s.startLineNumber+1&&w<=s.endLineNumber+1?e.getLineContent(w-1):e.getLineContent(w)},C=cc(this._autoIndent,y,e.getLanguageIdAtPosition(p,1),s.startLineNumber+1,u,this._languageConfigurationService);if(C!==null){let w=Tt(e.getLineContent(s.startLineNumber)),R=Wi(C,a),_=Wi(w,a);if(R!==_){let B=R-_;this.getIndentEditsOfMovingBlock(e,t,s,a,d,B)}}}}else t.addEditOperation(new P(s.startLineNumber,1,s.startLineNumber,1),m+`
`)}else if(p=s.startLineNumber-1,h=e.getLineContent(p),t.addEditOperation(new P(p,1,p+1,1),null),t.addEditOperation(new P(s.endLineNumber,e.getLineMaxColumn(s.endLineNumber),s.endLineNumber,e.getLineMaxColumn(s.endLineNumber)),`
`+h),this.shouldAutoIndent(e,s)){let m={tokenization:{getLineTokens:f=>f===p?e.tokenization.getLineTokens(s.startLineNumber):e.tokenization.getLineTokens(f),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:f=>f===p?e.getLineContent(s.startLineNumber):e.getLineContent(f)},g=this.matchEnterRule(e,u,a,s.startLineNumber,s.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,s,a,d,g);else{let f=cc(this._autoIndent,m,e.getLanguageIdAtPosition(s.startLineNumber,1),p,u,this._languageConfigurationService);if(f!==null){let y=Tt(e.getLineContent(s.startLineNumber)),C=Wi(f,a),w=Wi(y,a);if(C!==w){let R=C-w;this.getIndentEditsOfMovingBlock(e,t,s,a,d,R)}}}}}this._selectionId=t.trackSelection(s)}buildIndentConverter(e,t,n){return{shiftIndent:i=>Sn.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>Sn.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,r){if(r){let s=r.indentation;r.indentAction===0||r.indentAction===1?s=r.indentation+r.appendText:r.indentAction===2?s=r.indentation:r.indentAction===3&&(s=t.unshiftIndent(r.indentation)+r.appendText);let a=e.getLineContent(i);if(this.trimStart(a).indexOf(this.trimStart(s))>=0){let l=Tt(e.getLineContent(i)),d=Tt(s),u=jy(e,i,this._languageConfigurationService);u!==null&&u&2&&(d=t.unshiftIndent(d));let p=Wi(d,n),h=Wi(l,n);return p-h}}return null}matchEnterRuleMovingDown(e,t,n,i,r,s){if(zo(s)>=0){let a=e.getLineMaxColumn(r),l=Oa(this._autoIndent,e,new P(r,a,r,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){let u=e.getLineContent(a);if(zo(u)>=0)break;a--}if(a<1||i>e.getLineCount())return null;let l=e.getLineMaxColumn(a),d=Oa(this._autoIndent,e,new P(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,d)}}matchEnterRule(e,t,n,i,r,s){let a=r;for(;a>=1;){let u;if(a===r&&s!==void 0?u=s:u=e.getLineContent(a),zo(u)>=0)break;a--}if(a<1||i>e.getLineCount())return null;let l=e.getLineMaxColumn(a),d=Oa(this._autoIndent,e,new P(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,d)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;let n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,n,i,r,s){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){let l=e.getLineContent(a),d=Tt(l),p=Wi(d,i)+s,h=vc(p,i,r);h!==d&&(t.addEditOperation(new P(a,1,a,d.length+1),h),a===n.endLineNumber&&n.endColumn<=d.length+1&&h===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}};_p=k([I(3,fo)],_p);var Lp=class o{static _COLLATOR=null;static getCollator(){return o._COLLATOR||(o._COLLATOR=new Intl.Collator),o._COLLATOR}selection;descending;selectionId;constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){let n=dU(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let i=JP(e,t,n);if(!i)return!1;for(let r=0,s=i.before.length;r<s;r++)if(i.before[r]!==i.after[r])return!0;return!1}};function JP(o,e,t){let n=e.startLineNumber,i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;let r=[];for(let a=n;a<=i;a++)r.push(o.getLineContent(a));let s=r.slice(0);return s.sort(Lp.getCollator().compare),t===!0&&(s=s.reverse()),{startLineNumber:n,endLineNumber:i,before:r,after:s}}function dU(o,e,t){let n=JP(o,e,t);return n?Ei.replace(new P(n.startLineNumber,1,n.endLineNumber,o.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}var hI=class extends mn{down;constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;let n=t.getSelections().map((s,a)=>({selection:s,index:a,ignore:!1}));n.sort((s,a)=>P.compareRangesUsingStarts(s.selection,a.selection));let i=n[0];for(let s=1;s<n.length;s++){let a=n[s];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}let r=[];for(let s of n)r.push(new wg(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},kk=class extends hI{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:c("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:be.MenubarSelectionMenu,group:"2_line",title:c({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}},Dk=class extends hI{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:c("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:be.MenubarSelectionMenu,group:"2_line",title:c({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}},_k=class extends mn{constructor(){super({id:"editor.action.duplicateSelection",label:c("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:ae.writable,menuOpts:{menuId:be.MenubarSelectionMenu,group:"2_line",title:c({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;let i=[],r=t.getSelections(),s=t.getModel();for(let a of r)if(a.isEmpty())i.push(new wg(a,!0));else{let l=new Je(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new qy(l,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},mI=class extends mn{down;constructor(e,t){super(t),this.down=e}run(e,t){let n=e.get(fo),i=[],r=t.getSelections()||[],s=t.getOption(12);for(let a of r)i.push(new _p(a,this.down,s,n));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},Lk=class extends mI{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:c("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:be.MenubarSelectionMenu,group:"2_line",title:c({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}},Rk=class extends mI{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:c("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:be.MenubarSelectionMenu,group:"2_line",title:c({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}},gI=class extends mn{descending;constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;let n=t.getModel(),i=t.getSelections();i.length===1&&i[0].isEmpty()&&(i=[new Je(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))]);for(let s of i)if(!Lp.canRun(t.getModel(),s,this.descending))return;let r=[];for(let s=0,a=i.length;s<a;s++)r[s]=new Lp(i[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},Ak=class extends gI{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:c("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:ae.writable})}},Ok=class extends gI{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:c("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:ae.writable})}},Pk=class extends mn{constructor(){super({id:"editor.action.removeDuplicateLines",label:c("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:ae.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let i=[],r=[],s=0,a=!0,l=t.getSelections();l.length===1&&l[0].isEmpty()&&(l=[new Je(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))],a=!1);for(let d of l){let u=new Set,p=[];for(let f=d.startLineNumber;f<=d.endLineNumber;f++){let y=n.getLineContent(f);u.has(y)||(p.push(y),u.add(y))}let h=new Je(d.startLineNumber,1,d.endLineNumber,n.getLineMaxColumn(d.endLineNumber)),m=d.startLineNumber-s,g=new Je(m,1,m+p.length-1,p[p.length-1].length);i.push(Ei.replace(h,p.join(`
`))),r.push(g),s+=d.endLineNumber-d.startLineNumber+1-p.length}t.pushUndoStop(),t.executeEdits(this.id,i,a?r:void 0),t.pushUndoStop()}},kg=class o extends mn{static ID="editor.action.trimTrailingWhitespace";constructor(){super({id:o.ID,label:c("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:rr(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(u=>new te(u.positionLineNumber,u.positionColumn)));let r=t.getSelection();if(r===null)return;let s=e.get(He),a=t.getModel(),l=s.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:a?.getLanguageId(),resource:a?.uri}),d=new pI(r,i,l);t.pushUndoStop(),t.executeCommands(this.id,[d]),t.pushUndoStop()}},Mk=class extends mn{constructor(){super({id:"editor.action.deleteLines",label:c("lines.delete","Delete Line"),alias:"Delete Line",precondition:ae.writable,kbOpts:{kbExpr:ae.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let r=0,s=[],a=[];for(let l=0,d=n.length;l<d;l++){let u=n[l],p=u.startLineNumber,h=u.endLineNumber,m=1,g=i.getLineMaxColumn(h);h<i.getLineCount()?(h+=1,g=1):p>1&&(p-=1,m=i.getLineMaxColumn(p)),s.push(Ei.replace(new Je(p,m,h,g),"")),a.push(new Je(p-r,u.positionColumn,p-r,u.positionColumn)),r+=u.endLineNumber-u.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(r=>{let s=r.endLineNumber;return r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(s-=1),{startLineNumber:r.startLineNumber,selectionStartColumn:r.selectionStartColumn,endLineNumber:s,positionColumn:r.positionColumn}});t.sort((r,s)=>r.startLineNumber===s.startLineNumber?r.endLineNumber-s.endLineNumber:r.startLineNumber-s.startLineNumber);let n=[],i=t[0];for(let r=1;r<t.length;r++)i.endLineNumber+1>=t[r].startLineNumber?i.endLineNumber=t[r].endLineNumber:(n.push(i),i=t[r]);return n.push(i),n}},Nk=class extends mn{constructor(){super({id:"editor.action.indentLines",label:c("lines.indent","Indent Line"),alias:"Indent Line",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:2142,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,gc.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}},Fk=class extends mn{constructor(){super({id:"editor.action.outdentLines",label:c("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:2140,weight:100}})}run(e,t){Tk.Outdent.runEditorCommand(e,t,null)}},Bk=class extends mn{constructor(){super({id:"editor.action.insertLineBefore",label:c("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:3075,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Pa.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}},Vk=class extends mn{constructor(){super({id:"editor.action.insertLineAfter",label:c("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:2051,weight:100}})}run(e,t){let n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Pa.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}},fI=class extends mn{run(e,t){if(!t.hasModel())return;let n=t.getSelection(),i=this._getRangesToDelete(t),r=[];for(let l=0,d=i.length-1;l<d;l++){let u=i[l],p=i[l+1];P.intersectRanges(u,p)===null?r.push(u):i[l+1]=P.plusRange(u,p)}r.push(i[i.length-1]);let s=this._getEndCursorState(n,r),a=r.map(l=>Ei.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,s),t.pushUndoStop()}},Wk=class extends fI{constructor(){super({id:"deleteAllLeft",label:c("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:ae.writable,kbOpts:{kbExpr:ae.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,i=[],r=0;return t.forEach(s=>{let a;if(s.endColumn===1&&r>0){let l=s.startLineNumber-r;a=new Je(l,s.startColumn,l,s.startColumn)}else a=new Je(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn);r+=s.endLineNumber-s.startLineNumber,s.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,i=e.getModel();return i===null?[]:(n.sort(P.compareRangesUsingStarts),n=n.map(r=>{if(r.isEmpty())if(r.startColumn===1){let s=Math.max(1,r.startLineNumber-1),a=r.startLineNumber===1?1:i.getLineLength(s)+1;return new P(s,a,r.startLineNumber,1)}else return new P(r.startLineNumber,1,r.startLineNumber,r.startColumn);else return new P(r.startLineNumber,1,r.endLineNumber,r.endColumn)}),n)}},Uk=class extends fI{constructor(){super({id:"deleteAllRight",label:c("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:ae.writable,kbOpts:{kbExpr:ae.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,i=[];for(let r=0,s=t.length,a=0;r<s;r++){let l=t[r],d=new Je(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=d:i.push(d)}return n&&i.unshift(n),i}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let i=n.map(r=>{if(r.isEmpty()){let s=t.getLineMaxColumn(r.startLineNumber);return r.startColumn===s?new P(r.startLineNumber,r.startColumn,r.startLineNumber+1,1):new P(r.startLineNumber,r.startColumn,r.startLineNumber,s)}return r});return i.sort(P.compareRangesUsingStarts),i}},zk=class extends mn{constructor(){super({id:"editor.action.joinLines",label:c("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:ae.writable,kbOpts:{kbExpr:ae.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(P.compareRangesUsingStarts);let r=[],s=n.reduce((h,m)=>h.isEmpty()?h.endLineNumber===m.startLineNumber?(i.equalsSelection(h)&&(i=m),m):m.startLineNumber>h.endLineNumber+1?(r.push(h),m):new Je(h.startLineNumber,h.startColumn,m.endLineNumber,m.endColumn):m.startLineNumber>h.endLineNumber?(r.push(h),m):new Je(h.startLineNumber,h.startColumn,m.endLineNumber,m.endColumn));r.push(s);let a=t.getModel();if(a===null)return;let l=[],d=[],u=i,p=0;for(let h=0,m=r.length;h<m;h++){let g=r[h],f=g.startLineNumber,y=1,C=0,w,R,_=a.getLineLength(g.endLineNumber)-g.endColumn;if(g.isEmpty()||g.startLineNumber===g.endLineNumber){let F=g.getStartPosition();F.lineNumber<a.getLineCount()?(w=f+1,R=a.getLineMaxColumn(w)):(w=F.lineNumber,R=a.getLineMaxColumn(F.lineNumber))}else w=g.endLineNumber,R=a.getLineMaxColumn(w);let B=a.getLineContent(f);for(let F=f+1;F<=w;F++){let V=a.getLineContent(F),oe=a.getLineFirstNonWhitespaceColumn(F);if(oe>=1){let ge=!0;B===""&&(ge=!1),ge&&(B.charAt(B.length-1)===" "||B.charAt(B.length-1)==="	")&&(ge=!1,B=B.replace(/[\s\uFEFF\xA0]+$/g," "));let we=V.substr(oe-1);B+=(ge?" ":"")+we,ge?C=we.length+1:C=we.length}else C=0}let K=new P(f,y,w,R);if(!K.isEmpty()){let F;g.isEmpty()?(l.push(Ei.replace(K,B)),F=new Je(K.startLineNumber-p,B.length-C+1,f-p,B.length-C+1)):g.startLineNumber===g.endLineNumber?(l.push(Ei.replace(K,B)),F=new Je(g.startLineNumber-p,g.startColumn,g.endLineNumber-p,g.endColumn)):(l.push(Ei.replace(K,B)),F=new Je(g.startLineNumber-p,g.startColumn,g.startLineNumber-p,B.length-_)),P.intersectRanges(K,i)!==null?u=F:d.push(F)}p+=K.endLineNumber-K.startLineNumber}d.unshift(u),t.pushUndoStop(),t.executeEdits(this.id,l,d),t.pushUndoStop()}},Hk=class extends mn{constructor(){super({id:"editor.action.transpose",label:c("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:ae.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getModel();if(i===null)return;let r=[];for(let s=0,a=n.length;s<a;s++){let l=n[s];if(!l.isEmpty())continue;let d=l.getStartPosition(),u=i.getLineMaxColumn(d.lineNumber);if(d.column>=u){if(d.lineNumber===i.getLineCount())continue;let p=new P(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),h=i.getValueInRange(p).split("").reverse().join("");r.push(new Nn(new Je(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),h))}else{let p=new P(d.lineNumber,Math.max(1,d.column-1),d.lineNumber,d.column+1),h=i.getValueInRange(p).split("").reverse().join("");r.push(new Cp(p,h,new Je(d.lineNumber,d.column+1,d.lineNumber,d.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},Ma=class extends mn{run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getModel();if(i===null)return;let r=t.getOption(133),s=[];for(let a of n)if(a.isEmpty()){let l=a.getStartPosition(),d=t.getConfiguredWordAtPosition(l);if(!d)continue;let u=new P(l.lineNumber,d.startColumn,l.lineNumber,d.endColumn),p=i.getValueInRange(u);s.push(Ei.replace(u,this._modifyText(p,r)))}else{let l=i.getValueInRange(a);s.push(Ei.replace(a,this._modifyText(l,r)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}},Kk=class extends Ma{constructor(){super({id:"editor.action.transformToUppercase",label:c("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:ae.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}},Gk=class extends Ma{constructor(){super({id:"editor.action.transformToLowercase",label:c("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:ae.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}},Jr=class{constructor(e,t){this._pattern=e;this._flags=t;this._actual=null,this._evaluated=!1}_actual;_evaluated;get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}},bI=class o extends Ma{static titleBoundary=new Jr("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");constructor(){super({id:"editor.action.transformToTitlecase",label:c("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:ae.writable})}_modifyText(e,t){let n=o.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}},Tg=class o extends Ma{static caseBoundary=new Jr("(\\p{Ll})(\\p{Lu})","gmu");static singleLetters=new Jr("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");constructor(){super({id:"editor.action.transformToSnakecase",label:c("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:ae.writable})}_modifyText(e,t){let n=o.caseBoundary.get(),i=o.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}},vI=class o extends Ma{static wordBoundary=new Jr("[_\\s-]","gm");constructor(){super({id:"editor.action.transformToCamelcase",label:c("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:ae.writable})}_modifyText(e,t){let n=o.wordBoundary.get();if(!n)return e;let i=e.split(n);return i.shift()+i.map(s=>s.substring(0,1).toLocaleUpperCase()+s.substring(1)).join("")}},yI=class o extends Ma{static wordBoundary=new Jr("[_\\s-]","gm");static wordBoundaryToMaintain=new Jr("(?<=\\.)","gm");constructor(){super({id:"editor.action.transformToPascalcase",label:c("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:ae.writable})}_modifyText(e,t){let n=o.wordBoundary.get(),i=o.wordBoundaryToMaintain.get();return!n||!i?e:e.split(i).map(a=>a.split(n)).flat().map(a=>a.substring(0,1).toLocaleUpperCase()+a.substring(1)).join("")}},II=class o extends Ma{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}static caseBoundary=new Jr("(\\p{Ll})(\\p{Lu})","gmu");static singleLetters=new Jr("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");static underscoreBoundary=new Jr("(\\S)(_)(\\S)","gm");constructor(){super({id:"editor.action.transformToKebabcase",label:c("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:ae.writable})}_modifyText(e,t){let n=o.caseBoundary.get(),i=o.singleLetters.get(),r=o.underscoreBoundary.get();return!n||!i||!r?e:e.replace(r,"$1-$3").replace(n,"$1-$2").replace(i,"$1-$2").toLocaleLowerCase()}};Ot(kk);Ot(Dk);Ot(_k);Ot(Lk);Ot(Rk);Ot(Ak);Ot(Ok);Ot(Pk);Ot(kg);Ot(Mk);Ot(Nk);Ot(Fk);Ot(Bk);Ot(Vk);Ot(Wk);Ot(Uk);Ot(zk);Ot(Hk);Ot(Kk);Ot(Gk);Tg.caseBoundary.isSupported()&&Tg.singleLetters.isSupported()&&Ot(Tg);vI.wordBoundary.isSupported()&&Ot(vI);yI.wordBoundary.isSupported()&&Ot(yI);bI.titleBoundary.isSupported()&&Ot(bI);II.isSupported()&&Ot(II);var cU={Quickaccess:"workbench.contributions.quickaccess"},qk=class{providers=[];defaultProvider=void 0;registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),re(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return An([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}clear(){let e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}};Be.add(cU.Quickaccess,new qk);var AKe=new Jn(()=>{let o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:o,collatorIsNumeric:o.resolvedOptions().numeric}}),OKe=new Jn(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),PKe=new Jn(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));var qKe=Object.freeze({score:0}),$Ke=1<<18,jKe=1<<17;var $k=class{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===me.file?e.resource.fsPath:e.resource?.path}},vGe=new $k,es=H("quickInputService");function jk(o,e,t,n){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return[];let i=e.getLanguageConfiguration(o.getLanguageId()).indentRulesSupport;if(!i)return[];let r=new uc(o,i,e);for(n=Math.min(n,o.getLineCount());t<=n&&r.shouldIgnore(t);)t++;if(t>n-1)return[];let{tabSize:s,indentSize:a,insertSpaces:l}=o.getOptions(),d=(f,y)=>(y=y||1,Sn.shiftIndent(f,f.length+y,s,a,l)),u=(f,y)=>(y=y||1,Sn.unshiftIndent(f,f.length+y,s,a,l)),p=[],h=o.getLineContent(t),m=Tt(h),g=m;r.shouldIncrease(t)?(g=d(g),m=d(m)):r.shouldIndentNextLine(t)&&(g=d(g)),t++;for(let f=t;f<=n;f++){if(uU(o,f))continue;let y=o.getLineContent(f),C=Tt(y),w=g;r.shouldDecrease(f,w)&&(g=u(g),m=u(m)),C!==g&&p.push(Ei.replaceMove(new Je(f,1,f,C.length+1),Vm(g,a,l))),!r.shouldIgnore(f)&&(r.shouldIncrease(f,w)?(m=d(m),g=m):r.shouldIndentNextLine(f,w)?g=d(g):g=m)}return p}function uU(o,e){return o.tokenization.isCheapToTokenize(e)?o.tokenization.getLineTokens(e).getStandardTokenType(0)===2:!1}var Dg=class o extends mn{static ID="editor.action.indentationToSpaces";constructor(){super({id:o.ID,label:c("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:ae.writable,metadata:{description:ue("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){let n=t.getModel();if(!n)return;let i=n.getOptions(),r=t.getSelection();if(!r)return;let s=new Zk(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}},_g=class o extends mn{static ID="editor.action.indentationToTabs";constructor(){super({id:o.ID,label:c("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:ae.writable,metadata:{description:ue("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){let n=t.getModel();if(!n)return;let i=n.getOptions(),r=t.getSelection();if(!r)return;let s=new Jk(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}},Lg=class extends mn{constructor(t,n,i){super(i);this.insertSpaces=t;this.displaySizeOnly=n}run(t,n){let i=t.get(es),r=t.get(mr),s=n.getModel();if(!s)return;let a=r.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),l=s.getOptions(),d=[1,2,3,4,5,6,7,8].map(p=>({id:p.toString(),label:p.toString(),description:p===a.tabSize&&p===l.tabSize?c("configuredTabSize","Configured Tab Size"):p===a.tabSize?c("defaultTabSize","Default Tab Size"):p===l.tabSize?c("currentTabSize","Current Tab Size"):void 0})),u=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(d,{placeHolder:c({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:d[u]}).then(p=>{if(p&&s&&!s.isDisposed()){let h=parseInt(p.label,10);this.displaySizeOnly?s.updateOptions({tabSize:h}):s.updateOptions({tabSize:h,indentSize:h,insertSpaces:this.insertSpaces})}})},50)}},Rg=class o extends Lg{static ID="editor.action.indentUsingTabs";constructor(){super(!1,!1,{id:o.ID,label:c("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:ue("indentUsingTabsDescription","Use indentation with tabs.")}})}},Ag=class o extends Lg{static ID="editor.action.indentUsingSpaces";constructor(){super(!0,!1,{id:o.ID,label:c("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:ue("indentUsingSpacesDescription","Use indentation with spaces.")}})}},Og=class o extends Lg{static ID="editor.action.changeTabDisplaySize";constructor(){super(!0,!0,{id:o.ID,label:c("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:ue("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}},Pg=class o extends mn{static ID="editor.action.detectIndentation";constructor(){super({id:o.ID,label:c("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:ue("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){let n=e.get(mr),i=t.getModel();if(!i)return;let r=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(r.insertSpaces,r.tabSize)}},Yk=class extends mn{constructor(){super({id:"editor.action.reindentlines",label:c("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:ae.writable,metadata:{description:ue("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){let n=e.get(fo),i=t.getModel();if(!i)return;let r=jk(i,n,1,i.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}},Qk=class extends mn{constructor(){super({id:"editor.action.reindentselectedlines",label:c("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:ae.writable,metadata:{description:ue("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){let n=e.get(fo),i=t.getModel();if(!i)return;let r=t.getSelections();if(r===null)return;let s=[];for(let a of r){let l=a.startLineNumber,d=a.endLineNumber;if(l!==d&&a.endColumn===1&&d--,l===1){if(l===d)continue}else l--;let u=jk(i,n,l,d);s.push(...u)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}},Xk=class{_edits;_initialSelection;_selectionId;constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(let i of this._edits)t.addEditOperation(P.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}},Rp=class{constructor(e,t){this.editor=e;this._languageConfigurationService=t;this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}static ID="editor.contrib.autoIndentOnPaste";callOnDispose=new Y;callOnModel=new Y;update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(56))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;let n=this.editor.getModel();if(!n||this.rangeContainsOnlyWhitespaceCharacters(n,e)||pU(n,e)||!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;let r=this.editor.getOption(12),{tabSize:s,indentSize:a,insertSpaces:l}=n.getOptions(),d=[],u={shiftIndent:g=>Sn.shiftIndent(g,g.length+1,s,a,l),unshiftIndent:g=>Sn.unshiftIndent(g,g.length+1,s,a,l)},p=e.startLineNumber;for(;p<=e.endLineNumber;){if(this.shouldIgnoreLine(n,p)){p++;continue}break}if(p>e.endLineNumber)return;let h=n.getLineContent(p);if(!/\S/.test(h.substring(0,e.startColumn-1))){let g=cc(r,n,n.getLanguageId(),p,u,this._languageConfigurationService);if(g!==null){let f=Tt(h),y=Wi(g,s),C=Wi(f,s);if(y!==C){let w=vc(y,s,l);d.push({range:new P(p,1,p,f.length+1),text:w}),h=w+h.substring(f.length)}else{let w=jy(n,p,this._languageConfigurationService);if(w===0||w===8)return}}}let m=p;for(;p<e.endLineNumber;){if(!/\S/.test(n.getLineContent(p+1))){p++;continue}break}if(p!==e.endLineNumber){let f=cc(r,{tokenization:{getLineTokens:y=>n.tokenization.getLineTokens(y),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(y,C)=>n.getLanguageIdAtPosition(y,C)},getLineContent:y=>y===m?h:n.getLineContent(y)},n.getLanguageId(),p+1,u,this._languageConfigurationService);if(f!==null){let y=Wi(f,s),C=Wi(Tt(n.getLineContent(p+1)),s);if(y!==C){let w=y-C;for(let R=p+1;R<=e.endLineNumber;R++){let _=n.getLineContent(R),B=Tt(_),F=Wi(B,s)+w,V=vc(F,s,l);V!==B&&d.push({range:new P(R,1,R,B.length+1),text:V})}}}}if(d.length>0){this.editor.pushUndoStop();let g=new Xk(d,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",g),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(e,t){let n=r=>r.trim().length===0,i=!0;if(t.startLineNumber===t.endLineNumber){let s=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);i=n(s)}else for(let r=t.startLineNumber;r<=t.endLineNumber;r++){let s=e.getLineContent(r);if(r===t.startLineNumber){let a=s.substring(t.startColumn-1);i=n(a)}else if(r===t.endLineNumber){let a=s.substring(0,t.endColumn-1);i=n(a)}else i=e.getLineFirstNonWhitespaceColumn(r)===0;if(!i)break}return i}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);let n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;let i=e.tokenization.getLineTokens(t);if(i.getCount()>0){let r=i.findTokenIndexAtOffset(n);if(r>=0&&i.getStandardTokenType(r)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};Rp=k([I(1,fo)],Rp);function pU(o,e){let t=n=>pR(o,n)===2;return t(e.getStartPosition())||t(e.getEndPosition())}function eM(o,e,t,n){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return;let i="";for(let s=0;s<t;s++)i+=" ";let r=new RegExp(i,"gi");for(let s=1,a=o.getLineCount();s<=a;s++){let l=o.getLineFirstNonWhitespaceColumn(s);if(l===0&&(l=o.getLineMaxColumn(s)),l===1)continue;let d=new P(s,1,s,l),u=o.getValueInRange(d),p=n?u.replace(/\t/ig,i):u.replace(r,"	");e.addEditOperation(d,p)}}var Zk=class{constructor(e,t){this.selection=e;this.tabSize=t}selectionId=null;getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),eM(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}},Jk=class{constructor(e,t){this.selection=e;this.tabSize=t}selectionId=null;getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),eM(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}};zP(Rp.ID,Rp,2);Ot(Dg);Ot(_g);Ot(Rg);Ot(Ag);Ot(Og);Ot(Pg);Ot(Yk);Ot(Qk);var Ap=class extends Rl{constructor(t,n,i){super();this.resource=t;this.name=n;this.fileService=i}mime=Sa.binary;size;etag;getName(){return this.name}getSize(){return this.size}getMime(){return this.mime}getETag(){return this.etag}async resolve(){if(this.fileService.hasProvider(this.resource)){let t=await this.fileService.stat(this.resource);this.etag=t.etag,typeof t.size=="number"&&(this.size=t.size)}return super.resolve()}};Ap=k([I(2,Ut)],Ap);var hU="__$__isNewStorageMarker",SI="__$__targetStorageMarker",Mt=H("storageService");function mU(o){let e=o.get(SI);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}var tM=class o extends N{constructor(t={flushInterval:o.DEFAULT_FLUSH_INTERVAL}){super();this.options=t}static DEFAULT_FLUSH_INTERVAL=60*1e3;_onDidChangeValue=this._register(new wd);_onDidChangeTarget=this._register(new wd);onDidChangeTarget=this._onDidChangeTarget.event;_onWillSaveState=this._register(new x);onWillSaveState=this._onWillSaveState.event;initializationPromise;flushWhenIdleScheduler=this._register(new yi(()=>this.doFlushWhenIdle(),this.options.flushInterval));runFlushWhenIdle=this._register(new ot);onDidChangeValue(t,n,i){return G.filter(this._onDidChangeValue.event,r=>r.scope===t&&(n===void 0||r.key===n),i)}doFlushWhenIdle(){this.runFlushWhenIdle.value=pl(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){Bt([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{_n("code/willInitStorage");try{await this.doInitialize()}finally{_n("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(t,n){let{key:i,external:r}=n;if(i===SI){switch(t){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:t})}else this._onDidChangeValue.fire({scope:t,key:i,target:this.getKeyTargets(t)[i],external:r})}emitWillSaveState(t){this._onWillSaveState.fire({reason:t})}get(t,n,i){return this.getStorage(n)?.get(t,i)}getBoolean(t,n,i){return this.getStorage(n)?.getBoolean(t,i)}getNumber(t,n,i){return this.getStorage(n)?.getNumber(t,i)}getObject(t,n,i){return this.getStorage(n)?.getObject(t,i)}storeAll(t,n){this.withPausedEmitters(()=>{for(let i of t)this.store(i.key,i.value,i.scope,i.target,n)})}store(t,n,i,r,s=!1){if(vi(n)){this.remove(t,i,s);return}this.withPausedEmitters(()=>{this.updateKeyTarget(t,i,r),this.getStorage(i)?.set(t,n,s)})}remove(t,n,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(t,n,void 0),this.getStorage(n)?.delete(t,i)})}withPausedEmitters(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(t,n){let i=[],r=this.getKeyTargets(t);for(let s of Object.keys(r))r[s]===n&&i.push(s);return i}updateKeyTarget(t,n,i,r=!1){let s=this.getKeyTargets(n);typeof i=="number"?s[t]!==i&&(s[t]=i,this.getStorage(n)?.set(SI,JSON.stringify(s),r)):typeof s[t]=="number"&&(delete s[t],this.getStorage(n)?.set(SI,JSON.stringify(s),r))}_workspaceKeyTargets=void 0;get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}_profileKeyTargets=void 0;get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}_applicationKeyTargets=void 0;get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(t){switch(t){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(t){let n=this.getStorage(t);return n?mU(n):Object.create(null)}isNew(t){return this.getBoolean(hU,t)===!0}async flush(t=0){this._onWillSaveState.fire({reason:t});let n=this.getStorage(-1),i=this.getStorage(0),r=this.getStorage(1);switch(t){case 0:await co.settled([n?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve()]);break;case 1:await co.settled([n?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve()]);break}}async log(){let t=this.getStorage(-1)?.items??new Map,n=this.getStorage(0)?.items??new Map,i=this.getStorage(1)?.items??new Map;return gU(t,n,i,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async optimize(t){return await this.flush(),this.getStorage(t)?.optimize()}async switch(t,n){return this.emitWillSaveState(0),hP(t)?this.switchToProfile(t,n):this.switchToWorkspace(t,n)}canSwitchProfile(t,n){return!(t.id===n.id||nM(n)&&nM(t))}switchData(t,n,i){this.withPausedEmitters(()=>{let r=new Set;for(let[s,a]of t)r.add(s),n.get(s)!==a&&this.emitDidChangeValue(i,{key:s,external:!0});for(let[s]of n.items)r.has(s)||this.emitDidChangeValue(i,{key:s,external:!0})})}};function nM(o){return o.isDefault||!!o.useDefaultFlags?.globalState}async function gU(o,e,t,n,i,r){let s=f=>{try{return JSON.parse(f)}catch{return f}},a=new Map,l=new Map;o.forEach((f,y)=>{a.set(y,f),l.set(y,s(f))});let d=new Map,u=new Map;e.forEach((f,y)=>{d.set(y,f),u.set(y,s(f))});let p=new Map,h=new Map;t.forEach((f,y)=>{p.set(y,f),h.set(y,s(f))}),console.group(n!==i?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);let m=[];if(a.forEach((f,y)=>{m.push({key:y,value:f})}),console.table(m),console.groupEnd(),console.log(l),n!==i){console.group(`Storage: Profile (path: ${i}, profile specific)`);let f=[];d.forEach((y,C)=>{f.push({key:C,value:y})}),console.table(f),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${r})`);let g=[];p.forEach((f,y)=>{g.push({key:y,value:f})}),console.table(g),console.groupEnd(),console.log(h)}var xI=class o{constructor(e,t){this.storageService=t;this.id=o.COMMON_PREFIX+e}static applicationMementos=new Map;static profileMementos=new Map;static workspaceMementos=new Map;static COMMON_PREFIX="memento/";id;getMemento(e,t){switch(e){case 1:{let n=o.workspaceMementos.get(this.id);return n||(n=new Mg(this.id,e,t,this.storageService),o.workspaceMementos.set(this.id,n)),n.getMemento()}case 0:{let n=o.profileMementos.get(this.id);return n||(n=new Mg(this.id,e,t,this.storageService),o.profileMementos.set(this.id,n)),n.getMemento()}case-1:{let n=o.applicationMementos.get(this.id);return n||(n=new Mg(this.id,e,t,this.storageService),o.applicationMementos.set(this.id,n)),n.getMemento()}}}onDidChangeValue(e,t){return this.storageService.onDidChangeValue(e,this.id,t)}saveMemento(){o.workspaceMementos.get(this.id)?.save(),o.profileMementos.get(this.id)?.save(),o.applicationMementos.get(this.id)?.save()}reloadMemento(e){let t;switch(e){case-1:t=o.applicationMementos.get(this.id);break;case 0:t=o.profileMementos.get(this.id);break;case 1:t=o.workspaceMementos.get(this.id);break}t?.reload()}static clear(e){switch(e){case 1:o.workspaceMementos.clear();break;case 0:o.profileMementos.clear();break;case-1:o.applicationMementos.clear();break}}},Mg=class{constructor(e,t,n,i){this.id=e;this.scope=t;this.target=n;this.storageService=i;this.mementoObj=this.doLoad()}mementoObj;doLoad(){try{return this.storageService.getObject(this.id,this.scope,{})}catch(e){bt(`[memento]: failed to parse contents: ${e} (id: ${this.id}, scope: ${this.scope}, contents: ${this.storageService.get(this.id,this.scope)})`)}return{}}getMemento(){return this.mementoObj}reload(){for(let e of Object.getOwnPropertyNames(this.mementoObj))delete this.mementoObj[e];Object.assign(this.mementoObj,this.doLoad())}save(){Rd(this.mementoObj)?this.storageService.remove(this.id,this.scope):this.storageService.store(this.id,this.mementoObj,this.scope,this.target)}};var Na=class extends Bu{constructor(t,n,i){super(n);this.id=t;this.memento=new xI(this.id,i),this._register(i.onWillSaveState(()=>{this.saveState(),this.memento.saveMemento()}))}memento;getId(){return this.id}getMemento(t,n){return this.memento.getMemento(t,n)}reloadMemento(t){return this.memento.reloadMemento(t)}onDidChangeMementoValue(t,n){return this.memento.onDidChangeValue(t,n)}saveState(){}};var Po={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Sa.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};var Ui;(i=>{function o(r,s){if(r.start>=s.end||s.start>=r.end)return{start:0,end:0};let a=Math.max(r.start,s.start),l=Math.min(r.end,s.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=o;function e(r){return r.end-r.start<=0}i.isEmpty=e;function t(r,s){return!e(o(r,s))}i.intersects=t;function n(r,s){let a=[],l={start:r.start,end:Math.min(s.start,r.end)},d={start:Math.max(s.end,r.start),end:r.end};return e(l)||a.push(l),e(d)||a.push(d),a}i.relativeComplement=n})(Ui||={});var Op=class{_hooks=new Y;_pointerMoveCallback=null;_onStopCallback=null;dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=r;let s=e;try{e.setPointerCapture(t),this._hooks.add(re(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{s=Re(e)}this._hooks.add(W(s,ee.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(W(s,ee.POINTER_UP,a=>this.stopMonitoring(!0)))}};var Bn=class extends N{onclick(e,t){this._register(W(e,ee.CLICK,n=>t(new Tn(Re(e),n))))}onmousedown(e,t){this._register(W(e,ee.MOUSE_DOWN,n=>t(new Tn(Re(e),n))))}onmouseover(e,t){this._register(W(e,ee.MOUSE_OVER,n=>t(new Tn(Re(e),n))))}onmouseleave(e,t){this._register(W(e,ee.MOUSE_LEAVE,n=>t(new Tn(Re(e),n))))}onkeydown(e,t){this._register(W(e,ee.KEY_DOWN,n=>t(new pt(n))))}onkeyup(e,t){this._register(W(e,ee.KEY_UP,n=>t(new pt(n))))}oninput(e,t){this._register(W(e,ee.INPUT,t))}onblur(e,t){this._register(W(e,ee.BLUR,t))}onfocus(e,t){this._register(W(e,ee.FOCUS,t))}onchange(e,t){this._register(W(e,ee.CHANGE,t))}ignoreGesture(e){return tn.ignoreTarget(e)}};var Gl=11,EI=class extends Bn{_onActivate;bgDomNode;domNode;_pointerdownRepeatTimer;_pointerdownScheduleRepeatTimer;_pointerMoveMonitor;constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...je.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=Gl+"px",this.domNode.style.height=Gl+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Op),this._register(zn(this.bgDomNode,ee.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(zn(this.domNode,ee.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new gb),this._pointerdownScheduleRepeatTimer=this._register(new pa)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Re(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}};var Pp=class o{_scrollbarSize;_oppositeScrollbarSize;_arrowSize;_visibleSize;_scrollSize;_scrollPosition;_computedAvailableSize;_computedIsNeeded;_computedSliderSize;_computedSliderRatio;_computedSliderPosition;constructor(e,t,n,i,r,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=r,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new o(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,r){let s=Math.max(0,n-e),a=Math.max(0,s-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*a/i))),u=(a-d)/(i-n),p=r*u;return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(d),computedSliderRatio:u,computedSliderPosition:Math.round(p)}}_refreshComputedValues(){let e=o._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}};var CI=class extends N{_visibility;_visibleClassName;_invisibleClassName;_domNode;_rawShouldBeVisible;_shouldBeVisible;_isNeeded;_isVisible;_revealTimer;constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new pa)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}};var fU=140,Mp=class extends Bn{_host;_scrollable;_scrollByPage;_lazyRender;_scrollbarState;_visibilityController;_pointerMoveMonitor;domNode;slider;_shouldRender;constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new CI(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Op),this._shouldRender=!0,this.domNode=ic(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(W(this.domNode.domNode,ee.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new EI(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=ic(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(W(this.slider.domNode,ee.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);n<=r&&r<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{let r=Zh(this.domNode.domNode);t=e.pageX-r.left,n=e.pageY-r.top}let i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{let s=this._sliderOrthogonalPointerPosition(r),a=Math.abs(s-n);if(St&&a>fU){this._setDesiredScrollPositionNow(i.getScrollPosition());return}let d=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(d))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}};var wI=class extends Mp{constructor(e,t,n){let i=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Pp(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let s=(t.arrowSize-Gl)/2,a=(t.horizontalScrollbarSize-Gl)/2;this._createArrow({className:"scra",icon:Q.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Rr(null,1,0))}),this._createArrow({className:"scra",icon:Q.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Rr(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}};var TI=class extends Mp{constructor(e,t,n){let i=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Pp(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let s=(t.arrowSize-Gl)/2,a=(t.verticalScrollbarSize-Gl)/2;this._createArrow({className:"scra",icon:Q.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Rr(null,0,1))}),this._createArrow({className:"scra",icon:Q.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Rr(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};var bU=500,iM=50,oM=!0,e1=class{timestamp;deltaX;deltaY;score;constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}},t1=class o{static INSTANCE=new o;_capacity;_memory;_front;_rear;constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{let r=i===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[i].score*r,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(eu){let t=Re(e.browserEvent),n=j_(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let i=null,r=new e1(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(i=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,i)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){let i=Math.abs(e.deltaX),r=Math.abs(e.deltaY),s=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(i,s),1),d=Math.max(Math.min(r,a),1),u=Math.max(i,s),p=Math.max(r,a);u%l===0&&p%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}},Ng=class extends Bn{_options;_scrollable;_verticalScrollbar;_horizontalScrollbar;_domNode;_leftShadowDomNode;_topShadowDomNode;_topLeftShadowDomNode;_listenOnDomNode;_mouseWheelToDispose;_isDragging;_mouseIsOver;_hideTimeout;_shouldRender;_revealOnScroll;_onScroll=this._register(new x);onScroll=this._onScroll.event;_onWillScroll=this._register(new x);onWillScroll=this._onWillScroll.event;get options(){return this._options}constructor(e,t,n){super(),e.style.overflow="hidden",this._options=vU(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let i={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new TI(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new wI(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ic(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ic(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ic(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new pa),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Bt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Fe&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Rr(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Bt(this._mouseWheelToDispose),e)){let n=i=>{this._onMouseWheel(new Rr(i))};this._mouseWheelToDispose.push(W(this._listenOnDomNode,ee.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=t1.INSTANCE;oM&&t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+r===0?s=r=0:Math.abs(r)>=Math.abs(s)?s=0:r=0),this._options.flipAxes&&([r,s]=[s,r]);let a=!Fe&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),d={};if(r){let u=iM*r,p=l.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,p)}if(s){let u=iM*s,p=l.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,p)}d=this._scrollable.validateScrollPosition(d),(l.scrollLeft!==d.scrollLeft||l.scrollTop!==d.scrollTop)&&(oM&&this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",r=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${r}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),bU)}},kI=class extends Ng{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new ba({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>Yi(Re(e),i)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},Np=class extends Ng{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},Fa=class extends Ng{_element;constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new ba({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>Yi(Re(e),i)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function vU(o){let e={lazyRender:typeof o.lazyRender<"u"?o.lazyRender:!1,className:typeof o.className<"u"?o.className:"",useShadows:typeof o.useShadows<"u"?o.useShadows:!0,handleMouseWheel:typeof o.handleMouseWheel<"u"?o.handleMouseWheel:!0,flipAxes:typeof o.flipAxes<"u"?o.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof o.consumeMouseWheelIfScrollbarIsNeeded<"u"?o.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof o.alwaysConsumeMouseWheel<"u"?o.alwaysConsumeMouseWheel:!1,scrollYToX:typeof o.scrollYToX<"u"?o.scrollYToX:!1,mouseWheelScrollSensitivity:typeof o.mouseWheelScrollSensitivity<"u"?o.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof o.fastScrollSensitivity<"u"?o.fastScrollSensitivity:5,scrollPredominantAxis:typeof o.scrollPredominantAxis<"u"?o.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof o.mouseWheelSmoothScroll<"u"?o.mouseWheelSmoothScroll:!0,arrowSize:typeof o.arrowSize<"u"?o.arrowSize:11,listenOnDomNode:typeof o.listenOnDomNode<"u"?o.listenOnDomNode:null,horizontal:typeof o.horizontal<"u"?o.horizontal:1,horizontalScrollbarSize:typeof o.horizontalScrollbarSize<"u"?o.horizontalScrollbarSize:10,horizontalSliderSize:typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:0,horizontalHasArrows:typeof o.horizontalHasArrows<"u"?o.horizontalHasArrows:!1,vertical:typeof o.vertical<"u"?o.vertical:1,verticalScrollbarSize:typeof o.verticalScrollbarSize<"u"?o.verticalScrollbarSize:10,verticalHasArrows:typeof o.verticalHasArrows<"u"?o.verticalHasArrows:!1,verticalSliderSize:typeof o.verticalSliderSize<"u"?o.verticalSliderSize:0,scrollByPage:typeof o.scrollByPage<"u"?o.scrollByPage:!1};return e.horizontalSliderSize=typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof o.verticalSliderSize<"u"?o.verticalSliderSize:e.verticalScrollbarSize,Fe&&(e.className+=" mac"),e}var yU=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}}),n1=yU,IU=new Jn(()=>n1("mouse",!1)),SU=new Jn(()=>n1("element",!1));function Yt(o){return o==="element"?SU.value:IU.value}function ql(){return n1("element",!0)}function rM(o,e={}){let t=DI(e);return t.textContent=o,t}function sM(o,e={}){let t=DI(e);return aM(t,xU(o,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function DI(o){let e=o.inline?"span":"div",t=document.createElement(e);return o.className&&(t.className=o.className),t}var i1=class{source;index;constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function aM(o,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){let r=document.createElement("a");t.disposables.add(zn(r,"click",s=>{t.callback(String(e.index),s)})),i=r}else e.type===8?i=document.createElement("br"):e.type===1&&(i=o);i&&o!==i&&o.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(r=>{aM(i,r,t,n)})}function xU(o,e){let t={type:1,children:[]},n=0,i=t,r=[],s=new i1(o);for(;!s.eos();){let a=s.next(),l=a==="\\"&&o1(s.peek(),e)!==0;if(l&&(a=s.next()),!l&&EU(a,e)&&a===s.peek()){s.advance(),i.type===2&&(i=r.pop());let d=o1(a,e);if(i.type===d||i.type===5&&d===6)i=r.pop();else{let u={type:d,children:[]};d===5&&(u.index=n,n++),i.children.push(u),r.push(i),i=u}}else if(a===`
`)i.type===2&&(i=r.pop()),i.children.push({type:8});else if(i.type!==2){let d={type:2,content:a};i.children.push(d),r.push(i),i=d}else i.content+=a}return i.type===2&&(i=r.pop()),r.length,t}function EU(o,e){return o1(o,e)!==0}function o1(o,e){switch(o){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}var _I=class{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}};function lM(o,e){let t=[];for(let n of e){if(o.start>=n.range.end)continue;if(o.end<n.range.start)break;let i=Ui.intersect(o,n.range);Ui.isEmpty(i)||t.push({range:i,size:n.size})}return t}function RI({start:o,end:e},t){return{start:o+t,end:e+t}}function CU(o){let e=[],t=null;for(let n of o){let i=n.range.start,r=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=r;continue}t={range:{start:i,end:r},size:s},e.push(t)}return e}function wU(...o){return CU(o.reduce((e,t)=>e.concat(t),[]))}var LI=class{groups=[];_size=0;_paddingTop=0;get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){let i=n.length-t,r=lM({start:0,end:e},this.groups),s=lM({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:RI(l.range,i),size:l.size})),a=n.map((l,d)=>({range:{start:e+d,end:e+d+1},size:l.size}));this.groups=wU(r,a,s),this._size=this._paddingTop+this.groups.reduce((l,d)=>l+d.size*(d.range.end-d.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(let i of this.groups){let r=i.range.end-i.range.start,s=n+r*i.size;if(e<s)return t+Math.floor((e-n)/i.size);t+=r,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){let r=i.range.end-i.range.start,s=n+r;if(e<s)return this._paddingTop+t+(e-n)*i.size;t+=r*i.size,n=s}return-1}};var AI=class{constructor(e){this.renderers=e}cache=new Map;transactionNodesPendingRemoval=new Set;inTransaction=!1;alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{let i=De(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:s}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(let t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){let{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}};var Ic={CurrentDragAndDropData:void 0};var Gs={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(o){return[o]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},OI=class{elements;_context;get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}},r1=class{elements;constructor(e){this.elements=e}update(){}getData(){return this.elements}},s1=class{types;files;constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};function TU(o,e){return Array.isArray(o)&&Array.isArray(e)?Wn(o,e):o===e}var a1=class{getSetSize;getPosInSet;getRole;isChecked;constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}},Mo=class Mo{constructor(e,t,n,i=Gs){this.virtualDelegate=t;if(i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(i.paddingTop??0);for(let s of n)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new AI(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=i.horizontalScrolling??Gs.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof i.paddingBottom>"u"?0:i.paddingBottom,this.accessibilityProvider=new a1(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(i.transformOptimization??Gs.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(tn.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new ba({forceIntegerValues:!0,smoothScrollDuration:i.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:s=>Yi(Re(this.domNode),s)})),this.scrollableElement=this.disposables.add(new Np(this.rowsContainer,{alwaysConsumeMouseWheel:i.alwaysConsumeMouseWheel??Gs.alwaysConsumeMouseWheel,horizontal:1,vertical:i.verticalScrollMode??Gs.verticalScrollMode,useShadows:i.useShadows??Gs.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(W(this.rowsContainer,Ct.Change,s=>this.onTouchChange(s))),this.disposables.add(W(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(W(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(W(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(W(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(W(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=i.setRowLineHeight??Gs.setRowLineHeight,this.setRowHeight=i.setRowHeight??Gs.setRowHeight,this.supportDynamicHeights=i.supportDynamicHeights??Gs.supportDynamicHeights,this.dnd=i.dnd??this.disposables.add(Gs.dnd),this.layout(i.initialSize?.height,i.initialSize?.width)}static InstanceCount=0;domId=`list_id_${++Mo.InstanceCount}`;domNode;items;itemId;rangeMap;cache;renderers=new Map;lastRenderTop;lastRenderHeight;renderWidth=0;rowsContainer;scrollable;scrollableElement;_scrollHeight=0;scrollableElementUpdateDisposable=null;scrollableElementWidthDelayer=new Ar(50);splicing=!1;dragOverAnimationDisposable;dragOverAnimationStopDisposable=N.None;dragOverMouseY=0;setRowLineHeight;setRowHeight;supportDynamicHeights;paddingBottom;accessibilityProvider;scrollWidth;dnd;canDrop=!1;currentDragData;currentDragFeedback;currentDragFeedbackPosition;currentDragFeedbackDisposable=N.None;onDragLeaveTimeout=N.None;disposables=new Y;_onDidChangeContentHeight=new x;_onDidChangeContentWidth=new x;onDidChangeContentHeight=G.latch(this._onDidChangeContentHeight.event,void 0,this.disposables);onDidChangeContentWidth=G.latch(this._onDidChangeContentWidth.event,void 0,this.disposables);get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}_horizontalScrolling=!1;get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:vb(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){let n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,n){if(e<0||e>=this.items.length)return;let i=this.items[e].size;if(typeof t>"u"){if(!this.supportDynamicHeights){console.warn("Dynamic heights not supported",new Error().stack);return}this.items[e].lastDynamicHeightWidth=void 0,t=i+this.probeDynamicHeight(e)}if(i===t)return;let r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=0;e<r.start||n!==null&&n>e&&n<r.end?s=t-i:s=0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(r,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}createRangeMap(e){return new LI(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){let i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},s=Ui.intersect(i,r),a=new Map;for(let B=s.end-1;B>=s.start;B--){let K=this.items[B];if(K.dragStartDisposable.dispose(),K.checkedDisposable.dispose(),K.row){let F=a.get(K.templateId);F||(F=[],a.set(K.templateId,F));let V=this.renderers.get(K.templateId);V&&V.disposeElement&&V.disposeElement(K.element,B,K.row.templateData,K.size),F.unshift(K.row)}K.row=null,K.stale=!0}let l={start:e+t,end:this.items.length},d=Ui.intersect(l,i),u=Ui.relativeComplement(l,i),p=n.map(B=>({id:String(this.itemId++),element:B,templateId:this.virtualDelegate.getTemplateId(B),size:this.virtualDelegate.getHeight(B),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(B),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:N.None,checkedDisposable:N.None,stale:!1})),h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,p),h=this.items,this.items=p):(this.rangeMap.splice(e,t,p),h=this.items.splice(e,t,...p));let m=n.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),f=RI(d,m),y=Ui.intersect(g,f);for(let B=y.start;B<y.end;B++)this.updateItemInDOM(this.items[B],B);let C=Ui.relativeComplement(f,g);for(let B of C)for(let K=B.start;K<B.end;K++)this.removeItemFromDOM(K);let w=u.map(B=>RI(B,m)),_=[{start:e,end:e+n.length},...w].map(B=>Ui.intersect(g,B)).reverse();for(let B of _)for(let K=B.end-1;K>=B.start;K--){let F=this.items[K],oe=a.get(F.templateId)?.pop();this.insertItemInDOM(K,oe)}for(let B of a.values())for(let K of B)this.cache.release(K);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(B=>B.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Yi(Re(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||typeof this.scrollWidth>"u")return;let t=this.items[e];this.measureItemWidth(t),typeof t.width<"u"&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){let e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),n=this.rangeMap.positionAt(e+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:Y0(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:vb(this.domNode)})}render(e,t,n,i,r,s=!1){let a=this.getRenderRange(t,n),l=Ui.relativeComplement(a,e).reverse(),d=Ui.relativeComplement(e,a);if(s){let u=Ui.intersect(e,a);for(let p=u.start;p<u.end;p++)this.updateItemInDOM(this.items[p],p)}this.cache.transact(()=>{for(let u of d)for(let p=u.start;p<u.end;p++)this.removeItemFromDOM(p);for(let u of l)for(let p=u.end-1;p>=u.start;p--)this.insertItemInDOM(p)}),i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){let n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{let l=this.cache.alloc(n.templateId);n.row=l.row,n.stale||=l.isReusingConnectedDomNode}let i=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",i);let r=this.accessibilityProvider.isChecked(n.element);if(typeof r=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){let l=d=>n.row.domNode.setAttribute("aria-checked",String(!!d));l(r.value),n.checkedDisposable=r.onDidChange(()=>l(r.value))}if(n.stale||!n.row.domNode.parentElement){let l=this.items.at(e+1)?.row?.domNode??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(n.row.domNode,l),n.stale=!1}this.updateItemInDOM(n,e);let s=this.renderers.get(n.templateId);if(!s)throw new Error(`No renderer found for template id ${n.templateId}`);s?.renderElement(n.element,e,n.row.templateData,n.size);let a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=W(n.row.domNode,"dragstart",l=>this.onDragStart(n.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=vb(e.row.domNode);let t=Re(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return G.map(this.disposables.add(new We(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return G.map(this.disposables.add(new We(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return G.filter(G.map(this.disposables.add(new We(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseUp(){return G.map(this.disposables.add(new We(this.domNode,"mouseup")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return G.map(this.disposables.add(new We(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return G.map(this.disposables.add(new We(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return G.map(this.disposables.add(new We(this.domNode,"mousemove")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return G.map(this.disposables.add(new We(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return G.any(G.map(this.disposables.add(new We(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),G.map(this.disposables.add(new We(this.domNode,Ct.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return G.map(this.disposables.add(new We(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return G.map(this.disposables.add(new We(this.rowsContainer,Ct.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:i,sector:r}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;let i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(Po.TEXT,t),n.dataTransfer.setDragImage){let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(i,n)),typeof r>"u"&&(r=String(i.length));let s=De(".monaco-drag-image");s.textContent=r,(d=>{for(;d&&!d.classList.contains("monaco-workbench");)d=d.parentElement;return d||this.domNode.ownerDocument})(this.domNode).appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>s.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new OI(i),Ic.CurrentDragAndDropData=new r1(i),this.dnd.onDragStart?.(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Ic.CurrentDragAndDropData&&Ic.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Ic.CurrentDragAndDropData)this.currentDragData=Ic.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new s1}let t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===0?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=ra(n).filter(r=>r>=-1&&r<this.length).sort((r,s)=>r-s),n=n[0]===-1?[-1]:n;let i=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(TU(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===i)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=i,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(i),this.rowsContainer.classList.add(i),this.currentDragFeedbackDisposable=re(()=>{this.domNode.classList.remove(i),this.rowsContainer.classList.remove(i)});else{if(n.length>1&&i!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");i==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,i="drop-target-before");for(let r of n){let s=this.items[r];s.dropTarget=!0,s.row?.domNode.classList.add(i)}this.currentDragFeedbackDisposable=re(()=>{for(let r of n){let s=this.items[r];s.dropTarget=!1,s.row?.domNode.classList.remove(i)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=db(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Ic.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Ic.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=N.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let t=Xh(this.domNode).top;this.dragOverAnimationDisposable=aL(Re(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=db(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;let n=e.offsetY/this.items[t].size,i=Math.floor(n/.25);return po(i,0,3)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),n=e;for(;(Dn(n)||iL(n))&&n!==this.rowsContainer&&t.contains(n);){let i=n.getAttribute("data-index");if(i){let r=Number(i);if(!isNaN(r))return r}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){let i=this.getRenderRange(e,t),r,s;e===this.elementTop(i.start)?(r=i.start,s=0):i.end-i.start>1&&(r=i.start+1,s=this.elementTop(r)-e);let a=0;for(;;){let l=this.getRenderRange(e,t),d=!1;for(let u=l.start;u<l.end;u++){let p=this.probeDynamicHeight(u);p!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=p,d=d||p!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();let u=Ui.relativeComplement(i,l);for(let h of u)for(let m=h.start;m<h.end;m++)this.items[m].row&&this.removeItemFromDOM(m);let p=Ui.relativeComplement(l,i).reverse();for(let h of p)for(let m=h.end-1;m>=h.start;m--)this.insertItemInDOM(m);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof r=="number"){let h=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(r)-s+h;this.setScrollTop(m,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){let t=this.items[e];if(this.virtualDelegate.getDynamicHeight){let s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){let a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;let n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!ho(t.row.domNode,Re(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;let{row:i}=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);let r=this.renderers.get(t.templateId);if(!r)throw new ut("Missing renderer for templateId: "+t.templateId);return r.renderElement(t.element,e,i.templateData,void 0),t.size=i.domNode.offsetHeight,r.disposeElement?.(t.element,e,i.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,i.domNode.remove(),this.cache.release(i),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(let e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};k([ie],Mo.prototype,"onMouseClick",1),k([ie],Mo.prototype,"onMouseDblClick",1),k([ie],Mo.prototype,"onMouseMiddleClick",1),k([ie],Mo.prototype,"onMouseUp",1),k([ie],Mo.prototype,"onMouseDown",1),k([ie],Mo.prototype,"onMouseOver",1),k([ie],Mo.prototype,"onMouseMove",1),k([ie],Mo.prototype,"onMouseOut",1),k([ie],Mo.prototype,"onContextMenu",1),k([ie],Mo.prototype,"onTouchStart",1),k([ie],Mo.prototype,"onTap",1);var PI=Mo;var qs=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}};var l1=class{constructor(e){this.trait=e}renderedElements=[];get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){let i=this.renderedElements.findIndex(r=>r.templateData===n);if(i>=0){let r=this.renderedElements[i];this.trait.unrender(n),r.index=t}else{let r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){let i=[];for(let r of this.renderedElements)r.index<e?i.push(r):r.index>=e+t&&i.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=i}renderIndexes(e){for(let{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){let t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}},Fp=class{constructor(e){this._trait=e}indexes=[];sortedIndexes=[];_onChange=new x;onChange=this._onChange.event;get name(){return this._trait}get renderer(){return new l1(this)}splice(e,t,n){let i=n.length-t,r=e+t,s=[],a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)s.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&s.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)s.push(this.sortedIndexes[a++]+i);this.renderer.splice(e,t,n.length),this._set(s,s)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(cM),t)}_set(e,t,n){let i=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let s=h1(r,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return o_(this.sortedIndexes,e,cM)>=0}dispose(){Bt(this._onChange)}};k([ie],Fp.prototype,"renderer",1);var d1=class extends Fp{constructor(t){super("selected");this.setAriaSelected=t}renderIndex(t,n){super.renderIndex(t,n),this.setAriaSelected&&(this.contains(t)?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false"))}},Bg=class{constructor(e,t,n){this.trait=e;this.view=t;this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));let i=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(i.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));let r=new Set(i),s=n.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,s)}};function uM(o,e){return o.classList.contains(e)?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:uM(o.parentElement,e)}function Fg(o){return uM(o,"monaco-editor")}var MI=class{constructor(e,t,n){this.list=e;this.view=t;this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(i=>{switch(i.keyCode){case 3:return this.onEnter(i);case 16:return this.onUpArrow(i);case 18:return this.onDownArrow(i);case 11:return this.onPageUpArrow(i);case 12:return this.onPageDownArrow(i);case 9:return this.onEscape(i);case 31:this.multipleSelectionSupport&&(Fe?i.metaKey:i.ctrlKey)&&this.onCtrlA(i)}}))}disposables=new Y;multipleSelectionDisposables=new Y;multipleSelectionSupport;get onKeyDown(){return G.chain(this.disposables.add(new We(this.view.domNode,"keydown")).event,e=>e.filter(t=>!Ss(t.target)).map(t=>new pt(t)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(mi(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};k([ie],MI.prototype,"onKeyDown",1);var _U=new class{mightProducePrintableCharacter(o){return o.ctrlKey||o.metaKey||o.altKey?!1:o.keyCode>=31&&o.keyCode<=56||o.keyCode>=21&&o.keyCode<=30||o.keyCode>=98&&o.keyCode<=107||o.keyCode>=85&&o.keyCode<=95}},c1=class{constructor(e,t,n,i,r){this.list=e;this.view=t;this.keyboardNavigationLabelProvider=n;this.keyboardNavigationEventFilter=i;this.delegate=r;this.updateOptions(e.options)}enabled=!1;state=0;mode=0;triggered=!1;previouslyFocused=-1;enabledDisposables=new Y;disposables=new Y;updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??0}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1,t=G.chain(this.enabledDisposables.add(new We(this.view.domNode,"keydown")).event,r=>r.filter(s=>!Ss(s.target)).filter(()=>this.mode===0||this.triggered).map(s=>new pt(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>Ae.stop(s,!0)).map(s=>s.browserEvent.key)),n=G.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);G.reduce(G.any(t,n),(r,s)=>s===null?null:(r||"")+s,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){let t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?yp(t):t&&yp(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=0,this.triggered=!1;return}let t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===0?1:0;this.state=1;for(let r=0;r<this.list.length;r++){let s=(n+r+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(hu(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}let d=bL(e,l);if(d&&d[0].end-d[0].start>1&&d.length===1){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}else if(typeof l>"u"||hu(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},u1=class{constructor(e,t){this.list=e;this.view=t;let n=G.chain(this.disposables.add(new We(t.domNode,"keydown")).event,r=>r.filter(s=>!Ss(s.target)).map(s=>new pt(s)));G.chain(n,r=>r.filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey))(this.onTab,this,this.disposables)}disposables=new Y;onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let n=this.view.domElement(t[0]);if(!n)return;let i=n.querySelector("[tabIndex]");if(!i||!Dn(i)||i.tabIndex===-1)return;let r=Re(i).getComputedStyle(i);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}};function LU(o){return Fe?o.browserEvent.metaKey:o.browserEvent.ctrlKey}function RU(o){return o.browserEvent.shiftKey}function AU(o){return Eb(o)&&o.button===2}var dM={isSelectionSingleChangeEvent:LU,isSelectionRangeChangeEvent:RU},NI=class{constructor(e){this.list=e;e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||dM),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(tn.addTarget(e.getHTMLElement()))),G.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}multipleSelectionController;mouseSupport;disposables=new Y;_onPointer=new x;onPointer=this._onPointer.event;updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||dM))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Fg(e.browserEvent.target)||Go()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Ss(e.browserEvent.target)||Fg(e.browserEvent.target))return;let t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Ss(e.browserEvent.target)||Fg(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),AU(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Ss(e.browserEvent.target)||Fg(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));let i=Math.min(n,t),r=Math.max(n,t),s=mi(i,r+1),a=this.list.getSelection(),l=PU(h1(a,[n]),n);if(l.length===0)return;let d=h1(s,MU(a,l));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let i=this.list.getSelection(),r=i.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}},p1=class{constructor(e,t){this.styleElement=e;this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);let i=$o(e.listFocusAndSelectionOutline,$o(e.listSelectionOutline,e.listFocusOutline??""));i&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${i}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);let r=$o(e.listSelectionOutline,e.listInactiveFocusOutline??"");r&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}},pM={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:A.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:A.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:A.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},OU={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function PU(o,e){let t=o.indexOf(e);if(t===-1)return[];let n=[],i=t-1;for(;i>=0&&o[i]===e-(t-i);)n.push(o[i--]);for(n.reverse(),i=t;i<o.length&&o[i]===e+(i-t);)n.push(o[i++]);return n}function h1(o,e){let t=[],n=0,i=0;for(;n<o.length||i<e.length;)if(n>=o.length)t.push(e[i++]);else if(i>=e.length)t.push(o[n++]);else if(o[n]===e[i]){t.push(o[n]),n++,i++;continue}else o[n]<e[i]?t.push(o[n++]):t.push(e[i++]);return t}function MU(o,e){let t=[],n=0,i=0;for(;n<o.length||i<e.length;)if(n>=o.length)t.push(e[i++]);else if(i>=e.length)t.push(o[n++]);else if(o[n]===e[i]){n++,i++;continue}else o[n]<e[i]?t.push(o[n++]):i++;return t}var cM=(o,e)=>o-e,m1=class{constructor(e,t){this._templateId=e;this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let r=0;for(let s of this.renderers)s.renderElement(e,t,n[r++],i)}disposeElement(e,t,n,i){let r=0;for(let s of this.renderers)s.disposeElement?.(e,t,n[r],i),r+=1}disposeTemplate(e){let t=0;for(let n of this.renderers)n.disposeTemplate(e[t++])}},g1=class{constructor(e){this.accessibilityProvider=e}templateId="a18n";renderTemplate(e){return{container:e,disposables:new Y}}renderElement(e,t,n){let i=this.accessibilityProvider.getAriaLabel(e),r=i&&typeof i!="string"?i:Bf(i);n.disposables.add(ll(a=>{this.setAriaLabel(a.readObservable(r),n.container)}));let s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.container.setAttribute("aria-level",`${s}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,i){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}},f1=class{constructor(e,t){this.list=e;this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,i,r){return this.dnd.onDragOver(e,t,n,i,r)}onDragLeave(e,t,n,i){this.dnd.onDragLeave?.(e,t,n,i)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,i,r){this.dnd.drop(e,t,n,i,r)}dispose(){this.dnd.dispose()}},er=class{constructor(e,t,n,i,r=OU){this.user=e;this._options=r;let s=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new d1(s!=="listbox");let a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new g1(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(d=>new m1(d.templateId,[...a,d]));let l={...r,dnd:r.dnd&&new f1(this,r.dnd)};if(this.view=this.createListView(t,n,i,l),this.view.domNode.setAttribute("role",s),r.styleController)this.styleController=r.styleController(this.view.domId);else{let d=lr(this.view.domNode);this.styleController=new p1(d,this.view.domId)}if(this.spliceable=new _I([new Bg(this.focus,this.view,r.identityProvider),new Bg(this.selection,this.view,r.identityProvider),new Bg(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new u1(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new MI(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){let d=r.keyboardNavigationDelegate||_U;this.typeNavigationController=new c1(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),d),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}focus=new Fp("focused");selection;anchor=new Fp("anchor");eventBufferer=new Zc;view;spliceable;styleController;typeNavigationController;accessibilityProvider;keyboardController;mouseController;_ariaLabel="";disposables=new Y;get onDidChangeFocus(){return G.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return G.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=G.chain(this.disposables.add(new We(this.view.domNode,"keydown")).event,r=>r.map(s=>new pt(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Ae.stop(s,!0)).filter(()=>!1)),n=G.chain(this.disposables.add(new We(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(s=>new pt(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Ae.stop(s,!0)).map(({browserEvent:s})=>{let a=this.getFocus(),l=a.length?a[0]:void 0,d=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:d,anchor:u,browserEvent:s}})),i=G.chain(this.view.onContextMenu,r=>r.filter(s=>!e).map(({element:s,index:a,browserEvent:l})=>({element:s,index:a,anchor:new Tn(Re(this.view.domNode),l),browserEvent:l})));return G.any(t,n,i)}get onKeyDown(){return this.disposables.add(new We(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new We(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new We(this.view.domNode,"keypress")).event}get onDidFocus(){return G.signal(this.disposables.add(new We(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return G.signal(this.disposables.add(new We(this.view.domNode,"blur",!0)).event)}_onDidDispose=new x;onDidDispose=this._onDidDispose.event;createListView(e,t,n,i){return new PI(e,t,n,i)}createMouseController(e){return new NI(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new qs(this.user,`Invalid start index: ${e}`);if(t<0)throw new qs(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(let n of e)if(n<0||n>=this.length)throw new qs(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new qs(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){let e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(let n of e)if(n<0||n>=this.length)throw new qs(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;let r=this.focus.get(),s=this.findNextIndex(r.length>0?r[0]+e:0,t,i);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;let r=this.focus.get(),s=this.findPreviousIndex(r.length>0?r[0]-e:0,t,i);s>-1&&this.setFocus([s],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;let i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){let r=this.findPreviousIndex(n,!1,t);r>-1&&i!==r?this.setFocus([r],e):this.setFocus([n],e)}else{let r=this.view.getScrollTop(),s=r+this.view.renderHeight;n>i&&(s-=this.view.elementHeight(n)),this.view.setScrollTop(s),this.view.getScrollTop()!==r&&(this.setFocus([]),await $i(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let i,r=n(),s=this.view.getScrollTop()+r;s===0?i=this.view.indexAt(s):i=this.view.indexAfter(s-1);let a=this.getFocus()[0];if(a!==i&&(a===void 0||a>=i)){let l=this.findNextIndex(i,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([i],e)}else{let l=s;this.view.setScrollTop(s-this.view.renderHeight-r),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await $i(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;let n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;let i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new qs(this.user,`Invalid index ${e}`);let i=this.view.getScrollTop(),r=this.view.elementTop(e),s=this.view.elementHeight(e);if(Li(t)){let a=s-this.view.renderHeight+n;this.view.setScrollTop(a*po(t,0,1)+r-n)}else{let a=r+s,l=i+this.view.renderHeight;r<i+n&&a>=l||(r<i+n||a>=l&&s>=this.view.renderHeight?this.view.setScrollTop(r-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new qs(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),i=this.view.elementTop(e),r=this.view.elementHeight(e);if(i<n+t||i+r>n+this.view.renderHeight)return null;let s=r-this.view.renderHeight+t;return Math.abs((n+t-i)/s)}isDOMFocused(){return ar(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){let e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};k([ie],er.prototype,"onDidChangeFocus",1),k([ie],er.prototype,"onDidChangeSelection",1),k([ie],er.prototype,"onContextMenu",1),k([ie],er.prototype,"onKeyDown",1),k([ie],er.prototype,"onKeyUp",1),k([ie],er.prototype,"onKeyPress",1),k([ie],er.prototype,"onDidFocus",1),k([ie],er.prototype,"onDidBlur",1);var NU=new RegExp(`(\\\\)?\\$\\((${je.iconNameExpression}(?:${je.iconModifierExpression})?)\\)`,"g");function Ba(o){let e=new Array,t,n=0,i=0;for(;(t=NU.exec(o))!==null;){i=t.index||0,n<i&&e.push(o.substring(n,i)),n=(t.index||0)+t[0].length;let[,r,s]=t;e.push(r?`$(${s})`:FI({id:s}))}return n<o.length&&e.push(o.substring(n)),e}function FI(o){let e=De("span");return e.classList.add(...je.asClassNameArray(o)),e}var b1=class{_prefix;_lastId;constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},v1=new b1("id#");var li={};(function(){function o(e,t){t(li)}o.amd=!0,function(e,t){typeof o=="function"&&o.amd?o(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){"use strict";function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function n(Ne){e.defaults=Ne}let i=/[&<>"']/,r=new RegExp(i.source,"g"),s=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(s.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d=Ne=>l[Ne];function u(Ne,S){if(S){if(i.test(Ne))return Ne.replace(r,d)}else if(s.test(Ne))return Ne.replace(a,d);return Ne}let p=/(^|[^\[])\^/g;function h(Ne,S){let E=typeof Ne=="string"?Ne:Ne.source;S=S||"";let T={replace:(L,O)=>{let q=typeof O=="string"?O:O.source;return q=q.replace(p,"$1"),E=E.replace(L,q),T},getRegex:()=>new RegExp(E,S)};return T}function m(Ne){try{Ne=encodeURI(Ne).replace(/%25/g,"%")}catch{return null}return Ne}let g={exec:()=>null};function f(Ne,S){let E=Ne.replace(/\|/g,(O,q,X)=>{let ye=!1,Ce=q;for(;--Ce>=0&&X[Ce]==="\\";)ye=!ye;return ye?"|":" |"}),T=E.split(/ \|/),L=0;if(T[0].trim()||T.shift(),T.length>0&&!T[T.length-1].trim()&&T.pop(),S)if(T.length>S)T.splice(S);else for(;T.length<S;)T.push("");for(;L<T.length;L++)T[L]=T[L].trim().replace(/\\\|/g,"|");return T}function y(Ne,S,E){let T=Ne.length;if(T===0)return"";let L=0;for(;L<T;){let O=Ne.charAt(T-L-1);if(O===S&&!E)L++;else if(O!==S&&E)L++;else break}return Ne.slice(0,T-L)}function C(Ne,S){if(Ne.indexOf(S[1])===-1)return-1;let E=0;for(let T=0;T<Ne.length;T++)if(Ne[T]==="\\")T++;else if(Ne[T]===S[0])E++;else if(Ne[T]===S[1]&&(E--,E<0))return T;return-1}function w(Ne,S,E,T){let L=S.href,O=S.title?u(S.title):null,q=Ne[1].replace(/\\([\[\]])/g,"$1");if(Ne[0].charAt(0)!=="!"){T.state.inLink=!0;let X={type:"link",raw:E,href:L,title:O,text:q,tokens:T.inlineTokens(q)};return T.state.inLink=!1,X}return{type:"image",raw:E,href:L,title:O,text:u(q)}}function R(Ne,S){let E=Ne.match(/^(\s+)(?:```)/);if(E===null)return S;let T=E[1];return S.split(`
`).map(L=>{let O=L.match(/^\s+/);if(O===null)return L;let[q]=O;return q.length>=T.length?L.slice(T.length):L}).join(`
`)}class _{options;rules;lexer;constructor(S){this.options=S||e.defaults}space(S){let E=this.rules.block.newline.exec(S);if(E&&E[0].length>0)return{type:"space",raw:E[0]}}code(S){let E=this.rules.block.code.exec(S);if(E){let T=E[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:E[0],codeBlockStyle:"indented",text:this.options.pedantic?T:y(T,`
`)}}}fences(S){let E=this.rules.block.fences.exec(S);if(E){let T=E[0],L=R(T,E[3]||"");return{type:"code",raw:T,lang:E[2]?E[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):E[2],text:L}}}heading(S){let E=this.rules.block.heading.exec(S);if(E){let T=E[2].trim();if(/#$/.test(T)){let L=y(T,"#");(this.options.pedantic||!L||/ $/.test(L))&&(T=L.trim())}return{type:"heading",raw:E[0],depth:E[1].length,text:T,tokens:this.lexer.inline(T)}}}hr(S){let E=this.rules.block.hr.exec(S);if(E)return{type:"hr",raw:y(E[0],`
`)}}blockquote(S){let E=this.rules.block.blockquote.exec(S);if(E){let T=y(E[0],`
`).split(`
`),L="",O="",q=[];for(;T.length>0;){let X=!1,ye=[],Ce;for(Ce=0;Ce<T.length;Ce++)if(/^ {0,3}>/.test(T[Ce]))ye.push(T[Ce]),X=!0;else if(!X)ye.push(T[Ce]);else break;T=T.slice(Ce);let Qe=ye.join(`
`),wt=Qe.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");L=L?`${L}
${Qe}`:Qe,O=O?`${O}
${wt}`:wt;let Zt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(wt,q,!0),this.lexer.state.top=Zt,T.length===0)break;let En=q[q.length-1];if(En?.type==="code")break;if(En?.type==="blockquote"){let rn=En,_e=rn.raw+`
`+T.join(`
`),M=this.blockquote(_e);q[q.length-1]=M,L=L.substring(0,L.length-rn.raw.length)+M.raw,O=O.substring(0,O.length-rn.text.length)+M.text;break}else if(En?.type==="list"){let rn=En,_e=rn.raw+`
`+T.join(`
`),M=this.list(_e);q[q.length-1]=M,L=L.substring(0,L.length-En.raw.length)+M.raw,O=O.substring(0,O.length-rn.raw.length)+M.raw,T=_e.substring(q[q.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:L,tokens:q,text:O}}}list(S){let E=this.rules.block.list.exec(S);if(E){let T=E[1].trim(),L=T.length>1,O={type:"list",raw:"",ordered:L,start:L?+T.slice(0,-1):"",loose:!1,items:[]};T=L?`\\d{1,9}\\${T.slice(-1)}`:`\\${T}`,this.options.pedantic&&(T=L?T:"[*+-]");let q=new RegExp(`^( {0,3}${T})((?:[	 ][^\\n]*)?(?:\\n|$))`),X=!1;for(;S;){let ye=!1,Ce="",Qe="";if(!(E=q.exec(S))||this.rules.block.hr.test(S))break;Ce=E[0],S=S.substring(Ce.length);let wt=E[2].split(`
`,1)[0].replace(/^\t+/,he=>" ".repeat(3*he.length)),Zt=S.split(`
`,1)[0],En=!wt.trim(),rn=0;if(this.options.pedantic?(rn=2,Qe=wt.trimStart()):En?rn=E[1].length+1:(rn=E[2].search(/[^ ]/),rn=rn>4?1:rn,Qe=wt.slice(rn),rn+=E[1].length),En&&/^ *$/.test(Zt)&&(Ce+=Zt+`
`,S=S.substring(Zt.length+1),ye=!0),!ye){let he=new RegExp(`^ {0,${Math.min(3,rn-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Te=new RegExp(`^ {0,${Math.min(3,rn-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Ht=new RegExp(`^ {0,${Math.min(3,rn-1)}}(?:\`\`\`|~~~)`),Rn=new RegExp(`^ {0,${Math.min(3,rn-1)}}#`);for(;S;){let Ki=S.split(`
`,1)[0];if(Zt=Ki,this.options.pedantic&&(Zt=Zt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Ht.test(Zt)||Rn.test(Zt)||he.test(Zt)||Te.test(S))break;if(Zt.search(/[^ ]/)>=rn||!Zt.trim())Qe+=`
`+Zt.slice(rn);else{if(En||wt.search(/[^ ]/)>=4||Ht.test(wt)||Rn.test(wt)||Te.test(wt))break;Qe+=`
`+Zt}!En&&!Zt.trim()&&(En=!0),Ce+=Ki+`
`,S=S.substring(Ki.length+1),wt=Zt.slice(rn)}}O.loose||(X?O.loose=!0:/\n *\n *$/.test(Ce)&&(X=!0));let _e=null,M;this.options.gfm&&(_e=/^\[[ xX]\] /.exec(Qe),_e&&(M=_e[0]!=="[ ] ",Qe=Qe.replace(/^\[[ xX]\] +/,""))),O.items.push({type:"list_item",raw:Ce,task:!!_e,checked:M,loose:!1,text:Qe,tokens:[]}),O.raw+=Ce}O.items[O.items.length-1].raw=O.items[O.items.length-1].raw.trimEnd(),O.items[O.items.length-1].text=O.items[O.items.length-1].text.trimEnd(),O.raw=O.raw.trimEnd();for(let ye=0;ye<O.items.length;ye++)if(this.lexer.state.top=!1,O.items[ye].tokens=this.lexer.blockTokens(O.items[ye].text,[]),!O.loose){let Ce=O.items[ye].tokens.filter(wt=>wt.type==="space"),Qe=Ce.length>0&&Ce.some(wt=>/\n.*\n/.test(wt.raw));O.loose=Qe}if(O.loose)for(let ye=0;ye<O.items.length;ye++)O.items[ye].loose=!0;return O}}html(S){let E=this.rules.block.html.exec(S);if(E)return{type:"html",block:!0,raw:E[0],pre:E[1]==="pre"||E[1]==="script"||E[1]==="style",text:E[0]}}def(S){let E=this.rules.block.def.exec(S);if(E){let T=E[1].toLowerCase().replace(/\s+/g," "),L=E[2]?E[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",O=E[3]?E[3].substring(1,E[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):E[3];return{type:"def",tag:T,raw:E[0],href:L,title:O}}}table(S){let E=this.rules.block.table.exec(S);if(!E||!/[:|]/.test(E[2]))return;let T=f(E[1]),L=E[2].replace(/^\||\| *$/g,"").split("|"),O=E[3]&&E[3].trim()?E[3].replace(/\n[ \t]*$/,"").split(`
`):[],q={type:"table",raw:E[0],header:[],align:[],rows:[]};if(T.length===L.length){for(let X of L)/^ *-+: *$/.test(X)?q.align.push("right"):/^ *:-+: *$/.test(X)?q.align.push("center"):/^ *:-+ *$/.test(X)?q.align.push("left"):q.align.push(null);for(let X=0;X<T.length;X++)q.header.push({text:T[X],tokens:this.lexer.inline(T[X]),header:!0,align:q.align[X]});for(let X of O)q.rows.push(f(X,q.header.length).map((ye,Ce)=>({text:ye,tokens:this.lexer.inline(ye),header:!1,align:q.align[Ce]})));return q}}lheading(S){let E=this.rules.block.lheading.exec(S);if(E)return{type:"heading",raw:E[0],depth:E[2].charAt(0)==="="?1:2,text:E[1],tokens:this.lexer.inline(E[1])}}paragraph(S){let E=this.rules.block.paragraph.exec(S);if(E){let T=E[1].charAt(E[1].length-1)===`
`?E[1].slice(0,-1):E[1];return{type:"paragraph",raw:E[0],text:T,tokens:this.lexer.inline(T)}}}text(S){let E=this.rules.block.text.exec(S);if(E)return{type:"text",raw:E[0],text:E[0],tokens:this.lexer.inline(E[0])}}escape(S){let E=this.rules.inline.escape.exec(S);if(E)return{type:"escape",raw:E[0],text:u(E[1])}}tag(S){let E=this.rules.inline.tag.exec(S);if(E)return!this.lexer.state.inLink&&/^<a /i.test(E[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(E[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(E[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(E[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:E[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:E[0]}}link(S){let E=this.rules.inline.link.exec(S);if(E){let T=E[2].trim();if(!this.options.pedantic&&/^</.test(T)){if(!/>$/.test(T))return;let q=y(T.slice(0,-1),"\\");if((T.length-q.length)%2===0)return}else{let q=C(E[2],"()");if(q>-1){let ye=(E[0].indexOf("!")===0?5:4)+E[1].length+q;E[2]=E[2].substring(0,q),E[0]=E[0].substring(0,ye).trim(),E[3]=""}}let L=E[2],O="";if(this.options.pedantic){let q=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(L);q&&(L=q[1],O=q[3])}else O=E[3]?E[3].slice(1,-1):"";return L=L.trim(),/^</.test(L)&&(this.options.pedantic&&!/>$/.test(T)?L=L.slice(1):L=L.slice(1,-1)),w(E,{href:L&&L.replace(this.rules.inline.anyPunctuation,"$1"),title:O&&O.replace(this.rules.inline.anyPunctuation,"$1")},E[0],this.lexer)}}reflink(S,E){let T;if((T=this.rules.inline.reflink.exec(S))||(T=this.rules.inline.nolink.exec(S))){let L=(T[2]||T[1]).replace(/\s+/g," "),O=E[L.toLowerCase()];if(!O){let q=T[0].charAt(0);return{type:"text",raw:q,text:q}}return w(T,O,T[0],this.lexer)}}emStrong(S,E,T=""){let L=this.rules.inline.emStrongLDelim.exec(S);if(!L||L[3]&&T.match(/[\p{L}\p{N}]/u))return;if(!(L[1]||L[2]||"")||!T||this.rules.inline.punctuation.exec(T)){let q=[...L[0]].length-1,X,ye,Ce=q,Qe=0,wt=L[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(wt.lastIndex=0,E=E.slice(-1*S.length+q);(L=wt.exec(E))!=null;){if(X=L[1]||L[2]||L[3]||L[4]||L[5]||L[6],!X)continue;if(ye=[...X].length,L[3]||L[4]){Ce+=ye;continue}else if((L[5]||L[6])&&q%3&&!((q+ye)%3)){Qe+=ye;continue}if(Ce-=ye,Ce>0)continue;ye=Math.min(ye,ye+Ce+Qe);let Zt=[...L[0]][0].length,En=S.slice(0,q+L.index+Zt+ye);if(Math.min(q,ye)%2){let _e=En.slice(1,-1);return{type:"em",raw:En,text:_e,tokens:this.lexer.inlineTokens(_e)}}let rn=En.slice(2,-2);return{type:"strong",raw:En,text:rn,tokens:this.lexer.inlineTokens(rn)}}}}codespan(S){let E=this.rules.inline.code.exec(S);if(E){let T=E[2].replace(/\n/g," "),L=/[^ ]/.test(T),O=/^ /.test(T)&&/ $/.test(T);return L&&O&&(T=T.substring(1,T.length-1)),T=u(T,!0),{type:"codespan",raw:E[0],text:T}}}br(S){let E=this.rules.inline.br.exec(S);if(E)return{type:"br",raw:E[0]}}del(S){let E=this.rules.inline.del.exec(S);if(E)return{type:"del",raw:E[0],text:E[2],tokens:this.lexer.inlineTokens(E[2])}}autolink(S){let E=this.rules.inline.autolink.exec(S);if(E){let T,L;return E[2]==="@"?(T=u(E[1]),L="mailto:"+T):(T=u(E[1]),L=T),{type:"link",raw:E[0],text:T,href:L,tokens:[{type:"text",raw:T,text:T}]}}}url(S){let E;if(E=this.rules.inline.url.exec(S)){let T,L;if(E[2]==="@")T=u(E[0]),L="mailto:"+T;else{let O;do O=E[0],E[0]=this.rules.inline._backpedal.exec(E[0])?.[0]??"";while(O!==E[0]);T=u(E[0]),E[1]==="www."?L="http://"+E[0]:L=E[0]}return{type:"link",raw:E[0],text:T,href:L,tokens:[{type:"text",raw:T,text:T}]}}}inlineText(S){let E=this.rules.inline.text.exec(S);if(E){let T;return this.lexer.state.inRawBlock?T=E[0]:T=u(E[0]),{type:"text",raw:E[0],text:T}}}}let B=/^(?: *(?:\n|$))+/,K=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,F=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,V=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,oe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ge=/(?:[*+-]|\d{1,9}[.)])/,we=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ge).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ht=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,tt=/^[^\n]+/,gt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ve=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",gt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),se=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ge).getRegex(),Ie="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",fe=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Se=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",fe).replace("tag",Ie).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),qe=h(ht).replace("hr",V).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ie).getRegex(),_t={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",qe).getRegex(),code:K,def:ve,fences:F,heading:oe,hr:V,html:Se,lheading:we,list:se,newline:B,paragraph:qe,table:g,text:tt},Xe=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",V).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ie).getRegex(),ke={..._t,table:Xe,paragraph:h(ht).replace("hr",V).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Xe).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ie).getRegex()},Zn={..._t,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",fe).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(ht).replace("hr",V).replace("heading",` *#{1,6} *[^
]`).replace("lheading",we).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ln=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,io=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,xo=/^( {2,}|\\)\n(?!\s*$)/,$a=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ui="\\p{P}\\p{S}",xr=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ui).getRegex(),hd=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,ja=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ui).getRegex(),pi=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ui).getRegex(),Ya=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ui).getRegex(),Qa=h(/\\([punct])/,"gu").replace(/punct/g,ui).getRegex(),Vc=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Wc=h(fe).replace("(?:-->|$)","-->").getRegex(),Oe=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Wc).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),na=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Xa=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",na).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ss=h(/^!?\[(label)\]\[(ref)\]/).replace("label",na).replace("ref",gt).getRegex(),ir=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",gt).getRegex(),rh=h("reflink|nolink(?!\\()","g").replace("reflink",ss).replace("nolink",ir).getRegex(),md={_backpedal:g,anyPunctuation:Qa,autolink:Vc,blockSkip:hd,br:xo,code:io,del:g,emStrongLDelim:ja,emStrongRDelimAst:pi,emStrongRDelimUnd:Ya,escape:Ln,link:Xa,nolink:ir,punctuation:xr,reflink:ss,reflinkSearch:rh,tag:Oe,text:$a,url:g},sh={...md,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",na).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",na).getRegex()},as={...md,escape:h(Ln).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ah={...as,br:h(xo).replace("{2,}","*").getRegex(),text:h(as.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ls={normal:_t,gfm:ke,pedantic:Zn},Fo={normal:md,gfm:as,breaks:ah,pedantic:sh};class xn{tokens;options;state;tokenizer;inlineQueue;constructor(S){this.tokens=[],this.tokens.links=Object.create(null),this.options=S||e.defaults,this.options.tokenizer=this.options.tokenizer||new _,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let E={block:ls.normal,inline:Fo.normal};this.options.pedantic?(E.block=ls.pedantic,E.inline=Fo.pedantic):this.options.gfm&&(E.block=ls.gfm,this.options.breaks?E.inline=Fo.breaks:E.inline=Fo.gfm),this.tokenizer.rules=E}static get rules(){return{block:ls,inline:Fo}}static lex(S,E){return new xn(E).lex(S)}static lexInline(S,E){return new xn(E).inlineTokens(S)}lex(S){S=S.replace(/\r\n|\r/g,`
`),this.blockTokens(S,this.tokens);for(let E=0;E<this.inlineQueue.length;E++){let T=this.inlineQueue[E];this.inlineTokens(T.src,T.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(S,E=[],T=!1){this.options.pedantic?S=S.replace(/\t/g,"    ").replace(/^ +$/gm,""):S=S.replace(/^( *)(\t+)/gm,(X,ye,Ce)=>ye+"    ".repeat(Ce.length));let L,O,q;for(;S;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(X=>(L=X.call({lexer:this},S,E))?(S=S.substring(L.raw.length),E.push(L),!0):!1))){if(L=this.tokenizer.space(S)){S=S.substring(L.raw.length),L.raw.length===1&&E.length>0?E[E.length-1].raw+=`
`:E.push(L);continue}if(L=this.tokenizer.code(S)){S=S.substring(L.raw.length),O=E[E.length-1],O&&(O.type==="paragraph"||O.type==="text")?(O.raw+=`
`+L.raw,O.text+=`
`+L.text,this.inlineQueue[this.inlineQueue.length-1].src=O.text):E.push(L);continue}if(L=this.tokenizer.fences(S)){S=S.substring(L.raw.length),E.push(L);continue}if(L=this.tokenizer.heading(S)){S=S.substring(L.raw.length),E.push(L);continue}if(L=this.tokenizer.hr(S)){S=S.substring(L.raw.length),E.push(L);continue}if(L=this.tokenizer.blockquote(S)){S=S.substring(L.raw.length),E.push(L);continue}if(L=this.tokenizer.list(S)){S=S.substring(L.raw.length),E.push(L);continue}if(L=this.tokenizer.html(S)){S=S.substring(L.raw.length),E.push(L);continue}if(L=this.tokenizer.def(S)){S=S.substring(L.raw.length),O=E[E.length-1],O&&(O.type==="paragraph"||O.type==="text")?(O.raw+=`
`+L.raw,O.text+=`
`+L.raw,this.inlineQueue[this.inlineQueue.length-1].src=O.text):this.tokens.links[L.tag]||(this.tokens.links[L.tag]={href:L.href,title:L.title});continue}if(L=this.tokenizer.table(S)){S=S.substring(L.raw.length),E.push(L);continue}if(L=this.tokenizer.lheading(S)){S=S.substring(L.raw.length),E.push(L);continue}if(q=S,this.options.extensions&&this.options.extensions.startBlock){let X=1/0,ye=S.slice(1),Ce;this.options.extensions.startBlock.forEach(Qe=>{Ce=Qe.call({lexer:this},ye),typeof Ce=="number"&&Ce>=0&&(X=Math.min(X,Ce))}),X<1/0&&X>=0&&(q=S.substring(0,X+1))}if(this.state.top&&(L=this.tokenizer.paragraph(q))){O=E[E.length-1],T&&O?.type==="paragraph"?(O.raw+=`
`+L.raw,O.text+=`
`+L.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=O.text):E.push(L),T=q.length!==S.length,S=S.substring(L.raw.length);continue}if(L=this.tokenizer.text(S)){S=S.substring(L.raw.length),O=E[E.length-1],O&&O.type==="text"?(O.raw+=`
`+L.raw,O.text+=`
`+L.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=O.text):E.push(L);continue}if(S){let X="Infinite loop on byte: "+S.charCodeAt(0);if(this.options.silent){console.error(X);break}else throw new Error(X)}}return this.state.top=!0,E}inline(S,E=[]){return this.inlineQueue.push({src:S,tokens:E}),E}inlineTokens(S,E=[]){let T,L,O,q=S,X,ye,Ce;if(this.tokens.links){let Qe=Object.keys(this.tokens.links);if(Qe.length>0)for(;(X=this.tokenizer.rules.inline.reflinkSearch.exec(q))!=null;)Qe.includes(X[0].slice(X[0].lastIndexOf("[")+1,-1))&&(q=q.slice(0,X.index)+"["+"a".repeat(X[0].length-2)+"]"+q.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(X=this.tokenizer.rules.inline.blockSkip.exec(q))!=null;)q=q.slice(0,X.index)+"["+"a".repeat(X[0].length-2)+"]"+q.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(X=this.tokenizer.rules.inline.anyPunctuation.exec(q))!=null;)q=q.slice(0,X.index)+"++"+q.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;S;)if(ye||(Ce=""),ye=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Qe=>(T=Qe.call({lexer:this},S,E))?(S=S.substring(T.raw.length),E.push(T),!0):!1))){if(T=this.tokenizer.escape(S)){S=S.substring(T.raw.length),E.push(T);continue}if(T=this.tokenizer.tag(S)){S=S.substring(T.raw.length),L=E[E.length-1],L&&T.type==="text"&&L.type==="text"?(L.raw+=T.raw,L.text+=T.text):E.push(T);continue}if(T=this.tokenizer.link(S)){S=S.substring(T.raw.length),E.push(T);continue}if(T=this.tokenizer.reflink(S,this.tokens.links)){S=S.substring(T.raw.length),L=E[E.length-1],L&&T.type==="text"&&L.type==="text"?(L.raw+=T.raw,L.text+=T.text):E.push(T);continue}if(T=this.tokenizer.emStrong(S,q,Ce)){S=S.substring(T.raw.length),E.push(T);continue}if(T=this.tokenizer.codespan(S)){S=S.substring(T.raw.length),E.push(T);continue}if(T=this.tokenizer.br(S)){S=S.substring(T.raw.length),E.push(T);continue}if(T=this.tokenizer.del(S)){S=S.substring(T.raw.length),E.push(T);continue}if(T=this.tokenizer.autolink(S)){S=S.substring(T.raw.length),E.push(T);continue}if(!this.state.inLink&&(T=this.tokenizer.url(S))){S=S.substring(T.raw.length),E.push(T);continue}if(O=S,this.options.extensions&&this.options.extensions.startInline){let Qe=1/0,wt=S.slice(1),Zt;this.options.extensions.startInline.forEach(En=>{Zt=En.call({lexer:this},wt),typeof Zt=="number"&&Zt>=0&&(Qe=Math.min(Qe,Zt))}),Qe<1/0&&Qe>=0&&(O=S.substring(0,Qe+1))}if(T=this.tokenizer.inlineText(O)){S=S.substring(T.raw.length),T.raw.slice(-1)!=="_"&&(Ce=T.raw.slice(-1)),ye=!0,L=E[E.length-1],L&&L.type==="text"?(L.raw+=T.raw,L.text+=T.text):E.push(T);continue}if(S){let Qe="Infinite loop on byte: "+S.charCodeAt(0);if(this.options.silent){console.error(Qe);break}else throw new Error(Qe)}}return E}}class Bo{options;parser;constructor(S){this.options=S||e.defaults}space(S){return""}code({text:S,lang:E,escaped:T}){let L=(E||"").match(/^\S*/)?.[0],O=S.replace(/\n$/,"")+`
`;return L?'<pre><code class="language-'+u(L)+'">'+(T?O:u(O,!0))+`</code></pre>
`:"<pre><code>"+(T?O:u(O,!0))+`</code></pre>
`}blockquote({tokens:S}){return`<blockquote>
${this.parser.parse(S)}</blockquote>
`}html({text:S}){return S}heading({tokens:S,depth:E}){return`<h${E}>${this.parser.parseInline(S)}</h${E}>
`}hr(S){return`<hr>
`}list(S){let E=S.ordered,T=S.start,L="";for(let X=0;X<S.items.length;X++){let ye=S.items[X];L+=this.listitem(ye)}let O=E?"ol":"ul",q=E&&T!==1?' start="'+T+'"':"";return"<"+O+q+`>
`+L+"</"+O+`>
`}listitem(S){let E="";if(S.task){let T=this.checkbox({checked:!!S.checked});S.loose?S.tokens.length>0&&S.tokens[0].type==="paragraph"?(S.tokens[0].text=T+" "+S.tokens[0].text,S.tokens[0].tokens&&S.tokens[0].tokens.length>0&&S.tokens[0].tokens[0].type==="text"&&(S.tokens[0].tokens[0].text=T+" "+S.tokens[0].tokens[0].text)):S.tokens.unshift({type:"text",raw:T+" ",text:T+" "}):E+=T+" "}return E+=this.parser.parse(S.tokens,!!S.loose),`<li>${E}</li>
`}checkbox({checked:S}){return"<input "+(S?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:S}){return`<p>${this.parser.parseInline(S)}</p>
`}table(S){let E="",T="";for(let O=0;O<S.header.length;O++)T+=this.tablecell(S.header[O]);E+=this.tablerow({text:T});let L="";for(let O=0;O<S.rows.length;O++){let q=S.rows[O];T="";for(let X=0;X<q.length;X++)T+=this.tablecell(q[X]);L+=this.tablerow({text:T})}return L&&(L=`<tbody>${L}</tbody>`),`<table>
<thead>
`+E+`</thead>
`+L+`</table>
`}tablerow({text:S}){return`<tr>
${S}</tr>
`}tablecell(S){let E=this.parser.parseInline(S.tokens),T=S.header?"th":"td";return(S.align?`<${T} align="${S.align}">`:`<${T}>`)+E+`</${T}>
`}strong({tokens:S}){return`<strong>${this.parser.parseInline(S)}</strong>`}em({tokens:S}){return`<em>${this.parser.parseInline(S)}</em>`}codespan({text:S}){return`<code>${S}</code>`}br(S){return"<br>"}del({tokens:S}){return`<del>${this.parser.parseInline(S)}</del>`}link({href:S,title:E,tokens:T}){let L=this.parser.parseInline(T),O=m(S);if(O===null)return L;S=O;let q='<a href="'+S+'"';return E&&(q+=' title="'+E+'"'),q+=">"+L+"</a>",q}image({href:S,title:E,text:T}){let L=m(S);if(L===null)return T;S=L;let O=`<img src="${S}" alt="${T}"`;return E&&(O+=` title="${E}"`),O+=">",O}text(S){return"tokens"in S&&S.tokens?this.parser.parseInline(S.tokens):S.text}}class ia{strong({text:S}){return S}em({text:S}){return S}codespan({text:S}){return S}del({text:S}){return S}html({text:S}){return S}text({text:S}){return S}link({text:S}){return""+S}image({text:S}){return""+S}br(){return""}}class Hi{options;renderer;textRenderer;constructor(S){this.options=S||e.defaults,this.options.renderer=this.options.renderer||new Bo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ia}static parse(S,E){return new Hi(E).parse(S)}static parseInline(S,E){return new Hi(E).parseInline(S)}parse(S,E=!0){let T="";for(let L=0;L<S.length;L++){let O=S[L];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[O.type]){let X=O,ye=this.options.extensions.renderers[X.type].call({parser:this},X);if(ye!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(X.type)){T+=ye||"";continue}}let q=O;switch(q.type){case"space":{T+=this.renderer.space(q);continue}case"hr":{T+=this.renderer.hr(q);continue}case"heading":{T+=this.renderer.heading(q);continue}case"code":{T+=this.renderer.code(q);continue}case"table":{T+=this.renderer.table(q);continue}case"blockquote":{T+=this.renderer.blockquote(q);continue}case"list":{T+=this.renderer.list(q);continue}case"html":{T+=this.renderer.html(q);continue}case"paragraph":{T+=this.renderer.paragraph(q);continue}case"text":{let X=q,ye=this.renderer.text(X);for(;L+1<S.length&&S[L+1].type==="text";)X=S[++L],ye+=`
`+this.renderer.text(X);E?T+=this.renderer.paragraph({type:"paragraph",raw:ye,text:ye,tokens:[{type:"text",raw:ye,text:ye}]}):T+=ye;continue}default:{let X='Token with "'+q.type+'" type was not found.';if(this.options.silent)return console.error(X),"";throw new Error(X)}}}return T}parseInline(S,E){E=E||this.renderer;let T="";for(let L=0;L<S.length;L++){let O=S[L];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[O.type]){let X=this.options.extensions.renderers[O.type].call({parser:this},O);if(X!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(O.type)){T+=X||"";continue}}let q=O;switch(q.type){case"escape":{T+=E.text(q);break}case"html":{T+=E.html(q);break}case"link":{T+=E.link(q);break}case"image":{T+=E.image(q);break}case"strong":{T+=E.strong(q);break}case"em":{T+=E.em(q);break}case"codespan":{T+=E.codespan(q);break}case"br":{T+=E.br(q);break}case"del":{T+=E.del(q);break}case"text":{T+=E.text(q);break}default:{let X='Token with "'+q.type+'" type was not found.';if(this.options.silent)return console.error(X),"";throw new Error(X)}}}return T}}class Za{options;constructor(S){this.options=S||e.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(S){return S}postprocess(S){return S}processAllTokens(S){return S}}class Er{defaults=t();options=this.setOptions;parse=this.parseMarkdown(xn.lex,Hi.parse);parseInline=this.parseMarkdown(xn.lexInline,Hi.parseInline);Parser=Hi;Renderer=Bo;TextRenderer=ia;Lexer=xn;Tokenizer=_;Hooks=Za;constructor(...S){this.use(...S)}walkTokens(S,E){let T=[];for(let L of S)switch(T=T.concat(E.call(this,L)),L.type){case"table":{let O=L;for(let q of O.header)T=T.concat(this.walkTokens(q.tokens,E));for(let q of O.rows)for(let X of q)T=T.concat(this.walkTokens(X.tokens,E));break}case"list":{let O=L;T=T.concat(this.walkTokens(O.items,E));break}default:{let O=L;this.defaults.extensions?.childTokens?.[O.type]?this.defaults.extensions.childTokens[O.type].forEach(q=>{let X=O[q].flat(1/0);T=T.concat(this.walkTokens(X,E))}):O.tokens&&(T=T.concat(this.walkTokens(O.tokens,E)))}}return T}use(...S){let E=this.defaults.extensions||{renderers:{},childTokens:{}};return S.forEach(T=>{let L={...T};if(L.async=this.defaults.async||L.async||!1,T.extensions&&(T.extensions.forEach(O=>{if(!O.name)throw new Error("extension name required");if("renderer"in O){let q=E.renderers[O.name];q?E.renderers[O.name]=function(...X){let ye=O.renderer.apply(this,X);return ye===!1&&(ye=q.apply(this,X)),ye}:E.renderers[O.name]=O.renderer}if("tokenizer"in O){if(!O.level||O.level!=="block"&&O.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let q=E[O.level];q?q.unshift(O.tokenizer):E[O.level]=[O.tokenizer],O.start&&(O.level==="block"?E.startBlock?E.startBlock.push(O.start):E.startBlock=[O.start]:O.level==="inline"&&(E.startInline?E.startInline.push(O.start):E.startInline=[O.start]))}"childTokens"in O&&O.childTokens&&(E.childTokens[O.name]=O.childTokens)}),L.extensions=E),T.renderer){let O=this.defaults.renderer||new Bo(this.defaults);for(let q in T.renderer){if(!(q in O))throw new Error(`renderer '${q}' does not exist`);if(["options","parser"].includes(q))continue;let X=q,ye=T.renderer[X],Ce=O[X];O[X]=(...Qe)=>{let wt=ye.apply(O,Qe);return wt===!1&&(wt=Ce.apply(O,Qe)),wt||""}}L.renderer=O}if(T.tokenizer){let O=this.defaults.tokenizer||new _(this.defaults);for(let q in T.tokenizer){if(!(q in O))throw new Error(`tokenizer '${q}' does not exist`);if(["options","rules","lexer"].includes(q))continue;let X=q,ye=T.tokenizer[X],Ce=O[X];O[X]=(...Qe)=>{let wt=ye.apply(O,Qe);return wt===!1&&(wt=Ce.apply(O,Qe)),wt}}L.tokenizer=O}if(T.hooks){let O=this.defaults.hooks||new Za;for(let q in T.hooks){if(!(q in O))throw new Error(`hook '${q}' does not exist`);if(q==="options")continue;let X=q,ye=T.hooks[X],Ce=O[X];Za.passThroughHooks.has(q)?O[X]=Qe=>{if(this.defaults.async)return Promise.resolve(ye.call(O,Qe)).then(Zt=>Ce.call(O,Zt));let wt=ye.call(O,Qe);return Ce.call(O,wt)}:O[X]=(...Qe)=>{let wt=ye.apply(O,Qe);return wt===!1&&(wt=Ce.apply(O,Qe)),wt}}L.hooks=O}if(T.walkTokens){let O=this.defaults.walkTokens,q=T.walkTokens;L.walkTokens=function(X){let ye=[];return ye.push(q.call(this,X)),O&&(ye=ye.concat(O.call(this,X))),ye}}this.defaults={...this.defaults,...L}}),this}setOptions(S){return this.defaults={...this.defaults,...S},this}lexer(S,E){return xn.lex(S,E??this.defaults)}parser(S,E){return Hi.parse(S,E??this.defaults)}parseMarkdown(S,E){return(L,O)=>{let q={...O},X={...this.defaults,...q},ye=this.onError(!!X.silent,!!X.async);if(this.defaults.async===!0&&q.async===!1)return ye(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof L>"u"||L===null)return ye(new Error("marked(): input parameter is undefined or null"));if(typeof L!="string")return ye(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(L)+", string expected"));if(X.hooks&&(X.hooks.options=X),X.async)return Promise.resolve(X.hooks?X.hooks.preprocess(L):L).then(Ce=>S(Ce,X)).then(Ce=>X.hooks?X.hooks.processAllTokens(Ce):Ce).then(Ce=>X.walkTokens?Promise.all(this.walkTokens(Ce,X.walkTokens)).then(()=>Ce):Ce).then(Ce=>E(Ce,X)).then(Ce=>X.hooks?X.hooks.postprocess(Ce):Ce).catch(ye);try{X.hooks&&(L=X.hooks.preprocess(L));let Ce=S(L,X);X.hooks&&(Ce=X.hooks.processAllTokens(Ce)),X.walkTokens&&this.walkTokens(Ce,X.walkTokens);let Qe=E(Ce,X);return X.hooks&&(Qe=X.hooks.postprocess(Qe)),Qe}catch(Ce){return ye(Ce)}}}onError(S,E){return T=>{if(T.message+=`
Please report this to https://github.com/markedjs/marked.`,S){let L="<p>An error occurred:</p><pre>"+u(T.message+"",!0)+"</pre>";return E?Promise.resolve(L):L}if(E)return Promise.reject(T);throw T}}}let ds=new Er;function de(Ne,S){return ds.parse(Ne,S)}de.options=de.setOptions=function(Ne){return ds.setOptions(Ne),de.defaults=ds.defaults,n(de.defaults),de},de.getDefaults=t,de.defaults=e.defaults,de.use=function(...Ne){return ds.use(...Ne),de.defaults=ds.defaults,n(de.defaults),de},de.walkTokens=function(Ne,S){return ds.walkTokens(Ne,S)},de.parseInline=ds.parseInline,de.Parser=Hi,de.parser=Hi.parse,de.Renderer=Bo,de.TextRenderer=ia,de.Lexer=xn,de.lexer=xn.lex,de.Tokenizer=_,de.Hooks=Za,de.parse=de;let ne=de.options,D=de.setOptions,Z=de.use,le=de.walkTokens,$e=de.parseInline,Lt=de,Vn=Hi.parse,hi=xn.lex;e.Hooks=Za,e.Lexer=xn,e.Marked=Er,e.Parser=Hi,e.Renderer=Bo,e.TextRenderer=ia,e.Tokenizer=_,e.getDefaults=t,e.lexer=hi,e.marked=de,e.options=ne,e.parse=Lt,e.parseInline=$e,e.parser=Vn,e.setOptions=D,e.use=Z,e.walkTokens=le})})();var TZe=li.Hooks||exports.Hooks,kZe=li.Lexer||exports.Lexer,DZe=li.Marked||exports.Marked,_Ze=li.Parser||exports.Parser,y1=li.Renderer||exports.Renderer,LZe=li.TextRenderer||exports.TextRenderer,RZe=li.Tokenizer||exports.Tokenizer,hM=li.defaults||exports.defaults,AZe=li.getDefaults||exports.getDefaults,Vg=li.lexer||exports.lexer,OZe=li.marked||exports.marked,PZe=li.options||exports.options,I1=li.parse||exports.parse,MZe=li.parseInline||exports.parseInline,mM=li.parser||exports.parser,NZe=li.setOptions||exports.setOptions,FZe=li.use||exports.use,BZe=li.walkTokens||exports.walkTokens;var S1=Object.freeze({image:({href:o,title:e,text:t})=>{let n=[],i=[];return o&&({href:o,dimensions:n}=TL(o),i.push(`src="${tm(o)}"`)),t&&i.push(`alt="${tm(t)}"`),e&&i.push(`title="${tm(e)}"`),n.length&&(i=i.concat(n)),"<img "+i.join(" ")+">"},paragraph({tokens:o}){return`<p>${this.parser.parseInline(o)}</p>`},link({href:o,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof o!="string"?"":(o===n&&(n=Lb(n)),e=typeof e=="string"?tm(Lb(e)):"",o=Lb(o),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${o}" title="${e||o}" draggable="false">${n}</a>`)}});function VI(o,e={},t={}){let n=new Y,i=!1,r=DI(e),s=function(f){let y;try{y=ug(decodeURIComponent(f))}catch{}return y?(y=$E(y,C=>{if(o.uris&&o.uris[C])return j.revive(o.uris[C])}),encodeURIComponent(JSON.stringify(y))):f},a=function(f,y){let C=o.uris&&o.uris[f],w=j.revive(C);return y?f.startsWith(me.data+":")?f:(w||(w=j.parse(f)),vs.uriToBrowserUri(w).toString(!0)):!w||j.parse(f).toString()===w.toString()?f:(w.query&&(w=w.with({query:s(w.query)})),w.toString())},l=new y1;l.image=S1.image,l.link=S1.link,l.paragraph=S1.paragraph;let d=[],u=[];if(e.codeBlockRendererSync?l.code=({text:f,lang:y})=>{let C=v1.nextId(),w=e.codeBlockRendererSync(gM(y),f);return u.push([C,w]),`<div class="code" data-code="${C}">${Lh(f)}</div>`}:e.codeBlockRenderer&&(l.code=({text:f,lang:y})=>{let C=v1.nextId(),w=e.codeBlockRenderer(gM(y),f);return d.push(w.then(R=>[C,R])),`<div class="code" data-code="${C}">${Lh(f)}</div>`}),e.actionHandler){let f=function(w){let R=w.target.closest("a[data-href]");if(Dn(R))try{let _=R.dataset.href;_&&(o.baseUri&&(_=x1(j.from(o.baseUri),_)),e.actionHandler.callback(_,w))}catch(_){bt(_)}finally{w.preventDefault()}},y=e.actionHandler.disposables.add(new We(r,"click")),C=e.actionHandler.disposables.add(new We(r,"auxclick"));e.actionHandler.disposables.add(G.any(y.event,C.event)(w=>{let R=new Tn(Re(r),w);!R.leftButton&&!R.middleButton||f(R)})),e.actionHandler.disposables.add(W(r,"keydown",w=>{let R=new pt(w);!R.equals(10)&&!R.equals(3)||f(R)}))}o.supportHtml||(l.html=({text:f})=>e.sanitizerOptions?.replaceWithPlaintext?Lh(f):(o.isTrusted?f.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?f:""),t.renderer=l;let p=o.value??"";p.length>1e5&&(p=`${p.substr(0,1e5)}\u2026`),o.supportThemeIcons&&(p=wL(p));let h;if(e.fillInIncompleteTokens){let f={...hM,...t},y=Vg(p,f),C=YU(y);h=mM(C,f)}else h=I1(p,{...t,async:!1});o.supportThemeIcons&&(h=Ba(h).map(y=>typeof y=="string"?y:y.outerHTML).join(""));let g=new DOMParser().parseFromString(E1({isTrusted:o.isTrusted,...e.sanitizerOptions},h),"text/html");if(g.body.querySelectorAll("img, audio, video, source").forEach(f=>{let y=f.getAttribute("src");if(y){let C=y;try{o.baseUri&&(C=x1(j.from(o.baseUri),C))}catch{}if(f.setAttribute("src",a(C,!0)),e.remoteImageIsAllowed){let w=j.parse(C);w.scheme!==me.file&&w.scheme!==me.data&&!e.remoteImageIsAllowed(w)&&f.replaceWith(De("",void 0,f.outerHTML))}}}),g.body.querySelectorAll("a").forEach(f=>{let y=f.getAttribute("href");if(f.setAttribute("href",""),!y||/^data:|javascript:/i.test(y)||/^command:/i.test(y)&&!o.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(y))f.replaceWith(...f.childNodes);else{let C=a(y,!1);o.baseUri&&(C=x1(j.from(o.baseUri),y)),f.dataset.href=C}}),r.innerHTML=E1({isTrusted:o.isTrusted,...e.sanitizerOptions},g.body.innerHTML),d.length>0)Promise.all(d).then(f=>{if(i)return;let y=new Map(f),C=r.querySelectorAll("div[data-code]");for(let w of C){let R=y.get(w.dataset.code??"");R&&dr(w,R)}e.asyncRenderCallback?.()});else if(u.length>0){let f=new Map(u),y=r.querySelectorAll("div[data-code]");for(let C of y){let w=f.get(C.dataset.code??"");w&&dr(C,w)}}if(e.asyncRenderCallback)for(let f of r.getElementsByTagName("img")){let y=n.add(W(f,"load",()=>{y.dispose(),e.asyncRenderCallback()}))}return{element:r,dispose:()=>{i=!0,n.dispose()}}}function gM(o){if(!o)return"";let e=o.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:o}function x1(o,e){return/^\w[\w\d+.-]*:/.test(e)?e:o.path.endsWith("/")?pE(o,e).toString():pE(ys(o),e).toString()}var BU=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function E1(o,e){let{config:t,allowedSchemes:n}=WU(o),i=new Y;i.add(fM("uponSanitizeAttribute",(r,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(r.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}else if(r.tagName==="INPUT"&&r.attributes.getNamedItem("type")?.value==="checkbox"){if(s.attrName==="type"&&s.attrValue==="checkbox"||s.attrName==="disabled"||s.attrName==="checked"){s.keepAttr=!0;return}s.keepAttr=!1}})),i.add(fM("uponSanitizeElement",(r,s)=>{if(s.tagName==="input"&&(r.attributes.getNamedItem("type")?.value==="checkbox"?r.setAttribute("disabled",""):o.replaceWithPlaintext||r.remove()),o.replaceWithPlaintext&&!s.allowedTags[s.tagName]&&s.tagName!=="body"&&r.parentElement){let a,l;if(s.tagName==="#comment")a=`<!--${r.textContent}-->`;else{let h=BU.includes(s.tagName),m=r.attributes.length?" "+Array.from(r.attributes).map(g=>`${g.name}="${g.value}"`).join(" "):"";a=`<${s.tagName}${m}>`,h||(l=`</${s.tagName}>`)}let d=document.createDocumentFragment(),u=r.parentElement.ownerDocument.createTextNode(a);d.appendChild(u);let p=l?r.parentElement.ownerDocument.createTextNode(l):void 0;for(;r.firstChild;)d.appendChild(r.firstChild);p&&d.appendChild(p),r.parentElement.replaceChild(d,r)}})),i.add(lL(n));try{return Gh(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{i.dispose()}}var VU=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function WU(o){let e=[me.http,me.https,me.mailto,me.data,me.file,me.vscodeFileResource,me.vscodeRemote,me.vscodeRemoteResource];return o.isTrusted&&e.push(me.command),{config:{ALLOWED_TAGS:o.allowedTags??[...dL],ALLOWED_ATTR:VU,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function C1(o){return typeof o=="string"?o:UU(o)}function UU(o,e){let t=o.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}\u2026`);let n=I1(t,{async:!1,renderer:e?KU.value:HU.value}).replace(/&(#\d+|[a-zA-Z]+);/g,i=>zU.get(i)??i);return E1({isTrusted:!1},n).toString()}var zU=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function bM(){let o=new y1;return o.code=({text:e})=>e,o.blockquote=({text:e})=>e+`
`,o.html=e=>"",o.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},o.hr=()=>"",o.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},o.listitem=({text:e})=>e+`
`,o.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},o.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(i=>this.tablecell(i)).join(" ")).join(`
`)+`
`},o.tablerow=({text:e})=>e,o.tablecell=function({tokens:e}){return this.parser.parseInline(e)},o.strong=({text:e})=>e,o.em=({text:e})=>e,o.codespan=({text:e})=>e,o.br=e=>`
`,o.del=({text:e})=>e,o.image=e=>"",o.text=({text:e})=>e,o.link=({text:e})=>e,o}var HU=new Jn(o=>bM()),KU=new Jn(()=>{let o=bM();return o.code=({text:e})=>`
\`\`\`
${e}
\`\`\`
`,o});function BI(o){let e="";return o.forEach(t=>{e+=t.raw}),e}function vM(o){if(o.tokens)for(let e=o.tokens.length-1;e>=0;e--){let t=o.tokens[e];if(t.type==="text"){let n=t.raw.split(`
`),i=n[n.length-1];if(i.includes("`"))return XU(o);if(i.includes("**"))return i5(o);if(i.match(/\*\w/))return ZU(o);if(i.match(/(^|\s)__\w/))return o5(o);if(i.match(/(^|\s)_\w/))return JU(o);if(GU(i)||qU(i)&&o.tokens.slice(0,e).some(r=>r.type==="text"&&r.raw.match(/\[[^\]]*$/))){let r=o.tokens.slice(e+1);return r[0]?.type==="link"&&r[1]?.type==="text"&&r[1].raw.match(/^ *"[^"]*$/)||i.match(/^[^"]* +"[^"]*$/)?t5(o):e5(o)}else if(i.match(/(^|\s)\[\w*/))return n5(o)}}}function GU(o){return!!o.match(/(^|\s)\[.*\]\(\w*/)}function qU(o){return!!o.match(/^[^\[]*\]\([^\)]*$/)}function $U(o){let e=o.items[o.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0,n;if(t?.type==="text"&&!("inRawBlock"in e)&&(n=vM(t)),!n||n.type!=="paragraph")return;let i=BI(o.items.slice(0,-1)),r=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!r)return;let s=r+BI(e.tokens.slice(0,-1))+n.raw,a=Vg(i+s)[0];if(a.type==="list")return a}var jU=3;function YU(o){for(let e=0;e<jU;e++){let t=QU(o);if(t)o=t;else break}return o}function QU(o){let e,t;for(e=0;e<o.length;e++){let n=o[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=r5(o.slice(e));break}if(e===o.length-1&&n.type==="list"){let i=$U(n);if(i){t=[i];break}}if(e===o.length-1&&n.type==="paragraph"){let i=vM(n);if(i){t=[i];break}}}if(t){let n=[...o.slice(0,e),...t];return n.links=o.links,n}return null}function XU(o){return $l(o,"`")}function ZU(o){return $l(o,"*")}function JU(o){return $l(o,"_")}function e5(o){return $l(o,")")}function t5(o){return $l(o,'")')}function n5(o){return $l(o,"](https://microsoft.com)")}function i5(o){return $l(o,"**")}function o5(o){return $l(o,"__")}function $l(o,e){let t=BI(Array.isArray(o)?o:[o]);return Vg(t+e)[0]}function r5(o){let e=BI(o),t=e.split(`
`),n,i=!1;for(let r=0;r<t.length;r++){let s=t[r].trim();if(typeof n>"u"&&s.match(/^\s*\|/)){let a=s.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(s.match(/^\s*\|/)){if(r!==t.length-1)return;i=!0}else return}if(typeof n=="number"&&n>0){let r=i?t.slice(0,-1).join(`
`):e,s=!!r.match(/\|\s*$/),a=r+(s?"":"|")+`
|${" --- |".repeat(n)}`;return Vg(a)}}function fM(o,e){return hb(o,e),re(()=>mb(o))}var s5={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function Di(){return s5}var Sc=De,yM="selectOption.entry.template",w1=class{get templateId(){return yM}renderTemplate(e){let t=Object.create(null);return t.root=e,t.text=Pe(e,Sc(".option-text")),t.detail=Pe(e,Sc(".option-detail")),t.decoratorRight=Pe(e,Sc(".option-decorator-right")),t}renderElement(e,t,n){let i=n,r=e.text,s=e.detail,a=e.decoratorRight,l=e.isDisabled;i.text.textContent=r,i.detail.textContent=s||"",i.decoratorRight.innerText=a||"",l?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}disposeTemplate(e){}},WI=class o extends N{static DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;static DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;static DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;_isVisible;selectBoxOptions;selectElement;container;options=[];selected;_onDidSelect;styles;listRenderer;contextViewProvider;selectDropDownContainer;styleElement;selectList;selectDropDownListContainer;widthControlElement;_currentSelection=0;_dropDownPosition;_hasDetails=!1;selectionDetailsPane;_skipLayout=!1;_cachedMaxDetailsHeight;_hover;_sticky=!1;constructor(e,t,n,i,r){super(),this._isVisible=!1,this.styles=i,this.selectBoxOptions=r||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=o.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new x,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(Di().setupManagedHover(Yt("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return yM}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=De(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Pe(this.selectDropDownContainer,Sc(".select-box-details-pane"));let t=Pe(this.selectDropDownContainer,Sc(".select-box-dropdown-container-width-control")),n=Pe(t,Sc(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Pe(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=lr(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(W(this.selectDropDownContainer,ee.DRAG_START,i=>{Ae.stop(i,!0)}))}registerListeners(){this._register(zn(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(W(this.selectElement,ee.CLICK,t=>{Ae.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(W(this.selectElement,ee.MOUSE_DOWN,t=>{Ae.stop(t)}));let e;this._register(W(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(W(this.selectElement,"touchend",t=>{Ae.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(W(this.selectElement,ee.KEY_DOWN,t=>{let n=new pt(t),i=!1;Fe?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(i=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(i=!0),i&&(this.showSelectDropDown(),Ae.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){Wn(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setEnabled(e){this.selectElement.disabled=!e}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){let e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){let e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",n=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){let e=this.styles.selectBackground??"",t=$o(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;let n=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){let i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");let t=Re(this.selectElement),n=Zh(this.selectElement),i=Re(this.selectElement).getComputedStyle(this.selectElement),r=parseFloat(i.getPropertyValue("--dropdown-padding-top"))+parseFloat(i.getPropertyValue("--dropdown-padding-bottom")),s=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),a=n.top-o.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,d=this.setWidthControlElement(this.widthControlElement),u=Math.max(d,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let p=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());let h=this._hasDetails?this._cachedMaxDetailsHeight:0,m=p+r+h,g=Math.floor((s-r-h)/this.getHeight()),f=Math.floor((a-r-h)/this.getHeight());if(e)return n.top+n.height>t.innerHeight-22||n.top<o.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&f<1?!1:(g<o.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&f>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<o.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&g<1||this._dropDownPosition===1&&f<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&g+f<1)return this.hideSelectDropDown(!0),!1;m>s&&(p=g*this.getHeight())}else m>a&&(p=f*this.getHeight());return this.selectList.layout(p),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=p+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=p+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,i=0;this.options.forEach((r,s)=>{let a=r.detail?r.detail.length:0,l=r.decoratorRight?r.decoratorRight.length:0,d=r.text.length+a+l;d>i&&(n=s,i=d)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=pu(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Pe(e,Sc(".select-box-dropdown-list-container")),this.listRenderer=new w1,this.selectList=this._register(new er("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:i=>{let r=i.text;return i.detail&&(r+=`. ${i.detail}`),i.decoratorRight&&(r+=`. ${i.decoratorRight}`),i.description&&(r+=`. ${i.description}`),r},getWidgetAriaLabel:()=>c({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>Fe?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);let t=this._register(new We(this.selectDropDownListContainer,"keydown")),n=G.chain(t.event,i=>i.filter(()=>this.selectList.length>0).map(r=>new pt(r)));this._register(G.chain(n,i=>i.filter(r=>r.keyCode===3))(this.onEnter,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode===2))(this.onEnter,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode===9))(this.onEscape,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode===16))(this.onUpArrow,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode===18))(this.onDownArrow,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode===12))(this.onPageDown,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode===11))(this.onPageUp,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode===14))(this.onHome,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode===13))(this.onEnd,this)),this._register(G.chain(n,i=>i.filter(r=>r.keyCode>=21&&r.keyCode<=56||r.keyCode>=85&&r.keyCode<=113))(this.onCharacter,this)),this._register(W(this.selectList.getHTMLElement(),ee.POINTER_UP,i=>this.onPointerUp(i))),this._register(this.selectList.onMouseOver(i=>typeof i.index<"u"&&this.selectList.setFocus([i.index]))),this._register(this.selectList.onDidChangeFocus(i=>this.onListFocus(i))),this._register(W(this.selectDropDownContainer,ee.FOCUS_OUT,i=>{!this._isVisible||ho(i.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Ae.stop(e);let t=e.target;if(!t||t.classList.contains("slider"))return;let n=t.closest(".monaco-list-row");if(!n)return;let i=Number(n.getAttribute("data-index")),r=n.classList.contains("option-disabled");i>=0&&i<this.options.length&&!r&&(this.selected=i,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){let n=r=>{for(let s=0;s<r.childNodes.length;s++){let a=r.childNodes.item(s);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():n(a)}},i=VI({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),n(i.element),i.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";let t=this.options[e],n=t?.description??"",i=t?.descriptionIsMarkdown??!1;if(n){if(i){let r=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,r))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Ae.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Ae.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Ae.stop(e,!0);let t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Ae.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Ae.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Ae.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Ae.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Ae.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){let t=Th.toString(e.keyCode),n=-1;for(let i=0;i<this.options.length-1;i++)if(n=(i+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),Ae.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};var UI=class extends N{selectElement;selectBoxOptions;options;selected=0;_onDidSelect;styles;constructor(e,t,n,i){super(),this.selectBoxOptions=i||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new x),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(tn.addTarget(this.selectElement)),[Ct.Tap].forEach(e=>{this._register(W(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(zn(this.selectElement,"click",e=>{Ae.stop(e,!0)})),this._register(zn(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(zn(this.selectElement,"keydown",e=>{let t=!1;Fe?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!Wn(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",e)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setEnabled(e){this.selectElement.disabled=!e}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}style(e){this.styles=e,this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,n){let i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}};var yet={...pM,selectBackground:"#3C3C3C",selectForeground:"#F0F0F0",selectBorder:"#3C3C3C",decoratorRightForeground:void 0,selectListBackground:void 0,selectListBorder:void 0,focusBorder:void 0},zI=class extends Bn{selectBoxDelegate;constructor(e,t,n,i,r){super(),Fe&&!r?.useCustomDrawn?this.selectBoxDelegate=new UI(e,t,i,r):this.selectBoxDelegate=new WI(e,t,n,i,r),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}setAriaLabel(e){this.selectBoxDelegate.setAriaLabel(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}setEnabled(e){this.selectBoxDelegate.setEnabled(e)}render(e){this.selectBoxDelegate.render(e)}};var Va=class extends Bn{_onChange=this._register(new x);onChange=this._onChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_opts;_icon;domNode;_checked;_hover;constructor(e){super(),this._opts=e,this._checked=this._opts.isChecked;let t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...je.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Di().setupManagedHover(e.hoverDelegate??Yt("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...je.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...je.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}setTitle(e){this._hover.update(e),this.domNode.setAttribute("aria-label",e)}set visible(e){this.domNode.style.display=e?"":"none"}get visible(){return this.domNode.style.display!=="none"}};var di=class extends N{constructor(t,n,i={}){super();this.options=i;this._context=t||this,this._action=n,n instanceof Ii&&this._register(n.onDidChange(r=>{this.element&&this.handleActionChangeEvent(r)}))}element;_context;_action;customHover;get action(){return this._action}_actionRunner;handleActionChangeEvent(t){t.enabled!==void 0&&this.updateEnabled(),t.checked!==void 0&&this.updateChecked(),t.class!==void 0&&this.updateClass(),t.label!==void 0&&(this.updateLabel(),this.updateTooltip()),t.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new jo)),this._actionRunner}set actionRunner(t){this._actionRunner=t}isEnabled(){return this._action.enabled}setActionContext(t){this._context=t}render(t){let n=this.element=t;this._register(tn.addTarget(t));let i=this.options&&this.options.draggable;i&&(t.draggable=!0,To&&this._register(W(t,ee.DRAG_START,r=>r.dataTransfer?.setData(Po.TEXT,this._action.label)))),this._register(W(n,Ct.Tap,r=>this.onClick(r,!0))),this._register(W(n,ee.MOUSE_DOWN,r=>{i||Ae.stop(r,!0),this._action.enabled&&r.button===0&&n.classList.add("active")})),Fe&&this._register(W(n,ee.CONTEXT_MENU,r=>{r.button===0&&r.ctrlKey===!0&&this.onClick(r)})),this._register(W(n,ee.CLICK,r=>{Ae.stop(r,!0),this.options&&this.options.isMenu||this.onClick(r)})),this._register(W(n,ee.DBLCLICK,r=>{Ae.stop(r,!0)})),[ee.MOUSE_UP,ee.MOUSE_OUT].forEach(r=>{this._register(W(n,r,s=>{Ae.stop(s),n.classList.remove("active")}))})}onClick(t,n=!1){Ae.stop(t,!0);let i=vi(this._context)?this.options?.useEventAsContext?t:{preserveFocus:n}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}isFocused(){return!!this.element?.classList.contains("focused")}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(t){this.element&&(this.element.tabIndex=t?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;let t=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=t;else if(!this.customHover&&t!==""){let n=this.options.hoverDelegate??Yt("element");this.customHover=this._store.add(Di().setupManagedHover(n,this.element,t))}else this.customHover&&this.customHover.update(t)}updateAriaLabel(){if(this.element){let t=this.getTooltip()??"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}},jl=class extends di{label;options;cssClass;constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),su(this.element);let t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){let n=document.createElement("span");n.classList.add("keybinding"),n.textContent=this.options.keybinding,this.element.appendChild(n)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===cn.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}isFocused(){return!!this.label&&this.label?.tabIndex===0}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=c({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){let e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}},HI=class extends di{selectBox;constructor(e,t,n,i,r,s,a){super(e,t),this.selectBox=new zI(n,i,r,s,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}setOptions(e,t){this.selectBox.setOptions(e,t)}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}};var Wa=class extends N{options;_hoverDelegate;_actionRunner;_actionRunnerDisposables=this._register(new Y);_context;_orientation;_triggerKeys;viewItems;viewItemDisposables=this._register(new kr);previouslyFocusedItem;focusedItem;focusTracker;triggerKeyDown=!1;focusable=!0;domNode;actionsList;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_onDidCancel=this._register(new x({onWillAddFirstListener:()=>this.cancelHasListener=!0}));onDidCancel=this._onDidCancel.event;cancelHasListener=!1;_onDidRun=this._register(new x);onDidRun=this._onDidRun.event;_onWillRun=this._register(new x);onWillRun=this._onWillRun.event;constructor(e,t={}){super(),this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(ql()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new jo,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(r=>this._onDidRun.fire(r))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(r=>this._onWillRun.fire(r))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let n,i;switch(this._orientation){case 0:n=[15],i=[17];break;case 1:n=[16],i=[18],this.domNode.className+=" vertical";break}this._register(W(this.domNode,ee.KEY_DOWN,r=>{let s=new pt(r),a=!0,l=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;n&&(s.equals(n[0])||s.equals(n[1]))?a=this.focusPrevious():i&&(s.equals(i[0])||s.equals(i[1]))?a=this.focusNext():s.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():s.equals(14)?a=this.focusFirst():s.equals(13)?a=this.focusLast():s.equals(2)&&l instanceof di&&l.trapsArrowNavigation?a=this.focusNext(void 0,!0):this.isTriggerKeyEvent(s)?this._triggerKeys.keyDown?this.doTrigger(s):this.triggerKeyDown=!0:a=!1,a&&(s.preventDefault(),s.stopPropagation())})),this._register(W(this.domNode,ee.KEY_UP,r=>{let s=new pt(r);this.isTriggerKeyEvent(s)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(s)),s.preventDefault(),s.stopPropagation()):(s.equals(2)||s.equals(1026)||s.equals(16)||s.equals(18)||s.equals(15)||s.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(qo(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Go()===this.domNode||!ho(Go(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setAriaLabel(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")}setFocusable(e){if(this.focusable=e,this.focusable){let t=this.viewItems.find(n=>n instanceof di&&n.isEnabled());t instanceof di&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof di&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){let t=this.actionsList.children[e];if(ho(Go(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}hasAction(e){return this.viewItems.findIndex(t=>t.action.id===e.id)!==-1}getAction(e){if(typeof e=="number")return this.viewItems[e]?.action;if(Dn(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){let n=Array.isArray(e)?e:[e],i=Li(t.index)?t.index:null;n.forEach(r=>{let s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation");let a,l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r,l)),a||(a=new jl(this.context,r,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,W(s,ee.CONTEXT_MENU,d=>{Ae.stop(d,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(s),this.focusable&&a instanceof di&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(a)):(this.actionsList.insertBefore(s,this.actionsList.children[i]),this.viewItems.splice(i,0,a),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}getWidth(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.viewItems.length&&(this.actionsList.childNodes[e].remove(),this.viewItemDisposables.deleteAndDispose(this.viewItems[e]),Bt(this.viewItems.splice(e,1)),this.refreshRole())}clear(){this.isEmpty()||(this.viewItems=Bt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),dn(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){let i=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let n=this.focusedItem,i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===cn.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let t=this.focusedItem,n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===cn.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();let i=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(i){let r=!0;au(i.focus)||(r=!1),this.options.focusOnlyEnabledItems&&au(i.isEnabled)&&!i.isEnabled()&&(r=!1),i.action.id===cn.ID&&(r=!1),r?(n||this.previouslyFocusedItem!==this.focusedItem)&&(i.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),r&&i.showHover?.()}}doTrigger(e){if(typeof this.focusedItem>"u")return;let t=this.viewItems[this.focusedItem];if(t instanceof di){let n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Bt(this.viewItems),this.getContainer().remove(),super.dispose()}};function T1(o){if(!o.length)return o;let e=-1;for(let n=0;n<o.length;n++)if(o[n].id!==cn.ID){e=n;break}if(e===-1)return[];o=o.slice(e);for(let n=o.length-1;n>=0&&o[n].id===cn.ID;n--)o.splice(n,1);let t=!1;for(let n=o.length-1;n>=0;n--){let i=o[n].id===cn.ID;i&&!t?o.splice(n,1):i?i&&(t=!1):t=!0}return o}var Bp=class extends Na{constructor(t,n,i,r){super(t,i,r);this.telemetryService=n}_onTitleAreaUpdate=this._register(new x);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidFocus;get onDidFocus(){return this._onDidFocus||(this._onDidFocus=this.registerFocusTrackEvents().onDidFocus),this._onDidFocus.event}_onDidBlur;get onDidBlur(){return this._onDidBlur||(this._onDidBlur=this.registerFocusTrackEvents().onDidBlur),this._onDidBlur.event}_hasFocus=!1;hasFocus(){return this._hasFocus}registerFocusTrackEvents(){let t=lt(this.getContainer()),n=this._register(qo(t)),i=this._onDidFocus=this._register(new x);this._register(n.onDidFocus(()=>{this._hasFocus=!0,i.fire()}));let r=this._onDidBlur=this._register(new x);return this._register(n.onDidBlur(()=>{this._hasFocus=!1,r.fire()})),{onDidFocus:i,onDidBlur:r}}actionRunner;visible=!1;parent;getTitle(){}create(t){this.parent=t}getContainer(){return this.parent}setVisible(t){this.visible!==!!t&&(this.visible=t)}focus(){}getMenuIds(){return[]}getActions(){return[]}getSecondaryActions(){return[]}getContextMenuActions(){return[]}getActionViewItem(t,n){}getActionsContext(){return null}getActionRunner(){return this.actionRunner||(this.actionRunner=this._register(new jo)),this.actionRunner}updateTitleArea(){this._onTitleAreaUpdate.fire()}isVisible(){return this.visible}getControl(){}};var KI=class extends N{_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new x);onDidDeregister=this._onDidDeregister.event;composites=[];registerComposite(e){this.compositeById(e.id)||(this.composites.push(e),this._onDidRegister.fire(e))}deregisterComposite(e){let t=this.compositeById(e);t&&(this.composites.splice(this.composites.indexOf(t),1),this._onDidDeregister.fire(t))}getComposite(e){return this.compositeById(e)}getComposites(){return this.composites.slice(0)}compositeById(e){return this.composites.find(t=>t.id===e)}};var a5={separatorBorder:A.transparent};var GI=class{constructor(e,t,n,i){this.container=e;this.view=t;this.disposable=i;typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}_size;set size(e){this._size=e}get size(){return this._size}_cachedVisibleSize=void 0;get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){if(e!==this.visible){e?(this.size=po(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(n){console.error("Splitview: Failed to set visible view"),console.error(n)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(n){console.error("Splitview: Failed to layout view"),console.error(n)}}dispose(){this.disposable.dispose()}},k1=class extends GI{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}},D1=class extends GI{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}};var $s;(i=>{i.Distribute={type:"distribute"};function e(r){return{type:"split",index:r}}i.Split=e;function t(r){return{type:"auto",index:r}}i.Auto=t;function n(r){return{type:"invisible",cachedVisibleSize:r}}i.Invisible=n})($s||={});var Yl=class extends N{orientation;el;sashContainer;viewContainer;scrollable;scrollableElement;size=0;layoutContext;_contentSize=0;proportions=void 0;viewItems=[];sashItems=[];sashDragState;state=0;inverseAltBehavior;proportionalLayout;getSashOrthogonalSize;_onDidSashChange=this._register(new x);_onDidSashReset=this._register(new x);_orthogonalStartSash;_orthogonalEndSash;_startSnappingEnabled=!0;_endSnappingEnabled=!0;get contentSize(){return this._contentSize}onDidSashChange=this._onDidSashChange.event;onDidSashReset=this._onDidSashReset.event;onDidScroll;get length(){return this.viewItems.length}get minimumSize(){return this.viewItems.reduce((e,t)=>e+t.minimumSize,0)}get maximumSize(){return this.length===0?Number.POSITIVE_INFINITY:this.viewItems.reduce((e,t)=>e+t.maximumSize,0)}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get sashes(){return this.sashItems.map(e=>e.sash)}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Pe(this.el,De(".sash-container")),this.viewContainer=De(".split-view-container"),this.scrollable=this._register(new ba({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:i=>Yi(Re(this.el),i)})),this.scrollableElement=this._register(new Np(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));let n=this._register(new We(this.viewContainer,"scroll")).event;this._register(n(i=>{let r=this.scrollableElement.getScrollPosition(),s=Math.abs(this.viewContainer.scrollLeft-r.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-r.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(s!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:s,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(i=>{i.scrollTopChanged&&(this.viewContainer.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this.viewContainer.scrollLeft=i.scrollLeft)})),Pe(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||a5),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((i,r)=>{let s=Un(i.visible)||i.visible?i.size:{type:"invisible",cachedVisibleSize:i.size},a=i.view;this.doAddView(a,s,r,!0)}),this._contentSize=this.viewItems.reduce((i,r)=>i+r.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}removeView(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{t?.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index});let n=t?.type==="split"?this.viewItems[t.index]:void 0,i=this.viewItems.splice(e,1)[0];if(n&&(n.size+=i.size),this.viewItems.length>=1){let s=Math.max(e-1,0);this.sashItems.splice(s,1)[0].disposable.dispose()}this.relayout(),t?.type==="distribute"&&this.distributeViewSizes();let r=i.view;return i.dispose(),r}finally{this.state=0}}removeAllViews(){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let e=this.viewItems.splice(0,this.viewItems.length);for(let n of e)n.dispose();let t=this.sashItems.splice(0,this.sashItems.length);for(let n of t)n.disposable.dispose();return this.relayout(),e.map(n=>n.view)}finally{this.state=0}}moveView(e,t){if(this.state!==0)throw new Error("Cant modify splitview");let n=this.getViewCachedVisibleSize(e),i=typeof n>"u"?this.getViewSize(e):$s.Invisible(n),r=this.removeView(e);this.addView(r,i,t)}swapViews(e,t){if(this.state!==0)throw new Error("Cant modify splitview");if(e>t)return this.swapViews(t,e);let n=this.getViewSize(e),i=this.getViewSize(t),r=this.removeView(t),s=this.removeView(e);this.addView(r,n,e),this.addView(s,i,t)}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e,t){let n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let i=0;for(let r=0;r<this.viewItems.length;r++){let s=this.viewItems[r],a=this.proportions[r];typeof a=="number"?i+=a:e-=s.size}for(let r=0;r<this.viewItems.length;r++){let s=this.viewItems[r],a=this.proportions[r];typeof a=="number"&&i>0&&(s.size=po(Math.round(a*e/i),s.minimumSize,s.maximumSize))}}else{let i=mi(this.viewItems.length),r=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,r,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(let a of this.viewItems)a.enabled=!1;let i=this.sashItems.findIndex(a=>a.sash===e),r=_i(W(this.el.ownerDocument.body,"keydown",a=>s(this.sashDragState.current,a.altKey)),W(this.el.ownerDocument.body,"keyup",()=>s(this.sashDragState.current,!1))),s=(a,l)=>{let d=this.viewItems.map(g=>g.size),u=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){let f=this.viewItems[i];u=(f.minimumSize-f.size)/2,p=(f.maximumSize-f.size)/2}else{let f=this.viewItems[i+1];u=(f.size-f.maximumSize)/2,p=(f.size-f.minimumSize)/2}let h,m;if(!l){let g=mi(i,-1),f=mi(i+1,this.viewItems.length),y=g.reduce((V,oe)=>V+(this.viewItems[oe].minimumSize-d[oe]),0),C=g.reduce((V,oe)=>V+(this.viewItems[oe].viewMaximumSize-d[oe]),0),w=f.length===0?Number.POSITIVE_INFINITY:f.reduce((V,oe)=>V+(d[oe]-this.viewItems[oe].minimumSize),0),R=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((V,oe)=>V+(d[oe]-this.viewItems[oe].viewMaximumSize),0),_=Math.max(y,R),B=Math.min(w,C),K=this.findFirstSnapIndex(g),F=this.findFirstSnapIndex(f);if(typeof K=="number"){let V=this.viewItems[K],oe=Math.floor(V.viewMinimumSize/2);h={index:K,limitDelta:V.visible?_-oe:_+oe,size:V.size}}if(typeof F=="number"){let V=this.viewItems[F],oe=Math.floor(V.viewMinimumSize/2);m={index:F,limitDelta:V.visible?B+oe:B-oe,size:V.size}}}this.sashDragState={start:a,current:a,index:i,sizes:d,minDelta:u,maxDelta:p,alt:l,snapBefore:h,snapAfter:m,disposable:r}};s(t,n)}onSashChange({current:e}){let{index:t,start:n,sizes:i,alt:r,minDelta:s,maxDelta:a,snapBefore:l,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;let u=e-n,p=this.resize(t,u,i,void 0,void 0,s,a,l,d);if(r){let h=t===this.sashItems.length-1,m=this.viewItems.map(R=>R.size),g=h?t:t+1,f=this.viewItems[g],y=f.size-f.maximumSize,C=f.size-f.minimumSize,w=h?t-1:t+1;this.resize(w,-p,m,void 0,void 0,y,C)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(let t of this.viewItems)t.enabled=!0}onViewChange(e,t){let n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=po(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let n=mi(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],r=n.filter(a=>this.viewItems[a].priority===2),s=this.viewItems[e];t=Math.round(t),t=po(t,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(i,r)}finally{this.state=0}}}isViewExpanded(e){if(e<0||e>=this.viewItems.length)return!1;for(let t of this.viewItems)if(t!==this.viewItems[e]&&t.size>t.minimumSize)return!1;return!0}distributeViewSizes(){let e=[],t=0;for(let a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);let n=Math.floor(t/e.length);for(let a of e)a.size=po(n,a.minimumSize,a.maximumSize);let i=mi(this.viewItems.length),r=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);this.relayout(r,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let r=De(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(n));let s=e.onDidChange(h=>this.onViewChange(u,h)),a=re(()=>r.remove()),l=_i(s,a),d;typeof t=="number"?d=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?d=this.getViewSize(t.index)/2:t.type==="invisible"?d={cachedVisibleSize:t.cachedVisibleSize}:d=e.minimumSize);let u=this.orientation===0?new k1(r,e,d,l):new D1(r,e,d,l);if(this.viewItems.splice(n,0,u),this.viewItems.length>1){let h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},m=this.orientation===0?new gg(this.sashContainer,{getHorizontalSashTop:V=>this.getSashPosition(V),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new gg(this.sashContainer,{getVerticalSashLeft:V=>this.getSashPosition(V),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),g=this.orientation===0?V=>({sash:m,start:V.startY,current:V.currentY,alt:V.altKey}):V=>({sash:m,start:V.startX,current:V.currentX,alt:V.altKey}),y=G.map(m.onDidStart,g)(this.onSashStart,this),w=G.map(m.onDidChange,g)(this.onSashChange,this),_=G.map(m.onDidEnd,()=>this.sashItems.findIndex(V=>V.sash===m))(this.onSashEnd,this),B=m.onDidReset(()=>{let V=this.sashItems.findIndex(tt=>tt.sash===m),oe=mi(V,-1),ge=mi(V+1,this.viewItems.length),we=this.findFirstSnapIndex(oe),ht=this.findFirstSnapIndex(ge);typeof we=="number"&&!this.viewItems[we].visible||typeof ht=="number"&&!this.viewItems[ht].visible||this._onDidSashReset.fire(V)}),K=_i(y,w,_,B,m),F={sash:m,disposable:K};this.sashItems.splice(n-1,0,F)}r.appendChild(e.element);let p;typeof t!="number"&&t.type==="split"&&(p=[t.index]),i||this.relayout([n],p),!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=0}}relayout(e,t){let n=this.viewItems.reduce((i,r)=>i+r.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(u=>u.size),i,r,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,d){if(e<0||e>=this.viewItems.length)return 0;let u=mi(e,-1),p=mi(e+1,this.viewItems.length);if(r)for(let F of r)xf(u,F),xf(p,F);if(i)for(let F of i)ch(u,F),ch(p,F);let h=u.map(F=>this.viewItems[F]),m=u.map(F=>n[F]),g=p.map(F=>this.viewItems[F]),f=p.map(F=>n[F]),y=u.reduce((F,V)=>F+(this.viewItems[V].minimumSize-n[V]),0),C=u.reduce((F,V)=>F+(this.viewItems[V].maximumSize-n[V]),0),w=p.length===0?Number.POSITIVE_INFINITY:p.reduce((F,V)=>F+(n[V]-this.viewItems[V].minimumSize),0),R=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((F,V)=>F+(n[V]-this.viewItems[V].maximumSize),0),_=Math.max(y,R,s),B=Math.min(w,C,a),K=!1;if(l){let F=this.viewItems[l.index],V=t>=l.limitDelta;K=V!==F.visible,F.setVisible(V,l.size)}if(!K&&d){let F=this.viewItems[d.index],V=t<d.limitDelta;K=V!==F.visible,F.setVisible(V,d.size)}if(K)return this.resize(e,t,n,i,r,s,a);t=po(t,_,B);for(let F=0,V=t;F<h.length;F++){let oe=h[F],ge=po(m[F]+V,oe.minimumSize,oe.maximumSize),we=ge-m[F];V-=we,oe.size=ge}for(let F=0,V=t;F<g.length;F++){let oe=g[F],ge=po(f[F]-V,oe.minimumSize,oe.maximumSize),we=ge-f[F];V+=we,oe.size=ge}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((a,l)=>a+l.size,0),n=this.size-t,i=mi(this.viewItems.length-1,-1),r=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);for(let a of s)xf(i,a);for(let a of r)ch(i,a);typeof e=="number"&&ch(i,e);for(let a=0;n!==0&&a<i.length;a++){let l=this.viewItems[i[a]],d=po(l.size+n,l.minimumSize,l.maximumSize),u=d-l.size;n-=u,l.size=d}}layoutViews(){this._contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;let n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;let r=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;let s=i.map(l=>e=l.maximumSize-l.size>0||e).reverse(),a=0;for(let l=0;l<this.sashItems.length;l++){let{sash:d}=this.sashItems[l],u=this.viewItems[l];a+=u.size;let p=!(t[l]&&s[l+1]),h=!(n[l]&&r[l+1]);if(p&&h){let m=mi(l,-1),g=mi(l+1,this.viewItems.length),f=this.findFirstSnapIndex(m),y=this.findFirstSnapIndex(g),C=typeof f=="number"&&!this.viewItems[f].visible,w=typeof y=="number"&&!this.viewItems[y].visible;C&&r[l]&&(a>0||this.startSnappingEnabled)?d.state=1:w&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?d.state=2:d.state=0}else p&&!h?d.state=1:!p&&h?d.state=2:d.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let n=this.viewItems[t];if(n.visible&&n.snap)return t}for(let t of e){let n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(let n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),Bt(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}};var Qnt={separatorBorder:A.transparent};var d5;(i=>{i.Distribute={type:"distribute"},i.Split={type:"split"},i.Auto={type:"auto"};function n(r){return{type:"invisible",cachedVisibleSize:r}}i.Invisible=n})(d5||={});async function xM(o){let e=navigator.usb;if(!e)return;let t=await e.requestDevice({filters:o?.filters??[]});if(t)return{deviceClass:t.deviceClass,deviceProtocol:t.deviceProtocol,deviceSubclass:t.deviceSubclass,deviceVersionMajor:t.deviceVersionMajor,deviceVersionMinor:t.deviceVersionMinor,deviceVersionSubminor:t.deviceVersionSubminor,manufacturerName:t.manufacturerName,productId:t.productId,productName:t.productName,serialNumber:t.serialNumber,usbVersionMajor:t.usbVersionMajor,usbVersionMinor:t.usbVersionMinor,usbVersionSubminor:t.usbVersionSubminor,vendorId:t.vendorId}}async function EM(o){let e=navigator.serial;if(!e)return;let t=await e.requestPort({filters:o?.filters??[]});if(!t)return;let n=t.getInfo();return{usbVendorId:n.usbVendorId,usbProductId:n.usbProductId}}async function CM(o){let e=navigator.hid;if(!e)return;let t=await e.requestDevice({filters:o?.filters??[]});if(!t.length)return;let n=t[0];return{opened:n.opened,vendorId:n.vendorId,productId:n.productId,productName:n.productName,collections:n.collections}}var Ql=H("openerService");function qI(o){let e,t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(o.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},o=o.with({fragment:""})),{selection:e,uri:o}}var c5=60,u5=c5*60,_1=u5*24,Oit=_1*7,Pit=_1*30,Mit=_1*365;function wM(o){return o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0")+"T"+String(o.getHours()).padStart(2,"0")+":"+String(o.getMinutes()).padStart(2,"0")+":"+String(o.getSeconds()).padStart(2,"0")+"."+(o.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var Wg=/^([^.]+\..+)[:=](.+)$/,zt=class{constructor(e,t,n){this._args=e;this.paths=t;this.productService=n}get appRoot(){return Kc(vs.asFileUri("").fsPath)}get userHome(){return j.file(this.paths.homeDir)}get userDataPath(){return this.paths.userDataDir}get appSettingsHome(){return j.file(so(this.userDataPath,"User"))}get tmpDir(){return j.file(this.paths.tmpDir)}get cacheHome(){return j.file(this.userDataPath)}get stateResource(){return vt(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome.with({scheme:me.vscodeUserData})}get userDataSyncHome(){return vt(this.appSettingsHome,"sync")}get logsHome(){if(!this.args.logsPath){let e=wM(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=so(this.userDataPath,"logs",e)}return j.file(this.args.logsPath)}get sync(){return this.args.sync}get machineSettingsResource(){return vt(j.file(so(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return vt(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return vt(this.appSettingsHome,"History")}get keyboardLayoutResource(){return vt(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){let e=la.VSCODE_PORTABLE;return e?j.file(so(e,"argv.json")):vt(this.userHome,this.productService.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return j.file(so(this.userDataPath,"Workspaces"))}get builtinExtensionsPath(){let e=this.args["builtin-extensions-dir"];return e?Hc(e):gs(so(vs.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){let e=this.args["extensions-download-dir"];return e?j.file(Hc(e)):j.file(so(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){let e=this.args["extensions-dir"];if(e)return Hc(e);let t=la.VSCODE_EXTENSIONS;if(t)return t;let n=la.VSCODE_PORTABLE;return n?so(n,"extensions"):vt(this.userHome,this.productService.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){let e=this.args.extensionDevelopmentPath;if(Array.isArray(e))return e.map(t=>/^[^:/?#]+?:\/\//.test(t)?j.parse(t):j.file(gs(t)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(e=>e==="ui"||e==="workspace"||e==="web"?e:"workspace")}get extensionTestsLocationURI(){let e=this.args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?j.parse(e):j.file(gs(e))}get disableExtensions(){if(this.args["disable-extensions"])return!0;let e=this.args["disable-extension"];if(e){if(typeof e=="string")return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get debugExtensionHost(){return p5(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!la.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(e=>!Wg.test(e))}get extensionLogLevel(){let e=[];for(let t of this.args.log||[]){let n=Wg.exec(t);n&&n[1]&&n[2]&&e.push([n[1],n[2]])}return e.length?e:void 0}get serviceMachineIdResource(){return vt(j.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get useInMemorySecretStorage(){return!!this.args["use-inmemory-secretstorage"]}get policyFile(){if(this.args["__enable-file-policy"]){let e=la.VSCODE_PORTABLE;return e?j.file(so(e,"policy.json")):vt(this.userHome,this.productService.dataFolderName,"policy.json")}}editSessionId=this.args.editSessionId;get continueOn(){return this.args.continueOn}set continueOn(e){this.args.continueOn=e}get args(){return this._args}};k([ie],zt.prototype,"appRoot",1),k([ie],zt.prototype,"userHome",1),k([ie],zt.prototype,"userDataPath",1),k([ie],zt.prototype,"appSettingsHome",1),k([ie],zt.prototype,"tmpDir",1),k([ie],zt.prototype,"cacheHome",1),k([ie],zt.prototype,"stateResource",1),k([ie],zt.prototype,"userRoamingDataHome",1),k([ie],zt.prototype,"userDataSyncHome",1),k([ie],zt.prototype,"sync",1),k([ie],zt.prototype,"machineSettingsResource",1),k([ie],zt.prototype,"workspaceStorageHome",1),k([ie],zt.prototype,"localHistoryHome",1),k([ie],zt.prototype,"keyboardLayoutResource",1),k([ie],zt.prototype,"argvResource",1),k([ie],zt.prototype,"isExtensionDevelopment",1),k([ie],zt.prototype,"untitledWorkspacesHome",1),k([ie],zt.prototype,"builtinExtensionsPath",1),k([ie],zt.prototype,"extensionsPath",1),k([ie],zt.prototype,"extensionDevelopmentLocationURI",1),k([ie],zt.prototype,"extensionDevelopmentKind",1),k([ie],zt.prototype,"extensionTestsLocationURI",1),k([ie],zt.prototype,"debugExtensionHost",1),k([ie],zt.prototype,"logLevel",1),k([ie],zt.prototype,"extensionLogLevel",1),k([ie],zt.prototype,"serviceMachineIdResource",1),k([ie],zt.prototype,"disableTelemetry",1),k([ie],zt.prototype,"disableWorkspaceTrust",1),k([ie],zt.prototype,"useInMemorySecretStorage",1),k([ie],zt.prototype,"policyFile",1);function p5(o,e){return h5(o["inspect-extensions"],o["inspect-brk-extensions"],5870,e,o.debugId,o.extensionEnvironment)}function h5(o,e,t,n,i,r){let a=Number(e||o)||(n?null:t),l=a?!!e:!1,d;if(r)try{d=JSON.parse(r)}catch{}return{port:a,break:l,debugId:i,env:d}}var TM=Yo,dt=class{constructor(e,t,n,i){this.workspaceId=e;this.logsHome=t;this.options=n;this.productService=i;if(n.workspaceProvider&&Array.isArray(n.workspaceProvider.payload))try{this.payload=new Map(n.workspaceProvider.payload)}catch(r){bt(r)}}get remoteAuthority(){return this.options.remoteAuthority}get expectsResolverExtension(){return!!this.options.remoteAuthority?.includes("+")&&!this.options.webSocketFactory}get isBuilt(){return!!this.productService.commit}get logLevel(){let e=this.payload?.get("logLevel");return e?e.split(",").find(t=>!Wg.test(t)):this.options.developmentOptions?.logLevel!==void 0?Ry(this.options.developmentOptions?.logLevel):void 0}get extensionLogLevel(){let e=this.payload?.get("logLevel");if(e){let t=[];for(let n of e.split(",")){let i=Wg.exec(n);i&&i[1]&&i[2]&&t.push([i[1],i[2]])}return t.length?t:void 0}return this.options.developmentOptions?.extensionLogLevel!==void 0?this.options.developmentOptions?.extensionLogLevel.map(([t,n])=>[t,Ry(n)]):void 0}get profDurationMarkers(){let e=this.payload?.get("profDurationMarkers");if(e){let t=[];for(let n of e.split(","))t.push(n);return t.length===2?t:void 0}}get windowLogsPath(){return this.logsHome}get logFile(){return vt(this.windowLogsPath,"window.log")}get userRoamingDataHome(){return j.file("/User").with({scheme:me.vscodeUserData})}get argvResource(){return vt(this.userRoamingDataHome,"argv.json")}get cacheHome(){return vt(this.userRoamingDataHome,"caches")}get workspaceStorageHome(){return vt(this.userRoamingDataHome,"workspaceStorage")}get localHistoryHome(){return vt(this.userRoamingDataHome,"History")}get stateResource(){return vt(this.userRoamingDataHome,"State","storage.json")}get userDataSyncHome(){return vt(this.userRoamingDataHome,"sync",this.workspaceId)}get sync(){}get keyboardLayoutResource(){return vt(this.userRoamingDataHome,"keyboardLayout.json")}get untitledWorkspacesHome(){return vt(this.userRoamingDataHome,"Workspaces")}get serviceMachineIdResource(){return vt(this.userRoamingDataHome,"machineid")}get extHostLogsPath(){return vt(this.logsHome,"exthost")}get extHostTelemetryLogFile(){return vt(this.extHostLogsPath,"extensionTelemetry.log")}extensionHostDebugEnvironment=void 0;get debugExtensionHost(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.params}get isExtensionDevelopment(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.isExtensionDevelopment}get extensionDevelopmentLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentLocationURI}get extensionDevelopmentLocationKind(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentKind}get extensionTestsLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionTestsLocationURI}get extensionEnabledProposedApi(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionEnabledProposedApi}get debugRenderer(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.debugRenderer}get enableSmokeTestDriver(){return this.options.developmentOptions?.enableSmokeTestDriver}get disableExtensions(){return this.payload?.get("disableExtensions")==="true"}get enableExtensions(){return this.options.enabledExtensions}get webviewExternalEndpoint(){let e=this.options.webviewEndpoint||this.productService.webviewContentExternalBaseUrlTemplate||"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",t=this.payload?.get("webviewExternalEndpointCommit");return e.replace("{{commit}}",t??this.productService.commit??"ef65ac1ba57f57f2a3961bfe94aa20481caca4c6").replace("{{quality}}",(t?"insider":this.productService.quality)??"insider")}get extensionTelemetryLogResource(){return vt(this.logsHome,"extensionTelemetry.log")}get disableTelemetry(){return!1}get verbose(){return this.payload?.get("verbose")==="true"}get logExtensionHostCommunication(){return this.payload?.get("logExtensionHostCommunication")==="true"}get skipReleaseNotes(){return this.payload?.get("skipReleaseNotes")==="true"}get skipWelcome(){return this.payload?.get("skipWelcome")==="true"}get disableWorkspaceTrust(){return!this.options.enableWorkspaceTrust}get profile(){return this.payload?.get("profile")}editSessionId=this.options.editSessionId;payload;resolveExtensionHostDebugEnvironment(){let e={params:{port:null,break:!1},debugRenderer:!1,isExtensionDevelopment:!1,extensionDevelopmentLocationURI:void 0,extensionDevelopmentKind:void 0};if(this.payload)for(let[n,i]of this.payload)switch(n){case"extensionDevelopmentPath":e.extensionDevelopmentLocationURI||(e.extensionDevelopmentLocationURI=[]),e.extensionDevelopmentLocationURI.push(j.parse(i)),e.isExtensionDevelopment=!0;break;case"extensionDevelopmentKind":e.extensionDevelopmentKind=[i];break;case"extensionTestsPath":e.extensionTestsLocationURI=j.parse(i);break;case"debugRenderer":e.debugRenderer=i==="true";break;case"debugId":e.params.debugId=i;break;case"inspect-brk-extensions":e.params.port=parseInt(i),e.params.break=!0;break;case"inspect-extensions":e.params.port=parseInt(i);break;case"enableProposedApi":e.extensionEnabledProposedApi=[];break}let t=this.options.developmentOptions;return t&&!e.isExtensionDevelopment&&(t.extensions?.length&&(e.extensionDevelopmentLocationURI=t.extensions.map(n=>j.revive(n)),e.isExtensionDevelopment=!0),t.extensionTestsPath&&(e.extensionTestsLocationURI=j.revive(t.extensionTestsPath))),e}get filesToOpenOrCreate(){if(this.payload){let e=this.payload.get("openFile");if(e){let t=j.parse(e);if(this.payload.has("gotoLineMode")){let n=E0(t.path);return[{fileUri:t.with({path:n.path}),options:{selection:Un(n.line)?void 0:{startLineNumber:n.line,startColumn:n.column||1}}}]}return[{fileUri:t}]}}}get filesToDiff(){if(this.payload){let e=this.payload.get("diffFilePrimary"),t=this.payload.get("diffFileSecondary");if(e&&t)return[{fileUri:j.parse(t)},{fileUri:j.parse(e)}]}}get filesToMerge(){if(this.payload){let e=this.payload.get("mergeFile1"),t=this.payload.get("mergeFile2"),n=this.payload.get("mergeFileBase"),i=this.payload.get("mergeFileResult");if(e&&t&&n&&i)return[{fileUri:j.parse(e)},{fileUri:j.parse(t)},{fileUri:j.parse(n)},{fileUri:j.parse(i)}]}}};k([ie],dt.prototype,"remoteAuthority",1),k([ie],dt.prototype,"expectsResolverExtension",1),k([ie],dt.prototype,"isBuilt",1),k([ie],dt.prototype,"logLevel",1),k([ie],dt.prototype,"windowLogsPath",1),k([ie],dt.prototype,"logFile",1),k([ie],dt.prototype,"userRoamingDataHome",1),k([ie],dt.prototype,"argvResource",1),k([ie],dt.prototype,"cacheHome",1),k([ie],dt.prototype,"workspaceStorageHome",1),k([ie],dt.prototype,"localHistoryHome",1),k([ie],dt.prototype,"stateResource",1),k([ie],dt.prototype,"userDataSyncHome",1),k([ie],dt.prototype,"sync",1),k([ie],dt.prototype,"keyboardLayoutResource",1),k([ie],dt.prototype,"untitledWorkspacesHome",1),k([ie],dt.prototype,"serviceMachineIdResource",1),k([ie],dt.prototype,"extHostLogsPath",1),k([ie],dt.prototype,"extHostTelemetryLogFile",1),k([ie],dt.prototype,"debugExtensionHost",1),k([ie],dt.prototype,"isExtensionDevelopment",1),k([ie],dt.prototype,"extensionDevelopmentLocationURI",1),k([ie],dt.prototype,"extensionDevelopmentLocationKind",1),k([ie],dt.prototype,"extensionTestsLocationURI",1),k([ie],dt.prototype,"extensionEnabledProposedApi",1),k([ie],dt.prototype,"debugRenderer",1),k([ie],dt.prototype,"enableSmokeTestDriver",1),k([ie],dt.prototype,"disableExtensions",1),k([ie],dt.prototype,"enableExtensions",1),k([ie],dt.prototype,"webviewExternalEndpoint",1),k([ie],dt.prototype,"extensionTelemetryLogResource",1),k([ie],dt.prototype,"disableTelemetry",1),k([ie],dt.prototype,"verbose",1),k([ie],dt.prototype,"logExtensionHostCommunication",1),k([ie],dt.prototype,"skipReleaseNotes",1),k([ie],dt.prototype,"skipWelcome",1),k([ie],dt.prototype,"disableWorkspaceTrust",1),k([ie],dt.prototype,"profile",1),k([ie],dt.prototype,"filesToOpenOrCreate",1),k([ie],dt.prototype,"filesToDiff",1),k([ie],dt.prototype,"filesToMerge",1);var kM=H("layoutService");var $I=class extends Na{constructor(t,n,i,r,s){super(t,i,r);this.options=n;this.layoutService=s;this._register(s.registerPart(this))}_dimension;get dimension(){return this._dimension}_contentPosition;get contentPosition(){return this._contentPosition}_onDidVisibilityChange=this._register(new x);onDidVisibilityChange=this._onDidVisibilityChange.event;parent;headerArea;titleArea;contentArea;footerArea;partLayout;onThemeChange(t){this.parent&&super.onThemeChange(t)}create(t,n){this.parent=t,this.titleArea=this.createTitleArea(t,n),this.contentArea=this.createContentArea(t,n),this.partLayout=new L1(this.options,this.contentArea),this.updateStyles()}getContainer(){return this.parent}createTitleArea(t,n){}getTitleArea(){return this.titleArea}createContentArea(t,n){}getContentArea(){return this.contentArea}setHeaderArea(t){if(this.headerArea)throw new Error("Header already exists");!this.parent||!this.titleArea||(Cb(this.parent,t),t.classList.add("header-or-footer"),t.classList.add("header"),this.headerArea=t,this.partLayout?.setHeaderVisibility(!0),this.relayout())}setFooterArea(t){if(this.footerArea)throw new Error("Footer already exists");!this.parent||!this.titleArea||(this.parent.appendChild(t),t.classList.add("header-or-footer"),t.classList.add("footer"),this.footerArea=t,this.partLayout?.setFooterVisibility(!0),this.relayout())}removeHeaderArea(){this.headerArea&&(this.headerArea.remove(),this.headerArea=void 0,this.partLayout?.setHeaderVisibility(!1),this.relayout())}removeFooterArea(){this.footerArea&&(this.footerArea.remove(),this.footerArea=void 0,this.partLayout?.setFooterVisibility(!1),this.relayout())}relayout(){this.dimension&&this.contentPosition&&this.layout(this.dimension.width,this.dimension.height,this.contentPosition.top,this.contentPosition.left)}layoutContents(t,n){return lt(this.partLayout).layout(t,n)}_onDidChange=this._register(new x);get onDidChange(){return this._onDidChange.event}element;layout(t,n,i,r){this._dimension=new ln(t,n),this._contentPosition={top:i,left:r}}setVisible(t){this._onDidVisibilityChange.fire(t)}},L1=class o{constructor(e,t){this.options=e;this.contentArea=t}static HEADER_HEIGHT=35;static TITLE_HEIGHT=35;static Footer_HEIGHT=35;headerVisible=!1;footerVisible=!1;layout(e,t){let n;this.options.hasTitle?n=new ln(e,Math.min(t,o.TITLE_HEIGHT)):n=ln.None;let i;this.headerVisible?i=new ln(e,Math.min(t,o.HEADER_HEIGHT)):i=ln.None;let r;this.footerVisible?r=new ln(e,Math.min(t,o.Footer_HEIGHT)):r=ln.None;let s=e;this.options&&typeof this.options.borderWidth=="function"&&(s-=this.options.borderWidth());let a=new ln(s,t-n.height-i.height-r.height);return this.contentArea&&bb(this.contentArea,a.width,a.height),{headerSize:i,titleSize:n,contentSize:a,footerSize:r}}setFooterVisibility(e){this.footerVisible=e}setHeaderVisibility(e){this.headerVisible=e}},jI=class extends Na{_parts=new Set;get parts(){return Array.from(this._parts)}registerPart(e){return this._parts.add(e),re(()=>this.unregisterPart(e))}unregisterPart(e){this._parts.delete(e)}getPart(e){return this.getPartByDocument(e.ownerDocument)}getPartByDocument(e){if(this._parts.size>1){for(let t of this._parts)if(t.element?.ownerDocument===e)return t}return this.mainPart}get activePart(){return this.getPartByDocument(Ib())}};var ct=kM;function YI(o){return o===2||o===3}function Xl(o){switch(o){case 0:return"left";case 1:return"right";case 2:return"bottom";case 3:return"top";default:return"bottom"}}var wrt={[Xl(0)]:0,[Xl(1)]:1,[Xl(2)]:2,[Xl(3)]:3};function R1(o){switch(o){case 0:return"always";case 1:return"never";case 2:return"preserve";default:return"preserve"}}var Trt={[R1(0)]:0,[R1(1)]:1,[R1(2)]:2};var js=H("lifecycleService");function DM(o){switch(o){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}}var Ys=class extends N{constructor(t,n){super();this.logService=t;this.storageService=n;this._startupKind=this.resolveStartupKind(),this._register(this.storageService.onWillSaveState(i=>{i.reason===1&&this.storageService.store(Ys.LAST_SHUTDOWN_REASON_KEY,this.shutdownReason,1,1)}))}static LAST_SHUTDOWN_REASON_KEY="lifecyle.lastShutdownReason";_onBeforeShutdown=this._register(new x);onBeforeShutdown=this._onBeforeShutdown.event;_onWillShutdown=this._register(new x);onWillShutdown=this._onWillShutdown.event;_onDidShutdown=this._register(new x);onDidShutdown=this._onDidShutdown.event;_onBeforeShutdownError=this._register(new x);onBeforeShutdownError=this._onBeforeShutdownError.event;_onShutdownVeto=this._register(new x);onShutdownVeto=this._onShutdownVeto.event;_startupKind;get startupKind(){return this._startupKind}_phase=1;get phase(){return this._phase}phaseWhen=new Map;shutdownReason;resolveStartupKind(){let t=this.doResolveStartupKind()??1;return this.logService.trace(`[lifecycle] starting up (startup kind: ${t})`),t}doResolveStartupKind(){let t=this.storageService.getNumber(Ys.LAST_SHUTDOWN_REASON_KEY,1);this.storageService.remove(Ys.LAST_SHUTDOWN_REASON_KEY,1);let n;switch(t){case 3:n=3;break;case 4:n=4;break}return n}set phase(t){if(t<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===t)return;this.logService.trace(`lifecycle: phase changed (value: ${t})`),this._phase=t,_n(`code/LifecyclePhase/${DM(t)}`);let n=this.phaseWhen.get(this._phase);n&&(n.open(),this.phaseWhen.delete(this._phase))}async when(t){if(t<=this._phase)return;let n=this.phaseWhen.get(t);n||(n=new du,this.phaseWhen.set(t,n)),await n.wait()}};Ys=k([I(0,wi),I(1,Mt)],Ys);var zg=class extends Ys{beforeUnloadListener=void 0;unloadListener=void 0;ignoreBeforeUnload=!1;didUnload=!1;constructor(e,t){super(e,t),this.registerListeners()}registerListeners(){this.beforeUnloadListener=W(xe,ee.BEFORE_UNLOAD,e=>this.onBeforeUnload(e)),this.unloadListener=W(xe,ee.PAGE_HIDE,()=>this.onUnload())}onBeforeUnload(e){this.ignoreBeforeUnload?(this.logService.info("[lifecycle] onBeforeUnload triggered but ignored once"),this.ignoreBeforeUnload=!1):(this.logService.info("[lifecycle] onBeforeUnload triggered and handled with veto support"),this.doShutdown(()=>this.vetoBeforeUnload(e)))}vetoBeforeUnload(e){e.preventDefault(),e.returnValue=c("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}withExpectedShutdown(e,t){if(typeof e=="number")return this.shutdownReason=e,this.storageService.flush(1);this.ignoreBeforeUnload=!0;try{t?.()}finally{this.ignoreBeforeUnload=!1}}async shutdown(){this.logService.info("[lifecycle] shutdown triggered"),this.beforeUnloadListener?.dispose(),this.unloadListener?.dispose(),await this.storageService.flush(1),this.doShutdown()}doShutdown(e){let t=this.logService;this.storageService.flush(1);let n=!1;function i(r,s){typeof e=="function"&&(r instanceof Promise&&(t.error(`[lifecycle] Long running operations before shutdown are unsupported in the web (id: ${s})`),n=!0),r===!0&&(t.info(`[lifecycle]: Unload was prevented (id: ${s})`),n=!0))}return this._onBeforeShutdown.fire({reason:2,veto(r,s){i(r,s)},finalVeto(r,s){i(r(),s)}}),n&&typeof e=="function"?e():this.onUnload()}onUnload(){if(this.didUnload)return;this.didUnload=!0,this._register(W(xe,ee.PAGE_SHOW,t=>this.onLoadAfterUnload(t)));let e=this.logService;this._onWillShutdown.fire({reason:2,joiners:()=>[],token:yn.None,join(t,n){e.error(`[lifecycle] Long running operations during shutdown are unsupported in the web (id: ${n.id})`)},force:()=>{}}),this._onDidShutdown.fire()}onLoadAfterUnload(e){e.persisted&&this.withExpectedShutdown({disableShutdownHandling:!0},()=>xe.location.reload())}doResolveStartupKind(){let e=super.doResolveStartupKind();return typeof e!="number"&&performance.getEntriesByType("navigation").at(0)?.type==="reload"&&(e=3),e}};zg=k([I(0,wi),I(1,Mt)],zg);qn(js,zg,0);var Zl=H("hostService");var f5=c("open","open"),b5=c("close","close"),v5=c("find","find"),QI={open:f5,close:b5,find:v5};async function RM(o,e){let t=[];return await AM(o,t,e.logsHome,e.logsHome),t}async function AM(o,e,t,n){let i=await o.resolve(t);for(let{resource:r,isDirectory:s}of i.children||[])if(s)await AM(o,e,r,n);else{let a=(await o.readFile(r)).value.toString();if(a){let l=lu(n,r);l&&e.push({relativePath:l,contents:a})}}}var OM=H("editorPaneService");var XI;(e=>e.Workbench="workbench.contributions.kind")(XI||={});var xc=(i=>(i[i.BlockStartup=1]="BlockStartup",i[i.BlockRestore=2]="BlockRestore",i[i.AfterRestored=3]="AfterRestored",i[i.Eventually=4]="Eventually",i))(xc||{});function PM(o){let e=o;return!!e&&typeof e.editorTypeId=="string"}function y5(o){switch(o){case 3:return xc.AfterRestored;case 4:return xc.Eventually}}function MM(o){switch(o){case xc.BlockStartup:return 1;case xc.BlockRestore:return 2;case xc.AfterRestored:return 3;case xc.Eventually:return 4}}var Ec=class o extends N{static INSTANCE=new o;static BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20;static BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100;instantiationService;lifecycleService;logService;environmentService;editorPaneService;contributionsByPhase=new Map;contributionsByEditor=new Map;contributionsById=new Map;instancesById=new Map;instanceDisposables=this._register(new Y);timingsByPhase=new Map;get timings(){return this.timingsByPhase}pendingRestoredContributions=new Or;whenRestored=this.pendingRestoredContributions.p;registerWorkbenchContribution2(e,t,n){let i={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&(typeof n=="number"&&this.lifecycleService.phase>=n||typeof e=="string"&&PM(n)&&this.editorPaneService.didInstantiateEditorPane(n.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,i,typeof n=="number"?MM(n):this.lifecycleService.phase):(typeof n=="number"&&bh(this.contributionsByPhase,MM(n),[]).push(i),typeof e=="string"&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,i),PM(n)&&bh(this.contributionsByEditor,n.editorTypeId,[]).push(i)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,y5(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);let t=this.instantiationService,n=this.lifecycleService,i=this.logService,r=this.environmentService;if(!t||!n||!i||!r)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);let s=this.contributionsById.get(e);if(!s)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);n.phase<3&&i.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,i,r,s,n.phase);let a=this.instancesById.get(e);if(!a)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return a}start(e){let t=this.instantiationService=e.get(Ze),n=this.lifecycleService=e.get(js),i=this.logService=e.get(wi),r=this.environmentService=e.get(Yo),s=this.editorPaneService=e.get(OM);this._register(n.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(let a of[1,2,3,4])this.instantiateByPhase(t,n,i,r,a);for(let a of this.contributionsByEditor.keys())s.didInstantiateEditorPane(a)&&this.onEditor(a,t,n,i,r);this._register(s.onWillInstantiateEditorPane(a=>this.onEditor(a.typeId,t,n,i,r)))}onEditor(e,t,n,i,r){let s=this.contributionsByEditor.get(e);if(s){this.contributionsByEditor.delete(e);for(let a of s)this.safeCreateContribution(t,i,r,a,n.phase)}}instantiateByPhase(e,t,n,i,r){t.phase>=r?this.doInstantiateByPhase(e,n,i,r):t.when(r).then(()=>this.doInstantiateByPhase(e,n,i,r))}async doInstantiateByPhase(e,t,n,i){let r=this.contributionsByPhase.get(i);if(r)switch(this.contributionsByPhase.delete(i),i){case 1:case 2:{_n(`code/willCreateWorkbenchContributions/${i}`);for(let s of r)this.safeCreateContribution(e,t,n,s,i);_n(`code/didCreateWorkbenchContributions/${i}`);break}case 3:case 4:{i===4&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(r,e,t,n,i);break}}}doInstantiateWhenIdle(e,t,n,i,r){_n(`code/willCreateWorkbenchContributions/${r}`);let s=0,a=r===4?3e3:500,l=d=>{for(;s<e.length;){let u=e[s++];if(this.safeCreateContribution(t,n,i,u,r),d.timeRemaining()<1){pl(l,a);break}}s===e.length&&(_n(`code/didCreateWorkbenchContributions/${r}`),r===3&&this.pendingRestoredContributions.complete())};pl(l,a)}safeCreateContribution(e,t,n,i,r){if(typeof i.id=="string"&&this.instancesById.has(i.id))return;let s=Date.now();try{typeof i.id=="string"&&_n(`code/willCreateWorkbenchContribution/${r}/${i.id}`);let a=e.createInstance(i.ctor);typeof i.id=="string"&&(this.instancesById.set(i.id,a),this.contributionsById.delete(i.id)),Ax(a)&&this.instanceDisposables.add(a)}catch(a){t.error(`Unable to create workbench contribution '${i.id??i.ctor.name}'.`,a)}finally{typeof i.id=="string"&&_n(`code/didCreateWorkbenchContribution/${r}/${i.id}`)}if(typeof i.id=="string"||!n.isBuilt){let a=Date.now()-s;if(a>(r<3?o.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:o.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&t.warn(`Creation of workbench contribution '${i.id??i.ctor.name}' took ${a}ms.`),typeof i.id=="string"){let l=this.timingsByPhase.get(r);l||(l=[],this.timingsByPhase.set(r,l)),l.push([i.id,a])}}}},Xst=Ec.INSTANCE.registerWorkbenchContribution2.bind(Ec.INSTANCE),Zst=Ec.INSTANCE.getWorkbenchContribution.bind(Ec.INSTANCE);Be.add(XI.Workbench,Ec.INSTANCE);var Hg=class{constructor(e,t,n,i){this.fileService=e;this.environmentService=t;this.lifecycleService=n;this.logService=i}async getLogs(){return RM(this.fileService,this.environmentService)}async whenWorkbenchRestored(){this.logService.info("[driver] Waiting for restored lifecycle phase..."),await this.lifecycleService.when(3),this.logService.info("[driver] Restored lifecycle phase reached. Waiting for contributions..."),await Be.as(XI.Workbench).whenRestored,this.logService.info("[driver] Workbench contributions created.")}async setValue(e,t){let n=xe.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let i=n;i.value=t;let r=new Event("input",{bubbles:!0,cancelable:!0});i.dispatchEvent(r)}async isActiveElement(e){if(xe.document.querySelector(e)!==xe.document.activeElement){let n=[],i=xe.document.activeElement;for(;i;){let r=i.tagName,s=i.id?`#${i.id}`:"",a=An(i.className.split(/\s+/g).map(l=>l.trim())).map(l=>`.${l}`).join("");n.unshift(`${r}${s}${a}`),i=i.parentElement}throw new Error(`Active element not found. Current active element is '${n.join(" > ")}'. Looking for ${e}`)}return!0}async getElements(e,t){let n=xe.document.querySelectorAll(e),i=[];for(let r=0;r<n.length;r++){let s=n.item(r);i.push(this.serializeElement(s,t))}return i}serializeElement(e,t){let n=Object.create(null);for(let a=0;a<e.attributes.length;a++){let l=e.attributes.item(a);l&&(n[l.name]=l.value)}let i=[];if(t)for(let a=0;a<e.children.length;a++){let l=e.children.item(a);l&&i.push(this.serializeElement(l,!0))}let{left:r,top:s}=Xh(e);return{tagName:e.tagName,className:e.className,textContent:e.textContent||"",attributes:n,children:i,left:r,top:s}}async getElementXY(e,t,n){let i=typeof t=="number"&&typeof n=="number"?{x:t,y:n}:void 0;return this._getElementXY(e,i)}async typeInEditor(e,t){let n=xe.document.querySelector(e);if(!n)throw new Error(`Editor not found: ${e}`);let i=n,r=i.selectionStart,s=r+t.length,a=i.value,l=a.substr(0,r)+t+a.substr(r);i.value=l,i.setSelectionRange(s,s);let d=new Event("input",{bubbles:!0,cancelable:!0});i.dispatchEvent(d)}async getTerminalBuffer(e){let t=xe.document.querySelector(e);if(!t)throw new Error(`Terminal not found: ${e}`);let n=t.xterm;if(!n)throw new Error(`Xterm not found: ${e}`);let i=[];for(let r=0;r<n.buffer.active.length;r++)i.push(n.buffer.active.getLine(r).translateToString(!0));return i}async writeInTerminal(e,t){let n=xe.document.querySelector(e);if(!n)throw new Error(`Element not found: ${e}`);let i=n.xterm;if(!i)throw new Error(`Xterm not found: ${e}`);i.input(t)}getLocaleInfo(){return Promise.resolve({language:ps,locale:g_})}getLocalizedStrings(){return Promise.resolve({open:QI.open,close:QI.close,find:QI.find})}async _getElementXY(e,t){let n=xe.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let{left:i,top:r}=Xh(n),{width:s,height:a}=Qh(n),l,d;return t?(l=i+t.x,d=r+t.y):(l=i+s/2,d=r+a/2),l=Math.round(l),d=Math.round(d),{x:l,y:d}}async exitApplication(){}};Hg=k([I(0,Ut),I(1,Yo),I(2,js),I(3,wi)],Hg);function NM(o){Object.assign(xe,{driver:o.createInstance(Hg)})}var tr=class extends N{constructor(t,n={getWindowsCount:fb,getWindows:jh},i,r){super();this.hostService=i;this.environmentService=r;this.enableWindowFocusOnElementFocus(t),this.enableMultiWindowAwareTimeout(t,n),this.registerFullScreenListeners(t.vscodeWindowId)}static TIMEOUT_HANDLES=Number.MIN_SAFE_INTEGER;static TIMEOUT_DISPOSABLES=new Map;enableWindowFocusOnElementFocus(t){let n=t.HTMLElement.prototype.focus,i=this;t.HTMLElement.prototype.focus=function(r){i.onElementFocus(Re(this)),n.apply(this,[r])}}onElementFocus(t){let n=Pd();n!==t&&n.document.hasFocus()&&(t.focus(),!this.environmentService.extensionTestsLocationURI&&!t.document.hasFocus()&&this.hostService.focus(t))}enableMultiWindowAwareTimeout(t,n={getWindowsCount:fb,getWindows:jh}){let i=t.setTimeout;Object.defineProperty(t,"vscodeOriginalSetTimeout",{get:()=>i});let r=t.clearTimeout;Object.defineProperty(t,"vscodeOriginalClearTimeout",{get:()=>r}),t.setTimeout=function(s,a=0,...l){if(n.getWindowsCount()===1||typeof s=="string"||a===0)return i.apply(this,[s,a,...l]);let d=new Set,u=tr.TIMEOUT_HANDLES++;tr.TIMEOUT_DISPOSABLES.set(u,d);let p=qc(s,()=>{Bt(d),tr.TIMEOUT_DISPOSABLES.delete(u)});for(let{window:h,disposables:m}of n.getWindows()){if(mx(h)&&h.document.visibilityState==="hidden")continue;let g=!1,f=h.vscodeOriginalSetTimeout.apply(this,[(...C)=>{g||p(...C)},a,...l]),y=re(()=>{g=!0,h.vscodeOriginalClearTimeout(f),d.delete(y)});m.add(y),d.add(y)}return u},t.clearTimeout=function(s){let a=typeof s=="number"?tr.TIMEOUT_DISPOSABLES.get(s):void 0;a?(Bt(a),tr.TIMEOUT_DISPOSABLES.delete(s)):r.apply(this,[s])}}registerFullScreenListeners(t){this._register(this.hostService.onDidChangeFullScreen(({windowId:n,fullscreen:i})=>{if(n===t){let r=ma(t);r&&Y_(i,r.window)}}))}static async confirmOnShutdown(t,n){let i=t.get(br),r=t.get(He),s=n===2?Fe?c("quitMessageMac","Are you sure you want to quit?"):c("quitMessage","Are you sure you want to exit?"):c("closeWindowMessage","Are you sure you want to close the window?"),a=n===2?Fe?c({key:"quitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Quit"):c({key:"exitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Exit"):c({key:"closeWindowButtonLabel",comment:["&& denotes a mnemonic"]},"&&Close Window"),l=await i.confirm({message:s,primaryButton:a,checkbox:{label:c("doNotAskAgain","Do not ask me again")}});return l.confirmed&&l.checkboxChecked&&await r.updateValue("window.confirmBeforeClose","never"),l.confirmed}};tr=k([I(2,Zl),I(3,Ra)],tr);var ZI=class extends tr{constructor(t,n,i,r,s,a,l,d,u){super(xe,void 0,u,a);this.openerService=t;this.lifecycleService=n;this.dialogService=i;this.labelService=r;this.productService=s;this.browserEnvironmentService=a;this.layoutService=l;this.instantiationService=d;this.registerListeners(),this.create()}registerListeners(){this._register(this.lifecycleService.onWillShutdown(()=>this.onWillShutdown()));let t=el&&xe.visualViewport?xe.visualViewport:xe;this._register(W(t,ee.RESIZE,()=>{this.layoutService.layout(),el&&xe.scrollTo(0,0)})),this._register(W(this.layoutService.mainContainer,ee.WHEEL,n=>n.preventDefault(),{passive:!1})),this._register(W(this.layoutService.mainContainer,ee.CONTEXT_MENU,n=>Ae.stop(n,!0))),this._register(W(this.layoutService.mainContainer,ee.DROP,n=>Ae.stop(n,!0)))}onWillShutdown(){G.toPromise(G.any(G.once(new We(xe.document.body,ee.KEY_DOWN,!0).event),G.once(new We(xe.document.body,ee.MOUSE_DOWN,!0).event))).then(async()=>{await $i(3e3),await this.dialogService.prompt({type:In.Error,message:c("shutdownError","An unexpected error occurred that requires a reload of this page."),detail:c("shutdownErrorDetail","The workbench was unexpectedly disposed while running."),buttons:[{label:c({key:"reload",comment:["&& denotes a mnemonic"]},"&&Reload"),run:()=>xe.location.reload()}]})})}create(){this.setupOpenHandlers(),this.registerLabelFormatters(),this.registerCommands(),this.setupDriver()}setupDriver(){this.environmentService.enableSmokeTestDriver&&NM(this.instantiationService)}setupOpenHandlers(){this.openerService.setDefaultExternalOpener({openExternal:async t=>{let n=!1;if(this.browserEnvironmentService.options?.openerAllowedExternalUrlPrefixes){for(let i of this.browserEnvironmentService.options.openerAllowedExternalUrlPrefixes)if(t.startsWith(i)){n=!0;break}}if(ib(t,me.http)||ib(t,me.https))fs?sL(t,!n)||await this.dialogService.prompt({type:In.Warning,message:c("unableToOpenExternal","The browser interrupted the opening of a new tab or window. Press 'Open' to open it anyway."),detail:t,buttons:[{label:c({key:"open",comment:["&& denotes a mnemonic"]},"&&Open"),run:()=>n?RE(t):LE(t)},{label:c({key:"learnMore",comment:["&& denotes a mnemonic"]},"&&Learn More"),run:()=>this.openerService.open(j.parse("https://aka.ms/allow-vscode-popup"))}],cancelButton:!0}):n?RE(t):LE(t);else{let i=()=>{this.lifecycleService.withExpectedShutdown({disableShutdownHandling:!0},()=>xe.location.href=t)};i();let r=async()=>{let{downloadUrl:s}=this.productService,a,l=[{label:c({key:"openExternalDialogButtonRetry.v2",comment:["&& denotes a mnemonic"]},"&&Try Again"),run:()=>i()}];s!==void 0?(a=c("openExternalDialogDetail.v2",`We launched {0} on your computer.

If {1} did not launch, try again or install it below.`,this.productService.nameLong,this.productService.nameLong),l.push({label:c({key:"openExternalDialogButtonInstall.v3",comment:["&& denotes a mnemonic"]},"&&Install"),run:async()=>{await this.openerService.open(j.parse(s)),r()}})):a=c("openExternalDialogDetailNoInstall",`We launched {0} on your computer.

If {1} did not launch, try again below.`,this.productService.nameLong,this.productService.nameLong),await this.hostService.withExpectedShutdown(()=>this.dialogService.prompt({type:In.Info,message:c("openExternalDialogTitle","All done. You can close this tab now."),detail:a,buttons:l,cancelButton:!0}))};ib(t,this.productService.urlProtocol)&&await r()}return!0}})}registerLabelFormatters(){this._register(this.labelService.registerFormatter({scheme:me.vscodeUserData,priority:!0,formatting:{label:"(Settings) ${path}",separator:"/"}}))}registerCommands(){go.registerCommand("workbench.experimental.requestUsbDevice",async(t,n)=>xM(n)),go.registerCommand("workbench.experimental.requestSerialPort",async(t,n)=>EM(n)),go.registerCommand("workbench.experimental.requestHidDevice",async(t,n)=>CM(n))}};ZI=k([I(0,Ql),I(1,js),I(2,br),I(3,Xo),I(4,aP),I(5,TM),I(6,ct),I(7,Ze),I(8,Zl)],ZI);var I5=H("auxiliaryWindowService");var Kg=class extends tr{constructor(t,n,i,r,s,a){super(t,void 0,s,a);this.window=t;this.container=n;this.configurationService=r;this.whenStylesHaveLoaded=i.wait().then(()=>{}),this.registerListeners()}_onWillLayout=this._register(new x);onWillLayout=this._onWillLayout.event;_onDidLayout=this._register(new x);onDidLayout=this._onDidLayout.event;_onBeforeUnload=this._register(new x);onBeforeUnload=this._onBeforeUnload.event;_onUnload=this._register(new x);onUnload=this._onUnload.event;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;whenStylesHaveLoaded;registerListeners(){this._register(W(this.window,ee.BEFORE_UNLOAD,t=>this.handleBeforeUnload(t))),this._register(W(this.window,ee.UNLOAD,()=>this.handleUnload())),this._register(W(this.window,"unhandledrejection",t=>{bt(t.reason),t.preventDefault()})),this._register(W(this.window,ee.RESIZE,()=>this.layout())),this._register(W(this.container,ee.SCROLL,()=>this.container.scrollTop=0)),Cn?(this._register(W(this.container,ee.DROP,t=>Ae.stop(t,!0))),this._register(W(this.container,ee.WHEEL,t=>t.preventDefault(),{passive:!1})),this._register(W(this.container,ee.CONTEXT_MENU,t=>Ae.stop(t,!0)))):(this._register(W(this.window.document.body,ee.DRAG_OVER,t=>Ae.stop(t))),this._register(W(this.window.document.body,ee.DROP,t=>Ae.stop(t))))}handleBeforeUnload(t){let n;if(this._onBeforeUnload.fire({veto(s){s&&(n=s)}}),n){this.handleVetoBeforeClose(t,n);return}let i=this.configurationService.getValue("window.confirmBeforeClose");(i==="always"||i==="keyboardOnly"&&uu.getInstance().isModifierPressed)&&this.confirmBeforeClose(t)}handleVetoBeforeClose(t,n){this.preventUnload(t)}preventUnload(t){t.preventDefault(),t.returnValue=c("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}confirmBeforeClose(t){this.preventUnload(t)}handleUnload(){this._onUnload.fire()}layout(){let t=Qh(this.window.document.body,this.container);this._onWillLayout.fire(t),this._onDidLayout.fire(t)}createState(){return{bounds:{x:this.window.screenX,y:this.window.screenY,width:this.window.outerWidth,height:this.window.outerHeight},zoomLevel:$_(this.window)}}dispose(){this._store.isDisposed||(this._onWillDispose.fire(),super.dispose())}};Kg=k([I(3,He),I(4,Zl),I(5,Ra)],Kg);var za=class extends N{constructor(t,n,i,r,s,a){super();this.layoutService=t;this.dialogService=n;this.configurationService=i;this.telemetryService=r;this.hostService=s;this.environmentService=a}static DEFAULT_SIZE={width:800,height:600};static WINDOW_IDS=hl(xe)+1;_onDidOpenAuxiliaryWindow=this._register(new x);onDidOpenAuxiliaryWindow=this._onDidOpenAuxiliaryWindow.event;windows=new Map;async open(t){_n("code/auxiliaryWindow/willOpen");let n=await this.openWindow(t);if(!n)throw new Error(c("unableToOpenWindowError","Unable to open a new window."));let i=await this.resolveWindowId(n);bf(n,i);let r=new Y,{container:s,stylesLoaded:a}=this.createContainer(n,r,t),l=this.createAuxiliaryWindow(n,s,a),d=new Y;this.windows.set(n.vscodeWindowId,l),d.add(re(()=>this.windows.delete(n.vscodeWindowId)));let u=new Y;return G.once(l.onWillDispose)(()=>{n.close(),r.dispose(),d.dispose(),u.dispose()}),d.add(G0(n)),this._onDidOpenAuxiliaryWindow.fire({window:l,disposables:u}),_n("code/auxiliaryWindow/didOpen"),this.telemetryService.publicLog2("auxiliaryWindowOpen",{bounds:!!t?.bounds}),l}createAuxiliaryWindow(t,n,i){return new Kg(t,n,i,this.configurationService,this.hostService,this.environmentService)}async openWindow(t){let n=Pd(),i={x:n.screenX,y:n.screenY,width:n.outerWidth,height:n.outerHeight},r=Math.max(t?.bounds?.width??za.DEFAULT_SIZE.width,FT.WIDTH),s=Math.max(t?.bounds?.height??za.DEFAULT_SIZE.height,FT.HEIGHT),a={x:t?.bounds?.x??Math.max(i.x+i.width/2-r/2,0),y:t?.bounds?.y??Math.max(i.y+i.height/2-s/2,0),width:r,height:s};!t?.bounds&&a.x===i.x&&a.y===i.y&&(a={...a,x:a.x+30,y:a.y+30});let l=An(["popup=yes",`left=${a.x}`,`top=${a.y}`,`width=${a.width}`,`height=${a.height}`,t?.nativeTitlebar?"window-native-titlebar=yes":void 0,t?.disableFullscreen?"window-disable-fullscreen=yes":void 0,t?.mode===0?"window-maximized=yes":void 0,t?.mode===2?"window-fullscreen=yes":void 0]),d=xe.open(Tf?"":"about:blank",void 0,l.join(","));return!d&&Cn?(await this.dialogService.prompt({type:In.Warning,message:c("unableToOpenWindow","The browser interrupted the opening of a new window. Press 'Retry' to try again."),detail:c("unableToOpenWindowDetail","To avoid this problem in the future, please ensure to allow popups for this website."),buttons:[{label:c({key:"retry",comment:["&& denotes a mnemonic"]},"&&Retry"),run:()=>this.openWindow(t)}],cancelButton:!0})).result:d?.window}async resolveWindowId(t){return za.WINDOW_IDS++}createContainer(t,n,i){t.document.createElement=function(){throw new Error('Not allowed to create elements in child window JavaScript context. Always use the main window so that "xyz instanceof HTMLElement" continues to work.')},this.applyMeta(t);let{stylesLoaded:r}=this.applyCSS(t,n),s=this.applyHTML(t,n);return{stylesLoaded:r,container:s}}applyMeta(t){for(let i of['meta[charset="utf-8"]','meta[http-equiv="Content-Security-Policy"]','meta[name="viewport"]','meta[name="theme-color"]']){let r=xe.document.querySelector(i);if(r){let s=eL(t.document.head);if(wb(r,s),i==='meta[http-equiv="Content-Security-Policy"]'){let a=s.getAttribute("content");a&&s.setAttribute("content",a.replace(/(script-src[^\;]*)/,"script-src 'none'"))}}}let n=xe.document.querySelector('link[rel="icon"]');if(n){let i=tL(t.document.head);wb(n,i)}}applyCSS(t,n){_n("code/auxiliaryWindow/willApplyCSS");let i=new Map,r=new du;r.wait().then(()=>_n("code/auxiliaryWindow/didLoadCSSStyles"));let s=n.add(new Y),a=0;function l(){--a===0&&(s.dispose(),r.open())}function d(u){if(X0(u))return;let p=t.document.head.appendChild(u.cloneNode(!0));u.tagName.toLowerCase()==="link"&&(a++,s.add(W(p,"load",l)),s.add(W(p,"error",l))),i.set(u,p)}a++;try{for(let u of xe.document.head.querySelectorAll('link[rel="stylesheet"], style'))d(u)}finally{l()}return n.add(Z0(t)),n.add(xb.observe(xe.document.head,n,{childList:!0,subtree:!0})(u=>{for(let p of u)if(!(p.type!=="childList"||p.target.nodeName.toLowerCase()==="title"||p.target.nodeName.toLowerCase()==="script"||p.target.nodeName.toLowerCase()==="meta")){for(let h of p.addedNodes)if(Dn(h)&&(h.tagName.toLowerCase()==="style"||h.tagName.toLowerCase()==="link"))d(h);else if(h.nodeType===Node.TEXT_NODE&&h.parentNode){let m=i.get(h.parentNode);m&&(m.textContent=h.textContent)}for(let h of p.removedNodes){let m=i.get(h);m&&(m.parentNode?.removeChild(m),i.delete(h))}}})),_n("code/auxiliaryWindow/didApplyCSS"),{stylesLoaded:r}}applyHTML(t,n){_n("code/auxiliaryWindow/willApplyHTML");let i=document.createElement("div");return i.setAttribute("role","application"),j0(i,0,0,0,0,"relative"),i.style.display="flex",i.style.height="100%",i.style.flexDirection="column",t.document.body.append(i),n.add(Tb(xe.document.documentElement,t.document.documentElement)),n.add(Tb(xe.document.body,t.document.body)),n.add(Tb(this.layoutService.mainContainer,i,["class"])),_n("code/auxiliaryWindow/didApplyHTML"),i}getWindow(t){return this.windows.get(t)}};za=k([I(0,ct),I(1,br),I(2,He),I(3,$t),I(4,Zl),I(5,Ra)],za);qn(I5,za,1);var Jl=new ln(220,70),A1=new ln(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);var Vp=class o extends Bp{constructor(t,n,i,r,s){super(t,i,r,s);this.group=n}onDidChangeSizeConstraints=G.None;_onDidChangeControl=this._register(new x);onDidChangeControl=this._onDidChangeControl.event;static EDITOR_MEMENTOS=new Map;get minimumWidth(){return Jl.width}get maximumWidth(){return A1.width}get minimumHeight(){return Jl.height}get maximumHeight(){return A1.height}_input;get input(){return this._input}_options;get options(){return this._options}get window(){return ma(this.group.windowId,!0).window}get scopedContextKeyService(){}create(t){super.create(t),this.createEditor(t)}async setInput(t,n,i,r){this._input=t,this._options=n}clearInput(){this._input=void 0,this._options=void 0}setOptions(t){this._options=t}setVisible(t){super.setVisible(t),this.setEditorVisible(t)}setEditorVisible(t){}setBoundarySashes(t){}getEditorMemento(t,n,i,r=10){let s=`${this.getId()}${i}`,a=o.EDITOR_MEMENTOS.get(s);return a||(a=this._register(new O1(this.getId(),i,this.getMemento(1,1),r,t,n)),o.EDITOR_MEMENTOS.set(s,a)),a}getViewState(){}saveState(){for(let[,t]of o.EDITOR_MEMENTOS)t.id===this.getId()&&t.saveState();super.saveState()}dispose(){this._input=void 0,this._options=void 0,super.dispose()}},O1=class o extends N{constructor(t,n,i,r,s,a){super();this.id=t;this.key=n;this.memento=i;this.limit=r;this.editorGroupService=s;this.configurationService=a;this.updateConfiguration(void 0),this.registerListeners()}static SHARED_EDITOR_STATE=-1;cache;cleanedUp=!1;editorDisposables;shareEditorState=!1;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.updateConfiguration(t)))}updateConfiguration(t){(!t||t.affectsConfiguration(void 0,"workbench.editor.sharedViewState"))&&(this.shareEditorState=this.configurationService.getValue(void 0,"workbench.editor.sharedViewState")===!0)}saveEditorState(t,n,i){let r=this.doGetResource(n);if(!r||!t)return;let s=this.doLoad(),a=s.get(r.toString());a||(a=Object.create(null),s.set(r.toString(),a)),a[t.id]=i,this.shareEditorState&&(a[o.SHARED_EDITOR_STATE]=i),jn(n)&&this.clearEditorStateOnDispose(r,n)}loadEditorState(t,n){let i=this.doGetResource(n);if(!i||!t)return;let s=this.doLoad().get(i.toString());if(s){let a=s[t.id];if(a)return a;if(this.shareEditorState)return s[o.SHARED_EDITOR_STATE]}}clearEditorState(t,n){jn(t)&&this.editorDisposables?.delete(t);let i=this.doGetResource(t);if(i){let r=this.doLoad();if(n){let s=r.get(i.toString());s&&(delete s[n.id],Rd(s)&&r.delete(i.toString()))}else r.delete(i.toString())}}clearEditorStateOnDispose(t,n){this.editorDisposables||(this.editorDisposables=new Map),this.editorDisposables.has(n)||this.editorDisposables.set(n,G.once(n.onWillDispose)(()=>{this.clearEditorState(t),this.editorDisposables?.delete(n)}))}moveEditorState(t,n,i){let r=this.doLoad(),s=[...r.keys()];for(let a of s){let l=j.parse(a);if(!i.isEqualOrParent(l,t))continue;let d;if(fn(t,l))d=n;else{let p=x0(l.path,t.path);d=vt(n,l.path.substr(p+t.path.length+1))}let u=r.get(a,0);u&&(r.delete(a),r.set(d.toString(),u))}}doGetResource(t){return jn(t)?t.resource:t}doLoad(){if(!this.cache){this.cache=new or(this.limit);let t=this.memento[this.key];Array.isArray(t)&&this.cache.fromJSON(t)}return this.cache}saveState(){let t=this.doLoad();this.cleanedUp||(this.cleanUp(),this.cleanedUp=!0),this.memento[this.key]=t.toJSON()}cleanUp(){let t=this.doLoad(),n=[...t.entries()];for(let[i,r]of n)for(let s of Object.keys(r)){let a=Number(s);a===o.SHARED_EDITOR_STATE&&this.shareEditorState||this.editorGroupService.getGroup(a)||(delete r[a],Rd(r)&&t.delete(i))}}};var Gg=class o{constructor(e,t,n){this.ctor=e;this.typeId=t;this.name=n}static instantiatedEditorPanes=new Set;static didInstantiateEditorPane(e){return o.instantiatedEditorPanes.has(e)}static _onWillInstantiateEditorPane=new x;static onWillInstantiateEditorPane=o._onWillInstantiateEditorPane.event;static create(e,t,n){return new o(e,t,n)}instantiate(e,t){o._onWillInstantiateEditorPane.fire({typeId:this.typeId});let n=e.createInstance(this.ctor,t);return o.instantiatedEditorPanes.add(this.typeId),n}describes(e){return e.getId()===this.typeId}},P1=class{mapEditorPanesToEditors=new Map;registerEditorPane(e,t){return this.mapEditorPanesToEditors.set(e,t),re(()=>{this.mapEditorPanesToEditors.delete(e)})}getEditorPane(e){let t=this.findEditorPaneDescriptors(e);if(t.length!==0)return t.length===1?t[0]:e.prefersEditorPane(t)}findEditorPaneDescriptors(e,t){let n=[];for(let i of this.mapEditorPanesToEditors.keys()){let r=this.mapEditorPanesToEditors.get(i)||[];for(let s of r){let a=s.ctor;if(!t&&e.constructor===a){n.push(i);break}else if(t&&e instanceof a){n.push(i);break}}}return!t&&n.length===0?this.findEditorPaneDescriptors(e,!0):n}getEditorPaneByType(e){return wo.find(this.mapEditorPanesToEditors.keys(),t=>t.typeId===e)}getEditorPanes(){return Array.from(this.mapEditorPanesToEditors.keys())}getEditors(){let e=[];for(let t of this.mapEditorPanesToEditors.keys()){let n=this.mapEditorPanesToEditors.get(t);n&&e.push(...n.map(i=>i.ctor))}return e}};Be.add(Da.EditorPane,new P1);function FM(o,e,t,n){let i=o.getAriaLabel();return t&&!t.isPinned(o)&&(i=c("preview","{0}, preview",i)),t?.isSticky(e??o)&&(i=c("pinned","{0}, pinned",i)),t&&typeof n=="number"&&n>1&&(i=`${i}, ${t.ariaLabel}`),i}var M1=class extends jo{_element;boxContainer;_label;contents;visible;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;hover;constructor(e,t){super(),this._element=Pe(e,De(".monaco-dropdown")),this._label=Pe(this._element,De(".dropdown-label"));let n=t.labelRenderer;n||(n=r=>(r.textContent=t.label||"",null));for(let r of[ee.CLICK,ee.MOUSE_DOWN,Ct.Tap])this._register(W(this.element,r,s=>Ae.stop(s,!0)));for(let r of[ee.MOUSE_DOWN,Ct.Tap])this._register(W(this._label,r,s=>{Eb(s)&&(s.detail>1||s.button!==0)||(this.visible?this.hide():this.show())}));this._register(W(this._label,ee.KEY_UP,r=>{let s=new pt(r);(s.equals(3)||s.equals(10))&&(Ae.stop(r,!0),this.visible?this.hide():this.show())}));let i=n(this._label);i&&this._register(i),this._register(tn.addTarget(this._label))}get element(){return this._element}get label(){return this._label}set tooltip(e){this._label&&(!this.hover&&e!==""?this.hover=this._register(Di().setupManagedHover(Yt("mouse"),this._label,e)):this.hover&&this.hover.update(e))}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}isVisible(){return!!this.visible}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}},JI=class extends M1{constructor(t,n){super(t,n);this._options=n;this.actions=n.actions||[]}_menuOptions;_actions=[];set menuOptions(t){this._menuOptions=t}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(t){this._actions=t}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(t,n)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(t,n):void 0,getKeyBinding:t=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(t):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}};var Ypt={buttonBackground:"#0E639C",buttonHoverBackground:"#006BB3",buttonSeparator:A.white.toString(),buttonForeground:A.white.toString(),buttonBorder:void 0,buttonSecondaryBackground:void 0,buttonSecondaryForeground:void 0,buttonSecondaryHoverBackground:void 0},Ha=class extends N{options;_element;_label="";_labelElement;_labelShortElement;_hover;_onDidClick=this._register(new x);get onDidClick(){return this._onDidClick.event}_onDidEscape=this._register(new x);get onDidEscape(){return this._onDidEscape.event}focusTracker;constructor(e,t){super(),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);let n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,i=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=i||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(tn.addTarget(this._element)),[ee.CLICK,Ct.Tap].forEach(r=>{this._register(W(this._element,r,s=>{if(!this.enabled){Ae.stop(s);return}this._onDidClick.fire(s)}))}),this._register(W(this._element,ee.KEY_DOWN,r=>{let s=new pt(r),a=!1;this.enabled&&(s.equals(3)||s.equals(10))?(this._onDidClick.fire(r),a=!0):s.equals(9)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&Ae.stop(s,!0)})),this._register(W(this._element,ee.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(W(this._element,ee.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(qo(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){let t=[];for(let n of Ba(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;let i=document.createElement("span");i.textContent=n,t.push(i)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||vl(this._label)&&vl(e)&&_b(this._label,e))return;this._element.classList.add("monaco-text-button");let t=this.options.supportShortLabel?this._labelElement:this._element;if(vl(e)){let i=VI(e,{inline:!0});i.dispose();let r=i.element.querySelector("p")?.innerHTML;if(r){let s=Gh(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=s}else dr(t)}else this.options.supportIcons?dr(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=C1(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set labelShort(e){!this.options.supportShortLabel||!this._labelShortElement||(this.options.supportIcons?dr(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}set icon(e){this._element.classList.add(...je.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}set checked(e){e?(this._element.classList.add("checked"),this._element.setAttribute("aria-checked","true")):(this._element.classList.remove("checked"),this._element.setAttribute("aria-checked","false"))}get checked(){return this._element.classList.contains("checked")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(Di().setupManagedHover(this.options.hoverDelegate??Yt("mouse"),this._element,e)):this._hover&&this._hover.update(e)}focus(){this._element.focus()}hasFocus(){return ar(this._element)}},N1=class extends N{button;action;dropdownButton;separatorContainer;separator;element;_onDidClick=this._register(new x);onDidClick=this._onDidClick.event;constructor(e,t){super(),this.element=document.createElement("div"),this.element.classList.add("monaco-button-dropdown"),e.appendChild(this.element),this.button=this._register(new Ha(this.element,t)),this._register(this.button.onDidClick(r=>this._onDidClick.fire(r))),this.action=this._register(new Ii("primaryAction",C1(this.button.label),void 0,!0,async()=>this._onDidClick.fire(void 0))),this.separatorContainer=document.createElement("div"),this.separatorContainer.classList.add("monaco-button-dropdown-separator"),this.separator=document.createElement("div"),this.separatorContainer.appendChild(this.separator),this.element.appendChild(this.separatorContainer);let n=t.buttonBorder;n&&(this.separatorContainer.style.borderTop="1px solid "+n,this.separatorContainer.style.borderBottom="1px solid "+n);let i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground;this.separatorContainer.style.backgroundColor=i??"",this.separator.style.backgroundColor=t.buttonSeparator??"",this.dropdownButton=this._register(new Ha(this.element,{...t,title:!1,supportIcons:!0})),this._register(Di().setupManagedHover(Yt("mouse"),this.dropdownButton.element,c("button dropdown more actions","More Actions..."))),this.dropdownButton.element.setAttribute("aria-haspopup","true"),this.dropdownButton.element.setAttribute("aria-expanded","false"),this.dropdownButton.element.classList.add("monaco-dropdown-button"),this.dropdownButton.icon=Q.dropDownButton,this._register(this.dropdownButton.onDidClick(r=>{let s=Array.isArray(t.actions)?t.actions:t.actions.getActions();t.contextMenuProvider.showContextMenu({getAnchor:()=>this.dropdownButton.element,getActions:()=>t.addPrimaryActionToDropdown===!1?[...s]:[this.action,...s],actionRunner:t.actionRunner,onHide:()=>this.dropdownButton.element.setAttribute("aria-expanded","false")}),this.dropdownButton.element.setAttribute("aria-expanded","true")}))}dispose(){super.dispose(),this.element.remove()}set label(e){this.button.label=e,this.action.label=e}set icon(e){this.button.icon=e}set enabled(e){this.button.enabled=e,this.dropdownButton.enabled=e,this.element.classList.toggle("disabled",!e)}get enabled(){return this.button.enabled}set checked(e){this.button.checked=e}get checked(){return this.button.checked}focus(){this.button.focus()}hasFocus(){return this.button.hasFocus()||this.dropdownButton.hasFocus()}},eS=class{constructor(e,t){this.options=t;this._element=document.createElement("div"),this._element.classList.add("monaco-description-button"),this._button=new Ha(this._element,t),this._descriptionElement=document.createElement("div"),this._descriptionElement.classList.add("monaco-button-description"),this._element.appendChild(this._descriptionElement),e.appendChild(this._element)}_button;_element;_descriptionElement;get onDidClick(){return this._button.onDidClick}get element(){return this._element}set label(e){this._button.label=e}set icon(e){this._button.icon=e}get enabled(){return this._button.enabled}set enabled(e){this._button.enabled=e}set checked(e){this._button.checked=e}get checked(){return this._button.checked}focus(){this._button.focus()}hasFocus(){return this._button.hasFocus()}dispose(){this._button.dispose()}set description(e){this.options.supportIcons?dr(this._descriptionElement,...Ba(e)):this._descriptionElement.textContent=e}},qg=class{constructor(e){this.container=e}_buttons=[];_buttonStore=new Y;dispose(){this._buttonStore.dispose()}get buttons(){return this._buttons}clear(){this._buttonStore.clear(),this._buttons.length=0}addButton(e){let t=this._buttonStore.add(new Ha(this.container,e));return this.pushButton(t),t}addButtonWithDescription(e){let t=this._buttonStore.add(new eS(this.container,e));return this.pushButton(t),t}addButtonWithDropdown(e){let t=this._buttonStore.add(new N1(this.container,e));return this.pushButton(t),t}pushButton(e){this._buttons.push(e);let t=this._buttons.length-1;this._buttonStore.add(W(e.element,ee.KEY_DOWN,n=>{let i=new pt(n),r=!0,s;i.equals(15)?s=t>0?t-1:this._buttons.length-1:i.equals(17)?s=t===this._buttons.length-1?0:t+1:r=!1,r&&typeof s=="number"&&(this._buttons[s].focus(),Ae.stop(n,!0))}))}};var Wp=class{modifierLabels;constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;let i=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=n(a);if(l===null)return null;i[r]=x5(a,l,this.modifierLabels[e])}return i.join(" ")}},F1=new Wp({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:c({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:c({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:c({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:c({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:c({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:c({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),eht=new Wp({ctrlKey:c({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:c({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:c({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:c({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:c({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:c({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:c({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:c({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:c({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),tht=new Wp({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),nht=new Wp({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function x5(o,e,t){if(e===null)return"";let n=[];return o.ctrlKey&&n.push(t.ctrlKey),o.shiftKey&&n.push(t.shiftKey),o.altKey&&n.push(t.altKey),o.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}var E5=()=>({msLoopTime:-1,msDelayTime:-1,dispose:()=>{}}),C5=E5;function VM(o,e){return C5(o,e)}var B1="done",V1="active",tS="infinite",nS="infinite-long-running",W1="discrete";var iS=class o extends N{static LONG_RUNNING_INFINITE_THRESHOLD=1e4;static PROGRESS_SIGNAL_DEFAULT_DELAY=3e3;workedVal;element;bit;totalWork;showDelayedScheduler;longRunningScheduler;progressSignal=this._register(new ot);constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new yi(()=>ga(this.element),0)),this.longRunningScheduler=this._register(new yi(()=>this.infiniteLongRunning(),o.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(V1,tS,nS,W1),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(B1),this.element.classList.contains(tS)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(W1,B1,nS),this.element.classList.add(V1,tS),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(nS)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute("aria-valuemax",e.toString()),this}hasTotal(){return Li(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){let t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(tS,nS,B1),this.element.classList.add(V1,W1),this.element.setAttribute("aria-valuenow",e.toString()),this.bit.style.width=100*(this.workedVal/t)+"%",this}getContainer(){return this.element}show(e){this.showDelayedScheduler.cancel(),this.progressSignal.value=VM(o.PROGRESS_SIGNAL_DEFAULT_DELAY),typeof e=="number"?this.showDelayedScheduler.schedule(e):ga(this.element)}hide(){ml(this.element),this.showDelayedScheduler.cancel(),this.progressSignal.clear()}};var oS=class{constructor(e,t=0,n=e.length,i=t-1){this.items=e;this.start=t;this.end=n;this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}};var rS=class{_history;_limit;_navigator;constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isFirst(){return this._currentPosition()===0}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}clear(){this._initialize([]),this._onChange()}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new oS(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(let t of e)this._history.add(t)}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}};var $g=De;var sS=class extends Bn{contextViewProvider;element;input;actionbar;options;message;placeholder;tooltip;ariaLabel;validation;state="idle";mirror;cachedHeight;cachedContentHeight;maxHeight=Number.POSITIVE_INFINITY;scrollableElement;hover;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidHeightChange=this._register(new x);onDidHeightChange=this._onDidHeightChange.event;constructor(e,t,n){super(),this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Pe(e,$g(".monaco-inputbox.idle"));let i=this.options.flexibleHeight?"textarea":"input",r=Pe(this.element,$g(".ibwrapper"));if(this.input=Pe(r,$g(i+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Pe(r,$g("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new kI(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Pe(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));let s=this._register(new We(e.ownerDocument,"selectionchange")),a=G.filter(s.event,()=>e.ownerDocument.getSelection()?.anchorNode===r);this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Wa(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(Di().setupManagedHover(Yt("mouse"),this.input,e))}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get mirrorElement(){return this.mirror}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get step(){return this.input.step}set step(e){this.input.step=e}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:yb(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return ar(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){let e=this.input.selectionStart;if(e===null)return null;let t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}setEnabled(e){e?this.enable():this.disable()}get width(){return pu(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){let n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&Si(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));let n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${$o(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}isInputValid(){return!!this.validation&&!this.validation(this.value)}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){let t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=pu(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=Pe(i,$g(".monaco-inputbox-container")),t();let r={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?sM(this.message.content,r):rM(this.message.content,r);s.classList.add(this.classForType(this.message.type));let a=this.stylesForType(this.message.type);return s.style.backgroundColor=a.background??"",s.style.color=a.foreground??"",s.style.border=a.border?`1px solid ${a.border}`:"",Pe(e,s),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=c("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=c("alertWarningMessage","Warning: {0}",this.message.content):n=c("alertInfoMessage","Info: {0}",this.message.content),yp(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="\xA0",this.layout()}applyStyles(){let e=this.options.inputBoxStyles,t=e.inputBackground??"",n=e.inputForeground??"",i=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor="inherit",this.input.style.color=n,this.element.style.border=`1px solid ${$o(i,"transparent")}`}layout(){if(!this.mirror)return;let e=this.cachedContentHeight;this.cachedContentHeight=yb(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){let t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,r=t.value;n!==null&&i!==null&&(this.value=r.substr(0,n)+e+r.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}},ed=class extends sS{history;observer;_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;constructor(e,t,n){let i=c({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is \u21C5 to represent the up and down arrow keys.']}," or {0} for history","\u21C5"),r=c({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is \u21C5 to represent the up and down arrow keys.']}," ({0} for history)","\u21C5");super(e,t,n),this.history=new rS(n.history,100);let s=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(i)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){let a=this.placeholder.endsWith(")")?i:r,l=this.placeholder+a;n.showPlaceholderOnFocus&&!ar(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(d=>{d.target.textContent||s()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>s()),this.onblur(this.input,()=>{let a=l=>{if(this.placeholder.endsWith(l)){let d=this.placeholder.slice(0,this.placeholder.length-l.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};a(r)||a(i)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}prependHistory(e){let t=this.getHistory();this.clearHistory(),e.forEach(n=>{this.history.add(n)}),t.forEach(n=>{this.history.add(n)})}getHistory(){return this.history.getHistory()}isAtFirstInHistory(){return this.history.isFirst()}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",pg(this.value?this.value:c("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,pg(this.value))}clearHistory(){this.history.clear()}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}};var w5=c("caseDescription","Match Case"),T5=c("wordsDescription","Match Whole Word"),k5=c("regexDescription","Use Regular Expression"),aS=class extends Va{constructor(e){super({icon:Q.caseSensitive,title:w5+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Yt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},lS=class extends Va{constructor(e){super({icon:Q.wholeWord,title:T5+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Yt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},dS=class extends Va{constructor(e){super({icon:Q.regex,title:k5+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Yt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};var D5=c("defaultLabel","input"),jg=class extends Bn{static OPTION_CHANGE="optionChange";placeholder;validation;label;showCommonFindToggles;fixFocusOnOptionClickEnabled=!0;imeSessionInProgress=!1;additionalTogglesDisposables=this._register(new ot);controls;regex;wholeWords;caseSensitive;additionalToggles=[];domNode;inputBox;_onDidOptionChange=this._register(new x);onDidOptionChange=this._onDidOptionChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_onMouseDown=this._register(new x);onMouseDown=this._onMouseDown.event;_onInput=this._register(new x);onInput=this._onInput.event;_onKeyUp=this._register(new x);onKeyUp=this._onKeyUp.event;_onCaseSensitiveKeyDown=this._register(new x);onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event;_onRegexKeyDown=this._register(new x);onRegexKeyDown=this._onRegexKeyDown.event;constructor(e,t,n){super(),this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||D5,this.showCommonFindToggles=!!n.showCommonFindToggles;let i=n.appendCaseSensitiveLabel||"",r=n.appendWholeWordsLabel||"",s=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,d=!!n.flexibleWidth,u=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new ed(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:d,flexibleMaxHeight:u,inputBoxStyles:n.inputBoxStyles}));let p=this._register(ql());if(this.showCommonFindToggles){this.regex=this._register(new dS({appendTitle:s,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.regex.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(m=>{this._onRegexKeyDown.fire(m)})),this.wholeWords=this._register(new lS({appendTitle:r,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.wholeWords.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new aS({appendTitle:i,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.caseSensitive.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(m=>{this._onCaseSensitiveKeyDown.fire(m)}));let h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,m=>{if(m.equals(15)||m.equals(17)||m.equals(9)){let g=h.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let f=-1;m.equals(17)?f=(g+1)%h.length:m.equals(15)&&(g===0?f=h.length-1:f=g-1),m.equals(9)?(h[g].blur(),this.inputBox.focus()):f>=0&&h[f].focus(),Ae.stop(m,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(W(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(W(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get isImeSessionInProgress(){return this.imeSessionInProgress}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(let e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(let e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(let t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Y;for(let t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((t,n)=>t+n.width(),0)}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}focusOnRegex(){this.regex?.focus()}_lastHighlightFindOptions=0;highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}clearValidation(){this.inputBox.hideMessage()}};var Dvt={keybindingLabelBackground:J(jA),keybindingLabelForeground:J(YA),keybindingLabelBorder:J(QA),keybindingLabelBottomBorder:J(XA),keybindingLabelShadow:J(Ku)};var cS={buttonForeground:J(nT),buttonSeparator:J(PA),buttonBackground:J(Gu),buttonHoverBackground:J(MA),buttonSecondaryForeground:J(FA),buttonSecondaryBackground:J(ry),buttonSecondaryHoverBackground:J(BA),buttonBorder:J(NA)};var WM={progressBarBackground:J(oA)};var A5={inputActiveOptionBorder:J(Jw),inputActiveOptionForeground:J(tT),inputActiveOptionBackground:J(eT)},_vt={activeForeground:J(qu),activeBackground:J(VA),activeBorder:J(WA),inactiveForeground:J(UA),inactiveBackground:J(zA),inactiveBorder:J(HA),inactiveHoverBackground:J(KA)};var Lvt={checkboxBackground:J(GA),checkboxBorder:J($A),checkboxForeground:J(qA)};var Rvt={dialogBackground:J(oi),dialogForeground:J(Ls),dialogShadow:J(Ku),dialogBorder:J(pe),errorIconForeground:J(vA),warningIconForeground:J(yA),infoIconForeground:J(IA),textLinkForeground:J(ey)};var U1={inputBackground:J(xA),inputForeground:J(EA),inputBorder:J($u),inputValidationInfoBorder:J(TA),inputValidationInfoBackground:J(CA),inputValidationInfoForeground:J(wA),inputValidationWarningBorder:J(_A),inputValidationWarningBackground:J(kA),inputValidationWarningForeground:J(DA),inputValidationErrorBorder:J(AA),inputValidationErrorBackground:J(LA),inputValidationErrorForeground:J(RA)};var Avt={listFilterWidgetBackground:J(dO),listFilterWidgetOutline:J(cO),listFilterWidgetNoMatchesOutline:J(uO),listFilterWidgetShadow:J(pO),inputBoxStyles:U1,toggleStyles:A5},Ovt={badgeBackground:J(Ol),badgeForeground:J(ty),badgeBorder:J(pe)};var Pvt={breadcrumbsBackground:J(gA),breadcrumbsForeground:J(mA),breadcrumbsHoverForeground:J(Xw),breadcrumbsFocusForeground:J(Xw),breadcrumbsFocusAndSelectionForeground:J(fA)};var Mvt={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:J(ZA),listFocusForeground:J(JA),listFocusOutline:J(eO),listActiveSelectionBackground:J(bo),listActiveSelectionForeground:J(Rs),listActiveSelectionIconForeground:J(ay),listFocusAndSelectionOutline:J(tO),listFocusAndSelectionBackground:J(bo),listFocusAndSelectionForeground:J(Rs),listInactiveSelectionBackground:J(nO),listInactiveSelectionIconForeground:J(oO),listInactiveSelectionForeground:J(iO),listInactiveFocusBackground:J(rO),listInactiveFocusOutline:J(sO),listHoverBackground:J(iT),listHoverForeground:J(oT),listDropOverBackground:J(aO),listDropBetweenBackground:J(lO),listSelectionOutline:J(It),listHoverOutline:J(It),treeIndentGuidesStroke:J(Yu),treeInactiveIndentGuidesStroke:J(hO),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:J(Pl),tableColumnsBorder:J(mO),tableOddRowsBackgroundColor:J(gO)};var UM={selectBackground:J(ju),selectListBackground:J(OA),selectForeground:J(qm),decoratorRightForeground:J(CO),selectBorder:J($m),focusBorder:J(Fi),listFocusBackground:J(kO),listInactiveSelectionIconForeground:J(TO),listFocusForeground:J(wO),listFocusOutline:eA(It,A.transparent.toString()),listHoverBackground:J(iT),listHoverForeground:J(oT),listHoverOutline:J(It),selectListBorder:J(Qw),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0};var Nvt={shadowColor:J(Ku),borderColor:J(fO),foregroundColor:J(bO),backgroundColor:J(vO),selectionForegroundColor:J(yO),selectionBackgroundColor:J(IO),selectionBorderColor:J(SO),separatorColor:J(xO),scrollbarShadow:J(Pl),scrollbarSliderBackground:J(ny),scrollbarSliderHoverBackground:J(iy),scrollbarSliderActiveBackground:J(oy)};var Up=class{constructor(e){this._container=e}hover;set text(e){dr(this._container,...Ba(e??""))}set title(e){!this.hover&&e?this.hover=Di().setupManagedHover(Yt("mouse"),this._container,e):this.hover&&this.hover.update(e)}dispose(){this.hover?.dispose()}};var ts=class extends Vp{static PLACEHOLDER_LABEL_MAX_LENGTH=1024;container;scrollbar;inputDisposable=this._register(new ot);constructor(e,t,n,i,r){super(e,t,n,i,r)}createEditor(e){this.container=document.createElement("div"),this.container.className="monaco-editor-pane-placeholder",this.container.style.outline="none",this.container.tabIndex=0,this.scrollbar=this._register(new Fa(this.container,{horizontal:1,vertical:1})),e.appendChild(this.scrollbar.getDomNode())}async setInput(e,t,n,i){await super.setInput(e,t,n,i),!i.isCancellationRequested&&(this.inputDisposable.value=await this.renderInput(e,t))}async renderInput(e,t){let[n,i]=oE(this.container,this.scrollbar);dn(n);let r=new Y,{icon:s,label:a,actions:l}=await this.getContents(e,t,r),d=s0(a,ts.PLACEHOLDER_LABEL_MAX_LENGTH),u=n.appendChild(De(".editor-placeholder-icon-container")),p=r.add(new Up(u));p.text=s;let h=n.appendChild(De(".editor-placeholder-label-container")),m=document.createElement("span");if(m.textContent=d,h.appendChild(m),n.setAttribute("aria-label",`${FM(e,void 0,this.group,void 0)}, ${d}`),l.length){let g=n.appendChild(De(".editor-placeholder-buttons-container")),f=r.add(new qg(g));for(let y=0;y<l.length;y++){let C=r.add(f.addButton({...cS,secondary:y!==0}));C.label=l[y].label,r.add(C.onDidClick(w=>{w&&Ae.stop(w,!0),l[y].run()}))}}return i.scanDomNode(),r}clearInput(){this.container&&dn(this.container),this.inputDisposable.clear(),super.clearInput()}layout(e){let[t,n]=oE(this.container,this.scrollbar);bb(t,e.width,e.height),n.scanDomNode(),t.classList.toggle("max-height-200px",e.height<=200)}focus(){super.focus(),this.container?.focus()}dispose(){this.container?.remove(),super.dispose()}};ts=k([I(2,$t),I(3,en),I(4,Mt)],ts);var td=class extends ts{constructor(t,n,i,r,s,a){super(td.ID,t,n,i,a);this.commandService=r;this.workspaceService=s}static ID="workbench.editors.workspaceTrustRequiredEditor";static LABEL=c("trustRequiredEditor","Workspace Trust Required");static DESCRIPTOR=Gg.create(td,this.ID,this.LABEL);getTitle(){return td.LABEL}async getContents(){return{icon:"$(workspace-untrusted)",label:yu(ML(this.workspaceService.getWorkspace()))?c("requiresFolderTrustText","The file is not displayed in the editor because trust has not been granted to the folder."):c("requiresWorkspaceTrustText","The file is not displayed in the editor because trust has not been granted to the workspace."),actions:[{label:c("manageTrust","Manage Workspace Trust"),run:()=>this.commandService.executeCommand("workbench.trust.manage")}]}}};td=k([I(1,$t),I(2,en),I(3,Ci),I(4,bn),I(5,Mt)],td);var Cc=class extends ts{constructor(t,n,i,r,s,a){super(Cc.ID,t,n,i,r);this.fileService=s;this.dialogService=a}static ID="workbench.editors.errorEditor";static LABEL=c("errorEditor","Error Editor");static DESCRIPTOR=Gg.create(Cc,this.ID,this.LABEL);async getContents(t,n,i){let r=t.resource,s=n.error,a=s?.fileOperationResult===1,l;a?l=c("unavailableResourceErrorEditorText","The editor could not be opened because the file was not found."):By(s)&&s.forceMessage?l=s.message:s?l=c("unknownErrorEditorTextWithError","The editor could not be opened due to an unexpected error: {0}",a0(Us(s),ts.PLACEHOLDER_LABEL_MAX_LENGTH/2)):l=c("unknownErrorEditorTextWithoutError","The editor could not be opened due to an unexpected error.");let d="$(error)";By(s)&&(s.forceSeverity===In.Info?d="$(info)":s.forceSeverity===In.Warning&&(d="$(warning)"));let u;return By(s)&&s.actions.length>0?u=s.actions.map(p=>({label:p.label,run:()=>{let h=p.run();h instanceof Promise&&h.catch(m=>this.dialogService.error(Us(m)))}})):u=[{label:c("retry","Try Again"),run:()=>this.group.openEditor(t,{...n,source:1})}],a&&r&&this.fileService.hasProvider(r)&&i.add(this.fileService.onDidFilesChange(p=>{p.contains(r,1,0)&&this.group.openEditor(t,n)})),{icon:d,label:l,actions:u??[]}}};Cc=k([I(1,$t),I(2,en),I(3,Mt),I(4,Ut),I(5,br)],Cc);var vr=class extends ts{constructor(t,n,i,r,s,a){super(t,n,r,s,a);this.callbacks=i}_onDidChangeMetadata=this._register(new x);onDidChangeMetadata=this._onDidChangeMetadata.event;_onDidOpenInPlace=this._register(new x);onDidOpenInPlace=this._onDidOpenInPlace.event;metadata;getTitle(){return this.input?this.input.getName():c("binaryEditor","Binary Viewer")}async getContents(t,n){let i=await t.resolve();if(!(i instanceof Ap))throw new Error("Unable to open file as binary");let r=i.getSize();return this.handleMetadataChanged(typeof r=="number"?hr.formatSize(r):""),{icon:"$(warning)",label:c("binaryError","The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."),actions:[{label:c("openAnyway","Open Anyway"),run:async()=>{await this.callbacks.openInternal(t,n),this._onDidOpenInPlace.fire()}}]}}handleMetadataChanged(t){this.metadata=t,this._onDidChangeMetadata.fire()}getMetadata(){return this.metadata}};vr=k([I(5,Mt)],vr);var QM=v("tab.activeBackground",gr,c("tabActiveBackground","Active tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),nIt=v("tab.unfocusedActiveBackground",QM,c("tabUnfocusedActiveBackground","Active tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),O5=v("tab.inactiveBackground",{dark:"#2D2D2D",light:"#ECECEC",hcDark:null,hcLight:null},c("tabInactiveBackground","Inactive tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),iIt=v("tab.unfocusedInactiveBackground",O5,c("tabUnfocusedInactiveBackground","Inactive tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),wc=v("tab.activeForeground",{dark:A.white,light:"#333333",hcDark:A.white,hcLight:"#292929"},c("tabActiveForeground","Active tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),zM=v("tab.inactiveForeground",{dark:ce(wc,.5),light:ce(wc,.7),hcDark:A.white,hcLight:"#292929"},c("tabInactiveForeground","Inactive tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),oIt=v("tab.unfocusedActiveForeground",{dark:ce(wc,.5),light:ce(wc,.7),hcDark:A.white,hcLight:"#292929"},c("tabUnfocusedActiveForeground","Active tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),rIt=v("tab.unfocusedInactiveForeground",{dark:ce(zM,.5),light:ce(zM,.5),hcDark:A.white,hcLight:"#292929"},c("tabUnfocusedInactiveForeground","Inactive tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),HM=v("tab.hoverBackground",null,c("tabHoverBackground","Tab background color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),sIt=v("tab.unfocusedHoverBackground",{dark:ce(HM,.5),light:ce(HM,.7),hcDark:null,hcLight:null},c("tabUnfocusedHoverBackground","Tab background color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),KM=v("tab.hoverForeground",null,c("tabHoverForeground","Tab foreground color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),aIt=v("tab.unfocusedHoverForeground",{dark:ce(KM,.5),light:ce(KM,.5),hcDark:null,hcLight:null},c("tabUnfocusedHoverForeground","Tab foreground color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),lIt=v("tab.border",{dark:"#252526",light:"#F3F3F3",hcDark:pe,hcLight:pe},c("tabBorder","Border to separate tabs from each other. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),dIt=v("tab.lastPinnedBorder",{dark:Yu,light:Yu,hcDark:pe,hcLight:pe},c("lastPinnedTabBorder","Border to separate pinned tabs from other tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),GM=v("tab.activeBorder",null,c("tabActiveBorder","Border on the bottom of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),cIt=v("tab.unfocusedActiveBorder",{dark:ce(GM,.5),light:ce(GM,.7),hcDark:null,hcLight:null},c("tabActiveUnfocusedBorder","Border on the bottom of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),z1=v("tab.activeBorderTop",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},c("tabActiveBorderTop","Border to the top of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),uIt=v("tab.unfocusedActiveBorderTop",{dark:ce(z1,.5),light:ce(z1,.7),hcDark:null,hcLight:"#B5200D"},c("tabActiveUnfocusedBorderTop","Border to the top of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),pIt=v("tab.selectedBorderTop",z1,c("tabSelectedBorderTop","Border to the top of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),hIt=v("tab.selectedBackground",QM,c("tabSelectedBackground","Background of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),mIt=v("tab.selectedForeground",wc,c("tabSelectedForeground","Foreground of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),qM=v("tab.hoverBorder",null,c("tabHoverBorder","Border to highlight tabs when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),gIt=v("tab.unfocusedHoverBorder",{dark:ce(qM,.5),light:ce(qM,.7),hcDark:null,hcLight:pe},c("tabUnfocusedHoverBorder","Border to highlight tabs in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),fIt=v("tab.dragAndDropBorder",{dark:wc,light:wc,hcDark:It,hcLight:It},c("tabDragAndDropBorder","Border between tabs to indicate that a tab can be inserted between two tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),pS=v("tab.activeModifiedBorder",{dark:"#3399CC",light:"#33AAEE",hcDark:null,hcLight:pe},c("tabActiveModifiedBorder","Border on the top of modified active tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),$M=v("tab.inactiveModifiedBorder",{dark:ce(pS,.5),light:ce(pS,.5),hcDark:A.white,hcLight:pe},c("tabInactiveModifiedBorder","Border on the top of modified inactive tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),bIt=v("tab.unfocusedActiveModifiedBorder",{dark:ce(pS,.5),light:ce(pS,.7),hcDark:A.white,hcLight:pe},c("unfocusedActiveModifiedBorder","Border on the top of modified active tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),vIt=v("tab.unfocusedInactiveModifiedBorder",{dark:ce($M,.5),light:ce($M,.5),hcDark:A.white,hcLight:pe},c("unfocusedINactiveModifiedBorder","Border on the top of modified inactive tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),yIt=v("editorPane.background",gr,c("editorPaneBackground","Background color of the editor pane visible on the left and right side of the centered editor layout.")),IIt=v("editorGroup.emptyBackground",null,c("editorGroupEmptyBackground","Background color of an empty editor group. Editor groups are the containers of editors.")),SIt=v("editorGroup.focusedEmptyBorder",{dark:null,light:null,hcDark:Fi,hcLight:Fi},c("editorGroupFocusedEmptyBorder","Border color of an empty editor group that is focused. Editor groups are the containers of editors.")),xIt=v("editorGroupHeader.tabsBackground",{dark:"#252526",light:"#F3F3F3",hcDark:null,hcLight:null},c("tabsContainerBackground","Background color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.")),EIt=v("editorGroupHeader.tabsBorder",null,c("tabsContainerBorder","Border color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.")),CIt=v("editorGroupHeader.noTabsBackground",gr,c("editorGroupHeaderBackground",'Background color of the editor group title header when (`"workbench.editor.showTabs": "single"`). Editor groups are the containers of editors.')),wIt=v("editorGroupHeader.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("editorTitleContainerBorder","Border color of the editor group title header. Editor groups are the containers of editors.")),XM=v("editorGroup.border",{dark:"#444444",light:"#E7E7E7",hcDark:pe,hcLight:pe},c("editorGroupBorder","Color to separate multiple editor groups from each other. Editor groups are the containers of editors.")),ZM=v("editorGroup.dropBackground",{dark:A.fromHex("#53595D").transparent(.5),light:A.fromHex("#2677CB").transparent(.18),hcDark:null,hcLight:A.fromHex("#0F4A85").transparent(.5)},c("editorDragAndDropBackground","Background color when dragging editors around. The color should have transparency so that the editor contents can still shine through.")),TIt=v("editorGroup.dropIntoPromptForeground",Ls,c("editorDropIntoPromptForeground","Foreground color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),kIt=v("editorGroup.dropIntoPromptBackground",oi,c("editorDropIntoPromptBackground","Background color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),DIt=v("editorGroup.dropIntoPromptBorder",{dark:null,light:null,hcDark:pe,hcLight:pe},c("editorDropIntoPromptBorder","Border color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),JM=v("sideBySideEditor.horizontalBorder",XM,c("sideBySideEditor.horizontalBorder","Color to separate two editors from each other when shown side by side in an editor group from top to bottom.")),eN=v("sideBySideEditor.verticalBorder",XM,c("sideBySideEditor.verticalBorder","Color to separate two editors from each other when shown side by side in an editor group from left to right.")),H1=v("panel.background",gr,c("panelBackground","Panel background color. Panels are shown below the editor area and contain views like output and integrated terminal.")),P5=v("panel.border",{dark:A.fromHex("#808080").transparent(.35),light:A.fromHex("#808080").transparent(.35),hcDark:pe,hcLight:pe},c("panelBorder","Panel border color to separate the panel from the editor. Panels are shown below the editor area and contain views like output and integrated terminal.")),Yg=v("panelTitle.activeForeground",{dark:"#E7E7E7",light:"#424242",hcDark:A.white,hcLight:Ml},c("panelActiveTitleForeground","Title color for the active panel. Panels are shown below the editor area and contain views like output and integrated terminal.")),_It=v("panelTitle.inactiveForeground",{dark:ce(Yg,.6),light:ce(Yg,.75),hcDark:A.white,hcLight:Ml},c("panelInactiveTitleForeground","Title color for the inactive panel. Panels are shown below the editor area and contain views like output and integrated terminal.")),LIt=v("panelTitle.activeBorder",{dark:Yg,light:Yg,hcDark:pe,hcLight:"#B5200D"},c("panelActiveTitleBorder","Border color for the active panel title. Panels are shown below the editor area and contain views like output and integrated terminal.")),RIt=v("panelInput.border",{dark:$u,light:A.fromHex("#ddd"),hcDark:$u,hcLight:$u},c("panelInputBorder","Input box border for inputs in the panel.")),AIt=v("panel.dropBorder",Yg,c("panelDragAndDropBorder","Drag and drop feedback color for the panel titles. Panels are shown below the editor area and contain views like output and integrated terminal.")),K1=v("panelSection.dropBackground",ZM,c("panelSectionDragAndDropBackground","Drag and drop feedback color for the panel sections. The color should have transparency so that the panel sections can still shine through. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),tN=v("panelSectionHeader.background",{dark:A.fromHex("#808080").transparent(.2),light:A.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},c("panelSectionHeaderBackground","Panel section header background color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),nN=v("panelSectionHeader.foreground",null,c("panelSectionHeaderForeground","Panel section header foreground color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),iN=v("panelSectionHeader.border",pe,c("panelSectionHeaderBorder","Panel section header border color used when multiple views are stacked vertically in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),oN=v("panelSection.border",P5,c("panelSectionBorder","Panel section border color used when multiple views are stacked horizontally in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),rN=v("panelStickyScroll.background",H1,c("panelStickyScrollBackground","Background color of sticky scroll in the panel.")),sN=v("panelStickyScroll.border",null,c("panelStickyScrollBorder","Border color of sticky scroll in the panel.")),aN=v("panelStickyScroll.shadow",Pl,c("panelStickyScrollShadow","Shadow color of sticky scroll in the panel.")),M5=v("outputView.background",null,c("outputViewBackground","Output view background color."));v("outputViewStickyScroll.background",M5,c("outputViewStickyScrollBackground","Output view sticky scroll background color."));var OIt=v("banner.background",{dark:bo,light:Ni(bo,.3),hcDark:bo,hcLight:bo},c("banner.background","Banner background color. The banner is shown under the title bar of the window.")),PIt=v("banner.foreground",Rs,c("banner.foreground","Banner foreground color. The banner is shown under the title bar of the window.")),MIt=v("banner.iconForeground",fr,c("banner.iconForeground","Banner icon color. The banner is shown under the title bar of the window.")),Xs=v("statusBar.foreground",{dark:"#FFFFFF",light:"#FFFFFF",hcDark:"#FFFFFF",hcLight:Ml},c("statusBarForeground","Status bar foreground color when a workspace or folder is opened. The status bar is shown in the bottom of the window.")),lN=v("statusBar.noFolderForeground",Xs,c("statusBarNoFolderForeground","Status bar foreground color when no folder is opened. The status bar is shown in the bottom of the window.")),dN=v("statusBar.background",{dark:"#007ACC",light:"#007ACC",hcDark:null,hcLight:null},c("statusBarBackground","Status bar background color when a workspace or folder is opened. The status bar is shown in the bottom of the window.")),cN=v("statusBar.noFolderBackground",{dark:"#68217A",light:"#68217A",hcDark:null,hcLight:null},c("statusBarNoFolderBackground","Status bar background color when no folder is opened. The status bar is shown in the bottom of the window.")),G1=v("statusBar.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("statusBarBorder","Status bar border color separating to the sidebar and editor. The status bar is shown in the bottom of the window.")),uN=v("statusBar.focusBorder",{dark:Xs,light:Xs,hcDark:null,hcLight:Xs},c("statusBarFocusBorder","Status bar border color when focused on keyboard navigation. The status bar is shown in the bottom of the window.")),pN=v("statusBar.noFolderBorder",G1,c("statusBarNoFolderBorder","Status bar border color separating to the sidebar and editor when no folder is opened. The status bar is shown in the bottom of the window.")),NIt=v("statusBarItem.activeBackground",{dark:A.white.transparent(.18),light:A.white.transparent(.18),hcDark:A.white.transparent(.18),hcLight:A.black.transparent(.18)},c("statusBarItemActiveBackground","Status bar item background color when clicking. The status bar is shown in the bottom of the window.")),hN=v("statusBarItem.focusBorder",{dark:Xs,light:Xs,hcDark:null,hcLight:It},c("statusBarItemFocusBorder","Status bar item border color when focused on keyboard navigation. The status bar is shown in the bottom of the window.")),Zs=v("statusBarItem.hoverBackground",{dark:A.white.transparent(.12),light:A.white.transparent(.12),hcDark:A.white.transparent(.12),hcLight:A.black.transparent(.12)},c("statusBarItemHoverBackground","Status bar item background color when hovering. The status bar is shown in the bottom of the window.")),Xg=v("statusBarItem.hoverForeground",Xs,c("statusBarItemHoverForeground","Status bar item foreground color when hovering. The status bar is shown in the bottom of the window.")),mN=v("statusBarItem.compactHoverBackground",{dark:A.white.transparent(.2),light:A.white.transparent(.2),hcDark:A.white.transparent(.2),hcLight:A.black.transparent(.2)},c("statusBarItemCompactHoverBackground","Status bar item background color when hovering an item that contains two hovers. The status bar is shown in the bottom of the window.")),FIt=v("statusBarItem.prominentForeground",Xs,c("statusBarProminentItemForeground","Status bar prominent items foreground color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),BIt=v("statusBarItem.prominentBackground",A.black.transparent(.5),c("statusBarProminentItemBackground","Status bar prominent items background color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),VIt=v("statusBarItem.prominentHoverForeground",Xg,c("statusBarProminentItemHoverForeground","Status bar prominent items foreground color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),WIt=v("statusBarItem.prominentHoverBackground",{dark:A.black.transparent(.3),light:A.black.transparent(.3),hcDark:A.black.transparent(.3),hcLight:null},c("statusBarProminentItemHoverBackground","Status bar prominent items background color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),UIt=v("statusBarItem.errorBackground",{dark:Ni(qw,.4),light:Ni(qw,.4),hcDark:null,hcLight:"#B5200D"},c("statusBarErrorItemBackground","Status bar error items background color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),zIt=v("statusBarItem.errorForeground",A.white,c("statusBarErrorItemForeground","Status bar error items foreground color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),HIt=v("statusBarItem.errorHoverForeground",Xg,c("statusBarErrorItemHoverForeground","Status bar error items foreground color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),KIt=v("statusBarItem.errorHoverBackground",Zs,c("statusBarErrorItemHoverBackground","Status bar error items background color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),GIt=v("statusBarItem.warningBackground",{dark:Ni(Ao,.4),light:Ni(Ao,.4),hcDark:null,hcLight:"#895503"},c("statusBarWarningItemBackground","Status bar warning items background color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),qIt=v("statusBarItem.warningForeground",A.white,c("statusBarWarningItemForeground","Status bar warning items foreground color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),$It=v("statusBarItem.warningHoverForeground",Xg,c("statusBarWarningItemHoverForeground","Status bar warning items foreground color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),jIt=v("statusBarItem.warningHoverBackground",Zs,c("statusBarWarningItemHoverBackground","Status bar warning items background color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),YIt=v("activityBar.background",{dark:"#333333",light:"#2C2C2C",hcDark:"#000000",hcLight:"#FFFFFF"},c("activityBarBackground","Activity bar background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),zp=v("activityBar.foreground",{dark:A.white,light:A.white,hcDark:A.white,hcLight:Ml},c("activityBarForeground","Activity bar item foreground color when it is active. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),QIt=v("activityBar.inactiveForeground",{dark:ce(zp,.4),light:ce(zp,.4),hcDark:A.white,hcLight:Ml},c("activityBarInActiveForeground","Activity bar item foreground color when it is inactive. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),XIt=v("activityBar.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("activityBarBorder","Activity bar border color separating to the side bar. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),ZIt=v("activityBar.activeBorder",{dark:zp,light:zp,hcDark:pe,hcLight:pe},c("activityBarActiveBorder","Activity bar border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),JIt=v("activityBar.activeFocusBorder",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},c("activityBarActiveFocusBorder","Activity bar focus border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),eSt=v("activityBar.activeBackground",null,c("activityBarActiveBackground","Activity bar background color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),tSt=v("activityBar.dropBorder",{dark:zp,light:zp,hcDark:null,hcLight:null},c("activityBarDragAndDropBorder","Drag and drop feedback color for the activity bar items. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),gN=v("activityBarBadge.background",{dark:"#007ACC",light:"#007ACC",hcDark:"#000000",hcLight:"#0F4A85"},c("activityBarBadgeBackground","Activity notification badge background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),fN=v("activityBarBadge.foreground",A.white,c("activityBarBadgeForeground","Activity notification badge foreground color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),Qg=v("activityBarTop.foreground",{dark:"#E7E7E7",light:"#424242",hcDark:A.white,hcLight:Ml},c("activityBarTop","Active foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),nSt=v("activityBarTop.activeBorder",{dark:Qg,light:Qg,hcDark:pe,hcLight:"#B5200D"},c("activityBarTopActiveFocusBorder","Focus border color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),iSt=v("activityBarTop.activeBackground",null,c("activityBarTopActiveBackground","Background color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),oSt=v("activityBarTop.inactiveForeground",{dark:ce(Qg,.6),light:ce(Qg,.75),hcDark:A.white,hcLight:Ml},c("activityBarTopInActiveForeground","Inactive foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),rSt=v("activityBarTop.dropBorder",Qg,c("activityBarTopDragAndDropBorder","Drag and drop feedback color for the items in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),sSt=v("activityBarTop.background",null,c("activityBarTopBackground","Background color of the activity bar when set to top / bottom.")),aSt=v("profileBadge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:A.white,hcLight:A.black},c("profileBadgeBackground","Profile badge background color. The profile badge shows on top of the settings gear icon in the activity bar.")),lSt=v("profileBadge.foreground",{dark:A.white,light:"#333333",hcDark:A.black,hcLight:A.white},c("profileBadgeForeground","Profile badge foreground color. The profile badge shows on top of the settings gear icon in the activity bar.")),dSt=v("statusBarItem.remoteBackground",gN,c("statusBarItemHostBackground","Background color for the remote indicator on the status bar.")),N5=v("statusBarItem.remoteForeground",fN,c("statusBarItemHostForeground","Foreground color for the remote indicator on the status bar.")),cSt=v("statusBarItem.remoteHoverForeground",Xg,c("statusBarRemoteItemHoverForeground","Foreground color for the remote indicator on the status bar when hovering.")),uSt=v("statusBarItem.remoteHoverBackground",{dark:Zs,light:Zs,hcDark:Zs,hcLight:null},c("statusBarRemoteItemHoverBackground","Background color for the remote indicator on the status bar when hovering.")),pSt=v("statusBarItem.offlineBackground","#6c1717",c("statusBarItemOfflineBackground","Status bar item background color when the workbench is offline.")),hSt=v("statusBarItem.offlineForeground",N5,c("statusBarItemOfflineForeground","Status bar item foreground color when the workbench is offline.")),mSt=v("statusBarItem.offlineHoverForeground",Xg,c("statusBarOfflineItemHoverForeground","Status bar item foreground hover color when the workbench is offline.")),gSt=v("statusBarItem.offlineHoverBackground",{dark:Zs,light:Zs,hcDark:Zs,hcLight:null},c("statusBarOfflineItemHoverBackground","Status bar item background hover color when the workbench is offline.")),fSt=v("extensionBadge.remoteBackground",gN,c("extensionBadge.remoteBackground","Background color for the remote badge in the extensions view.")),bSt=v("extensionBadge.remoteForeground",fN,c("extensionBadge.remoteForeground","Foreground color for the remote badge in the extensions view.")),hS=v("sideBar.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#000000",hcLight:"#FFFFFF"},c("sideBarBackground","Side bar background color. The side bar is the container for views like explorer and search.")),bN=v("sideBar.foreground",null,c("sideBarForeground","Side bar foreground color. The side bar is the container for views like explorer and search.")),vSt=v("sideBar.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("sideBarBorder","Side bar border color on the side separating to the editor. The side bar is the container for views like explorer and search.")),ySt=v("sideBarTitle.background",hS,c("sideBarTitleBackground","Side bar title background color. The side bar is the container for views like explorer and search.")),ISt=v("sideBarTitle.foreground",bN,c("sideBarTitleForeground","Side bar title foreground color. The side bar is the container for views like explorer and search.")),q1=v("sideBar.dropBackground",ZM,c("sideBarDragAndDropBackground","Drag and drop feedback color for the side bar sections. The color should have transparency so that the side bar sections can still shine through. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),vN=v("sideBarSectionHeader.background",{dark:A.fromHex("#808080").transparent(.2),light:A.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},c("sideBarSectionHeaderBackground","Side bar section header background color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),yN=v("sideBarSectionHeader.foreground",bN,c("sideBarSectionHeaderForeground","Side bar section header foreground color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),$1=v("sideBarSectionHeader.border",pe,c("sideBarSectionHeaderBorder","Side bar section header border color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),SSt=v("sideBarActivityBarTop.border",$1,c("sideBarActivityBarTopBorder","Border color between the activity bar at the top/bottom and the views.")),IN=v("sideBarStickyScroll.background",hS,c("sideBarStickyScrollBackground","Background color of sticky scroll in the side bar.")),SN=v("sideBarStickyScroll.border",null,c("sideBarStickyScrollBorder","Border color of sticky scroll in the side bar.")),xN=v("sideBarStickyScroll.shadow",Pl,c("sideBarStickyScrollShadow","Shadow color of sticky scroll in the side bar.")),Qs=v("titleBar.activeForeground",{dark:"#CCCCCC",light:"#333333",hcDark:"#FFFFFF",hcLight:"#292929"},c("titleBarActiveForeground","Title bar foreground when the window is active.")),EN=v("titleBar.inactiveForeground",{dark:ce(Qs,.6),light:ce(Qs,.6),hcDark:null,hcLight:"#292929"},c("titleBarInactiveForeground","Title bar foreground when the window is inactive.")),jM=v("titleBar.activeBackground",{dark:"#3C3C3C",light:"#DDDDDD",hcDark:"#000000",hcLight:"#FFFFFF"},c("titleBarActiveBackground","Title bar background when the window is active.")),xSt=v("titleBar.inactiveBackground",{dark:ce(jM,.6),light:ce(jM,.6),hcDark:null,hcLight:null},c("titleBarInactiveBackground","Title bar background when the window is inactive.")),ESt=v("titleBar.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("titleBarBorder","Title bar border color.")),F5=v("menubar.selectionForeground",Qs,c("menubarSelectionForeground","Foreground color of the selected menu item in the menubar.")),YM=v("menubar.selectionBackground",{dark:Hm,light:Hm,hcDark:null,hcLight:null},c("menubarSelectionBackground","Background color of the selected menu item in the menubar.")),CSt=v("menubar.selectionBorder",{dark:null,light:null,hcDark:It,hcLight:It},c("menubarSelectionBorder","Border color of the selected menu item in the menubar.")),wSt=v("commandCenter.foreground",Qs,c("commandCenter-foreground","Foreground color of the command center"),!1),TSt=v("commandCenter.activeForeground",F5,c("commandCenter-activeForeground","Active foreground color of the command center"),!1),kSt=v("commandCenter.inactiveForeground",EN,c("commandCenter-inactiveForeground","Foreground color of the command center when the window is inactive"),!1),DSt=v("commandCenter.background",{dark:A.white.transparent(.05),hcDark:null,light:A.black.transparent(.05),hcLight:null},c("commandCenter-background","Background color of the command center"),!1),_St=v("commandCenter.activeBackground",{dark:A.white.transparent(.08),hcDark:YM,light:A.black.transparent(.08),hcLight:YM},c("commandCenter-activeBackground","Active background color of the command center"),!1),LSt=v("commandCenter.border",{dark:ce(Qs,.2),hcDark:pe,light:ce(Qs,.2),hcLight:pe},c("commandCenter-border","Border color of the command center"),!1),RSt=v("commandCenter.activeBorder",{dark:ce(Qs,.3),hcDark:Qs,light:ce(Qs,.3),hcLight:Qs},c("commandCenter-activeBorder","Active border color of the command center"),!1),ASt=v("commandCenter.inactiveBorder",ce(EN,.25),c("commandCenter-inactiveBorder","Border color of the command center when the window is inactive"),!1),OSt=v("notificationCenter.border",{dark:Gm,light:Gm,hcDark:pe,hcLight:pe},c("notificationCenterBorder","Notifications center border color. Notifications slide in from the bottom right of the window.")),PSt=v("notificationToast.border",{dark:Gm,light:Gm,hcDark:pe,hcLight:pe},c("notificationToastBorder","Notification toast border color. Notifications slide in from the bottom right of the window.")),MSt=v("notifications.foreground",Ls,c("notificationsForeground","Notifications foreground color. Notifications slide in from the bottom right of the window.")),uS=v("notifications.background",oi,c("notificationsBackground","Notifications background color. Notifications slide in from the bottom right of the window.")),NSt=v("notificationLink.foreground",ey,c("notificationsLink","Notification links foreground color. Notifications slide in from the bottom right of the window.")),FSt=v("notificationCenterHeader.foreground",null,c("notificationCenterHeaderForeground","Notifications center header foreground color. Notifications slide in from the bottom right of the window.")),B5=v("notificationCenterHeader.background",{dark:Zi(uS,.3),light:Ni(uS,.05),hcDark:uS,hcLight:uS},c("notificationCenterHeaderBackground","Notifications center header background color. Notifications slide in from the bottom right of the window.")),BSt=v("notifications.border",B5,c("notificationsBorder","Notifications border color separating from other notifications in the notifications center. Notifications slide in from the bottom right of the window.")),VSt=v("notificationsErrorIcon.foreground",Km,c("notificationsErrorIconForeground","The color used for the icon of error notifications. Notifications slide in from the bottom right of the window.")),WSt=v("notificationsWarningIcon.foreground",Ao,c("notificationsWarningIconForeground","The color used for the icon of warning notifications. Notifications slide in from the bottom right of the window.")),USt=v("notificationsInfoIcon.foreground",fr,c("notificationsInfoIconForeground","The color used for the icon of info notifications. Notifications slide in from the bottom right of the window.")),zSt=v("window.activeBorder",{dark:null,light:null,hcDark:pe,hcLight:pe},c("windowActiveBorder","The color used for the border of the window when it is active. Only supported in the macOS and Linux desktop client when using the custom title bar.")),HSt=v("window.inactiveBorder",{dark:null,light:null,hcDark:pe,hcLight:pe},c("windowInactiveBorder","The color used for the border of the window when it is inactive. Only supported in the macOS and Linux desktop client when using the custom title bar."));var Hp=class extends Vp{constructor(t,n,i,r,s,a,l,d,u,p){super(t,n,r,d,a);this.instantiationService=s;this.textResourceConfigurationService=l;this.editorService=u;this.editorGroupService=p;this.viewState=this.getEditorMemento(p,l,i,100)}viewState;groupListener=this._register(new ot);editorViewStateDisposables;setEditorVisible(t){this.groupListener.value=this.group.onWillCloseEditor(n=>this.onWillCloseEditor(n)),super.setEditorVisible(t)}onWillCloseEditor(t){let n=t.editor;n===this.input&&this.updateEditorViewState(n)}clearInput(){this.updateEditorViewState(this.input),super.clearInput()}saveState(){this.updateEditorViewState(this.input),super.saveState()}updateEditorViewState(t){if(!t||!this.tracksEditorViewState(t))return;let n=this.toEditorViewStateResource(t);n&&(this.tracksDisposedEditorViewState()||(this.editorViewStateDisposables||(this.editorViewStateDisposables=new Map),this.editorViewStateDisposables.has(t)||this.editorViewStateDisposables.set(t,G.once(t.onWillDispose)(()=>{this.clearEditorViewState(n,this.group),this.editorViewStateDisposables?.delete(t)}))),t.isDisposed()&&!this.tracksDisposedEditorViewState()||!this.shouldRestoreEditorViewState(t)&&!this.group.contains(t)?this.clearEditorViewState(n,this.group):t.isDisposed()||this.saveEditorViewState(n))}shouldRestoreEditorViewState(t,n){return n?.newInGroup?this.textResourceConfigurationService.getValue(eo.getOriginalUri(t,{supportSideBySide:1}),"workbench.editor.restoreViewState")!==!1:!0}getViewState(){let t=this.input;if(!t||!this.tracksEditorViewState(t))return;let n=this.toEditorViewStateResource(t);if(n)return this.computeEditorViewState(n)}saveEditorViewState(t){let n=this.computeEditorViewState(t);n&&this.viewState.saveEditorState(this.group,t,n)}loadEditorViewState(t,n){if(!t||!this.tracksEditorViewState(t)||!this.shouldRestoreEditorViewState(t,n))return;let i=this.toEditorViewStateResource(t);if(i)return this.viewState.loadEditorState(this.group,i)}moveEditorViewState(t,n,i){return this.viewState.moveEditorState(t,n,i)}clearEditorViewState(t,n){this.viewState.clearEditorState(t,n)}dispose(){if(super.dispose(),this.editorViewStateDisposables){for(let[,t]of this.editorViewStateDisposables)t.dispose();this.editorViewStateDisposables=void 0}}tracksDisposedEditorViewState(){return!1}};Hp=k([I(3,$t),I(4,Ze),I(5,Mt),I(6,ii),I(7,en),I(8,Xt),I(9,Ul)],Hp);function V5(o){let e=o;return typeof e?.primary=="object"&&typeof e.secondary=="object"}var yr=class extends Hp{constructor(t,n,i,r,s,a,l,d,u){super(yr.ID,t,yr.VIEW_STATE_PREFERENCE_KEY,n,i,s,l,r,d,u);this.configurationService=a;this.registerListeners()}static ID=wP;static SIDE_BY_SIDE_LAYOUT_SETTING="workbench.editor.splitInGroupLayout";static VIEW_STATE_PREFERENCE_KEY="sideBySideEditorViewState";get minimumPrimaryWidth(){return this.primaryEditorPane?this.primaryEditorPane.minimumWidth:0}get maximumPrimaryWidth(){return this.primaryEditorPane?this.primaryEditorPane.maximumWidth:Number.POSITIVE_INFINITY}get minimumPrimaryHeight(){return this.primaryEditorPane?this.primaryEditorPane.minimumHeight:0}get maximumPrimaryHeight(){return this.primaryEditorPane?this.primaryEditorPane.maximumHeight:Number.POSITIVE_INFINITY}get minimumSecondaryWidth(){return this.secondaryEditorPane?this.secondaryEditorPane.minimumWidth:0}get maximumSecondaryWidth(){return this.secondaryEditorPane?this.secondaryEditorPane.maximumWidth:Number.POSITIVE_INFINITY}get minimumSecondaryHeight(){return this.secondaryEditorPane?this.secondaryEditorPane.minimumHeight:0}get maximumSecondaryHeight(){return this.secondaryEditorPane?this.secondaryEditorPane.maximumHeight:Number.POSITIVE_INFINITY}set minimumWidth(t){}set maximumWidth(t){}set minimumHeight(t){}set maximumHeight(t){}get minimumWidth(){return this.minimumPrimaryWidth+this.minimumSecondaryWidth}get maximumWidth(){return this.maximumPrimaryWidth+this.maximumSecondaryWidth}get minimumHeight(){return this.minimumPrimaryHeight+this.minimumSecondaryHeight}get maximumHeight(){return this.maximumPrimaryHeight+this.maximumSecondaryHeight}_boundarySashes;onDidCreateEditors=this._register(new x);_onDidChangeSizeConstraints=this._register(new Td);onDidChangeSizeConstraints=G.any(this.onDidCreateEditors.event,this._onDidChangeSizeConstraints.event);_onDidChangeSelection=this._register(new x);onDidChangeSelection=this._onDidChangeSelection.event;primaryEditorPane=void 0;secondaryEditorPane=void 0;primaryEditorContainer;secondaryEditorContainer;splitview;splitviewDisposables=this._register(new Y);editorDisposables=this._register(new Y);orientation=this.configurationService.getValue(yr.SIDE_BY_SIDE_LAYOUT_SETTING)==="vertical"?0:1;dimension=new ln(0,0);lastFocusedSide=void 0;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationUpdated(t)))}onConfigurationUpdated(t){t.affectsConfiguration(yr.SIDE_BY_SIDE_LAYOUT_SETTING)&&(this.orientation=this.configurationService.getValue(yr.SIDE_BY_SIDE_LAYOUT_SETTING)==="vertical"?0:1,this.splitview&&this.recreateSplitview())}recreateSplitview(){let t=lt(this.getContainer()),n=this.getSplitViewRatio();this.splitview&&(this.splitview.el.remove(),this.splitviewDisposables.clear()),this.createSplitView(t,n),this.layout(this.dimension)}getSplitViewRatio(){let t;if(this.splitview){let n=this.splitview.getViewSize(0),i=this.splitview.getViewSize(1);if(Math.abs(n-i)>1){let r=this.splitview.orientation===1?this.dimension.width:this.dimension.height;t=n/r}}return t}createEditor(t){t.classList.add("side-by-side-editor"),this.secondaryEditorContainer=De(".side-by-side-editor-container.editor-instance"),this.primaryEditorContainer=De(".side-by-side-editor-container.editor-instance"),this.createSplitView(t)}createSplitView(t,n){this.splitview=this.splitviewDisposables.add(new Yl(t,{orientation:this.orientation})),this.splitviewDisposables.add(this.splitview.onDidSashReset(()=>this.splitview?.distributeViewSizes())),this.orientation===1?this.splitview.orthogonalEndSash=this._boundarySashes?.bottom:(this.splitview.orthogonalStartSash=this._boundarySashes?.left,this.splitview.orthogonalEndSash=this._boundarySashes?.right);let i=$s.Distribute,r=$s.Distribute;if(n){let l=this.splitview.orientation===1?this.dimension.width:this.dimension.height;i=Math.round(l*n),r=l-i,this.splitview.layout(this.orientation===1?this.dimension.width:this.dimension.height)}let s=lt(this.secondaryEditorContainer);this.splitview.addView({element:s,layout:l=>this.layoutPane(this.secondaryEditorPane,l),minimumSize:this.orientation===1?Jl.width:Jl.height,maximumSize:Number.POSITIVE_INFINITY,onDidChange:G.None},i);let a=lt(this.primaryEditorContainer);this.splitview.addView({element:a,layout:l=>this.layoutPane(this.primaryEditorPane,l),minimumSize:this.orientation===1?Jl.width:Jl.height,maximumSize:Number.POSITIVE_INFINITY,onDidChange:G.None},r),this.updateStyles()}getTitle(){return this.input?this.input.getName():c("sideBySideEditor","Side by Side Editor")}async setInput(t,n,i,r){let s=this.input;await super.setInput(t,n,i,r),(!s||!t.matches(s))&&(s&&this.disposeEditors(),this.createEditors(t));let{primary:a,secondary:l,viewState:d}=this.loadViewState(t,n,i);if(this.lastFocusedSide=d?.focus,typeof d?.ratio=="number"&&this.splitview){let u=this.splitview.orientation===1?this.dimension.width:this.dimension.height;this.splitview.resizeView(0,Math.round(u*d.ratio))}else this.splitview?.distributeViewSizes();await Promise.all([this.secondaryEditorPane?.setInput(t.secondary,l,i,r),this.primaryEditorPane?.setInput(t.primary,a,i,r)]),typeof n?.target=="number"&&(this.lastFocusedSide=n.target)}loadViewState(t,n,i){let r=V5(n?.viewState)?n?.viewState:this.loadEditorViewState(t,i),s=Object.create(null),a;return n?.target===2?a={...n}:s={...n},s.viewState=r?.primary,r?.secondary&&(a?a.viewState=r?.secondary:a={viewState:r.secondary}),{primary:s,secondary:a,viewState:r}}createEditors(t){this.secondaryEditorPane=this.doCreateEditor(t.secondary,lt(this.secondaryEditorContainer)),this.primaryEditorPane=this.doCreateEditor(t.primary,lt(this.primaryEditorContainer)),this.layout(this.dimension),this._onDidChangeSizeConstraints.input=G.any(G.map(this.secondaryEditorPane.onDidChangeSizeConstraints,()=>{}),G.map(this.primaryEditorPane.onDidChangeSizeConstraints,()=>{})),this.onDidCreateEditors.fire(void 0),this.editorDisposables.add(this.primaryEditorPane.onDidFocus(()=>this.onDidFocusChange(1))),this.editorDisposables.add(this.secondaryEditorPane.onDidFocus(()=>this.onDidFocusChange(2)))}doCreateEditor(t,n){let i=Be.as(Da.EditorPane).getEditorPane(t);if(!i)throw new Error("No editor pane descriptor for editor found");let r=i.instantiate(this.instantiationService,this.group);return r.create(n),r.setVisible(this.isVisible()),YT(r)&&this.editorDisposables.add(r.onDidChangeSelection(s=>this._onDidChangeSelection.fire(s))),this.editorDisposables.add(r),r}onDidFocusChange(t){this.lastFocusedSide=t,this._onDidChangeControl.fire()}getSelection(){let t=this.getLastFocusedEditorPane();if(YT(t)){let n=t.getSelection();if(n)return new j1(n,t===this.primaryEditorPane?1:2)}}setOptions(t){super.setOptions(t),typeof t?.target=="number"&&(this.lastFocusedSide=t.target),this.getLastFocusedEditorPane()?.setOptions(t)}setEditorVisible(t){this.primaryEditorPane?.setVisible(t),this.secondaryEditorPane?.setVisible(t),super.setEditorVisible(t)}clearInput(){super.clearInput(),this.primaryEditorPane?.clearInput(),this.secondaryEditorPane?.clearInput(),this.disposeEditors()}focus(){super.focus(),this.getLastFocusedEditorPane()?.focus()}getLastFocusedEditorPane(){return this.lastFocusedSide===2?this.secondaryEditorPane:this.primaryEditorPane}layout(t){this.dimension=t,lt(this.splitview).layout(this.orientation===1?t.width:t.height)}setBoundarySashes(t){this._boundarySashes=t,this.splitview&&(this.splitview.orthogonalEndSash=t.bottom)}layoutPane(t,n){t?.layout(this.orientation===1?new ln(n,this.dimension.height):new ln(this.dimension.width,n))}getControl(){return this.getLastFocusedEditorPane()?.getControl()}getPrimaryEditorPane(){return this.primaryEditorPane}getSecondaryEditorPane(){return this.secondaryEditorPane}tracksEditorViewState(t){return t instanceof Yn}computeEditorViewState(t){if(!this.input||!fn(t,this.toEditorViewStateResource(this.input)))return;let n=this.primaryEditorPane?.getViewState(),i=this.secondaryEditorPane?.getViewState();if(!(!n||!i))return{primary:n,secondary:i,focus:this.lastFocusedSide,ratio:this.getSplitViewRatio()}}toEditorViewStateResource(t){let n,i;if(t instanceof Yn&&(n=t.primary.resource,i=t.secondary.resource),!(!i||!n))return j.from({scheme:"sideBySide",path:`${AE(i.toString())}${AE(n.toString())}`})}updateStyles(){super.updateStyles(),this.primaryEditorContainer&&(this.orientation===1?(this.primaryEditorContainer.style.borderLeftWidth="1px",this.primaryEditorContainer.style.borderLeftStyle="solid",this.primaryEditorContainer.style.borderLeftColor=this.getColor(eN)??"",this.primaryEditorContainer.style.borderTopWidth="0"):(this.primaryEditorContainer.style.borderTopWidth="1px",this.primaryEditorContainer.style.borderTopStyle="solid",this.primaryEditorContainer.style.borderTopColor=this.getColor(JM)??"",this.primaryEditorContainer.style.borderLeftWidth="0"))}dispose(){this.disposeEditors(),super.dispose()}disposeEditors(){this.editorDisposables.clear(),this.secondaryEditorPane=void 0,this.primaryEditorPane=void 0,this.lastFocusedSide=void 0,this.secondaryEditorContainer&&dn(this.secondaryEditorContainer),this.primaryEditorContainer&&dn(this.primaryEditorContainer)}};yr=k([I(1,$t),I(2,Ze),I(3,en),I(4,Mt),I(5,He),I(6,ii),I(7,Xt),I(8,Ul)],yr);var j1=class o{constructor(e,t){this.selection=e;this.side=t}compare(e){return e instanceof o?this.side!==e.side?3:this.selection.compare(e.selection):3}restore(e){let t={...e,target:this.side};return this.selection.restore(t)}};var nd=class extends yr{static ID=TP;constructor(e,t,n,i,r,s,a,l,d){super(e,t,n,i,r,s,a,l,d)}getMetadata(){let e=this.getPrimaryEditorPane(),t=this.getSecondaryEditorPane();if(e instanceof vr&&t instanceof vr)return c("metadataDiff","{0} \u2194 {1}",t.getMetadata(),e.getMetadata())}};nd=k([I(1,$t),I(2,Ze),I(3,en),I(4,Mt),I(5,He),I(6,ii),I(7,Xt),I(8,Ul)],nd);var mS="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",KEt=new RegExp(mS);var wN=H("extensionGalleryService");var GEt=H("extensionManagementService");var qEt=H("IGlobalExtensionEnablementService"),$Et=H("IExtensionTipsService"),jEt=ue("extensions","Extensions"),YEt=ue("preferences","Preferences");function Y1(o){return["file-icon",`${U5(o)}-lang-file-icon`]}function U5(o){return o.replace(/[\s]/g,"/")}var gS=H("contextViewService"),Xn=H("contextMenuService");var FCt=new U("isMac",Fe,c("isMac","Whether the operating system is macOS")),BCt=new U("isLinux",Kt,c("isLinux","Whether the operating system is Linux")),VCt=new U("isWindows",St,c("isWindows","Whether the operating system is Windows")),WCt=new U("isWeb",Cn,c("isWeb","Whether the platform is a web browser")),fS=new U("isMacNative",Fe&&!Cn,c("isMacNative","Whether the operating system is macOS on a non-browser platform")),UCt=new U("isIOS",el,c("isIOS","Whether the operating system is iOS")),zCt=new U("isMobile",m_,c("isMobile","Whether the platform is a mobile web browser")),HCt=new U("isDevelopment",!1,!0),KCt=new U("productQualityType","",c("productQualityType","Quality type of VS Code")),z5="inputFocus",GCt=new U(z5,!1,c("inputFocus","Whether keyboard focus is inside an input box"));var Mwt=c("views log","Views"),TN=Dt("default-view-icon",Q.window,c("defaultViewIcon","Default view icon.")),Zg;(t=>(t.ViewContainersRegistry="workbench.registry.view.containers",t.ViewsRegistry="workbench.registry.view"))(Zg||={});function ci(o){switch(o){case 0:return"sidebar";case 1:return"panel";case 2:return"auxiliarybar"}}var Q1=class extends N{_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new x);onDidDeregister=this._onDidDeregister.event;viewContainers=new Map;defaultViewContainers=[];get all(){return[...this.viewContainers.values()].flat()}registerViewContainer(e,t,n){let i=this.get(e.id);if(i)return i;let r=e;return r.openCommandActionDescriptor=n?.doNotRegisterOpenCommand?void 0:r.openCommandActionDescriptor??{id:r.id},bh(this.viewContainers,t,[]).push(r),n?.isDefault&&this.defaultViewContainers.push(r),this._onDidRegister.fire({viewContainer:r,viewContainerLocation:t}),r}deregisterViewContainer(e){for(let t of this.viewContainers.keys()){let n=this.viewContainers.get(t),i=n?.indexOf(e);if(i!==-1){n?.splice(i,1),n.length===0&&this.viewContainers.delete(t),this._onDidDeregister.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.viewContainers.get(e)||[]]}getViewContainerLocation(e){return[...this.viewContainers.keys()].filter(t=>this.getViewContainers(t).filter(n=>n?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.defaultViewContainers.find(t=>this.getViewContainerLocation(t)===e)}};Be.add(Zg.ViewContainersRegistry,new Q1);function H5(o,e){let t=o.group??"9_more",n=e.group??"9_more";return t!==n?t.localeCompare(n):(o.order??5)-(e.order??5)}var X1=class extends N{_onViewsRegistered=this._register(new x);onViewsRegistered=this._onViewsRegistered.event;_onViewsDeregistered=this._register(new x);onViewsDeregistered=this._onViewsDeregistered.event;_onDidChangeContainer=this._register(new x);onDidChangeContainer=this._onDidChangeContainer.event;_onDidChangeViewWelcomeContent=this._register(new x);onDidChangeViewWelcomeContent=this._onDidChangeViewWelcomeContent.event;_viewContainers=[];_views=new Map;_viewWelcomeContents=new Gc;registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:n})=>this.addViews(t,n)),this._onViewsRegistered.fire(e)}deregisterViews(e,t){let n=this.removeViews(e,t);n.length&&this._onViewsDeregistered.fire({views:n,viewContainer:t})}moveViews(e,t){for(let n of this._views.keys())if(n!==t){let i=this.removeViews(e,n);i.length&&(this.addViews(i,t),this._onDidChangeContainer.fire({views:i,from:n,to:t}))}}getViews(e){return this._views.get(e)||[]}getView(e){for(let t of this._viewContainers){let n=(this._views.get(t)||[]).filter(i=>i.id===e)[0];if(n)return n}return null}getViewContainer(e){for(let t of this._viewContainers)if((this._views.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this._viewWelcomeContents.add(e,t),this._onDidChangeViewWelcomeContent.fire(e),re(()=>{this._viewWelcomeContents.delete(e,t),this._onDidChangeViewWelcomeContent.fire(e)})}registerViewWelcomeContent2(e,t){let n=new Map;for(let[i,r]of t)this._viewWelcomeContents.add(e,r),n.set(i,re(()=>{this._viewWelcomeContents.delete(e,r),this._onDidChangeViewWelcomeContent.fire(e)}));return this._onDidChangeViewWelcomeContent.fire(e),n}getViewWelcomeContent(e){let t=[];return this._viewWelcomeContents.forEach(e,n=>t.push(n)),t.sort(H5)}addViews(e,t){let n=this._views.get(t);n||(n=[],this._views.set(t,n),this._viewContainers.push(t));for(let i of e){if(this.getView(i.id)!==null)throw new Error(c("duplicateId","A view with id '{0}' is already registered",i.id));n.push(i)}}removeViews(e,t){let n=this._views.get(t);if(!n)return[];let i=[],r=[];for(let s of n)e.includes(s)?i.push(s):r.push(s);return i.length&&(r.length?this._views.set(t,r):(this._views.delete(t),this._viewContainers.splice(this._viewContainers.indexOf(t),1))),i}};Be.add(Zg.ViewsRegistry,new X1);var zi=H("viewDescriptorService");var id=H("viewsService");var bS=class o extends N{static HEADER_SIZE=22;element;header;body;_expanded;_orientation;expandedSize=void 0;_headerVisible=!0;_collapsible=!0;_bodyRendered=!1;_minimumBodySize;_maximumBodySize;_ariaHeaderLabel;styles={dropBackground:void 0,headerBackground:void 0,headerBorder:void 0,headerForeground:void 0,leftBorder:void 0};animationTimer=void 0;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidChangeExpansionState=this._register(new x);onDidChangeExpansionState=this._onDidChangeExpansionState.event;get ariaHeaderLabel(){return this._ariaHeaderLabel}set ariaHeaderLabel(e){this._ariaHeaderLabel=e,this.header.setAttribute("aria-label",this.ariaHeaderLabel)}get draggableElement(){return this.header}get dropTargetElement(){return this.element}get dropBackground(){return this.styles.dropBackground}get minimumBodySize(){return this._minimumBodySize}set minimumBodySize(e){this._minimumBodySize=e,this._onDidChange.fire(void 0)}get maximumBodySize(){return this._maximumBodySize}set maximumBodySize(e){this._maximumBodySize=e,this._onDidChange.fire(void 0)}get headerSize(){return this.headerVisible?o.HEADER_SIZE:0}get minimumSize(){let e=this.headerSize,n=!this.headerVisible||this.isExpanded()?this.minimumBodySize:0;return e+n}get maximumSize(){let e=this.headerSize,n=!this.headerVisible||this.isExpanded()?this.maximumBodySize:0;return e+n}orthogonalSize=0;constructor(e){super(),this._expanded=typeof e.expanded>"u"?!0:!!e.expanded,this._orientation=typeof e.orientation>"u"?0:e.orientation,this._ariaHeaderLabel=c("viewSection","{0} Section",e.title),this._minimumBodySize=typeof e.minimumBodySize=="number"?e.minimumBodySize:this._orientation===1?200:120,this._maximumBodySize=typeof e.maximumBodySize=="number"?e.maximumBodySize:Number.POSITIVE_INFINITY,this.element=De(".pane")}isExpanded(){return this._expanded}setExpanded(e){return!e&&!this.collapsible||this._expanded===!!e?!1:(this.element?.classList.toggle("expanded",e),this._expanded=!!e,this.updateHeader(),e?(this._bodyRendered||(this.renderBody(this.body),this._bodyRendered=!0),typeof this.animationTimer=="number"&&Re(this.element).clearTimeout(this.animationTimer),Pe(this.element,this.body)):this.animationTimer=Re(this.element).setTimeout(()=>{this.body.remove()},200),this._onDidChangeExpansionState.fire(e),this._onDidChange.fire(e?this.expandedSize:void 0),!0)}get headerVisible(){return this._headerVisible}set headerVisible(e){this._headerVisible!==!!e&&(this._headerVisible=!!e,this.updateHeader(),this._onDidChange.fire(void 0))}get collapsible(){return this._collapsible}set collapsible(e){this._collapsible!==!!e&&(this._collapsible=!!e,this.updateHeader())}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.element&&(this.element.classList.toggle("horizontal",this.orientation===1),this.element.classList.toggle("vertical",this.orientation===0)),this.header&&this.updateHeader())}render(){this.element.classList.toggle("expanded",this.isExpanded()),this.element.classList.toggle("horizontal",this.orientation===1),this.element.classList.toggle("vertical",this.orientation===0),this.header=De(".pane-header"),Pe(this.element,this.header),this.header.setAttribute("tabindex","0"),this.header.setAttribute("role","button"),this.header.setAttribute("aria-label",this.ariaHeaderLabel),this.renderHeader(this.header);let e=qo(this.header);this._register(e),this._register(e.onDidFocus(()=>this.header.classList.add("focused"),null)),this._register(e.onDidBlur(()=>this.header.classList.remove("focused"),null)),this.updateHeader();let t=this._register(new Y),n=this._register(new We(this.header,"keydown")),i=G.map(n.event,r=>new pt(r),t);this._register(G.filter(i,r=>r.keyCode===3||r.keyCode===10,t)(()=>this.setExpanded(!this.isExpanded()),null)),this._register(G.filter(i,r=>r.keyCode===15,t)(()=>this.setExpanded(!1),null)),this._register(G.filter(i,r=>r.keyCode===17,t)(()=>this.setExpanded(!0),null)),this._register(tn.addTarget(this.header)),[ee.CLICK,Ct.Tap].forEach(r=>{this._register(W(this.header,r,s=>{s.defaultPrevented||this.setExpanded(!this.isExpanded())}))}),this.body=Pe(this.element,De(".pane-body")),!this._bodyRendered&&this.isExpanded()&&(this.renderBody(this.body),this._bodyRendered=!0),this.isExpanded()||this.body.remove()}layout(e){let t=this.headerVisible?o.HEADER_SIZE:0,n=this._orientation===0?this.orthogonalSize:e,i=this._orientation===0?e-t:this.orthogonalSize-t;this.isExpanded()&&(this.body.classList.toggle("wide",n>=600),this.layoutBody(i,n),this.expandedSize=e)}style(e){this.styles=e,this.header&&this.updateHeader()}updateHeader(){let e=!this.headerVisible||this.isExpanded();this.collapsible?(this.header.setAttribute("tabindex","0"),this.header.setAttribute("role","button")):(this.header.removeAttribute("tabindex"),this.header.removeAttribute("role")),this.header.style.lineHeight=`${this.headerSize}px`,this.header.classList.toggle("hidden",!this.headerVisible),this.header.classList.toggle("expanded",e),this.header.classList.toggle("not-collapsible",!this.collapsible),this.header.setAttribute("aria-expanded",String(e)),this.header.style.color=this.collapsible?this.styles.headerForeground??"":"",this.header.style.backgroundColor=(this.collapsible?this.styles.headerBackground:"transparent")??"",this.header.style.borderTop=this.styles.headerBorder&&this.orientation===0?`1px solid ${this.styles.headerBorder}`:"",this.element.style.borderLeft=this.styles.leftBorder&&this.orientation===1?`1px solid ${this.styles.leftBorder}`:""}},Z1=class o extends N{constructor(t,n,i){super();this.pane=t;this.dnd=n;this.context=i;t.draggableElement.draggable=!0,this._register(W(t.draggableElement,"dragstart",r=>this.onDragStart(r))),this._register(W(t.dropTargetElement,"dragenter",r=>this.onDragEnter(r))),this._register(W(t.dropTargetElement,"dragleave",r=>this.onDragLeave(r))),this._register(W(t.dropTargetElement,"dragend",r=>this.onDragEnd(r))),this._register(W(t.dropTargetElement,"drop",r=>this.onDrop(r)))}static DefaultDragOverBackgroundColor=new A(new Ge(128,128,128,.5));dragOverCounter=0;_onDidDrop=this._register(new x);onDidDrop=this._onDidDrop.event;onDragStart(t){if(!this.dnd.canDrag(this.pane)||!t.dataTransfer){t.preventDefault(),t.stopPropagation();return}t.dataTransfer.effectAllowed="move",To&&t.dataTransfer?.setData(Po.TEXT,this.pane.draggableElement.textContent||"");let n=Pe(this.pane.element.ownerDocument.body,De(".monaco-drag-image",{},this.pane.draggableElement.textContent||""));t.dataTransfer.setDragImage(n,-10,-10),setTimeout(()=>n.remove(),0),this.context.draggable=this}onDragEnter(t){!this.context.draggable||this.context.draggable===this||this.dnd.canDrop(this.context.draggable.pane,this.pane)&&(this.dragOverCounter++,this.render())}onDragLeave(t){!this.context.draggable||this.context.draggable===this||this.dnd.canDrop(this.context.draggable.pane,this.pane)&&(this.dragOverCounter--,this.dragOverCounter===0&&this.render())}onDragEnd(t){this.context.draggable&&(this.dragOverCounter=0,this.render(),this.context.draggable=null)}onDrop(t){this.context.draggable&&(Ae.stop(t),this.dragOverCounter=0,this.render(),this.dnd.canDrop(this.context.draggable.pane,this.pane)&&this.context.draggable!==this&&this._onDidDrop.fire({from:this.context.draggable.pane,to:this.pane}),this.context.draggable=null)}render(){let t=null;this.dragOverCounter>0&&(t=this.pane.dropBackground??o.DefaultDragOverBackgroundColor.toString()),this.pane.dropTargetElement.style.backgroundColor=t||""}};var vS=class extends N{dnd;dndContext={draggable:null};element;paneItems=[];orthogonalSize=0;size=0;splitview;animationTimer=void 0;_onDidDrop=this._register(new x);onDidDrop=this._onDidDrop.event;orientation;boundarySashes;onDidSashChange;onDidSashReset;onDidScroll;constructor(e,t={}){super(),this.dnd=t.dnd,this.orientation=t.orientation??0,this.element=Pe(e,De(".monaco-pane-view")),this.splitview=this._register(new Yl(this.element,{orientation:this.orientation})),this.onDidSashReset=this.splitview.onDidSashReset,this.onDidSashChange=this.splitview.onDidSashChange,this.onDidScroll=this.splitview.onDidScroll;let n=this._register(new Y),i=this._register(new We(this.element,"keydown")),r=G.map(G.filter(i.event,s=>Dn(s.target)&&s.target.classList.contains("pane-header"),n),s=>new pt(s),n);this._register(G.filter(r,s=>s.keyCode===16,n)(()=>this.focusPrevious())),this._register(G.filter(r,s=>s.keyCode===18,n)(()=>this.focusNext()))}addPane(e,t,n=this.splitview.length){let i=new Y;e.onDidChangeExpansionState(this.setupAnimation,this,i);let r={pane:e,disposable:i};if(this.paneItems.splice(n,0,r),e.orientation=this.orientation,e.orthogonalSize=this.orthogonalSize,this.splitview.addView(e,t,n),this.dnd){let s=new Z1(e,this.dnd,this.dndContext);i.add(s),i.add(s.onDidDrop(this._onDidDrop.fire,this._onDidDrop))}}removePane(e){let t=this.paneItems.findIndex(i=>i.pane===e);if(t===-1)return;this.splitview.removeView(t,e.isExpanded()?$s.Distribute:void 0),this.paneItems.splice(t,1)[0].disposable.dispose()}movePane(e,t){let n=this.paneItems.findIndex(s=>s.pane===e),i=this.paneItems.findIndex(s=>s.pane===t);if(n===-1||i===-1)return;let[r]=this.paneItems.splice(n,1);this.paneItems.splice(i,0,r),this.splitview.moveView(n,i)}resizePane(e,t){let n=this.paneItems.findIndex(i=>i.pane===e);n!==-1&&this.splitview.resizeView(n,t)}getPaneSize(e){let t=this.paneItems.findIndex(n=>n.pane===e);return t===-1?-1:this.splitview.getViewSize(t)}layout(e,t){this.orthogonalSize=this.orientation===0?t:e,this.size=this.orientation===1?t:e;for(let n of this.paneItems)n.pane.orthogonalSize=this.orthogonalSize;this.splitview.layout(this.size)}setBoundarySashes(e){this.boundarySashes=e,this.updateSplitviewOrthogonalSashes(e)}updateSplitviewOrthogonalSashes(e){this.orientation===0?(this.splitview.orthogonalStartSash=e?.left,this.splitview.orthogonalEndSash=e?.right):this.splitview.orthogonalEndSash=e?.bottom}flipOrientation(e,t){this.orientation=this.orientation===0?1:0;let n=this.paneItems.map(s=>this.getPaneSize(s.pane));this.splitview.dispose(),dn(this.element),this.splitview=this._register(new Yl(this.element,{orientation:this.orientation})),this.updateSplitviewOrthogonalSashes(this.boundarySashes);let i=this.orientation===0?t:e,r=this.orientation===1?t:e;this.paneItems.forEach((s,a)=>{s.pane.orthogonalSize=i,s.pane.orientation=this.orientation;let l=this.size===0?0:r*n[a]/this.size;this.splitview.addView(s.pane,l,a)}),this.size=r,this.orthogonalSize=i,this.splitview.layout(this.size)}setupAnimation(){typeof this.animationTimer=="number"&&Re(this.element).clearTimeout(this.animationTimer),this.element.classList.add("animated"),this.animationTimer=Re(this.element).setTimeout(()=>{this.animationTimer=void 0,this.element.classList.remove("animated")},200)}getPaneHeaderElements(){return[...this.element.querySelectorAll(".pane-header")]}focusPrevious(){let e=this.getPaneHeaderElements(),t=e.indexOf(this.element.ownerDocument.activeElement);t!==-1&&e[Math.max(t-1,0)].focus()}focusNext(){let e=this.getPaneHeaderElements(),t=e.indexOf(this.element.ownerDocument.activeElement);t!==-1&&e[Math.min(t+1,e.length-1)].focus()}dispose(){super.dispose(),this.paneItems.forEach(e=>e.disposable.dispose())}};var od=class extends di{menuActionsOrProvider;dropdownMenu;contextMenuProvider;actionItem=null;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;options;constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;let t=r=>{this.element=Pe(r,De("a.action-label"));let s=[];return typeof this.options.classNames=="string"?s=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(s=this.options.classNames),s.find(a=>a==="icon")||s.push("codicon"),this.element.classList.add(...s),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(Di().setupManagedHover(this.options.hoverDelegate??Yt("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new JI(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{this.element?.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let r=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return r.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){let e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}};function tf(o,e,t,n,i,r){let s,a,l,d,u;if(Array.isArray(o))u=o,s=e,a=t,l=n,d=i;else{let h=e;u=o.getActions(h),s=t,a=n,l=i,d=r}K5(u,s,!1,typeof a=="string"?h=>h===a:a,l,d)}function K5(o,e,t,n=s=>s==="navigation",i=()=>!1,r=!1){let s,a;Array.isArray(e)?(s=e,a=e):(s=e.primary,a=e.secondary);let l=new Set;for(let[d,u]of o){let p;n(d)?(p=s,p.length>0&&r&&p.push(new cn)):(p=a,p.length>0&&p.push(new cn));for(let h of u){t&&(h=h instanceof Vi&&h.alt?h.alt:h);let m=p.push(h);h instanceof fa&&l.add({group:d,action:h,index:m-1})}}for(let{group:d,action:u,index:p}of l){let h=n(d)?s:a,m=u.actions;i(u,d,h.length)&&h.splice(p,1,...m)}}var Tc=class extends jl{constructor(t,n,i,r,s,a,l,d){super(void 0,t,{icon:!!(t.class||t.item.icon),label:!t.class&&!t.item.icon,draggable:n?.draggable,keybinding:n?.keybinding,hoverDelegate:n?.hoverDelegate});this._options=n;this._keybindingService=i;this._notificationService=r;this._contextKeyService=s;this._themeService=a;this._contextMenuService=l;this._accessibilityService=d;this._altKey=uu.getInstance()}_wantsAltCommand=!1;_itemClassDispose=this._register(new ot);_altKey;get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(t){t.preventDefault(),t.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(n){this._notificationService.error(n)}}render(t){if(super.render(t),t.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let n=!1,i=()=>{let r=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||n)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&n);r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(W(t,"mouseleave",r=>{n=!1,i()})),this._register(W(t,"mouseenter",r=>{n=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){let t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label,r=n?c("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){let s=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),d=l?c("titleAndKb","{0} ({1})",s,l):s;r=c("titleAndKbAndAlt",`{0}
[{1}] {2}`,r,F1.modifierLabels[ms].altKey,d)}return r}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(t){this._itemClassDispose.value=void 0;let{element:n,label:i}=this;if(!n||!i)return;let r=this._commandAction.checked&&hR(t.toggled)&&t.toggled.icon?t.toggled.icon:t.icon;if(r)if(je.isThemeIcon(r)){let s=je.asClassNameArray(r);i.classList.add(...s),this._itemClassDispose.value=re(()=>{i.classList.remove(...s)})}else i.style.backgroundImage=Uw(this._themeService.getColorTheme().type)?gl(r.dark):gl(r.light),i.classList.add("icon"),this._itemClassDispose.value=_i(re(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Tc=k([I(2,Qn),I(3,La),I(4,st),I(5,en),I(6,Xn),I(7,Cs)],Tc);var kc=class extends od{constructor(t,n,i,r,s){let a={...n,menuAsChild:n?.menuAsChild??!1,classNames:n?.classNames??(je.isThemeIcon(t.item.icon)?je.asClassName(t.item.icon):void 0),keybindingProvider:n?.keybindingProvider??(l=>i.lookupKeybinding(l.id))};super(t,{getActions:()=>t.actions},r,a);this._keybindingService=i;this._contextMenuService=r;this._themeService=s}render(t){super.render(t),su(this.element),t.classList.add("menu-entry");let n=this._action,{icon:i}=n.item;if(i&&!je.isThemeIcon(i)){this.element.classList.add("icon");let r=()=>{this.element&&(this.element.style.backgroundImage=Uw(this._themeService.getColorTheme().type)?gl(i.dark):gl(i.light))};r(),this._register(this._themeService.onDidColorThemeChange(()=>{r()}))}}};kc=k([I(2,Qn),I(3,Xn),I(4,en)],kc);var Jg=class extends di{constructor(t,n,i,r,s,a,l,d){super(null,t);this._keybindingService=i;this._notificationService=r;this._contextMenuService=s;this._menuService=a;this._instaService=l;this._storageService=d;this._options=n,this._storageKey=`${t.item.submenu.id}_lastActionId`;let u,p=n?.persistLastActionId?d.get(this._storageKey,1):void 0;p&&(u=t.actions.find(m=>p===m.id)),u||(u=t.actions[0]),this._defaultAction=this._instaService.createInstance(Tc,u,{keybinding:this._getDefaultActionKeybindingLabel(u)});let h={keybindingProvider:m=>this._keybindingService.lookupKeybinding(m.id),...n,menuAsChild:n?.menuAsChild??!0,classNames:n?.classNames??["codicon","codicon-chevron-down"],actionRunner:n?.actionRunner??new jo};this._dropdown=new od(t,t.actions,this._contextMenuService,h),this._register(this._dropdown.actionRunner.onDidRun(m=>{m.action instanceof Vi&&this.update(m.action)}))}_options;_defaultAction;_dropdown;_container=null;_storageKey;get onDidChangeDropdownVisibility(){return this._dropdown.onDidChangeVisibility}update(t){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,t.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Tc,t,{keybinding:this._getDefaultActionKeybindingLabel(t)}),this._defaultAction.actionRunner=new class extends jo{async runAction(n,i){await n.run(void 0)}},this._container&&this._defaultAction.render(Cb(this._container,De(".action-container")))}_getDefaultActionKeybindingLabel(t){let n;if(this._options?.renderKeybindingWithDefaultActionLabel){let i=this._keybindingService.lookupKeybinding(t.id);i&&(n=`(${i.getLabel()})`)}return n}setActionContext(t){super.setActionContext(t),this._defaultAction.setActionContext(t),this._dropdown.setActionContext(t)}render(t){this._container=t,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let n=De(".action-container");this._defaultAction.render(Pe(this._container,n)),this._register(W(n,ee.KEY_DOWN,r=>{let s=new pt(r);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));let i=De(".dropdown-action-container");this._dropdown.render(Pe(this._container,i)),this._register(W(i,ee.KEY_DOWN,r=>{let s=new pt(r);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),s.stopPropagation())}))}focus(t){t?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(t){t?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};Jg=k([I(2,Qn),I(3,La),I(4,Xn),I(5,_a),I(6,Ze),I(7,Mt)],Jg);var ef=class extends HI{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===cn.ID?"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500":n.label,isDisabled:!n.enabled})),0,t,UM,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=J($m)}runAction(e,t){let n=this.action.actions[t];n&&this.actionRunner.run(n)}};ef=k([I(1,gS)],ef);function yS(o,e,t){return e instanceof Vi?o.createInstance(Tc,e,t):e instanceof Ti?e.item.isSelection?o.createInstance(ef,e):e.item.rememberDefaultAction?o.createInstance(Jg,e,{...t,persistLastActionId:!0}):o.createInstance(kc,e,t):void 0}var J1=class extends N{constructor(t,n,i,r){super();this.options=n;this.menuService=i;this.contextKeyService=r;this.menu=this._register(i.createMenu(t,r)),this._register(this.menu.onDidChange(()=>this.updateActions())),this.updateActions()}menu;_primaryActions=[];get primaryActions(){return this._primaryActions}_secondaryActions=[];get secondaryActions(){return this._secondaryActions}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;disposables=this._register(new Y);updateActions(){this.disposables.clear(),this._primaryActions=[],this._secondaryActions=[],tf(this.menu,this.options,{primary:this._primaryActions,secondary:this._secondaryActions}),this.disposables.add(this.updateSubmenus([...this._primaryActions,...this._secondaryActions],{})),this._onDidChange.fire()}updateSubmenus(t,n){let i=new Y;for(let r of t)if(r instanceof Ti&&!n[r.item.submenu.id]){let s=n[r.item.submenu.id]=i.add(this.menuService.createMenu(r.item.submenu,this.contextKeyService));i.add(s.onDidChange(()=>this.updateActions())),i.add(this.updateSubmenus(r.actions,n))}return i}},rd=class extends N{constructor(t,n,i,r,s){super();this.menuId=t;this.contextMenuId=n;this.options=i;this.contextKeyService=r;this.menuService=s;this.menuActions=this._register(new J1(t,this.options,s,r)),this._register(this.menuActions.onDidChange(()=>this._onDidChange.fire()))}menuActions;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;getPrimaryActions(){return this.menuActions.primaryActions}getSecondaryActions(){return this.menuActions.secondaryActions}getContextMenuActions(){let t=[];if(this.contextMenuId){let n=this.menuService.getMenuActions(this.contextMenuId,this.contextKeyService,this.options);tf(n,{primary:[],secondary:t})}return t}};rd=k([I(3,st),I(4,_a)],rd);var ns;(i=>{function o(r){return typeof r?.showDirectoryPicker=="function"}i.supported=o;function e(r){let s=r;return s?typeof s.kind=="string"&&typeof s.queryPermission=="function"&&typeof s.requestPermission=="function":!1}i.isFileSystemHandle=e;function t(r){return r.kind==="file"}i.isFileSystemFileHandle=t;function n(r){return r.kind==="directory"}i.isFileSystemDirectoryHandle=n})(ns||={});var IS=class{constructor(e,t,n){this.indexedDB=e;this.store=t;this.logService=n}onDidChangeCapabilities=G.None;onDidChangeFile=G.None;extUri=Kt?xt:uE;_capabilities;get capabilities(){return this._capabilities||(this._capabilities=18,Kt&&(this._capabilities|=1024)),this._capabilities}async stat(e){try{let t=await this.getHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, stat","EntryNotFound");if(ns.isFileSystemFileHandle(t)){let n=await t.getFile();return{type:1,mtime:n.lastModified,ctime:0,size:n.size}}return{type:2,mtime:0,ctime:0,size:0}}catch(t){throw this.toFileSystemProviderError(t)}}async readdir(e){try{let t=await this.getDirectoryHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, readdir","EntryNotFound");let n=[];for await(let[i,r]of t)n.push([i,ns.isFileSystemFileHandle(r)?1:2]);return n}catch(t){throw this.toFileSystemProviderError(t)}}readFileStream(e,t,n){let i=vm(r=>Jt.concat(r.map(s=>Jt.wrap(s))).buffer,{highWaterMark:10});return(async()=>{try{let r=await this.getFileHandle(e);if(!r)throw this.createFileSystemProviderError(e,"No such file or directory, readFile","EntryNotFound");let s=await r.getFile();if(typeof t.length=="number"||typeof t.position=="number"){let a=new Uint8Array(await s.arrayBuffer());typeof t?.position=="number"&&(a=a.slice(t.position)),typeof t?.length=="number"&&(a=a.slice(0,t.length)),i.end(a)}else{let a=s.stream().getReader(),l=await a.read();for(;!l.done&&!(n.isCancellationRequested||(await i.write(l.value),n.isCancellationRequested));)l=await a.read();i.end(void 0)}}catch(r){i.error(this.toFileSystemProviderError(r)),i.end()}})(),i}async readFile(e){try{let t=await this.getFileHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, readFile","EntryNotFound");let n=await t.getFile();return new Uint8Array(await n.arrayBuffer())}catch(t){throw this.toFileSystemProviderError(t)}}async writeFile(e,t,n){try{let i=await this.getFileHandle(e);if(!n.create||!n.overwrite){if(i){if(!n.overwrite)throw this.createFileSystemProviderError(e,"File already exists, writeFile","EntryExists")}else if(!n.create)throw this.createFileSystemProviderError(e,"No such file, writeFile","EntryNotFound")}if(!i){let s=await this.getDirectoryHandle(this.extUri.dirname(e));if(!s)throw this.createFileSystemProviderError(e,"No such parent directory, writeFile","EntryNotFound");if(i=await s.getFileHandle(this.extUri.basename(e),{create:!0}),!i)throw this.createFileSystemProviderError(e,"Unable to create file , writeFile","Unknown")}let r=await i.createWritable();await r.write(t),await r.close()}catch(i){throw this.toFileSystemProviderError(i)}}async mkdir(e){try{let t=await this.getDirectoryHandle(this.extUri.dirname(e));if(!t)throw this.createFileSystemProviderError(e,"No such parent directory, mkdir","EntryNotFound");await t.getDirectoryHandle(this.extUri.basename(e),{create:!0})}catch(t){throw this.toFileSystemProviderError(t)}}async delete(e,t){try{let n=await this.getDirectoryHandle(this.extUri.dirname(e));if(!n)throw this.createFileSystemProviderError(e,"No such parent directory, delete","EntryNotFound");return n.removeEntry(this.extUri.basename(e),{recursive:t.recursive})}catch(n){throw this.toFileSystemProviderError(n)}}async rename(e,t,n){try{if(this.extUri.isEqual(e,t))return;let i=await this.getFileHandle(e);if(i){let r=await i.getFile(),s=new Uint8Array(await r.arrayBuffer());await this.writeFile(t,s,{create:!0,overwrite:n.overwrite,unlock:!1,atomic:!1}),await this.delete(e,{recursive:!1,useTrash:!1,atomic:!1})}else throw this.createFileSystemProviderError(e,c("fileSystemRenameError","Rename is only supported for files."),"Unavailable")}catch(i){throw this.toFileSystemProviderError(i)}}watch(e,t){return N.None}_files=new Map;_directories=new Map;registerFileHandle(e){return this.registerHandle(e,this._files)}registerDirectoryHandle(e){return this.registerHandle(e,this._directories)}get directories(){return this._directories.values()}async registerHandle(e,t){let n=`/${e.name}`;if(t.has(n)&&!await t.get(n)?.isSameEntry(e)){let i=vd(e.name),r=rl(e.name,i),s=1;do n=`/${r}-${s++}${i}`;while(t.has(n)&&!await t.get(n)?.isSameEntry(e))}t.set(n,e);try{await this.indexedDB?.runInTransaction(this.store,"readwrite",i=>i.put(e,n))}catch(i){this.logService.error(i)}return j.from({scheme:me.file,path:n})}async getHandle(e){let t=await this.doGetHandle(e);if(!t){let n=await this.getDirectoryHandle(this.extUri.dirname(e));if(n){let i=xt.basename(e);try{t=await n.getFileHandle(i)}catch{try{t=await n.getDirectoryHandle(i)}catch{}}}}return t}async getFileHandle(e){let t=await this.doGetHandle(e);if(t instanceof FileSystemFileHandle)return t;let n=await this.getDirectoryHandle(this.extUri.dirname(e));try{return await n?.getFileHandle(xt.basename(e))}catch{return}}async getDirectoryHandle(e){let t=await this.doGetHandle(e);if(t instanceof FileSystemDirectoryHandle)return t;let n=this.extUri.dirname(e);if(this.extUri.isEqual(n,e))return;let i=await this.getDirectoryHandle(n);try{return await i?.getDirectoryHandle(xt.basename(e))}catch{return}}async doGetHandle(e){if(this.extUri.dirname(e).path!=="/")return;let t=e.path.replace(/\/$/,""),n=this._files.get(t)??this._directories.get(t);if(n)return n;let i=await this.indexedDB?.runInTransaction(this.store,"readonly",r=>r.get(t));if(ns.isFileSystemHandle(i)){let r=await i.queryPermission()==="granted";try{r||(r=await i.requestPermission()==="granted")}catch(s){this.logService.error(s)}if(r)return ns.isFileSystemFileHandle(i)?this._files.set(t,i):ns.isFileSystemDirectoryHandle(i)&&this._directories.set(t,i),i}throw this.createFileSystemProviderError(e,"No file system handle registered","Unavailable")}toFileSystemProviderError(e){if(e instanceof Mu)return e;let t="Unknown";return e.name==="NotAllowedError"&&(e=new Error(c("fileSystemNotAllowedError","Insufficient permissions. Please retry and allow the operation.")),t="Unavailable"),ww(e,t)}createFileSystemProviderError(e,t,n){return ww(new Error(`${t} (${gs(e.path)})`),n)}};var SS={EDITORS:"CodeEditors",FILES:"CodeFiles"};function G5(o){let e=[];if(o.dataTransfer&&o.dataTransfer.types.length>0){let i=o.dataTransfer.getData(SS.EDITORS);if(i)try{e.push(...ug(i))}catch{}else try{let a=o.dataTransfer.getData(Po.RESOURCES);e.push(...DN(a))}catch{}if(o.dataTransfer?.files)for(let a=0;a<o.dataTransfer.files.length;a++){let l=o.dataTransfer.files[a];if(l&&l.path)try{e.push({resource:j.file(l.path),isExternal:!0,allowWorkspaceOpen:!0})}catch{}}let r=o.dataTransfer.getData(SS.FILES);if(r)try{let a=JSON.parse(r);for(let l of a)e.push({resource:j.file(l),isExternal:!0,allowWorkspaceOpen:!0})}catch{}let s=Be.as(ES.DragAndDropContribution).getAll();for(let a of s){let l=o.dataTransfer.getData(a.dataFormatKey);if(l)try{e.push(...a.getEditorInputs(l))}catch{}}}let t=[],n=new fi;for(let i of e)i.resource?n.has(i.resource)||(t.push(i),n.set(i.resource,!0)):t.push(i);return t}async function kN(o,e){let t=G5(e);if(e.dataTransfer&&Cn&&Y5(e,Po.FILES)&&e.dataTransfer.items){let r=await o.get(Ze).invokeFunction(s=>q5(s,e));for(let s of r)t.push({resource:s.resource,contents:s.contents?.toString(),isExternal:!0,allowWorkspaceOpen:s.isDirectory})}return t}function DN(o){let e=[];if(o){let t=JSON.parse(o);for(let n of t)if(n.indexOf(":")>0){let{selection:i,uri:r}=qI(j.parse(n));e.push({resource:r,options:{selection:i}})}}return e}async function q5(o,e){if(ns.supported(xe)){let n=e.dataTransfer?.items;if(n)return $5(o,n)}let t=e.dataTransfer?.files;return t?j5(o,t):[]}async function $5(o,e){let t=o.get(Ut).getProvider(me.file);if(!(t instanceof IS))return[];let n=[];for(let i=0;i<e.length;i++){let r=e[i];if(r){let s=new Or;n.push(s),(async()=>{try{let a=await r.getAsFileSystemHandle();if(!a){s.complete(void 0);return}ns.isFileSystemFileHandle(a)?s.complete({resource:await t.registerFileHandle(a),isDirectory:!1}):ns.isFileSystemDirectoryHandle(a)?s.complete({resource:await t.registerDirectoryHandle(a),isDirectory:!0}):s.complete(void 0)}catch{s.complete(void 0)}})()}}return An(await Promise.all(n.map(i=>i.p)))}async function j5(o,e){let t=o.get(br),n=[];for(let i=0;i<e.length;i++){let r=e.item(i);if(r){if(r.size>100*hr.MB){t.warn(c("fileTooLarge","File is too large to open as untitled editor. Please upload it first into the file explorer and then try again."));continue}let s=new Or;n.push(s);let a=new FileReader;a.onerror=()=>s.complete(void 0),a.onabort=()=>s.complete(void 0),a.onload=async l=>{let d=r.name,u=l.target?.result??void 0;if(typeof d!="string"||typeof u>"u"){s.complete(void 0);return}s.complete({resource:j.from({scheme:me.untitled,path:d}),contents:typeof u=="string"?Jt.fromString(u):Jt.wrap(new Uint8Array(u))})},a.readAsArrayBuffer(r)}}return An(await Promise.all(n.map(i=>i.p)))}function Y5(o,...e){if(!o.dataTransfer)return!1;let t=o.dataTransfer.types,n=[];for(let i=0;i<t.length;i++)n.push(t[i].toLowerCase());for(let i of e)if(n.indexOf(i.toLowerCase())>=0)return!0;return!1}var eD=class{_contributions=new Map;register(e){if(this._contributions.has(e.dataFormatKey))throw new Error(`A drag and drop contributiont with key '${e.dataFormatKey}' was already registered.`);this._contributions.set(e.dataFormatKey,e)}getAll(){return this._contributions.values()}},ES={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Be.add(ES.DragAndDropContribution,new eD);var xS=class o{static INSTANCE=new o;data;proto;constructor(){}static getInstance(){return o.INSTANCE}hasData(e){return e&&e===this.proto}clearData(e){this.hasData(e)&&(this.proto=void 0,this.data=void 0)}getData(e){if(this.hasData(e))return this.data}setData(e,t){t&&(this.data=e,this.proto=t)}};var _N=H("workspacesService");var LN=H("workspaceEditingService");var CS=class extends N{constructor(t){super();this.channelName=t;if("BroadcastChannel"in xe)try{this.broadcastChannel=new BroadcastChannel(t);let n=i=>{this._onDidReceiveData.fire(i.data)};this.broadcastChannel.addEventListener("message",n),this._register(re(()=>{this.broadcastChannel&&(this.broadcastChannel.removeEventListener("message",n),this.broadcastChannel.close())}))}catch(n){console.warn("Error while creating broadcast channel. Falling back to localStorage.",If(n))}this.broadcastChannel||(this.channelName=`BroadcastDataChannel.${t}`,this.createBroadcastChannel())}broadcastChannel;_onDidReceiveData=this._register(new x);onDidReceiveData=this._onDidReceiveData.event;createBroadcastChannel(){let t=n=>{n.key===this.channelName&&n.newValue&&this._onDidReceiveData.fire(JSON.parse(n.newValue))};xe.addEventListener("storage",t),this._register(re(()=>xe.removeEventListener("storage",t)))}postData(t){this.broadcastChannel?this.broadcastChannel.postMessage(t):(localStorage.removeItem(this.channelName),localStorage.setItem(this.channelName,JSON.stringify(t)))}};var wS=class{constructor(e,t,n,i,r,s,a,l){this.options=e;this.fileService=t;this.workspacesService=n;this.editorService=i;this.workspaceEditingService=r;this.hostService=s;this.contextService=a;this.instantiationService=l}async handleDrop(e,t,n,i,r){let s=await this.instantiationService.invokeFunction(d=>kN(d,e));if(!s.length)return;if(await this.hostService.focus(t),this.options.allowWorkspaceOpen){let d=An(s.filter(u=>u.allowWorkspaceOpen&&u.resource?.scheme===me.file).map(u=>u.resource));if(d.length>0&&await this.handleWorkspaceDrop(d))return}let a=An(s.filter(d=>d.isExternal&&d.resource?.scheme===me.file).map(d=>d.resource));a.length&&this.workspacesService.addRecentlyOpened(a.map(d=>({fileUri:d})));let l=n?.();await this.editorService.openEditors(s.map(d=>({...d,resource:d.resource,options:{...d.options,...r,pinned:!0}})),l,{validateTrust:!0}),i?.(l)}async handleWorkspaceDrop(e){let t=[],n=[];return await Promise.all(e.map(async i=>{if(BL(i)){t.push({workspaceUri:i});return}try{let r=await this.fileService.stat(i);r.isDirectory&&(t.push({folderUri:r.resource}),n.push({uri:r.resource}))}catch{}})),t.length===0?!1:(t.length>n.length||n.length===1?await this.hostService.openWindow(t):FL(this.contextService.getWorkspace())?await this.workspaceEditingService.addFolders(n):await this.workspaceEditingService.createAndEnterWorkspace(n),!0)}};wS=k([I(1,Ut),I(2,_N),I(3,Xt),I(4,LN),I(5,Zl),I(6,bn),I(7,Ze)],wS);function X5(o,e,t,n){if(e.length===0||!t.dataTransfer)return;let i=o.get(Jo),r=o.get(Xt),s=o.get(Ut),a=o.get(Xo),l=An(e.map(m=>j.isUri(m)?{resource:m}:QT(m)?j.isUri(m.editor.resource)?{resource:m.editor.resource}:void 0:m)),d=l.filter(({resource:m})=>s.hasProvider(m));if(!n?.disableStandardTransfer){let m=St?`\r
`:`
`;t.dataTransfer.setData(Po.TEXT,d.map(({resource:f})=>a.getUriLabel(f,{noPrefix:!0})).join(m));let g=d.find(({isDirectory:f})=>!f);if(g){let f=vs.uriToFileUri(g.resource);f.scheme===me.file&&t.dataTransfer.setData(Po.DOWNLOAD_URL,[Sa.binary,Ri(g.resource),f.toString()].join(":"))}}let u=d.filter(({isDirectory:m})=>!m);u.length&&t.dataTransfer.setData(Po.RESOURCES,JSON.stringify(u.map(({resource:m})=>m.toString())));let p=Be.as(ES.DragAndDropContribution).getAll();for(let m of p)m.setData(l,t);let h=[];for(let m of e){let g;if(QT(m)){let f=m.editor.toUntyped({preserveViewState:m.groupId});f&&(g={...f,resource:eo.getCanonicalUri(f)})}else if(j.isUri(m)){let{selection:f,uri:y}=qI(m);g={resource:y,options:f?{selection:f}:void 0}}else m.isDirectory||(g={resource:m.resource});if(g){{let f=g.resource;if(f){let y=i.files.get(f);y&&(typeof g.languageId!="string"&&(g.languageId=y.getLanguageId()),typeof g.encoding!="string"&&(g.encoding=y.getEncoding()),typeof g.contents!="string"&&y.isDirty()&&!y.textEditorModel.isTooLargeForHeapOperation()&&(g.contents=y.textEditorModel.getValue())),g.options?.viewState||(g.options={...g.options,viewState:(()=>{for(let C of r.visibleEditorPanes)if(fn(C.input.resource,f)){let w=C.getViewState();if(w)return w}})()})}}h.push(g)}}if(h.length){t.dataTransfer.setData(SS.EDITORS,XT(h));let m=[];for(let g of h)g.resource?m.push(g.resource):$r(g)?g.modified.resource&&m.push(g.modified.resource):Bs(g)?g.primary.resource&&m.push(g.primary.resource):Vs(g)&&m.push(g.result.resource);n?.disableStandardTransfer||t.dataTransfer.setData(Sa.uriList,nv.create(m.slice(0,1))),t.dataTransfer.setData(Po.INTERNAL_URI_LIST,nv.create(m))}}var tD=class{constructor(e,t){this.type=e;this.id=t}update(e){}getData(){return{type:this.type,id:this.id}}},Dc=class{constructor(e){this.compositeId=e}get id(){return this.compositeId}},_c=class{constructor(e){this.viewId=e}get id(){return this.viewId}},Kp=class o extends N{static instance;static get INSTANCE(){return o.instance||(o.instance=new o,al(o.instance)),o.instance}transferData=xS.getInstance();onDragStart=this._register(new x);onDragEnd=this._register(new x);constructor(){super(),this._register(this.onDragEnd.event(e=>{let t=e.dragAndDropData.getData().id,n=e.dragAndDropData.getData().type;this.readDragData(n)?.getData().id===t&&this.transferData.clearData(n==="view"?_c.prototype:Dc.prototype)}))}readDragData(e){if(this.transferData.hasData(e==="view"?_c.prototype:Dc.prototype)){let t=this.transferData.getData(e==="view"?_c.prototype:Dc.prototype);if(t&&t[0])return new tD(e,t[0].id)}}writeDragData(e,t){this.transferData.setData([t==="view"?new _c(e):new Dc(e)],t==="view"?_c.prototype:Dc.prototype)}registerTarget(e,t){let n=new Y;return n.add(new Od(e,{onDragEnter:i=>{if(i.preventDefault(),t.onDragEnter){let r=this.readDragData("composite")||this.readDragData("view");r&&t.onDragEnter({eventData:i,dragAndDropData:r})}},onDragLeave:i=>{let r=this.readDragData("composite")||this.readDragData("view");t.onDragLeave&&r&&t.onDragLeave({eventData:i,dragAndDropData:r})},onDrop:i=>{if(t.onDrop){let r=this.readDragData("composite")||this.readDragData("view");if(!r)return;t.onDrop({eventData:i,dragAndDropData:r}),this.onDragEnd.fire({eventData:i,dragAndDropData:r})}},onDragOver:i=>{if(i.preventDefault(),t.onDragOver){let r=this.readDragData("composite")||this.readDragData("view");if(!r)return;t.onDragOver({eventData:i,dragAndDropData:r})}}})),t.onDragStart&&this.onDragStart.event(i=>{t.onDragStart(i)},this,n),t.onDragEnd&&this.onDragEnd.event(i=>{t.onDragEnd(i)},this,n),this._register(n)}registerDraggable(e,t,n){e.draggable=!0;let i=new Y;return i.add(new Od(e,{onDragStart:r=>{let{id:s,type:a}=t();this.writeDragData(s,a),r.dataTransfer?.setDragImage(e,0,0),this.onDragStart.fire({eventData:r,dragAndDropData:this.readDragData(a)})},onDragEnd:r=>{let{type:s}=t(),a=this.readDragData(s);a&&this.onDragEnd.fire({eventData:r,dragAndDropData:a})},onDragEnter:r=>{if(n.onDragEnter){let s=this.readDragData("composite")||this.readDragData("view");if(!s)return;s&&n.onDragEnter({eventData:r,dragAndDropData:s})}},onDragLeave:r=>{let s=this.readDragData("composite")||this.readDragData("view");s&&n.onDragLeave?.({eventData:r,dragAndDropData:s})},onDrop:r=>{if(n.onDrop){let s=this.readDragData("composite")||this.readDragData("view");if(!s)return;n.onDrop({eventData:r,dragAndDropData:s}),this.onDragEnd.fire({eventData:r,dragAndDropData:s})}},onDragOver:r=>{if(n.onDragOver){let s=this.readDragData("composite")||this.readDragData("view");if(!s)return;n.onDragOver({eventData:r,dragAndDropData:s})}}})),n.onDragStart&&this.onDragStart.event(r=>{n.onDragStart(r)},this,i),n.onDragEnd&&this.onDragEnd.event(r=>{n.onDragEnd(r)},this,i),this._register(i)}};function iD(o,e,t){o&&(o.dropEffect=t?e:"none")}var TS=class{constructor(e,t){this.toResource=e;this.instantiationService=t}getDragURI(e){let t=this.toResource(e);return t?t.toString():null}getDragLabel(e){let t=An(e.map(this.toResource));return t.length===1?Ri(t[0]):t.length>1?String(t.length):void 0}onDragStart(e,t){let n=[];for(let i of e.elements){let r=this.toResource(i);r&&n.push(r)}n.length&&this.instantiationService.invokeFunction(i=>X5(i,n,t))}onDragOver(e,t,n,i,r){return!1}drop(e,t,n,i,r){}dispose(){}};TS=k([I(1,Ze)],TS);var nD=class o extends N{static CHANNEL_NAME="monaco-workbench-global-dragged-over";broadcaster=this._register(new CS(o.CHANNEL_NAME));constructor(){super(),this.registerListeners()}registerListeners(){this._register(G.runAndSubscribe(Yh,({window:e,disposables:t})=>{t.add(W(e,ee.DRAG_OVER,()=>this.markDraggedOver(!1),!0)),t.add(W(e,ee.DRAG_LEAVE,()=>this.clearDraggedOver(!1),!0))},{window:xe,disposables:this._store})),this._register(this.broadcaster.onDidReceiveData(e=>{e===!0?this.markDraggedOver(!0):this.clearDraggedOver(!0)}))}draggedOver=!1;get isDraggedOver(){return this.draggedOver}markDraggedOver(e){this.draggedOver!==!0&&(this.draggedOver=!0,e||this.broadcaster.postData(!0))}clearDraggedOver(e){this.draggedOver!==!1&&(this.draggedOver=!1,e||this.broadcaster.postData(!1))}},x0t=new nD;var kS=class{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}};k([ie],kS.prototype,"toString",1);var Z5=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function RN(o){let e=[],t=0,n;for(;n=Z5.exec(o);){n.index-t>0&&e.push(o.substring(t,n.index));let[,i,r,,s]=n;s?e.push({label:i,href:r,title:s}):e.push({label:i,href:r}),t=n.index+n[0].length}return t<o.length&&e.push(o.substring(t)),new kS(e)}var sd=H("hoverService"),Gp=class extends N{constructor(t,n,i={},r,s){super();this.placement=t;this.instantHover=n;this.overrideOptions=i;this.configurationService=r;this.hoverService=s;this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}lastHoverHideTime=0;timeLimit=200;_delay;get delay(){return this.isInstantlyHovering()?0:this._delay}hoverDisposables=this._register(new Y);showHover(t,n){let i=typeof this.overrideOptions=="function"?this.overrideOptions(t,n):this.overrideOptions;this.hoverDisposables.clear();let r=Dn(t.target)?[t.target]:t.target.targetElements;for(let a of r)this.hoverDisposables.add(zn(a,"keydown",l=>{l.equals(9)&&this.hoverService.hideHover()}));let s=Dn(t.content)?void 0:t.content.toString();return this.hoverService.showHover({...t,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...t.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},n)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(t){if(!this.instantHover)throw new Error("Instant hover is not enabled");this.timeLimit=t}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};Gp=k([I(3,He),I(4,sd)],Gp);var qp=class extends N{constructor(t,n,i={},r,s){super();this._link=n;this._hoverService=r;this.el=Pe(t,De("a.monaco-link",{tabIndex:n.tabIndex??0,href:n.href},n.label)),this.hoverDelegate=i.hoverDelegate??Yt("mouse"),this.setTooltip(n.title),this.el.setAttribute("role","button");let a=this._register(new We(this.el,"click")),l=this._register(new We(this.el,"keypress")),d=G.chain(l.event,h=>h.map(m=>new pt(m)).filter(m=>m.keyCode===3)),u=this._register(new We(this.el,Ct.Tap)).event;this._register(tn.addTarget(this.el));let p=G.any(a.event,d,u);this._register(p(h=>{this.enabled&&(Ae.stop(h,!0),i?.opener?i.opener(this._link.href):s.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}el;hover;hoverDelegate;_enabled=!0;get enabled(){return this._enabled}set enabled(t){t?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=t}set link(t){typeof t.label=="string"?this.el.textContent=t.label:(dn(this.el),this.el.appendChild(t.label)),this.el.href=t.href,typeof t.tabIndex<"u"&&(this.el.tabIndex=t.tabIndex),this.setTooltip(t.title),this._link=t}setTooltip(t){this.hoverDelegate.showNativeHover?this.el.title=t??"":!this.hover&&t?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,t)):this.hover&&this.hover.update(t)}};qp=k([I(3,sd),I(4,Ql)],qp);var is;(s=>{let o;(h=>(h[h.None=0]="None",h[h.Done=1]="Done",h[h.Infinite=2]="Infinite",h[h.While=3]="While",h[h.Work=4]="Work"))(o=s.Type||={}),s.None={type:0},s.Done={type:1},s.Infinite={type:2};class i{constructor(l,d,u){this.whilePromise=l;this.whileStart=d;this.whileDelay=u}type=3}s.While=i;class r{constructor(l,d){this.total=l;this.worked=d}type=4}s.Work=r})(is||={});var DS=class extends N{constructor(t,n){super();this.progressBar=t;this.scope=n;this.registerListeners()}progressState=is.None;registerListeners(){this._register(this.scope.onDidChangeActive(()=>{this.scope.isActive?this.onDidScopeActivate():this.onDidScopeDeactivate()}))}onDidScopeActivate(){if(this.progressState.type!==is.Done.type)if(this.progressState.type===3){let t;if(this.progressState.whileDelay>0){let n=this.progressState.whileDelay-(Date.now()-this.progressState.whileStart);n>0&&(t=n)}this.doShowWhile(t)}else this.progressState.type===2?this.progressBar.infinite().show():this.progressState.type===4&&(this.progressState.total&&this.progressBar.total(this.progressState.total).show(),this.progressState.worked&&this.progressBar.worked(this.progressState.worked).show())}onDidScopeDeactivate(){this.progressBar.stop().hide()}show(t,n){return typeof t=="boolean"?this.progressState=is.Infinite:this.progressState=new is.Work(t,void 0),this.scope.isActive&&(this.progressState.type===2?this.progressBar.infinite().show(n):this.progressState.type===4&&typeof this.progressState.total=="number"&&this.progressBar.total(this.progressState.total).show(n)),{total:i=>{this.progressState=new is.Work(i,this.progressState.type===4?this.progressState.worked:void 0),this.scope.isActive&&this.progressBar.total(i)},worked:i=>{!this.scope.isActive||this.progressBar.hasTotal()?(this.progressState=new is.Work(this.progressState.type===4?this.progressState.total:void 0,this.progressState.type===4&&typeof this.progressState.worked=="number"?this.progressState.worked+i:i),this.scope.isActive&&this.progressBar.worked(i)):(this.progressState=is.Infinite,this.progressBar.infinite().show())},done:()=>{this.progressState=is.Done,this.scope.isActive&&this.progressBar.stop().hide()}}}async showWhile(t,n){this.progressState.type===3&&(t=Promise.all([t,this.progressState.whilePromise])),this.progressState=new is.While(t,n||0,Date.now());try{this.doShowWhile(n),await t}catch{}finally{(this.progressState.type!==3||this.progressState.whilePromise===t)&&(this.progressState=is.None,this.scope.isActive&&this.progressBar.stop().hide())}}doShowWhile(t){this.scope.isActive&&this.progressBar.infinite().show(t)}},_S=class extends N{constructor(t,n){super();this.scopeId=t;this._isActive=n}_onDidChangeActive=this._register(new x);onDidChangeActive=this._onDidChangeActive.event;get isActive(){return this._isActive}onScopeOpened(t){t===this.scopeId&&(this._isActive||(this._isActive=!0,this._onDidChangeActive.fire()))}onScopeClosed(t){t===this.scopeId&&this._isActive&&(this._isActive=!1,this._onDidChangeActive.fire())}};var LS=class extends N{options;actionBar;toggleMenuAction;toggleMenuActionViewItem;submenuActionViewItems=[];hasSecondaryActions=!1;element;_onDidChangeDropdownVisibility=this._register(new Eh);onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event;disposables=this._register(new Y);constructor(e,t,n={orientation:0}){super(),n.hoverDelegate=n.hoverDelegate??this._register(ql()),this.options=n,this.toggleMenuAction=this._register(new $p(()=>this.toggleMenuActionViewItem?.show(),n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Wa(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,hoverDelegate:n.hoverDelegate,actionViewItemProvider:(i,r)=>{if(i.id===$p.ID)return this.toggleMenuActionViewItem=new od(i,i.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:je.asClassNameArray(n.moreIcon??Q.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){let s=n.actionViewItemProvider(i,r);if(s)return s}if(i instanceof fa){let s=new od(i,i.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:i.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return s.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(s),this.disposables.add(this._onDidChangeDropdownVisibility.add(s.onDidChangeVisibility)),s}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}set context(e){this.actionBar.context=e,this.toggleMenuActionViewItem?.setActionContext(e);for(let t of this.submenuActionViewItems)t.setActionContext(e)}getElement(){return this.element}focus(){this.actionBar.focus()}getItemsWidth(){let e=0;for(let t=0;t<this.actionBar.length();t++)e+=this.actionBar.getWidth(t);return e}getItemAction(e){return this.actionBar.getAction(e)}getItemWidth(e){return this.actionBar.getWidth(e)}getItemsLength(){return this.actionBar.length()}setAriaLabel(e){this.actionBar.setAriaLabel(e)}setActions(e,t){this.clear();let n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(i=>{this.actionBar.push(i,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(i)})})}isEmpty(){return this.actionBar.isEmpty()}getKeybindingLabel(e){return this.options.getKeyBinding?.(e)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}},$p=class o extends Ii{static ID="toolbar.toggle.more";_menuActions;toggleDropdownMenu;constructor(e,t){t=t||c("moreActions","More Actions..."),super(o.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};var RS=class{constructor(e,t,n){this._commandService=e;this._keybindingService=t;this._hiddenStates=new Js(n)}_hiddenStates;createMenu(e,t,n){return new jp(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t)}getMenuActions(e,t,n){let i=new jp(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t),r=i.getActions(n);return i.dispose(),r}getMenuContexts(e){let t=new AS(e,!1);return new Set([...t.structureContextKeys,...t.preconditionContextKeys,...t.toggledContextKeys])}resetHiddenStates(e){this._hiddenStates.reset(e)}};RS=k([I(0,Ci),I(1,Qn),I(2,Mt)],RS);var Js=class{constructor(e){this._storageService=e;try{let t=e.get(Js._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,Js._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{let t=e.get(Js._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}static _key="menu.hiddenCommands";_disposables=new Y;_onDidChange=new x;onDidChange=this._onDidChange.event;_ignoreChangeEvent=!1;_data;_hiddenByDefaultCache=new Map;dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){let n=this._isHiddenByDefault(e,t),i=this._data[e.id]?.includes(t)??!1;return n?!i:i}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);let r=this._data[e.id];if(n)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){let s=r.indexOf(t);s>=0&&i_(r,s),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(let{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;let e=JSON.stringify(this._data);this._storageService.store(Js._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};Js=k([I(0,Mt)],Js);var AS=class o{constructor(e,t){this._id=e;this._collectContextKeysForSubmenus=t;this.refresh()}_menuGroups=[];_allMenuIds=new Set;_structureContextKeys=new Set;_preconditionContextKeys=new Set;_toggledContextKeys=new Set;get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();let e=this._sort(Ft.getMenuItems(this._id)),t;for(let n of e){let i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeysAndSubmenuIds(n)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(o._fillInKbExprKeys(e.when,this._structureContextKeys),lp(e)){if(e.command.precondition&&o._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){let t=e.command.toggled.condition||e.command.toggled;o._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(Ft.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}},Ka=class extends AS{constructor(t,n,i,r,s,a){super(t,i);this._hiddenStates=n;this._commandService=r;this._keybindingService=s;this._contextKeyService=a;this.refresh()}createActionGroups(t){let n=[];for(let i of this._menuGroups){let[r,s]=i,a;for(let l of s)if(this._contextKeyService.contextMatchesRules(l.when)){let d=lp(l);d&&this._hiddenStates.setDefaultState(this._id,l.command.id,!!l.isHiddenByDefault);let u=J5(this._id,d?l.command:l,this._hiddenStates);if(d){let p=oD(this._commandService,this._keybindingService,l.command.id,l.when);(a??=[]).push(new Vi(l.command,l.alt,t,u,p,this._contextKeyService,this._commandService))}else{let p=new Ka(l.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(t),h=cn.join(...p.map(m=>m[1]));h.length>0&&(a??=[]).push(new Ti(l,u,h))}}a&&a.length>0&&n.push([r,a])}return n}_sort(t){return t.sort(Ka._compareMenuItems)}static _compareMenuItems(t,n){let i=t.group,r=n.group;if(i!==r){if(i){if(!r)return-1}else return 1;if(i==="navigation")return-1;if(r==="navigation")return 1;let l=i.localeCompare(r);if(l!==0)return l}let s=t.order||0,a=n.order||0;return s<a?-1:s>a?1:Ka._compareTitles(lp(t)?t.command.title:t.title,lp(n)?n.command.title:n.title)}static _compareTitles(t,n){let i=typeof t=="string"?t:t.original,r=typeof n=="string"?n:n.original;return i.localeCompare(r)}};Ka=k([I(3,Ci),I(4,Qn),I(5,st)],Ka);var jp=class{_menuInfo;_disposables=new Y;_onDidChange;onDidChange;constructor(e,t,n,i,r,s){this._menuInfo=new Ka(e,t,n.emitEventsForSubmenuChanges,i,r,s);let a=new yi(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Ft.onDidChangeMenu(p=>{for(let h of this._menuInfo.allMenuIds)if(p.has(h)){a.schedule();break}}));let l=this._disposables.add(new Y),d=p=>{let h=!1,m=!1,g=!1;for(let f of p)if(h=h||f.isStructuralChange,m=m||f.isEnablementChange,g=g||f.isToggleChange,h&&m&&g)break;return{menu:this,isStructuralChange:h,isEnablementChange:m,isToggleChange:g}},u=()=>{l.add(s.onDidChangeContext(p=>{let h=p.affectsSome(this._menuInfo.structureContextKeys),m=p.affectsSome(this._menuInfo.preconditionContextKeys),g=p.affectsSome(this._menuInfo.toggledContextKeys);(h||m||g)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:m,isToggleChange:g})})),l.add(t.onDidChange(p=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Hf({onWillAddFirstListener:u,onDidRemoveLastListener:l.clear.bind(l),delay:n.eventDebounceDelay,merge:d}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};jp=k([I(3,Ci),I(4,Qn),I(5,st)],jp);function J5(o,e,t){let n=gP(e)?e.submenu.id:e.id,i=typeof e.title=="string"?e.title:e.title.value,r=ei({id:`hide/${o.id}/${n}`,label:c("hide.label","Hide '{0}'",i),run(){t.updateHidden(o,n,!0)}}),s=ei({id:`toggle/${o.id}/${n}`,label:i,get checked(){return!t.isHidden(o,n)},run(){t.updateHidden(o,n,!!this.checked)}});return{hide:r,toggle:s,get isHidden(){return!s.checked}}}function oD(o,e,t,n=void 0,i=!0){return ei({id:`configureKeybinding/${t}`,label:c("configure keybinding","Configure Keybinding"),enabled:i,run(){let s=!!!e.lookupKeybinding(t)&&n?n.serialize():void 0;o.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(s?` +when:${s}`:""))}})}var Lc=class extends LS{constructor(t,n,i,r,s,a,l,d){super(t,s,{getKeyBinding:p=>a.lookupKeybinding(p.id)??void 0,...n,allowContextMenu:!0,skipTelemetry:typeof n?.telemetrySource=="string"});this._options=n;this._menuService=i;this._contextKeyService=r;this._contextMenuService=s;this._keybindingService=a;this._commandService=l;let u=n?.telemetrySource;u&&this._store.add(this.actionBar.onDidRun(p=>d.publicLog2("workbenchActionExecuted",{id:p.action.id,from:u})))}_sessionDisposables=this._store.add(new Y);setActions(t,n=[],i){this._sessionDisposables.clear();let r=t.slice(),s=n.slice(),a=[],l=0,d=[],u=!1;if(this._options?.hiddenItemStrategy!==-1)for(let p=0;p<r.length;p++){let h=r[p];!(h instanceof Vi)&&!(h instanceof Ti)||h.hideActions&&(a.push(h.hideActions.toggle),h.hideActions.toggle.checked&&l++,h.hideActions.isHidden&&(u=!0,r[p]=void 0,this._options?.hiddenItemStrategy!==0&&(d[p]=h)))}if(this._options?.overflowBehavior!==void 0){let p=s_(new Set(this._options.overflowBehavior.exempted),wo.map(r,g=>g?.id)),h=this._options.overflowBehavior.maxItems-p.size,m=0;for(let g=0;g<r.length;g++){let f=r[g];f&&(m++,!p.has(f.id)&&m>=h&&(r[g]=void 0,d[g]=f))}}vx(r),vx(d),super.setActions(r,cn.join(d,s)),(a.length>0||r.length>0)&&this._sessionDisposables.add(W(this.getElement(),"contextmenu",p=>{let h=new Tn(Re(this.getElement()),p),m=this.getItemAction(h.target);if(!m)return;h.preventDefault(),h.stopPropagation();let g=[];if(m instanceof Vi&&m.menuKeybinding)g.push(m.menuKeybinding);else if(!(m instanceof Ti||m instanceof $p)){let y=!!this._keybindingService.lookupKeybinding(m.id);g.push(oD(this._commandService,this._keybindingService,m.id,void 0,y))}if(a.length>0){let y=!1;if(l===1&&this._options?.hiddenItemStrategy===0){y=!0;for(let C=0;C<a.length;C++)if(a[C].checked){a[C]=ei({id:m.id,label:m.label,checked:!0,enabled:!1,run(){}});break}}if(!y&&(m instanceof Vi||m instanceof Ti)){if(!m.hideActions)return;g.push(m.hideActions.hide)}else g.push(ei({id:"label",label:c("hide","Hide"),enabled:!1,run(){}}))}let f=cn.join(g,a);this._options?.resetMenu&&!i&&(i=[this._options.resetMenu]),u&&i&&(f.push(new cn),f.push(ei({id:"resetThisMenu",label:c("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),f.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>h,getActions:()=>f,menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:typeof this._options?.telemetrySource=="string",contextKeyService:this._contextKeyService})}))}};Lc=k([I(2,_a),I(3,st),I(4,Xn),I(5,Qn),I(6,Ci),I(7,$t)],Lc);var Yp=class extends Lc{_onDidChangeMenuItems=this._store.add(new x);onDidChangeMenuItems=this._onDidChangeMenuItems.event;constructor(e,t,n,i,r,s,a,l,d){super(e,{resetMenu:t,...n},i,r,s,a,l,d);let u=this._store.add(i.createMenu(t,r,{emitEventsForSubmenuChanges:!0})),p=()=>{let h=[],m=[];tf(u,n?.menuOptions,{primary:h,secondary:m},n?.toolbarOptions?.primaryGroup,n?.toolbarOptions?.shouldInlineSubmenu,n?.toolbarOptions?.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",h.length===0&&m.length===0),super.setActions(h,m)};this._store.add(u.onDidChange(()=>{p(),this._onDidChangeMenuItems.fire(this)})),p()}setActions(){throw new ut("This toolbar is populated from a menu.")}};Yp=k([I(3,_a),I(4,st),I(5,Xn),I(6,Qn),I(7,Ci),I(8,$t)],Yp);var ez=c("defaultLabel","input"),tz=c("label.preserveCaseToggle","Preserve Case"),rD=class extends Va{constructor(e){super({icon:Q.preserveCase,title:tz+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Yt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},OS=class extends Bn{constructor(t,n,i,r){super();this._showOptionButtons=i;this.contextViewProvider=n,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||ez;let s=r.appendPreserveCaseLabel||"",a=r.history||[],l=!!r.flexibleHeight,d=!!r.flexibleWidth,u=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new ed(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:r.showHistoryHint,flexibleHeight:l,flexibleWidth:d,flexibleMaxHeight:u,inputBoxStyles:r.inputBoxStyles})),this.preserveCase=this._register(new rD({appendTitle:s,isChecked:!1,...r.toggleStyles})),this._register(this.preserveCase.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(m=>{this._onPreserveCaseKeyDown.fire(m)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let p=[this.preserveCase.domNode];this.onkeydown(this.domNode,m=>{if(m.equals(15)||m.equals(17)||m.equals(9)){let g=p.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let f=-1;m.equals(17)?f=(g+1)%p.length:m.equals(15)&&(g===0?f=p.length-1:f=g-1),m.equals(9)?(p[g].blur(),this.inputBox.focus()):f>=0&&p[f].focus(),Ae.stop(m,!0)}}});let h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),t?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,m=>this._onKeyDown.fire(m)),this.onkeyup(this.inputBox.inputElement,m=>this._onKeyUp.fire(m)),this.oninput(this.inputBox.inputElement,m=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,m=>this._onMouseDown.fire(m))}static OPTION_CHANGE="optionChange";contextViewProvider;placeholder;validation;label;fixFocusOnOptionClickEnabled=!0;preserveCase;cachedOptionsWidth=0;domNode;inputBox;_onDidOptionChange=this._register(new x);onDidOptionChange=this._onDidOptionChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_onMouseDown=this._register(new x);onMouseDown=this._onMouseDown.event;_onInput=this._register(new x);onInput=this._onInput.event;_onKeyUp=this._register(new x);onKeyUp=this._onKeyUp.event;_onPreserveCaseKeyDown=this._register(new x);onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event;enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setFocusInputOnOptionClick(t){this.fixFocusOnOptionClickEnabled=t}setEnabled(t){t?this.enable():this.disable()}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(t){this.inputBox.value!==t&&(this.inputBox.value=t)}onSearchSubmit(){this.inputBox.addToHistory()}applyStyles(){}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(t){this.preserveCase.checked=t}focusOnPreserve(){this.preserveCase.focus()}_lastHighlightFindOptions=0;highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox?.validate()}showMessage(t){this.inputBox?.showMessage(t)}clearMessage(){this.inputBox?.hideMessage()}clearValidation(){this.inputBox?.hideMessage()}set width(t){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=t+"px"}dispose(){super.dispose()}};var AN=new U("suggestWidgetVisible",!1,c("suggestWidgetVisible","Whether suggestion are visible")),sD="historyNavigationWidgetFocus",ON="historyNavigationForwardsEnabled",PN="historyNavigationBackwardsEnabled",nf,PS=[];function aD(o,e){if(PS.includes(e))throw new Error("Cannot register the same widget multiple times");PS.push(e);let t=new Y,n=new U(sD,!1).bindTo(o),i=new U(ON,!0).bindTo(o),r=new U(PN,!0).bindTo(o),s=()=>{n.set(!0),nf=e},a=()=>{n.set(!1),nf===e&&(nf=void 0)};return ar(e.element)&&s(),t.add(e.onDidFocus(()=>s())),t.add(e.onDidBlur(()=>a())),t.add(re(()=>{PS.splice(PS.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:r,dispose(){t.dispose()}}}var Qp=class extends ed{constructor(e,t,n,i){super(e,t,n);let r=this._register(i.createScoped(this.element));this._register(aD(r,this))}};Qp=k([I(3,st)],Qp);var MS=class extends jg{constructor(e,t,n,i){super(e,t,n);let r=this._register(i.createScoped(this.inputBox.element));this._register(aD(r,this.inputBox))}};MS=k([I(3,st)],MS);var NS=class extends OS{constructor(e,t,n,i,r=!1){super(e,t,r,n);let s=this._register(i.createScoped(this.inputBox.element));this._register(aD(s,this.inputBox))}};NS=k([I(3,st)],NS);ri.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:$.and($.has(sD),$.equals(PN,!0),$.not("isComposing"),AN.isEqualTo(!1)),primary:16,secondary:[528],handler:o=>{nf?.showPreviousValue()}});ri.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:$.and($.has(sD),$.equals(ON,!0),$.not("isComposing"),AN.isEqualTo(!1)),primary:18,secondary:[530],handler:o=>{nf?.showNextValue()}});function MN(o){return o.lookupKeybinding("history.showPrevious")?.getElectronAccelerator()==="Up"&&o.lookupKeybinding("history.showNext")?.getElectronAccelerator()==="Down"}var NN=new be("menu.view.filter"),FN=new be("submenu.view.filter");Ft.appendMenuItem(NN,{submenu:FN,title:c("more filters","More Filters..."),group:"navigation",icon:Q.filter});var lD=class extends kc{_checked=!1;set checked(e){this._checked!==e&&(this._checked=e,this.updateChecked())}updateChecked(){this.element&&this.element.classList.toggle("checked",this._checked)}render(e){super.render(e),this.updateChecked()}},Xp=class extends Bn{constructor(t,n,i,r,s){super();this.options=t;this.instantiationService=n;this.contextViewService=i;this.keybindingService=s;this.delayedFilterUpdate=new Ar(400),this._register(re(()=>this.delayedFilterUpdate.cancel())),t.focusContextKey&&(this.focusContextKey=new U(t.focusContextKey,!1).bindTo(r)),this.element=De(".viewpane-filter"),[this.filterInputBox,this.focusTracker]=this.createInput(this.element),this._register(this.filterInputBox),this._register(this.focusTracker);let a=Pe(this.element,De(".viewpane-filter-controls"));this.filterBadge=this.createBadge(a),this.toolbar=this._register(this.createToolBar(a)),this.adjustInputBox()}element;delayedFilterUpdate;filterInputBox;filterBadge;toolbar;focusContextKey;_onDidChangeFilterText=this._register(new x);onDidChangeFilterText=this._onDidChangeFilterText.event;moreFiltersActionViewItem;isMoreFiltersChecked=!1;lastWidth;focusTracker;get onDidFocus(){return this.focusTracker.onDidFocus}get onDidBlur(){return this.focusTracker.onDidBlur}hasFocus(){return this.filterInputBox.hasFocus()}focus(){this.filterInputBox.focus()}blur(){this.filterInputBox.blur()}updateBadge(t){this.filterBadge.classList.toggle("hidden",!t),this.filterBadge.textContent=t||"",this.adjustInputBox()}setFilterText(t){this.filterInputBox.value=t}getFilterText(){return this.filterInputBox.value}getHistory(){return this.filterInputBox.getHistory()}layout(t){this.element.parentElement?.classList.toggle("grow",t>700),this.element.classList.toggle("small",t<400),this.adjustInputBox(),this.lastWidth=t}relayout(){this.lastWidth&&this.layout(this.lastWidth)}checkMoreFilters(t){this.isMoreFiltersChecked=t,this.moreFiltersActionViewItem&&(this.moreFiltersActionViewItem.checked=t)}createInput(t){let n=this._register(this.instantiationService.createInstance(Qp,t,this.contextViewService,{placeholder:this.options.placeholder,ariaLabel:this.options.ariaLabel,history:this.options.history||[],showHistoryHint:()=>MN(this.keybindingService),inputBoxStyles:U1}));this.options.text&&(n.value=this.options.text),this._register(n.onDidChange(r=>this.delayedFilterUpdate.trigger(()=>this.onDidInputChange(n)))),this._register(zn(n.inputElement,ee.KEY_DOWN,r=>this.onInputKeyDown(r,n))),this._register(zn(t,ee.KEY_DOWN,this.handleKeyboardEvent)),this._register(zn(t,ee.KEY_UP,this.handleKeyboardEvent)),this._register(zn(n.inputElement,ee.CLICK,r=>{r.stopPropagation(),r.preventDefault()}));let i=this._register(qo(n.inputElement));return this.focusContextKey&&(this._register(i.onDidFocus(()=>this.focusContextKey.set(!0))),this._register(i.onDidBlur(()=>this.focusContextKey.set(!1))),this._register(re(()=>this.focusContextKey.reset()))),[n,i]}createBadge(t){let n=Pe(t,De(".viewpane-filter-badge.hidden"));return n.style.backgroundColor=J(Ol),n.style.color=J(ty),n.style.border=`1px solid ${J(pe)}`,n}createToolBar(t){return this.instantiationService.createInstance(Yp,t,NN,{hiddenItemStrategy:-1,actionViewItemProvider:(n,i)=>{if(n instanceof Ti&&n.item.submenu.id===FN.id)return this.moreFiltersActionViewItem=this.instantiationService.createInstance(lD,n,i),this.moreFiltersActionViewItem.checked=this.isMoreFiltersChecked,this.moreFiltersActionViewItem}})}onDidInputChange(t){t.addToHistory(),this._onDidChangeFilterText.fire(t.value)}adjustInputBox(){this.filterInputBox.inputElement.style.paddingRight=this.element.classList.contains("small")||this.filterBadge.classList.contains("hidden")?"25px":"150px"}handleKeyboardEvent(t){(t.equals(10)||t.equals(15)||t.equals(17)||t.equals(14)||t.equals(13))&&t.stopPropagation()}onInputKeyDown(t,n){let i=!1;t.equals(2)&&!this.toolbar.isEmpty()&&(this.toolbar.focus(),i=!0),i&&(t.stopPropagation(),t.preventDefault())}};Xp=k([I(1,Ze),I(2,gS),I(3,st),I(4,Qn)],Xp);var uOt=H("accessibleViewInformationService"),FS=class extends N{constructor(t){super();this._storageService=t}hasShownAccessibleView(t){return this._storageService.getBoolean(`${PL}${t}`,-1,!1)===!0}};FS=k([I(0,Mt)],FS);var VS=new Ii("viewpane.action.filter"),nz=Dt("view-pane-container-expanded",Q.chevronDown,c("viewPaneContainerExpandedIcon","Icon for an expanded view pane container.")),iz=Dt("view-pane-container-collapsed",Q.chevronRight,c("viewPaneContainerCollapsedIcon","Icon for a collapsed view pane container.")),BN=Be.as(Zg.ViewsRegistry),of=class{constructor(e,t,n,i,r,s,a){this.container=e;this.delegate=t;this.instantiationService=n;this.openerService=i;this.telemetryService=r;this.contextKeyService=s;this.disposables.add(G.runAndSubscribe(this.delegate.onDidChangeViewWelcomeState,()=>this.onDidChangeViewWelcomeState())),this.disposables.add(a.onWillShutdown(()=>this.dispose()))}defaultItem;items=[];get enabled(){return this._enabled}_enabled=!1;element;scrollableElement;disposables=new Y;enabledDisposables=this.disposables.add(new Y);renderDisposables=this.disposables.add(new Y);layout(e,t){this._enabled&&(this.element.style.height=`${e}px`,this.element.style.width=`${t}px`,this.element.classList.toggle("wide",t>640),this.scrollableElement.scanDomNode())}focus(){this._enabled&&this.element.focus()}onDidChangeViewWelcomeState(){let e=this.delegate.shouldShowWelcome();if(this._enabled===e)return;if(this._enabled=e,!e){this.enabledDisposables.clear();return}this.container.classList.add("welcome");let t=Pe(this.container,De(".welcome-view"));this.element=De(".welcome-view-content",{tabIndex:0}),this.scrollableElement=new Fa(this.element,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3}),Pe(t,this.scrollableElement.getDomNode()),this.enabledDisposables.add(re(()=>{this.container.classList.remove("welcome"),this.scrollableElement.dispose(),t.remove(),this.scrollableElement=void 0,this.element=void 0})),this.contextKeyService.onDidChangeContext(this.onDidChangeContext,this,this.enabledDisposables),G.chain(BN.onDidChangeViewWelcomeContent,n=>n.filter(i=>i===this.delegate.id))(this.onDidChangeViewWelcomeContent,this,this.enabledDisposables),this.onDidChangeViewWelcomeContent()}onDidChangeViewWelcomeContent(){let e=BN.getViewWelcomeContent(this.delegate.id);this.items=[];for(let t of e)if(t.when==="default")this.defaultItem={descriptor:t,visible:!0};else{let n=t.when?this.contextKeyService.contextMatchesRules(t.when):!0;this.items.push({descriptor:t,visible:n})}this.render()}onDidChangeContext(){let e=!1;for(let t of this.items){if(!t.descriptor.when||t.descriptor.when==="default")continue;let n=this.contextKeyService.contextMatchesRules(t.descriptor.when);t.visible!==n&&(t.visible=n,e=!0)}e&&this.render()}render(){this.renderDisposables.clear(),this.element.innerText="";let e=this.getContentDescriptors();if(e.length===0){this.container.classList.remove("welcome"),this.scrollableElement.scanDomNode();return}for(let{content:t,precondition:n}of e){let i=t.split(`
`);for(let r of i){if(r=r.trim(),!r)continue;let s=RN(r);if(s.nodes.length===1&&typeof s.nodes[0]!="string"){let a=s.nodes[0],l=Pe(this.element,De(".button-container")),d=new Ha(l,{title:a.title,supportIcons:!0,...cS});if(d.label=a.label,d.onDidClick(u=>{this.telemetryService.publicLog2("views.welcomeAction",{viewId:this.delegate.id,uri:a.href}),this.openerService.open(a.href,{allowCommands:!0})},null,this.renderDisposables),this.renderDisposables.add(d),n){let u=()=>d.enabled=this.contextKeyService.contextMatchesRules(n);u();let p=new Set(n.keys());G.filter(this.contextKeyService.onDidChangeContext,m=>m.affectsSome(p))(u,null,this.renderDisposables)}}else{let a=Pe(this.element,De("p"));for(let l of s.nodes)if(typeof l=="string")Pe(a,document.createTextNode(l));else{let d=this.renderDisposables.add(this.instantiationService.createInstance(qp,a,l,{}));if(n&&l.href.startsWith("command:")){let u=()=>d.enabled=this.contextKeyService.contextMatchesRules(n);u();let p=new Set(n.keys());G.filter(this.contextKeyService.onDidChangeContext,m=>m.affectsSome(p))(u,null,this.renderDisposables)}}}}}this.container.classList.add("welcome"),this.scrollableElement.scanDomNode()}getContentDescriptors(){let e=this.items.filter(t=>t.visible);return e.length===0&&this.defaultItem?[this.defaultItem.descriptor]:e.map(t=>t.descriptor)}dispose(){this.disposables.dispose()}};of=k([I(2,Ze),I(3,Ql),I(4,$t),I(5,st),I(6,js)],of);var Rc=class extends bS{constructor(t,n,i,r,s,a,l,d,u,p,h,m){super({...t,orientation:a.getViewLocationById(t.id)===1?1:0});this.keybindingService=n;this.contextMenuService=i;this.configurationService=r;this.contextKeyService=s;this.viewDescriptorService=a;this.instantiationService=l;this.openerService=d;this.themeService=u;this.telemetryService=p;this.hoverService=h;this.accessibleViewInformationService=m;this.id=t.id,this._title=t.title,this._titleDescription=t.titleDescription,this._singleViewPaneContainerTitle=t.singleViewPaneContainerTitle,this.showActions=t.showActions??0,this.scopedContextKeyService=this._register(s.createScoped(this.element)),this.scopedContextKeyService.createKey("view",this.id);let g=this.scopedContextKeyService.createKey("viewLocation",ci(a.getViewLocationById(this.id)));this._register(G.filter(a.onDidChangeLocation,y=>y.views.some(C=>C.id===this.id))(()=>g.set(ci(a.getViewLocationById(this.id)))));let f=this._register(this.instantiationService.createChild(new rm([st,this.scopedContextKeyService])));this.menuActions=this._register(f.createInstance(rd,t.titleMenuId??be.ViewTitle,be.ViewTitleContext,{shouldForwardArgs:!t.donotForwardArgs,renderShortTitle:!0})),this._register(this.menuActions.onDidChange(()=>this.updateActions()))}static AlwaysShowActionsConfig="workbench.view.alwaysShowHeaderActions";_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_onDidChangeBodyVisibility=this._register(new x);onDidChangeBodyVisibility=this._onDidChangeBodyVisibility.event;_onDidChangeTitleArea=this._register(new x);onDidChangeTitleArea=this._onDidChangeTitleArea.event;_onDidChangeViewWelcomeState=this._register(new x);onDidChangeViewWelcomeState=this._onDidChangeViewWelcomeState.event;_isVisible=!1;id;_title;get title(){return this._title}_titleDescription;get titleDescription(){return this._titleDescription}_singleViewPaneContainerTitle;get singleViewPaneContainerTitle(){return this._singleViewPaneContainerTitle}menuActions;progressBar;progressIndicator;toolbar;showActions;headerContainer;titleContainer;titleContainerHover;titleDescriptionContainer;titleDescriptionContainerHover;iconContainer;iconContainerHover;twistiesContainer;viewWelcomeController;scopedContextKeyService;get headerVisible(){return super.headerVisible}set headerVisible(t){super.headerVisible=t,this.element.classList.toggle("merged-header",!t)}setVisible(t){this._isVisible!==t&&(this._isVisible=t,this.isExpanded()&&this._onDidChangeBodyVisibility.fire(t))}isVisible(){return this._isVisible}isBodyVisible(){return this._isVisible&&this.isExpanded()}setExpanded(t){let n=super.setExpanded(t);return n&&this._onDidChangeBodyVisibility.fire(t),this.updateTwistyIcon(),n}render(){super.render();let t=qo(this.element);this._register(t),this._register(t.onDidFocus(()=>this._onDidFocus.fire())),this._register(t.onDidBlur(()=>this._onDidBlur.fire()))}renderHeader(t){this.headerContainer=t,this.twistiesContainer=Pe(t,De(`.twisty-container${je.asCSSSelector(this.getTwistyIcon(this.isExpanded()))}`)),this.renderHeaderTitle(t,this.title);let n=Pe(t,De(".actions"));n.classList.toggle("show-always",this.showActions===2),n.classList.toggle("show-expanded",this.showActions===1),this.toolbar=this.instantiationService.createInstance(Lc,n,{orientation:0,actionViewItemProvider:(s,a)=>this.getActionViewItem(s,a),ariaLabel:c("viewToolbarAriaLabel","{0} actions",this.title),getKeyBinding:s=>this.keybindingService.lookupKeybinding(s.id),renderDropdownAsChildElement:!0,actionRunner:this.getActionRunner(),resetMenu:this.menuActions.menuId}),this._register(this.toolbar),this.setActions(),this._register(W(n,ee.CLICK,s=>s.preventDefault()));let i=this.viewDescriptorService.getViewContainerByViewId(this.id);i?this._register(this.viewDescriptorService.getViewContainerModel(i).onDidChangeContainerInfo(({title:s})=>this.updateTitle(this.title))):console.error(`View container model not found for view ${this.id}`);let r=G.filter(this.configurationService.onDidChangeConfiguration,s=>s.affectsConfiguration(Rc.AlwaysShowActionsConfig));this._register(r(this.updateActionsVisibility,this)),this.updateActionsVisibility()}updateHeader(){super.updateHeader(),this.updateTwistyIcon()}updateTwistyIcon(){this.twistiesContainer&&(this.twistiesContainer.classList.remove(...je.asClassNameArray(this.getTwistyIcon(!this._expanded))),this.twistiesContainer.classList.add(...je.asClassNameArray(this.getTwistyIcon(this._expanded))))}getTwistyIcon(t){return t?nz:iz}style(t){super.style(t);let n=this.getIcon();if(this.iconContainer){let i=$o(t.headerForeground,J(at));j.isUri(n)?(this.iconContainer.style.backgroundColor=i,this.iconContainer.style.color=""):(this.iconContainer.style.color=i,this.iconContainer.style.backgroundColor="")}}getIcon(){return this.viewDescriptorService.getViewDescriptorById(this.id)?.containerIcon||TN}renderHeaderTitle(t,n){this.iconContainer=Pe(t,De(".icon",void 0));let i=this.getIcon(),r;if(j.isUri(i)){r=`view-${this.id.replace(/[\.\:]/g,"-")}`;let a=`.pane-header .icon.${r}`;_E(a,`
				mask: ${gl(i)} no-repeat 50% 50%;
				mask-size: 24px;
				-webkit-mask: ${gl(i)} no-repeat 50% 50%;
				-webkit-mask-size: 16px;
			`)}else je.isThemeIcon(i)&&(r=je.asClassName(i));r&&this.iconContainer.classList.add(...r.split(" "));let s=this.calculateTitle(n);this.titleContainer=Pe(t,De("h3.title",{},s)),this.titleContainerHover=this._register(this.hoverService.setupManagedHover(Yt("mouse"),this.titleContainer,s)),this._titleDescription&&this.setTitleDescription(this._titleDescription),this.iconContainerHover=this._register(this.hoverService.setupManagedHover(Yt("mouse"),this.iconContainer,s)),this.iconContainer.setAttribute("aria-label",this._getAriaLabel(s))}_getAriaLabel(t){let n=this.viewDescriptorService.getViewDescriptorById(this.id)?.accessibilityHelpContent,i=this.accessibleViewInformationService?.hasShownAccessibleView(this.id);return!n||i?t:c("viewAccessibilityHelp","Use Alt+F1 for accessibility help {0}",t)}updateTitle(t){let n=this.calculateTitle(t);this.titleContainer&&(this.titleContainer.textContent=n,this.titleContainerHover?.update(n)),this.iconContainer&&(this.iconContainerHover?.update(n),this.iconContainer.setAttribute("aria-label",this._getAriaLabel(n))),this._title=t,this._onDidChangeTitleArea.fire()}setTitleDescription(t){this.titleDescriptionContainer?(this.titleDescriptionContainer.textContent=t??"",this.titleDescriptionContainerHover?.update(t??"")):t&&this.titleContainer&&(this.titleDescriptionContainer=oL(this.titleContainer,De("span.description",{},t)),this.titleDescriptionContainerHover=this._register(this.hoverService.setupManagedHover(Yt("mouse"),this.titleDescriptionContainer,t)))}updateTitleDescription(t){this.setTitleDescription(t),this._titleDescription=t,this._onDidChangeTitleArea.fire()}calculateTitle(t){let n=this.viewDescriptorService.getViewContainerByViewId(this.id),i=this.viewDescriptorService.getViewContainerModel(n),r=this.viewDescriptorService.getViewDescriptorById(this.id);return!(this.viewDescriptorService.getDefaultContainerById(this.id)===n)&&r?.containerTitle&&i.title!==r.containerTitle?`${r.containerTitle}: ${t}`:t}renderBody(t){this.viewWelcomeController=this._register(this.instantiationService.createInstance(of,t,this))}layoutBody(t,n){this.viewWelcomeController.layout(t,n)}onDidScrollRoot(){}getProgressIndicator(){if(this.progressBar===void 0&&(this.progressBar=this._register(new iS(this.element,WM)),this.progressBar.hide()),this.progressIndicator===void 0){let t=this;this.progressIndicator=this._register(new DS(lt(this.progressBar),new class extends _S{constructor(){super(t.id,t.isBodyVisible()),this._register(t.onDidChangeBodyVisibility(n=>n?this.onScopeOpened(t.id):this.onScopeClosed(t.id)))}}))}return this.progressIndicator}getProgressLocation(){return this.viewDescriptorService.getViewContainerByViewId(this.id).id}getLocationBasedColors(){return oz(this.viewDescriptorService.getViewLocationById(this.id))}focus(){this.viewWelcomeController.enabled?this.viewWelcomeController.focus():this.element&&(this.element.focus(),this._onDidFocus.fire())}setActions(){if(this.toolbar){let t=[...this.menuActions.getPrimaryActions()];this.shouldShowFilterInHeader()&&t.unshift(VS),this.toolbar.setActions(T1(t),T1(this.menuActions.getSecondaryActions())),this.toolbar.context=this.getActionsContext()}}updateActionsVisibility(){if(!this.headerContainer)return;let t=this.configurationService.getValue("workbench.view.alwaysShowHeaderActions");this.headerContainer.classList.toggle("actions-always-visible",t)}updateActions(){this.setActions(),this._onDidChangeTitleArea.fire()}getActionViewItem(t,n){if(t.id===VS.id){let i=this;return new class extends di{constructor(){super(null,t)}setFocusable(){}get trapsArrowNavigation(){return!0}render(r){r.classList.add("viewpane-filter-container");let s=i.getFilterWidget();Pe(r,s.element),s.relayout()}}}return yS(this.instantiationService,t,{...n,menuAsChild:t instanceof Ti})}getActionsContext(){}getActionRunner(){}getOptimalWidth(){return 0}saveState(){}shouldShowWelcome(){return!1}getFilterWidget(){}shouldShowFilterInHeader(){return!1}};Rc=k([I(1,Qn),I(2,Xn),I(3,He),I(4,st),I(5,zi),I(6,Ze),I(7,Ql),I(8,en),I(9,$t),I(10,sd)],Rc);var BS=class extends Rc{filterWidget;dimension;filterContainer;constructor(e,t,n,i,r,s,a,l,d,u,p,h){super(e,t,n,i,r,s,a,l,d,u,p,h);let m=this._register(a.createChild(new rm([st,this.scopedContextKeyService])));this.filterWidget=this._register(m.createInstance(Xp,e.filterOptions))}getFilterWidget(){return this.filterWidget}renderBody(e){super.renderBody(e),this.filterContainer=Pe(e,De(".viewpane-filter-container"))}layoutBody(e,t){super.layoutBody(e,t),this.dimension=new ln(t,e);let n=!this.filterContainer?.hasChildNodes(),i=this.shouldShowFilterInHeader();n!==i&&(i&&dr(this.filterContainer),this.updateActions(),i||Pe(this.filterContainer,this.filterWidget.element)),i||(e=e-44),this.filterWidget.layout(t),this.layoutBodyContent(e,t)}shouldShowFilterInHeader(){return!(this.dimension&&this.dimension.width<600&&this.dimension.height>100)}};BS=k([I(1,Qn),I(2,Xn),I(3,He),I(4,st),I(5,zi),I(6,Ze),I(7,Ql),I(8,en),I(9,$t),I(10,sd)],BS);function oz(o){let e,t,n,i;switch(o){case 1:e=H1,t=rN,n=sN,i=aN;break;case 0:case 2:default:e=hS,t=IN,n=SN,i=xN}return{background:e,listOverrideStyles:{listBackground:e,treeStickyScrollBackground:t,treeStickyScrollBorder:n,treeStickyScrollShadow:i}}}var dD=class{telemetryLevel=0;sessionId="someValue.sessionId";machineId="someValue.machineId";sqmId="someValue.sqmId";devDeviceId="someValue.devDeviceId";firstSessionDate="someValue.firstSessionDate";sendErrorTelemetry=!1;publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},sMt=new dD;var kMt=new Qo("pprice.better-merge");var cD=class{_generators=new Map;_cache=new WeakMap;register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){let t=Object.create(null);for(let n of e){let i=this.readActivationEvents(n);i.length>0&&(t[Qo.toKey(n.identifier)]=i)}return t}_readActivationEvents(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];let t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let n=0;n<t.length;n++)t[n]==="onUri"&&(t[n]=`onUri:${Qo.toKey(e.identifier)}`);if(!e.contributes)return t;for(let n in e.contributes){let i=this._generators.get(n);if(!i)continue;let r=e.contributes[n],s=Array.isArray(r)?r:[r];try{i(s,t)}catch(a){bt(a)}}return t}},uD=new cD;var sz={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:6},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},rf=Object.freeze(sz);var NMt=H("IV8InspectProfilingService"),az;(t=>{function o(n){return!!(n.samples&&n.timeDeltas)}t.isValidProfile=o;function e(n,i="noAbsolutePaths"){for(let r of n.nodes)r.callFrame&&r.callFrame.url&&(ol(r.callFrame.url)||/^\w[\w\d+.-]*:\/\/\/?/.test(r.callFrame.url))&&(r.callFrame.url=so(i,rl(r.callFrame.url)));return n}t.rewriteAbsolutePaths=e})(az||={});var fD=Be.as(va.JSONContribution);var pD=class o{constructor(e,t){this.added=e;this.removed=t}static _toSet(e){let t=new xm;for(let n=0,i=e.length;n<i;n++)t.add(e[n].description.identifier);return t}static compute(e,t){if(!e||!e.length)return new o(t,[]);if(!t||!t.length)return new o([],e);let n=this._toSet(e),i=this._toSet(t),r=t.filter(a=>!n.has(a.description.identifier)),s=e.filter(a=>!i.has(a.description.identifier));return new o(r,s)}},hD=class{name;defaultExtensionKind;_handler;_users;_delta;constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");return this._handler=e,this._handle(),{dispose:()=>{this._handler=null}}}acceptUsers(e){this._delta=pD.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){bt(e)}}},lz={type:"string",enum:["ui","workspace"],enumDescriptions:[c("ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),c("workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},VN="vscode://schemas/vscode-extensions",mD={properties:{engines:{type:"object",description:c("vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:c("vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:c("vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:c("vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:c("vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:mR},{type:"string",const:"Languages",deprecationMessage:c("vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:c("vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:c("vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:c("vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:c("vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:c("vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:c("vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:c("vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(rf).map(o=>o),markdownEnumDescriptions:Object.values(rf).map(o=>o.proposal)}},api:{markdownDescription:c("vscode.extension.api","Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[c("vscode.extension.api.none","Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:c("vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:c("vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:c("vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:c("vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:c("vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:c("vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:c("vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:c("vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:c("vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:c("vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:c("vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:c("vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:c("vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:c("vscode.extension.activationEvents.onEditSession","An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:c("vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:c("vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:c("vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:c("vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:c("vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:c("vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:c("vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:c("vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:c("vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:c("vscode.extension.activationEvents.onTerminalQuickFixRequest","An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:c("vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:c("vscode.extension.activationEvents.onIssueReporterOpened","An activation event emitted when the issue reporter is opened.")},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:c("vscode.extension.activationEvents.onChatParticipant","An activation event emitted when the specified chat participant is invoked.")},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:c("vscode.extension.activationEvents.onLanguageModelTool","An activation event emitted when the specified language model tool is invoked.")},{label:"*",description:c("vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:c("vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:c("vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:c("vscode.extension.badges.href","Badge link.")},description:{type:"string",description:c("vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:c("vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:c("vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:c("vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:mS}},extensionPack:{description:c("vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:mS}},extensionKind:{description:c("extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:lz,default:["workspace"],defaultSnippets:[{body:["ui"],description:c("extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:c("extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:c("extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:c("extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:c("extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:c("vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:c("vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:c("vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[c("vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),c("vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),c("vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:c("vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:c("vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:c("vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[c("vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),c("vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),c("vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:c("vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:c("vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:c("vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:c("vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:c("vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:c("vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:c("vscode.extension.icon","The path to a 128x128 pixel icon.")},l10n:{type:"string",description:c({key:"vscode.extension.l10n",comment:['{Locked="bundle.l10n._locale_.json"}','{Locked="vscode.l10n API"}']},"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:c("vscode.extension.pricing","The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}},gD=class{_extensionPoints=new Map;registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);let t=new hD(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&uD.register(e.extensionPoint,e.activationEventsGenerator),mD.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,fD.registerSchema(VN,mD),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}},WN={ExtensionsRegistry:"ExtensionsRegistry"};Be.add(WN.ExtensionsRegistry,new gD);var TNt=Be.as(WN.ExtensionsRegistry);fD.registerSchema(VN,mD);fD.registerSchema(lP,{properties:{extensionEnabledApiProposals:{description:c("product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(rf),markdownEnumDescriptions:Object.values(rf).map(o=>o.proposal)}}]}}}});var oFt=Object.freeze({identifier:new Qo("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:j.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1});var Zp=H("extensionService");var US=class extends Jp{constantViewDescriptors=new Map;allViews=new Map;filterValue;constructor(e,t,n,i,r,s,a,l,d,u,p,h){super(e,{mergeViewWithContainerWhenSingleView:!1},a,n,i,d,r,u,l,s,p,h),this._register(t(m=>{this.filterValue=m,this.onFilterChanged(m)})),this._register(this.viewContainerModel.onDidChangeActiveViewDescriptors(()=>{this.updateAllViews(this.viewContainerModel.activeViewDescriptors)}))}updateAllViews(e){e.forEach(t=>{let n=this.getFilterOn(t);n&&(this.allViews.has(n)||this.allViews.set(n,new Map),this.allViews.get(n).set(t.id,t),this.filterValue&&!this.filterValue.includes(n)&&this.panes.find(i=>i.id===t.id)&&this.viewContainerModel.setVisible(t.id,!1))})}addConstantViewDescriptors(e){e.forEach(t=>this.constantViewDescriptors.set(t.id,t))}onFilterChanged(e){this.allViews.size===0&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),this.getViewsNotForTarget(e).forEach(t=>this.viewContainerModel.setVisible(t.id,!1)),this.getViewsForTarget(e).forEach(t=>this.viewContainerModel.setVisible(t.id,!0))}getViewsForTarget(e){let t=[];for(let n=0;n<e.length;n++)this.allViews.has(e[n])&&t.push(...Array.from(this.allViews.get(e[n]).values()));return t}getViewsNotForTarget(e){let t=this.allViews.keys(),n=t.next(),i=[];for(;!n.done;){let r=!1;e.forEach(s=>{n.value===s&&(r=!0)}),r||(i=i.concat(this.getViewsForTarget([n.value]))),n=t.next()}return i}onDidAddViewDescriptors(e){let t=super.onDidAddViewDescriptors(e);for(let n=0;n<e.length;n++)this.constantViewDescriptors.has(e[n].viewDescriptor.id)&&t[n].setExpanded(!1);return this.allViews.size===0&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),t}openView(e,t){let n=super.openView(e,t);if(n){let i=Array.from(this.allViews.entries()).find(r=>r[1].has(e));i&&!this.filterValue?.includes(i[0])&&this.setFilter(i[1].get(e))}return n}};US=k([I(2,He),I(3,ct),I(4,$t),I(5,Mt),I(6,Ze),I(7,en),I(8,Xn),I(9,Zp),I(10,bn),I(11,zi)],US);var XFt=Object.freeze({id:"application",order:100,title:c("applicationConfigurationTitle","Application"),type:"object"}),UN=Object.freeze({id:"workbench",order:7,title:c("workbenchConfigurationTitle","Workbench"),type:"object"}),cz=Object.freeze({id:"security",scope:1,title:c("securityConfigurationTitle","Security"),type:"object",order:7}),ZFt=Object.freeze({id:"problems",title:c("problemsConfigurationTitle","Problems"),type:"object",order:101}),uz=Object.freeze({id:"window",order:8,title:c("windowConfigurationTitle","Window"),type:"object"}),pz={ConfigurationMigration:"base.contributions.configuration.migration"},bD=class{migrations=[];_onDidRegisterConfigurationMigrations=new x;onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event;registerConfigurationMigrations(e){this.migrations.push(...e)}},GS=new bD;Be.add(pz.ConfigurationMigration,GS);var zS=class extends N{constructor(t,n){super();this.configurationService=t;this.workspaceService=n;this._register(this.workspaceService.onDidChangeWorkspaceFolders(async i=>{for(let r of i.added)await this.migrateConfigurationsForFolder(r,GS.migrations)})),this.migrateConfigurations(GS.migrations),this._register(GS.onDidRegisterConfigurationMigration(i=>this.migrateConfigurations(i)))}static ID="workbench.contrib.configurationMigration";async migrateConfigurations(t){await this.migrateConfigurationsForFolder(void 0,t);for(let n of this.workspaceService.getWorkspace().folders)await this.migrateConfigurationsForFolder(n,t)}async migrateConfigurationsForFolder(t,n){await Promise.all([n.map(i=>this.migrateConfigurationsForFolderAndOverride(i,t?.uri))])}async migrateConfigurationsForFolderAndOverride(t,n){let i=this.configurationService.inspect(t.key,{resource:n}),r=this.workspaceService.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(let[s,a]of r){let l=i[s];if(!l)continue;let d=[];if(l.value!==void 0){let u=await this.runMigration(t,s,l.value,n,void 0);for(let p of u??[])d.push([p,[]])}for(let{identifiers:u,value:p}of l.overrides??[])if(p!==void 0){let h=await this.runMigration(t,s,p,n,u);for(let m of h??[])d.push([m,u])}d.length&&await Promise.allSettled(d.map(async([[u,p],h])=>this.configurationService.updateValue(u,p.value,{resource:n,overrideIdentifiers:h},a)))}}async runMigration(t,n,i,r,s){let a=d=>{let p=this.configurationService.inspect(d,{resource:r})[n];if(p)return s?p.overrides?.find(({identifiers:h})=>Si(h,s))?.value:p.value},l=await t.migrateFn(i,a);return Array.isArray(l)?l:[[t.key,l]]}};zS=k([I(0,He),I(1,bn)],zS);var HS=class extends N{constructor(t){super();this.remoteAgentService=t;this.create()}static ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration";_ready=new Or;ready=this._ready.p;async create(){try{await this.doCreate()}finally{this._ready.complete()}}async doCreate(){if(!St&&(await this.remoteAgentService.getEnvironment())?.os!==1)return;Be.as(ws.Configuration).registerConfiguration({...cz,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:c("security.allowedUNCHosts.patternErrorMessage","UNC host names must not contain backslashes.")},default:[],markdownDescription:c("security.allowedUNCHosts","A set of UNC host names (without leading or trailing backslash, for example `192.168.0.1` or `my-server`) to allow without user confirmation. If a UNC host is being accessed that is not allowed via this setting or has not been acknowledged via user confirmation, an error will occur and the operation stopped. A restart is required when changing this setting. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:c("security.restrictUNCAccess","If enabled, only allows access to UNC host names that are allowed by the `#security.allowedUNCHosts#` setting or after user confirmation. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2}}})}};HS=k([I(0,Vy)],HS);var sf="window.newWindowProfile",KS=class extends N{constructor(t,n){super();this.userDataProfilesService=t;this.configurationService=n;this.registerNewWindowProfileConfiguration(),this._register(this.userDataProfilesService.onDidChangeProfiles(i=>this.registerNewWindowProfileConfiguration())),this.setNewWindowProfile(),this.checkAndResetNewWindowProfileConfig(),this._register(n.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(sf)&&this.setNewWindowProfile()})),this._register(this.userDataProfilesService.onDidChangeProfiles(()=>this.checkAndResetNewWindowProfileConfig()))}static ID="workbench.contrib.dynamicWindowConfiguration";configurationNode;newWindowProfile;registerNewWindowProfileConfiguration(){let t=Be.as(ws.Configuration),n={...uz,properties:{[sf]:{type:["string","null"],default:null,enum:[...this.userDataProfilesService.profiles.map(i=>i.name),null],enumItemLabels:[...this.userDataProfilesService.profiles.map(i=>""),c("active window","Active Window")],description:c("newWindowProfile","Specifies the profile to use when opening a new window. If a profile name is provided, the new window will use that profile. If no profile name is provided, the new window will use the profile of the active window or the Default profile if no active window exists."),scope:1}}};this.configurationNode?t.updateConfigurations({add:[n],remove:[this.configurationNode]}):t.registerConfiguration(n),this.configurationNode=n}setNewWindowProfile(){let t=this.configurationService.getValue(sf);this.newWindowProfile=t?this.userDataProfilesService.profiles.find(n=>n.name===t):void 0}checkAndResetNewWindowProfileConfig(){let t=this.configurationService.getValue(sf);if(!t)return;let n=this.newWindowProfile?this.userDataProfilesService.profiles.find(i=>i.id===this.newWindowProfile.id):void 0;t!==n?.name&&this.configurationService.updateValue(sf,n?.name)}};KS=k([I(0,mP),I(1,He)],KS);var PBt=H("editorResolverService");var hz=Be.as(ws.Configuration),mz={...UN,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:c("editor.editorAssociations",'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),additionalProperties:{type:"string"}}}};hz.registerConfiguration(mz);var JBt=new U("workbenchState",void 0,{type:"string",description:c("workbenchState","The kind of workspace opened in the window, either 'empty' (no workspace), 'folder' (single folder) or 'workspace' (multi-root workspace)")}),e2t=new U("workspaceFolderCount",0,c("workspaceFolderCount","The number of root folders in the workspace")),t2t=new U("openFolderWorkspaceSupport",!0,!0),n2t=new U("enterMultiRootWorkspaceSupport",!0,!0),i2t=new U("emptyWorkspaceSupport",!0,!0),o2t=new U("dirtyWorkingCopies",!1,c("dirtyWorkingCopies","Whether there are any working copies with unsaved changes")),r2t=new U("remoteName","",c("remoteName","The name of the remote the window is connected to or an empty string if not connected to any remote")),s2t=new U("virtualWorkspace","",c("virtualWorkspace","The scheme of the current workspace is from a virtual file system or an empty string.")),a2t=new U("temporaryWorkspace",!1,c("temporaryWorkspace","The scheme of the current workspace is from a temporary file system.")),vD=new U("isFullscreen",!1,c("isFullscreen","Whether the main window is in fullscreen mode")),os=new U("isAuxiliaryWindowFocusedContext",!1,c("isAuxiliaryWindowFocusedContext","Whether an auxiliary window is focused")),l2t=new U("hasWebFileSystemAccess",!1,!0),d2t=new U("embedderIdentifier",void 0,c("embedderIdentifier","The identifier of the embedder according to the product service, if one is defined")),c2t=new U("activeEditorIsDirty",!1,c("activeEditorIsDirty","Whether the active editor has unsaved changes")),u2t=new U("activeEditorIsNotPreview",!1,c("activeEditorIsNotPreview","Whether the active editor is not in preview mode")),p2t=new U("activeEditorIsFirstInGroup",!1,c("activeEditorIsFirstInGroup","Whether the active editor is the first one in its group")),h2t=new U("activeEditorIsLastInGroup",!1,c("activeEditorIsLastInGroup","Whether the active editor is the last one in its group")),m2t=new U("activeEditorIsPinned",!1,c("activeEditorIsPinned","Whether the active editor is pinned")),g2t=new U("activeEditorIsReadonly",!1,c("activeEditorIsReadonly","Whether the active editor is read-only")),f2t=new U("activeCompareEditorCanSwap",!1,c("activeCompareEditorCanSwap","Whether the active compare editor can swap sides")),b2t=new U("activeEditorCanToggleReadonly",!0,c("activeEditorCanToggleReadonly","Whether the active editor can toggle between being read-only or writeable")),v2t=new U("activeEditorCanRevert",!1,c("activeEditorCanRevert","Whether the active editor can revert")),y2t=new U("activeEditorCanSplitInGroup",!0),I2t=new U("activeEditor",null,{type:"string",description:c("activeEditor","The identifier of the active editor")}),S2t=new U("activeEditorAvailableEditorIds","",c("activeEditorAvailableEditorIds","The available editor identifiers that are usable for the active editor")),x2t=new U("textCompareEditorVisible",!1,c("textCompareEditorVisible","Whether a text compare editor is visible")),E2t=new U("textCompareEditorActive",!1,c("textCompareEditorActive","Whether a text compare editor is active")),C2t=new U("sideBySideEditorActive",!1,c("sideBySideEditorActive","Whether a side by side editor is active")),w2t=new U("groupEditorsCount",0,c("groupEditorsCount","The number of opened editor groups")),T2t=new U("activeEditorGroupEmpty",!1,c("activeEditorGroupEmpty","Whether the active editor group is empty")),k2t=new U("activeEditorGroupIndex",0,c("activeEditorGroupIndex","The index of the active editor group")),D2t=new U("activeEditorGroupLast",!1,c("activeEditorGroupLast","Whether the active editor group is the last group")),_2t=new U("activeEditorGroupLocked",!1,c("activeEditorGroupLocked","Whether the active editor group is locked")),gz=new U("multipleEditorGroups",!1,c("multipleEditorGroups","Whether there are multiple editor groups opened")),L2t=gz.toNegated(),R2t=new U("multipleEditorsSelectedInGroup",!1,c("multipleEditorsSelectedInGroup","Whether multiple editors have been selected in an editor group")),A2t=new U("twoEditorsSelectedInGroup",!1,c("twoEditorsSelectedInGroup","Whether exactly two editors have been selected in an editor group")),O2t=new U("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,c("SelectedEditorsInGroupFileOrUntitledResourceContextKey","Whether all selected editors in a group have a file or untitled resource associated")),fz=new U("editorPartMultipleEditorGroups",!1,c("editorPartMultipleEditorGroups","Whether there are multiple editor groups opened in an editor part")),P2t=fz.toNegated(),M2t=new U("editorPartMaximizedEditorGroup",!1,c("editorPartEditorGroupMaximized","Editor Part has a maximized group")),N2t=new U("isAuxiliaryEditorPart",!1,c("isAuxiliaryEditorPart","Editor Part is in an auxiliary window")),F2t=new U("editorIsOpen",!1,c("editorIsOpen","Whether an editor is open")),nr=new U("inZenMode",!1,c("inZenMode","Whether Zen mode is enabled")),yD=new U("isCenteredLayout",!1,c("isMainEditorCenteredLayout","Whether centered layout is enabled for the main editor")),B2t=new U("splitEditorsVertically",!1,c("splitEditorsVertically","Whether editors split vertically")),zN=new U("mainEditorAreaVisible",!0,c("mainEditorAreaVisible","Whether the editor area in the main window is visible")),V2t=new U("editorTabsVisible",!0,c("editorTabsVisible","Whether editor tabs are visible")),Ac=new U("sideBarVisible",!1,c("sideBarVisible","Whether the sidebar is visible")),W2t=new U("sideBarFocus",!1,c("sideBarFocus","Whether the sidebar has keyboard focus")),U2t=new U("activeViewlet","",c("activeViewlet","The identifier of the active viewlet")),ad=new U("statusBarFocused",!1,c("statusBarFocused","Whether the status bar has keyboard focus")),HN=new U("titleBarStyle",Kt?"native":"custom",c("titleBarStyle","Style of the window title bar")),z2t=new U("titleBarVisible",!1,c("titleBarVisible","Whether the title bar is visible")),H2t=new U("bannerFocused",!1,c("bannerFocused","Whether the banner has keyboard focus")),K2t=new U("notificationFocus",!0,c("notificationFocus","Whether a notification has keyboard focus")),G2t=new U("notificationCenterVisible",!1,c("notificationCenterVisible","Whether the notifications center is visible")),q2t=new U("notificationToastsVisible",!1,c("notificationToastsVisible","Whether a notification toast is visible")),$2t=new U("activeAuxiliary","",c("activeAuxiliary","The identifier of the active auxiliary panel")),j2t=new U("auxiliaryBarFocus",!1,c("auxiliaryBarFocus","Whether the auxiliary bar has keyboard focus")),Ga=new U("auxiliaryBarVisible",!1,c("auxiliaryBarVisible","Whether the auxiliary bar is visible")),Y2t=new U("activePanel","",c("activePanel","The identifier of the active panel")),Q2t=new U("panelFocus",!1,c("panelFocus","Whether the panel has keyboard focus")),ld=new U("panelPosition","bottom",c("panelPosition","The position of the panel, always 'bottom'")),ea=new U("panelAlignment","center",c("panelAlignment","The alignment of the panel, either 'center', 'left', 'right' or 'justify'")),Oc=new U("panelVisible",!1,c("panelVisible","Whether the panel is visible")),KN=new U("panelMaximized",!1,c("panelMaximized","Whether the panel is maximized")),Ir=new U("focusedView","",c("focusedView","The identifier of the view that has keyboard focus"));var No=class{constructor(e,t,n,i){this._contextKeyService=e;this._fileService=t;this._languageService=n;this._modelService=i;this._schemeKey=No.Scheme.bindTo(this._contextKeyService),this._filenameKey=No.Filename.bindTo(this._contextKeyService),this._dirnameKey=No.Dirname.bindTo(this._contextKeyService),this._pathKey=No.Path.bindTo(this._contextKeyService),this._langIdKey=No.LangId.bindTo(this._contextKeyService),this._resourceKey=No.Resource.bindTo(this._contextKeyService),this._extensionKey=No.Extension.bindTo(this._contextKeyService),this._hasResource=No.HasResource.bindTo(this._contextKeyService),this._isFileSystemResource=No.IsFileSystemResource.bindTo(this._contextKeyService),this._disposables.add(t.onDidChangeFileSystemProviderRegistrations(()=>{let r=this.get();this._isFileSystemResource.set(!!(r&&t.hasProvider(r)))})),this._disposables.add(i.onModelAdded(r=>{fn(r.uri,this.get())&&this._setLangId()})),this._disposables.add(i.onModelLanguageChanged(r=>{fn(r.model.uri,this.get())&&this._setLangId()}))}static Scheme=new U("resourceScheme",void 0,{type:"string",description:c("resourceScheme","The scheme of the resource")});static Filename=new U("resourceFilename",void 0,{type:"string",description:c("resourceFilename","The file name of the resource")});static Dirname=new U("resourceDirname",void 0,{type:"string",description:c("resourceDirname","The folder name the resource is contained in")});static Path=new U("resourcePath",void 0,{type:"string",description:c("resourcePath","The full path of the resource")});static LangId=new U("resourceLangId",void 0,{type:"string",description:c("resourceLangId","The language identifier of the resource")});static Resource=new U("resource",void 0,{type:"URI",description:c("resource","The full value of the resource including scheme and path")});static Extension=new U("resourceExtname",void 0,{type:"string",description:c("resourceExtname","The extension name of the resource")});static HasResource=new U("resourceSet",void 0,{type:"boolean",description:c("resourceSet","Whether a resource is present or not")});static IsFileSystemResource=new U("isFileSystemResource",void 0,{type:"boolean",description:c("isFileSystemResource","Whether the resource is backed by a file system provider")});_disposables=new Y;_value;_resourceKey;_schemeKey;_filenameKey;_dirnameKey;_pathKey;_langIdKey;_extensionKey;_hasResource;_isFileSystemResource;dispose(){this._disposables.dispose()}_setLangId(){let e=this.get();if(!e){this._langIdKey.set(null);return}let t=this._modelService.getModel(e)?.getLanguageId()??this._languageService.guessLanguageIdByFilepathOrFirstLine(e);this._langIdKey.set(t)}set(e){e=e??void 0,!fn(this._value,e)&&(this._value=e,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.set(e?e.toString():null),this._schemeKey.set(e?e.scheme:null),this._filenameKey.set(e?Ri(e):null),this._dirnameKey.set(e?this.uriToPath(ys(e)):null),this._pathKey.set(e?this.uriToPath(e):null),this._setLangId(),this._extensionKey.set(e?Ad(e):null),this._hasResource.set(!!e),this._isFileSystemResource.set(e?this._fileService.hasProvider(e):!1)}))}uriToPath(e){return e.scheme===me.file?e.fsPath:e.path}reset(){this._value=void 0,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.reset(),this._schemeKey.reset(),this._filenameKey.reset(),this._dirnameKey.reset(),this._pathKey.reset(),this._langIdKey.reset(),this._extensionKey.reset(),this._hasResource.reset(),this._isFileSystemResource.reset()})}get(){return this._value}};No=k([I(0,st),I(1,Ut),I(2,Pi),I(3,mr)],No);var ID=new be("Views");Ft.appendMenuItem(be.ViewContainerTitle,{submenu:ID,title:c("views","Views"),order:1});var eh=class o extends Bu{constructor(t,n,i,r,s){super(s);this.paneElement=t;this.orientation=n;this.bounds=i;this.location=r;this.cleanupOverlayScheduler=this._register(new yi(()=>this.dispose(),300)),this.create()}static OVERLAY_ID="monaco-pane-drop-overlay";container;overlay;_currentDropOperation;_disposed;cleanupOverlayScheduler;get currentDropOperation(){return this._currentDropOperation}get disposed(){return!!this._disposed}create(){this.container=document.createElement("div"),this.container.id=o.OVERLAY_ID,this.container.style.top="0px",this.paneElement.appendChild(this.container),this.paneElement.classList.add("dragged-over"),this._register(re(()=>{this.container.remove(),this.paneElement.classList.remove("dragged-over")})),this.overlay=document.createElement("div"),this.overlay.classList.add("pane-overlay-indicator"),this.container.appendChild(this.overlay),this.registerListeners(),this.updateStyles()}updateStyles(){this.overlay.style.backgroundColor=this.getColor(this.location===1?K1:q1)||"";let t=this.getColor(It);this.overlay.style.outlineColor=t||"",this.overlay.style.outlineOffset=t?"-2px":"",this.overlay.style.outlineStyle=t?"dashed":"",this.overlay.style.outlineWidth=t?"2px":"",this.overlay.style.borderColor=t||"",this.overlay.style.borderStyle="solid",this.overlay.style.borderWidth="0px"}registerListeners(){this._register(new Od(this.container,{onDragOver:t=>{this.positionOverlay(t.offsetX,t.offsetY),this.cleanupOverlayScheduler.isScheduled()&&this.cleanupOverlayScheduler.cancel()},onDragLeave:t=>this.dispose(),onDragEnd:t=>this.dispose(),onDrop:t=>{this.dispose()}})),this._register(W(this.container,ee.MOUSE_OVER,()=>{this.cleanupOverlayScheduler.isScheduled()||this.cleanupOverlayScheduler.schedule()}))}positionOverlay(t,n){let i=this.paneElement.clientWidth,r=this.paneElement.clientHeight,s=i/2,a=r/2,l;switch(this.orientation===0?n<a?l=0:n>=a&&(l=1):this.orientation===1&&(t<s?l=2:t>=s&&(l=3)),l){case 0:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"50%"});break;case 1:this.doPositionOverlay({bottom:"0",left:"0",width:"100%",height:"50%"});break;case 2:this.doPositionOverlay({top:"0",left:"0",width:"50%",height:"100%"});break;case 3:this.doPositionOverlay({top:"0",right:"0",width:"50%",height:"100%"});break;default:{let d="0",u="0",p="100%",h="100%";if(this.bounds){let m=this.container.getBoundingClientRect();d=`${this.bounds.top-m.top}px`,u=`${this.bounds.left-m.left}px`,h=`${this.bounds.bottom-this.bounds.top}px`,p=`${this.bounds.right-this.bounds.left}px`}this.doPositionOverlay({top:d,left:u,width:p,height:h})}}this.orientation===0&&r<=25||this.orientation===1&&i<=25?this.doUpdateOverlayBorder(l):this.doUpdateOverlayBorder(void 0),this.overlay.style.opacity="1",setTimeout(()=>this.overlay.classList.add("overlay-move-transition"),0),this._currentDropOperation=l}doUpdateOverlayBorder(t){this.overlay.style.borderTopWidth=t===0?"2px":"0px",this.overlay.style.borderLeftWidth=t===2?"2px":"0px",this.overlay.style.borderBottomWidth=t===1?"2px":"0px",this.overlay.style.borderRightWidth=t===3?"2px":"0px"}doPositionOverlay(t){this.container.style.height="100%",this.overlay.style.top=t.top||"",this.overlay.style.left=t.left||"",this.overlay.style.bottom=t.bottom||"",this.overlay.style.right=t.right||"",this.overlay.style.width=t.width,this.overlay.style.height=t.height}contains(t){return t===this.container||t===this.overlay}dispose(){super.dispose(),this._disposed=!0}},af=class extends rd{constructor(e,t,n,i,r){let s=i.createScoped(e);s.createKey("viewContainer",t.id);let a=s.createKey("viewContainerLocation",ci(n.getViewContainerLocation(t)));super(be.ViewContainerTitle,be.ViewContainerTitleContext,{shouldForwardArgs:!0,renderShortTitle:!0},s,r),this._register(s),this._register(G.filter(n.onDidChangeContainerLocation,l=>l.viewContainer===t)(()=>a.set(ci(n.getViewContainerLocation(t)))))}};af=k([I(2,zi),I(3,st),I(4,_a)],af);var Jp=class extends Na{constructor(t,n,i,r,s,a,l,d,u,p,h,m){super(t,u,p);this.options=n;this.instantiationService=i;this.configurationService=r;this.layoutService=s;this.contextMenuService=a;this.telemetryService=l;this.extensionService=d;this.storageService=p;this.contextService=h;this.viewDescriptorService=m;let g=this.viewDescriptorService.getViewContainerById(t);if(!g)throw new Error("Could not find container");this.viewContainer=g,this.visibleViewsStorageId=`${t}.numberOfVisibleViews`,this.visibleViewsCountFromCache=this.storageService.getNumber(this.visibleViewsStorageId,1,void 0),this.viewContainerModel=this.viewDescriptorService.getViewContainerModel(g)}viewContainer;lastFocusedPane;lastMergedCollapsedPane;paneItems=[];paneview;visible=!1;areExtensionsReady=!1;didLayout=!1;dimension;_boundarySashes;visibleViewsCountFromCache;visibleViewsStorageId;viewContainerModel;_onTitleAreaUpdate=this._register(new x);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;_onDidAddViews=this._register(new x);onDidAddViews=this._onDidAddViews.event;_onDidRemoveViews=this._register(new x);onDidRemoveViews=this._onDidRemoveViews.event;_onDidChangeViewVisibility=this._register(new x);onDidChangeViewVisibility=this._onDidChangeViewVisibility.event;_onDidFocusView=this._register(new x);onDidFocusView=this._onDidFocusView.event;_onDidBlurView=this._register(new x);onDidBlurView=this._onDidBlurView.event;get onDidSashChange(){return lt(this.paneview).onDidSashChange}get panes(){return this.paneItems.map(t=>t.pane)}get views(){return this.panes}get length(){return this.paneItems.length}_menuActions;get menuActions(){return this._menuActions}create(t){let n=this.options;n.orientation=this.orientation,this.paneview=this._register(new vS(t,this.options)),this._boundarySashes&&this.paneview.setBoundarySashes(this._boundarySashes),this._register(this.paneview.onDidDrop(({from:d,to:u})=>this.movePane(d,u))),this._register(this.paneview.onDidScroll(d=>this.onDidScrollPane())),this._register(this.paneview.onDidSashReset(d=>this.onDidSashReset(d))),this._register(W(t,ee.CONTEXT_MENU,d=>this.showContextMenu(new Tn(Re(t),d)))),this._register(tn.addTarget(t)),this._register(W(t,Ct.Contextmenu,d=>this.showContextMenu(new Tn(Re(t),d)))),this._menuActions=this._register(this.instantiationService.createInstance(af,this.paneview.element,this.viewContainer)),this._register(this._menuActions.onDidChange(()=>this.updateTitleArea()));let i,r=()=>{let d=t.getBoundingClientRect(),u=this.panes[this.panes.length-1].element.getBoundingClientRect(),p=this.orientation===0?u.bottom:d.top,h=this.orientation===1?u.right:d.left;return{top:p,bottom:d.bottom,left:h,right:d.right}},s=(d,u)=>u.x>=d.left&&u.x<=d.right&&u.y>=d.top&&u.y<=d.bottom,a;this._register(Kp.INSTANCE.registerTarget(t,{onDragEnter:d=>{if(a=r(),i&&i.disposed&&(i=void 0),!i&&s(a,d.eventData)){let u=d.dragAndDropData.getData();if(u.type==="view"){let p=this.viewDescriptorService.getViewContainerByViewId(u.id),h=this.viewDescriptorService.getViewDescriptorById(u.id);if(p!==this.viewContainer&&(!h||!h.canMoveView||this.viewContainer.rejectAddedViews))return;i=new eh(t,void 0,a,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService)}if(u.type==="composite"&&u.id!==this.viewContainer.id){let p=this.viewDescriptorService.getViewContainerById(u.id),h=this.viewDescriptorService.getViewContainerModel(p).allViewDescriptors;!h.some(m=>!m.canMoveView)&&h.length>0&&(i=new eh(t,void 0,a,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService))}}},onDragOver:d=>{i&&i.disposed&&(i=void 0),i&&!s(a,d.eventData)&&(i.dispose(),i=void 0),s(a,d.eventData)&&iD(d.eventData.dataTransfer,"move",i!==void 0)},onDragLeave:d=>{i?.dispose(),i=void 0},onDrop:d=>{if(i){let u=d.dragAndDropData.getData(),p=[];if(u.type==="composite"&&u.id!==this.viewContainer.id){let m=this.viewDescriptorService.getViewContainerById(u.id),g=this.viewDescriptorService.getViewContainerModel(m).allViewDescriptors;g.some(f=>!f.canMoveView)||p.push(...g)}else if(u.type==="view"){let m=this.viewDescriptorService.getViewContainerByViewId(u.id),g=this.viewDescriptorService.getViewDescriptorById(u.id);m!==this.viewContainer&&g&&g.canMoveView&&this.viewDescriptorService.moveViewsToContainer([g],this.viewContainer,void 0,"dnd")}let h=this.panes.length;if(p.length>0&&this.viewDescriptorService.moveViewsToContainer(p,this.viewContainer,void 0,"dnd"),h>0)for(let m of p){let g=this.panes.find(f=>f.id===m.id);g&&this.movePane(g,this.panes[this.panes.length-1])}}i?.dispose(),i=void 0}})),this._register(this.onDidSashChange(()=>this.saveViewSizes())),this._register(this.viewContainerModel.onDidAddVisibleViewDescriptors(d=>this.onDidAddViewDescriptors(d))),this._register(this.viewContainerModel.onDidRemoveVisibleViewDescriptors(d=>this.onDidRemoveViewDescriptors(d)));let l=this.viewContainerModel.visibleViewDescriptors.map((d,u)=>{let p=this.viewContainerModel.getSize(d.id),h=this.viewContainerModel.isCollapsed(d.id);return{viewDescriptor:d,index:u,size:p,collapsed:h}});l.length&&this.onDidAddViewDescriptors(l),this.extensionService.whenInstalledExtensionsRegistered().then(()=>{this.areExtensionsReady=!0,this.panes.length&&(this.updateTitleArea(),this.updateViewHeaders()),this._register(this.configurationService.onDidChangeConfiguration(d=>{d.affectsConfiguration("workbench.activityBar.location")&&this.updateViewHeaders()}))}),this._register(this.viewContainerModel.onDidChangeActiveViewDescriptors(()=>this._onTitleAreaUpdate.fire()))}getTitle(){let t=this.viewContainerModel.title;if(this.isViewMergedWithContainer()){let n=this.paneItems[0].pane.singleViewPaneContainerTitle;if(n)return n;let i=this.paneItems[0].pane.title;return t===i?i:i?`${t}: ${i}`:t}return t}showContextMenu(t){for(let n of this.paneItems)if(ho(t.target,n.pane.element))return;t.stopPropagation(),t.preventDefault(),this.contextMenuService.showContextMenu({getAnchor:()=>t,getActions:()=>this.menuActions?.getContextMenuActions()??[]})}getActionsContext(){if(this.isViewMergedWithContainer())return this.panes[0].getActionsContext()}getActionViewItem(t,n){return this.isViewMergedWithContainer()?this.paneItems[0].pane.getActionViewItem(t,n):yS(this.instantiationService,t,n)}focus(){let t;if(this.lastFocusedPane)t=this.lastFocusedPane;else if(this.paneItems.length>0){for(let{pane:n}of this.paneItems)if(n.isExpanded()){t=n;break}}t&&t.focus()}get orientation(){switch(this.viewDescriptorService.getViewContainerLocation(this.viewContainer)){case 0:case 2:return 0;case 1:return YI(this.layoutService.getPanelPosition())?1:0}return 0}layout(t){this.paneview&&(this.paneview.orientation!==this.orientation&&this.paneview.flipOrientation(t.height,t.width),this.paneview.layout(t.height,t.width)),this.dimension=t,this.didLayout?this.saveViewSizes():(this.didLayout=!0,this.restoreViewSizes())}setBoundarySashes(t){this._boundarySashes=t,this.paneview?.setBoundarySashes(t)}getOptimalWidth(){return Math.max(...this.panes.map(i=>i.getOptimalWidth()||0))+16}addPanes(t){let n=this.isViewMergedWithContainer();for(let{pane:i,size:r,index:s,disposable:a}of t)this.addPane(i,r,a,s);this.updateViewHeaders(),this.isViewMergedWithContainer()!==n&&this.updateTitleArea(),this._onDidAddViews.fire(t.map(({pane:i})=>i))}setVisible(t){this.visible!==!!t&&(this.visible=t,this._onDidChangeVisibility.fire(t)),this.panes.filter(n=>n.isVisible()!==t).map(n=>n.setVisible(t))}isVisible(){return this.visible}updateTitleArea(){this._onTitleAreaUpdate.fire()}createView(t,n){return this.instantiationService.createInstance(t.ctorDescriptor.ctor,...t.ctorDescriptor.staticArguments||[],n)}getView(t){return this.panes.filter(n=>n.id===t)[0]}saveViewSizes(){this.didLayout&&this.viewContainerModel.setSizes(this.panes.map(t=>({id:t.id,size:this.getPaneSize(t)})))}restoreViewSizes(){if(this.didLayout){let t;for(let n=0;n<this.viewContainerModel.visibleViewDescriptors.length;n++){let i=this.panes[n],r=this.viewContainerModel.visibleViewDescriptors[n],s=this.viewContainerModel.getSize(r.id);typeof s=="number"?this.resizePane(i,s):(t=t||this.computeInitialSizes(),this.resizePane(i,t.get(i.id)||200))}}}computeInitialSizes(){let t=new Map;if(this.dimension){let n=this.viewContainerModel.visibleViewDescriptors.reduce((i,{weight:r})=>i+(r||20),0);for(let i of this.viewContainerModel.visibleViewDescriptors)this.orientation===0?t.set(i.id,this.dimension.height*(i.weight||20)/n):t.set(i.id,this.dimension.width*(i.weight||20)/n)}return t}saveState(){this.panes.forEach(t=>t.saveState()),this.storageService.store(this.visibleViewsStorageId,this.length,1,1)}onContextMenu(t,n){t.stopPropagation(),t.preventDefault();let i=n.menuActions.getContextMenuActions();this.contextMenuService.showContextMenu({getAnchor:()=>t,getActions:()=>i})}openView(t,n){let i=this.getView(t);return i||this.toggleViewVisibility(t),i=this.getView(t),i&&(i.setExpanded(!0),n&&i.focus()),i}onDidAddViewDescriptors(t){let n=[];for(let{viewDescriptor:r,collapsed:s,index:a,size:l}of t){let d=this.createView(r,{id:r.id,title:r.name.value,fromExtensionId:r.extensionId,expanded:!s,singleViewPaneContainerTitle:r.singleViewPaneContainerTitle});d.render();let u=W(d.draggableElement,"contextmenu",h=>{h.stopPropagation(),h.preventDefault(),this.onContextMenu(new Tn(Re(d.draggableElement),h),d)}),p=G.latch(G.map(d.onDidChange,()=>!d.isExpanded()))(h=>{this.viewContainerModel.setCollapsed(r.id,h)});n.push({pane:d,size:l||d.minimumSize,index:a,disposable:_i(u,p)})}this.addPanes(n),this.restoreViewSizes();let i=[];for(let{pane:r}of n)r.setVisible(this.isVisible()),i.push(r);return i}onDidRemoveViewDescriptors(t){t=t.sort((i,r)=>r.index-i.index);let n=[];for(let{index:i}of t)this.paneItems[i]&&n.push(this.paneItems[i].pane);if(n.length){this.removePanes(n);for(let i of n)i.setVisible(!1)}}toggleViewVisibility(t){if(this.viewContainerModel.activeViewDescriptors.some(n=>n.id===t)){let n=!this.viewContainerModel.isVisible(t);this.viewContainerModel.setVisible(t,n)}}addPane(t,n,i,r=this.paneItems.length-1){let s=t.onDidFocus(()=>{this._onDidFocusView.fire(t),this.lastFocusedPane=t}),a=t.onDidBlur(()=>this._onDidBlurView.fire(t)),l=t.onDidChangeTitleArea(()=>{this.isViewMergedWithContainer()&&this.updateTitleArea()}),d=t.onDidChangeBodyVisibility(()=>this._onDidChangeViewVisibility.fire(t)),u=t.onDidChange(()=>{t===this.lastFocusedPane&&!t.isExpanded()&&(this.lastFocusedPane=void 0)}),p=this.viewDescriptorService.getViewContainerLocation(this.viewContainer)===1;t.style({headerForeground:J(p?nN:yN),headerBackground:J(p?tN:vN),headerBorder:J(p?iN:$1),dropBackground:J(p?K1:q1),leftBorder:p?J(oN):void 0});let h=new Y;h.add(i),h.add(_i(t,s,a,l,u,d));let m={pane:t,disposable:h};this.paneItems.splice(r,0,m),lt(this.paneview).addPane(t,n,r);let g;h.add(Kp.INSTANCE.registerDraggable(t.draggableElement,()=>({type:"view",id:t.id}),{})),h.add(Kp.INSTANCE.registerTarget(t.dropTargetElement,{onDragEnter:f=>{if(!g){let y=f.dragAndDropData.getData();if(y.type==="view"&&y.id!==t.id){let C=this.viewDescriptorService.getViewContainerByViewId(y.id),w=this.viewDescriptorService.getViewDescriptorById(y.id);if(C!==this.viewContainer&&(!w||!w.canMoveView||this.viewContainer.rejectAddedViews))return;g=new eh(t.dropTargetElement,this.orientation??0,void 0,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService)}if(y.type==="composite"&&y.id!==this.viewContainer.id&&!this.viewContainer.rejectAddedViews){let C=this.viewDescriptorService.getViewContainerById(y.id),w=this.viewDescriptorService.getViewContainerModel(C).allViewDescriptors;!w.some(R=>!R.canMoveView)&&w.length>0&&(g=new eh(t.dropTargetElement,this.orientation??0,void 0,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService))}}},onDragOver:f=>{iD(f.eventData.dataTransfer,"move",g!==void 0)},onDragLeave:f=>{g?.dispose(),g=void 0},onDrop:f=>{if(g){let y=f.dragAndDropData.getData(),C=[],w;if(y.type==="composite"&&y.id!==this.viewContainer.id&&!this.viewContainer.rejectAddedViews){let R=this.viewDescriptorService.getViewContainerById(y.id),_=this.viewDescriptorService.getViewContainerModel(R).allViewDescriptors;_.length>0&&!_.some(B=>!B.canMoveView)&&(C.push(..._),w=_[0])}else if(y.type==="view"){let R=this.viewDescriptorService.getViewContainerByViewId(y.id),_=this.viewDescriptorService.getViewDescriptorById(y.id);R!==this.viewContainer&&_&&_.canMoveView&&!this.viewContainer.rejectAddedViews&&C.push(_),_&&(w=_)}if(C&&this.viewDescriptorService.moveViewsToContainer(C,this.viewContainer,void 0,"dnd"),w){if(g.currentDropOperation===1||g.currentDropOperation===3){let R=this.panes.findIndex(B=>B.id===w.id),_=this.panes.findIndex(B=>B.id===t.id);R>=0&&_>=0&&(R>_&&_++,_<this.panes.length&&_!==R&&this.movePane(this.panes[R],this.panes[_]))}if(g.currentDropOperation===0||g.currentDropOperation===2){let R=this.panes.findIndex(B=>B.id===w.id),_=this.panes.findIndex(B=>B.id===t.id);R>=0&&_>=0&&(R<_&&_--,_>=0&&_!==R&&this.movePane(this.panes[R],this.panes[_]))}C.length>1&&C.slice(1).forEach(R=>{let _=this.panes.findIndex(K=>K.id===w.id),B=this.panes.findIndex(K=>K.id===R.id);B>=0&&_>=0&&(B>_&&_++,_<this.panes.length&&_!==B&&(this.movePane(this.panes[B],this.panes[_]),w=R))})}}g?.dispose(),g=void 0}}))}removePanes(t){let n=this.isViewMergedWithContainer();t.forEach(i=>this.removePane(i)),this.updateViewHeaders(),n!==this.isViewMergedWithContainer()&&this.updateTitleArea(),this._onDidRemoveViews.fire(t)}removePane(t){let n=this.paneItems.findIndex(r=>r.pane===t);if(n===-1)return;this.lastFocusedPane===t&&(this.lastFocusedPane=void 0),lt(this.paneview).removePane(t);let[i]=this.paneItems.splice(n,1);i.disposable.dispose()}movePane(t,n){let i=this.paneItems.findIndex(d=>d.pane===t),r=this.paneItems.findIndex(d=>d.pane===n),s=this.viewContainerModel.visibleViewDescriptors[i],a=this.viewContainerModel.visibleViewDescriptors[r];if(i<0||i>=this.paneItems.length||r<0||r>=this.paneItems.length)return;let[l]=this.paneItems.splice(i,1);this.paneItems.splice(r,0,l),lt(this.paneview).movePane(t,n),this.viewContainerModel.move(s.id,a.id),this.updateTitleArea()}resizePane(t,n){lt(this.paneview).resizePane(t,n)}getPaneSize(t){return lt(this.paneview).getPaneSize(t)}updateViewHeaders(){this.isViewMergedWithContainer()?(this.paneItems[0].pane.isExpanded()?this.lastMergedCollapsedPane=void 0:(this.lastMergedCollapsedPane=this.paneItems[0].pane,this.paneItems[0].pane.setExpanded(!0)),this.paneItems[0].pane.headerVisible=!1,this.paneItems[0].pane.collapsible=!0):(this.paneItems.length===1?(this.paneItems[0].pane.headerVisible=!0,this.paneItems[0].pane===this.lastMergedCollapsedPane&&this.paneItems[0].pane.setExpanded(!1),this.paneItems[0].pane.collapsible=!1):this.paneItems.forEach(t=>{t.pane.headerVisible=!0,t.pane.collapsible=!0,t.pane===this.lastMergedCollapsedPane&&t.pane.setExpanded(!1)}),this.lastMergedCollapsedPane=void 0)}isViewMergedWithContainer(){return this.options.mergeViewWithContainerWhenSingleView&&this.paneItems.length===1?this.areExtensionsReady?!0:this.visibleViewsCountFromCache===void 0?this.paneItems[0].pane.isExpanded():this.visibleViewsCountFromCache===1:!1}onDidScrollPane(){for(let t of this.panes)t.onDidScrollRoot()}onDidSashReset(t){let n,i;for(let r=t;r>=0;r--)if(this.paneItems[r].pane?.isVisible()&&this.paneItems[r]?.pane.isExpanded()){n=this.paneItems[r].pane;break}for(let r=t+1;r<this.paneItems.length;r++)if(this.paneItems[r].pane?.isVisible()&&this.paneItems[r]?.pane.isExpanded()){i=this.paneItems[r].pane;break}if(n&&i){let r=this.getPaneSize(n),s=this.getPaneSize(i),a=Math.ceil((r+s)/2),l=Math.floor((r+s)/2);r>s?(this.resizePane(n,a),this.resizePane(i,l)):(this.resizePane(i,l),this.resizePane(n,a))}}dispose(){super.dispose(),this.paneItems.forEach(t=>t.disposable.dispose()),this.paneview&&this.paneview.dispose()}};Jp=k([I(2,Ze),I(3,He),I(4,ct),I(5,Xn),I(6,$t),I(7,Zp),I(8,en),I(9,Mt),I(10,bn),I(11,zi)],Jp);var th=class extends et{constructor(t,n){super(t);this.offset=n}async run(t){let n=t.get(zi),i=t.get(st),r=Ir.getValue(i);if(r===void 0)return;let s=n.getViewContainerByViewId(r),a=n.getViewContainerModel(s),l=a.visibleViewDescriptors.find(p=>p.id===r),d=a.visibleViewDescriptors.indexOf(l);if(d+this.offset<0||d+this.offset>=a.visibleViewDescriptors.length)return;let u=a.visibleViewDescriptors[d+this.offset];a.move(l.id,u.id)}};ze(class extends th{constructor(){super({id:"views.moveViewUp",title:c("viewMoveUp","Move View Up"),keybinding:{primary:rr(2089,16),weight:201,when:Ir.notEqualsTo("")}},-1)}});ze(class extends th{constructor(){super({id:"views.moveViewLeft",title:c("viewMoveLeft","Move View Left"),keybinding:{primary:rr(2089,15),weight:201,when:Ir.notEqualsTo("")}},-1)}});ze(class extends th{constructor(){super({id:"views.moveViewDown",title:c("viewMoveDown","Move View Down"),keybinding:{primary:rr(2089,18),weight:201,when:Ir.notEqualsTo("")}},1)}});ze(class extends th{constructor(){super({id:"views.moveViewRight",title:c("viewMoveRight","Move View Right"),keybinding:{primary:rr(2089,17),weight:201,when:Ir.notEqualsTo("")}},1)}});ze(class extends et{constructor(){super({id:"vscode.moveViews",title:c("viewsMove","Move Views")})}async run(e,t){if(!Array.isArray(t?.viewIds)||typeof t?.destinationId!="string")return Promise.reject("Invalid arguments");let n=e.get(zi),i=n.getViewContainerById(t.destinationId);if(i){for(let r of t.viewIds){let s=n.getViewDescriptorById(r);s?.canMoveView&&n.moveViewsToContainer([s],i,0,this.desc.id)}await e.get(id).openViewContainer(i.id,!0)}}});var qS=class extends Bp{constructor(t,n,i,r,s,a,l,d){super(t,n,s,i);this.storageService=i;this.instantiationService=r;this.contextMenuService=a;this.extensionService=l;this.contextService=d}viewPaneContainer;create(t){super.create(t),this.viewPaneContainer=this._register(this.createViewPaneContainer(t)),this._register(this.viewPaneContainer.onTitleAreaUpdate(()=>this.updateTitleArea())),this.viewPaneContainer.create(t)}setVisible(t){super.setVisible(t),this.viewPaneContainer?.setVisible(t)}layout(t){this.viewPaneContainer?.layout(t)}setBoundarySashes(t){this.viewPaneContainer?.setBoundarySashes(t)}getOptimalWidth(){return this.viewPaneContainer?.getOptimalWidth()??0}openView(t,n){return this.viewPaneContainer?.openView(t,n)}getViewPaneContainer(){return this.viewPaneContainer}getActionsContext(){return this.getViewPaneContainer()?.getActionsContext()}getContextMenuActions(){return this.viewPaneContainer?.menuActions?.getContextMenuActions()??[]}getMenuIds(){let t=[];return this.viewPaneContainer?.menuActions&&(t.push(this.viewPaneContainer.menuActions.menuId),this.viewPaneContainer.isViewMergedWithContainer()&&t.push(this.viewPaneContainer.panes[0].menuActions.menuId)),t}getActions(){let t=[];if(this.viewPaneContainer?.menuActions&&(t.push(...this.viewPaneContainer.menuActions.getPrimaryActions()),this.viewPaneContainer.isViewMergedWithContainer())){let n=this.viewPaneContainer.panes[0];n.shouldShowFilterInHeader()&&t.push(VS),t.push(...n.menuActions.getPrimaryActions())}return t}getSecondaryActions(){if(!this.viewPaneContainer?.menuActions)return[];let t=this.viewPaneContainer.isViewMergedWithContainer()?this.viewPaneContainer.panes[0].menuActions.getSecondaryActions():[],n=this.viewPaneContainer.menuActions.getSecondaryActions(),i=n.findIndex(r=>r instanceof Ti&&r.item.submenu===ID);if(i!==-1){let r=n[i];r.actions.some(({enabled:s})=>s)?n.length===1&&t.length===0?n=r.actions.slice():i!==0&&(n=[r,...n.slice(0,i),...n.slice(i+1)]):n.splice(i,1)}return n.length&&t.length?[...n,new cn,...t]:n.length?n:t}getActionViewItem(t,n){return this.viewPaneContainer?.getActionViewItem(t,n)}getTitle(){return this.viewPaneContainer?.getTitle()??""}focus(){super.focus(),this.viewPaneContainer?.focus()}};qS=k([I(1,$t),I(2,Mt),I(3,Ze),I(4,en),I(5,Xn),I(6,Zp),I(7,bn)],qS);var SD={Viewlets:"workbench.contributions.viewlets",Panels:"workbench.contributions.panels",Auxiliary:"workbench.contributions.auxiliary"},lf=class extends KI{registerPaneComposite(e){super.registerComposite(e)}deregisterPaneComposite(e){super.deregisterComposite(e)}getPaneComposite(e){return this.getComposite(e)}getPaneComposites(){return this.getComposites()}};Be.add(SD.Viewlets,new lf);Be.add(SD.Panels,new lf);Be.add(SD.Auxiliary,new lf);var dd=H("paneCompositePartService");var bz=Dt("auxiliarybar-right-layout-icon",Q.layoutSidebarRight,c("toggleAuxiliaryIconRight","Icon to toggle the auxiliary bar off in its right position.")),vz=Dt("auxiliarybar-right-off-layout-icon",Q.layoutSidebarRightOff,c("toggleAuxiliaryIconRightOn","Icon to toggle the auxiliary bar on in its right position.")),yz=Dt("auxiliarybar-left-layout-icon",Q.layoutSidebarLeft,c("toggleAuxiliaryIconLeft","Icon to toggle the auxiliary bar in its left position.")),Iz=Dt("auxiliarybar-left-off-layout-icon",Q.layoutSidebarLeftOff,c("toggleAuxiliaryIconLeftOn","Icon to toggle the auxiliary bar on in its left position.")),cd=class o extends et{static ID="workbench.action.toggleAuxiliaryBar";static LABEL=ue("toggleAuxiliaryBar","Toggle Secondary Side Bar Visibility");constructor(){super({id:o.ID,title:o.LABEL,toggled:{condition:Ga,title:c("secondary sidebar","Secondary Side Bar"),mnemonicTitle:c({key:"secondary sidebar mnemonic",comment:["&& denotes a mnemonic"]},"Secondary Si&&de Bar")},category:Et.View,f1:!0,keybinding:{weight:200,primary:2592},menu:[{id:be.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:1},{id:be.MenubarAppearanceMenu,group:"2_workbench_layout",order:2}]})}async run(e){let t=e.get(ct);t.setPartHidden(t.isVisible("workbench.parts.auxiliarybar"),"workbench.parts.auxiliarybar")}};ze(cd);ze(class xD extends et{static ID="workbench.action.focusAuxiliaryBar";static LABEL=ue("focusAuxiliaryBar","Focus into Secondary Side Bar");constructor(){super({id:xD.ID,title:xD.LABEL,category:Et.View,f1:!0})}async run(e){let t=e.get(dd),n=e.get(ct);n.isVisible("workbench.parts.auxiliarybar")||n.setPartHidden(!1,"workbench.parts.auxiliarybar"),t.getActivePaneComposite(2)?.focus()}});Ft.appendMenuItems([{id:be.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:cd.ID,title:c("toggleSecondarySideBar","Toggle Secondary Side Bar"),toggled:{condition:Ga,icon:yz},icon:Iz},when:$.and($.or($.equals("config.workbench.layoutControl.type","toggles"),$.equals("config.workbench.layoutControl.type","both")),$.equals("config.workbench.sideBar.location","right")),order:0}},{id:be.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:cd.ID,title:c("toggleSecondarySideBar","Toggle Secondary Side Bar"),toggled:{condition:Ga,icon:bz},icon:vz},when:$.and($.or($.equals("config.workbench.layoutControl.type","toggles"),$.equals("config.workbench.layoutControl.type","both")),$.equals("config.workbench.sideBar.location","left")),order:2}},{id:be.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:cd.ID,title:ue("hideAuxiliaryBar","Hide Secondary Side Bar")},when:$.and(Ga,$.equals("viewLocation",ci(2))),order:2}}]);var xz=Dt("panel-maximize",Q.chevronUp,c("maximizeIcon","Icon to maximize a panel.")),Ez=Dt("panel-restore",Q.chevronDown,c("restoreIcon","Icon to restore a panel.")),qN=Dt("panel-close",Q.close,c("closeIcon","Icon to close a panel.")),Cz=Dt("panel-layout-icon",Q.layoutPanel,c("togglePanelOffIcon","Icon to toggle the panel off when it is on.")),wz=Dt("panel-layout-icon-off",Q.layoutPanelOff,c("togglePanelOnIcon","Icon to toggle the panel on when it is off.")),Pc=class o extends et{static ID="workbench.action.togglePanel";static LABEL=ue("togglePanelVisibility","Toggle Panel Visibility");constructor(){super({id:o.ID,title:o.LABEL,toggled:{condition:Oc,title:c("toggle panel","Panel"),mnemonicTitle:c({key:"toggle panel mnemonic",comment:["&& denotes a mnemonic"]},"&&Panel")},f1:!0,category:Et.View,keybinding:{primary:2088,weight:200},menu:[{id:be.MenubarAppearanceMenu,group:"2_workbench_layout",order:5},{id:be.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:4}]})}async run(e){let t=e.get(ct);t.setPartHidden(t.isVisible("workbench.parts.panel"),"workbench.parts.panel")}};ze(Pc);ze(class extends et{static ID="workbench.action.focusPanel";static LABEL=c("focusPanel","Focus into Panel");constructor(){super({id:"workbench.action.focusPanel",title:ue("focusPanel","Focus into Panel"),category:Et.View,f1:!0})}async run(o){let e=o.get(ct),t=o.get(dd);e.isVisible("workbench.parts.panel")||e.setPartHidden(!1,"workbench.parts.panel"),t.getActivePaneComposite(1)?.focus()}});var jS={LEFT:"workbench.action.positionPanelLeft",RIGHT:"workbench.action.positionPanelRight",BOTTOM:"workbench.action.positionPanelBottom",TOP:"workbench.action.positionPanelTop"},YS={LEFT:"workbench.action.alignPanelLeft",RIGHT:"workbench.action.alignPanelRight",CENTER:"workbench.action.alignPanelCenter",JUSTIFY:"workbench.action.alignPanelJustify"};function $N(o,e,t,n,i){return{id:o,title:e,shortLabel:t,value:n,when:i}}function QS(o,e,t,n){return $N(o,e,t,n,ld.notEqualsTo(Xl(n)))}function XS(o,e,t,n){return $N(o,e,t,n,ea.notEqualsTo(n))}var Tz=[QS(jS.TOP,ue("positionPanelTop","Move Panel To Top"),c("positionPanelTopShort","Top"),3),QS(jS.LEFT,ue("positionPanelLeft","Move Panel Left"),c("positionPanelLeftShort","Left"),0),QS(jS.RIGHT,ue("positionPanelRight","Move Panel Right"),c("positionPanelRightShort","Right"),1),QS(jS.BOTTOM,ue("positionPanelBottom","Move Panel To Bottom"),c("positionPanelBottomShort","Bottom"),2)],kz=[XS(YS.LEFT,ue("alignPanelLeft","Set Panel Alignment to Left"),c("alignPanelLeftShort","Left"),"left"),XS(YS.RIGHT,ue("alignPanelRight","Set Panel Alignment to Right"),c("alignPanelRightShort","Right"),"right"),XS(YS.CENTER,ue("alignPanelCenter","Set Panel Alignment to Center"),c("alignPanelCenterShort","Center"),"center"),XS(YS.JUSTIFY,ue("alignPanelJustify","Set Panel Alignment to Justify"),c("alignPanelJustifyShort","Justify"),"justify")];Ft.appendMenuItem(be.MenubarAppearanceMenu,{submenu:be.PanelPositionMenu,title:c("positionPanel","Panel Position"),group:"3_workbench_layout_move",order:4});Tz.forEach((o,e)=>{let{id:t,title:n,shortLabel:i,value:r,when:s}=o;ze(class extends et{constructor(){super({id:t,title:n,category:Et.View,f1:!0})}run(a){a.get(ct).setPanelPosition(r===void 0?2:r)}}),Ft.appendMenuItem(be.PanelPositionMenu,{command:{id:t,title:i,toggled:s.negate()},order:5+e})});Ft.appendMenuItem(be.MenubarAppearanceMenu,{submenu:be.PanelAlignmentMenu,title:c("alignPanel","Align Panel"),group:"3_workbench_layout_move",order:5});kz.forEach(o=>{let{id:e,title:t,shortLabel:n,value:i,when:r}=o;ze(class extends et{constructor(){super({id:e,title:t,category:Et.View,toggled:r.negate(),f1:!0})}run(s){s.get(ct).setPanelAlignment(i===void 0?"center":i)}}),Ft.appendMenuItem(be.PanelAlignmentMenu,{command:{id:e,title:n,toggled:r.negate()},order:5})});var ZS=class extends et{constructor(e,t){super({id:e,title:t,category:Et.View,f1:!0})}async run(e,t){let n=e.get(dd),i=n.getVisiblePaneCompositeIds(1),r=n.getActivePaneComposite(1);if(!r)return;let s;for(let a=0;a<i.length;a++)if(i[a]===r.getId()){s=i[(a+i.length+t)%i.length];break}typeof s=="string"&&await n.openPaneComposite(s,1,!0)}};ze(class extends ZS{constructor(){super("workbench.action.previousPanelView",ue("previousPanelView","Previous Panel View"))}run(o){return super.run(o,-1)}});ze(class extends ZS{constructor(){super("workbench.action.nextPanelView",ue("nextPanelView","Next Panel View"))}run(o){return super.run(o,1)}});ze(class extends et{constructor(){super({id:"workbench.action.toggleMaximizedPanel",title:ue("toggleMaximizedPanel","Toggle Maximized Panel"),tooltip:c("maximizePanel","Maximize Panel Size"),category:Et.View,f1:!0,icon:xz,precondition:$.or(ea.isEqualTo("center"),$.and(ld.notEqualsTo("bottom"),ld.notEqualsTo("top"))),toggled:{condition:KN,icon:Ez,tooltip:c("minimizePanel","Restore Panel Size")},menu:[{id:be.PanelTitle,group:"navigation",order:1,when:$.or(ea.isEqualTo("center"),$.and(ld.notEqualsTo("bottom"),ld.notEqualsTo("top")))}]})}run(o){let e=o.get(ct),t=o.get(La);if(e.getPanelAlignment()!=="center"&&YI(e.getPanelPosition())){t.warn(c("panelMaxNotSupported","Maximizing the panel is only supported when it is center aligned."));return}e.isVisible("workbench.parts.panel")?e.toggleMaximizedPanel():(e.setPartHidden(!1,"workbench.parts.panel"),e.isPanelMaximized()||e.toggleMaximizedPanel())}});ze(class extends et{constructor(){super({id:"workbench.action.closePanel",title:ue("closePanel","Hide Panel"),category:Et.View,icon:qN,menu:[{id:be.CommandPalette,when:Oc},{id:be.PanelTitle,group:"navigation",order:2}]})}run(o){o.get(ct).setPartHidden(!0,"workbench.parts.panel")}});ze(class extends et{constructor(){super({id:"workbench.action.closeAuxiliaryBar",title:ue("closeSecondarySideBar","Hide Secondary Side Bar"),category:Et.View,icon:qN,menu:[{id:be.CommandPalette,when:Ga},{id:be.AuxiliaryBarTitle,group:"navigation",order:2,when:$.notEquals("config.workbench.activityBar.location","top")}]})}run(o){o.get(ct).setPartHidden(!0,"workbench.parts.auxiliarybar")}});Ft.appendMenuItems([{id:be.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:Pc.ID,title:c("togglePanel","Toggle Panel"),icon:wz,toggled:{condition:Oc,icon:Cz}},when:$.or($.equals("config.workbench.layoutControl.type","toggles"),$.equals("config.workbench.layoutControl.type","both")),order:1}},{id:be.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Pc.ID,title:ue("hidePanel","Hide Panel")},when:$.and(Oc,$.equals("viewLocation",ci(1))),order:2}}]);var nh=class extends et{constructor(t,n,i){super(i);this.source=t;this.destination=n}run(t,...n){let i=t.get(zi),r=t.get(ct),s=t.get(id),a=i.getViewContainersByLocation(this.source),l=i.getViewContainersByLocation(this.destination);if(a.length){let d=s.getVisibleViewContainer(this.source);a.forEach(u=>i.moveViewContainerToLocation(u,this.destination,void 0,this.desc.id)),r.setPartHidden(!1,this.destination===1?"workbench.parts.panel":"workbench.parts.auxiliarybar"),d&&l.length===0&&s.openViewContainer(d.id,!0)}}},ED=class o extends nh{static ID="workbench.action.movePanelToSidePanel";constructor(){super(1,2,{id:o.ID,title:ue("movePanelToSecondarySideBar","Move Panel Views To Secondary Side Bar"),category:Et.View,f1:!1})}},CD=class o extends nh{static ID="workbench.action.movePanelToSecondarySideBar";constructor(){super(1,2,{id:o.ID,title:ue("movePanelToSecondarySideBar","Move Panel Views To Secondary Side Bar"),category:Et.View,f1:!0})}};ze(ED);ze(CD);var wD=class o extends nh{static ID="workbench.action.moveSidePanelToPanel";constructor(){super(2,1,{id:o.ID,title:ue("moveSidePanelToPanel","Move Secondary Side Bar Views To Panel"),category:Et.View,f1:!1})}},TD=class o extends nh{static ID="workbench.action.moveSecondarySideBarToPanel";constructor(){super(2,1,{id:o.ID,title:ue("moveSidePanelToPanel","Move Secondary Side Bar Views To Panel"),category:Et.View,f1:!0})}};ze(wD);ze(TD);var Dz=Dt("menuBar",Q.layoutMenubar,c("menuBarIcon","Represents the menu bar")),_z=Dt("activity-bar-left",Q.layoutActivitybarLeft,c("activityBarLeft","Represents the activity bar in the left position")),Lz=Dt("activity-bar-right",Q.layoutActivitybarRight,c("activityBarRight","Represents the activity bar in the right position")),JS=Dt("panel-left",Q.layoutSidebarLeft,c("panelLeft","Represents a side bar in the left position")),Rz=Dt("panel-left-off",Q.layoutSidebarLeftOff,c("panelLeftOff","Represents a side bar in the left position toggled off")),ex=Dt("panel-right",Q.layoutSidebarRight,c("panelRight","Represents side bar in the right position")),Az=Dt("panel-right-off",Q.layoutSidebarRightOff,c("panelRightOff","Represents side bar in the right position toggled off")),Oz=Dt("panel-bottom",Q.layoutPanel,c("panelBottom","Represents the bottom panel")),Pz=Dt("statusBar",Q.layoutStatusbar,c("statusBarIcon","Represents the status bar")),Mz=Dt("panel-align-left",Q.layoutPanelLeft,c("panelBottomLeft","Represents the bottom panel alignment set to the left")),Nz=Dt("panel-align-right",Q.layoutPanelRight,c("panelBottomRight","Represents the bottom panel alignment set to the right")),Fz=Dt("panel-align-center",Q.layoutPanelCenter,c("panelBottomCenter","Represents the bottom panel alignment set to the center")),Bz=Dt("panel-align-justify",Q.layoutPanelJustify,c("panelBottomJustify","Represents the bottom panel alignment set to justified")),Vz=Dt("fullscreen",Q.screenFull,c("fullScreenIcon","Represents full screen")),Wz=Dt("centerLayoutIcon",Q.layoutCentered,c("centerLayoutIcon","Represents centered layout mode")),Uz=Dt("zenMode",Q.target,c("zenModeIcon","Represents zen mode"));ze(class extends et{constructor(){super({id:"workbench.action.closeSidebar",title:ue("closeSidebar","Close Primary Side Bar"),category:Et.View,f1:!0})}run(o){o.get(ct).setPartHidden(!0,"workbench.parts.sidebar")}});var zz="workbench.action.toggleActivityBarVisibility";ze(class extends et{constructor(){super({id:"workbench.action.toggleCenteredLayout",title:{...ue("toggleCenteredLayout","Toggle Centered Layout"),mnemonicTitle:c({key:"miToggleCenteredLayout",comment:["&& denotes a mnemonic"]},"&&Centered Layout")},precondition:os.toNegated(),category:Et.View,f1:!0,toggled:yD,menu:[{id:be.MenubarAppearanceMenu,group:"1_toggle_view",order:3}]})}run(o){let e=o.get(ct);e.centerMainEditorLayout(!e.isMainEditorLayoutCentered())}});var jN="workbench.sideBar.location",tx=class extends et{constructor(t,n,i){super({id:t,title:n,f1:!1});this.position=i}async run(t){let n=t.get(ct),i=t.get(He);if(n.getSideBarPosition()!==this.position)return i.updateValue(jN,Xl(this.position))}},nx=class o extends tx{static ID="workbench.action.moveSideBarRight";constructor(){super(o.ID,ue("moveSidebarRight","Move Primary Side Bar Right"),1)}},ix=class o extends tx{static ID="workbench.action.moveSideBarLeft";constructor(){super(o.ID,ue("moveSidebarLeft","Move Primary Side Bar Left"),0)}};ze(nx);ze(ix);var rs=class o extends et{static ID="workbench.action.toggleSidebarPosition";static LABEL=c("toggleSidebarPosition","Toggle Primary Side Bar Position");static getLabel(e){return e.getSideBarPosition()===0?c("moveSidebarRight","Move Primary Side Bar Right"):c("moveSidebarLeft","Move Primary Side Bar Left")}constructor(){super({id:o.ID,title:ue("toggleSidebarPosition","Toggle Primary Side Bar Position"),category:Et.View,f1:!0})}run(e){let t=e.get(ct),n=e.get(He),r=t.getSideBarPosition()===0?"right":"left";return n.updateValue(jN,r)}};ze(rs);var YN=Dt("configure-layout-icon",Q.layout,c("cofigureLayoutIcon","Icon represents workbench layout configuration."));Ft.appendMenuItem(be.LayoutControlMenu,{submenu:be.LayoutControlMenuSubmenu,title:c("configureLayout","Configure Layout"),icon:YN,group:"1_workbench_layout",when:$.equals("config.workbench.layoutControl.type","menu")});Ft.appendMenuItems([{id:be.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:rs.ID,title:c("move side bar right","Move Primary Side Bar Right")},when:$.and($.notEquals("config.workbench.sideBar.location","right"),$.equals("viewContainerLocation",ci(0))),order:1}},{id:be.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:rs.ID,title:c("move sidebar right","Move Primary Side Bar Right")},when:$.and($.notEquals("config.workbench.sideBar.location","right"),$.equals("viewLocation",ci(0))),order:1}},{id:be.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:rs.ID,title:c("move sidebar left","Move Primary Side Bar Left")},when:$.and($.equals("config.workbench.sideBar.location","right"),$.equals("viewContainerLocation",ci(0))),order:1}},{id:be.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:rs.ID,title:c("move sidebar left","Move Primary Side Bar Left")},when:$.and($.equals("config.workbench.sideBar.location","right"),$.equals("viewLocation",ci(0))),order:1}},{id:be.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:rs.ID,title:c("move second sidebar left","Move Secondary Side Bar Left")},when:$.and($.notEquals("config.workbench.sideBar.location","right"),$.equals("viewLocation",ci(2))),order:1}},{id:be.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:rs.ID,title:c("move second sidebar right","Move Secondary Side Bar Right")},when:$.and($.equals("config.workbench.sideBar.location","right"),$.equals("viewLocation",ci(2))),order:1}}]);Ft.appendMenuItem(be.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:rs.ID,title:c({key:"miMoveSidebarRight",comment:["&& denotes a mnemonic"]},"&&Move Primary Side Bar Right")},when:$.notEquals("config.workbench.sideBar.location","right"),order:2});Ft.appendMenuItem(be.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:rs.ID,title:c({key:"miMoveSidebarLeft",comment:["&& denotes a mnemonic"]},"&&Move Primary Side Bar Left")},when:$.equals("config.workbench.sideBar.location","right"),order:2});ze(class extends et{constructor(){super({id:"workbench.action.toggleEditorVisibility",title:{...ue("toggleEditor","Toggle Editor Area Visibility"),mnemonicTitle:c({key:"miShowEditorArea",comment:["&& denotes a mnemonic"]},"Show &&Editor Area")},category:Et.View,f1:!0,toggled:zN,precondition:$.and(os.toNegated(),$.or(ea.isEqualTo("center"),ld.notEqualsTo("bottom")))})}run(o){o.get(ct).toggleMaximizedPanel()}});Ft.appendMenuItem(be.MenubarViewMenu,{group:"2_appearance",title:c({key:"miAppearance",comment:["&& denotes a mnemonic"]},"&&Appearance"),submenu:be.MenubarAppearanceMenu,order:1});var ud=class o extends et{static ID="workbench.action.toggleSidebarVisibility";constructor(){super({id:o.ID,title:ue("toggleSidebar","Toggle Primary Side Bar Visibility"),toggled:{condition:Ac,title:c("primary sidebar","Primary Side Bar"),mnemonicTitle:c({key:"primary sidebar mnemonic",comment:["&& denotes a mnemonic"]},"&&Primary Side Bar")},category:Et.View,f1:!0,keybinding:{weight:200,primary:2080},menu:[{id:be.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:0},{id:be.MenubarAppearanceMenu,group:"2_workbench_layout",order:1}]})}run(e){let t=e.get(ct);t.setPartHidden(t.isVisible("workbench.parts.sidebar"),"workbench.parts.sidebar")}};ze(ud);Ft.appendMenuItems([{id:be.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:ud.ID,title:c("compositePart.hideSideBarLabel","Hide Primary Side Bar")},when:$.and(Ac,$.equals("viewContainerLocation",ci(0))),order:2}},{id:be.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:ud.ID,title:c("compositePart.hideSideBarLabel","Hide Primary Side Bar")},when:$.and(Ac,$.equals("viewLocation",ci(0))),order:2}},{id:be.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:ud.ID,title:c("toggleSideBar","Toggle Primary Side Bar"),icon:Rz,toggled:{condition:Ac,icon:JS}},when:$.and($.or($.equals("config.workbench.layoutControl.type","toggles"),$.equals("config.workbench.layoutControl.type","both")),$.equals("config.workbench.sideBar.location","left")),order:0}},{id:be.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:ud.ID,title:c("toggleSideBar","Toggle Primary Side Bar"),icon:Az,toggled:{condition:Ac,icon:ex}},when:$.and($.or($.equals("config.workbench.layoutControl.type","toggles"),$.equals("config.workbench.layoutControl.type","both")),$.equals("config.workbench.sideBar.location","right")),order:2}}]);var Mc=class o extends et{static ID="workbench.action.toggleStatusbarVisibility";static statusbarVisibleKey="workbench.statusBar.visible";constructor(){super({id:o.ID,title:{...ue("toggleStatusbar","Toggle Status Bar Visibility"),mnemonicTitle:c({key:"miStatusbar",comment:["&& denotes a mnemonic"]},"S&&tatus Bar")},category:Et.View,f1:!0,toggled:$.equals("config.workbench.statusBar.visible",!0),menu:[{id:be.MenubarAppearanceMenu,group:"2_workbench_layout",order:3}]})}run(e){let t=e.get(ct),n=e.get(He),r=!t.isVisible("workbench.parts.statusbar",xe);return n.updateValue(o.statusbarVisibleKey,r)}};ze(Mc);var pd=class extends et{constructor(t,n,i,r,s,a){super({id:r,title:i,category:Et.View,precondition:s,metadata:a?{description:a}:void 0,f1:!0});this.settingName=t;this.value=n}run(t){return t.get(He).updateValue(this.settingName,this.value)}},kD=class o extends pd{static ID="workbench.action.hideEditorTabs";constructor(){let e=$.and($.equals("config.workbench.editor.showTabs","none").negate(),nr.negate()),t=ue("hideEditorTabs","Hide Editor Tabs");super("workbench.editor.showTabs","none",t,o.ID,e,ue("hideEditorTabsDescription","Hide Tab Bar"))}},DD=class o extends pd{static ID="workbench.action.zenHideEditorTabs";constructor(){let e=$.and($.equals("config.zenMode.showTabs","none").negate(),nr),t=ue("hideEditorTabsZenMode","Hide Editor Tabs in Zen Mode");super("zenMode.showTabs","none",t,o.ID,e,ue("hideEditorTabsZenModeDescription","Hide Tab Bar in Zen Mode"))}},_D=class o extends pd{static ID="workbench.action.showMultipleEditorTabs";constructor(){let e=$.and($.equals("config.workbench.editor.showTabs","multiple").negate(),nr.negate()),t=ue("showMultipleEditorTabs","Show Multiple Editor Tabs");super("workbench.editor.showTabs","multiple",t,o.ID,e,ue("showMultipleEditorTabsDescription","Show Tab Bar with multiple tabs"))}},LD=class o extends pd{static ID="workbench.action.zenShowMultipleEditorTabs";constructor(){let e=$.and($.equals("config.zenMode.showTabs","multiple").negate(),nr),t=ue("showMultipleEditorTabsZenMode","Show Multiple Editor Tabs in Zen Mode");super("zenMode.showTabs","multiple",t,o.ID,e,ue("showMultipleEditorTabsZenModeDescription","Show Tab Bar in Zen Mode"))}},RD=class o extends pd{static ID="workbench.action.showEditorTab";constructor(){let e=$.and($.equals("config.workbench.editor.showTabs","single").negate(),nr.negate()),t=ue("showSingleEditorTab","Show Single Editor Tab");super("workbench.editor.showTabs","single",t,o.ID,e,ue("showSingleEditorTabDescription","Show Tab Bar with one Tab"))}},AD=class o extends pd{static ID="workbench.action.zenShowEditorTab";constructor(){let e=$.and($.equals("config.zenMode.showTabs","single").negate(),nr),t=ue("showSingleEditorTabZenMode","Show Single Editor Tab in Zen Mode");super("zenMode.showTabs","single",t,o.ID,e,ue("showSingleEditorTabZenModeDescription","Show Tab Bar in Zen Mode with one Tab"))}};ze(kD);ze(DD);ze(_D);ze(LD);ze(RD);ze(AD);Ft.appendMenuItem(be.MenubarAppearanceMenu,{submenu:be.EditorTabsBarShowTabsSubmenu,title:c("tabBar","Tab Bar"),group:"3_workbench_layout_move",order:10,when:nr.negate()});Ft.appendMenuItem(be.MenubarAppearanceMenu,{submenu:be.EditorTabsBarShowTabsZenModeSubmenu,title:c("tabBar","Tab Bar"),group:"3_workbench_layout_move",order:10,when:nr});var OD=class o extends et{static ID="workbench.action.editorActionsTitleBar";constructor(){super({id:o.ID,title:ue("moveEditorActionsToTitleBar","Move Editor Actions to Title Bar"),category:Et.View,precondition:$.equals("config.workbench.editor.editorActionsLocation","titleBar").negate(),metadata:{description:ue("moveEditorActionsToTitleBarDescription","Move Editor Actions from the tab bar to the title bar")},f1:!0})}run(e){return e.get(He).updateValue("workbench.editor.editorActionsLocation","titleBar")}};ze(OD);var PD=class o extends et{static ID="workbench.action.editorActionsDefault";constructor(){super({id:o.ID,title:ue("moveEditorActionsToTabBar","Move Editor Actions to Tab Bar"),category:Et.View,precondition:$.and($.equals("config.workbench.editor.editorActionsLocation","default").negate(),$.equals("config.workbench.editor.showTabs","none").negate()),metadata:{description:ue("moveEditorActionsToTabBarDescription","Move Editor Actions from the title bar to the tab bar")},f1:!0})}run(e){return e.get(He).updateValue("workbench.editor.editorActionsLocation","default")}};ze(PD);var MD=class o extends et{static ID="workbench.action.hideEditorActions";constructor(){super({id:o.ID,title:ue("hideEditorActons","Hide Editor Actions"),category:Et.View,precondition:$.equals("config.workbench.editor.editorActionsLocation","hidden").negate(),metadata:{description:ue("hideEditorActonsDescription","Hide Editor Actions in the tab and title bar")},f1:!0})}run(e){return e.get(He).updateValue("workbench.editor.editorActionsLocation","hidden")}};ze(MD);var ND=class o extends et{static ID="workbench.action.showEditorActions";constructor(){super({id:o.ID,title:ue("showEditorActons","Show Editor Actions"),category:Et.View,precondition:$.equals("config.workbench.editor.editorActionsLocation","hidden"),metadata:{description:ue("showEditorActonsDescription","Make Editor Actions visible.")},f1:!0})}run(e){return e.get(He).updateValue("workbench.editor.editorActionsLocation","default")}};ze(ND);Ft.appendMenuItem(be.MenubarAppearanceMenu,{submenu:be.EditorActionsPositionSubmenu,title:c("editorActionsPosition","Editor Actions Position"),group:"3_workbench_layout_move",order:11});var FD=class o extends et{static ID="workbench.action.configureEditorTabs";constructor(){super({id:o.ID,title:ue("configureTabs","Configure Tabs"),category:Et.View})}run(e){e.get(cg).openSettings({jsonEditor:!1,query:"workbench.editor tab"})}};ze(FD);var BD=class o extends et{static ID="workbench.action.configureEditor";constructor(){super({id:o.ID,title:ue("configureEditors","Configure Editors"),category:Et.View})}run(e){e.get(cg).openSettings({jsonEditor:!1,query:"workbench.editor"})}};ze(BD);ze(class extends et{constructor(){super({id:"workbench.action.toggleSeparatePinnedEditorTabs",title:ue("toggleSeparatePinnedEditorTabs","Separate Pinned Editor Tabs"),category:Et.View,precondition:$.equals("config.workbench.editor.showTabs","multiple"),metadata:{description:ue("toggleSeparatePinnedEditorTabsDescription","Toggle whether pinned editor tabs are shown on a separate row above unpinned tabs.")},f1:!0})}run(o){let e=o.get(He),n=!e.getValue("workbench.editor.pinnedTabsOnSeparateRow");return e.updateValue("workbench.editor.pinnedTabsOnSeparateRow",n)}});ze(class extends et{constructor(){super({id:"workbench.action.toggleZenMode",title:{...ue("toggleZenMode","Toggle Zen Mode"),mnemonicTitle:c({key:"miToggleZenMode",comment:["&& denotes a mnemonic"]},"Zen Mode")},precondition:os.toNegated(),category:Et.View,f1:!0,keybinding:{weight:200,primary:rr(2089,56)},toggled:nr,menu:[{id:be.MenubarAppearanceMenu,group:"1_toggle_view",order:2}]})}run(o){return o.get(ct).toggleZenMode()}});ri.registerCommandAndKeybindingRule({id:"workbench.action.exitZenMode",weight:-900,handler(o){let e=o.get(ct),t=o.get(st);nr.getValue(t)&&e.toggleZenMode()},when:nr,primary:rr(9,9)});if(St||Kt||Cn){ze(class extends et{constructor(){super({id:"workbench.action.toggleMenuBar",title:{...ue("toggleMenuBar","Toggle Menu Bar"),mnemonicTitle:c({key:"miMenuBar",comment:["&& denotes a mnemonic"]},"Menu &&Bar")},category:Et.View,f1:!0,toggled:$.and(fS.toNegated(),$.notEquals("config.window.menuBarVisibility","hidden"),$.notEquals("config.window.menuBarVisibility","toggle"),$.notEquals("config.window.menuBarVisibility","compact")),menu:[{id:be.MenubarAppearanceMenu,group:"2_workbench_layout",order:0}]})}run(e){return e.get(ct).toggleMenuBar()}});for(let o of[be.TitleBarContext,be.TitleBarTitleContext])Ft.appendMenuItem(o,{command:{id:"workbench.action.toggleMenuBar",title:c("miMenuBarNoMnemonic","Menu Bar"),toggled:$.and(fS.toNegated(),$.notEquals("config.window.menuBarVisibility","hidden"),$.notEquals("config.window.menuBarVisibility","toggle"),$.notEquals("config.window.menuBarVisibility","compact"))},when:$.and(os.toNegated(),$.notEquals(HN.key,"native"),vD.negate()),group:"2_config",order:0})}ze(class extends et{constructor(){super({id:"workbench.action.resetViewLocations",title:ue("resetViewLocations","Reset View Locations"),category:Et.View,f1:!0})}run(o){return o.get(zi).reset()}});ze(class extends et{constructor(){super({id:"workbench.action.moveView",title:ue("moveView","Move View"),category:Et.View,f1:!0})}async run(o){let e=o.get(zi),t=o.get(Ze),n=o.get(es),i=o.get(st),r=o.get(dd),s=Ir.getValue(i),a;s&&e.getViewDescriptorById(s)?.canMoveView&&(a=s);try{if(a=await this.getView(n,e,r,a),!a)return;let l=new ox;t.invokeFunction(d=>l.run(d,a))}catch{}}getViewItems(o,e){let t=[];return e.getVisiblePaneCompositeIds(0).forEach(s=>{let a=o.getViewContainerById(s),l=o.getViewContainerModel(a),d=!1;l.visibleViewDescriptors.forEach(u=>{u.canMoveView&&(d||(t.push({type:"separator",label:c("sidebarContainer","Side Bar / {0}",l.title)}),d=!0),t.push({id:u.id,label:u.name.value}))})}),e.getPinnedPaneCompositeIds(1).forEach(s=>{let a=o.getViewContainerById(s),l=o.getViewContainerModel(a),d=!1;l.visibleViewDescriptors.forEach(u=>{u.canMoveView&&(d||(t.push({type:"separator",label:c("panelContainer","Panel / {0}",l.title)}),d=!0),t.push({id:u.id,label:u.name.value}))})}),e.getPinnedPaneCompositeIds(2).forEach(s=>{let a=o.getViewContainerById(s),l=o.getViewContainerModel(a),d=!1;l.visibleViewDescriptors.forEach(u=>{u.canMoveView&&(d||(t.push({type:"separator",label:c("secondarySideBarContainer","Secondary Side Bar / {0}",l.title)}),d=!0),t.push({id:u.id,label:u.name.value}))})}),t}async getView(o,e,t,n){let i=new Y,r=i.add(o.createQuickPick({useSeparators:!0}));return r.placeholder=c("moveFocusedView.selectView","Select a View to Move"),r.items=this.getViewItems(e,t),r.selectedItems=r.items.filter(s=>s.id===n),new Promise((s,a)=>{i.add(r.onDidAccept(()=>{let l=r.selectedItems[0];l.id?s(l.id):a(),r.hide()})),i.add(r.onDidHide(()=>{i.dispose(),a()})),r.show()})}});var ox=class extends et{constructor(){super({id:"workbench.action.moveFocusedView",title:ue("moveFocusedView","Move Focused View"),category:Et.View,precondition:Ir.notEqualsTo(""),f1:!0})}run(e,t){let n=e.get(zi),i=e.get(id),r=e.get(es),s=e.get(st),a=e.get(br),l=e.get(dd),d=t||Ir.getValue(s);if(d===void 0||d.trim()===""){a.error(c("moveFocusedView.error.noFocusedView","There is no view currently focused."));return}let u=n.getViewDescriptorById(d);if(!u||!u.canMoveView){a.error(c("moveFocusedView.error.nonMovableView","The currently focused view is not movable."));return}let p=new Y,h=p.add(r.createQuickPick({useSeparators:!0}));h.placeholder=c("moveFocusedView.selectDestination","Select a Destination for the View"),h.title=c({key:"moveFocusedView.title",comment:["{0} indicates the title of the view the user has selected to move."]},"View: Move {0}",u.name.value);let m=[],g=n.getViewContainerByViewId(d),f=n.getViewLocationById(d),y=n.getViewContainerModel(g).allViewDescriptors.length===1;y&&f===1||m.push({id:"_.panel.newcontainer",label:c({key:"moveFocusedView.newContainerInPanel",comment:["Creates a new top-level tab in the panel."]},"New Panel Entry")}),y&&f===0||m.push({id:"_.sidebar.newcontainer",label:c("moveFocusedView.newContainerInSidebar","New Side Bar Entry")}),y&&f===2||m.push({id:"_.auxiliarybar.newcontainer",label:c("moveFocusedView.newContainerInSidePanel","New Secondary Side Bar Entry")}),m.push({type:"separator",label:c("sidebar","Side Bar")});let C=l.getVisiblePaneCompositeIds(0);m.push(...C.filter(_=>_===n.getViewContainerByViewId(d).id?!1:!n.getViewContainerById(_).rejectAddedViews).map(_=>({id:_,label:n.getViewContainerModel(n.getViewContainerById(_)).title}))),m.push({type:"separator",label:c("panel","Panel")});let w=l.getPinnedPaneCompositeIds(1);m.push(...w.filter(_=>_===n.getViewContainerByViewId(d).id?!1:!n.getViewContainerById(_).rejectAddedViews).map(_=>({id:_,label:n.getViewContainerModel(n.getViewContainerById(_)).title}))),m.push({type:"separator",label:c("secondarySideBar","Secondary Side Bar")});let R=l.getPinnedPaneCompositeIds(2);m.push(...R.filter(_=>_===n.getViewContainerByViewId(d).id?!1:!n.getViewContainerById(_).rejectAddedViews).map(_=>({id:_,label:n.getViewContainerModel(n.getViewContainerById(_)).title}))),h.items=m,p.add(h.onDidAccept(()=>{let _=h.selectedItems[0];_.id==="_.panel.newcontainer"?(n.moveViewToLocation(u,1,this.desc.id),i.openView(d,!0)):_.id==="_.sidebar.newcontainer"?(n.moveViewToLocation(u,0,this.desc.id),i.openView(d,!0)):_.id==="_.auxiliarybar.newcontainer"?(n.moveViewToLocation(u,2,this.desc.id),i.openView(d,!0)):_.id&&(n.moveViewsToContainer([u],n.getViewContainerById(_.id),void 0,this.desc.id),i.openView(d,!0)),h.hide()})),p.add(h.onDidHide(()=>p.dispose())),h.show()}};ze(ox);ze(class extends et{constructor(){super({id:"workbench.action.resetFocusedViewLocation",title:ue("resetFocusedViewLocation","Reset Focused View Location"),category:Et.View,f1:!0,precondition:Ir.notEqualsTo("")})}run(o){let e=o.get(zi),t=o.get(st),n=o.get(br),i=o.get(id),r=Ir.getValue(t),s=null;if(r!==void 0&&r.trim()!==""&&(s=e.getViewDescriptorById(r)),!s){n.error(c("resetFocusedView.error.noFocusedView","There is no view currently focused."));return}let a=e.getDefaultContainerById(s.id);!a||a===e.getViewContainerByViewId(s.id)||(e.moveViewsToContainer([s],a,void 0,this.desc.id),i.openView(s.id,!0))}});var no=class extends et{static RESIZE_INCREMENT=60;resizePart(e,t,n,i){let r;if(i===void 0){let s=n.hasFocus("workbench.parts.editor"),a=n.hasFocus("workbench.parts.sidebar"),l=n.hasFocus("workbench.parts.panel"),d=n.hasFocus("workbench.parts.auxiliarybar");a?r="workbench.parts.sidebar":l?r="workbench.parts.panel":s?r="workbench.parts.editor":d&&(r="workbench.parts.auxiliarybar")}else r=i;r&&n.resizePart(r,e,t)}},VD=class extends no{constructor(){super({id:"workbench.action.increaseViewSize",title:ue("increaseViewSize","Increase Current View Size"),f1:!0,precondition:os.toNegated()})}run(e){this.resizePart(no.RESIZE_INCREMENT,no.RESIZE_INCREMENT,e.get(ct))}},WD=class extends no{constructor(){super({id:"workbench.action.increaseViewWidth",title:ue("increaseEditorWidth","Increase Editor Width"),f1:!0,precondition:os.toNegated()})}run(e){this.resizePart(no.RESIZE_INCREMENT,0,e.get(ct),"workbench.parts.editor")}},UD=class extends no{constructor(){super({id:"workbench.action.increaseViewHeight",title:ue("increaseEditorHeight","Increase Editor Height"),f1:!0,precondition:os.toNegated()})}run(e){this.resizePart(0,no.RESIZE_INCREMENT,e.get(ct),"workbench.parts.editor")}},zD=class extends no{constructor(){super({id:"workbench.action.decreaseViewSize",title:ue("decreaseViewSize","Decrease Current View Size"),f1:!0,precondition:os.toNegated()})}run(e){this.resizePart(-no.RESIZE_INCREMENT,-no.RESIZE_INCREMENT,e.get(ct))}},HD=class extends no{constructor(){super({id:"workbench.action.decreaseViewWidth",title:ue("decreaseEditorWidth","Decrease Editor Width"),f1:!0,precondition:os.toNegated()})}run(e){this.resizePart(-no.RESIZE_INCREMENT,0,e.get(ct),"workbench.parts.editor")}},KD=class extends no{constructor(){super({id:"workbench.action.decreaseViewHeight",title:ue("decreaseEditorHeight","Decrease Editor Height"),f1:!0,precondition:os.toNegated()})}run(e){this.resizePart(0,-no.RESIZE_INCREMENT,e.get(ct),"workbench.parts.editor")}};ze(VD);ze(WD);ze(UD);ze(zD);ze(HD);ze(KD);function Hz(o){return o.iconA!==void 0}var ih=(o,e,t,n)=>({id:o,active:e,label:t,visualIcon:n,activeIcon:Q.eye,inactiveIcon:Q.eyeClosed,activeAriaLabel:c("selectToHide","Select to Hide"),inactiveAriaLabel:c("selectToShow","Select to Show"),useButtons:!0}),qa=(o,e,t,n)=>({id:o,active:e,label:t,visualIcon:n,activeIcon:Q.check,activeAriaLabel:c("active","Active"),useButtons:!1}),Kz=$.and(fS.toNegated(),$.notEquals("config.window.menuBarVisibility","hidden"),$.notEquals("config.window.menuBarVisibility","toggle"),$.notEquals("config.window.menuBarVisibility","compact")),rx=[];(!Fe||!wr)&&rx.push(ih("workbench.action.toggleMenuBar",Kz,c("menuBar","Menu Bar"),Dz));rx.push(ih(zz,$.notEquals("config.workbench.activityBar.location","hidden"),c("activityBar","Activity Bar"),{whenA:$.equals("config.workbench.sideBar.location","left"),iconA:_z,iconB:Lz}),ih(ud.ID,Ac,c("sideBar","Primary Side Bar"),{whenA:$.equals("config.workbench.sideBar.location","left"),iconA:JS,iconB:ex}),ih(cd.ID,Ga,c("secondarySideBar","Secondary Side Bar"),{whenA:$.equals("config.workbench.sideBar.location","left"),iconA:ex,iconB:JS}),ih(Pc.ID,Oc,c("panel","Panel"),Oz),ih(Mc.ID,$.equals("config.workbench.statusBar.visible",!0),c("statusBar","Status Bar"),Pz));var QN=[qa(ix.ID,$.equals("config.workbench.sideBar.location","left"),c("leftSideBar","Left"),JS),qa(nx.ID,$.equals("config.workbench.sideBar.location","right"),c("rightSideBar","Right"),ex)],XN=[qa("workbench.action.alignPanelLeft",ea.isEqualTo("left"),c("leftPanel","Left"),Mz),qa("workbench.action.alignPanelRight",ea.isEqualTo("right"),c("rightPanel","Right"),Nz),qa("workbench.action.alignPanelCenter",ea.isEqualTo("center"),c("centerPanel","Center"),Fz),qa("workbench.action.alignPanelJustify",ea.isEqualTo("justify"),c("justifyPanel","Justify"),Bz)],ZN=[qa("workbench.action.toggleFullScreen",vD,c("fullscreen","Full Screen"),Vz),qa("workbench.action.toggleZenMode",nr,c("zenMode","Zen Mode"),Uz),qa("workbench.action.toggleCenteredLayout",yD,c("centeredLayout","Centered Layout"),Wz)],JN=new Set;for(let{active:o}of[...rx,...QN,...XN,...ZN])for(let e of o.keys())JN.add(e);ze(class extends et{_currentQuickPick;constructor(){super({id:"workbench.action.customizeLayout",title:ue("customizeLayout","Customize Layout..."),f1:!0,icon:YN,menu:[{id:be.LayoutControlMenuSubmenu,group:"z_end"},{id:be.LayoutControlMenu,when:$.equals("config.workbench.layoutControl.type","both"),group:"z_end"}]})}getItems(e,t){let n=i=>{let r=i.active.evaluate(e.getContext(null)),s=i.useButtons?i.label:i.label+(r&&i.activeIcon?` $(${i.activeIcon.id})`:!r&&i.inactiveIcon?` $(${i.inactiveIcon.id})`:""),a=i.label+(r&&i.activeAriaLabel?` (${i.activeAriaLabel})`:!r&&i.inactiveAriaLabel?` (${i.inactiveAriaLabel})`:"");if(i.visualIcon){let d=i.visualIcon;Hz(d)&&(d=d.whenA.evaluate(e.getContext(null))?d.iconA:d.iconB),s=`$(${d.id}) ${s}`}let l=r?i.activeIcon:i.inactiveIcon;return{type:"item",id:i.id,label:s,ariaLabel:a,keybinding:t.lookupKeybinding(i.id,e),buttons:i.useButtons?[{alwaysVisible:!1,tooltip:a,iconClass:l?je.asClassName(l):void 0}]:void 0}};return[{type:"separator",label:c("toggleVisibility","Visibility")},...rx.map(n),{type:"separator",label:c("sideBarPosition","Primary Side Bar Position")},...QN.map(n),{type:"separator",label:c("panelAlignment","Panel Alignment")},...XN.map(n),{type:"separator",label:c("layoutModes","Modes")},...ZN.map(n)]}run(e){if(this._currentQuickPick){this._currentQuickPick.hide();return}let t=e.get(He),n=e.get(st),i=e.get(Ci),r=e.get(es),s=e.get(Qn),a=new Y,l=a.add(r.createQuickPick({useSeparators:!0}));this._currentQuickPick=l,l.items=this.getItems(n,s),l.ignoreFocusOut=!0,l.hideInput=!0,l.title=c("customizeLayoutQuickPickTitle","Customize Layout");let d={alwaysVisible:!0,iconClass:je.asClassName(Q.close),tooltip:c("close","Close")},u={alwaysVisible:!0,iconClass:je.asClassName(Q.discard),tooltip:c("restore defaults","Restore Defaults")};l.buttons=[u,d];let p;a.add(n.onDidChangeContext(h=>{h.affectsSome(JN)&&(l.items=this.getItems(n,s),p&&(l.activeItems=l.items.filter(m=>m.id===p?.id)),setTimeout(()=>r.focus(),0))})),a.add(l.onDidAccept(h=>{l.selectedItems.length&&(p=l.selectedItems[0],i.executeCommand(p.id))})),a.add(l.onDidTriggerItemButton(h=>{h.item&&(p=h.item,i.executeCommand(p.id))})),a.add(l.onDidTriggerButton(h=>{if(h===d)l.hide();else if(h===u){let m=g=>{let f=t.inspect(g);t.updateValue(g,f.defaultValue)};m("workbench.activityBar.location"),m("workbench.sideBar.location"),m("workbench.statusBar.visible"),m("workbench.panel.defaultLocation"),(!Fe||!wr)&&m("window.menuBarVisibility"),i.executeCommand("workbench.action.alignPanelCenter")}})),a.add(l.onDidHide(()=>{l.dispose()})),a.add(l.onDispose(()=>{this._currentQuickPick=void 0,a.dispose()})),l.show()}});var sx=class o extends N{constructor(t){super();this.storageService=t;this.restoreState(),this.registerListeners()}static HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden";_onDidChangeEntryVisibility=this._register(new x);onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event;_entries=[];get entries(){return this._entries.slice(0)}_lastFocusedEntry;get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}hidden=new Set;restoreState(){let t=this.storageService.get(o.HIDDEN_ENTRIES_KEY,0);if(t)try{this.hidden=new Set(JSON.parse(t))}catch{}}registerListeners(){this._register(this.storageService.onDidChangeValue(0,o.HIDDEN_ENTRIES_KEY,this._register(new Y))(()=>this.onDidStorageValueChange()))}onDidStorageValueChange(){let t=new Set(this.hidden);this.hidden.clear(),this.restoreState();let n=new Set;for(let i of t)this.hidden.has(i)||n.add(i);for(let i of this.hidden)t.has(i)||n.add(i);if(n.size>0)for(let i of this._entries)n.has(i.id)&&(this.updateVisibility(i.id,!0),n.delete(i.id))}add(t){this._entries.push(t),this.updateVisibility(t,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(t){let n=this._entries.indexOf(t);n>=0&&(this._entries.splice(n,1),this._entries.some(i=>Nc(i.priority.primary)&&i.priority.primary.id===t.id)&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(t){return this.hidden.has(t)}hide(t){this.hidden.has(t)||(this.hidden.add(t),this.updateVisibility(t,!0),this.saveState())}show(t){this.hidden.has(t)&&(this.hidden.delete(t),this.updateVisibility(t,!0),this.saveState())}findEntry(t){return this._entries.find(n=>n.container===t)}getEntries(t){return this._entries.filter(n=>n.alignment===t)}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find(t=>DE(t.container))}focusEntry(t,n){let i=a=>{let l=a,d=l>=0&&l<this._entries.length?this._entries[l]:void 0;for(;d&&this.isHidden(d.id);)l+=t,d=l>=0&&l<this._entries.length?this._entries[l]:void 0;return d},r=this.getFocusedEntry();if(r){let a=i(this._entries.indexOf(r)+t);if(a){this._lastFocusedEntry=a,a.labelContainer.focus();return}}let s=i(n);s&&(this._lastFocusedEntry=s,s.labelContainer.focus())}updateVisibility(t,n){if(typeof t=="string"){let i=t;for(let r of this._entries)r.id===i&&this.updateVisibility(r,n)}else{let i=t,r=this.isHidden(i.id);r?ml(i.container):ga(i.container),n&&this._onDidChangeEntryVisibility.fire({id:i.id,visible:!r}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(o.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),0,0):this.storageService.remove(o.HIDDEN_ENTRIES_KEY,0)}sort(){let t=new Map,n=new Map;for(let s=0;s<this._entries.length;s++){let a=this._entries[s];if(typeof a.priority.primary=="number")t.set(a,s);else{let l=a.priority.primary.id,d=n.get(l);if(!d){for(let u of n.values())if(u.has(l)){d=u;break}d||(d=new Map,n.set(l,d))}d.set(a.id,a)}}let i=Array.from(t.keys());i.sort((s,a)=>s.alignment===a.alignment?s.priority.primary!==a.priority.primary?Number(a.priority.primary)-Number(s.priority.primary):s.priority.secondary!==a.priority.secondary?a.priority.secondary-s.priority.secondary:t.get(s)-t.get(a):s.alignment===0?-1:a.alignment===0?1:0);let r;if(n.size>0){r=[];for(let s of i){let a=n.get(s.id),l=a?Array.from(a.values()):void 0;l&&r.push(...l.filter(d=>Nc(d.priority.primary)&&d.priority.primary.alignment===0)),r.push(s),l&&r.push(...l.filter(d=>Nc(d.priority.primary)&&d.priority.primary.alignment===1)),n.delete(s.id)}for(let[,s]of n)r.push(...s.values())}else r=i;this._entries=r}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(0)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(1))}doMarkFirstLastVisibleStatusbarItem(t){let n,i;for(let r of t)r.container.classList.remove("first-visible-item","last-visible-item"),!this.isHidden(r.id)&&(n||(n=r),i=r);n?.container.classList.add("first-visible-item"),i?.container.classList.add("last-visible-item")}};var ax=class extends Ii{constructor(t,n,i){super(t,n,void 0,!0);this.model=i;this.checked=!i.isHidden(t)}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}},lx=class extends Ii{constructor(t,n,i){super(t,c("hide","Hide '{0}'",n),void 0,!0);this.model=i}async run(){this.model.hide(this.id)}};ri.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:200,primary:15,secondary:[16],when:ad,handler:o=>{o.get(Sr).focusPreviousEntry()}});ri.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:200,primary:17,secondary:[18],when:ad,handler:o=>{o.get(Sr).focusNextEntry()}});ri.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:200,primary:14,when:ad,handler:o=>{let e=o.get(Sr);e.focus(!1),e.focusNextEntry()}});ri.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:200,primary:13,when:ad,handler:o=>{let e=o.get(Sr);e.focus(!1),e.focusPreviousEntry()}});ri.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:200,primary:9,when:ad,handler:o=>{let e=o.get(Sr),t=o.get(Xt);e.isEntryFocused()?e.focus(!1):t.activeEditorPane&&t.activeEditorPane.focus()}});var GD=class extends et{constructor(){super({id:"workbench.action.focusStatusBar",title:ue("focusStatusBar","Focus Status Bar"),category:Et.View,f1:!0})}async run(e){e.get(ct).focusPart("workbench.parts.statusbar",Pd())}};ze(GD);var oh=class extends N{constructor(t,n,i,r,s,a,l,d){super();this.container=t;this.hoverDelegate=i;this.commandService=r;this.hoverService=s;this.notificationService=a;this.telemetryService=l;this.themeService=d;this.labelContainer=document.createElement("a"),this.labelContainer.tabIndex=-1,this.labelContainer.setAttribute("role","button"),this.labelContainer.className="statusbar-item-label",this._register(tn.addTarget(this.labelContainer)),this.label=this._register(new qD(this.labelContainer)),this.container.appendChild(this.labelContainer),this.beakContainer=document.createElement("div"),this.beakContainer.className="status-bar-item-beak-container",this.container.appendChild(this.beakContainer),this.update(n)}label;entry=void 0;foregroundListener=this._register(new ot);backgroundListener=this._register(new ot);commandMouseListener=this._register(new ot);commandTouchListener=this._register(new ot);commandKeyboardListener=this._register(new ot);focusListener=this._register(new ot);focusOutListener=this._register(new ot);hover=void 0;labelContainer;beakContainer;get name(){return lt(this.entry).name}get hasCommand(){return typeof this.entry?.command<"u"}update(t){if(this.label.showProgress=t.showProgress??!1,(!this.entry||t.text!==this.entry.text)&&(this.label.text=t.text,t.text?ga(this.labelContainer):ml(this.labelContainer)),(!this.entry||t.ariaLabel!==this.entry.ariaLabel)&&(this.container.setAttribute("aria-label",t.ariaLabel),this.labelContainer.setAttribute("aria-label",t.ariaLabel)),(!this.entry||t.role!==this.entry.role)&&this.labelContainer.setAttribute("role",t.role||"button"),!this.entry||!this.isEqualTooltip(this.entry,t)){let i=vl(t.tooltip)?{markdown:t.tooltip,markdownNotSupportedFallback:void 0}:t.tooltip;this.hover?this.hover.update(i):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,i)),t.command!==dx&&(this.focusListener.value=W(this.labelContainer,ee.FOCUS,r=>{Ae.stop(r),this.hover?.show(!1)}),this.focusOutListener.value=W(this.labelContainer,ee.FOCUS_OUT,r=>{Ae.stop(r),this.hover?.hide()}))}if(!this.entry||t.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();let i=t.command;i&&(i!==dx||this.hover)?(this.commandMouseListener.value=W(this.labelContainer,ee.CLICK,()=>this.executeCommand(i)),this.commandTouchListener.value=W(this.labelContainer,Ct.Tap,()=>this.executeCommand(i)),this.commandKeyboardListener.value=W(this.labelContainer,ee.KEY_DOWN,r=>{let s=new pt(r);s.equals(10)||s.equals(3)?(Ae.stop(r),this.executeCommand(i)):(s.equals(9)||s.equals(15)||s.equals(17))&&(Ae.stop(r),this.hover?.hide())}),this.labelContainer.classList.remove("disabled")):this.labelContainer.classList.add("disabled")}(!this.entry||t.showBeak!==this.entry.showBeak)&&(t.showBeak?this.container.classList.add("has-beak"):this.container.classList.remove("has-beak"));let n=!!t.backgroundColor||t.kind&&t.kind!=="standard";if(!this.entry||t.kind!==this.entry.kind){for(let i of tF)this.container.classList.remove(`${i}-kind`);t.kind&&t.kind!=="standard"&&this.container.classList.add(`${t.kind}-kind`),this.container.classList.toggle("has-background-color",n)}(!this.entry||t.color!==this.entry.color)&&this.applyColor(this.labelContainer,t.color),(!this.entry||t.backgroundColor!==this.entry.backgroundColor)&&(this.container.classList.toggle("has-background-color",n),this.applyColor(this.container,t.backgroundColor,!0)),this.entry=t}isEqualTooltip({tooltip:t},{tooltip:n}){return t===void 0?n===void 0:vl(t)?vl(n)&&_b(t,n):t===n}async executeCommand(t){if(t===dx)this.hover?.show(!0);else{let n=typeof t=="string"?t:t.id,i=typeof t=="string"?[]:t.arguments??[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:n,from:"status bar"});try{await this.commandService.executeCommand(n,...i)}catch(r){this.notificationService.error(Us(r))}}}applyColor(t,n,i){let r;if(i?this.backgroundListener.clear():this.foregroundListener.clear(),n)if(RR(n)){r=this.themeService.getColorTheme().getColor(n.id)?.toString();let s=this.themeService.onDidColorThemeChange(a=>{let l=a.getColor(n.id)?.toString();i?t.style.backgroundColor=l??"":t.style.color=l??""});i?this.backgroundListener.value=s:this.foregroundListener.value=s}else r=n;i?t.style.backgroundColor=r??"":t.style.color=r??""}};oh=k([I(3,Ci),I(4,sd),I(5,La),I(6,$t),I(7,en)],oh);var qD=class extends Up{constructor(t){super(t);this.container=t}progressCodicon=FI(Ww);currentText="";currentShowProgress=!1;set showProgress(t){this.currentShowProgress!==t&&(this.currentShowProgress=t,this.progressCodicon=FI(t==="syncing"?Ww:YR),this.text=this.currentText)}set text(t){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(let i of Array.from(this.container.childNodes))i!==this.progressCodicon&&i.remove();let n=t??"";n&&(n=` ${n}`),Pe(this.container,...Ba(n))}else super.text=t}};var ta=class extends $I{constructor(t,n,i,r,s,a,l,d){super(t,{hasTitle:!1},i,s,a);this.instantiationService=n;this.contextService=r;this.storageService=s;this.contextMenuService=l;this.contextKeyService=d;this.registerListeners()}static HEIGHT=22;minimumWidth=0;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=ta.HEIGHT;maximumHeight=ta.HEIGHT;styleElement;pendingEntries=[];viewModel=this._register(new sx(this.storageService));onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;leftItemsContainer;rightItemsContainer;hoverDelegate=this._register(this.instantiationService.createInstance(Gp,"element",!0,(t,n)=>({persistence:{hideOnKeyDown:!0,sticky:n}})));compactEntriesDisposable=this._register(new ot);styleOverrides=new Set;registerListeners(){this._register(this.onDidChangeEntryVisibility(()=>this.updateCompactEntries())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateStyles()))}addEntry(t,n,i,r=0){let s;return nF(r)?s=r:s={primary:r,secondary:Nr(n)},this.element?this.doAddEntry(t,n,i,s):this.doAddPendingEntry(t,n,i,s)}doAddPendingEntry(t,n,i,r){let s={entry:t,id:n,alignment:i,priority:r};return this.pendingEntries.push(s),{update:l=>{s.accessor?s.accessor.update(l):s.entry=l},dispose:()=>{s.accessor?s.accessor.dispose():this.pendingEntries=this.pendingEntries.filter(l=>l!==s)}}}doAddEntry(t,n,i,r){let s=this.doCreateStatusItem(n,i),a=this.instantiationService.createInstance(oh,s,t,this.hoverDelegate),l=new class{id=n;alignment=i;priority=r;container=s;labelContainer=a.labelContainer;get name(){return a.name}get hasCommand(){return a.hasCommand}},{needsFullRefresh:d}=this.doAddOrRemoveModelEntry(l,!0);return d?this.appendStatusbarEntries():this.appendStatusbarEntry(l),{update:u=>{a.update(u)},dispose:()=>{let{needsFullRefresh:u}=this.doAddOrRemoveModelEntry(l,!1);u?this.appendStatusbarEntries():s.remove(),Bt(a)}}}doCreateStatusItem(t,n,...i){let r=document.createElement("div");return r.id=t,r.classList.add("statusbar-item"),i&&r.classList.add(...i),n===1?r.classList.add("right"):r.classList.add("left"),r}doAddOrRemoveModelEntry(t,n){let i=this.viewModel.entries;n?this.viewModel.add(t):this.viewModel.remove(t);let r=this.viewModel.entries;return n?i.splice(r.indexOf(t),0,t):i.splice(i.indexOf(t),1),{needsFullRefresh:!Wn(i,r)}}isEntryVisible(t){return!this.viewModel.isHidden(t)}updateEntryVisibility(t,n){n?this.viewModel.show(t):this.viewModel.hide(t)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(t=!0){this.getContainer()?.focus();let n=this.viewModel.lastFocusedEntry;t&&n&&setTimeout(()=>n.labelContainer.focus(),0)}createContentArea(t){this.element=t;let n=this._register(this.contextKeyService.createScoped(this.element));return ad.bindTo(n).set(!0),this.leftItemsContainer=document.createElement("div"),this.leftItemsContainer.classList.add("left-items","items-container"),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=document.createElement("div"),this.rightItemsContainer.classList.add("right-items","items-container"),this.element.appendChild(this.rightItemsContainer),this._register(W(t,ee.CONTEXT_MENU,i=>this.showContextMenu(i))),this._register(tn.addTarget(t)),this._register(W(t,Ct.Contextmenu,i=>this.showContextMenu(i))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){let t=this.pendingEntries.shift();t&&(t.accessor=this.addEntry(t.entry,t.id,t.alignment,t.priority.primary))}}appendStatusbarEntries(){let t=lt(this.leftItemsContainer),n=lt(this.rightItemsContainer);dn(t),dn(n);for(let i of[...this.viewModel.getEntries(0),...this.viewModel.getEntries(1).reverse()])(i.alignment===0?t:n).appendChild(i.container);this.updateCompactEntries()}appendStatusbarEntry(t){let n=this.viewModel.getEntries(t.alignment);t.alignment===1&&n.reverse();let i=lt(t.alignment===0?this.leftItemsContainer:this.rightItemsContainer),r=n.indexOf(t);r+1===n.length?i.appendChild(t.container):i.insertBefore(t.container,n[r+1].container),this.updateCompactEntries()}updateCompactEntries(){let t=this.viewModel.entries,n=new Map;for(let a of t)this.viewModel.isHidden(a.id)||n.set(a.id,a),a.container.classList.remove("compact-left","compact-right");let i=new Map;for(let a of n.values())if(Nc(a.priority.primary)&&a.priority.primary.compact){let l=a.priority.primary.id,d=n.get(l);if(!d)continue;let u=i.get(l);if(!u){for(let p of i.values())if(p.has(l)){u=p;break}u||(u=new Map,i.set(l,u))}u.set(a.id,a),u.set(d.id,d),a.priority.primary.alignment===0?(d.container.classList.add("compact-left"),a.container.classList.add("compact-right")):(d.container.classList.add("compact-right"),a.container.classList.add("compact-left"))}let r=this.getColor(Zs),s=this.getColor(mN);if(this.compactEntriesDisposable.value=new Y,r&&s&&!QR(this.theme.type))for(let[,a]of i)for(let l of a.values())l.hasCommand&&(this.compactEntriesDisposable.value.add(W(l.labelContainer,ee.MOUSE_OVER,()=>{a.forEach(d=>d.labelContainer.style.backgroundColor=r),l.labelContainer.style.backgroundColor=s})),this.compactEntriesDisposable.value.add(W(l.labelContainer,ee.MOUSE_OUT,()=>{a.forEach(d=>d.labelContainer.style.backgroundColor="")})))}showContextMenu(t){Ae.stop(t,!0);let n=new Tn(Re(this.element),t),i;this.contextMenuService.showContextMenu({getAnchor:()=>n,getActions:()=>(i=this.getContextMenuActions(n),i),onHide:()=>{i&&k_(i)}})}getContextMenuActions(t){let n=[];n.push(ei({id:Mc.ID,label:c("hideStatusBar","Hide Status Bar"),run:()=>this.instantiationService.invokeFunction(s=>new Mc().run(s))})),n.push(new cn);let i=new Set;for(let s of this.viewModel.entries)i.has(s.id)||(n.push(new ax(s.id,s.name,this.viewModel)),i.add(s.id));let r;for(let s=t.target;s;s=s.parentElement){let a=this.viewModel.findEntry(s);if(a){r=a;break}}return r&&(n.push(new cn),n.push(new lx(r.id,r.name,this.viewModel))),n}updateStyles(){super.updateStyles();let t=lt(this.getContainer()),n=[...this.styleOverrides].sort((d,u)=>d.priority-u.priority)[0],i=this.getColor(n?.background??(this.contextService.getWorkbenchState()!==1?dN:cN))||"";t.style.backgroundColor=i;let r=this.getColor(n?.foreground??(this.contextService.getWorkbenchState()!==1?Xs:lN))||"";t.style.color=r;let s=this.getColor(hN),a=this.getColor(n?.border??(this.contextService.getWorkbenchState()!==1?G1:pN))||this.getColor(pe);a?(t.classList.add("status-border-top"),t.style.setProperty("--status-border-top-color",a)):(t.classList.remove("status-border-top"),t.style.removeProperty("--status-border-top-color"));let l=this.getColor(uN);this.styleElement||(this.styleElement=lr(t)),this.styleElement.textContent=`

				/* Status bar focus outline */
				.monaco-workbench .part.statusbar:focus {
					outline-color: ${l};
				}

				/* Status bar item focus outline */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {
					outline: 1px solid ${this.getColor(It)??s};
					outline-offset: ${a?"-2px":"-1px"};
				}

				/* Notification Beak */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {
					border-bottom-color: ${i};
				}
			`}layout(t,n,i,r){super.layout(t,n,i,r),super.layoutContents(t,n)}overrideStyle(t){return this.styleOverrides.add(t),this.updateStyles(),re(()=>{this.styleOverrides.delete(t),this.updateStyles()})}toJSON(){return{type:"workbench.parts.statusbar"}}dispose(){this._onWillDispose.fire(),super.dispose()}};ta=k([I(1,Ze),I(2,en),I(3,bn),I(4,Mt),I(5,ct),I(6,Xn),I(7,st)],ta);var df=class extends ta{constructor(e,t,n,i,r,s,a){super("workbench.parts.statusbar",e,t,n,i,r,s,a)}};df=k([I(0,Ze),I(1,en),I(2,bn),I(3,Mt),I(4,ct),I(5,Xn),I(6,st)],df);var Fc=class extends ta{constructor(t,n,i,r,s,a,l,d){let u=Fc.COUNTER++;super(`workbench.parts.auxiliaryStatus.${u}`,n,i,r,s,a,l,d);this.container=t}static COUNTER=1;height=ta.HEIGHT};Fc=k([I(1,Ze),I(2,en),I(3,bn),I(4,Mt),I(5,ct),I(6,Xn),I(7,st)],Fc);var cf=class extends jI{constructor(t,n,i){super("workbench.statusBarService",i,n);this.instantiationService=t;this._register(this.registerPart(this.mainPart))}mainPart=this._register(this.instantiationService.createInstance(df));_onDidCreateAuxiliaryStatusbarPart=this._register(new x);onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event;createAuxiliaryStatusbarPart(t){let n=document.createElement("footer");n.classList.add("part","statusbar"),n.setAttribute("role","status"),n.style.position="relative",n.setAttribute("aria-live","off"),n.setAttribute("tabindex","0"),t.appendChild(n);let i=this.instantiationService.createInstance(Fc,n),r=this.registerPart(i);return i.create(n),G.once(i.onWillDispose)(()=>r.dispose()),this._onDidCreateAuxiliaryStatusbarPart.fire(i),i}createScoped(t,n){return n.add(this.instantiationService.createInstance(uf,t))}onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility;addEntry(t,n,i,r=0){return t.showInAllWindows?this.doAddEntryToAllWindows(t,n,i,r):this.mainPart.addEntry(t,n,i,r)}doAddEntryToAllWindows(t,n,i,r=0){let s=new Y,a=new Set;function l(d){let u=new Y;u.add(d.onWillDispose(()=>u.dispose()));let p=u.add(d.addEntry(t,n,i,r));a.add(p),u.add(re(()=>a.delete(p))),s.add(u),u.add(re(()=>s.delete(u)))}for(let d of this.parts)l(d);return s.add(this.onDidCreateAuxiliaryStatusbarPart(d=>l(d))),{update:d=>{for(let u of a)u.update(d)},dispose:()=>s.dispose()}}isEntryVisible(t){return this.mainPart.isEntryVisible(t)}updateEntryVisibility(t,n){for(let i of this.parts)i.updateEntryVisibility(t,n)}focus(t){this.activePart.focus(t)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(t){let n=new Y;for(let i of this.parts)n.add(i.overrideStyle(t));return n}};cf=k([I(0,Ze),I(1,Mt),I(2,en)],cf);var uf=class extends N{constructor(t,n){super();this.statusbarEntryContainer=t;this.statusbarService=n}createAuxiliaryStatusbarPart(t){return this.statusbarService.createAuxiliaryStatusbarPart(t)}createScoped(t,n){return this.statusbarService.createScoped(t,n)}getPart(){return this.statusbarEntryContainer}onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility;addEntry(t,n,i,r=0){return this.statusbarEntryContainer.addEntry(t,n,i,r)}isEntryVisible(t){return this.statusbarEntryContainer.isEntryVisible(t)}updateEntryVisibility(t,n){this.statusbarEntryContainer.updateEntryVisibility(t,n)}focus(t){this.statusbarEntryContainer.focus(t)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(t){return this.statusbarEntryContainer.overrideStyle(t)}};uf=k([I(1,Sr)],uf);qn(Sr,cf,0);var Sr=H("statusbarService");function Nc(o){let e=o;return typeof e?.id=="string"&&typeof e.alignment=="number"}function nF(o){let e=o;return(typeof e?.primary=="number"||Nc(e?.primary))&&typeof e?.secondary=="number"}var dx={id:"statusBar.entry.showTooltip",title:""},tF=["standard","warning","error","prominent","remote","offline"];var $D=class{constructor(e,t){this.primary=e;this.secondary=t}getEncoding(){return this.primary.getEncoding()}async setEncoding(e,t){await co.settled([this.primary,this.secondary].map(n=>n.setEncoding(e,t)))}},jD=class{constructor(e,t){this.primary=e;this.secondary=t}setLanguageId(e,t){[this.primary,this.secondary].forEach(n=>n.setLanguageId(e,t))}};function gf(o){if(o instanceof Yr)return o;if(o instanceof Yn){let t=gf(o.primary),n=gf(o.secondary);return t&&n?new $D(t,n):t}let e=o;return rE(e.setEncoding,e.getEncoding)?e:null}function ux(o){if(o instanceof Yr)return o;if(o instanceof Yn){let t=ux(o.primary),n=ux(o.secondary);return t&&n?new jD(t,n):t}let e=o;return typeof e.setLanguageId=="function"?e:null}var YD=class{indentation=!1;selectionStatus=!1;languageId=!1;languageStatus=!1;encoding=!1;EOL=!1;tabFocusMode=!1;columnSelectionMode=!1;metadata=!1;combine(e){this.indentation=this.indentation||e.indentation,this.selectionStatus=this.selectionStatus||e.selectionStatus,this.languageId=this.languageId||e.languageId,this.languageStatus=this.languageStatus||e.languageStatus,this.encoding=this.encoding||e.encoding,this.EOL=this.EOL||e.EOL,this.tabFocusMode=this.tabFocusMode||e.tabFocusMode,this.columnSelectionMode=this.columnSelectionMode||e.columnSelectionMode,this.metadata=this.metadata||e.metadata}hasChanges(){return this.indentation||this.selectionStatus||this.languageId||this.languageStatus||this.encoding||this.EOL||this.tabFocusMode||this.columnSelectionMode||this.metadata}},QD=class{_selectionStatus;get selectionStatus(){return this._selectionStatus}_languageId;get languageId(){return this._languageId}_encoding;get encoding(){return this._encoding}_EOL;get EOL(){return this._EOL}_indentation;get indentation(){return this._indentation}_tabFocusMode;get tabFocusMode(){return this._tabFocusMode}_columnSelectionMode;get columnSelectionMode(){return this._columnSelectionMode}_metadata;get metadata(){return this._metadata}update(e){let t=new YD;switch(e.type){case"selectionStatus":this._selectionStatus!==e.selectionStatus&&(this._selectionStatus=e.selectionStatus,t.selectionStatus=!0);break;case"indentation":this._indentation!==e.indentation&&(this._indentation=e.indentation,t.indentation=!0);break;case"languageId":this._languageId!==e.languageId&&(this._languageId=e.languageId,t.languageId=!0);break;case"encoding":this._encoding!==e.encoding&&(this._encoding=e.encoding,t.encoding=!0);break;case"EOL":this._EOL!==e.EOL&&(this._EOL=e.EOL,t.EOL=!0);break;case"tabFocusMode":this._tabFocusMode!==e.tabFocusMode&&(this._tabFocusMode=e.tabFocusMode,t.tabFocusMode=!0);break;case"columnSelectionMode":this._columnSelectionMode!==e.columnSelectionMode&&(this._columnSelectionMode=e.columnSelectionMode,t.columnSelectionMode=!0);break;case"metadata":this._metadata!==e.metadata&&(this._metadata=e.metadata,t.metadata=!0);break}return t}},pf=class extends N{constructor(t){super();this.configurationService=t;this.registerListeners();let n=t.getValue("editor.tabFocusMode")===!0;oc.setTabFocusMode(n)}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;registerListeners(){this._register(oc.onDidChangeTabFocus(t=>this._onDidChange.fire(t))),this._register(this.configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("editor.tabFocusMode")){let n=this.configurationService.getValue("editor.tabFocusMode")===!0;oc.setTabFocusMode(n),this._onDidChange.fire(n)}}))}};pf=k([I(0,He)],pf);var Gz=c("singleSelectionRange","Ln {0}, Col {1} ({2} selected)"),qz=c("singleSelection","Ln {0}, Col {1}"),$z=c("multiSelectionRange","{0} selections ({1} characters selected)"),jz=c("multiSelection","{0} selections"),sF=c("endOfLineLineFeed","LF"),aF=c("endOfLineCarriageReturnLineFeed","CRLF"),hf=class extends N{constructor(t,n,i,r,s,a,l,d){super();this.targetWindowId=t;this.editorService=n;this.quickInputService=i;this.languageService=r;this.textFileService=s;this.statusbarService=a;this.instantiationService=l;this.configurationService=d;this.registerCommands(),this.registerListeners()}tabFocusModeElement=this._register(new ot);columnSelectionModeElement=this._register(new ot);indentationElement=this._register(new ot);selectionElement=this._register(new ot);encodingElement=this._register(new ot);eolElement=this._register(new ot);languageElement=this._register(new ot);metadataElement=this._register(new ot);currentMarkerStatus=this._register(this.instantiationService.createInstance(mf));tabFocusMode=this._register(this.instantiationService.createInstance(pf));state=new QD;toRender=void 0;activeEditorListeners=this._register(new Y);delayedRender=this._register(new ot);registerListeners(){this._register(this.editorService.onDidActiveEditorChange(()=>this.updateStatusBar())),this._register(this.textFileService.untitled.onDidChangeEncoding(t=>this.onResourceEncodingChange(t.resource))),this._register(this.textFileService.files.onDidChangeEncoding(t=>this.onResourceEncodingChange(t.resource))),this._register(G.runAndSubscribe(this.tabFocusMode.onDidChange,t=>{t!==void 0?this.onTabFocusModeChange(t):this.onTabFocusModeChange(this.configurationService.getValue("editor.tabFocusMode"))}))}registerCommands(){this._register(go.registerCommand({id:`changeEditorIndentation${this.targetWindowId}`,handler:()=>this.showIndentationPicker()}))}async showIndentationPicker(){let t=Ks(this.editorService.activeTextEditorControl);if(!t)return this.quickInputService.pick([{label:c("noEditor","No text editor active at this time")}]);if(this.editorService.activeEditor?.isReadonly())return this.quickInputService.pick([{label:c("noWritableCodeEditor","The active code editor is read-only.")}]);let n=[lt(t.getAction(Ag.ID)),lt(t.getAction(Rg.ID)),lt(t.getAction(Og.ID)),lt(t.getAction(Pg.ID)),lt(t.getAction(Dg.ID)),lt(t.getAction(_g.ID)),lt(t.getAction(kg.ID))].map(r=>({id:r.id,label:r.label,detail:Cf.isDefaultVariant()||r.label===r.alias?void 0:r.alias,run:()=>{t.focus(),r.run()}}));return n.splice(3,0,{type:"separator",label:c("indentConvert","convert file")}),n.unshift({type:"separator",label:c("indentView","change view")}),(await this.quickInputService.pick(n,{placeHolder:c("pickAction","Select Action"),matchOnDetail:!0}))?.run()}updateTabFocusModeElement(t){if(t){if(!this.tabFocusModeElement.value){let n=c("tabFocusModeEnabled","Tab Moves Focus");this.tabFocusModeElement.value=this.statusbarService.addEntry({name:c("status.editor.tabFocusMode","Accessibility Mode"),text:n,ariaLabel:n,tooltip:c("disableTabMode","Disable Accessibility Mode"),command:"editor.action.toggleTabFocusMode",kind:"prominent"},"status.editor.tabFocusMode",1,100.7)}}else this.tabFocusModeElement.clear()}updateColumnSelectionModeElement(t){if(t){if(!this.columnSelectionModeElement.value){let n=c("columnSelectionModeEnabled","Column Selection");this.columnSelectionModeElement.value=this.statusbarService.addEntry({name:c("status.editor.columnSelectionMode","Column Selection Mode"),text:n,ariaLabel:n,tooltip:c("disableColumnSelectionMode","Disable Column Selection Mode"),command:"editor.action.toggleColumnSelection",kind:"prominent"},"status.editor.columnSelectionMode",1,100.8)}}else this.columnSelectionModeElement.clear()}updateSelectionElement(t){if(!t){this.selectionElement.clear();return}if(Ks(this.editorService.activeTextEditorControl)?.getModel()?.uri?.scheme===me.vscodeNotebookCell){this.selectionElement.clear();return}let i={name:c("status.editor.selection","Editor Selection"),text:t,ariaLabel:t,tooltip:c("gotoLine","Go to Line/Column"),command:"workbench.action.gotoLine"};this.updateElement(this.selectionElement,i,"status.editor.selection",1,100.5)}updateIndentationElement(t){if(!t){this.indentationElement.clear();return}if(Ks(this.editorService.activeTextEditorControl)?.getModel()?.uri?.scheme===me.vscodeNotebookCell){this.indentationElement.clear();return}let i={name:c("status.editor.indentation","Editor Indentation"),text:t,ariaLabel:t,tooltip:c("selectIndentation","Select Indentation"),command:`changeEditorIndentation${this.targetWindowId}`};this.updateElement(this.indentationElement,i,"status.editor.indentation",1,100.4)}updateEncodingElement(t){if(!t){this.encodingElement.clear();return}let n={name:c("status.editor.encoding","Editor Encoding"),text:t,ariaLabel:t,tooltip:c("selectEncoding","Select Encoding"),command:"workbench.action.editor.changeEncoding"};this.updateElement(this.encodingElement,n,"status.editor.encoding",1,100.3)}updateEOLElement(t){if(!t){this.eolElement.clear();return}let n={name:c("status.editor.eol","Editor End of Line"),text:t,ariaLabel:t,tooltip:c("selectEOL","Select End of Line Sequence"),command:"workbench.action.editor.changeEOL"};this.updateElement(this.eolElement,n,"status.editor.eol",1,100.2)}updateLanguageIdElement(t){if(!t){this.languageElement.clear();return}let n={name:c("status.editor.mode","Editor Language"),text:t,ariaLabel:t,tooltip:c("selectLanguageMode","Select Language Mode"),command:"workbench.action.editor.changeLanguageMode"};this.updateElement(this.languageElement,n,"status.editor.mode",1,100.1)}updateMetadataElement(t){if(!t){this.metadataElement.clear();return}let n={name:c("status.editor.info","File Information"),text:t,ariaLabel:t,tooltip:c("fileInfo","File Information")};this.updateElement(this.metadataElement,n,"status.editor.info",1,100)}updateElement(t,n,i,r,s){t.value?t.value.update(n):t.value=this.statusbarService.addEntry(n,i,r,s)}updateState(t){let n=this.state.update(t);n.hasChanges()&&(this.toRender?this.toRender.combine(n):(this.toRender=n,this.delayedRender.value=kE(ma(this.targetWindowId,!0).window,()=>{this.delayedRender.clear();let i=this.toRender;this.toRender=void 0,i&&this.doRenderNow()})))}doRenderNow(){this.updateTabFocusModeElement(!!this.state.tabFocusMode),this.updateColumnSelectionModeElement(!!this.state.columnSelectionMode),this.updateIndentationElement(this.state.indentation),this.updateSelectionElement(this.state.selectionStatus),this.updateEncodingElement(this.state.encoding),this.updateEOLElement(this.state.EOL?this.state.EOL===`\r
`?aF:sF:void 0),this.updateLanguageIdElement(this.state.languageId),this.updateMetadataElement(this.state.metadata)}getSelectionLabel(t){if(!(!t||!t.selections)){if(t.selections.length===1)return t.charactersSelected?nu(Gz,t.selections[0].positionLineNumber,t.selections[0].positionColumn,t.charactersSelected):nu(qz,t.selections[0].positionLineNumber,t.selections[0].positionColumn);if(t.charactersSelected)return nu($z,t.selections.length,t.charactersSelected);if(t.selections.length>0)return nu(jz,t.selections.length)}}updateStatusBar(){let t=this.editorService.activeEditor,n=this.editorService.activeEditorPane,i=n?Ks(n.getControl())??void 0:void 0;if(this.onColumnSelectionModeChange(i),this.onSelectionChange(i),this.onLanguageChange(i,t),this.onEOLChange(i),this.onEncodingChange(n,i),this.onIndentationChange(i),this.onMetadataChange(n),this.currentMarkerStatus.update(i),this.activeEditorListeners.clear(),n&&this.activeEditorListeners.add(n.onDidChangeControl(()=>{this.updateStatusBar()})),i)this.activeEditorListeners.add(i.onDidChangeConfiguration(r=>{r.hasChanged(22)&&this.onColumnSelectionModeChange(i)})),this.activeEditorListeners.add(G.defer(i.onDidChangeCursorPosition)(()=>{this.onSelectionChange(i),this.currentMarkerStatus.update(i)})),this.activeEditorListeners.add(i.onDidChangeModelLanguage(()=>{this.onLanguageChange(i,t)})),this.activeEditorListeners.add(G.accumulate(i.onDidChangeModelContent)(r=>{this.onEOLChange(i),this.currentMarkerStatus.update(i);let s=i.getSelections();if(s){for(let a of r)for(let l of a.changes)if(s.some(d=>P.areIntersecting(d,l.range))){this.onSelectionChange(i);break}}})),this.activeEditorListeners.add(i.onDidChangeModelOptions(()=>{this.onIndentationChange(i)}));else if(n instanceof vr||n instanceof nd){let r=[];if(n instanceof nd){let s=n.getPrimaryEditorPane();s instanceof vr&&r.push(s);let a=n.getSecondaryEditorPane();a instanceof vr&&r.push(a)}else r.push(n);for(let s of r)this.activeEditorListeners.add(s.onDidChangeMetadata(()=>{this.onMetadataChange(n)})),this.activeEditorListeners.add(s.onDidOpenInPlace(()=>{this.updateStatusBar()}))}}onLanguageChange(t,n){let i={type:"languageId",languageId:void 0};if(t&&n&&ux(n)){let r=t.getModel();if(r){let s=r.getLanguageId();i.languageId=this.languageService.getLanguageName(s)??void 0}}this.updateState(i)}onIndentationChange(t){let n={type:"indentation",indentation:void 0};if(t){let i=t.getModel();if(i){let r=i.getOptions();n.indentation=r.insertSpaces?r.tabSize===r.indentSize?c("spacesSize","Spaces: {0}",r.indentSize):c("spacesAndTabsSize","Spaces: {0} (Tab Size: {1})",r.indentSize,r.tabSize):c({key:"tabSize",comment:["Tab corresponds to the tab key"]},"Tab Size: {0}",r.tabSize)}}this.updateState(n)}onMetadataChange(t){let n={type:"metadata",metadata:void 0};(t instanceof vr||t instanceof nd)&&(n.metadata=t.getMetadata()),this.updateState(n)}onColumnSelectionModeChange(t){let n={type:"columnSelectionMode",columnSelectionMode:!1};t?.getOption(22)&&(n.columnSelectionMode=!0),this.updateState(n)}onSelectionChange(t){let n=Object.create(null);if(t){n.selections=t.getSelections()||[],n.charactersSelected=0;let i=t.getModel();if(i)for(let r of n.selections)typeof n.charactersSelected!="number"&&(n.charactersSelected=0),n.charactersSelected+=i.getCharacterCountInRange(r);if(n.selections.length===1){let r=t.getPosition(),s=new Je(n.selections[0].selectionStartLineNumber,n.selections[0].selectionStartColumn,n.selections[0].positionLineNumber,r?t.getStatusbarColumn(r):n.selections[0].positionColumn);n.selections[0]=s}}this.updateState({type:"selectionStatus",selectionStatus:this.getSelectionLabel(n)})}onEOLChange(t){let n={type:"EOL",EOL:void 0};if(t&&!t.getOption(93)){let i=t.getModel();i&&(n.EOL=i.getEOL())}this.updateState(n)}onEncodingChange(t,n){if(t&&!this.isActiveEditor(t))return;let i={type:"encoding",encoding:void 0};if(t&&n?.hasModel()){let r=t.input?gf(t.input):null;if(r){let s=r.getEncoding(),a=typeof s=="string"?Zo[s]:void 0;a?i.encoding=a.labelShort:i.encoding=s}}this.updateState(i)}onResourceEncodingChange(t){let n=this.editorService.activeEditorPane;if(n){let i=eo.getCanonicalUri(n.input,{supportSideBySide:1});if(i&&fn(i,t)){let r=Ks(n.getControl())??void 0;return this.onEncodingChange(n,r)}}}onTabFocusModeChange(t){let n={type:"tabFocusMode",tabFocusMode:t};this.updateState(n)}isActiveEditor(t){let n=this.editorService.activeEditorPane;return!!n&&n===t}};hf=k([I(1,Xt),I(2,es),I(3,Pi),I(4,Jo),I(5,Sr),I(6,Ze),I(7,He)],hf);var cx=class extends N{constructor(t){super();this.editorGroupService=t;for(let n of t.parts)this.createEditorStatus(n);this._register(t.onDidCreateAuxiliaryEditorPart(n=>this.createEditorStatus(n)))}static ID="workbench.contrib.editorStatus";createEditorStatus(t){let n=new Y;G.once(t.onWillDispose)(()=>n.dispose());let i=this.editorGroupService.getScopedInstantiationService(t);n.add(i.createInstance(hf,t.windowId))}};cx=k([I(0,Ul)],cx);var mf=class extends N{constructor(t,n,i){super();this.statusbarService=t;this.markerService=n;this.configurationService=i;this.statusBarEntryAccessor=this._register(new ot),this._register(n.onMarkerChanged(r=>this.onMarkerChanged(r))),this._register(G.filter(i.onDidChangeConfiguration,r=>r.affectsConfiguration("problems.showCurrentInStatus"))(()=>this.updateStatus()))}statusBarEntryAccessor;editor=void 0;markers=[];currentMarker=null;update(t){this.editor=t,this.updateMarkers(),this.updateStatus()}updateStatus(){let t=this.currentMarker;if(this.currentMarker=this.getMarker(),this.hasToUpdateStatus(t,this.currentMarker))if(this.currentMarker){let n=iu(this.currentMarker.message)[0],i=`${this.getType(this.currentMarker)} ${n}`;this.statusBarEntryAccessor.value||(this.statusBarEntryAccessor.value=this.statusbarService.addEntry({name:c("currentProblem","Current Problem"),text:"",ariaLabel:""},"statusbar.currentProblem",0)),this.statusBarEntryAccessor.value.update({name:c("currentProblem","Current Problem"),text:i,ariaLabel:i})}else this.statusBarEntryAccessor.clear()}hasToUpdateStatus(t,n){return!n||!t?!0:cv.makeKey(t)!==cv.makeKey(n)}getType(t){switch(t.severity){case 8:return"$(error)";case 4:return"$(warning)";case 2:return"$(info)"}return""}getMarker(){if(!this.configurationService.getValue("problems.showCurrentInStatus")||!this.editor||!this.editor.getModel())return null;let n=this.editor.getPosition();return n&&this.markers.find(i=>P.containsPosition(i,n))||null}onMarkerChanged(t){if(!this.editor)return;let n=this.editor.getModel();n&&(n&&!t.some(i=>fn(n.uri,i))||this.updateMarkers())}updateMarkers(){if(!this.editor)return;let t=this.editor.getModel();t&&(t?(this.markers=this.markerService.read({resource:t.uri,severities:14}),this.markers.sort(this.compareMarker)):this.markers=[],this.updateStatus())}compareMarker(t,n){let i=Rh(t.resource.toString(),n.resource.toString());return i===0&&(i=Hd.compare(t.severity,n.severity)),i===0&&(i=P.compareRangesUsingStarts(t,n)),i}};mf=k([I(0,Sr),I(1,uv),I(2,He)],mf);var Bc=class extends Ii{constructor(t,n,i){super(Bc.ID,c("showLanguageExtensions","Search Marketplace Extensions for '{0}'...",t));this.fileExtension=t;this.commandService=n;this.enabled=i.isEnabled()}static ID="workbench.action.showLanguageExtensions";async run(){await this.commandService.executeCommand("workbench.extensions.action.showExtensionsForLanguage",this.fileExtension)}};Bc=k([I(1,Ci),I(2,wN)],Bc);var iF=class o extends et{static ID="workbench.action.editor.changeLanguageMode";constructor(){super({id:o.ID,title:ue("changeMode","Change Language Mode"),f1:!0,keybinding:{weight:200,primary:rr(2089,43)},precondition:$.not("notebookEditorFocused"),metadata:{description:c("changeLanguageMode.description","Change the language mode of the active text editor."),args:[{name:c("changeLanguageMode.arg.name","The name of the language mode to change to."),constraint:e=>typeof e=="string"}]}})}async run(e,t){let n=e.get(es),i=e.get(Xt),r=e.get(Pi),s=e.get(Al),a=e.get(Jo),l=e.get(cg),d=e.get(Ze),u=e.get(He),p=e.get($t),h=Ks(i.activeTextEditorControl);if(!h){await n.pick([{label:c("noEditor","No text editor active at this time")}]);return}let m=h.getModel(),g=eo.getOriginalUri(i.activeEditor,{supportSideBySide:1}),f,y;m&&(y=m.getLanguageId(),f=r.getLanguageName(y)??void 0);let C=!!g;g?.scheme===me.untitled&&!a.untitled.get(g)?.hasAssociatedFilePath&&(C=!1);let R=r.getSortedRegisteredLanguageNames().map(({languageName:ge,languageId:we})=>{let ht=r.getExtensions(we).join(" "),tt;return f===ge?tt=c("languageDescription","({0}) - Configured Language",we):tt=c("languageDescriptionConfigured","({0})",we),{label:ge,meta:ht,iconClasses:Y1(we),description:tt}});R.unshift({type:"separator",label:c("languagesPicks","languages (identifier)")});let _,B,K;if(C&&g){let ge=Ad(g)||Ri(g);K=d.createInstance(Bc,ge),K.enabled&&R.unshift(K),B={label:c("configureModeSettings","Configure '{0}' language based settings...",f)},R.unshift(B),_={label:c("configureAssociationsExt","Configure File Association for '{0}'...",ge)},R.unshift(_)}let F={label:c("autoDetect","Auto Detect")};R.unshift(F);let V=typeof t=="string"?{label:t}:await n.pick(R,{placeHolder:c("pickLanguage","Select Language Mode"),matchOnDescription:!0});if(!V)return;if(V===K){K.run();return}if(V===_){g&&this.configureFileAssociation(g,r,n,u);return}if(V===B){l.openUserSettings({jsonEditor:!0,revealSetting:{key:`[${y??null}]`,edit:!0}});return}let oe=i.activeEditor;if(oe){let ge=ux(oe);if(ge){let we,ht;if(V===F){if(m){let tt=eo.getOriginalUri(oe,{supportSideBySide:1});if(tt){let gt=r.guessLanguageIdByFilepathOrFirstLine(tt,m.getLineContent(1))??void 0;(!gt||gt==="unknown")&&(ht=await s.detectLanguage(tt),gt=ht),gt&&(we=r.createById(gt))}}}else{let tt=r.getLanguageIdByLanguageName(V.label);we=r.createById(tt),g&&s.detectLanguage(g).then(gt=>{let ve=r.getLanguageIdByLanguageName(V.label)||"unknown";if(gt===y&&y!==ve){let se=u.getValue("workbench.editor.preferHistoryBasedLanguageDetection")?"history":"classic";p.publicLog2(BR,{currentLanguageId:f??"unknown",nextLanguageId:V.label,lineCount:m?.getLineCount()??-1,modelPreference:se})}})}if(typeof we<"u"&&(ge.setLanguageId(we.languageId,o.ID),g?.scheme===me.untitled)){let tt=u.getValue("workbench.editor.preferHistoryBasedLanguageDetection")?"history":"classic";p.publicLog2("setUntitledDocumentLanguage",{to:we.languageId,from:y??"none",modelPreference:tt})}}h.focus()}}configureFileAssociation(e,t,n,i){let r=Ad(e),s=Ri(e),a=t.guessLanguageIdByFilepathOrFirstLine(j.file(s)),d=t.getSortedRegisteredLanguageNames().map(({languageName:u,languageId:p})=>({id:p,label:u,iconClasses:Y1(p),description:p===a?c("currentAssociation","Current Association"):void 0}));setTimeout(async()=>{let u=await n.pick(d,{placeHolder:c("pickLanguageToConfigure","Select Language Mode to Associate with '{0}'",r||s)});if(u){let p=i.inspect(Tw),h;r&&s[0]!=="."?h=`*${r}`:h=s;let m=2;p.workspaceValue&&p.workspaceValue[h]&&(m=5);let g=gu(m===5?p.workspaceValue:p.userValue)||Object.create(null);g[h]=u.id,i.updateValue(Tw,g,m)}},50)}},oF=class extends et{constructor(){super({id:"workbench.action.editor.changeEOL",title:ue("changeEndOfLine","Change End of Line Sequence"),f1:!0})}async run(e){let t=e.get(Xt),n=e.get(es),i=Ks(t.activeTextEditorControl);if(!i){await n.pick([{label:c("noEditor","No text editor active at this time")}]);return}if(t.activeEditor?.isReadonly()){await n.pick([{label:c("noWritableCodeEditor","The active code editor is read-only.")}]);return}let r=i.getModel(),s=[{label:sF,eol:0},{label:aF,eol:1}],a=r?.getEOL()===`
`?0:1,l=await n.pick(s,{placeHolder:c("pickEndOfLine","Select End of Line Sequence"),activeItem:s[a]});if(l){let d=Ks(t.activeTextEditorControl);d?.hasModel()&&!t.activeEditor?.isReadonly()&&(r=d.getModel(),r.pushStackElement(),r.pushEOL(l.eol),r.pushStackElement())}i.focus()}},rF=class extends et{constructor(){super({id:"workbench.action.editor.changeEncoding",title:ue("changeEncoding","Change File Encoding"),f1:!0})}async run(e){let t=e.get(Xt),n=e.get(es),i=e.get(Ut),r=e.get(Jo),s=e.get(ii),a=Ks(t.activeTextEditorControl);if(!a){await n.pick([{label:c("noEditor","No text editor active at this time")}]);return}let l=t.activeEditorPane;if(!l){await n.pick([{label:c("noEditor","No text editor active at this time")}]);return}let d=gf(l.input);if(!d){await n.pick([{label:c("noFileEditor","No file active at this time")}]);return}let u={label:c("saveWithEncoding","Save with Encoding")},p={label:c("reopenWithEncoding","Reopen with Encoding")};if(!Cf.isDefaultVariant()){let F="Save with Encoding";F!==u.label&&(u.detail=F);let V="Reopen with Encoding";V!==p.label&&(p.detail=V)}let h;if(d instanceof Yr?h=u:l.input.isReadonly()?h=p:h=await n.pick([p,u],{placeHolder:c("pickAction","Select Action"),matchOnDetail:!0}),!h)return;await $i(50);let m=eo.getOriginalUri(l.input,{supportSideBySide:1});if(!m||!i.hasProvider(m)&&m.scheme!==me.untitled)return;let g;i.hasProvider(m)&&(g=(await r.readStream(m,{autoGuessEncoding:!0,candidateGuessEncodings:s.getValue(m,"files.candidateGuessEncodings")})).encoding);let f=h===p,y=s.getValue(m,"files.encoding"),C,w,R=Object.keys(Zo).sort((F,V)=>F===y?-1:V===y?1:Zo[F].order-Zo[V].order).filter(F=>F===g&&g!==y?!1:!f||!Zo[F].encodeOnly).map((F,V)=>(F===d.getEncoding()?C=V:Zo[F].alias===d.getEncoding()&&(w=V),{id:F,label:Zo[F].labelLong,description:F})),_=R.slice();g&&y!==g&&Zo[g]&&(R.unshift({type:"separator"}),R.unshift({id:g,label:Zo[g].labelLong,description:c("guessedEncoding","Guessed from content")}));let B=await n.pick(R,{placeHolder:f?c("pickEncodingForReopen","Select File Encoding to Reopen File"):c("pickEncodingForSave","Select File Encoding to Save with"),activeItem:_[typeof C=="number"?C:typeof w=="number"?w:-1]});if(!B||!t.activeEditorPane)return;let K=gf(t.activeEditorPane.input);typeof B.id<"u"&&K&&await K.setEncoding(B.id,f?1:0),a.focus()}};export{oF as ChangeEOLAction,rF as ChangeEncodingAction,iF as ChangeLanguageAction,cx as EditorStatusContribution,Bc as ShowLanguageExtensionsAction};
