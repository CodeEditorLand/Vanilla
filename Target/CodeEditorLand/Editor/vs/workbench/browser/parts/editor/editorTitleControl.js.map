{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/browser/parts/editor/editorTitleControl.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/editortitlecontrol.css';\nimport { Dimension, clearNode } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IThemeService, Themable } from '../../../../platform/theme/common/themeService.js';\nimport { BreadcrumbsControl, BreadcrumbsControlFactory } from './breadcrumbsControl.js';\nimport { IEditorGroupsView, IEditorGroupTitleHeight, IEditorGroupView, IEditorPartsView, IInternalEditorOpenOptions } from './editor.js';\nimport { IEditorTabsControl } from './editorTabsControl.js';\nimport { MultiEditorTabsControl } from './multiEditorTabsControl.js';\nimport { SingleEditorTabsControl } from './singleEditorTabsControl.js';\nimport { IEditorPartOptions } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MultiRowEditorControl } from './multiRowEditorTabsControl.js';\nimport { IReadonlyEditorGroupModel } from '../../../common/editor/editorGroupModel.js';\nimport { NoEditorTabsControl } from './noEditorTabsControl.js';\n\nexport interface IEditorTitleControlDimensions {\n\n\t/**\n\t * The size of the parent container the title control is layed out in.\n\t */\n\treadonly container: Dimension;\n\n\t/**\n\t * The maximum size the title control is allowed to consume based on\n\t * other controls that are positioned inside the container.\n\t */\n\treadonly available: Dimension;\n}\n\nexport class EditorTitleControl extends Themable {\n\n\tprivate editorTabsControl: IEditorTabsControl;\n\tprivate readonly editorTabsControlDisposable = this._register(new DisposableStore());\n\n\tprivate breadcrumbsControlFactory: BreadcrumbsControlFactory | undefined;\n\tprivate readonly breadcrumbsControlDisposables = this._register(new DisposableStore());\n\tprivate get breadcrumbsControl() { return this.breadcrumbsControlFactory?.control; }\n\n\tconstructor(\n\t\tprivate readonly parent: HTMLElement,\n\t\tprivate readonly editorPartsView: IEditorPartsView,\n\t\tprivate readonly groupsView: IEditorGroupsView,\n\t\tprivate readonly groupView: IEditorGroupView,\n\t\tprivate readonly model: IReadonlyEditorGroupModel,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService\n\t) {\n\t\tsuper(themeService);\n\n\t\tthis.editorTabsControl = this.createEditorTabsControl();\n\t\tthis.breadcrumbsControlFactory = this.createBreadcrumbsControl();\n\t}\n\n\tprivate createEditorTabsControl(): IEditorTabsControl {\n\t\tlet tabsControlType;\n\t\tswitch (this.groupsView.partOptions.showTabs) {\n\t\t\tcase 'none':\n\t\t\t\ttabsControlType = NoEditorTabsControl;\n\t\t\t\tbreak;\n\t\t\tcase 'single':\n\t\t\t\ttabsControlType = SingleEditorTabsControl;\n\t\t\t\tbreak;\n\t\t\tcase 'multiple':\n\t\t\tdefault:\n\t\t\t\ttabsControlType = this.groupsView.partOptions.pinnedTabsOnSeparateRow ? MultiRowEditorControl : MultiEditorTabsControl;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst control = this.instantiationService.createInstance(tabsControlType, this.parent, this.editorPartsView, this.groupsView, this.groupView, this.model);\n\t\treturn this.editorTabsControlDisposable.add(control);\n\t}\n\n\tprivate createBreadcrumbsControl(): BreadcrumbsControlFactory | undefined {\n\t\tif (this.groupsView.partOptions.showTabs === 'single') {\n\t\t\treturn undefined; // Single tabs have breadcrumbs inlined. No tabs have no breadcrumbs.\n\t\t}\n\n\t\t// Breadcrumbs container\n\t\tconst breadcrumbsContainer = document.createElement('div');\n\t\tbreadcrumbsContainer.classList.add('breadcrumbs-below-tabs');\n\t\tthis.parent.appendChild(breadcrumbsContainer);\n\n\t\tconst breadcrumbsControlFactory = this.breadcrumbsControlDisposables.add(this.instantiationService.createInstance(BreadcrumbsControlFactory, breadcrumbsContainer, this.groupView, {\n\t\t\tshowFileIcons: true,\n\t\t\tshowSymbolIcons: true,\n\t\t\tshowDecorationColors: false,\n\t\t\tshowPlaceholder: true\n\t\t}));\n\n\t\t// Breadcrumbs enablement & visibility change have an impact on layout\n\t\t// so we need to relayout the editor group when that happens.\n\t\tthis.breadcrumbsControlDisposables.add(breadcrumbsControlFactory.onDidEnablementChange(() => this.groupView.relayout()));\n\t\tthis.breadcrumbsControlDisposables.add(breadcrumbsControlFactory.onDidVisibilityChange(() => this.groupView.relayout()));\n\n\t\treturn breadcrumbsControlFactory;\n\t}\n\n\topenEditor(editor: EditorInput, options?: IInternalEditorOpenOptions): void {\n\t\tconst didChange = this.editorTabsControl.openEditor(editor, options);\n\n\t\tthis.handleOpenedEditors(didChange);\n\t}\n\n\topenEditors(editors: EditorInput[]): void {\n\t\tconst didChange = this.editorTabsControl.openEditors(editors);\n\n\t\tthis.handleOpenedEditors(didChange);\n\t}\n\n\tprivate handleOpenedEditors(didChange: boolean): void {\n\t\tif (didChange) {\n\t\t\tthis.breadcrumbsControl?.update();\n\t\t} else {\n\t\t\tthis.breadcrumbsControl?.revealLast();\n\t\t}\n\t}\n\n\tbeforeCloseEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.beforeCloseEditor(editor);\n\t}\n\n\tcloseEditor(editor: EditorInput): void {\n\t\tthis.editorTabsControl.closeEditor(editor);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tcloseEditors(editors: EditorInput[]): void {\n\t\tthis.editorTabsControl.closeEditors(editors);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tprivate handleClosedEditors(): void {\n\t\tif (!this.groupView.activeEditor) {\n\t\t\tthis.breadcrumbsControl?.update();\n\t\t}\n\t}\n\n\tmoveEditor(editor: EditorInput, fromIndex: number, targetIndex: number, stickyStateChange: boolean): void {\n\t\treturn this.editorTabsControl.moveEditor(editor, fromIndex, targetIndex, stickyStateChange);\n\t}\n\n\tpinEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.pinEditor(editor);\n\t}\n\n\tstickEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.stickEditor(editor);\n\t}\n\n\tunstickEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.unstickEditor(editor);\n\t}\n\n\tsetActive(isActive: boolean): void {\n\t\treturn this.editorTabsControl.setActive(isActive);\n\t}\n\n\tupdateEditorSelections(): void {\n\t\tthis.editorTabsControl.updateEditorSelections();\n\t}\n\n\tupdateEditorLabel(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.updateEditorLabel(editor);\n\t}\n\n\tupdateEditorDirty(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.updateEditorDirty(editor);\n\t}\n\n\tupdateOptions(oldOptions: IEditorPartOptions, newOptions: IEditorPartOptions): void {\n\t\t// Update editor tabs control if options changed\n\t\tif (\n\t\t\toldOptions.showTabs !== newOptions.showTabs ||\n\t\t\t(newOptions.showTabs !== 'single' && oldOptions.pinnedTabsOnSeparateRow !== newOptions.pinnedTabsOnSeparateRow)\n\t\t) {\n\t\t\t// Clear old\n\t\t\tthis.editorTabsControlDisposable.clear();\n\t\t\tthis.breadcrumbsControlDisposables.clear();\n\t\t\tclearNode(this.parent);\n\n\t\t\t// Create new\n\t\t\tthis.editorTabsControl = this.createEditorTabsControl();\n\t\t\tthis.breadcrumbsControlFactory = this.createBreadcrumbsControl();\n\t\t}\n\n\t\t// Forward into editor tabs control\n\t\telse {\n\t\t\tthis.editorTabsControl.updateOptions(oldOptions, newOptions);\n\t\t}\n\t}\n\n\tlayout(dimensions: IEditorTitleControlDimensions): Dimension {\n\n\t\t// Layout tabs control\n\t\tconst tabsControlDimension = this.editorTabsControl.layout(dimensions);\n\n\t\t// Layout breadcrumbs if visible\n\t\tlet breadcrumbsControlDimension: Dimension | undefined = undefined;\n\t\tif (this.breadcrumbsControl?.isHidden() === false) {\n\t\t\tbreadcrumbsControlDimension = new Dimension(dimensions.container.width, BreadcrumbsControl.HEIGHT);\n\t\t\tthis.breadcrumbsControl.layout(breadcrumbsControlDimension);\n\t\t}\n\n\t\treturn new Dimension(\n\t\t\tdimensions.container.width,\n\t\t\ttabsControlDimension.height + (breadcrumbsControlDimension ? breadcrumbsControlDimension.height : 0)\n\t\t);\n\t}\n\n\tgetHeight(): IEditorGroupTitleHeight {\n\t\tconst tabsControlHeight = this.editorTabsControl.getHeight();\n\t\tconst breadcrumbsControlHeight = this.breadcrumbsControl?.isHidden() === false ? BreadcrumbsControl.HEIGHT : 0;\n\n\t\treturn {\n\t\t\ttotal: tabsControlHeight + breadcrumbsControlHeight,\n\t\t\toffset: tabsControlHeight\n\t\t};\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
