{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/browser/parts/editor/breadcrumbsControl.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport { StandardMouseEvent } from \"../../../../base/browser/mouseEvent.js\";\nimport {\n\tBreadcrumbsItem,\n\tBreadcrumbsWidget,\n\ttype IBreadcrumbsItemEvent,\n\ttype IBreadcrumbsWidgetStyles,\n} from \"../../../../base/browser/ui/breadcrumbs/breadcrumbsWidget.js\";\nimport { tail } from \"../../../../base/common/arrays.js\";\nimport { timeout } from \"../../../../base/common/async.js\";\nimport { KeyCode, KeyMod } from \"../../../../base/common/keyCodes.js\";\nimport {\n\tDisposableStore,\n\tMutableDisposable,\n\tcombinedDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { extUri } from \"../../../../base/common/resources.js\";\nimport { URI } from \"../../../../base/common/uri.js\";\nimport \"./media/breadcrumbscontrol.css\";\nimport { PixelRatio } from \"../../../../base/browser/pixelRatio.js\";\nimport type { IHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegate.js\";\nimport { getDefaultHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegateFactory.js\";\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport { Emitter } from \"../../../../base/common/event.js\";\nimport { localize, localize2 } from \"../../../../nls.js\";\nimport { Categories } from \"../../../../platform/action/common/actionCommonCategories.js\";\nimport {\n\tAction2,\n\tMenuId,\n\tregisterAction2,\n} from \"../../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\tContextKeyExpr,\n\ttype IContextKey,\n\tIContextKeyService,\n\tRawContextKey,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextViewService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport {\n\tFileKind,\n\tIFileService,\n\ttype IFileStat,\n} from \"../../../../platform/files/common/files.js\";\nimport {\n\tIInstantiationService,\n\ttype ServicesAccessor,\n} from \"../../../../platform/instantiation/common/instantiation.js\";\nimport {\n\tKeybindingWeight,\n\tKeybindingsRegistry,\n} from \"../../../../platform/keybinding/common/keybindingsRegistry.js\";\nimport { ILabelService } from \"../../../../platform/label/common/label.js\";\nimport {\n\tIListService,\n\tWorkbenchAsyncDataTree,\n\tWorkbenchDataTree,\n\tWorkbenchListFocusContextKey,\n} from \"../../../../platform/list/browser/listService.js\";\nimport { IQuickInputService } from \"../../../../platform/quickinput/common/quickInput.js\";\nimport { defaultBreadcrumbsWidgetStyles } from \"../../../../platform/theme/browser/defaultStyles.js\";\nimport { registerIcon } from \"../../../../platform/theme/common/iconRegistry.js\";\nimport {\n\tEditorResourceAccessor,\n\ttype IEditorPartOptions,\n\tSideBySideEditor,\n} from \"../../../common/editor.js\";\nimport { IEditorGroupsService } from \"../../../services/editor/common/editorGroupsService.js\";\nimport {\n\tACTIVE_GROUP,\n\ttype ACTIVE_GROUP_TYPE,\n\tIEditorService,\n\tSIDE_GROUP,\n\ttype SIDE_GROUP_TYPE,\n} from \"../../../services/editor/common/editorService.js\";\nimport type { IOutline } from \"../../../services/outline/browser/outline.js\";\nimport { DEFAULT_LABELS_CONTAINER, ResourceLabels } from \"../../labels.js\";\nimport { BreadcrumbsConfig, IBreadcrumbsService } from \"./breadcrumbs.js\";\nimport {\n\tBreadcrumbsModel,\n\tFileElement,\n\tOutlineElement2,\n} from \"./breadcrumbsModel.js\";\nimport {\n\tBreadcrumbsFilePicker,\n\tBreadcrumbsOutlinePicker,\n\ttype BreadcrumbsPicker,\n} from \"./breadcrumbsPicker.js\";\nimport type { IEditorGroupView } from \"./editor.js\";\n\nclass OutlineItem extends BreadcrumbsItem {\n\tprivate readonly _disposables = new DisposableStore();\n\n\tconstructor(\n\t\treadonly model: BreadcrumbsModel,\n\t\treadonly element: OutlineElement2,\n\t\treadonly options: IBreadcrumbsControlOptions,\n\t) {\n\t\tsuper();\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t}\n\n\tequals(other: BreadcrumbsItem): boolean {\n\t\tif (!(other instanceof OutlineItem)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (\n\t\t\tthis.element.element === other.element.element &&\n\t\t\tthis.options.showFileIcons === other.options.showFileIcons &&\n\t\t\tthis.options.showSymbolIcons === other.options.showSymbolIcons\n\t\t);\n\t}\n\n\trender(container: HTMLElement): void {\n\t\tconst { element, outline } = this.element;\n\n\t\tif (element === outline) {\n\t\t\tconst element = dom.$(\"span\", undefined, \"\u2026\");\n\t\t\tcontainer.appendChild(element);\n\t\t\treturn;\n\t\t}\n\n\t\tconst templateId = outline.config.delegate.getTemplateId(element);\n\t\tconst renderer = outline.config.renderers.find(\n\t\t\t(renderer) => renderer.templateId === templateId,\n\t\t);\n\t\tif (!renderer) {\n\t\t\tcontainer.innerText = \"<<NO RENDERER>>\";\n\t\t\treturn;\n\t\t}\n\n\t\tconst template = renderer.renderTemplate(container);\n\t\trenderer.renderElement(\n\t\t\t{\n\t\t\t\telement,\n\t\t\t\tchildren: [],\n\t\t\t\tdepth: 0,\n\t\t\t\tvisibleChildrenCount: 0,\n\t\t\t\tvisibleChildIndex: 0,\n\t\t\t\tcollapsible: false,\n\t\t\t\tcollapsed: false,\n\t\t\t\tvisible: true,\n\t\t\t\tfilterData: undefined,\n\t\t\t},\n\t\t\t0,\n\t\t\ttemplate,\n\t\t\tundefined,\n\t\t);\n\n\t\tthis._disposables.add(\n\t\t\ttoDisposable(() => {\n\t\t\t\trenderer.disposeTemplate(template);\n\t\t\t}),\n\t\t);\n\t}\n}\n\nclass FileItem extends BreadcrumbsItem {\n\tprivate readonly _disposables = new DisposableStore();\n\n\tconstructor(\n\t\treadonly model: BreadcrumbsModel,\n\t\treadonly element: FileElement,\n\t\treadonly options: IBreadcrumbsControlOptions,\n\t\tprivate readonly _labels: ResourceLabels,\n\t\tprivate readonly _hoverDelegate: IHoverDelegate,\n\t) {\n\t\tsuper();\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t}\n\n\tequals(other: BreadcrumbsItem): boolean {\n\t\tif (!(other instanceof FileItem)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (\n\t\t\textUri.isEqual(this.element.uri, other.element.uri) &&\n\t\t\tthis.options.showFileIcons === other.options.showFileIcons &&\n\t\t\tthis.options.showSymbolIcons === other.options.showSymbolIcons\n\t\t);\n\t}\n\n\trender(container: HTMLElement): void {\n\t\t// file/folder\n\t\tconst label = this._labels.create(container, {\n\t\t\thoverDelegate: this._hoverDelegate,\n\t\t});\n\t\tlabel.setFile(this.element.uri, {\n\t\t\thidePath: true,\n\t\t\thideIcon:\n\t\t\t\tthis.element.kind === FileKind.FOLDER ||\n\t\t\t\t!this.options.showFileIcons,\n\t\t\tfileKind: this.element.kind,\n\t\t\tfileDecorations: {\n\t\t\t\tcolors: this.options.showDecorationColors,\n\t\t\t\tbadges: false,\n\t\t\t},\n\t\t});\n\t\tcontainer.classList.add(FileKind[this.element.kind].toLowerCase());\n\t\tthis._disposables.add(label);\n\t}\n}\n\nexport interface IBreadcrumbsControlOptions {\n\treadonly showFileIcons: boolean;\n\treadonly showSymbolIcons: boolean;\n\treadonly showDecorationColors: boolean;\n\treadonly showPlaceholder: boolean;\n\treadonly widgetStyles?: IBreadcrumbsWidgetStyles;\n}\n\nconst separatorIcon = registerIcon(\n\t\"breadcrumb-separator\",\n\tCodicon.chevronRight,\n\tlocalize(\"separatorIcon\", \"Icon for the separator in the breadcrumbs.\"),\n);\n\nexport class BreadcrumbsControl {\n\tstatic readonly HEIGHT = 22;\n\n\tprivate static readonly SCROLLBAR_SIZES = {\n\t\tdefault: 3,\n\t\tlarge: 8,\n\t};\n\n\tstatic readonly Payload_Reveal = {};\n\tstatic readonly Payload_RevealAside = {};\n\tstatic readonly Payload_Pick = {};\n\n\tstatic readonly CK_BreadcrumbsPossible = new RawContextKey(\n\t\t\"breadcrumbsPossible\",\n\t\tfalse,\n\t\tlocalize(\n\t\t\t\"breadcrumbsPossible\",\n\t\t\t\"Whether the editor can show breadcrumbs\",\n\t\t),\n\t);\n\tstatic readonly CK_BreadcrumbsVisible = new RawContextKey(\n\t\t\"breadcrumbsVisible\",\n\t\tfalse,\n\t\tlocalize(\n\t\t\t\"breadcrumbsVisible\",\n\t\t\t\"Whether breadcrumbs are currently visible\",\n\t\t),\n\t);\n\tstatic readonly CK_BreadcrumbsActive = new RawContextKey(\n\t\t\"breadcrumbsActive\",\n\t\tfalse,\n\t\tlocalize(\"breadcrumbsActive\", \"Whether breadcrumbs have focus\"),\n\t);\n\n\tprivate readonly _ckBreadcrumbsPossible: IContextKey<boolean>;\n\tprivate readonly _ckBreadcrumbsVisible: IContextKey<boolean>;\n\tprivate readonly _ckBreadcrumbsActive: IContextKey<boolean>;\n\n\tprivate readonly _cfUseQuickPick: BreadcrumbsConfig<boolean>;\n\tprivate readonly _cfShowIcons: BreadcrumbsConfig<boolean>;\n\tprivate readonly _cfTitleScrollbarSizing: BreadcrumbsConfig<\n\t\tIEditorPartOptions[\"titleScrollbarSizing\"]\n\t>;\n\n\treadonly domNode: HTMLDivElement;\n\tprivate readonly _widget: BreadcrumbsWidget;\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _breadcrumbsDisposables = new DisposableStore();\n\tprivate readonly _labels: ResourceLabels;\n\tprivate readonly _model = new MutableDisposable<BreadcrumbsModel>();\n\tprivate _breadcrumbsPickerShowing = false;\n\tprivate _breadcrumbsPickerIgnoreOnceItem: BreadcrumbsItem | undefined;\n\n\tprivate readonly _hoverDelegate: IHoverDelegate;\n\n\tprivate readonly _onDidVisibilityChange = this._disposables.add(\n\t\tnew Emitter<void>(),\n\t);\n\tget onDidVisibilityChange() {\n\t\treturn this._onDidVisibilityChange.event;\n\t}\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate readonly _options: IBreadcrumbsControlOptions,\n\t\tprivate readonly _editorGroup: IEditorGroupView,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IContextViewService private readonly _contextViewService: IContextViewService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IBreadcrumbsService breadcrumbsService: IBreadcrumbsService\n\t) {\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.classList.add('breadcrumbs-control');\n\t\tdom.append(container, this.domNode);\n\n\t\tthis._cfUseQuickPick = BreadcrumbsConfig.UseQuickPick.bindTo(configurationService);\n\t\tthis._cfShowIcons = BreadcrumbsConfig.Icons.bindTo(configurationService);\n\t\tthis._cfTitleScrollbarSizing = BreadcrumbsConfig.TitleScrollbarSizing.bindTo(configurationService);\n\n\t\tthis._labels = this._instantiationService.createInstance(ResourceLabels, DEFAULT_LABELS_CONTAINER);\n\n\t\tconst sizing = this._cfTitleScrollbarSizing.getValue() ?? 'default';\n\t\tconst styles = _options.widgetStyles ?? defaultBreadcrumbsWidgetStyles;\n\t\tthis._widget = new BreadcrumbsWidget(this.domNode, BreadcrumbsControl.SCROLLBAR_SIZES[sizing], separatorIcon, styles);\n\t\tthis._widget.onDidSelectItem(this._onSelectEvent, this, this._disposables);\n\t\tthis._widget.onDidFocusItem(this._onFocusEvent, this, this._disposables);\n\t\tthis._widget.onDidChangeFocus(this._updateCkBreadcrumbsActive, this, this._disposables);\n\n\t\tthis._ckBreadcrumbsPossible = BreadcrumbsControl.CK_BreadcrumbsPossible.bindTo(this._contextKeyService);\n\t\tthis._ckBreadcrumbsVisible = BreadcrumbsControl.CK_BreadcrumbsVisible.bindTo(this._contextKeyService);\n\t\tthis._ckBreadcrumbsActive = BreadcrumbsControl.CK_BreadcrumbsActive.bindTo(this._contextKeyService);\n\n\t\tthis._hoverDelegate = getDefaultHoverDelegate('mouse');\n\n\t\tthis._disposables.add(breadcrumbsService.register(this._editorGroup.id, this._widget));\n\t\tthis.hide();\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tthis._breadcrumbsDisposables.dispose();\n\t\tthis._ckBreadcrumbsPossible.reset();\n\t\tthis._ckBreadcrumbsVisible.reset();\n\t\tthis._ckBreadcrumbsActive.reset();\n\t\tthis._cfUseQuickPick.dispose();\n\t\tthis._cfShowIcons.dispose();\n\t\tthis._widget.dispose();\n\t\tthis._labels.dispose();\n\t\tthis.domNode.remove();\n\t}\n\n\tget model(): BreadcrumbsModel | undefined {\n\t\treturn this._model.value;\n\t}\n\n\tlayout(dim: dom.Dimension | undefined): void {\n\t\tthis._widget.layout(dim);\n\t}\n\n\tisHidden(): boolean {\n\t\treturn this.domNode.classList.contains(\"hidden\");\n\t}\n\n\thide(): void {\n\t\tconst wasHidden = this.isHidden();\n\n\t\tthis._breadcrumbsDisposables.clear();\n\t\tthis._ckBreadcrumbsVisible.set(false);\n\t\tthis.domNode.classList.toggle(\"hidden\", true);\n\n\t\tif (!wasHidden) {\n\t\t\tthis._onDidVisibilityChange.fire();\n\t\t}\n\t}\n\n\tprivate show(): void {\n\t\tconst wasHidden = this.isHidden();\n\n\t\tthis._ckBreadcrumbsVisible.set(true);\n\t\tthis.domNode.classList.toggle(\"hidden\", false);\n\n\t\tif (wasHidden) {\n\t\t\tthis._onDidVisibilityChange.fire();\n\t\t}\n\t}\n\n\trevealLast(): void {\n\t\tthis._widget.revealLast();\n\t}\n\n\tupdate(): boolean {\n\t\tthis._breadcrumbsDisposables.clear();\n\n\t\t// honor diff editors and such\n\t\tconst uri = EditorResourceAccessor.getCanonicalUri(\n\t\t\tthis._editorGroup.activeEditor,\n\t\t\t{ supportSideBySide: SideBySideEditor.PRIMARY },\n\t\t);\n\t\tconst wasHidden = this.isHidden();\n\n\t\tif (!uri || !this._fileService.hasProvider(uri)) {\n\t\t\t// cleanup and return when there is no input or when\n\t\t\t// we cannot handle this input\n\t\t\tthis._ckBreadcrumbsPossible.set(false);\n\t\t\tif (wasHidden) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// display uri which can be derived from certain inputs\n\t\tconst fileInfoUri = EditorResourceAccessor.getOriginalUri(\n\t\t\tthis._editorGroup.activeEditor,\n\t\t\t{ supportSideBySide: SideBySideEditor.PRIMARY },\n\t\t);\n\n\t\tthis.show();\n\t\tthis._ckBreadcrumbsPossible.set(true);\n\n\t\tconst model = this._instantiationService.createInstance(\n\t\t\tBreadcrumbsModel,\n\t\t\tfileInfoUri ?? uri,\n\t\t\tthis._editorGroup.activeEditorPane,\n\t\t);\n\t\tthis._model.value = model;\n\n\t\tthis.domNode.classList.toggle(\n\t\t\t\"backslash-path\",\n\t\t\tthis._labelService.getSeparator(uri.scheme, uri.authority) === \"\\\\\",\n\t\t);\n\n\t\tconst updateBreadcrumbs = () => {\n\t\t\tthis.domNode.classList.toggle(\"relative-path\", model.isRelative());\n\t\t\tconst showIcons = this._cfShowIcons.getValue();\n\t\t\tconst options: IBreadcrumbsControlOptions = {\n\t\t\t\t...this._options,\n\t\t\t\tshowFileIcons: this._options.showFileIcons && showIcons,\n\t\t\t\tshowSymbolIcons: this._options.showSymbolIcons && showIcons,\n\t\t\t};\n\t\t\tconst items = model\n\t\t\t\t.getElements()\n\t\t\t\t.map((element) =>\n\t\t\t\t\telement instanceof FileElement\n\t\t\t\t\t\t? new FileItem(\n\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\t\tthis._labels,\n\t\t\t\t\t\t\t\tthis._hoverDelegate,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t: new OutlineItem(model, element, options),\n\t\t\t\t);\n\t\t\tif (items.length === 0) {\n\t\t\t\tthis._widget.setEnabled(false);\n\t\t\t\tthis._widget.setItems([\n\t\t\t\t\tnew (class extends BreadcrumbsItem {\n\t\t\t\t\t\trender(container: HTMLElement): void {\n\t\t\t\t\t\t\tcontainer.innerText = localize(\n\t\t\t\t\t\t\t\t\"empty\",\n\t\t\t\t\t\t\t\t\"no elements\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tequals(other: BreadcrumbsItem): boolean {\n\t\t\t\t\t\t\treturn other === this;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdispose(): void {}\n\t\t\t\t\t})(),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tthis._widget.setEnabled(true);\n\t\t\t\tthis._widget.setItems(items);\n\t\t\t\tthis._widget.reveal(items[items.length - 1]);\n\t\t\t}\n\t\t};\n\t\tconst listener = model.onDidUpdate(updateBreadcrumbs);\n\t\tconst configListener = this._cfShowIcons.onDidChange(updateBreadcrumbs);\n\t\tupdateBreadcrumbs();\n\t\tthis._breadcrumbsDisposables.clear();\n\t\tthis._breadcrumbsDisposables.add(listener);\n\t\tthis._breadcrumbsDisposables.add(\n\t\t\ttoDisposable(() => this._model.clear()),\n\t\t);\n\t\tthis._breadcrumbsDisposables.add(configListener);\n\t\tthis._breadcrumbsDisposables.add(\n\t\t\ttoDisposable(() => this._widget.setItems([])),\n\t\t);\n\n\t\tconst updateScrollbarSizing = () => {\n\t\t\tconst sizing = this._cfTitleScrollbarSizing.getValue() ?? \"default\";\n\t\t\tthis._widget.setHorizontalScrollbarSize(\n\t\t\t\tBreadcrumbsControl.SCROLLBAR_SIZES[sizing],\n\t\t\t);\n\t\t};\n\t\tupdateScrollbarSizing();\n\t\tconst updateScrollbarSizeListener =\n\t\t\tthis._cfTitleScrollbarSizing.onDidChange(updateScrollbarSizing);\n\t\tthis._breadcrumbsDisposables.add(updateScrollbarSizeListener);\n\n\t\t// close picker on hide/update\n\t\tthis._breadcrumbsDisposables.add({\n\t\t\tdispose: () => {\n\t\t\t\tif (this._breadcrumbsPickerShowing) {\n\t\t\t\t\tthis._contextViewService.hideContextView({ source: this });\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\treturn wasHidden !== this.isHidden();\n\t}\n\n\tprivate _onFocusEvent(event: IBreadcrumbsItemEvent): void {\n\t\tif (event.item && this._breadcrumbsPickerShowing) {\n\t\t\tthis._breadcrumbsPickerIgnoreOnceItem = undefined;\n\t\t\tthis._widget.setSelection(event.item);\n\t\t}\n\t}\n\n\tprivate _onSelectEvent(event: IBreadcrumbsItemEvent): void {\n\t\tif (!event.item) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.item === this._breadcrumbsPickerIgnoreOnceItem) {\n\t\t\tthis._breadcrumbsPickerIgnoreOnceItem = undefined;\n\t\t\tthis._widget.setFocused(undefined);\n\t\t\tthis._widget.setSelection(undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tconst { element } = event.item as FileItem | OutlineItem;\n\t\tthis._editorGroup.focus();\n\n\t\tconst group = this._getEditorGroup(event.payload);\n\t\tif (group !== undefined) {\n\t\t\t// reveal the item\n\t\t\tthis._widget.setFocused(undefined);\n\t\t\tthis._widget.setSelection(undefined);\n\t\t\tthis._revealInEditor(event, element, group);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._cfUseQuickPick.getValue()) {\n\t\t\t// using quick pick\n\t\t\tthis._widget.setFocused(undefined);\n\t\t\tthis._widget.setSelection(undefined);\n\t\t\tthis._quickInputService.quickAccess.show(\n\t\t\t\telement instanceof OutlineElement2 ? \"@\" : \"\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// show picker\n\t\tlet picker: BreadcrumbsPicker;\n\t\tlet pickerAnchor: { x: number; y: number };\n\n\t\tinterface IHideData {\n\t\t\tdidPick?: boolean;\n\t\t\tsource?: BreadcrumbsControl;\n\t\t}\n\n\t\tthis._contextViewService.showContextView({\n\t\t\trender: (parent: HTMLElement) => {\n\t\t\t\tif (event.item instanceof FileItem) {\n\t\t\t\t\tpicker = this._instantiationService.createInstance(\n\t\t\t\t\t\tBreadcrumbsFilePicker,\n\t\t\t\t\t\tparent,\n\t\t\t\t\t\tevent.item.model.resource,\n\t\t\t\t\t);\n\t\t\t\t} else if (event.item instanceof OutlineItem) {\n\t\t\t\t\tpicker = this._instantiationService.createInstance(\n\t\t\t\t\t\tBreadcrumbsOutlinePicker,\n\t\t\t\t\t\tparent,\n\t\t\t\t\t\tevent.item.model.resource,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst selectListener = picker.onWillPickElement(() =>\n\t\t\t\t\tthis._contextViewService.hideContextView({\n\t\t\t\t\t\tsource: this,\n\t\t\t\t\t\tdidPick: true,\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\tconst zoomListener = PixelRatio.getInstance(\n\t\t\t\t\tdom.getWindow(this.domNode),\n\t\t\t\t).onDidChange(() =>\n\t\t\t\t\tthis._contextViewService.hideContextView({ source: this }),\n\t\t\t\t);\n\n\t\t\t\tconst focusTracker = dom.trackFocus(parent);\n\t\t\t\tconst blurListener = focusTracker.onDidBlur(() => {\n\t\t\t\t\tthis._breadcrumbsPickerIgnoreOnceItem =\n\t\t\t\t\t\tthis._widget.isDOMFocused() ? event.item : undefined;\n\t\t\t\t\tthis._contextViewService.hideContextView({ source: this });\n\t\t\t\t});\n\n\t\t\t\tthis._breadcrumbsPickerShowing = true;\n\t\t\t\tthis._updateCkBreadcrumbsActive();\n\n\t\t\t\treturn combinedDisposable(\n\t\t\t\t\tpicker,\n\t\t\t\t\tselectListener,\n\t\t\t\t\tzoomListener,\n\t\t\t\t\tfocusTracker,\n\t\t\t\t\tblurListener,\n\t\t\t\t);\n\t\t\t},\n\t\t\tgetAnchor: () => {\n\t\t\t\tif (!pickerAnchor) {\n\t\t\t\t\tconst window = dom.getWindow(this.domNode);\n\t\t\t\t\tconst maxInnerWidth =\n\t\t\t\t\t\twindow.innerWidth - 8 /*a little less the full widget*/;\n\t\t\t\t\tlet maxHeight = Math.min(window.innerHeight * 0.7, 300);\n\n\t\t\t\t\tconst pickerWidth = Math.min(\n\t\t\t\t\t\tmaxInnerWidth,\n\t\t\t\t\t\tMath.max(240, maxInnerWidth / 4.17),\n\t\t\t\t\t);\n\t\t\t\t\tconst pickerArrowSize = 8;\n\t\t\t\t\tlet pickerArrowOffset: number;\n\n\t\t\t\t\tconst data = dom.getDomNodePagePosition(\n\t\t\t\t\t\tevent.node.firstChild as HTMLElement,\n\t\t\t\t\t);\n\t\t\t\t\tconst y = data.top + data.height + pickerArrowSize;\n\t\t\t\t\tif (y + maxHeight >= window.innerHeight) {\n\t\t\t\t\t\tmaxHeight =\n\t\t\t\t\t\t\twindow.innerHeight -\n\t\t\t\t\t\t\ty -\n\t\t\t\t\t\t\t30 /* room for shadow and status bar*/;\n\t\t\t\t\t}\n\t\t\t\t\tlet x = data.left;\n\t\t\t\t\tif (x + pickerWidth >= maxInnerWidth) {\n\t\t\t\t\t\tx = maxInnerWidth - pickerWidth;\n\t\t\t\t\t}\n\t\t\t\t\tif (event.payload instanceof StandardMouseEvent) {\n\t\t\t\t\t\tconst maxPickerArrowOffset =\n\t\t\t\t\t\t\tpickerWidth - 2 * pickerArrowSize;\n\t\t\t\t\t\tpickerArrowOffset = event.payload.posx - x;\n\t\t\t\t\t\tif (pickerArrowOffset > maxPickerArrowOffset) {\n\t\t\t\t\t\t\tx = Math.min(\n\t\t\t\t\t\t\t\tmaxInnerWidth - pickerWidth,\n\t\t\t\t\t\t\t\tx + pickerArrowOffset - maxPickerArrowOffset,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tpickerArrowOffset = maxPickerArrowOffset;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpickerArrowOffset = data.left + data.width * 0.3 - x;\n\t\t\t\t\t}\n\t\t\t\t\tpicker.show(\n\t\t\t\t\t\telement,\n\t\t\t\t\t\tmaxHeight,\n\t\t\t\t\t\tpickerWidth,\n\t\t\t\t\t\tpickerArrowSize,\n\t\t\t\t\t\tMath.max(0, pickerArrowOffset),\n\t\t\t\t\t);\n\t\t\t\t\tpickerAnchor = { x, y };\n\t\t\t\t}\n\t\t\t\treturn pickerAnchor;\n\t\t\t},\n\t\t\tonHide: (data?: IHideData) => {\n\t\t\t\tif (!data?.didPick) {\n\t\t\t\t\tpicker.restoreViewState();\n\t\t\t\t}\n\t\t\t\tthis._breadcrumbsPickerShowing = false;\n\t\t\t\tthis._updateCkBreadcrumbsActive();\n\t\t\t\tif (data?.source === this) {\n\t\t\t\t\tthis._widget.setFocused(undefined);\n\t\t\t\t\tthis._widget.setSelection(undefined);\n\t\t\t\t}\n\t\t\t\tpicker.dispose();\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate _updateCkBreadcrumbsActive(): void {\n\t\tconst value =\n\t\t\tthis._widget.isDOMFocused() || this._breadcrumbsPickerShowing;\n\t\tthis._ckBreadcrumbsActive.set(value);\n\t}\n\n\tprivate async _revealInEditor(\n\t\tevent: IBreadcrumbsItemEvent,\n\t\telement: FileElement | OutlineElement2,\n\t\tgroup: SIDE_GROUP_TYPE | ACTIVE_GROUP_TYPE | undefined,\n\t\tpinned = false,\n\t): Promise<void> {\n\t\tif (element instanceof FileElement) {\n\t\t\tif (element.kind === FileKind.FILE) {\n\t\t\t\tawait this._editorService.openEditor(\n\t\t\t\t\t{ resource: element.uri, options: { pinned } },\n\t\t\t\t\tgroup,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// show next picker\n\t\t\t\tconst items = this._widget.getItems();\n\t\t\t\tconst idx = items.indexOf(event.item);\n\t\t\t\tthis._widget.setFocused(items[idx + 1]);\n\t\t\t\tthis._widget.setSelection(\n\t\t\t\t\titems[idx + 1],\n\t\t\t\t\tBreadcrumbsControl.Payload_Pick,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\telement.outline.reveal(\n\t\t\t\telement,\n\t\t\t\t{ pinned },\n\t\t\t\tgroup === SIDE_GROUP,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _getEditorGroup(\n\t\tdata: object,\n\t): SIDE_GROUP_TYPE | ACTIVE_GROUP_TYPE | undefined {\n\t\tif (data === BreadcrumbsControl.Payload_RevealAside) {\n\t\t\treturn SIDE_GROUP;\n\t\t} else if (data === BreadcrumbsControl.Payload_Reveal) {\n\t\t\treturn ACTIVE_GROUP;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nexport class BreadcrumbsControlFactory {\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _controlDisposables = new DisposableStore();\n\n\tprivate _control: BreadcrumbsControl | undefined;\n\tget control() {\n\t\treturn this._control;\n\t}\n\n\tprivate readonly _onDidEnablementChange = this._disposables.add(\n\t\tnew Emitter<void>(),\n\t);\n\tget onDidEnablementChange() {\n\t\treturn this._onDidEnablementChange.event;\n\t}\n\n\tprivate readonly _onDidVisibilityChange = this._disposables.add(\n\t\tnew Emitter<void>(),\n\t);\n\tget onDidVisibilityChange() {\n\t\treturn this._onDidVisibilityChange.event;\n\t}\n\n\tconstructor(\n\t\tprivate readonly _container: HTMLElement,\n\t\tprivate readonly _editorGroup: IEditorGroupView,\n\t\tprivate readonly _options: IBreadcrumbsControlOptions,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IFileService fileService: IFileService\n\t) {\n\t\tconst config = this._disposables.add(BreadcrumbsConfig.IsEnabled.bindTo(configurationService));\n\t\tthis._disposables.add(config.onDidChange(() => {\n\t\t\tconst value = config.getValue();\n\t\t\tif (!value && this._control) {\n\t\t\t\tthis._controlDisposables.clear();\n\t\t\t\tthis._control = undefined;\n\t\t\t\tthis._onDidEnablementChange.fire();\n\t\t\t} else if (value && !this._control) {\n\t\t\t\tthis._control = this.createControl();\n\t\t\t\tthis._control.update();\n\t\t\t\tthis._onDidEnablementChange.fire();\n\t\t\t}\n\t\t}));\n\n\t\tif (config.getValue()) {\n\t\t\tthis._control = this.createControl();\n\t\t}\n\n\t\tthis._disposables.add(fileService.onDidChangeFileSystemProviderRegistrations(e => {\n\t\t\tif (this._control?.model && this._control.model.resource.scheme !== e.scheme) {\n\t\t\t\t// ignore if the scheme of the breadcrumbs resource is not affected\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this._control?.update()) {\n\t\t\t\tthis._onDidEnablementChange.fire();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate createControl(): BreadcrumbsControl {\n\t\tconst control = this._controlDisposables.add(\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\tBreadcrumbsControl,\n\t\t\t\tthis._container,\n\t\t\t\tthis._options,\n\t\t\t\tthis._editorGroup,\n\t\t\t),\n\t\t);\n\t\tthis._controlDisposables.add(\n\t\t\tcontrol.onDidVisibilityChange(() =>\n\t\t\t\tthis._onDidVisibilityChange.fire(),\n\t\t\t),\n\t\t);\n\n\t\treturn control;\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tthis._controlDisposables.dispose();\n\t}\n}\n\n//#region commands\n\n// toggle command\nregisterAction2(\n\tclass ToggleBreadcrumb extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: \"breadcrumbs.toggle\",\n\t\t\t\ttitle: {\n\t\t\t\t\t...localize2(\"cmd.toggle\", \"Toggle Breadcrumbs\"),\n\t\t\t\t\tmnemonicTitle: localize(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: \"miBreadcrumbs\",\n\t\t\t\t\t\t\tcomment: [\"&& denotes a mnemonic\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"Toggle &&Breadcrumbs\",\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\tcategory: Categories.View,\n\t\t\t\ttoggled: {\n\t\t\t\t\tcondition: ContextKeyExpr.equals(\n\t\t\t\t\t\t\"config.breadcrumbs.enabled\",\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t),\n\t\t\t\t\ttitle: localize(\"cmd.toggle2\", \"Toggle Breadcrumbs\"),\n\t\t\t\t\tmnemonicTitle: localize(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: \"miBreadcrumbs2\",\n\t\t\t\t\t\t\tcomment: [\"&& denotes a mnemonic\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"Toggle &&Breadcrumbs\",\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\tmenu: [\n\t\t\t\t\t{ id: MenuId.CommandPalette },\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.MenubarAppearanceMenu,\n\t\t\t\t\t\tgroup: \"4_editor\",\n\t\t\t\t\t\torder: 2,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\t\tgroup: \"notebookLayout\",\n\t\t\t\t\t\torder: 2,\n\t\t\t\t\t},\n\t\t\t\t\t{ id: MenuId.StickyScrollContext },\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookStickyScrollContext,\n\t\t\t\t\t\tgroup: \"notebookView\",\n\t\t\t\t\t\torder: 2,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor): void {\n\t\t\tconst config = accessor.get(IConfigurationService);\n\t\t\tconst value = BreadcrumbsConfig.IsEnabled.bindTo(config).getValue();\n\t\t\tBreadcrumbsConfig.IsEnabled.bindTo(config).updateValue(!value);\n\t\t}\n\t},\n);\n\n// focus/focus-and-select\nfunction focusAndSelectHandler(\n\taccessor: ServicesAccessor,\n\tselect: boolean,\n): void {\n\t// find widget and focus/select\n\tconst groups = accessor.get(IEditorGroupsService);\n\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\tif (widget) {\n\t\tconst item = tail(widget.getItems());\n\t\twidget.setFocused(item);\n\t\tif (select) {\n\t\t\twidget.setSelection(item, BreadcrumbsControl.Payload_Pick);\n\t\t}\n\t}\n}\nregisterAction2(\n\tclass FocusAndSelectBreadcrumbs extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: \"breadcrumbs.focusAndSelect\",\n\t\t\t\ttitle: localize2(\n\t\t\t\t\t\"cmd.focusAndSelect\",\n\t\t\t\t\t\"Focus and Select Breadcrumbs\",\n\t\t\t\t),\n\t\t\t\tprecondition: BreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Period,\n\t\t\t\t\twhen: BreadcrumbsControl.CK_BreadcrumbsPossible,\n\t\t\t\t},\n\t\t\t\tf1: true,\n\t\t\t});\n\t\t}\n\t\trun(accessor: ServicesAccessor, ...args: any[]): void {\n\t\t\tfocusAndSelectHandler(accessor, true);\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass FocusBreadcrumbs extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: \"breadcrumbs.focus\",\n\t\t\t\ttitle: localize2(\"cmd.focus\", \"Focus Breadcrumbs\"),\n\t\t\t\tprecondition: BreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Semicolon,\n\t\t\t\t\twhen: BreadcrumbsControl.CK_BreadcrumbsPossible,\n\t\t\t\t},\n\t\t\t\tf1: true,\n\t\t\t});\n\t\t}\n\t\trun(accessor: ServicesAccessor, ...args: any[]): void {\n\t\t\tfocusAndSelectHandler(accessor, false);\n\t\t}\n\t},\n);\n\n// this commands is only enabled when breadcrumbs are\n// disabled which it then enables and focuses\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.toggleToOn\",\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Period,\n\twhen: ContextKeyExpr.not(\"config.breadcrumbs.enabled\"),\n\thandler: async (accessor) => {\n\t\tconst instant = accessor.get(IInstantiationService);\n\t\tconst config = accessor.get(IConfigurationService);\n\t\t// check if enabled and iff not enable\n\t\tconst isEnabled = BreadcrumbsConfig.IsEnabled.bindTo(config);\n\t\tif (!isEnabled.getValue()) {\n\t\t\tawait isEnabled.updateValue(true);\n\t\t\tawait timeout(50); // hacky - the widget might not be ready yet...\n\t\t}\n\t\treturn instant.invokeFunction(focusAndSelectHandler, true);\n\t},\n});\n\n// navigation\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.focusNext\",\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyCode.RightArrow,\n\tsecondary: [KeyMod.CtrlCmd | KeyCode.RightArrow],\n\tmac: {\n\t\tprimary: KeyCode.RightArrow,\n\t\tsecondary: [KeyMod.Alt | KeyCode.RightArrow],\n\t},\n\twhen: ContextKeyExpr.and(\n\t\tBreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\tBreadcrumbsControl.CK_BreadcrumbsActive,\n\t),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.focusNext();\n\t},\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.focusPrevious\",\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyCode.LeftArrow,\n\tsecondary: [KeyMod.CtrlCmd | KeyCode.LeftArrow],\n\tmac: {\n\t\tprimary: KeyCode.LeftArrow,\n\t\tsecondary: [KeyMod.Alt | KeyCode.LeftArrow],\n\t},\n\twhen: ContextKeyExpr.and(\n\t\tBreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\tBreadcrumbsControl.CK_BreadcrumbsActive,\n\t),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.focusPrev();\n\t},\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.focusNextWithPicker\",\n\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\tprimary: KeyMod.CtrlCmd | KeyCode.RightArrow,\n\tmac: {\n\t\tprimary: KeyMod.Alt | KeyCode.RightArrow,\n\t},\n\twhen: ContextKeyExpr.and(\n\t\tBreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\tBreadcrumbsControl.CK_BreadcrumbsActive,\n\t\tWorkbenchListFocusContextKey,\n\t),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.focusNext();\n\t},\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.focusPreviousWithPicker\",\n\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\tprimary: KeyMod.CtrlCmd | KeyCode.LeftArrow,\n\tmac: {\n\t\tprimary: KeyMod.Alt | KeyCode.LeftArrow,\n\t},\n\twhen: ContextKeyExpr.and(\n\t\tBreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\tBreadcrumbsControl.CK_BreadcrumbsActive,\n\t\tWorkbenchListFocusContextKey,\n\t),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.focusPrev();\n\t},\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.selectFocused\",\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyCode.Enter,\n\tsecondary: [KeyCode.DownArrow],\n\twhen: ContextKeyExpr.and(\n\t\tBreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\tBreadcrumbsControl.CK_BreadcrumbsActive,\n\t),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.setSelection(\n\t\t\twidget.getFocused(),\n\t\t\tBreadcrumbsControl.Payload_Pick,\n\t\t);\n\t},\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.revealFocused\",\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyCode.Space,\n\tsecondary: [KeyMod.CtrlCmd | KeyCode.Enter],\n\twhen: ContextKeyExpr.and(\n\t\tBreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\tBreadcrumbsControl.CK_BreadcrumbsActive,\n\t),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.setSelection(\n\t\t\twidget.getFocused(),\n\t\t\tBreadcrumbsControl.Payload_Reveal,\n\t\t);\n\t},\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.selectEditor\",\n\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\tprimary: KeyCode.Escape,\n\twhen: ContextKeyExpr.and(\n\t\tBreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\tBreadcrumbsControl.CK_BreadcrumbsActive,\n\t),\n\thandler(accessor) {\n\t\tconst groups = accessor.get(IEditorGroupsService);\n\t\tconst breadcrumbs = accessor.get(IBreadcrumbsService);\n\t\tconst widget = breadcrumbs.getWidget(groups.activeGroup.id);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.setFocused(undefined);\n\t\twidget.setSelection(undefined);\n\t\tgroups.activeGroup.activeEditorPane?.focus();\n\t},\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: \"breadcrumbs.revealFocusedFromTreeAside\",\n\tweight: KeybindingWeight.WorkbenchContrib,\n\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\twhen: ContextKeyExpr.and(\n\t\tBreadcrumbsControl.CK_BreadcrumbsVisible,\n\t\tBreadcrumbsControl.CK_BreadcrumbsActive,\n\t\tWorkbenchListFocusContextKey,\n\t),\n\thandler(accessor) {\n\t\tconst editors = accessor.get(IEditorService);\n\t\tconst lists = accessor.get(IListService);\n\n\t\tconst tree = lists.lastFocusedList;\n\t\tif (\n\t\t\t!(tree instanceof WorkbenchDataTree) &&\n\t\t\t!(tree instanceof WorkbenchAsyncDataTree)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = <IFileStat | unknown>tree.getFocus()[0];\n\n\t\tif (URI.isUri((<IFileStat>element)?.resource)) {\n\t\t\t// IFileStat: open file in editor\n\t\t\treturn editors.openEditor(\n\t\t\t\t{\n\t\t\t\t\tresource: (<IFileStat>element).resource,\n\t\t\t\t\toptions: { pinned: true },\n\t\t\t\t},\n\t\t\t\tSIDE_GROUP,\n\t\t\t);\n\t\t}\n\n\t\t// IOutline: check if this the outline and iff so reveal element\n\t\tconst input = tree.getInput();\n\t\tif (input && typeof (<IOutline<any>>input).outlineKind === \"string\") {\n\t\t\treturn (<IOutline<any>>input).reveal(\n\t\t\t\telement,\n\t\t\t\t{\n\t\t\t\t\tpinned: true,\n\t\t\t\t\tpreserveFocus: false,\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t}\n\t},\n});\n//#endregion\n"],
  "mappings": "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",
  "names": ["element", "renderer"]
}
