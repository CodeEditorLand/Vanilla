var N=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var g=(c,a,e,o)=>{for(var i=o>1?void 0:o?x(a,e):a,n=c.length-1,t;n>=0;n--)(t=c[n])&&(i=(o?t(a,e,i):t(i))||i);return o&&i&&N(a,e,i),i},r=(c,a)=>(e,o)=>a(e,o,c);import"./media/panelpart.css";import{localize as l}from"../../../../nls.js";import{Separator as k,SubmenuAction as v,toAction as D}from"../../../../base/common/actions.js";import{ActionsOrientation as L}from"../../../../base/browser/ui/actionbar/actionbar.js";import{ActivePanelContext as _,PanelFocusContext as M}from"../../../common/contextkeys.js";import{IWorkbenchLayoutService as R,Parts as C,Position as p}from"../../../services/layout/browser/layoutService.js";import{IStorageService as F}from"../../../../platform/storage/common/storage.js";import{IContextMenuService as V}from"../../../../platform/contextview/browser/contextView.js";import{IKeybindingService as H}from"../../../../platform/keybinding/common/keybinding.js";import{IInstantiationService as K}from"../../../../platform/instantiation/common/instantiation.js";import{TogglePanelAction as I}from"./panelActions.js";import{IThemeService as W}from"../../../../platform/theme/common/themeService.js";import{PANEL_BACKGROUND as u,PANEL_BORDER as S,PANEL_ACTIVE_TITLE_FOREGROUND as z,PANEL_INACTIVE_TITLE_FOREGROUND as G,PANEL_ACTIVE_TITLE_BORDER as U,PANEL_DRAG_AND_DROP_BORDER as Y}from"../../../common/theme.js";import{contrastBorder as f,badgeBackground as j,badgeForeground as J}from"../../../../platform/theme/common/colorRegistry.js";import{INotificationService as Z}from"../../../../platform/notification/common/notification.js";import{Dimension as d}from"../../../../base/browser/dom.js";import{IContextKeyService as q}from"../../../../platform/contextkey/common/contextkey.js";import{assertIsDefined as Q}from"../../../../base/common/types.js";import{IExtensionService as X}from"../../../services/extensions/common/extensions.js";import{IViewDescriptorService as $}from"../../../common/views.js";import{HoverPosition as h}from"../../../../base/browser/ui/hover/hoverWidget.js";import{IMenuService as ee,MenuId as b}from"../../../../platform/actions/common/actions.js";import{AbstractPaneCompositePart as oe,CompositeBarPosition as ie}from"../paneCompositePart.js";import{ICommandService as re}from"../../../../platform/commands/common/commands.js";import{createAndFillInContextMenuActions as A}from"../../../../platform/actions/browser/menuEntryActionViewItem.js";import{IHoverService as te}from"../../../../platform/hover/browser/hover.js";import{IConfigurationService as ne}from"../../../../platform/configuration/common/configuration.js";let s=class extends oe{constructor(e,o,i,n,t,P,y,T,E,m,w,ae,O,se){super(C.PANEL_PART,{hasTitle:!0},s.activePanelSettingsKey,_.bindTo(m),M.bindTo(m),"panel","panel",void 0,e,o,i,n,t,P,y,T,E,m,w,O);this.commandService=ae;this.configurationService=se;this._register(this.configurationService.onDidChangeConfiguration(B=>{B.affectsConfiguration("workbench.panel.showLabel")&&this.updateCompositeBar(!0)}))}minimumWidth=300;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=77;maximumHeight=Number.POSITIVE_INFINITY;get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const o=e.getOptimalWidth();if(typeof o=="number")return Math.max(o,300)}static activePanelSettingsKey="workbench.panelpart.activepanelid";updateStyles(){super.updateStyles();const e=Q(this.getContainer());e.style.backgroundColor=this.getColor(u)||"";const o=this.getColor(S)||this.getColor(f)||"";e.style.borderLeftColor=o,e.style.borderRightColor=o,e.style.borderBottomColor=o;const i=this.getTitleArea();i&&(i.style.borderTopColor=this.getColor(S)||this.getColor(f)||"")}getCompositeBarOptions(){return{partContainerClass:"panel",pinnedViewContainersKey:"workbench.panel.pinnedPanels",placeholderViewContainersKey:"workbench.panel.placeholderPanels",viewContainersWorkspaceStateKey:"workbench.panel.viewContainersWorkspaceState",icon:!this.configurationService.getValue("workbench.panel.showLabel"),orientation:L.HORIZONTAL,recomputeSizes:!0,activityHoverOptions:{position:()=>this.layoutService.getPanelPosition()===p.BOTTOM&&!this.layoutService.isPanelMaximized()?h.ABOVE:h.BELOW},fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),compositeSize:0,iconSize:16,overflowActionSize:44,colors:e=>({activeBackgroundColor:e.getColor(u),inactiveBackgroundColor:e.getColor(u),activeBorderBottomColor:e.getColor(U),activeForegroundColor:e.getColor(z),inactiveForegroundColor:e.getColor(G),badgeBackground:e.getColor(j),badgeForeground:e.getColor(J),dragAndDropBorder:e.getColor(Y)})}}fillExtraContextMenuActions(e){const o=this.menuService.getMenuActions(b.PanelPositionMenu,this.contextKeyService,{shouldForwardArgs:!0}),i=this.menuService.getMenuActions(b.PanelAlignmentMenu,this.contextKeyService,{shouldForwardArgs:!0}),n=[],t=[];A(o,{primary:[],secondary:n}),A(i,{primary:[],secondary:t}),e.push(new k,new v("workbench.action.panel.position",l("panel position","Panel Position"),n),new v("workbench.action.panel.align",l("align panel","Align Panel"),t),D({id:I.ID,label:l("hidePanel","Hide Panel"),run:()=>this.commandService.executeCommand(I.ID)}))}layout(e,o,i,n){let t;switch(this.layoutService.getPanelPosition()){case p.RIGHT:t=new d(e-1,o);break;case p.TOP:t=new d(e,o-1);break;default:t=new d(e,o);break}super.layout(t.width,t.height,i,n)}shouldShowCompositeBar(){return!0}getCompositeBarPosition(){return ie.TITLE}toJSON(){return{type:C.PANEL_PART}}};s=g([r(0,Z),r(1,F),r(2,V),r(3,R),r(4,H),r(5,te),r(6,K),r(7,W),r(8,$),r(9,q),r(10,X),r(11,re),r(12,ee),r(13,ne)],s);export{s as PanelPart};
