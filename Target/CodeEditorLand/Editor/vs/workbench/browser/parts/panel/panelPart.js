var N=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var g=(c,a,e,o)=>{for(var i=o>1?void 0:o?x(a,e):a,n=c.length-1,t;n>=0;n--)(t=c[n])&&(i=(o?t(a,e,i):t(i))||i);return o&&i&&N(a,e,i),i},r=(c,a)=>(e,o)=>a(e,o,c);import"./media/panelpart.css";import{Dimension as l}from"../../../../base/browser/dom.js";import{ActionsOrientation as k}from"../../../../base/browser/ui/actionbar/actionbar.js";import{HoverPosition as v}from"../../../../base/browser/ui/hover/hoverWidget.js";import{Separator as D,SubmenuAction as C,toAction as L}from"../../../../base/common/actions.js";import{assertIsDefined as _}from"../../../../base/common/types.js";import{localize as p}from"../../../../nls.js";import{createAndFillInContextMenuActions as I}from"../../../../platform/actions/browser/menuEntryActionViewItem.js";import{IMenuService as M,MenuId as S}from"../../../../platform/actions/common/actions.js";import{ICommandService as R}from"../../../../platform/commands/common/commands.js";import{IConfigurationService as F}from"../../../../platform/configuration/common/configuration.js";import{IContextKeyService as V}from"../../../../platform/contextkey/common/contextkey.js";import{IContextMenuService as H}from"../../../../platform/contextview/browser/contextView.js";import{IHoverService as K}from"../../../../platform/hover/browser/hover.js";import{IInstantiationService as W}from"../../../../platform/instantiation/common/instantiation.js";import{IKeybindingService as z}from"../../../../platform/keybinding/common/keybinding.js";import{INotificationService as G}from"../../../../platform/notification/common/notification.js";import{IStorageService as U}from"../../../../platform/storage/common/storage.js";import{badgeBackground as Y,badgeForeground as j,contrastBorder as f}from"../../../../platform/theme/common/colorRegistry.js";import{IThemeService as J}from"../../../../platform/theme/common/themeService.js";import{ActivePanelContext as Z,PanelFocusContext as q}from"../../../common/contextkeys.js";import{PANEL_ACTIVE_TITLE_BORDER as Q,PANEL_ACTIVE_TITLE_FOREGROUND as X,PANEL_BACKGROUND as u,PANEL_BORDER as h,PANEL_DRAG_AND_DROP_BORDER as $,PANEL_INACTIVE_TITLE_FOREGROUND as ee}from"../../../common/theme.js";import{IViewDescriptorService as oe}from"../../../common/views.js";import{IExtensionService as ie}from"../../../services/extensions/common/extensions.js";import{IWorkbenchLayoutService as re,Parts as b,Position as d}from"../../../services/layout/browser/layoutService.js";import"../paneCompositeBar.js";import{AbstractPaneCompositePart as te,CompositeBarPosition as ne}from"../paneCompositePart.js";import{TogglePanelAction as A}from"./panelActions.js";let s=class extends te{constructor(e,o,i,n,t,P,y,T,E,m,w,ae,O,se){super(b.PANEL_PART,{hasTitle:!0},s.activePanelSettingsKey,Z.bindTo(m),q.bindTo(m),"panel","panel",void 0,e,o,i,n,t,P,y,T,E,m,w,O);this.commandService=ae;this.configurationService=se;this._register(this.configurationService.onDidChangeConfiguration(B=>{B.affectsConfiguration("workbench.panel.showLabel")&&this.updateCompositeBar(!0)}))}minimumWidth=300;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=77;maximumHeight=Number.POSITIVE_INFINITY;get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const o=e.getOptimalWidth();if(typeof o=="number")return Math.max(o,300)}static activePanelSettingsKey="workbench.panelpart.activepanelid";updateStyles(){super.updateStyles();const e=_(this.getContainer());e.style.backgroundColor=this.getColor(u)||"";const o=this.getColor(h)||this.getColor(f)||"";e.style.borderLeftColor=o,e.style.borderRightColor=o,e.style.borderBottomColor=o;const i=this.getTitleArea();i&&(i.style.borderTopColor=this.getColor(h)||this.getColor(f)||"")}getCompositeBarOptions(){return{partContainerClass:"panel",pinnedViewContainersKey:"workbench.panel.pinnedPanels",placeholderViewContainersKey:"workbench.panel.placeholderPanels",viewContainersWorkspaceStateKey:"workbench.panel.viewContainersWorkspaceState",icon:!this.configurationService.getValue("workbench.panel.showLabel"),orientation:k.HORIZONTAL,recomputeSizes:!0,activityHoverOptions:{position:()=>this.layoutService.getPanelPosition()===d.BOTTOM&&!this.layoutService.isPanelMaximized()?v.ABOVE:v.BELOW},fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),compositeSize:0,iconSize:16,overflowActionSize:44,colors:e=>({activeBackgroundColor:e.getColor(u),inactiveBackgroundColor:e.getColor(u),activeBorderBottomColor:e.getColor(Q),activeForegroundColor:e.getColor(X),inactiveForegroundColor:e.getColor(ee),badgeBackground:e.getColor(Y),badgeForeground:e.getColor(j),dragAndDropBorder:e.getColor($)})}}fillExtraContextMenuActions(e){const o=this.menuService.getMenuActions(S.PanelPositionMenu,this.contextKeyService,{shouldForwardArgs:!0}),i=this.menuService.getMenuActions(S.PanelAlignmentMenu,this.contextKeyService,{shouldForwardArgs:!0}),n=[],t=[];I(o,{primary:[],secondary:n}),I(i,{primary:[],secondary:t}),e.push(new D,new C("workbench.action.panel.position",p("panel position","Panel Position"),n),new C("workbench.action.panel.align",p("align panel","Align Panel"),t),L({id:A.ID,label:p("hidePanel","Hide Panel"),run:()=>this.commandService.executeCommand(A.ID)}))}layout(e,o,i,n){let t;switch(this.layoutService.getPanelPosition()){case d.RIGHT:t=new l(e-1,o);break;case d.TOP:t=new l(e,o-1);break;default:t=new l(e,o);break}super.layout(t.width,t.height,i,n)}shouldShowCompositeBar(){return!0}getCompositeBarPosition(){return ne.TITLE}toJSON(){return{type:b.PANEL_PART}}};s=g([r(0,G),r(1,U),r(2,H),r(3,re),r(4,z),r(5,K),r(6,W),r(7,J),r(8,oe),r(9,V),r(10,ie),r(11,R),r(12,M),r(13,F)],s);export{s as PanelPart};
