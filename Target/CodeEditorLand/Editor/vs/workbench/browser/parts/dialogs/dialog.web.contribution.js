var p=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var n=(a,t,r,i)=>{for(var e=i>1?void 0:i?d(t,r):t,l=a.length-1,c;l>=0;l--)(c=a[l])&&(e=(i?c(t,r,e):c(e))||e);return i&&e&&p(t,r,e),e},o=(a,t)=>(r,i)=>t(r,i,a);import{Lazy as h}from"../../../../base/common/lazy.js";import{Disposable as u}from"../../../../base/common/lifecycle.js";import{IClipboardService as v}from"../../../../platform/clipboard/common/clipboardService.js";import{IDialogService as I}from"../../../../platform/dialogs/common/dialogs.js";import{IInstantiationService as D}from"../../../../platform/instantiation/common/instantiation.js";import{IKeybindingService as f}from"../../../../platform/keybinding/common/keybinding.js";import{ILayoutService as S}from"../../../../platform/layout/browser/layoutService.js";import{ILogService as y}from"../../../../platform/log/common/log.js";import{IProductService as b}from"../../../../platform/product/common/productService.js";import{WorkbenchPhase as w,registerWorkbenchContribution2 as k}from"../../../common/contributions.js";import{BrowserDialogHandler as A}from"./dialogHandler.js";let s=class extends u{constructor(r,i,e,l,c,g,m){super();this.dialogService=r;this.impl=new h(()=>new A(i,e,l,c,g,m)),this.model=this.dialogService.model,this._register(this.model.onWillShowDialog(()=>{this.currentDialog||this.processDialogs()})),this.processDialogs()}static ID="workbench.contrib.dialogHandler";model;impl;currentDialog;async processDialogs(){for(;this.model.dialogs.length;){this.currentDialog=this.model.dialogs[0];let r;try{if(this.currentDialog.args.confirmArgs){const i=this.currentDialog.args.confirmArgs;r=await this.impl.value.confirm(i.confirmation)}else if(this.currentDialog.args.inputArgs){const i=this.currentDialog.args.inputArgs;r=await this.impl.value.input(i.input)}else if(this.currentDialog.args.promptArgs){const i=this.currentDialog.args.promptArgs;r=await this.impl.value.prompt(i.prompt)}else await this.impl.value.about()}catch(i){r=i}this.currentDialog.close(r),this.currentDialog=void 0}}};s=n([o(0,I),o(1,y),o(2,S),o(3,f),o(4,D),o(5,b),o(6,v)],s),k(s.ID,s,w.BlockStartup);export{s as DialogHandlerContribution};
