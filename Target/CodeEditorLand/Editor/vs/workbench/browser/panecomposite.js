var h=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var w=(a,o,e,t)=>{for(var i=t>1?void 0:t?I(o,e):o,n=a.length-1,r;n>=0;n--)(r=a[n])&&(i=(t?r(o,e,i):r(i))||i);return t&&i&&h(o,e,i),i},s=(a,o)=>(e,t)=>o(e,t,a);import{Separator as g}from"../../base/common/actions.js";import{SubmenuItemAction as P}from"../../platform/actions/common/actions.js";import{IContextMenuService as l}from"../../platform/contextview/browser/contextView.js";import{IInstantiationService as A}from"../../platform/instantiation/common/instantiation.js";import{Registry as u}from"../../platform/registry/common/platform.js";import{IStorageService as S}from"../../platform/storage/common/storage.js";import{ITelemetryService as f}from"../../platform/telemetry/common/telemetry.js";import{IThemeService as b}from"../../platform/theme/common/themeService.js";import{IWorkspaceContextService as y}from"../../platform/workspace/common/workspace.js";import{IExtensionService as V}from"../services/extensions/common/extensions.js";import{Composite as x,CompositeDescriptor as M,CompositeRegistry as T}from"./composite.js";import{VIEWPANE_FILTER_ACTION as D}from"./parts/views/viewPane.js";import{ViewsSubMenu as B}from"./parts/views/viewPaneContainer.js";let m=class extends x{constructor(e,t,i,n,r,c,p,E){super(e,t,r,i);this.storageService=i;this.instantiationService=n;this.contextMenuService=c;this.extensionService=p;this.contextService=E}viewPaneContainer;create(e){super.create(e),this.viewPaneContainer=this._register(this.createViewPaneContainer(e)),this._register(this.viewPaneContainer.onTitleAreaUpdate(()=>this.updateTitleArea())),this.viewPaneContainer.create(e)}setVisible(e){super.setVisible(e),this.viewPaneContainer?.setVisible(e)}layout(e){this.viewPaneContainer?.layout(e)}setBoundarySashes(e){this.viewPaneContainer?.setBoundarySashes(e)}getOptimalWidth(){return this.viewPaneContainer?.getOptimalWidth()??0}openView(e,t){return this.viewPaneContainer?.openView(e,t)}getViewPaneContainer(){return this.viewPaneContainer}getActionsContext(){return this.getViewPaneContainer()?.getActionsContext()}getContextMenuActions(){return this.viewPaneContainer?.menuActions?.getContextMenuActions()??[]}getMenuIds(){const e=[];return this.viewPaneContainer?.menuActions&&(e.push(this.viewPaneContainer.menuActions.menuId),this.viewPaneContainer.isViewMergedWithContainer()&&e.push(this.viewPaneContainer.panes[0].menuActions.menuId)),e}getActions(){const e=[];if(this.viewPaneContainer?.menuActions&&(e.push(...this.viewPaneContainer.menuActions.getPrimaryActions()),this.viewPaneContainer.isViewMergedWithContainer())){const t=this.viewPaneContainer.panes[0];t.shouldShowFilterInHeader()&&e.push(D),e.push(...t.menuActions.getPrimaryActions())}return e}getSecondaryActions(){if(!this.viewPaneContainer?.menuActions)return[];const e=this.viewPaneContainer.isViewMergedWithContainer()?this.viewPaneContainer.panes[0].menuActions.getSecondaryActions():[];let t=this.viewPaneContainer.menuActions.getSecondaryActions();const i=t.findIndex(n=>n instanceof P&&n.item.submenu===B);if(i!==-1){const n=t[i];n.actions.some(({enabled:r})=>r)?t.length===1&&e.length===0?t=n.actions.slice():i!==0&&(t=[n,...t.slice(0,i),...t.slice(i+1)]):t.splice(i,1)}return t.length&&e.length?[...t,new g,...e]:t.length?t:e}getActionViewItem(e,t){return this.viewPaneContainer?.getActionViewItem(e,t)}getTitle(){return this.viewPaneContainer?.getTitle()??""}focus(){super.focus(),this.viewPaneContainer?.focus()}};m=w([s(1,f),s(2,S),s(3,A),s(4,b),s(5,l),s(6,V),s(7,y)],m);class C extends M{constructor(e,t,i,n,r,c,p){super(e,t,i,n,r,c);this.iconUrl=p}static create(e,t,i,n,r,c,p){return new C(e,t,i,n,r,c,p)}}const d={Viewlets:"workbench.contributions.viewlets",Panels:"workbench.contributions.panels",Auxiliary:"workbench.contributions.auxiliary"};class v extends T{registerPaneComposite(o){super.registerComposite(o)}deregisterPaneComposite(o){super.deregisterComposite(o)}getPaneComposite(o){return this.getComposite(o)}getPaneComposites(){return this.getComposites()}}u.add(d.Viewlets,new v),u.add(d.Panels,new v),u.add(d.Auxiliary,new v);export{d as Extensions,m as PaneComposite,C as PaneCompositeDescriptor,v as PaneCompositeRegistry};
