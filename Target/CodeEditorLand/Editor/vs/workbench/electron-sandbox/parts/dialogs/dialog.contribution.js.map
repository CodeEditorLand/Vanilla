{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/electron-sandbox/parts/dialogs/dialog.contribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Lazy } from \"../../../../base/common/lazy.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { IClipboardService } from \"../../../../platform/clipboard/common/clipboardService.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\ttype IDialogHandler,\n\ttype IDialogResult,\n\tIDialogService,\n} from \"../../../../platform/dialogs/common/dialogs.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { ILayoutService } from \"../../../../platform/layout/browser/layoutService.js\";\nimport { ILogService } from \"../../../../platform/log/common/log.js\";\nimport { INativeHostService } from \"../../../../platform/native/common/native.js\";\nimport { IProductService } from \"../../../../platform/product/common/productService.js\";\nimport { BrowserDialogHandler } from \"../../../browser/parts/dialogs/dialogHandler.js\";\nimport {\n\ttype IWorkbenchContribution,\n\tWorkbenchPhase,\n\tregisterWorkbenchContribution2,\n} from \"../../../common/contributions.js\";\nimport type {\n\tIDialogViewItem,\n\tIDialogsModel,\n} from \"../../../common/dialogs.js\";\nimport type { DialogService } from \"../../../services/dialogs/common/dialogService.js\";\nimport { NativeDialogHandler } from \"./dialogHandler.js\";\n\nexport class DialogHandlerContribution\n\textends Disposable\n\timplements IWorkbenchContribution\n{\n\tstatic readonly ID = \"workbench.contrib.dialogHandler\";\n\n\tprivate nativeImpl: Lazy<IDialogHandler>;\n\tprivate browserImpl: Lazy<IDialogHandler>;\n\n\tprivate model: IDialogsModel;\n\tprivate currentDialog: IDialogViewItem | undefined;\n\n\tconstructor(\n\t\t@IConfigurationService\n\t\tprivate configurationService: IConfigurationService,\n\t\t@IDialogService private dialogService: IDialogService,\n\t\t@ILogService logService: ILogService,\n\t\t@ILayoutService layoutService: ILayoutService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IProductService productService: IProductService,\n\t\t@IClipboardService clipboardService: IClipboardService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t) {\n\t\tsuper();\n\n\t\tthis.browserImpl = new Lazy(\n\t\t\t() =>\n\t\t\t\tnew BrowserDialogHandler(\n\t\t\t\t\tlogService,\n\t\t\t\t\tlayoutService,\n\t\t\t\t\tkeybindingService,\n\t\t\t\t\tinstantiationService,\n\t\t\t\t\tproductService,\n\t\t\t\t\tclipboardService,\n\t\t\t\t),\n\t\t);\n\t\tthis.nativeImpl = new Lazy(\n\t\t\t() =>\n\t\t\t\tnew NativeDialogHandler(\n\t\t\t\t\tlogService,\n\t\t\t\t\tnativeHostService,\n\t\t\t\t\tproductService,\n\t\t\t\t\tclipboardService,\n\t\t\t\t),\n\t\t);\n\n\t\tthis.model = (this.dialogService as DialogService).model;\n\n\t\tthis._register(\n\t\t\tthis.model.onWillShowDialog(() => {\n\t\t\t\tif (!this.currentDialog) {\n\t\t\t\t\tthis.processDialogs();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis.processDialogs();\n\t}\n\n\tprivate async processDialogs(): Promise<void> {\n\t\twhile (this.model.dialogs.length) {\n\t\t\tthis.currentDialog = this.model.dialogs[0];\n\n\t\t\tlet result: IDialogResult | Error | undefined;\n\t\t\ttry {\n\t\t\t\t// Confirm\n\t\t\t\tif (this.currentDialog.args.confirmArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.confirmArgs;\n\t\t\t\t\tresult =\n\t\t\t\t\t\tthis.useCustomDialog || args?.confirmation.custom\n\t\t\t\t\t\t\t? await this.browserImpl.value.confirm(\n\t\t\t\t\t\t\t\t\targs.confirmation,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: await this.nativeImpl.value.confirm(\n\t\t\t\t\t\t\t\t\targs.confirmation,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Input (custom only)\n\t\t\t\telse if (this.currentDialog.args.inputArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.inputArgs;\n\t\t\t\t\tresult = await this.browserImpl.value.input(args.input);\n\t\t\t\t}\n\n\t\t\t\t// Prompt\n\t\t\t\telse if (this.currentDialog.args.promptArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.promptArgs;\n\t\t\t\t\tresult =\n\t\t\t\t\t\tthis.useCustomDialog || args?.prompt.custom\n\t\t\t\t\t\t\t? await this.browserImpl.value.prompt(args.prompt)\n\t\t\t\t\t\t\t: await this.nativeImpl.value.prompt(args.prompt);\n\t\t\t\t}\n\n\t\t\t\t// About\n\t\t\t\telse if (this.useCustomDialog) {\n\t\t\t\t\tawait this.browserImpl.value.about();\n\t\t\t\t} else {\n\t\t\t\t\tawait this.nativeImpl.value.about();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tresult = error;\n\t\t\t}\n\n\t\t\tthis.currentDialog.close(result);\n\t\t\tthis.currentDialog = undefined;\n\t\t}\n\t}\n\n\tprivate get useCustomDialog(): boolean {\n\t\treturn (\n\t\t\tthis.configurationService.getValue(\"window.dialogStyle\") ===\n\t\t\t\"custom\"\n\t\t);\n\t}\n}\n\nregisterWorkbenchContribution2(\n\tDialogHandlerContribution.ID,\n\tDialogHandlerContribution,\n\tWorkbenchPhase.BlockStartup, // Block to allow for dialogs to show before restore finished\n);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,YAAY;AACrB,SAAS,kBAAkB;AAC3B,SAAS,yBAAyB;AAClC,SAAS,6BAA6B;AACtC;AAAA,EAGC;AAAA,OACM;AACP,SAAS,6BAA6B;AACtC,SAAS,0BAA0B;AACnC,SAAS,sBAAsB;AAC/B,SAAS,mBAAmB;AAC5B,SAAS,0BAA0B;AACnC,SAAS,uBAAuB;AAChC,SAAS,4BAA4B;AACrC;AAAA,EAEC;AAAA,EACA;AAAA,OACM;AAMP,SAAS,2BAA2B;AAE7B,IAAM,4BAAN,cACE,WAET;AAAA,EASC,YAES,sBACgB,eACX,YACG,eACI,mBACG,sBACN,gBACE,kBACC,mBACnB;AACD,UAAM;AAVE;AACgB;AAWxB,SAAK,cAAc,IAAI;AAAA,MACtB,MACC,IAAI;AAAA,QACH;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD;AAAA,IACF;AACA,SAAK,aAAa,IAAI;AAAA,MACrB,MACC,IAAI;AAAA,QACH;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD;AAAA,IACF;AAEA,SAAK,QAAS,KAAK,cAAgC;AAEnD,SAAK;AAAA,MACJ,KAAK,MAAM,iBAAiB,MAAM;AACjC,YAAI,CAAC,KAAK,eAAe;AACxB,eAAK,eAAe;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF;AAEA,SAAK,eAAe;AAAA,EACrB;AAAA,EA3FD,OAoCA;AAAA;AAAA;AAAA,EACC,OAAgB,KAAK;AAAA,EAEb;AAAA,EACA;AAAA,EAEA;AAAA,EACA;AAAA,EAkDR,MAAc,iBAAgC;AAC7C,WAAO,KAAK,MAAM,QAAQ,QAAQ;AACjC,WAAK,gBAAgB,KAAK,MAAM,QAAQ,CAAC;AAEzC,UAAI;AACJ,UAAI;AAEH,YAAI,KAAK,cAAc,KAAK,aAAa;AACxC,gBAAM,OAAO,KAAK,cAAc,KAAK;AACrC,mBACC,KAAK,mBAAmB,MAAM,aAAa,SACxC,MAAM,KAAK,YAAY,MAAM;AAAA,YAC7B,KAAK;AAAA,UACN,IACC,MAAM,KAAK,WAAW,MAAM;AAAA,YAC5B,KAAK;AAAA,UACN;AAAA,QACJ,WAGS,KAAK,cAAc,KAAK,WAAW;AAC3C,gBAAM,OAAO,KAAK,cAAc,KAAK;AACrC,mBAAS,MAAM,KAAK,YAAY,MAAM,MAAM,KAAK,KAAK;AAAA,QACvD,WAGS,KAAK,cAAc,KAAK,YAAY;AAC5C,gBAAM,OAAO,KAAK,cAAc,KAAK;AACrC,mBACC,KAAK,mBAAmB,MAAM,OAAO,SAClC,MAAM,KAAK,YAAY,MAAM,OAAO,KAAK,MAAM,IAC/C,MAAM,KAAK,WAAW,MAAM,OAAO,KAAK,MAAM;AAAA,QACnD,WAGS,KAAK,iBAAiB;AAC9B,gBAAM,KAAK,YAAY,MAAM,MAAM;AAAA,QACpC,OAAO;AACN,gBAAM,KAAK,WAAW,MAAM,MAAM;AAAA,QACnC;AAAA,MACD,SAAS,OAAO;AACf,iBAAS;AAAA,MACV;AAEA,WAAK,cAAc,MAAM,MAAM;AAC/B,WAAK,gBAAgB;AAAA,IACtB;AAAA,EACD;AAAA,EAEA,IAAY,kBAA2B;AACtC,WACC,KAAK,qBAAqB,SAAS,oBAAoB,MACvD;AAAA,EAEF;AACD;AAnHa,4BAAN;AAAA,EAaJ;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAtBU;AAqHb;AAAA,EACC,0BAA0B;AAAA,EAC1B;AAAA,EACA,eAAe;AAAA;AAChB;",
  "names": []
}
