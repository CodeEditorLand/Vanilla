{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/api/common/extHostLanguageFeatures.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { asArray, coalesce, isFalsyOrEmpty, isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { raceCancellationError } from '../../../base/common/async.js';\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { NotImplementedError, isCancellationError } from '../../../base/common/errors.js';\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { equals, mixin } from '../../../base/common/objects.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { regExpLeadsToEndlessLoop } from '../../../base/common/strings.js';\nimport { assertType, isObject } from '../../../base/common/types.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { IURITransformer } from '../../../base/common/uriIpc.js';\nimport { ISingleEditOperation } from '../../../editor/common/core/editOperation.js';\nimport { IPosition } from '../../../editor/common/core/position.js';\nimport { Range as EditorRange, IRange } from '../../../editor/common/core/range.js';\nimport { ISelection, Selection } from '../../../editor/common/core/selection.js';\nimport * as languages from '../../../editor/common/languages.js';\nimport { IAutoClosingPairConditional } from '../../../editor/common/languages/languageConfiguration.js';\nimport { encodeSemanticTokensDto } from '../../../editor/common/services/semanticTokensDto.js';\nimport { localize } from '../../../nls.js';\nimport { ExtensionIdentifier, IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { IExtHostApiDeprecationService } from './extHostApiDeprecationService.js';\nimport { CommandsConverter, ExtHostCommands } from './extHostCommands.js';\nimport { ExtHostDiagnostics } from './extHostDiagnostics.js';\nimport { ExtHostDocuments } from './extHostDocuments.js';\nimport { ExtHostTelemetry, IExtHostTelemetry } from './extHostTelemetry.js';\nimport * as typeConvert from './extHostTypeConverters.js';\nimport { CodeActionKind, CompletionList, Disposable, DocumentDropOrPasteEditKind, DocumentSymbol, InlineCompletionTriggerKind, InlineEditTriggerKind, InternalDataTransferItem, Location, NewSymbolNameTriggerKind, Range, SemanticTokens, SemanticTokensEdit, SemanticTokensEdits, SnippetString, SymbolInformation, SyntaxTokenType } from './extHostTypes.js';\nimport { checkProposedApiEnabled, isProposedApiEnabled } from '../../services/extensions/common/extensions.js';\nimport type * as vscode from 'vscode';\nimport { Cache } from './cache.js';\nimport * as extHostProtocol from './extHost.protocol.js';\n\n// --- adapter\n\nclass DocumentSymbolAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentSymbolProvider\n\t) { }\n\n\tasync provideDocumentSymbols(resource: URI, token: CancellationToken): Promise<languages.DocumentSymbol[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideDocumentSymbols(doc, token);\n\t\tif (isFalsyOrEmpty(value)) {\n\t\t\treturn undefined;\n\t\t} else if (value![0] instanceof DocumentSymbol) {\n\t\t\treturn (<DocumentSymbol[]>value).map(typeConvert.DocumentSymbol.from);\n\t\t} else {\n\t\t\treturn DocumentSymbolAdapter._asDocumentSymbolTree(<SymbolInformation[]>value);\n\t\t}\n\t}\n\n\tprivate static _asDocumentSymbolTree(infos: SymbolInformation[]): languages.DocumentSymbol[] {\n\t\t// first sort by start (and end) and then loop over all elements\n\t\t// and build a tree based on containment.\n\t\tinfos = infos.slice(0).sort((a, b) => {\n\t\t\tlet res = a.location.range.start.compareTo(b.location.range.start);\n\t\t\tif (res === 0) {\n\t\t\t\tres = b.location.range.end.compareTo(a.location.range.end);\n\t\t\t}\n\t\t\treturn res;\n\t\t});\n\t\tconst res: languages.DocumentSymbol[] = [];\n\t\tconst parentStack: languages.DocumentSymbol[] = [];\n\t\tfor (const info of infos) {\n\t\t\tconst element: languages.DocumentSymbol = {\n\t\t\t\tname: info.name || '!!MISSING: name!!',\n\t\t\t\tkind: typeConvert.SymbolKind.from(info.kind),\n\t\t\t\ttags: info.tags?.map(typeConvert.SymbolTag.from) || [],\n\t\t\t\tdetail: '',\n\t\t\t\tcontainerName: info.containerName,\n\t\t\t\trange: typeConvert.Range.from(info.location.range),\n\t\t\t\tselectionRange: typeConvert.Range.from(info.location.range),\n\t\t\t\tchildren: []\n\t\t\t};\n\n\t\t\twhile (true) {\n\t\t\t\tif (parentStack.length === 0) {\n\t\t\t\t\tparentStack.push(element);\n\t\t\t\t\tres.push(element);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst parent = parentStack[parentStack.length - 1];\n\t\t\t\tif (EditorRange.containsRange(parent.range, element.range) && !EditorRange.equalsRange(parent.range, element.range)) {\n\t\t\t\t\tparent.children?.push(element);\n\t\t\t\t\tparentStack.push(element);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparentStack.pop();\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n}\n\nclass CodeLensAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.CodeLens>('CodeLens');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.CodeLensProvider,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\tprivate readonly _extTelemetry: ExtHostTelemetry,\n\t\tprivate readonly _logService: ILogService,\n\t) { }\n\n\tasync provideCodeLenses(resource: URI, token: CancellationToken): Promise<extHostProtocol.ICodeLensListDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\n\t\tconst lenses = await this._provider.provideCodeLenses(doc, token);\n\t\tif (!lenses || token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst cacheId = this._cache.add(lenses);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(cacheId, disposables);\n\t\tconst result: extHostProtocol.ICodeLensListDto = {\n\t\t\tcacheId,\n\t\t\tlenses: [],\n\t\t};\n\t\tfor (let i = 0; i < lenses.length; i++) {\n\t\t\tresult.lenses.push({\n\t\t\t\tcacheId: [cacheId, i],\n\t\t\t\trange: typeConvert.Range.from(lenses[i].range),\n\t\t\t\tcommand: this._commands.toInternal(lenses[i].command, disposables)\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tasync resolveCodeLens(symbol: extHostProtocol.ICodeLensDto, token: CancellationToken): Promise<extHostProtocol.ICodeLensDto | undefined> {\n\n\t\tconst lens = symbol.cacheId && this._cache.get(...symbol.cacheId);\n\t\tif (!lens) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet resolvedLens: vscode.CodeLens | undefined | null;\n\t\tif (typeof this._provider.resolveCodeLens !== 'function' || lens.isResolved) {\n\t\t\tresolvedLens = lens;\n\t\t} else {\n\t\t\tresolvedLens = await this._provider.resolveCodeLens(lens, token);\n\t\t}\n\t\tif (!resolvedLens) {\n\t\t\tresolvedLens = lens;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst disposables = symbol.cacheId && this._disposables.get(symbol.cacheId[0]);\n\t\tif (!disposables) {\n\t\t\t// disposed in the meantime\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!resolvedLens.command) {\n\t\t\tconst error = new Error('INVALID code lens resolved, lacks command: ' + this._extension.identifier.value);\n\t\t\tthis._extTelemetry.onExtensionError(this._extension.identifier, error);\n\t\t\tthis._logService.error(error);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tsymbol.command = this._commands.toInternal(resolvedLens.command, disposables);\n\t\treturn symbol;\n\t}\n\n\treleaseCodeLenses(cachedId: number): void {\n\t\tthis._disposables.get(cachedId)?.dispose();\n\t\tthis._disposables.delete(cachedId);\n\t\tthis._cache.delete(cachedId);\n\t}\n}\n\nfunction convertToLocationLinks(value: vscode.Location | vscode.Location[] | vscode.LocationLink[] | undefined | null): languages.LocationLink[] {\n\tif (Array.isArray(value)) {\n\t\treturn (<any>value).map(typeConvert.DefinitionLink.from);\n\t} else if (value) {\n\t\treturn [typeConvert.DefinitionLink.from(value)];\n\t}\n\treturn [];\n}\n\nclass DefinitionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DefinitionProvider\n\t) { }\n\n\tasync provideDefinition(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideDefinition(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass DeclarationAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DeclarationProvider\n\t) { }\n\n\tasync provideDeclaration(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideDeclaration(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass ImplementationAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.ImplementationProvider\n\t) { }\n\n\tasync provideImplementation(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideImplementation(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass TypeDefinitionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.TypeDefinitionProvider\n\t) { }\n\n\tasync provideTypeDefinition(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideTypeDefinition(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass HoverAdapter {\n\n\tprivate _hoverCounter: number = 0;\n\tprivate _hoverMap: Map<number, vscode.Hover> = new Map<number, vscode.Hover>();\n\n\tprivate static HOVER_MAP_MAX_SIZE = 10;\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.HoverProvider,\n\t) { }\n\n\tasync provideHover(resource: URI, position: IPosition, context: languages.HoverContext<{ id: number }> | undefined, token: CancellationToken): Promise<extHostProtocol.HoverWithId | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tlet value: vscode.Hover | null | undefined;\n\t\tif (context && context.verbosityRequest) {\n\t\t\tconst previousHoverId = context.verbosityRequest.previousHover.id;\n\t\t\tconst previousHover = this._hoverMap.get(previousHoverId);\n\t\t\tif (!previousHover) {\n\t\t\t\tthrow new Error(`Hover with id ${previousHoverId} not found`);\n\t\t\t}\n\t\t\tconst hoverContext: vscode.HoverContext = { verbosityDelta: context.verbosityRequest.verbosityDelta, previousHover };\n\t\t\tvalue = await this._provider.provideHover(doc, pos, token, hoverContext);\n\t\t} else {\n\t\t\tvalue = await this._provider.provideHover(doc, pos, token);\n\t\t}\n\t\tif (!value || isFalsyOrEmpty(value.contents)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!value.range) {\n\t\t\tvalue.range = doc.getWordRangeAtPosition(pos);\n\t\t}\n\t\tif (!value.range) {\n\t\t\tvalue.range = new Range(pos, pos);\n\t\t}\n\t\tconst convertedHover: languages.Hover = typeConvert.Hover.from(value);\n\t\tconst id = this._hoverCounter;\n\t\t// Check if hover map has more than 10 elements and if yes, remove oldest from the map\n\t\tif (this._hoverMap.size === HoverAdapter.HOVER_MAP_MAX_SIZE) {\n\t\t\tconst minimumId = Math.min(...this._hoverMap.keys());\n\t\t\tthis._hoverMap.delete(minimumId);\n\t\t}\n\t\tthis._hoverMap.set(id, value);\n\t\tthis._hoverCounter += 1;\n\t\tconst hover: extHostProtocol.HoverWithId = {\n\t\t\t...convertedHover,\n\t\t\tid\n\t\t};\n\t\treturn hover;\n\t}\n\n\treleaseHover(id: number): void {\n\t\tthis._hoverMap.delete(id);\n\t}\n}\n\nclass EvaluatableExpressionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.EvaluatableExpressionProvider,\n\t) { }\n\n\tasync provideEvaluatableExpression(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.EvaluatableExpression | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideEvaluatableExpression(doc, pos, token);\n\t\tif (value) {\n\t\t\treturn typeConvert.EvaluatableExpression.from(value);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass InlineValuesAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.InlineValuesProvider,\n\t) { }\n\n\tasync provideInlineValues(resource: URI, viewPort: IRange, context: extHostProtocol.IInlineValueContextDto, token: CancellationToken): Promise<languages.InlineValue[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideInlineValues(doc, typeConvert.Range.to(viewPort), typeConvert.InlineValueContext.to(context), token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(iv => typeConvert.InlineValue.from(iv));\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass DocumentHighlightAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentHighlightProvider\n\t) { }\n\n\tasync provideDocumentHighlights(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.DocumentHighlight[] | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideDocumentHighlights(doc, pos, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.DocumentHighlight.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass MultiDocumentHighlightAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.MultiDocumentHighlightProvider\n\t) { }\n\n\tasync provideMultiDocumentHighlights(resource: URI, position: IPosition, otherResources: URI[], token: CancellationToken): Promise<languages.MultiDocumentHighlight[] | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst otherDocuments = otherResources.map(r => this._documents.getDocument(r));\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideMultiDocumentHighlights(doc, pos, otherDocuments, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.MultiDocumentHighlight.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass LinkedEditingRangeAdapter {\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.LinkedEditingRangeProvider\n\t) { }\n\n\tasync provideLinkedEditingRanges(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LinkedEditingRanges | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideLinkedEditingRanges(doc, pos, token);\n\t\tif (value && Array.isArray(value.ranges)) {\n\t\t\treturn {\n\t\t\t\tranges: coalesce(value.ranges.map(typeConvert.Range.from)),\n\t\t\t\twordPattern: value.wordPattern\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass ReferenceAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.ReferenceProvider\n\t) { }\n\n\tasync provideReferences(resource: URI, position: IPosition, context: languages.ReferenceContext, token: CancellationToken): Promise<languages.Location[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideReferences(doc, pos, context, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.location.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport interface CustomCodeAction extends extHostProtocol.ICodeActionDto {\n\t_isSynthetic?: boolean;\n}\n\nclass CodeActionAdapter {\n\tprivate static readonly _maxCodeActionsPerFile: number = 1000;\n\n\tprivate readonly _cache = new Cache<vscode.CodeAction | vscode.Command>('CodeAction');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _diagnostics: ExtHostDiagnostics,\n\t\tprivate readonly _provider: vscode.CodeActionProvider,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t) { }\n\n\tasync provideCodeActions(resource: URI, rangeOrSelection: IRange | ISelection, context: languages.CodeActionContext, token: CancellationToken): Promise<extHostProtocol.ICodeActionListDto | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst ran = Selection.isISelection(rangeOrSelection)\n\t\t\t? <vscode.Selection>typeConvert.Selection.to(rangeOrSelection)\n\t\t\t: <vscode.Range>typeConvert.Range.to(rangeOrSelection);\n\t\tconst allDiagnostics: vscode.Diagnostic[] = [];\n\n\t\tfor (const diagnostic of this._diagnostics.getDiagnostics(resource)) {\n\t\t\tif (ran.intersection(diagnostic.range)) {\n\t\t\t\tconst newLen = allDiagnostics.push(diagnostic);\n\t\t\t\tif (newLen > CodeActionAdapter._maxCodeActionsPerFile) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst codeActionContext: vscode.CodeActionContext = {\n\t\t\tdiagnostics: allDiagnostics,\n\t\t\tonly: context.only ? new CodeActionKind(context.only) : undefined,\n\t\t\ttriggerKind: typeConvert.CodeActionTriggerKind.to(context.trigger),\n\t\t};\n\n\t\tconst commandsOrActions = await this._provider.provideCodeActions(doc, ran, codeActionContext, token);\n\t\tif (!isNonEmptyArray(commandsOrActions) || token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst cacheId = this._cache.add(commandsOrActions);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(cacheId, disposables);\n\t\tconst actions: CustomCodeAction[] = [];\n\t\tfor (let i = 0; i < commandsOrActions.length; i++) {\n\t\t\tconst candidate = commandsOrActions[i];\n\t\t\tif (!candidate) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (CodeActionAdapter._isCommand(candidate)) {\n\t\t\t\t// old school: synthetic code action\n\t\t\t\tthis._apiDeprecation.report('CodeActionProvider.provideCodeActions - return commands', this._extension,\n\t\t\t\t\t`Return 'CodeAction' instances instead.`);\n\n\t\t\t\tactions.push({\n\t\t\t\t\t_isSynthetic: true,\n\t\t\t\t\ttitle: candidate.title,\n\t\t\t\t\tcommand: this._commands.toInternal(candidate, disposables),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (codeActionContext.only) {\n\t\t\t\t\tif (!candidate.kind) {\n\t\t\t\t\t\tthis._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n\t\t\t\t\t} else if (!codeActionContext.only.contains(candidate.kind)) {\n\t\t\t\t\t\tthis._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Ensures that this is either a Range[] or an empty array so we don't get Array<Range | undefined>\n\t\t\t\tconst range = candidate.ranges ?? [];\n\n\t\t\t\t// new school: convert code action\n\t\t\t\tactions.push({\n\t\t\t\t\tcacheId: [cacheId, i],\n\t\t\t\t\ttitle: candidate.title,\n\t\t\t\t\tcommand: candidate.command && this._commands.toInternal(candidate.command, disposables),\n\t\t\t\t\tdiagnostics: candidate.diagnostics && candidate.diagnostics.map(typeConvert.Diagnostic.from),\n\t\t\t\t\tedit: candidate.edit && typeConvert.WorkspaceEdit.from(candidate.edit, undefined),\n\t\t\t\t\tkind: candidate.kind && candidate.kind.value,\n\t\t\t\t\tisPreferred: candidate.isPreferred,\n\t\t\t\t\tisAI: isProposedApiEnabled(this._extension, 'codeActionAI') ? candidate.isAI : false,\n\t\t\t\t\tranges: isProposedApiEnabled(this._extension, 'codeActionRanges') ? coalesce(range.map(typeConvert.Range.from)) : undefined,\n\t\t\t\t\tdisabled: candidate.disabled?.reason\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn { cacheId, actions };\n\t}\n\n\tasync resolveCodeAction(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ edit?: extHostProtocol.IWorkspaceEditDto; command?: extHostProtocol.ICommandDto }> {\n\t\tconst [sessionId, itemId] = id;\n\t\tconst item = this._cache.get(sessionId, itemId);\n\t\tif (!item || CodeActionAdapter._isCommand(item)) {\n\t\t\treturn {}; // code actions only!\n\t\t}\n\t\tif (!this._provider.resolveCodeAction) {\n\t\t\treturn {}; // this should not happen...\n\t\t}\n\n\n\t\tconst resolvedItem = (await this._provider.resolveCodeAction(item, token)) ?? item;\n\n\t\tlet resolvedEdit: extHostProtocol.IWorkspaceEditDto | undefined;\n\t\tif (resolvedItem.edit) {\n\t\t\tresolvedEdit = typeConvert.WorkspaceEdit.from(resolvedItem.edit, undefined);\n\t\t}\n\n\t\tlet resolvedCommand: extHostProtocol.ICommandDto | undefined;\n\t\tif (resolvedItem.command) {\n\t\t\tconst disposables = this._disposables.get(sessionId);\n\t\t\tif (disposables) {\n\t\t\t\tresolvedCommand = this._commands.toInternal(resolvedItem.command, disposables);\n\t\t\t}\n\t\t}\n\n\t\treturn { edit: resolvedEdit, command: resolvedCommand };\n\t}\n\n\treleaseCodeActions(cachedId: number): void {\n\t\tthis._disposables.get(cachedId)?.dispose();\n\t\tthis._disposables.delete(cachedId);\n\t\tthis._cache.delete(cachedId);\n\t}\n\n\tprivate static _isCommand(thing: any): thing is vscode.Command {\n\t\treturn typeof (<vscode.Command>thing).command === 'string' && typeof (<vscode.Command>thing).title === 'string';\n\t}\n}\n\nclass DocumentPasteEditProvider {\n\n\tprivate readonly _cache = new Cache<vscode.DocumentPasteEdit>('DocumentPasteEdit');\n\n\tconstructor(\n\t\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentPasteEditProvider,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync prepareDocumentPaste(resource: URI, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.DataTransferDTO | undefined> {\n\t\tif (!this._provider.prepareDocumentPaste) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst vscodeRanges = ranges.map(range => typeConvert.Range.to(range));\n\n\t\tconst dataTransfer = typeConvert.DataTransfer.toDataTransfer(dataTransferDto, () => {\n\t\t\tthrow new NotImplementedError();\n\t\t});\n\t\tawait this._provider.prepareDocumentPaste(doc, vscodeRanges, dataTransfer, token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only send back values that have been added to the data transfer\n\t\tconst entries = Array.from(dataTransfer).filter(([, value]) => !(value instanceof InternalDataTransferItem));\n\t\treturn typeConvert.DataTransfer.from(entries);\n\t}\n\n\tasync providePasteEdits(requestId: number, resource: URI, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, context: extHostProtocol.IDocumentPasteContextDto, token: CancellationToken): Promise<extHostProtocol.IPasteEditDto[]> {\n\t\tif (!this._provider.provideDocumentPasteEdits) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst vscodeRanges = ranges.map(range => typeConvert.Range.to(range));\n\n\t\tconst dataTransfer = typeConvert.DataTransfer.toDataTransfer(dataTransferDto, async (id) => {\n\t\t\treturn (await this._proxy.$resolvePasteFileData(this._handle, requestId, id)).buffer;\n\t\t});\n\n\t\tconst edits = await this._provider.provideDocumentPasteEdits(doc, vscodeRanges, dataTransfer, {\n\t\t\tonly: context.only ? new DocumentDropOrPasteEditKind(context.only) : undefined,\n\t\t\ttriggerKind: context.triggerKind,\n\t\t}, token);\n\t\tif (!edits || token.isCancellationRequested) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst cacheId = this._cache.add(edits);\n\n\t\treturn edits.map((edit, i): extHostProtocol.IPasteEditDto => ({\n\t\t\t_cacheId: [cacheId, i],\n\t\t\ttitle: edit.title ?? localize('defaultPasteLabel', \"Paste using '{0}' extension\", this._extension.displayName || this._extension.name),\n\t\t\tkind: edit.kind,\n\t\t\tyieldTo: edit.yieldTo?.map(x => x.value),\n\t\t\tinsertText: typeof edit.insertText === 'string' ? edit.insertText : { snippet: edit.insertText.value },\n\t\t\tadditionalEdit: edit.additionalEdit ? typeConvert.WorkspaceEdit.from(edit.additionalEdit, undefined) : undefined,\n\t\t}));\n\t}\n\n\tasync resolvePasteEdit(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ additionalEdit?: extHostProtocol.IWorkspaceEditDto }> {\n\t\tconst [sessionId, itemId] = id;\n\t\tconst item = this._cache.get(sessionId, itemId);\n\t\tif (!item || !this._provider.resolveDocumentPasteEdit) {\n\t\t\treturn {}; // this should not happen...\n\t\t}\n\n\t\tconst resolvedItem = (await this._provider.resolveDocumentPasteEdit(item, token)) ?? item;\n\t\tconst additionalEdit = resolvedItem.additionalEdit ? typeConvert.WorkspaceEdit.from(resolvedItem.additionalEdit, undefined) : undefined;\n\t\treturn { additionalEdit };\n\t}\n\n\treleasePasteEdits(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass DocumentFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentFormattingEditProvider\n\t) { }\n\n\tasync provideDocumentFormattingEdits(resource: URI, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\n\t\tconst value = await this._provider.provideDocumentFormattingEdits(document, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass RangeFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentRangeFormattingEditProvider\n\t) { }\n\n\tasync provideDocumentRangeFormattingEdits(resource: URI, range: IRange, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst ran = typeConvert.Range.to(range);\n\n\t\tconst value = await this._provider.provideDocumentRangeFormattingEdits(document, ran, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync provideDocumentRangesFormattingEdits(resource: URI, ranges: IRange[], options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\tassertType(typeof this._provider.provideDocumentRangesFormattingEdits === 'function', 'INVALID invocation of `provideDocumentRangesFormattingEdits`');\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst _ranges = <Range[]>ranges.map(typeConvert.Range.to);\n\t\tconst value = await this._provider.provideDocumentRangesFormattingEdits(document, _ranges, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass OnTypeFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.OnTypeFormattingEditProvider\n\t) { }\n\n\tautoFormatTriggerCharacters: string[] = []; // not here\n\n\tasync provideOnTypeFormattingEdits(resource: URI, position: IPosition, ch: string, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideOnTypeFormattingEdits(document, pos, ch, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass NavigateTypeAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.SymbolInformation>('WorkspaceSymbols');\n\n\tconstructor(\n\t\tprivate readonly _provider: vscode.WorkspaceSymbolProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideWorkspaceSymbols(search: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolsDto> {\n\t\tconst value = await this._provider.provideWorkspaceSymbols(search, token);\n\n\t\tif (!isNonEmptyArray(value)) {\n\t\t\treturn { symbols: [] };\n\t\t}\n\n\t\tconst sid = this._cache.add(value);\n\t\tconst result: extHostProtocol.IWorkspaceSymbolsDto = {\n\t\t\tcacheId: sid,\n\t\t\tsymbols: []\n\t\t};\n\n\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\tconst item = value[i];\n\t\t\tif (!item || !item.name) {\n\t\t\t\tthis._logService.warn('INVALID SymbolInformation', item);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tresult.symbols.push({\n\t\t\t\t...typeConvert.WorkspaceSymbol.from(item),\n\t\t\t\tcacheId: [sid, i]\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tasync resolveWorkspaceSymbol(symbol: extHostProtocol.IWorkspaceSymbolDto, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolDto | undefined> {\n\t\tif (typeof this._provider.resolveWorkspaceSymbol !== 'function') {\n\t\t\treturn symbol;\n\t\t}\n\t\tif (!symbol.cacheId) {\n\t\t\treturn symbol;\n\t\t}\n\t\tconst item = this._cache.get(...symbol.cacheId);\n\t\tif (item) {\n\t\t\tconst value = await this._provider.resolveWorkspaceSymbol(item, token);\n\t\t\treturn value && mixin(symbol, typeConvert.WorkspaceSymbol.from(value), true);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\treleaseWorkspaceSymbols(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass RenameAdapter {\n\n\tstatic supportsResolving(provider: vscode.RenameProvider): boolean {\n\t\treturn typeof provider.prepareRename === 'function';\n\t}\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.RenameProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideRenameEdits(resource: URI, position: IPosition, newName: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceEditDto & languages.Rejection | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\ttry {\n\t\t\tconst value = await this._provider.provideRenameEdits(doc, pos, newName, token);\n\t\t\tif (!value) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn typeConvert.WorkspaceEdit.from(value);\n\n\t\t} catch (err) {\n\t\t\tconst rejectReason = RenameAdapter._asMessage(err);\n\t\t\tif (rejectReason) {\n\t\t\t\treturn { rejectReason, edits: undefined! };\n\t\t\t} else {\n\t\t\t\t// generic error\n\t\t\t\treturn Promise.reject<extHostProtocol.IWorkspaceEditDto>(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync resolveRenameLocation(resource: URI, position: IPosition, token: CancellationToken): Promise<(languages.RenameLocation & languages.Rejection) | undefined> {\n\t\tif (typeof this._provider.prepareRename !== 'function') {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\ttry {\n\t\t\tconst rangeOrLocation = await this._provider.prepareRename(doc, pos, token);\n\n\t\t\tlet range: vscode.Range | undefined;\n\t\t\tlet text: string | undefined;\n\t\t\tif (Range.isRange(rangeOrLocation)) {\n\t\t\t\trange = rangeOrLocation;\n\t\t\t\ttext = doc.getText(rangeOrLocation);\n\n\t\t\t} else if (isObject(rangeOrLocation)) {\n\t\t\t\trange = rangeOrLocation.range;\n\t\t\t\ttext = rangeOrLocation.placeholder;\n\t\t\t}\n\n\t\t\tif (!range || !text) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tif (range.start.line > pos.line || range.end.line < pos.line) {\n\t\t\t\tthis._logService.warn('INVALID rename location: position line must be within range start/end lines');\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn { range: typeConvert.Range.from(range), text };\n\n\t\t} catch (err) {\n\t\t\tconst rejectReason = RenameAdapter._asMessage(err);\n\t\t\tif (rejectReason) {\n\t\t\t\treturn { rejectReason, range: undefined!, text: undefined! };\n\t\t\t} else {\n\t\t\t\treturn Promise.reject<any>(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static _asMessage(err: any): string | undefined {\n\t\tif (typeof err === 'string') {\n\t\t\treturn err;\n\t\t} else if (err instanceof Error && typeof err.message === 'string') {\n\t\t\treturn err.message;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nclass NewSymbolNamesAdapter {\n\n\tprivate static languageTriggerKindToVSCodeTriggerKind: Record<languages.NewSymbolNameTriggerKind, vscode.NewSymbolNameTriggerKind> = {\n\t\t[languages.NewSymbolNameTriggerKind.Invoke]: NewSymbolNameTriggerKind.Invoke,\n\t\t[languages.NewSymbolNameTriggerKind.Automatic]: NewSymbolNameTriggerKind.Automatic,\n\t};\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.NewSymbolNamesProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync supportsAutomaticNewSymbolNamesTriggerKind() {\n\t\treturn this._provider.supportsAutomaticTriggerKind;\n\t}\n\n\tasync provideNewSymbolNames(resource: URI, range: IRange, triggerKind: languages.NewSymbolNameTriggerKind, token: CancellationToken): Promise<languages.NewSymbolName[] | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Range.to(range);\n\n\t\ttry {\n\t\t\tconst kind = NewSymbolNamesAdapter.languageTriggerKindToVSCodeTriggerKind[triggerKind];\n\t\t\tconst value = await this._provider.provideNewSymbolNames(doc, pos, kind, token);\n\t\t\tif (!value) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn value.map(v =>\n\t\t\t\ttypeof v === 'string' /* @ulugbekna: for backward compatibility because `value` used to be just `string[]` */\n\t\t\t\t\t? { newSymbolName: v }\n\t\t\t\t\t: { newSymbolName: v.newSymbolName, tags: v.tags }\n\t\t\t);\n\t\t} catch (err: unknown) {\n\t\t\tthis._logService.error(NewSymbolNamesAdapter._asMessage(err) ?? JSON.stringify(err, null, '\\t') /* @ulugbekna: assuming `err` doesn't have circular references that could result in an exception when converting to JSON */);\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t// @ulugbekna: this method is also defined in RenameAdapter but seems OK to be duplicated\n\tprivate static _asMessage(err: any): string | undefined {\n\t\tif (typeof err === 'string') {\n\t\t\treturn err;\n\t\t} else if (err instanceof Error && typeof err.message === 'string') {\n\t\t\treturn err.message;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nclass SemanticTokensPreviousResult {\n\tconstructor(\n\t\treadonly resultId: string | undefined,\n\t\treadonly tokens?: Uint32Array,\n\t) { }\n}\n\ntype RelaxedSemanticTokens = { readonly resultId?: string; readonly data: number[] };\ntype RelaxedSemanticTokensEdit = { readonly start: number; readonly deleteCount: number; readonly data?: number[] };\ntype RelaxedSemanticTokensEdits = { readonly resultId?: string; readonly edits: RelaxedSemanticTokensEdit[] };\n\ntype ProvidedSemanticTokens = vscode.SemanticTokens | RelaxedSemanticTokens;\ntype ProvidedSemanticTokensEdits = vscode.SemanticTokensEdits | RelaxedSemanticTokensEdits;\n\nclass DocumentSemanticTokensAdapter {\n\n\tprivate readonly _previousResults: Map<number, SemanticTokensPreviousResult>;\n\tprivate _nextResultId = 1;\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentSemanticTokensProvider,\n\t) {\n\t\tthis._previousResults = new Map<number, SemanticTokensPreviousResult>();\n\t}\n\n\tasync provideDocumentSemanticTokens(resource: URI, previousResultId: number, token: CancellationToken): Promise<VSBuffer | null> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst previousResult = (previousResultId !== 0 ? this._previousResults.get(previousResultId) : null);\n\t\tlet value = typeof previousResult?.resultId === 'string' && typeof this._provider.provideDocumentSemanticTokensEdits === 'function'\n\t\t\t? await this._provider.provideDocumentSemanticTokensEdits(doc, previousResult.resultId, token)\n\t\t\t: await this._provider.provideDocumentSemanticTokens(doc, token);\n\n\t\tif (previousResult) {\n\t\t\tthis._previousResults.delete(previousResultId);\n\t\t}\n\t\tif (!value) {\n\t\t\treturn null;\n\t\t}\n\t\tvalue = DocumentSemanticTokensAdapter._fixProvidedSemanticTokens(value);\n\t\treturn this._send(DocumentSemanticTokensAdapter._convertToEdits(previousResult, value), value);\n\t}\n\n\tasync releaseDocumentSemanticColoring(semanticColoringResultId: number): Promise<void> {\n\t\tthis._previousResults.delete(semanticColoringResultId);\n\t}\n\n\tprivate static _fixProvidedSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): vscode.SemanticTokens | vscode.SemanticTokensEdits {\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(v)) {\n\t\t\tif (DocumentSemanticTokensAdapter._isCorrectSemanticTokens(v)) {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\treturn new SemanticTokens(new Uint32Array(v.data), v.resultId);\n\t\t} else if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(v)) {\n\t\t\tif (DocumentSemanticTokensAdapter._isCorrectSemanticTokensEdits(v)) {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\treturn new SemanticTokensEdits(v.edits.map(edit => new SemanticTokensEdit(edit.start, edit.deleteCount, edit.data ? new Uint32Array(edit.data) : edit.data)), v.resultId);\n\t\t}\n\t\treturn v;\n\t}\n\n\tprivate static _isSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokens {\n\t\treturn v && !!((v as ProvidedSemanticTokens).data);\n\t}\n\n\tprivate static _isCorrectSemanticTokens(v: ProvidedSemanticTokens): v is vscode.SemanticTokens {\n\t\treturn (v.data instanceof Uint32Array);\n\t}\n\n\tprivate static _isSemanticTokensEdits(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokensEdits {\n\t\treturn v && Array.isArray((v as ProvidedSemanticTokensEdits).edits);\n\t}\n\n\tprivate static _isCorrectSemanticTokensEdits(v: ProvidedSemanticTokensEdits): v is vscode.SemanticTokensEdits {\n\t\tfor (const edit of v.edits) {\n\t\t\tif (!(edit.data instanceof Uint32Array)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate static _convertToEdits(previousResult: SemanticTokensPreviousResult | null | undefined, newResult: vscode.SemanticTokens | vscode.SemanticTokensEdits): vscode.SemanticTokens | vscode.SemanticTokensEdits {\n\t\tif (!DocumentSemanticTokensAdapter._isSemanticTokens(newResult)) {\n\t\t\treturn newResult;\n\t\t}\n\t\tif (!previousResult || !previousResult.tokens) {\n\t\t\treturn newResult;\n\t\t}\n\t\tconst oldData = previousResult.tokens;\n\t\tconst oldLength = oldData.length;\n\t\tconst newData = newResult.data;\n\t\tconst newLength = newData.length;\n\n\t\tlet commonPrefixLength = 0;\n\t\tconst maxCommonPrefixLength = Math.min(oldLength, newLength);\n\t\twhile (commonPrefixLength < maxCommonPrefixLength && oldData[commonPrefixLength] === newData[commonPrefixLength]) {\n\t\t\tcommonPrefixLength++;\n\t\t}\n\n\t\tif (commonPrefixLength === oldLength && commonPrefixLength === newLength) {\n\t\t\t// complete overlap!\n\t\t\treturn new SemanticTokensEdits([], newResult.resultId);\n\t\t}\n\n\t\tlet commonSuffixLength = 0;\n\t\tconst maxCommonSuffixLength = maxCommonPrefixLength - commonPrefixLength;\n\t\twhile (commonSuffixLength < maxCommonSuffixLength && oldData[oldLength - commonSuffixLength - 1] === newData[newLength - commonSuffixLength - 1]) {\n\t\t\tcommonSuffixLength++;\n\t\t}\n\n\t\treturn new SemanticTokensEdits([{\n\t\t\tstart: commonPrefixLength,\n\t\t\tdeleteCount: (oldLength - commonPrefixLength - commonSuffixLength),\n\t\t\tdata: newData.subarray(commonPrefixLength, newLength - commonSuffixLength)\n\t\t}], newResult.resultId);\n\t}\n\n\tprivate _send(value: vscode.SemanticTokens | vscode.SemanticTokensEdits, original: vscode.SemanticTokens | vscode.SemanticTokensEdits): VSBuffer | null {\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(value)) {\n\t\t\tconst myId = this._nextResultId++;\n\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId, value.data));\n\t\t\treturn encodeSemanticTokensDto({\n\t\t\t\tid: myId,\n\t\t\t\ttype: 'full',\n\t\t\t\tdata: value.data\n\t\t\t});\n\t\t}\n\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokensEdits(value)) {\n\t\t\tconst myId = this._nextResultId++;\n\t\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(original)) {\n\t\t\t\t// store the original\n\t\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(original.resultId, original.data));\n\t\t\t} else {\n\t\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId));\n\t\t\t}\n\t\t\treturn encodeSemanticTokensDto({\n\t\t\t\tid: myId,\n\t\t\t\ttype: 'delta',\n\t\t\t\tdeltas: (value.edits || []).map(edit => ({ start: edit.start, deleteCount: edit.deleteCount, data: edit.data }))\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nclass DocumentRangeSemanticTokensAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentRangeSemanticTokensProvider,\n\t) { }\n\n\tasync provideDocumentRangeSemanticTokens(resource: URI, range: IRange, token: CancellationToken): Promise<VSBuffer | null> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideDocumentRangeSemanticTokens(doc, typeConvert.Range.to(range), token);\n\t\tif (!value) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._send(value);\n\t}\n\n\tprivate _send(value: vscode.SemanticTokens): VSBuffer {\n\t\treturn encodeSemanticTokensDto({\n\t\t\tid: 0,\n\t\t\ttype: 'full',\n\t\t\tdata: value.data\n\t\t});\n\t}\n}\n\nclass CompletionsAdapter {\n\n\tstatic supportsResolving(provider: vscode.CompletionItemProvider): boolean {\n\t\treturn typeof provider.resolveCompletionItem === 'function';\n\t}\n\n\tprivate _cache = new Cache<vscode.CompletionItem>('CompletionItem');\n\tprivate _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.CompletionItemProvider,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync provideCompletionItems(resource: URI, position: IPosition, context: languages.CompletionContext, token: CancellationToken): Promise<extHostProtocol.ISuggestResultDto | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\t// The default insert/replace ranges. It's important to compute them\n\t\t// before asynchronously asking the provider for its results. See\n\t\t// https://github.com/microsoft/vscode/issues/83400#issuecomment-546851421\n\t\tconst replaceRange = doc.getWordRangeAtPosition(pos) || new Range(pos, pos);\n\t\tconst insertRange = replaceRange.with({ end: pos });\n\n\t\tconst sw = new StopWatch();\n\t\tconst itemsOrList = await this._provider.provideCompletionItems(doc, pos, token, typeConvert.CompletionContext.to(context));\n\n\t\tif (!itemsOrList) {\n\t\t\t// undefined and null are valid results\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst list = Array.isArray(itemsOrList) ? new CompletionList(itemsOrList) : itemsOrList;\n\n\t\t// keep result for providers that support resolving\n\t\tconst pid: number = CompletionsAdapter.supportsResolving(this._provider) ? this._cache.add(list.items) : this._cache.add([]);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(pid, disposables);\n\n\t\tconst completions: extHostProtocol.ISuggestDataDto[] = [];\n\t\tconst result: extHostProtocol.ISuggestResultDto = {\n\t\t\tx: pid,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.completions]: completions,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.defaultRanges]: { replace: typeConvert.Range.from(replaceRange), insert: typeConvert.Range.from(insertRange) },\n\t\t\t[extHostProtocol.ISuggestResultDtoField.isIncomplete]: list.isIncomplete || undefined,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.duration]: sw.elapsed()\n\t\t};\n\n\t\tfor (let i = 0; i < list.items.length; i++) {\n\t\t\tconst item = list.items[i];\n\t\t\t// check for bad completion item first\n\t\t\tconst dto = this._convertCompletionItem(item, [pid, i], insertRange, replaceRange);\n\t\t\tcompletions.push(dto);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tasync resolveCompletionItem(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ISuggestDataDto | undefined> {\n\n\t\tif (typeof this._provider.resolveCompletionItem !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst dto1 = this._convertCompletionItem(item, id);\n\n\t\tconst resolvedItem = await this._provider.resolveCompletionItem(item, token);\n\n\t\tif (!resolvedItem) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst dto2 = this._convertCompletionItem(resolvedItem, id);\n\n\t\tif (dto1[extHostProtocol.ISuggestDataDtoField.insertText] !== dto2[extHostProtocol.ISuggestDataDtoField.insertText]\n\t\t\t|| dto1[extHostProtocol.ISuggestDataDtoField.insertTextRules] !== dto2[extHostProtocol.ISuggestDataDtoField.insertTextRules]\n\t\t) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.insertText', this._extension, 'extension MAY NOT change \\'insertText\\' of a CompletionItem during resolve');\n\t\t}\n\n\t\tif (dto1[extHostProtocol.ISuggestDataDtoField.commandIdent] !== dto2[extHostProtocol.ISuggestDataDtoField.commandIdent]\n\t\t\t|| dto1[extHostProtocol.ISuggestDataDtoField.commandId] !== dto2[extHostProtocol.ISuggestDataDtoField.commandId]\n\t\t\t|| !equals(dto1[extHostProtocol.ISuggestDataDtoField.commandArguments], dto2[extHostProtocol.ISuggestDataDtoField.commandArguments])\n\t\t) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.command', this._extension, 'extension MAY NOT change \\'command\\' of a CompletionItem during resolve');\n\t\t}\n\n\t\treturn {\n\t\t\t...dto1,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.documentation]: dto2[extHostProtocol.ISuggestDataDtoField.documentation],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.detail]: dto2[extHostProtocol.ISuggestDataDtoField.detail],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.additionalTextEdits]: dto2[extHostProtocol.ISuggestDataDtoField.additionalTextEdits],\n\n\t\t\t// (fishy) async insertText\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertText]: dto2[extHostProtocol.ISuggestDataDtoField.insertText],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertTextRules]: dto2[extHostProtocol.ISuggestDataDtoField.insertTextRules],\n\n\t\t\t// (fishy) async command\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandIdent]: dto2[extHostProtocol.ISuggestDataDtoField.commandIdent],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandId]: dto2[extHostProtocol.ISuggestDataDtoField.commandId],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandArguments]: dto2[extHostProtocol.ISuggestDataDtoField.commandArguments],\n\t\t};\n\t}\n\n\treleaseCompletionItems(id: number): any {\n\t\tthis._disposables.get(id)?.dispose();\n\t\tthis._disposables.delete(id);\n\t\tthis._cache.delete(id);\n\t}\n\n\tprivate _convertCompletionItem(item: vscode.CompletionItem, id: extHostProtocol.ChainedCacheId, defaultInsertRange?: vscode.Range, defaultReplaceRange?: vscode.Range): extHostProtocol.ISuggestDataDto {\n\n\t\tconst disposables = this._disposables.get(id[0]);\n\t\tif (!disposables) {\n\t\t\tthrow Error('DisposableStore is missing...');\n\t\t}\n\n\t\tconst command = this._commands.toInternal(item.command, disposables);\n\t\tconst result: extHostProtocol.ISuggestDataDto = {\n\t\t\t//\n\t\t\tx: id,\n\t\t\t//\n\t\t\t[extHostProtocol.ISuggestDataDtoField.label]: item.label,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.kind]: item.kind !== undefined ? typeConvert.CompletionItemKind.from(item.kind) : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.kindModifier]: item.tags && item.tags.map(typeConvert.CompletionItemTag.from),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.detail]: item.detail,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.documentation]: typeof item.documentation === 'undefined' ? undefined : typeConvert.MarkdownString.fromStrict(item.documentation),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.sortText]: item.sortText !== item.label ? item.sortText : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.filterText]: item.filterText !== item.label ? item.filterText : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.preselect]: item.preselect || undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertTextRules]: item.keepWhitespace ? languages.CompletionItemInsertTextRule.KeepWhitespace : languages.CompletionItemInsertTextRule.None,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commitCharacters]: item.commitCharacters?.join(''),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.additionalTextEdits]: item.additionalTextEdits && item.additionalTextEdits.map(typeConvert.TextEdit.from),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandIdent]: command?.$ident,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandId]: command?.id,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandArguments]: command?.$ident ? undefined : command?.arguments, // filled in on main side from $ident\n\t\t};\n\n\t\t// 'insertText'-logic\n\t\tif (item.textEdit) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.textEdit', this._extension, `Use 'CompletionItem.insertText' and 'CompletionItem.range' instead.`);\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.textEdit.newText;\n\n\t\t} else if (typeof item.insertText === 'string') {\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.insertText;\n\n\t\t} else if (item.insertText instanceof SnippetString) {\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.insertText.value;\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertTextRules]! |= languages.CompletionItemInsertTextRule.InsertAsSnippet;\n\t\t}\n\n\t\t// 'overwrite[Before|After]'-logic\n\t\tlet range: vscode.Range | { inserting: vscode.Range; replacing: vscode.Range } | undefined;\n\t\tif (item.textEdit) {\n\t\t\trange = item.textEdit.range;\n\t\t} else if (item.range) {\n\t\t\trange = item.range;\n\t\t}\n\n\t\tif (Range.isRange(range)) {\n\t\t\t// \"old\" range\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.range] = typeConvert.Range.from(range);\n\n\t\t} else if (range && (!defaultInsertRange?.isEqual(range.inserting) || !defaultReplaceRange?.isEqual(range.replacing))) {\n\t\t\t// ONLY send range when it's different from the default ranges (safe bandwidth)\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.range] = {\n\t\t\t\tinsert: typeConvert.Range.from(range.inserting),\n\t\t\t\treplace: typeConvert.Range.from(range.replacing)\n\t\t\t};\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nclass InlineCompletionAdapterBase {\n\tasync provideInlineCompletions(resource: URI, position: IPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\treturn undefined;\n\t}\n\n\tasync provideInlineEditsForRange(resource: URI, range: IRange, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\treturn undefined;\n\t}\n\n\tdisposeCompletions(pid: number): void { }\n\n\thandleDidShowCompletionItem(pid: number, idx: number, updatedInsertText: string): void { }\n\n\thandlePartialAccept(pid: number, idx: number, acceptedCharacters: number, info: languages.PartialAcceptInfo): void { }\n}\n\nclass InlineCompletionAdapter extends InlineCompletionAdapterBase {\n\tprivate readonly _references = new ReferenceMap<{\n\t\tdispose(): void;\n\t\titems: readonly vscode.InlineCompletionItem[];\n\t}>();\n\n\tprivate readonly _isAdditionsProposedApiEnabled = isProposedApiEnabled(this._extension, 'inlineCompletionsAdditions');\n\n\tconstructor(\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.InlineCompletionItemProvider,\n\t\tprivate readonly _commands: CommandsConverter,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic get supportsHandleEvents(): boolean {\n\t\treturn isProposedApiEnabled(this._extension, 'inlineCompletionsAdditions')\n\t\t\t&& (typeof this._provider.handleDidShowCompletionItem === 'function'\n\t\t\t\t|| typeof this._provider.handleDidPartiallyAcceptCompletionItem === 'function');\n\t}\n\n\tprivate readonly languageTriggerKindToVSCodeTriggerKind: Record<languages.InlineCompletionTriggerKind, InlineCompletionTriggerKind> = {\n\t\t[languages.InlineCompletionTriggerKind.Automatic]: InlineCompletionTriggerKind.Automatic,\n\t\t[languages.InlineCompletionTriggerKind.Explicit]: InlineCompletionTriggerKind.Invoke,\n\t};\n\n\toverride async provideInlineCompletions(resource: URI, position: IPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst result = await this._provider.provideInlineCompletionItems(doc, pos, {\n\t\t\tselectedCompletionInfo:\n\t\t\t\tcontext.selectedSuggestionInfo\n\t\t\t\t\t? {\n\t\t\t\t\t\trange: typeConvert.Range.to(context.selectedSuggestionInfo.range),\n\t\t\t\t\t\ttext: context.selectedSuggestionInfo.text\n\t\t\t\t\t}\n\t\t\t\t\t: undefined,\n\t\t\ttriggerKind: this.languageTriggerKindToVSCodeTriggerKind[context.triggerKind]\n\t\t}, token);\n\n\t\tif (!result) {\n\t\t\t// undefined and null are valid results\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst normalizedResult = Array.isArray(result) ? result : result.items;\n\t\tconst commands = this._isAdditionsProposedApiEnabled ? Array.isArray(result) ? [] : result.commands || [] : [];\n\t\tconst enableForwardStability = this._isAdditionsProposedApiEnabled && !Array.isArray(result) ? result.enableForwardStability : undefined;\n\n\t\tlet disposableStore: DisposableStore | undefined = undefined;\n\t\tconst pid = this._references.createReferenceId({\n\t\t\tdispose() {\n\t\t\t\tdisposableStore?.dispose();\n\t\t\t},\n\t\t\titems: normalizedResult\n\t\t});\n\n\t\treturn {\n\t\t\tpid,\n\t\t\titems: normalizedResult.map<extHostProtocol.IdentifiableInlineCompletion>((item, idx) => {\n\t\t\t\tlet command: languages.Command | undefined = undefined;\n\t\t\t\tif (item.command) {\n\t\t\t\t\tif (!disposableStore) {\n\t\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t\t}\n\t\t\t\t\tcommand = this._commands.toInternal(item.command, disposableStore);\n\t\t\t\t}\n\n\t\t\t\tconst insertText = item.insertText;\n\t\t\t\treturn ({\n\t\t\t\t\tinsertText: typeof insertText === 'string' ? insertText : { snippet: insertText.value },\n\t\t\t\t\tfilterText: item.filterText,\n\t\t\t\t\trange: item.range ? typeConvert.Range.from(item.range) : undefined,\n\t\t\t\t\tcommand,\n\t\t\t\t\tidx: idx,\n\t\t\t\t\tcompleteBracketPairs: this._isAdditionsProposedApiEnabled ? item.completeBracketPairs : false,\n\t\t\t\t});\n\t\t\t}),\n\t\t\tcommands: commands.map(c => {\n\t\t\t\tif (!disposableStore) {\n\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t}\n\t\t\t\treturn this._commands.toInternal(c, disposableStore);\n\t\t\t}),\n\t\t\tsuppressSuggestions: false,\n\t\t\tenableForwardStability,\n\t\t};\n\t}\n\n\toverride async provideInlineEditsForRange(resource: URI, range: IRange, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\tif (!this._provider.provideInlineEditsForRange) {\n\t\t\treturn undefined;\n\t\t}\n\t\tcheckProposedApiEnabled(this._extension, 'inlineCompletionsAdditions');\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst r = typeConvert.Range.to(range);\n\n\t\tconst result = await this._provider.provideInlineEditsForRange(doc, r, {\n\t\t\tselectedCompletionInfo:\n\t\t\t\tcontext.selectedSuggestionInfo\n\t\t\t\t\t? {\n\t\t\t\t\t\trange: typeConvert.Range.to(context.selectedSuggestionInfo.range),\n\t\t\t\t\t\ttext: context.selectedSuggestionInfo.text\n\t\t\t\t\t}\n\t\t\t\t\t: undefined,\n\t\t\ttriggerKind: this.languageTriggerKindToVSCodeTriggerKind[context.triggerKind],\n\t\t\tuserPrompt: context.userPrompt,\n\t\t}, token);\n\n\t\tif (!result) {\n\t\t\t// undefined and null are valid results\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst normalizedResult = Array.isArray(result) ? result : result.items;\n\t\tconst commands = this._isAdditionsProposedApiEnabled ? Array.isArray(result) ? [] : result.commands || [] : [];\n\t\tconst enableForwardStability = this._isAdditionsProposedApiEnabled && !Array.isArray(result) ? result.enableForwardStability : undefined;\n\n\t\tlet disposableStore: DisposableStore | undefined = undefined;\n\t\tconst pid = this._references.createReferenceId({\n\t\t\tdispose() {\n\t\t\t\tdisposableStore?.dispose();\n\t\t\t},\n\t\t\titems: normalizedResult\n\t\t});\n\n\t\treturn {\n\t\t\tpid,\n\t\t\titems: normalizedResult.map<extHostProtocol.IdentifiableInlineCompletion>((item, idx) => {\n\t\t\t\tlet command: languages.Command | undefined = undefined;\n\t\t\t\tif (item.command) {\n\t\t\t\t\tif (!disposableStore) {\n\t\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t\t}\n\t\t\t\t\tcommand = this._commands.toInternal(item.command, disposableStore);\n\t\t\t\t}\n\n\t\t\t\tconst insertText = item.insertText;\n\t\t\t\treturn ({\n\t\t\t\t\tinsertText: typeof insertText === 'string' ? insertText : { snippet: insertText.value },\n\t\t\t\t\tfilterText: item.filterText,\n\t\t\t\t\trange: item.range ? typeConvert.Range.from(item.range) : undefined,\n\t\t\t\t\tcommand,\n\t\t\t\t\tidx: idx,\n\t\t\t\t\tcompleteBracketPairs: this._isAdditionsProposedApiEnabled ? item.completeBracketPairs : false,\n\t\t\t\t});\n\t\t\t}),\n\t\t\tcommands: commands.map(c => {\n\t\t\t\tif (!disposableStore) {\n\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t}\n\t\t\t\treturn this._commands.toInternal(c, disposableStore);\n\t\t\t}),\n\t\t\tsuppressSuggestions: false,\n\t\t\tenableForwardStability,\n\t\t};\n\t}\n\n\toverride disposeCompletions(pid: number) {\n\t\tconst data = this._references.disposeReferenceId(pid);\n\t\tdata?.dispose();\n\t}\n\n\toverride handleDidShowCompletionItem(pid: number, idx: number, updatedInsertText: string): void {\n\t\tconst completionItem = this._references.get(pid)?.items[idx];\n\t\tif (completionItem) {\n\t\t\tif (this._provider.handleDidShowCompletionItem && this._isAdditionsProposedApiEnabled) {\n\t\t\t\tthis._provider.handleDidShowCompletionItem(completionItem, updatedInsertText);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride handlePartialAccept(pid: number, idx: number, acceptedCharacters: number, info: languages.PartialAcceptInfo): void {\n\t\tconst completionItem = this._references.get(pid)?.items[idx];\n\t\tif (completionItem) {\n\t\t\tif (this._provider.handleDidPartiallyAcceptCompletionItem && this._isAdditionsProposedApiEnabled) {\n\t\t\t\tthis._provider.handleDidPartiallyAcceptCompletionItem(completionItem, acceptedCharacters);\n\t\t\t\tthis._provider.handleDidPartiallyAcceptCompletionItem(completionItem, typeConvert.PartialAcceptInfo.to(info));\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass InlineEditAdapter {\n\tprivate readonly _references = new ReferenceMap<{\n\t\tdispose(): void;\n\t\titem: vscode.InlineEdit;\n\t}>();\n\n\tprivate languageTriggerKindToVSCodeTriggerKind: Record<languages.InlineEditTriggerKind, InlineEditTriggerKind> = {\n\t\t[languages.InlineEditTriggerKind.Automatic]: InlineEditTriggerKind.Automatic,\n\t\t[languages.InlineEditTriggerKind.Invoke]: InlineEditTriggerKind.Invoke,\n\t};\n\n\tasync provideInlineEdits(uri: URI, context: languages.IInlineEditContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineEdit | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst result = await this._provider.provideInlineEdit(doc, {\n\t\t\ttriggerKind: this.languageTriggerKindToVSCodeTriggerKind[context.triggerKind]\n\t\t}, token);\n\n\t\tif (!result) {\n\t\t\t// undefined and null are valid results\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\t\tlet disposableStore: DisposableStore | undefined = undefined;\n\t\tconst pid = this._references.createReferenceId({\n\t\t\tdispose() {\n\t\t\t\tdisposableStore?.dispose();\n\t\t\t},\n\t\t\titem: result\n\t\t});\n\n\t\tlet acceptCommand: languages.Command | undefined = undefined;\n\t\tif (result.accepted) {\n\t\t\tif (!disposableStore) {\n\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t}\n\t\t\tacceptCommand = this._commands.toInternal(result.accepted, disposableStore);\n\t\t}\n\t\tlet rejectCommand: languages.Command | undefined = undefined;\n\t\tif (result.rejected) {\n\t\t\tif (!disposableStore) {\n\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t}\n\t\t\trejectCommand = this._commands.toInternal(result.rejected, disposableStore);\n\t\t}\n\n\t\tconst langResult: extHostProtocol.IdentifiableInlineEdit = {\n\t\t\tpid,\n\t\t\ttext: result.text,\n\t\t\trange: typeConvert.Range.from(result.range),\n\t\t\taccepted: acceptCommand,\n\t\t\trejected: rejectCommand,\n\t\t};\n\n\t\treturn langResult;\n\t}\n\n\tdisposeEdit(pid: number) {\n\t\tconst data = this._references.disposeReferenceId(pid);\n\t\tdata?.dispose();\n\t}\n\n\tconstructor(\n\t\t_extension: IExtensionDescription,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.InlineEditProvider,\n\t\tprivate readonly _commands: CommandsConverter,\n\t) {\n\t}\n}\n\nclass ReferenceMap<T> {\n\tprivate readonly _references = new Map<number, T>();\n\tprivate _idPool = 1;\n\n\tcreateReferenceId(value: T): number {\n\t\tconst id = this._idPool++;\n\t\tthis._references.set(id, value);\n\t\treturn id;\n\t}\n\n\tdisposeReferenceId(referenceId: number): T | undefined {\n\t\tconst value = this._references.get(referenceId);\n\t\tthis._references.delete(referenceId);\n\t\treturn value;\n\t}\n\n\tget(referenceId: number): T | undefined {\n\t\treturn this._references.get(referenceId);\n\t}\n}\n\nclass SignatureHelpAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.SignatureHelp>('SignatureHelp');\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.SignatureHelpProvider,\n\t) { }\n\n\tasync provideSignatureHelp(resource: URI, position: IPosition, context: extHostProtocol.ISignatureHelpContextDto, token: CancellationToken): Promise<extHostProtocol.ISignatureHelpDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst vscodeContext = this.reviveContext(context);\n\n\t\tconst value = await this._provider.provideSignatureHelp(doc, pos, token, vscodeContext);\n\t\tif (value) {\n\t\t\tconst id = this._cache.add([value]);\n\t\t\treturn { ...typeConvert.SignatureHelp.from(value), id };\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate reviveContext(context: extHostProtocol.ISignatureHelpContextDto): vscode.SignatureHelpContext {\n\t\tlet activeSignatureHelp: vscode.SignatureHelp | undefined = undefined;\n\t\tif (context.activeSignatureHelp) {\n\t\t\tconst revivedSignatureHelp = typeConvert.SignatureHelp.to(context.activeSignatureHelp);\n\t\t\tconst saved = this._cache.get(context.activeSignatureHelp.id, 0);\n\t\t\tif (saved) {\n\t\t\t\tactiveSignatureHelp = saved;\n\t\t\t\tactiveSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n\t\t\t\tactiveSignatureHelp.activeParameter = revivedSignatureHelp.activeParameter;\n\t\t\t} else {\n\t\t\t\tactiveSignatureHelp = revivedSignatureHelp;\n\t\t\t}\n\t\t}\n\t\treturn { ...context, activeSignatureHelp };\n\t}\n\n\treleaseSignatureHelp(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass InlayHintsAdapter {\n\n\tprivate _cache = new Cache<vscode.InlayHint>('InlayHints');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.InlayHintsProvider,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _extension: IExtensionDescription\n\t) { }\n\n\tasync provideInlayHints(resource: URI, ran: IRange, token: CancellationToken): Promise<extHostProtocol.IInlayHintsDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst range = typeConvert.Range.to(ran);\n\n\t\tconst hints = await this._provider.provideInlayHints(doc, range, token);\n\t\tif (!Array.isArray(hints) || hints.length === 0) {\n\t\t\t// bad result\n\t\t\tthis._logService.trace(`[InlayHints] NO inlay hints from '${this._extension.identifier.value}' for range ${JSON.stringify(ran)}`);\n\t\t\treturn undefined;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\t\tconst pid = this._cache.add(hints);\n\t\tthis._disposables.set(pid, new DisposableStore());\n\t\tconst result: extHostProtocol.IInlayHintsDto = { hints: [], cacheId: pid };\n\t\tfor (let i = 0; i < hints.length; i++) {\n\t\t\tif (this._isValidInlayHint(hints[i], range)) {\n\t\t\t\tresult.hints.push(this._convertInlayHint(hints[i], [pid, i]));\n\t\t\t}\n\t\t}\n\t\tthis._logService.trace(`[InlayHints] ${result.hints.length} inlay hints from '${this._extension.identifier.value}' for range ${JSON.stringify(ran)}`);\n\t\treturn result;\n\t}\n\n\tasync resolveInlayHint(id: extHostProtocol.ChainedCacheId, token: CancellationToken) {\n\t\tif (typeof this._provider.resolveInlayHint !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst hint = await this._provider.resolveInlayHint(item, token);\n\t\tif (!hint) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this._isValidInlayHint(hint)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._convertInlayHint(hint, id);\n\t}\n\n\treleaseHints(id: number): any {\n\t\tthis._disposables.get(id)?.dispose();\n\t\tthis._disposables.delete(id);\n\t\tthis._cache.delete(id);\n\t}\n\n\tprivate _isValidInlayHint(hint: vscode.InlayHint, range?: vscode.Range): boolean {\n\t\tif (hint.label.length === 0 || Array.isArray(hint.label) && hint.label.every(part => part.value.length === 0)) {\n\t\t\tconsole.log('INVALID inlay hint, empty label', hint);\n\t\t\treturn false;\n\t\t}\n\t\tif (range && !range.contains(hint.position)) {\n\t\t\t// console.log('INVALID inlay hint, position outside range', range, hint);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate _convertInlayHint(hint: vscode.InlayHint, id: extHostProtocol.ChainedCacheId): extHostProtocol.IInlayHintDto {\n\n\t\tconst disposables = this._disposables.get(id[0]);\n\t\tif (!disposables) {\n\t\t\tthrow Error('DisposableStore is missing...');\n\t\t}\n\n\t\tconst result: extHostProtocol.IInlayHintDto = {\n\t\t\tlabel: '', // fill-in below\n\t\t\tcacheId: id,\n\t\t\ttooltip: typeConvert.MarkdownString.fromStrict(hint.tooltip),\n\t\t\tposition: typeConvert.Position.from(hint.position),\n\t\t\ttextEdits: hint.textEdits && hint.textEdits.map(typeConvert.TextEdit.from),\n\t\t\tkind: hint.kind && typeConvert.InlayHintKind.from(hint.kind),\n\t\t\tpaddingLeft: hint.paddingLeft,\n\t\t\tpaddingRight: hint.paddingRight,\n\t\t};\n\n\t\tif (typeof hint.label === 'string') {\n\t\t\tresult.label = hint.label;\n\t\t} else {\n\t\t\tconst parts: languages.InlayHintLabelPart[] = [];\n\t\t\tresult.label = parts;\n\n\t\t\tfor (const part of hint.label) {\n\t\t\t\tif (!part.value) {\n\t\t\t\t\tconsole.warn('INVALID inlay hint, empty label part', this._extension.identifier.value);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst part2: languages.InlayHintLabelPart = {\n\t\t\t\t\tlabel: part.value,\n\t\t\t\t\ttooltip: typeConvert.MarkdownString.fromStrict(part.tooltip)\n\t\t\t\t};\n\t\t\t\tif (Location.isLocation(part.location)) {\n\t\t\t\t\tpart2.location = typeConvert.location.from(part.location);\n\t\t\t\t}\n\t\t\t\tif (part.command) {\n\t\t\t\t\tpart2.command = this._commands.toInternal(part.command, disposables);\n\t\t\t\t}\n\t\t\t\tparts.push(part2);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass LinkProviderAdapter {\n\n\tprivate _cache = new Cache<vscode.DocumentLink>('DocumentLink');\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentLinkProvider\n\t) { }\n\n\tasync provideLinks(resource: URI, token: CancellationToken): Promise<extHostProtocol.ILinksListDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\n\t\tconst links = await this._provider.provideDocumentLinks(doc, token);\n\t\tif (!Array.isArray(links) || links.length === 0) {\n\t\t\t// bad result\n\t\t\treturn undefined;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\t\tif (typeof this._provider.resolveDocumentLink !== 'function') {\n\t\t\t// no resolve -> no caching\n\t\t\treturn { links: links.filter(LinkProviderAdapter._validateLink).map(typeConvert.DocumentLink.from) };\n\n\t\t} else {\n\t\t\t// cache links for future resolving\n\t\t\tconst pid = this._cache.add(links);\n\t\t\tconst result: extHostProtocol.ILinksListDto = { links: [], cacheId: pid };\n\t\t\tfor (let i = 0; i < links.length; i++) {\n\n\t\t\t\tif (!LinkProviderAdapter._validateLink(links[i])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst dto: extHostProtocol.ILinkDto = typeConvert.DocumentLink.from(links[i]);\n\t\t\t\tdto.cacheId = [pid, i];\n\t\t\t\tresult.links.push(dto);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tprivate static _validateLink(link: vscode.DocumentLink): boolean {\n\t\tif (link.target && link.target.path.length > 50_000) {\n\t\t\tconsole.warn('DROPPING link because it is too long');\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tasync resolveLink(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ILinkDto | undefined> {\n\t\tif (typeof this._provider.resolveDocumentLink !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst link = await this._provider.resolveDocumentLink(item, token);\n\t\tif (!link || !LinkProviderAdapter._validateLink(link)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn typeConvert.DocumentLink.from(link);\n\t}\n\n\treleaseLinks(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass ColorProviderAdapter {\n\n\tconstructor(\n\t\tprivate _documents: ExtHostDocuments,\n\t\tprivate _provider: vscode.DocumentColorProvider\n\t) { }\n\n\tasync provideColors(resource: URI, token: CancellationToken): Promise<extHostProtocol.IRawColorInfo[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst colors = await this._provider.provideDocumentColors(doc, token);\n\t\tif (!Array.isArray(colors)) {\n\t\t\treturn [];\n\t\t}\n\t\tconst colorInfos: extHostProtocol.IRawColorInfo[] = colors.map(ci => {\n\t\t\treturn {\n\t\t\t\tcolor: typeConvert.Color.from(ci.color),\n\t\t\t\trange: typeConvert.Range.from(ci.range)\n\t\t\t};\n\t\t});\n\t\treturn colorInfos;\n\t}\n\n\tasync provideColorPresentations(resource: URI, raw: extHostProtocol.IRawColorInfo, token: CancellationToken): Promise<languages.IColorPresentation[] | undefined> {\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst range = typeConvert.Range.to(raw.range);\n\t\tconst color = typeConvert.Color.to(raw.color);\n\t\tconst value = await this._provider.provideColorPresentations(color, { document, range }, token);\n\t\tif (!Array.isArray(value)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn value.map(typeConvert.ColorPresentation.from);\n\t}\n}\n\nclass FoldingProviderAdapter {\n\n\tconstructor(\n\t\tprivate _documents: ExtHostDocuments,\n\t\tprivate _provider: vscode.FoldingRangeProvider\n\t) { }\n\n\tasync provideFoldingRanges(resource: URI, context: languages.FoldingContext, token: CancellationToken): Promise<languages.FoldingRange[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst ranges = await this._provider.provideFoldingRanges(doc, context, token);\n\t\tif (!Array.isArray(ranges)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn ranges.map(typeConvert.FoldingRange.from);\n\t}\n}\n\nclass SelectionRangeAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.SelectionRangeProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideSelectionRanges(resource: URI, pos: IPosition[], token: CancellationToken): Promise<languages.SelectionRange[][]> {\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst positions = pos.map(typeConvert.Position.to);\n\n\t\tconst allProviderRanges = await this._provider.provideSelectionRanges(document, positions, token);\n\t\tif (!isNonEmptyArray(allProviderRanges)) {\n\t\t\treturn [];\n\t\t}\n\t\tif (allProviderRanges.length !== positions.length) {\n\t\t\tthis._logService.warn('BAD selection ranges, provider must return ranges for each position');\n\t\t\treturn [];\n\t\t}\n\t\tconst allResults: languages.SelectionRange[][] = [];\n\t\tfor (let i = 0; i < positions.length; i++) {\n\t\t\tconst oneResult: languages.SelectionRange[] = [];\n\t\t\tallResults.push(oneResult);\n\n\t\t\tlet last: vscode.Position | vscode.Range = positions[i];\n\t\t\tlet selectionRange = allProviderRanges[i];\n\n\t\t\twhile (true) {\n\t\t\t\tif (!selectionRange.range.contains(last)) {\n\t\t\t\t\tthrow new Error('INVALID selection range, must contain the previous range');\n\t\t\t\t}\n\t\t\t\toneResult.push(typeConvert.SelectionRange.from(selectionRange));\n\t\t\t\tif (!selectionRange.parent) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlast = selectionRange.range;\n\t\t\t\tselectionRange = selectionRange.parent;\n\t\t\t}\n\t\t}\n\t\treturn allResults;\n\t}\n}\n\nclass CallHierarchyAdapter {\n\n\tprivate readonly _idPool = new IdGenerator('');\n\tprivate readonly _cache = new Map<string, Map<string, vscode.CallHierarchyItem>>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.CallHierarchyProvider\n\t) { }\n\n\tasync prepareSession(uri: URI, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ICallHierarchyItemDto[] | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst items = await this._provider.prepareCallHierarchy(doc, pos, token);\n\t\tif (!items) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst sessionId = this._idPool.nextId();\n\t\tthis._cache.set(sessionId, new Map());\n\n\t\tif (Array.isArray(items)) {\n\t\t\treturn items.map(item => this._cacheAndConvertItem(sessionId, item));\n\t\t} else {\n\t\t\treturn [this._cacheAndConvertItem(sessionId, items)];\n\t\t}\n\t}\n\n\tasync provideCallsTo(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IIncomingCallDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing call hierarchy item');\n\t\t}\n\t\tconst calls = await this._provider.provideCallHierarchyIncomingCalls(item, token);\n\t\tif (!calls) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn calls.map(call => {\n\t\t\treturn {\n\t\t\t\tfrom: this._cacheAndConvertItem(sessionId, call.from),\n\t\t\t\tfromRanges: call.fromRanges.map(r => typeConvert.Range.from(r))\n\t\t\t};\n\t\t});\n\t}\n\n\tasync provideCallsFrom(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IOutgoingCallDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing call hierarchy item');\n\t\t}\n\t\tconst calls = await this._provider.provideCallHierarchyOutgoingCalls(item, token);\n\t\tif (!calls) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn calls.map(call => {\n\t\t\treturn {\n\t\t\t\tto: this._cacheAndConvertItem(sessionId, call.to),\n\t\t\t\tfromRanges: call.fromRanges.map(r => typeConvert.Range.from(r))\n\t\t\t};\n\t\t});\n\t}\n\n\treleaseSession(sessionId: string): void {\n\t\tthis._cache.delete(sessionId);\n\t}\n\n\tprivate _cacheAndConvertItem(sessionId: string, item: vscode.CallHierarchyItem): extHostProtocol.ICallHierarchyItemDto {\n\t\tconst map = this._cache.get(sessionId)!;\n\t\tconst dto = typeConvert.CallHierarchyItem.from(item, sessionId, map.size.toString(36));\n\t\tmap.set(dto._itemId, item);\n\t\treturn dto;\n\t}\n\n\tprivate _itemFromCache(sessionId: string, itemId: string): vscode.CallHierarchyItem | undefined {\n\t\tconst map = this._cache.get(sessionId);\n\t\treturn map?.get(itemId);\n\t}\n}\n\nclass TypeHierarchyAdapter {\n\n\tprivate readonly _idPool = new IdGenerator('');\n\tprivate readonly _cache = new Map<string, Map<string, vscode.TypeHierarchyItem>>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.TypeHierarchyProvider\n\t) { }\n\n\tasync prepareSession(uri: URI, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst items = await this._provider.prepareTypeHierarchy(doc, pos, token);\n\t\tif (!items) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst sessionId = this._idPool.nextId();\n\t\tthis._cache.set(sessionId, new Map());\n\n\t\tif (Array.isArray(items)) {\n\t\t\treturn items.map(item => this._cacheAndConvertItem(sessionId, item));\n\t\t} else {\n\t\t\treturn [this._cacheAndConvertItem(sessionId, items)];\n\t\t}\n\t}\n\n\tasync provideSupertypes(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing type hierarchy item');\n\t\t}\n\t\tconst supertypes = await this._provider.provideTypeHierarchySupertypes(item, token);\n\t\tif (!supertypes) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn supertypes.map(supertype => {\n\t\t\treturn this._cacheAndConvertItem(sessionId, supertype);\n\t\t});\n\t}\n\n\tasync provideSubtypes(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing type hierarchy item');\n\t\t}\n\t\tconst subtypes = await this._provider.provideTypeHierarchySubtypes(item, token);\n\t\tif (!subtypes) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn subtypes.map(subtype => {\n\t\t\treturn this._cacheAndConvertItem(sessionId, subtype);\n\t\t});\n\t}\n\n\treleaseSession(sessionId: string): void {\n\t\tthis._cache.delete(sessionId);\n\t}\n\n\tprivate _cacheAndConvertItem(sessionId: string, item: vscode.TypeHierarchyItem): extHostProtocol.ITypeHierarchyItemDto {\n\t\tconst map = this._cache.get(sessionId)!;\n\t\tconst dto = typeConvert.TypeHierarchyItem.from(item, sessionId, map.size.toString(36));\n\t\tmap.set(dto._itemId, item);\n\t\treturn dto;\n\t}\n\n\tprivate _itemFromCache(sessionId: string, itemId: string): vscode.TypeHierarchyItem | undefined {\n\t\tconst map = this._cache.get(sessionId);\n\t\treturn map?.get(itemId);\n\t}\n}\n\nclass DocumentDropEditAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.DocumentDropEdit>('DocumentDropEdit');\n\n\tconstructor(\n\t\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentDropEditProvider,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync provideDocumentOnDropEdits(requestId: number, uri: URI, position: IPosition, dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.IDocumentDropEditDto[] | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst dataTransfer = typeConvert.DataTransfer.toDataTransfer(dataTransferDto, async (id) => {\n\t\t\treturn (await this._proxy.$resolveDocumentOnDropFileData(this._handle, requestId, id)).buffer;\n\t\t});\n\n\t\tconst edits = await this._provider.provideDocumentDropEdits(doc, pos, dataTransfer, token);\n\t\tif (!edits) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst editsArray = asArray(edits);\n\t\tconst cacheId = this._cache.add(editsArray);\n\n\t\treturn editsArray.map((edit, i): extHostProtocol.IDocumentDropEditDto => ({\n\t\t\t_cacheId: [cacheId, i],\n\t\t\ttitle: edit.title ?? localize('defaultDropLabel', \"Drop using '{0}' extension\", this._extension.displayName || this._extension.name),\n\t\t\tkind: edit.kind?.value,\n\t\t\tyieldTo: edit.yieldTo?.map(x => x.value),\n\t\t\tinsertText: typeof edit.insertText === 'string' ? edit.insertText : { snippet: edit.insertText.value },\n\t\t\tadditionalEdit: edit.additionalEdit ? typeConvert.WorkspaceEdit.from(edit.additionalEdit, undefined) : undefined,\n\t\t}));\n\t}\n\n\tasync resolveDropEdit(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ additionalEdit?: extHostProtocol.IWorkspaceEditDto }> {\n\t\tconst [sessionId, itemId] = id;\n\t\tconst item = this._cache.get(sessionId, itemId);\n\t\tif (!item || !this._provider.resolveDocumentDropEdit) {\n\t\t\treturn {}; // this should not happen...\n\t\t}\n\n\t\tconst resolvedItem = (await this._provider.resolveDocumentDropEdit(item, token)) ?? item;\n\t\tconst additionalEdit = resolvedItem.additionalEdit ? typeConvert.WorkspaceEdit.from(resolvedItem.additionalEdit, undefined) : undefined;\n\t\treturn { additionalEdit };\n\t}\n\n\treleaseDropEdits(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass MappedEditsAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.MappedEditsProvider,\n\t) { }\n\n\tasync provideMappedEdits(\n\t\tresource: UriComponents,\n\t\tcodeBlocks: string[],\n\t\tcontext: extHostProtocol.IMappedEditsContextDto,\n\t\ttoken: CancellationToken\n\t): Promise<extHostProtocol.IWorkspaceEditDto | null> {\n\n\t\tconst uri = URI.revive(resource);\n\t\tconst doc = this._documents.getDocument(uri);\n\n\t\tconst reviveContextItem = (item: extHostProtocol.IDocumentContextItemDto) => ({\n\t\t\turi: URI.revive(item.uri),\n\t\t\tversion: item.version,\n\t\t\tranges: item.ranges.map(r => typeConvert.Range.to(r)),\n\t\t} satisfies vscode.DocumentContextItem);\n\n\n\t\tconst usedContext = context.documents.map(docSubArray => docSubArray.map(reviveContextItem));\n\n\t\tconst ctx = {\n\t\t\tdocuments: usedContext,\n\t\t\tselections: usedContext[0]?.[0]?.ranges ?? [], // @ulugbekna: this is a hack for backward compatibility\n\t\t\tconversation: context.conversation?.map(c => {\n\t\t\t\tif (c.type === 'response') {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'response',\n\t\t\t\t\t\tmessage: c.message,\n\t\t\t\t\t\treferences: c.references?.map(reviveContextItem)\n\t\t\t\t\t} satisfies vscode.ConversationResponse;\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'request',\n\t\t\t\t\t\tmessage: c.message,\n\t\t\t\t\t} satisfies vscode.ConversationRequest;\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\n\t\tconst mappedEdits = await this._provider.provideMappedEdits(doc, codeBlocks, ctx, token);\n\n\t\treturn mappedEdits ? typeConvert.WorkspaceEdit.from(mappedEdits) : null;\n\t}\n}\n\ntype Adapter = DocumentSymbolAdapter | CodeLensAdapter | DefinitionAdapter | HoverAdapter\n\t| DocumentHighlightAdapter | MultiDocumentHighlightAdapter | ReferenceAdapter | CodeActionAdapter\n\t| DocumentPasteEditProvider | DocumentFormattingAdapter | RangeFormattingAdapter\n\t| OnTypeFormattingAdapter | NavigateTypeAdapter | RenameAdapter\n\t| CompletionsAdapter | SignatureHelpAdapter | LinkProviderAdapter | ImplementationAdapter\n\t| TypeDefinitionAdapter | ColorProviderAdapter | FoldingProviderAdapter | DeclarationAdapter\n\t| SelectionRangeAdapter | CallHierarchyAdapter | TypeHierarchyAdapter\n\t| DocumentSemanticTokensAdapter | DocumentRangeSemanticTokensAdapter\n\t| EvaluatableExpressionAdapter | InlineValuesAdapter\n\t| LinkedEditingRangeAdapter | InlayHintsAdapter | InlineCompletionAdapter\n\t| DocumentDropEditAdapter | MappedEditsAdapter | NewSymbolNamesAdapter | InlineEditAdapter;\n\nclass AdapterData {\n\tconstructor(\n\t\treadonly adapter: Adapter,\n\t\treadonly extension: IExtensionDescription\n\t) { }\n}\n\nexport class ExtHostLanguageFeatures implements extHostProtocol.ExtHostLanguageFeaturesShape {\n\n\tprivate static _handlePool: number = 0;\n\n\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape;\n\tprivate readonly _adapter = new Map<number, AdapterData>();\n\n\tconstructor(\n\t\tmainContext: extHostProtocol.IMainContext,\n\t\tprivate readonly _uriTransformer: IURITransformer,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: ExtHostCommands,\n\t\tprivate readonly _diagnostics: ExtHostDiagnostics,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t\tprivate readonly _extensionTelemetry: IExtHostTelemetry\n\t) {\n\t\tthis._proxy = mainContext.getProxy(extHostProtocol.MainContext.MainThreadLanguageFeatures);\n\t}\n\n\n\tprivate _transformDocumentSelector(selector: vscode.DocumentSelector, extension: IExtensionDescription): Array<extHostProtocol.IDocumentFilterDto> {\n\t\treturn typeConvert.DocumentSelector.from(selector, this._uriTransformer, extension);\n\t}\n\n\tprivate _createDisposable(handle: number): Disposable {\n\t\treturn new Disposable(() => {\n\t\t\tthis._adapter.delete(handle);\n\t\t\tthis._proxy.$unregister(handle);\n\t\t});\n\t}\n\n\tprivate _nextHandle(): number {\n\t\treturn ExtHostLanguageFeatures._handlePool++;\n\t}\n\n\tprivate async _withAdapter<A, R>(\n\t\thandle: number,\n\t\tctor: { new(...args: any[]): A },\n\t\tcallback: (adapter: A, extension: IExtensionDescription) => Promise<R>,\n\t\tfallbackValue: R,\n\t\ttokenToRaceAgainst: CancellationToken | undefined,\n\t\tdoNotLog: boolean = false\n\t): Promise<R> {\n\t\tconst data = this._adapter.get(handle);\n\t\tif (!data || !(data.adapter instanceof ctor)) {\n\t\t\treturn fallbackValue;\n\t\t}\n\n\t\tconst t1: number = Date.now();\n\t\tif (!doNotLog) {\n\t\t\tthis._logService.trace(`[${data.extension.identifier.value}] INVOKE provider '${callback.toString().replace(/[\\r\\n]/g, '')}'`);\n\t\t}\n\n\t\tconst result = callback(data.adapter, data.extension);\n\n\t\t// logging,tracing\n\t\tPromise.resolve(result).catch(err => {\n\t\t\tif (!isCancellationError(err)) {\n\t\t\t\tthis._logService.error(`[${data.extension.identifier.value}] provider FAILED`);\n\t\t\t\tthis._logService.error(err);\n\n\t\t\t\tthis._extensionTelemetry.onExtensionError(data.extension.identifier, err);\n\t\t\t}\n\t\t}).finally(() => {\n\t\t\tif (!doNotLog) {\n\t\t\t\tthis._logService.trace(`[${data.extension.identifier.value}] provider DONE after ${Date.now() - t1}ms`);\n\t\t\t}\n\t\t});\n\n\t\tif (CancellationToken.isCancellationToken(tokenToRaceAgainst)) {\n\t\t\treturn raceCancellationError(result, tokenToRaceAgainst);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _addNewAdapter(adapter: Adapter, extension: IExtensionDescription): number {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(adapter, extension));\n\t\treturn handle;\n\t}\n\n\tprivate static _extLabel(ext: IExtensionDescription): string {\n\t\treturn ext.displayName || ext.name;\n\t}\n\n\tprivate static _extId(ext: IExtensionDescription): string {\n\t\treturn ext.identifier.value;\n\t}\n\n\t// --- outline\n\n\tregisterDocumentSymbolProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentSymbolProvider, metadata?: vscode.DocumentSymbolProviderMetadata): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentSymbolAdapter(this._documents, provider), extension);\n\t\tconst displayName = (metadata && metadata.label) || ExtHostLanguageFeatures._extLabel(extension);\n\t\tthis._proxy.$registerDocumentSymbolProvider(handle, this._transformDocumentSelector(selector, extension), displayName);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentSymbols(handle: number, resource: UriComponents, token: CancellationToken): Promise<languages.DocumentSymbol[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentSymbolAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token), undefined, token);\n\t}\n\n\t// --- code lens\n\n\tregisterCodeLensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CodeLensProvider): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tconst eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this._nextHandle() : undefined;\n\n\t\tthis._adapter.set(handle, new AdapterData(new CodeLensAdapter(this._documents, this._commands.converter, provider, extension, this._extensionTelemetry, this._logService), extension));\n\t\tthis._proxy.$registerCodeLensSupport(handle, this._transformDocumentSelector(selector, extension), eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeCodeLenses!(_ => this._proxy.$emitCodeLensEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideCodeLenses(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.ICodeLensListDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token), undefined, token, resource.scheme === 'output');\n\t}\n\n\t$resolveCodeLens(handle: number, symbol: extHostProtocol.ICodeLensDto, token: CancellationToken): Promise<extHostProtocol.ICodeLensDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(symbol, token), undefined, undefined, true);\n\t}\n\n\t$releaseCodeLenses(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, CodeLensAdapter, adapter => Promise.resolve(adapter.releaseCodeLenses(cacheId)), undefined, undefined, true);\n\t}\n\n\t// --- declaration\n\n\tregisterDefinitionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DefinitionProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DefinitionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDefinitionSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDefinition(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterDeclarationProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DeclarationProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DeclarationAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDeclarationSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDeclaration(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterImplementationProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.ImplementationProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ImplementationAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerImplementationSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideImplementation(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterTypeDefinitionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.TypeDefinitionProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new TypeDefinitionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerTypeDefinitionSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideTypeDefinition(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token), [], token);\n\t}\n\n\t// --- extra info\n\n\tregisterHoverProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.HoverProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new HoverAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerHoverProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideHover(handle: number, resource: UriComponents, position: IPosition, context: languages.HoverContext<{ id: number }> | undefined, token: CancellationToken,): Promise<extHostProtocol.HoverWithId | undefined> {\n\t\treturn this._withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$releaseHover(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, HoverAdapter, adapter => Promise.resolve(adapter.releaseHover(id)), undefined, undefined);\n\t}\n\n\t// --- debug hover\n\n\tregisterEvaluatableExpressionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.EvaluatableExpressionProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new EvaluatableExpressionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerEvaluatableExpressionProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideEvaluatableExpression(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.EvaluatableExpression | undefined> {\n\t\treturn this._withAdapter(handle, EvaluatableExpressionAdapter, adapter => adapter.provideEvaluatableExpression(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\t// --- debug inline values\n\n\tregisterInlineValuesProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlineValuesProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\n\t\tconst eventHandle = typeof provider.onDidChangeInlineValues === 'function' ? this._nextHandle() : undefined;\n\t\tconst handle = this._addNewAdapter(new InlineValuesAdapter(this._documents, provider), extension);\n\n\t\tthis._proxy.$registerInlineValuesProvider(handle, this._transformDocumentSelector(selector, extension), eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeInlineValues!(_ => this._proxy.$emitInlineValuesEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\t\treturn result;\n\t}\n\n\t$provideInlineValues(handle: number, resource: UriComponents, range: IRange, context: extHostProtocol.IInlineValueContextDto, token: CancellationToken): Promise<languages.InlineValue[] | undefined> {\n\t\treturn this._withAdapter(handle, InlineValuesAdapter, adapter => adapter.provideInlineValues(URI.revive(resource), range, context, token), undefined, token);\n\t}\n\n\t// --- occurrences\n\n\tregisterDocumentHighlightProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentHighlightProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentHighlightAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentHighlightProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\tregisterMultiDocumentHighlightProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.MultiDocumentHighlightProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new MultiDocumentHighlightAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerMultiDocumentHighlightProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentHighlights(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.DocumentHighlight[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\t$provideMultiDocumentHighlights(handle: number, resource: UriComponents, position: IPosition, otherModels: UriComponents[], token: CancellationToken): Promise<languages.MultiDocumentHighlight[] | undefined> {\n\t\treturn this._withAdapter(handle, MultiDocumentHighlightAdapter, adapter => adapter.provideMultiDocumentHighlights(URI.revive(resource), position, otherModels.map(model => URI.revive(model)), token), undefined, token);\n\t}\n\n\t// --- linked editing\n\n\tregisterLinkedEditingRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.LinkedEditingRangeProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new LinkedEditingRangeAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerLinkedEditingRangeProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideLinkedEditingRanges(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ILinkedEditingRangesDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkedEditingRangeAdapter, async adapter => {\n\t\t\tconst res = await adapter.provideLinkedEditingRanges(URI.revive(resource), position, token);\n\t\t\tif (res) {\n\t\t\t\treturn {\n\t\t\t\t\tranges: res.ranges,\n\t\t\t\t\twordPattern: res.wordPattern ? ExtHostLanguageFeatures._serializeRegExp(res.wordPattern) : undefined\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}, undefined, token);\n\t}\n\n\t// --- references\n\n\tregisterReferenceProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.ReferenceProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ReferenceAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerReferenceSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideReferences(handle: number, resource: UriComponents, position: IPosition, context: languages.ReferenceContext, token: CancellationToken): Promise<languages.Location[] | undefined> {\n\t\treturn this._withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t// --- code actions\n\n\tregisterCodeActionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CodeActionProvider, metadata?: vscode.CodeActionProviderMetadata): vscode.Disposable {\n\t\tconst store = new DisposableStore();\n\t\tconst handle = this._addNewAdapter(new CodeActionAdapter(this._documents, this._commands.converter, this._diagnostics, provider, this._logService, extension, this._apiDeprecation), extension);\n\t\tthis._proxy.$registerCodeActionSupport(handle, this._transformDocumentSelector(selector, extension), {\n\t\t\tprovidedKinds: metadata?.providedCodeActionKinds?.map(kind => kind.value),\n\t\t\tdocumentation: metadata?.documentation?.map(x => ({\n\t\t\t\tkind: x.kind.value,\n\t\t\t\tcommand: this._commands.converter.toInternal(x.command, store),\n\t\t\t}))\n\t\t}, ExtHostLanguageFeatures._extLabel(extension), ExtHostLanguageFeatures._extId(extension), Boolean(provider.resolveCodeAction));\n\t\tstore.add(this._createDisposable(handle));\n\t\treturn store;\n\t}\n\n\n\t$provideCodeActions(handle: number, resource: UriComponents, rangeOrSelection: IRange | ISelection, context: languages.CodeActionContext, token: CancellationToken): Promise<extHostProtocol.ICodeActionListDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeActions(URI.revive(resource), rangeOrSelection, context, token), undefined, token);\n\t}\n\n\t$resolveCodeAction(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ edit?: extHostProtocol.IWorkspaceEditDto; command?: extHostProtocol.ICommandDto }> {\n\t\treturn this._withAdapter(handle, CodeActionAdapter, adapter => adapter.resolveCodeAction(id, token), {}, undefined);\n\t}\n\n\t$releaseCodeActions(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, CodeActionAdapter, adapter => Promise.resolve(adapter.releaseCodeActions(cacheId)), undefined, undefined);\n\t}\n\n\t// --- formatting\n\n\tregisterDocumentFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentFormattingEditProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentFormattingSupport(handle, this._transformDocumentSelector(selector, extension), extension.identifier, extension.displayName || extension.name);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentFormattingEdits(handle: number, resource: UriComponents, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token), undefined, token);\n\t}\n\n\tregisterDocumentRangeFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentRangeFormattingEditProvider): vscode.Disposable {\n\t\tconst canFormatMultipleRanges = typeof provider.provideDocumentRangesFormattingEdits === 'function';\n\t\tconst handle = this._addNewAdapter(new RangeFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerRangeFormattingSupport(handle, this._transformDocumentSelector(selector, extension), extension.identifier, extension.displayName || extension.name, canFormatMultipleRanges);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: IRange, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\treturn this._withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token), undefined, token);\n\t}\n\n\t$provideDocumentRangesFormattingEdits(handle: number, resource: UriComponents, ranges: IRange[], options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\treturn this._withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangesFormattingEdits(URI.revive(resource), ranges, options, token), undefined, token);\n\t}\n\n\tregisterOnTypeFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.OnTypeFormattingEditProvider, triggerCharacters: string[]): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new OnTypeFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerOnTypeFormattingSupport(handle, this._transformDocumentSelector(selector, extension), triggerCharacters, extension.identifier);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: IPosition, ch: string, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> {\n\t\treturn this._withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token), undefined, token);\n\t}\n\n\t// --- navigate types\n\n\tregisterWorkspaceSymbolProvider(extension: IExtensionDescription, provider: vscode.WorkspaceSymbolProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new NavigateTypeAdapter(provider, this._logService), extension);\n\t\tthis._proxy.$registerNavigateTypeSupport(handle, typeof provider.resolveWorkspaceSymbol === 'function');\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideWorkspaceSymbols(handle: number, search: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolsDto> {\n\t\treturn this._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.provideWorkspaceSymbols(search, token), { symbols: [] }, token);\n\t}\n\n\t$resolveWorkspaceSymbol(handle: number, symbol: extHostProtocol.IWorkspaceSymbolDto, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolDto | undefined> {\n\t\treturn this._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token), undefined, undefined);\n\t}\n\n\t$releaseWorkspaceSymbols(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.releaseWorkspaceSymbols(id), undefined, undefined);\n\t}\n\n\t// --- rename\n\n\tregisterRenameProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.RenameProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new RenameAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerRenameSupport(handle, this._transformDocumentSelector(selector, extension), RenameAdapter.supportsResolving(provider));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideRenameEdits(handle: number, resource: UriComponents, position: IPosition, newName: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceEditDto | undefined> {\n\t\treturn this._withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token), undefined, token);\n\t}\n\n\t$resolveRenameLocation(handle: number, resource: URI, position: IPosition, token: CancellationToken): Promise<languages.RenameLocation | undefined> {\n\t\treturn this._withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\tregisterNewSymbolNamesProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.NewSymbolNamesProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new NewSymbolNamesAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerNewSymbolNamesProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$supportsAutomaticNewSymbolNamesTriggerKind(handle: number): Promise<boolean | undefined> {\n\t\treturn this._withAdapter(\n\t\t\thandle,\n\t\t\tNewSymbolNamesAdapter,\n\t\t\tadapter => adapter.supportsAutomaticNewSymbolNamesTriggerKind(),\n\t\t\tfalse,\n\t\t\tundefined\n\t\t);\n\t}\n\n\t$provideNewSymbolNames(handle: number, resource: UriComponents, range: IRange, triggerKind: languages.NewSymbolNameTriggerKind, token: CancellationToken): Promise<languages.NewSymbolName[] | undefined> {\n\t\treturn this._withAdapter(handle, NewSymbolNamesAdapter, adapter => adapter.provideNewSymbolNames(URI.revive(resource), range, triggerKind, token), undefined, token);\n\t}\n\n\t//#region semantic coloring\n\n\tregisterDocumentSemanticTokensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentSemanticTokensProvider, legend: vscode.SemanticTokensLegend): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentSemanticTokensAdapter(this._documents, provider), extension);\n\t\tconst eventHandle = (typeof provider.onDidChangeSemanticTokens === 'function' ? this._nextHandle() : undefined);\n\t\tthis._proxy.$registerDocumentSemanticTokensProvider(handle, this._transformDocumentSelector(selector, extension), legend, eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle) {\n\t\t\tconst subscription = provider.onDidChangeSemanticTokens!(_ => this._proxy.$emitDocumentSemanticTokensEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: CancellationToken): Promise<VSBuffer | null> {\n\t\treturn this._withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.provideDocumentSemanticTokens(URI.revive(resource), previousResultId, token), null, token);\n\t}\n\n\t$releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void {\n\t\tthis._withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.releaseDocumentSemanticColoring(semanticColoringResultId), undefined, undefined);\n\t}\n\n\tregisterDocumentRangeSemanticTokensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentRangeSemanticTokensProvider, legend: vscode.SemanticTokensLegend): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentRangeSemanticTokensAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentRangeSemanticTokensProvider(handle, this._transformDocumentSelector(selector, extension), legend);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: IRange, token: CancellationToken): Promise<VSBuffer | null> {\n\t\treturn this._withAdapter(handle, DocumentRangeSemanticTokensAdapter, adapter => adapter.provideDocumentRangeSemanticTokens(URI.revive(resource), range, token), null, token);\n\t}\n\n\t//#endregion\n\n\t// --- suggestion\n\n\tregisterCompletionItemProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CompletionItemProvider, triggerCharacters: string[]): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new CompletionsAdapter(this._documents, this._commands.converter, provider, this._apiDeprecation, extension), extension);\n\t\tthis._proxy.$registerCompletionsProvider(handle, this._transformDocumentSelector(selector, extension), triggerCharacters, CompletionsAdapter.supportsResolving(provider), extension.identifier);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideCompletionItems(handle: number, resource: UriComponents, position: IPosition, context: languages.CompletionContext, token: CancellationToken): Promise<extHostProtocol.ISuggestResultDto | undefined> {\n\t\treturn this._withAdapter(handle, CompletionsAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$resolveCompletionItem(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ISuggestDataDto | undefined> {\n\t\treturn this._withAdapter(handle, CompletionsAdapter, adapter => adapter.resolveCompletionItem(id, token), undefined, token);\n\t}\n\n\t$releaseCompletionItems(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, CompletionsAdapter, adapter => adapter.releaseCompletionItems(id), undefined, undefined);\n\t}\n\n\t// --- ghost test\n\n\tregisterInlineCompletionsProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlineCompletionItemProvider, metadata: vscode.InlineCompletionItemProviderMetadata | undefined): vscode.Disposable {\n\t\tconst adapter = new InlineCompletionAdapter(extension, this._documents, provider, this._commands.converter);\n\t\tconst handle = this._addNewAdapter(adapter, extension);\n\t\tthis._proxy.$registerInlineCompletionsSupport(handle, this._transformDocumentSelector(selector, extension), adapter.supportsHandleEvents,\n\t\t\tExtensionIdentifier.toKey(extension.identifier.value), metadata?.yieldTo?.map(extId => ExtensionIdentifier.toKey(extId)) || []);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideInlineCompletions(handle: number, resource: UriComponents, position: IPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\treturn this._withAdapter(handle, InlineCompletionAdapterBase, adapter => adapter.provideInlineCompletions(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$provideInlineEditsForRange(handle: number, resource: UriComponents, range: IRange, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\treturn this._withAdapter(handle, InlineCompletionAdapterBase, adapter => adapter.provideInlineEditsForRange(URI.revive(resource), range, context, token), undefined, token);\n\t}\n\n\t$handleInlineCompletionDidShow(handle: number, pid: number, idx: number, updatedInsertText: string): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapterBase, async adapter => {\n\t\t\tadapter.handleDidShowCompletionItem(pid, idx, updatedInsertText);\n\t\t}, undefined, undefined);\n\t}\n\n\t$handleInlineCompletionPartialAccept(handle: number, pid: number, idx: number, acceptedCharacters: number, info: languages.PartialAcceptInfo): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapterBase, async adapter => {\n\t\t\tadapter.handlePartialAccept(pid, idx, acceptedCharacters, info);\n\t\t}, undefined, undefined);\n\t}\n\n\t$freeInlineCompletionsList(handle: number, pid: number): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapterBase, async adapter => { adapter.disposeCompletions(pid); }, undefined, undefined);\n\t}\n\n\t// --- inline edit\n\n\tregisterInlineEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlineEditProvider): vscode.Disposable {\n\t\tconst adapter = new InlineEditAdapter(extension, this._documents, provider, this._commands.converter);\n\t\tconst handle = this._addNewAdapter(adapter, extension);\n\t\tthis._proxy.$registerInlineEditProvider(handle, this._transformDocumentSelector(selector, extension), extension.identifier);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideInlineEdit(handle: number, resource: UriComponents, context: languages.IInlineEditContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineEdit | undefined> {\n\t\treturn this._withAdapter(handle, InlineEditAdapter, adapter => adapter.provideInlineEdits(URI.revive(resource), context, token), undefined, token);\n\t}\n\n\t$freeInlineEdit(handle: number, pid: number): void {\n\t\tthis._withAdapter(handle, InlineEditAdapter, async adapter => { adapter.disposeEdit(pid); }, undefined, undefined);\n\t}\n\n\t// --- parameter hints\n\n\tregisterSignatureHelpProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.SignatureHelpProvider, metadataOrTriggerChars: string[] | vscode.SignatureHelpProviderMetadata): vscode.Disposable {\n\t\tconst metadata: extHostProtocol.ISignatureHelpProviderMetadataDto | undefined = Array.isArray(metadataOrTriggerChars)\n\t\t\t? { triggerCharacters: metadataOrTriggerChars, retriggerCharacters: [] }\n\t\t\t: metadataOrTriggerChars;\n\n\t\tconst handle = this._addNewAdapter(new SignatureHelpAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerSignatureHelpProvider(handle, this._transformDocumentSelector(selector, extension), metadata);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideSignatureHelp(handle: number, resource: UriComponents, position: IPosition, context: extHostProtocol.ISignatureHelpContextDto, token: CancellationToken): Promise<extHostProtocol.ISignatureHelpDto | undefined> {\n\t\treturn this._withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$releaseSignatureHelp(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, SignatureHelpAdapter, adapter => adapter.releaseSignatureHelp(id), undefined, undefined);\n\t}\n\n\t// --- inline hints\n\n\tregisterInlayHintsProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlayHintsProvider): vscode.Disposable {\n\n\t\tconst eventHandle = typeof provider.onDidChangeInlayHints === 'function' ? this._nextHandle() : undefined;\n\t\tconst handle = this._addNewAdapter(new InlayHintsAdapter(this._documents, this._commands.converter, provider, this._logService, extension), extension);\n\n\t\tthis._proxy.$registerInlayHintsProvider(handle, this._transformDocumentSelector(selector, extension), typeof provider.resolveInlayHint === 'function', eventHandle, ExtHostLanguageFeatures._extLabel(extension));\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeInlayHints!(uri => this._proxy.$emitInlayHintsEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\t\treturn result;\n\t}\n\n\t$provideInlayHints(handle: number, resource: UriComponents, range: IRange, token: CancellationToken): Promise<extHostProtocol.IInlayHintsDto | undefined> {\n\t\treturn this._withAdapter(handle, InlayHintsAdapter, adapter => adapter.provideInlayHints(URI.revive(resource), range, token), undefined, token);\n\t}\n\n\t$resolveInlayHint(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.IInlayHintDto | undefined> {\n\t\treturn this._withAdapter(handle, InlayHintsAdapter, adapter => adapter.resolveInlayHint(id, token), undefined, token);\n\t}\n\n\t$releaseInlayHints(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, InlayHintsAdapter, adapter => adapter.releaseHints(id), undefined, undefined);\n\t}\n\n\t// --- links\n\n\tregisterDocumentLinkProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentLinkProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new LinkProviderAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentLinkProvider(handle, this._transformDocumentSelector(selector, extension), typeof provider.resolveDocumentLink === 'function');\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentLinks(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.ILinksListDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token), undefined, token, resource.scheme === 'output');\n\t}\n\n\t$resolveDocumentLink(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ILinkDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(id, token), undefined, undefined, true);\n\t}\n\n\t$releaseDocumentLinks(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, LinkProviderAdapter, adapter => adapter.releaseLinks(id), undefined, undefined, true);\n\t}\n\n\tregisterColorProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentColorProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ColorProviderAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentColorProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentColors(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.IRawColorInfo[]> {\n\t\treturn this._withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token), [], token);\n\t}\n\n\t$provideColorPresentations(handle: number, resource: UriComponents, colorInfo: extHostProtocol.IRawColorInfo, token: CancellationToken): Promise<languages.IColorPresentation[] | undefined> {\n\t\treturn this._withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token), undefined, token);\n\t}\n\n\tregisterFoldingRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.FoldingRangeProvider): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tconst eventHandle = typeof provider.onDidChangeFoldingRanges === 'function' ? this._nextHandle() : undefined;\n\n\t\tthis._adapter.set(handle, new AdapterData(new FoldingProviderAdapter(this._documents, provider), extension));\n\t\tthis._proxy.$registerFoldingRangeProvider(handle, this._transformDocumentSelector(selector, extension), extension.identifier, eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeFoldingRanges!(() => this._proxy.$emitFoldingRangeEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideFoldingRanges(handle: number, resource: UriComponents, context: vscode.FoldingContext, token: CancellationToken): Promise<languages.FoldingRange[] | undefined> {\n\t\treturn this._withAdapter(\n\t\t\thandle,\n\t\t\tFoldingProviderAdapter,\n\t\t\t(adapter) =>\n\t\t\t\tadapter.provideFoldingRanges(URI.revive(resource), context, token),\n\t\t\tundefined,\n\t\t\ttoken\n\t\t);\n\t}\n\n\t// --- smart select\n\n\tregisterSelectionRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.SelectionRangeProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new SelectionRangeAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerSelectionRangeProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideSelectionRanges(handle: number, resource: UriComponents, positions: IPosition[], token: CancellationToken): Promise<languages.SelectionRange[][]> {\n\t\treturn this._withAdapter(handle, SelectionRangeAdapter, adapter => adapter.provideSelectionRanges(URI.revive(resource), positions, token), [], token);\n\t}\n\n\t// --- call hierarchy\n\n\tregisterCallHierarchyProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CallHierarchyProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new CallHierarchyAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerCallHierarchyProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareCallHierarchy(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ICallHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => Promise.resolve(adapter.prepareSession(URI.revive(resource), position, token)), undefined, token);\n\t}\n\n\t$provideCallHierarchyIncomingCalls(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IIncomingCallDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallsTo(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$provideCallHierarchyOutgoingCalls(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IOutgoingCallDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallsFrom(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$releaseCallHierarchy(handle: number, sessionId: string): void {\n\t\tthis._withAdapter(handle, CallHierarchyAdapter, adapter => Promise.resolve(adapter.releaseSession(sessionId)), undefined, undefined);\n\t}\n\n\t// --- type hierarchy\n\tregisterTypeHierarchyProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.TypeHierarchyProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new TypeHierarchyAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerTypeHierarchyProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareTypeHierarchy(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => Promise.resolve(adapter.prepareSession(URI.revive(resource), position, token)), undefined, token);\n\t}\n\n\t$provideTypeHierarchySupertypes(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => adapter.provideSupertypes(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$provideTypeHierarchySubtypes(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => adapter.provideSubtypes(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$releaseTypeHierarchy(handle: number, sessionId: string): void {\n\t\tthis._withAdapter(handle, TypeHierarchyAdapter, adapter => Promise.resolve(adapter.releaseSession(sessionId)), undefined, undefined);\n\t}\n\n\t// --- Document on drop\n\n\tregisterDocumentOnDropEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentDropEditProvider, metadata?: vscode.DocumentDropEditProviderMetadata) {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(new DocumentDropEditAdapter(this._proxy, this._documents, provider, handle, extension), extension));\n\n\t\tthis._proxy.$registerDocumentOnDropEditProvider(handle, this._transformDocumentSelector(selector, extension), isProposedApiEnabled(extension, 'documentPaste') && metadata ? {\n\t\t\tsupportsResolve: !!provider.resolveDocumentDropEdit,\n\t\t\tdropMimeTypes: metadata.dropMimeTypes,\n\t\t} : undefined);\n\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentOnDropEdits(handle: number, requestId: number, resource: UriComponents, position: IPosition, dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.IDocumentDropEditDto[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentDropEditAdapter, adapter =>\n\t\t\tPromise.resolve(adapter.provideDocumentOnDropEdits(requestId, URI.revive(resource), position, dataTransferDto, token)), undefined, undefined);\n\t}\n\n\t$resolveDropEdit(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ additionalEdit?: extHostProtocol.IWorkspaceEditDto }> {\n\t\treturn this._withAdapter(handle, DocumentDropEditAdapter, adapter => adapter.resolveDropEdit(id, token), {}, undefined);\n\t}\n\n\t$releaseDocumentOnDropEdits(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, DocumentDropEditAdapter, adapter => Promise.resolve(adapter.releaseDropEdits(cacheId)), undefined, undefined);\n\t}\n\n\t// --- mapped edits\n\n\tregisterMappedEditsProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.MappedEditsProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new MappedEditsAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerMappedEditsProvider(handle, this._transformDocumentSelector(selector, extension), extension.displayName ?? extension.name);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideMappedEdits(handle: number, document: UriComponents, codeBlocks: string[], context: extHostProtocol.IMappedEditsContextDto, token: CancellationToken): Promise<extHostProtocol.IWorkspaceEditDto | null> {\n\t\treturn this._withAdapter(handle, MappedEditsAdapter, adapter =>\n\t\t\tPromise.resolve(adapter.provideMappedEdits(document, codeBlocks, context, token)), null, token);\n\t}\n\n\t// --- copy/paste actions\n\n\tregisterDocumentPasteEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentPasteEditProvider, metadata: vscode.DocumentPasteProviderMetadata): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(new DocumentPasteEditProvider(this._proxy, this._documents, provider, handle, extension), extension));\n\t\tthis._proxy.$registerPasteEditProvider(handle, this._transformDocumentSelector(selector, extension), {\n\t\t\tsupportsCopy: !!provider.prepareDocumentPaste,\n\t\t\tsupportsPaste: !!provider.provideDocumentPasteEdits,\n\t\t\tsupportsResolve: !!provider.resolveDocumentPasteEdit,\n\t\t\tprovidedPasteEditKinds: metadata.providedPasteEditKinds?.map(x => x.value),\n\t\t\tcopyMimeTypes: metadata.copyMimeTypes,\n\t\t\tpasteMimeTypes: metadata.pasteMimeTypes,\n\t\t});\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareDocumentPaste(handle: number, resource: UriComponents, ranges: IRange[], dataTransfer: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.DataTransferDTO | undefined> {\n\t\treturn this._withAdapter(handle, DocumentPasteEditProvider, adapter => adapter.prepareDocumentPaste(URI.revive(resource), ranges, dataTransfer, token), undefined, token);\n\t}\n\n\t$providePasteEdits(handle: number, requestId: number, resource: UriComponents, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, context: extHostProtocol.IDocumentPasteContextDto, token: CancellationToken): Promise<extHostProtocol.IPasteEditDto[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentPasteEditProvider, adapter => adapter.providePasteEdits(requestId, URI.revive(resource), ranges, dataTransferDto, context, token), undefined, token);\n\t}\n\n\t$resolvePasteEdit(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ additionalEdit?: extHostProtocol.IWorkspaceEditDto }> {\n\t\treturn this._withAdapter(handle, DocumentPasteEditProvider, adapter => adapter.resolvePasteEdit(id, token), {}, undefined);\n\t}\n\n\t$releasePasteEdits(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, DocumentPasteEditProvider, adapter => Promise.resolve(adapter.releasePasteEdits(cacheId)), undefined, undefined);\n\t}\n\n\t// --- configuration\n\n\tprivate static _serializeRegExp(regExp: RegExp): extHostProtocol.IRegExpDto {\n\t\treturn {\n\t\t\tpattern: regExp.source,\n\t\t\tflags: regExp.flags,\n\t\t};\n\t}\n\n\tprivate static _serializeIndentationRule(indentationRule: vscode.IndentationRule): extHostProtocol.IIndentationRuleDto {\n\t\treturn {\n\t\t\tdecreaseIndentPattern: ExtHostLanguageFeatures._serializeRegExp(indentationRule.decreaseIndentPattern),\n\t\t\tincreaseIndentPattern: ExtHostLanguageFeatures._serializeRegExp(indentationRule.increaseIndentPattern),\n\t\t\tindentNextLinePattern: indentationRule.indentNextLinePattern ? ExtHostLanguageFeatures._serializeRegExp(indentationRule.indentNextLinePattern) : undefined,\n\t\t\tunIndentedLinePattern: indentationRule.unIndentedLinePattern ? ExtHostLanguageFeatures._serializeRegExp(indentationRule.unIndentedLinePattern) : undefined,\n\t\t};\n\t}\n\n\tprivate static _serializeOnEnterRule(onEnterRule: vscode.OnEnterRule): extHostProtocol.IOnEnterRuleDto {\n\t\treturn {\n\t\t\tbeforeText: ExtHostLanguageFeatures._serializeRegExp(onEnterRule.beforeText),\n\t\t\tafterText: onEnterRule.afterText ? ExtHostLanguageFeatures._serializeRegExp(onEnterRule.afterText) : undefined,\n\t\t\tpreviousLineText: onEnterRule.previousLineText ? ExtHostLanguageFeatures._serializeRegExp(onEnterRule.previousLineText) : undefined,\n\t\t\taction: onEnterRule.action\n\t\t};\n\t}\n\n\tprivate static _serializeOnEnterRules(onEnterRules: vscode.OnEnterRule[]): extHostProtocol.IOnEnterRuleDto[] {\n\t\treturn onEnterRules.map(ExtHostLanguageFeatures._serializeOnEnterRule);\n\t}\n\n\tprivate static _serializeAutoClosingPair(autoClosingPair: vscode.AutoClosingPair): IAutoClosingPairConditional {\n\t\treturn {\n\t\t\topen: autoClosingPair.open,\n\t\t\tclose: autoClosingPair.close,\n\t\t\tnotIn: autoClosingPair.notIn ? autoClosingPair.notIn.map(v => SyntaxTokenType.toString(v)) : undefined,\n\t\t};\n\t}\n\n\tprivate static _serializeAutoClosingPairs(autoClosingPairs: vscode.AutoClosingPair[]): IAutoClosingPairConditional[] {\n\t\treturn autoClosingPairs.map(ExtHostLanguageFeatures._serializeAutoClosingPair);\n\t}\n\n\tsetLanguageConfiguration(extension: IExtensionDescription, languageId: string, configuration: vscode.LanguageConfiguration): vscode.Disposable {\n\t\tconst { wordPattern } = configuration;\n\n\t\t// check for a valid word pattern\n\t\tif (wordPattern && regExpLeadsToEndlessLoop(wordPattern)) {\n\t\t\tthrow new Error(`Invalid language configuration: wordPattern '${wordPattern}' is not allowed to match the empty string.`);\n\t\t}\n\n\t\t// word definition\n\t\tif (wordPattern) {\n\t\t\tthis._documents.setWordDefinitionFor(languageId, wordPattern);\n\t\t} else {\n\t\t\tthis._documents.setWordDefinitionFor(languageId, undefined);\n\t\t}\n\n\t\tif (configuration.__electricCharacterSupport) {\n\t\t\tthis._apiDeprecation.report('LanguageConfiguration.__electricCharacterSupport', extension,\n\t\t\t\t`Do not use.`);\n\t\t}\n\n\t\tif (configuration.__characterPairSupport) {\n\t\t\tthis._apiDeprecation.report('LanguageConfiguration.__characterPairSupport', extension,\n\t\t\t\t`Do not use.`);\n\t\t}\n\n\t\tconst handle = this._nextHandle();\n\t\tconst serializedConfiguration: extHostProtocol.ILanguageConfigurationDto = {\n\t\t\tcomments: configuration.comments,\n\t\t\tbrackets: configuration.brackets,\n\t\t\twordPattern: configuration.wordPattern ? ExtHostLanguageFeatures._serializeRegExp(configuration.wordPattern) : undefined,\n\t\t\tindentationRules: configuration.indentationRules ? ExtHostLanguageFeatures._serializeIndentationRule(configuration.indentationRules) : undefined,\n\t\t\tonEnterRules: configuration.onEnterRules ? ExtHostLanguageFeatures._serializeOnEnterRules(configuration.onEnterRules) : undefined,\n\t\t\t__electricCharacterSupport: configuration.__electricCharacterSupport,\n\t\t\t__characterPairSupport: configuration.__characterPairSupport,\n\t\t\tautoClosingPairs: configuration.autoClosingPairs ? ExtHostLanguageFeatures._serializeAutoClosingPairs(configuration.autoClosingPairs) : undefined,\n\t\t};\n\n\t\tthis._proxy.$setLanguageConfiguration(handle, languageId, serializedConfiguration);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$setWordDefinitions(wordDefinitions: extHostProtocol.ILanguageWordDefinitionDto[]): void {\n\t\tfor (const wordDefinition of wordDefinitions) {\n\t\t\tthis._documents.setWordDefinitionFor(wordDefinition.languageId, new RegExp(wordDefinition.regexSource, wordDefinition.regexFlags));\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": ["res"]
}
