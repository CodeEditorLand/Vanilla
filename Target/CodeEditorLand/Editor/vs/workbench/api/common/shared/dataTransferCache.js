import{coalesce as i}from"../../../../../vs/base/common/arrays.js";import{VSBuffer as n}from"../../../../../vs/base/common/buffer.js";import"../../../../../vs/base/common/dataTransfer.js";class p{requestIdPool=0;dataTransferFiles=new Map;add(a){const r=this.requestIdPool++;return this.dataTransferFiles.set(r,i(Array.from(a,([,e])=>e.asFile()))),{id:r,dispose:()=>{this.dataTransferFiles.delete(r)}}}async resolveFileData(a,r){const e=this.dataTransferFiles.get(a);if(!e)throw new Error("No data transfer found");const s=e.find(t=>t.id===r);if(!s)throw new Error("No matching file found in data transfer");return n.wrap(await s.data())}dispose(){this.dataTransferFiles.clear()}}export{p as DataTransferFileCache};
