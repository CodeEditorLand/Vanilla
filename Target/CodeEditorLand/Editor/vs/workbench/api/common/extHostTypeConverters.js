import{asArray as Ge,coalesce as V,isNonEmptyArray as je}from"../../../../vs/base/common/arrays.js";import{encodeBase64 as ze,VSBuffer as pe}from"../../../../vs/base/common/buffer.js";import{UriList as fe}from"../../../../vs/base/common/dataTransfer.js";import{createSingleCallFunction as Qe}from"../../../../vs/base/common/functional.js";import*as k from"../../../../vs/base/common/htmlContent.js";import"../../../../vs/base/common/lifecycle.js";import{ResourceMap as $e,ResourceSet as Je}from"../../../../vs/base/common/map.js";import*as ge from"vs/base/common/marked/marked";import{parse as Xe,revive as L}from"../../../../vs/base/common/marshalling.js";import{Mimes as Ce}from"../../../../vs/base/common/mime.js";import{cloneAndChange as qe}from"../../../../vs/base/common/objects.js";import{WellDefinedPrefixTree as Ye}from"../../../../vs/base/common/prefixTree.js";import{basename as Ze}from"../../../../vs/base/common/resources.js";import{ThemeIcon as et}from"../../../../vs/base/common/themables.js";import{isDefined as tt,isEmptyObject as nt,isNumber as ot,isString as xe,isUndefinedOrNull as Ie}from"../../../../vs/base/common/types.js";import{isUriComponents as ve,URI as p}from"../../../../vs/base/common/uri.js";import"../../../../vs/base/common/uriIpc.js";import{RenderLineNumbersType as T}from"../../../../vs/editor/common/config/editorOptions.js";import"../../../../vs/editor/common/core/position.js";import*as ye from"../../../../vs/editor/common/core/range.js";import"../../../../vs/editor/common/core/selection.js";import"../../../../vs/editor/common/editorCommon.js";import*as N from"../../../../vs/editor/common/encodedTokenAttributes.js";import*as c from"../../../../vs/editor/common/languages.js";import"../../../../vs/editor/common/languageSelector.js";import{EndOfLineSequence as H,TrackedRangeStickiness as O}from"../../../../vs/editor/common/model.js";import"../../../../vs/platform/editor/common/editor.js";import"../../../../vs/platform/extensions/common/extensions.js";import{MarkerSeverity as y,MarkerTag as A}from"../../../../vs/platform/markers/common/markers.js";import{ProgressLocation as _}from"../../../../vs/platform/progress/common/progress.js";import"../../../../vs/workbench/api/common/extHost.protocol.js";import"../../../../vs/workbench/api/common/extHostCommands.js";import{getPrivateApiFor as rt}from"../../../../vs/workbench/api/common/extHostTestingPrivateApi.js";import{DEFAULT_EDITOR_ASSOCIATION as at,SaveReason as F}from"../../../../vs/workbench/common/editor.js";import"../../../../vs/workbench/common/views.js";import{ChatAgentLocation as R}from"../../../../vs/workbench/contrib/chat/common/chatAgents.js";import"../../../../vs/workbench/contrib/chat/common/chatModel.js";import"../../../../vs/workbench/contrib/chat/common/chatService.js";import*as S from"../../../../vs/workbench/contrib/chat/common/languageModels.js";import"../../../../vs/workbench/contrib/chat/common/languageModelToolsService.js";import{DebugTreeItemCollapsibleState as it}from"../../../../vs/workbench/contrib/debug/common/debug.js";import*as I from"../../../../vs/workbench/contrib/notebook/common/notebookCommon.js";import"../../../../vs/workbench/contrib/notebook/common/notebookRange.js";import"../../../../vs/workbench/contrib/search/common/search.js";import{TestId as U}from"../../../../vs/workbench/contrib/testing/common/testId.js";import{denamespaceTestTag as st,DetailType as B,namespaceTestTag as ct,TestMessageType as he}from"../../../../vs/workbench/contrib/testing/common/testTypes.js";import"../../../../vs/workbench/services/editor/common/editorGroupColumn.js";import{ACTIVE_GROUP as lt,SIDE_GROUP as dt}from"../../../../vs/workbench/services/editor/common/editorService.js";import"../../../../vs/workbench/services/extensions/common/proxyIdentifier.js";import*as o from"./extHostTypes.js";var ut;(t=>{function a(e){const{selectionStartLineNumber:n,selectionStartColumn:i,positionLineNumber:l,positionColumn:r}=e,d=new o.Position(n-1,i-1),m=new o.Position(l-1,r-1);return new o.Selection(d,m)}t.to=a;function s(e){const{anchor:n,active:i}=e;return{selectionStartLineNumber:n.line+1,selectionStartColumn:n.character+1,positionLineNumber:i.line+1,positionColumn:i.character+1}}t.from=s})(ut||={});var u;(t=>{function a(e){if(!e)return;const{start:n,end:i}=e;return{startLineNumber:n.line+1,startColumn:n.character+1,endLineNumber:i.line+1,endColumn:i.character+1}}t.from=a;function s(e){if(!e)return;const{startLineNumber:n,startColumn:i,endLineNumber:l,endColumn:r}=e;return new o.Range(n-1,i-1,l-1,r-1)}t.to=s})(u||={});var D;(t=>{function a(e){return{uri:e.uri,range:u.from(e.range)}}t.from=a;function s(e){return new o.Location(p.revive(e.uri),u.to(e.range))}t.to=s})(D||={});var mt;(s=>{function a(t){switch(t){case N.StandardTokenType.Comment:return o.StandardTokenType.Comment;case N.StandardTokenType.Other:return o.StandardTokenType.Other;case N.StandardTokenType.RegEx:return o.StandardTokenType.RegEx;case N.StandardTokenType.String:return o.StandardTokenType.String}}s.to=a})(mt||={});var K;(t=>{function a(e){return new o.Position(e.lineNumber-1,e.column-1)}t.to=a;function s(e){return{lineNumber:e.line+1,column:e.character+1}}t.from=s})(K||={});var pt;(e=>{function a(n,i,l){return V(Ge(n).map(r=>s(r,i,l)))}e.from=a;function s(n,i,l){if(typeof n=="string")return{$serialized:!0,language:n,isBuiltin:l?.isBuiltin};if(n)return{$serialized:!0,language:n.language,scheme:t(n.scheme,i),pattern:b.from(n.pattern)??void 0,exclusive:n.exclusive,notebookType:n.notebookType,isBuiltin:l?.isBuiltin}}function t(n,i){return i&&typeof n=="string"?i.transformOutgoingScheme(n):n}})(pt||={});var G;(t=>{function a(e){switch(e){case o.DiagnosticTag.Unnecessary:return A.Unnecessary;case o.DiagnosticTag.Deprecated:return A.Deprecated}}t.from=a;function s(e){switch(e){case A.Unnecessary:return o.DiagnosticTag.Unnecessary;case A.Deprecated:return o.DiagnosticTag.Deprecated;default:return}}t.to=s})(G||={});var ft;(t=>{function a(e){let n;return e.code&&(xe(e.code)||ot(e.code)?n=String(e.code):n={value:String(e.code.value),target:e.code.target}),{...u.from(e.range),message:e.message,source:e.source,code:n,severity:z.from(e.severity),relatedInformation:e.relatedInformation&&e.relatedInformation.map(j.from),tags:Array.isArray(e.tags)?V(e.tags.map(G.from)):void 0}}t.from=a;function s(e){const n=new o.Diagnostic(u.to(e),e.message,z.to(e.severity));return n.source=e.source,n.code=xe(e.code)?e.code:e.code?.value,n.relatedInformation=e.relatedInformation&&e.relatedInformation.map(j.to),n.tags=e.tags&&V(e.tags.map(G.to)),n}t.to=s})(ft||={});var j;(t=>{function a(e){return{...u.from(e.location.range),message:e.message,resource:e.location.uri}}t.from=a;function s(e){return new o.DiagnosticRelatedInformation(new o.Location(e.resource,u.to(e)),e.message)}t.to=s})(j||={});var z;(t=>{function a(e){switch(e){case o.DiagnosticSeverity.Error:return y.Error;case o.DiagnosticSeverity.Warning:return y.Warning;case o.DiagnosticSeverity.Information:return y.Info;case o.DiagnosticSeverity.Hint:return y.Hint}return y.Error}t.from=a;function s(e){switch(e){case y.Info:return o.DiagnosticSeverity.Information;case y.Warning:return o.DiagnosticSeverity.Warning;case y.Error:return o.DiagnosticSeverity.Error;case y.Hint:return o.DiagnosticSeverity.Hint;default:return o.DiagnosticSeverity.Error}}t.to=s})(z||={});var gt;(t=>{function a(e){return typeof e=="number"&&e>=o.ViewColumn.One?e-1:e===o.ViewColumn.Beside?dt:lt}t.from=a;function s(e){if(typeof e=="number"&&e>=0)return e+1;throw new Error("invalid 'EditorGroupColumn'")}t.to=s})(gt||={});function Ct(a){return typeof a.range<"u"}function xt(a){return a.length===0?!0:!!Ct(a[0])}var f;(l=>{function a(r){return r.map(l.from)}l.fromMany=a;function s(r){return r&&typeof r=="object"&&typeof r.language=="string"&&typeof r.value=="string"}function t(r){let d;if(s(r)){const{language:g,value:C}=r;d={value:"```"+g+`
`+C+"\n```\n"}}else o.MarkdownString.isMarkdownString(r)?d={value:r.value,isTrusted:r.isTrusted,supportThemeIcons:r.supportThemeIcons,supportHtml:r.supportHtml,baseUri:r.baseUri}:typeof r=="string"?d={value:r}:d={value:""};const m=Object.create(null);d.uris=m;const x=({href:g})=>{try{let C=p.parse(g,!0);C=C.with({query:e(C.query,m)}),m[g]=C}catch{}return""};return ge.marked.walkTokens(ge.marked.lexer(d.value),g=>{g.type==="link"?x({href:g.href}):g.type==="image"&&typeof g.href=="string"&&x(k.parseHrefAndDimensions(g.href))}),d}l.from=t;function e(r,d){if(!r)return r;let m;try{m=Xe(r)}catch{}if(!m)return r;let x=!1;return m=qe(m,g=>{if(p.isUri(g)){const C=`__uri_${Math.random().toString(16).slice(2,8)}`;return d[C]=g,x=!0,C}else return}),x?JSON.stringify(m):r}function n(r){const d=new o.MarkdownString(r.value,r.supportThemeIcons);return d.isTrusted=r.isTrusted,d.supportHtml=r.supportHtml,d.baseUri=r.baseUri?p.from(r.baseUri):void 0,d}l.to=n;function i(r){if(r)return typeof r=="string"?r:l.from(r)}l.fromStrict=i})(f||={});function ar(a){return xt(a)?a.map(s=>({range:u.from(s.range),hoverMessage:Array.isArray(s.hoverMessage)?f.fromMany(s.hoverMessage):s.hoverMessage?f.from(s.hoverMessage):void 0,renderOptions:s.renderOptions})):a.map(s=>({range:u.from(s)}))}function Q(a){return typeof a>"u"?a:typeof a=="string"?p.file(a):a}var w;(s=>{function a(t){return typeof t>"u"?t:{contentText:t.contentText,contentIconPath:t.contentIconPath?Q(t.contentIconPath):void 0,border:t.border,borderColor:t.borderColor,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,color:t.color,backgroundColor:t.backgroundColor,margin:t.margin,width:t.width,height:t.height}}s.from=a})(w||={});var $;(s=>{function a(t){return typeof t>"u"?t:{backgroundColor:t.backgroundColor,outline:t.outline,outlineColor:t.outlineColor,outlineStyle:t.outlineStyle,outlineWidth:t.outlineWidth,border:t.border,borderColor:t.borderColor,borderRadius:t.borderRadius,borderSpacing:t.borderSpacing,borderStyle:t.borderStyle,borderWidth:t.borderWidth,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,cursor:t.cursor,color:t.color,opacity:t.opacity,letterSpacing:t.letterSpacing,gutterIconPath:t.gutterIconPath?Q(t.gutterIconPath):void 0,gutterIconSize:t.gutterIconSize,overviewRulerColor:t.overviewRulerColor,before:t.before?w.from(t.before):void 0,after:t.after?w.from(t.after):void 0}}s.from=a})($||={});var be;(s=>{function a(t){if(typeof t>"u")return t;switch(t){case o.DecorationRangeBehavior.OpenOpen:return O.AlwaysGrowsWhenTypingAtEdges;case o.DecorationRangeBehavior.ClosedClosed:return O.NeverGrowsWhenTypingAtEdges;case o.DecorationRangeBehavior.OpenClosed:return O.GrowsOnlyWhenTypingBefore;case o.DecorationRangeBehavior.ClosedOpen:return O.GrowsOnlyWhenTypingAfter}}s.from=a})(be||={});var It;(s=>{function a(t){return{isWholeLine:t.isWholeLine,rangeBehavior:t.rangeBehavior?be.from(t.rangeBehavior):void 0,overviewRulerLane:t.overviewRulerLane,light:t.light?$.from(t.light):void 0,dark:t.dark?$.from(t.dark):void 0,backgroundColor:t.backgroundColor,outline:t.outline,outlineColor:t.outlineColor,outlineStyle:t.outlineStyle,outlineWidth:t.outlineWidth,border:t.border,borderColor:t.borderColor,borderRadius:t.borderRadius,borderSpacing:t.borderSpacing,borderStyle:t.borderStyle,borderWidth:t.borderWidth,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,cursor:t.cursor,color:t.color,opacity:t.opacity,letterSpacing:t.letterSpacing,gutterIconPath:t.gutterIconPath?Q(t.gutterIconPath):void 0,gutterIconSize:t.gutterIconSize,overviewRulerColor:t.overviewRulerColor,before:t.before?w.from(t.before):void 0,after:t.after?w.from(t.after):void 0}}s.from=a})(It||={});var v;(t=>{function a(e){return{text:e.newText,eol:e.newEol&&Z.from(e.newEol),range:u.from(e.range)}}t.from=a;function s(e){const n=new o.TextEdit(u.to(e.range),e.text);return n.newEol=typeof e.eol>"u"?void 0:Z.to(e.eol),n}t.to=s})(v||={});var vt;(t=>{function a(e,n){const i={edits:[]};if(e instanceof o.WorkspaceEdit){const l=new Je;for(const r of e._allEntries())r._type===o.FileEditType.File&&p.isUri(r.to)&&r.from===void 0&&l.add(r.to);for(const r of e._allEntries())if(r._type===o.FileEditType.File){let d;r.options?.contents&&(ArrayBuffer.isView(r.options.contents)?d={type:"base64",value:ze(pe.wrap(r.options.contents))}:d={type:"dataTransferItem",id:r.options.contents._itemId}),i.edits.push({oldResource:r.from,newResource:r.to,options:{...r.options,contents:d},metadata:r.metadata})}else r._type===o.FileEditType.Text?i.edits.push({resource:r.uri,textEdit:v.from(r.edit),versionId:l.has(r.uri)?void 0:n?.getTextDocumentVersion(r.uri),metadata:r.metadata}):r._type===o.FileEditType.Snippet?i.edits.push({resource:r.uri,textEdit:{range:u.from(r.range),text:r.edit.value,insertAsSnippet:!0},versionId:l.has(r.uri)?void 0:n?.getTextDocumentVersion(r.uri),metadata:r.metadata}):r._type===o.FileEditType.Cell?i.edits.push({metadata:r.metadata,resource:r.uri,cellEdit:r.edit,notebookMetadata:r.notebookMetadata,notebookVersionId:n?.getNotebookDocumentVersion(r.uri)}):r._type===o.FileEditType.CellReplace&&i.edits.push({metadata:r.metadata,resource:r.uri,notebookVersionId:n?.getNotebookDocumentVersion(r.uri),cellEdit:{editType:I.CellEditType.Replace,index:r.index,count:r.count,cells:r.cells.map(W.from)}})}return i}t.from=a;function s(e){const n=new o.WorkspaceEdit,i=new $e;for(const l of e.edits)if(l.textEdit){const r=l,d=p.revive(r.resource),m=u.to(r.textEdit.range),x=r.textEdit.text,g=r.textEdit.insertAsSnippet;let C;g?C=o.SnippetTextEdit.replace(m,new o.SnippetString(x)):C=o.TextEdit.replace(m,x);const me=i.get(d);me?me.push(C):i.set(d,[C])}else n.renameFile(p.revive(l.oldResource),p.revive(l.newResource),l.options);for(const[l,r]of i)n.set(l,r);return n}t.to=s})(vt||={});var h;(e=>{const a=Object.create(null);a[o.SymbolKind.File]=c.SymbolKind.File,a[o.SymbolKind.Module]=c.SymbolKind.Module,a[o.SymbolKind.Namespace]=c.SymbolKind.Namespace,a[o.SymbolKind.Package]=c.SymbolKind.Package,a[o.SymbolKind.Class]=c.SymbolKind.Class,a[o.SymbolKind.Method]=c.SymbolKind.Method,a[o.SymbolKind.Property]=c.SymbolKind.Property,a[o.SymbolKind.Field]=c.SymbolKind.Field,a[o.SymbolKind.Constructor]=c.SymbolKind.Constructor,a[o.SymbolKind.Enum]=c.SymbolKind.Enum,a[o.SymbolKind.Interface]=c.SymbolKind.Interface,a[o.SymbolKind.Function]=c.SymbolKind.Function,a[o.SymbolKind.Variable]=c.SymbolKind.Variable,a[o.SymbolKind.Constant]=c.SymbolKind.Constant,a[o.SymbolKind.String]=c.SymbolKind.String,a[o.SymbolKind.Number]=c.SymbolKind.Number,a[o.SymbolKind.Boolean]=c.SymbolKind.Boolean,a[o.SymbolKind.Array]=c.SymbolKind.Array,a[o.SymbolKind.Object]=c.SymbolKind.Object,a[o.SymbolKind.Key]=c.SymbolKind.Key,a[o.SymbolKind.Null]=c.SymbolKind.Null,a[o.SymbolKind.EnumMember]=c.SymbolKind.EnumMember,a[o.SymbolKind.Struct]=c.SymbolKind.Struct,a[o.SymbolKind.Event]=c.SymbolKind.Event,a[o.SymbolKind.Operator]=c.SymbolKind.Operator,a[o.SymbolKind.TypeParameter]=c.SymbolKind.TypeParameter;function s(n){return typeof a[n]=="number"?a[n]:c.SymbolKind.Property}e.from=s;function t(n){for(const i in a)if(a[i]===n)return Number(i);return o.SymbolKind.Property}e.to=t})(h||={});var P;(t=>{function a(e){switch(e){case o.SymbolTag.Deprecated:return c.SymbolTag.Deprecated}}t.from=a;function s(e){switch(e){case c.SymbolTag.Deprecated:return o.SymbolTag.Deprecated}}t.to=s})(P||={});var yt;(t=>{function a(e){return{name:e.name,kind:h.from(e.kind),tags:e.tags&&e.tags.map(P.from),containerName:e.containerName,location:E.from(e.location)}}t.from=a;function s(e){const n=new o.SymbolInformation(e.name,h.to(e.kind),e.containerName,E.to(e.location));return n.tags=e.tags&&e.tags.map(P.to),n}t.to=s})(yt||={});var ht;(t=>{function a(e){const n={name:e.name||"!!MISSING: name!!",detail:e.detail,range:u.from(e.range),selectionRange:u.from(e.selectionRange),kind:h.from(e.kind),tags:e.tags?.map(P.from)??[]};return e.children&&(n.children=e.children.map(a)),n}t.from=a;function s(e){const n=new o.DocumentSymbol(e.name,e.detail,h.to(e.kind),u.to(e.range),u.to(e.selectionRange));return je(e.tags)&&(n.tags=e.tags.map(P.to)),e.children&&(n.children=e.children.map(s)),n}t.to=s})(ht||={});var J;(t=>{function a(e){const n=new o.CallHierarchyItem(h.to(e.kind),e.name,e.detail||"",p.revive(e.uri),u.to(e.range),u.to(e.selectionRange));return n._sessionId=e._sessionId,n._itemId=e._itemId,n}t.to=a;function s(e,n,i){if(n=n??e._sessionId,i=i??e._itemId,n===void 0||i===void 0)throw new Error("invalid item");return{_sessionId:n,_itemId:i,name:e.name,detail:e.detail,kind:h.from(e.kind),uri:e.uri,range:u.from(e.range),selectionRange:u.from(e.selectionRange),tags:e.tags?.map(P.from)}}t.from=s})(J||={});var bt;(s=>{function a(t){return new o.CallHierarchyIncomingCall(J.to(t.from),t.fromRanges.map(e=>u.to(e)))}s.to=a})(bt||={});var Tt;(s=>{function a(t){return new o.CallHierarchyOutgoingCall(J.to(t.to),t.fromRanges.map(e=>u.to(e)))}s.to=a})(Tt||={});var E;(t=>{function a(e){return{range:e.range&&u.from(e.range),uri:e.uri}}t.from=a;function s(e){return new o.Location(p.revive(e.uri),u.to(e.range))}t.to=s})(E||={});var Rt;(t=>{function a(e){const n=e,i=e;return{originSelectionRange:n.originSelectionRange?u.from(n.originSelectionRange):void 0,uri:n.targetUri?n.targetUri:i.uri,range:u.from(n.targetRange?n.targetRange:i.range),targetSelectionRange:n.targetSelectionRange?u.from(n.targetSelectionRange):void 0}}t.from=a;function s(e){return{targetUri:p.revive(e.uri),targetRange:u.to(e.range),targetSelectionRange:e.targetSelectionRange?u.to(e.targetSelectionRange):void 0,originSelectionRange:e.originSelectionRange?u.to(e.originSelectionRange):void 0}}t.to=s})(Rt||={});var St;(t=>{function a(e){return{range:u.from(e.range),contents:f.fromMany(e.contents),canIncreaseVerbosity:e.canIncreaseVerbosity,canDecreaseVerbosity:e.canDecreaseVerbosity}}t.from=a;function s(e){const n=e.contents.map(f.to),i=u.to(e.range),l=e.canIncreaseVerbosity,r=e.canDecreaseVerbosity;return new o.VerboseHover(n,i,l,r)}t.to=s})(St||={});var Dt;(t=>{function a(e){return{range:u.from(e.range),expression:e.expression}}t.from=a;function s(e){return new o.EvaluatableExpression(u.to(e.range),e.expression)}t.to=s})(Dt||={});var Pt;(t=>{function a(e){if(e instanceof o.InlineValueText)return{type:"text",range:u.from(e.range),text:e.text};if(e instanceof o.InlineValueVariableLookup)return{type:"variable",range:u.from(e.range),variableName:e.variableName,caseSensitiveLookup:e.caseSensitiveLookup};if(e instanceof o.InlineValueEvaluatableExpression)return{type:"expression",range:u.from(e.range),expression:e.expression};throw new Error("Unknown 'InlineValue' type")}t.from=a;function s(e){switch(e.type){case"text":return{range:u.to(e.range),text:e.text};case"variable":return{range:u.to(e.range),variableName:e.variableName,caseSensitiveLookup:e.caseSensitiveLookup};case"expression":return{range:u.to(e.range),expression:e.expression}}}t.to=s})(Pt||={});var kt;(t=>{function a(e){return{frameId:e.frameId,stoppedLocation:u.from(e.stoppedLocation)}}t.from=a;function s(e){return new o.InlineValueContext(e.frameId,u.to(e.stoppedLocation))}t.to=s})(kt||={});var X;(t=>{function a(e){return{range:u.from(e.range),kind:e.kind}}t.from=a;function s(e){return new o.DocumentHighlight(u.to(e.range),e.kind)}t.to=s})(X||={});var Kt;(t=>{function a(e){return{uri:e.uri,highlights:e.highlights.map(X.from)}}t.from=a;function s(e){return new o.MultiDocumentHighlight(p.revive(e.uri),e.highlights.map(X.to))}t.to=s})(Kt||={});var Te;(s=>{function a(t){switch(t){case c.CompletionTriggerKind.TriggerCharacter:return o.CompletionTriggerKind.TriggerCharacter;case c.CompletionTriggerKind.TriggerForIncompleteCompletions:return o.CompletionTriggerKind.TriggerForIncompleteCompletions;case c.CompletionTriggerKind.Invoke:default:return o.CompletionTriggerKind.Invoke}}s.to=a})(Te||={});var wt;(s=>{function a(t){return{triggerKind:Te.to(t.triggerKind),triggerCharacter:t.triggerCharacter}}s.to=a})(wt||={});var Re;(t=>{function a(e){switch(e){case o.CompletionItemTag.Deprecated:return c.CompletionItemTag.Deprecated}}t.from=a;function s(e){switch(e){case c.CompletionItemTag.Deprecated:return o.CompletionItemTag.Deprecated}}t.to=s})(Re||={});var Se;(n=>{const a=new Map([[o.CompletionItemKind.Method,c.CompletionItemKind.Method],[o.CompletionItemKind.Function,c.CompletionItemKind.Function],[o.CompletionItemKind.Constructor,c.CompletionItemKind.Constructor],[o.CompletionItemKind.Field,c.CompletionItemKind.Field],[o.CompletionItemKind.Variable,c.CompletionItemKind.Variable],[o.CompletionItemKind.Class,c.CompletionItemKind.Class],[o.CompletionItemKind.Interface,c.CompletionItemKind.Interface],[o.CompletionItemKind.Struct,c.CompletionItemKind.Struct],[o.CompletionItemKind.Module,c.CompletionItemKind.Module],[o.CompletionItemKind.Property,c.CompletionItemKind.Property],[o.CompletionItemKind.Unit,c.CompletionItemKind.Unit],[o.CompletionItemKind.Value,c.CompletionItemKind.Value],[o.CompletionItemKind.Constant,c.CompletionItemKind.Constant],[o.CompletionItemKind.Enum,c.CompletionItemKind.Enum],[o.CompletionItemKind.EnumMember,c.CompletionItemKind.EnumMember],[o.CompletionItemKind.Keyword,c.CompletionItemKind.Keyword],[o.CompletionItemKind.Snippet,c.CompletionItemKind.Snippet],[o.CompletionItemKind.Text,c.CompletionItemKind.Text],[o.CompletionItemKind.Color,c.CompletionItemKind.Color],[o.CompletionItemKind.File,c.CompletionItemKind.File],[o.CompletionItemKind.Reference,c.CompletionItemKind.Reference],[o.CompletionItemKind.Folder,c.CompletionItemKind.Folder],[o.CompletionItemKind.Event,c.CompletionItemKind.Event],[o.CompletionItemKind.Operator,c.CompletionItemKind.Operator],[o.CompletionItemKind.TypeParameter,c.CompletionItemKind.TypeParameter],[o.CompletionItemKind.Issue,c.CompletionItemKind.Issue],[o.CompletionItemKind.User,c.CompletionItemKind.User]]);function s(i){return a.get(i)??c.CompletionItemKind.Property}n.from=s;const t=new Map([[c.CompletionItemKind.Method,o.CompletionItemKind.Method],[c.CompletionItemKind.Function,o.CompletionItemKind.Function],[c.CompletionItemKind.Constructor,o.CompletionItemKind.Constructor],[c.CompletionItemKind.Field,o.CompletionItemKind.Field],[c.CompletionItemKind.Variable,o.CompletionItemKind.Variable],[c.CompletionItemKind.Class,o.CompletionItemKind.Class],[c.CompletionItemKind.Interface,o.CompletionItemKind.Interface],[c.CompletionItemKind.Struct,o.CompletionItemKind.Struct],[c.CompletionItemKind.Module,o.CompletionItemKind.Module],[c.CompletionItemKind.Property,o.CompletionItemKind.Property],[c.CompletionItemKind.Unit,o.CompletionItemKind.Unit],[c.CompletionItemKind.Value,o.CompletionItemKind.Value],[c.CompletionItemKind.Constant,o.CompletionItemKind.Constant],[c.CompletionItemKind.Enum,o.CompletionItemKind.Enum],[c.CompletionItemKind.EnumMember,o.CompletionItemKind.EnumMember],[c.CompletionItemKind.Keyword,o.CompletionItemKind.Keyword],[c.CompletionItemKind.Snippet,o.CompletionItemKind.Snippet],[c.CompletionItemKind.Text,o.CompletionItemKind.Text],[c.CompletionItemKind.Color,o.CompletionItemKind.Color],[c.CompletionItemKind.File,o.CompletionItemKind.File],[c.CompletionItemKind.Reference,o.CompletionItemKind.Reference],[c.CompletionItemKind.Folder,o.CompletionItemKind.Folder],[c.CompletionItemKind.Event,o.CompletionItemKind.Event],[c.CompletionItemKind.Operator,o.CompletionItemKind.Operator],[c.CompletionItemKind.TypeParameter,o.CompletionItemKind.TypeParameter],[c.CompletionItemKind.User,o.CompletionItemKind.User],[c.CompletionItemKind.Issue,o.CompletionItemKind.Issue]]);function e(i){return t.get(i)??o.CompletionItemKind.Property}n.to=e})(Se||={});var Et;(s=>{function a(t,e){const n=new o.CompletionItem(t.label);return n.insertText=t.insertText,n.kind=Se.to(t.kind),n.tags=t.tags?.map(Re.to),n.detail=t.detail,n.documentation=k.isMarkdownString(t.documentation)?f.to(t.documentation):t.documentation,n.sortText=t.sortText,n.filterText=t.filterText,n.preselect=t.preselect,n.commitCharacters=t.commitCharacters,ye.Range.isIRange(t.range)?n.range=u.to(t.range):typeof t.range=="object"&&(n.range={inserting:u.to(t.range.insert),replacing:u.to(t.range.replace)}),n.keepWhitespace=typeof t.insertTextRules>"u"?!1:!!(t.insertTextRules&c.CompletionItemInsertTextRule.KeepWhitespace),typeof t.insertTextRules<"u"&&t.insertTextRules&c.CompletionItemInsertTextRule.InsertAsSnippet?n.insertText=new o.SnippetString(t.insertText):(n.insertText=t.insertText,n.textEdit=n.range instanceof o.Range?new o.TextEdit(n.range,n.insertText):void 0),t.additionalTextEdits&&t.additionalTextEdits.length>0&&(n.additionalTextEdits=t.additionalTextEdits.map(i=>v.to(i))),n.command=e&&t.command?e.fromInternal(t.command):void 0,n}s.to=a})(Et||={});var q;(t=>{function a(e){if(typeof e.label!="string"&&!Array.isArray(e.label))throw new TypeError("Invalid label");return{label:e.label,documentation:f.fromStrict(e.documentation)}}t.from=a;function s(e){return{label:e.label,documentation:k.isMarkdownString(e.documentation)?f.to(e.documentation):e.documentation}}t.to=s})(q||={});var Y;(t=>{function a(e){return{label:e.label,documentation:f.fromStrict(e.documentation),parameters:Array.isArray(e.parameters)?e.parameters.map(q.from):[],activeParameter:e.activeParameter}}t.from=a;function s(e){return{label:e.label,documentation:k.isMarkdownString(e.documentation)?f.to(e.documentation):e.documentation,parameters:Array.isArray(e.parameters)?e.parameters.map(q.to):[],activeParameter:e.activeParameter}}t.to=s})(Y||={});var Mt;(t=>{function a(e){return{activeSignature:e.activeSignature,activeParameter:e.activeParameter,signatures:Array.isArray(e.signatures)?e.signatures.map(Y.from):[]}}t.from=a;function s(e){return{activeSignature:e.activeSignature,activeParameter:e.activeParameter,signatures:Array.isArray(e.signatures)?e.signatures.map(Y.to):[]}}t.to=s})(Mt||={});var Lt;(s=>{function a(t,e){const n=new o.InlayHint(K.to(e.position),typeof e.label=="string"?e.label:e.label.map(De.to.bind(void 0,t)),e.kind&&Pe.to(e.kind));return n.textEdits=e.textEdits&&e.textEdits.map(v.to),n.tooltip=k.isMarkdownString(e.tooltip)?f.to(e.tooltip):e.tooltip,n.paddingLeft=e.paddingLeft,n.paddingRight=e.paddingRight,n}s.to=a})(Lt||={});var De;(s=>{function a(t,e){const n=new o.InlayHintLabelPart(e.label);return n.tooltip=k.isMarkdownString(e.tooltip)?f.to(e.tooltip):e.tooltip,c.Command.is(e.command)&&(n.command=t.fromInternal(e.command)),e.location&&(n.location=E.to(e.location)),n}s.to=a})(De||={});var Pe;(t=>{function a(e){return e}t.from=a;function s(e){return e}t.to=s})(Pe||={});var Nt;(t=>{function a(e){return{range:u.from(e.range),url:e.target,tooltip:e.tooltip}}t.from=a;function s(e){let n;if(e.url)try{n=typeof e.url=="string"?p.parse(e.url,!0):p.revive(e.url)}catch{}const i=new o.DocumentLink(u.to(e.range),n);return i.tooltip=e.tooltip,i}t.to=s})(Nt||={});var Ht;(t=>{function a(e){const n=new o.ColorPresentation(e.label);return e.textEdit&&(n.textEdit=v.to(e.textEdit)),e.additionalTextEdits&&(n.additionalTextEdits=e.additionalTextEdits.map(i=>v.to(i))),n}t.to=a;function s(e){return{label:e.label,textEdit:e.textEdit?v.from(e.textEdit):void 0,additionalTextEdits:e.additionalTextEdits?e.additionalTextEdits.map(n=>v.from(n)):void 0}}t.from=s})(Ht||={});var Ot;(t=>{function a(e){return new o.Color(e[0],e[1],e[2],e[3])}t.to=a;function s(e){return[e.red,e.green,e.blue,e.alpha]}t.from=s})(Ot||={});var At;(t=>{function a(e){return{range:u.from(e.range)}}t.from=a;function s(e){return new o.SelectionRange(u.to(e.range))}t.to=s})(At||={});var Ft;(s=>{function a(t){switch(t){case F.AUTO:return o.TextDocumentSaveReason.AfterDelay;case F.EXPLICIT:return o.TextDocumentSaveReason.Manual;case F.FOCUS_CHANGE:case F.WINDOW_CHANGE:return o.TextDocumentSaveReason.FocusOut}}s.to=a})(Ft||={});var Ut;(t=>{function a(e){switch(e){case o.TextEditorLineNumbersStyle.Off:return T.Off;case o.TextEditorLineNumbersStyle.Relative:return T.Relative;case o.TextEditorLineNumbersStyle.Interval:return T.Interval;case o.TextEditorLineNumbersStyle.On:default:return T.On}}t.from=a;function s(e){switch(e){case T.Off:return o.TextEditorLineNumbersStyle.Off;case T.Relative:return o.TextEditorLineNumbersStyle.Relative;case T.Interval:return o.TextEditorLineNumbersStyle.Interval;case T.On:default:return o.TextEditorLineNumbersStyle.On}}t.to=s})(Ut||={});var Z;(t=>{function a(e){if(e===o.EndOfLine.CRLF)return H.CRLF;if(e===o.EndOfLine.LF)return H.LF}t.from=a;function s(e){if(e===H.CRLF)return o.EndOfLine.CRLF;if(e===H.LF)return o.EndOfLine.LF}t.to=s})(Z||={});var Wt;(s=>{function a(t){if(typeof t=="object")return t.viewId;switch(t){case o.ProgressLocation.SourceControl:return _.Scm;case o.ProgressLocation.Window:return _.Window;case o.ProgressLocation.Notification:return _.Notification}throw new Error("Unknown 'ProgressLocation'")}s.from=a})(Wt||={});var Vt;(t=>{function a(e){const n={start:e.start+1,end:e.end+1};return e.kind&&(n.kind=ee.from(e.kind)),n}t.from=a;function s(e){const n={start:e.start-1,end:e.end-1};return e.kind&&(n.kind=ee.to(e.kind)),n}t.to=s})(Vt||={});var ee;(t=>{function a(e){if(e)switch(e){case o.FoldingRangeKind.Comment:return c.FoldingRangeKind.Comment;case o.FoldingRangeKind.Imports:return c.FoldingRangeKind.Imports;case o.FoldingRangeKind.Region:return c.FoldingRangeKind.Region}}t.from=a;function s(e){if(e)switch(e.value){case c.FoldingRangeKind.Comment.value:return o.FoldingRangeKind.Comment;case c.FoldingRangeKind.Imports.value:return o.FoldingRangeKind.Imports;case c.FoldingRangeKind.Region.value:return o.FoldingRangeKind.Region}}t.to=s})(ee||={});var _t;(s=>{function a(t){if(t)return{pinned:typeof t.preview=="boolean"?!t.preview:void 0,inactive:t.background,preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?u.from(t.selection):void 0,override:typeof t.override=="boolean"?at.id:void 0}}s.from=a})(_t||={});var b;(n=>{function a(i){return i instanceof o.RelativePattern?i.toJSON():typeof i=="string"?i:s(i)||t(i)?new o.RelativePattern(i.baseUri??i.base,i.pattern).toJSON():i}n.from=a;function s(i){const l=i;return l?p.isUri(l.baseUri)&&typeof l.pattern=="string":!1}function t(i){const l=i;return l?typeof l.base=="string"&&typeof l.pattern=="string":!1}function e(i){return typeof i=="string"?i:new o.RelativePattern(p.revive(i.baseUri),i.pattern)}n.to=e})(b||={});var Bt;(s=>{function a(t){if(t){if(Array.isArray(t))return t.map(a);if(typeof t=="string")return t;{const e=t;return{language:e.language,scheme:e.scheme,pattern:b.from(e.pattern),exclusive:e.exclusive,notebookType:e.notebookType}}}else return}s.from=a})(Bt||={});var Gt;(t=>{function a(e){return!!e&&typeof e=="object"&&"documents"in e&&Array.isArray(e.documents)&&e.documents.every(n=>Array.isArray(n)&&n.every(i=>i&&typeof i=="object"&&"uri"in i&&p.isUri(i.uri)&&"version"in i&&typeof i.version=="number"&&"ranges"in i&&Array.isArray(i.ranges)&&i.ranges.every(l=>l instanceof o.Range)))}t.is=a;function s(e){return{documents:e.documents.map(n=>n.map(i=>({uri:p.from(i.uri),version:i.version,ranges:i.ranges.map(l=>u.from(l))})))}}t.from=s})(Gt||={});var jt;(t=>{function a(e){return{start:e.start,end:e.end}}t.from=a;function s(e){return new o.NotebookRange(e.start,e.end)}t.to=s})(jt||={});var te;(t=>{function a(e){return{timing:typeof e.runStartTime=="number"&&typeof e.runEndTime=="number"?{startTime:e.runStartTime,endTime:e.runEndTime}:void 0,executionOrder:e.executionOrder,success:e.lastRunSuccess}}t.to=a;function s(e){return{lastRunSuccess:e.success,runStartTime:e.timing?.startTime,runEndTime:e.timing?.endTime,executionOrder:e.executionOrder}}t.from=s})(te||={});var zt;(s=>{function a(t){if(t===I.NotebookCellExecutionState.Unconfirmed)return o.NotebookCellExecutionState.Pending;if(t===I.NotebookCellExecutionState.Pending)return;if(t===I.NotebookCellExecutionState.Executing)return o.NotebookCellExecutionState.Executing;throw new Error(`Unknown state: ${t}`)}s.to=a})(zt||={});var ne;(t=>{function a(e){switch(e){case o.NotebookCellKind.Markup:return I.CellKind.Markup;case o.NotebookCellKind.Code:default:return I.CellKind.Code}}t.from=a;function s(e){switch(e){case I.CellKind.Markup:return o.NotebookCellKind.Markup;case I.CellKind.Code:default:return o.NotebookCellKind.Code}}t.to=s})(ne||={});var Qt;(t=>{function a(e){const n={metadata:e.metadata??Object.create(null),cells:[]};for(const i of e.cells)o.NotebookCellData.validate(i),n.cells.push(W.from(i));return n}t.from=a;function s(e){const n=new o.NotebookData(e.cells.map(W.to));return nt(e.metadata)||(n.metadata=e.metadata),n}t.to=s})(Qt||={});var W;(t=>{function a(e){return{cellKind:ne.from(e.kind),language:e.languageId,mime:e.mime,source:e.value,metadata:e.metadata,internalMetadata:te.from(e.executionSummary??{}),outputs:e.outputs?e.outputs.map(re.from):[]}}t.from=a;function s(e){return new o.NotebookCellData(ne.to(e.cellKind),e.source,e.language,e.mime,e.outputs?e.outputs.map(re.to):void 0,e.metadata,e.internalMetadata?te.to(e.internalMetadata):void 0)}t.to=s})(W||={});var oe;(t=>{function a(e){return{mime:e.mime,valueBytes:pe.wrap(e.data)}}t.from=a;function s(e){return new o.NotebookCellOutputItem(e.valueBytes.buffer,e.mime)}t.to=s})(oe||={});var re;(t=>{function a(e){return{outputId:e.id,items:e.items.map(oe.from),metadata:e.metadata}}t.from=a;function s(e){const n=e.items.map(oe.to);return new o.NotebookCellOutput(n,e.outputId,e.metadata)}t.to=s})(re||={});var $t;(e=>{function a(n){return t(n)?{include:b.from(n.include)??void 0,exclude:b.from(n.exclude)??void 0}:b.from(n)??void 0}e.from=a;function s(n){return t(n)?{include:b.to(n.include),exclude:b.to(n.exclude)}:b.to(n)}e.to=s;function t(n){const i=n;return i?!Ie(i.include)&&!Ie(i.exclude):!1}})($t||={});var Jt;(s=>{function a(t,e,n){const i=typeof t.command=="string"?{title:"",command:t.command}:t.command;return{alignment:t.alignment===o.NotebookCellStatusBarAlignment.Left?I.CellStatusbarAlignment.Left:I.CellStatusbarAlignment.Right,command:e.toInternal(i,n),text:t.text,tooltip:t.tooltip,accessibilityInformation:t.accessibilityInformation,priority:t.priority}}s.from=a})(Jt||={});var Xt;(s=>{function a(t,e,n){const i=typeof t.command=="string"?{title:"",command:t.command}:t.command;return{command:e.toInternal(i,n),label:t.label,description:t.description,detail:t.detail,documentation:t.documentation}}s.from=a})(Xt||={});var qt;(s=>{function a(t){return{transientOutputs:t?.transientOutputs??!1,transientCellMetadata:t?.transientCellMetadata??{},transientDocumentMetadata:t?.transientDocumentMetadata??{},cellContentMetadata:t?.cellContentMetadata??{}}}s.from=a})(qt||={});var Yt;(t=>{function a(e){return{uri:e.uri,provides:e.provides}}t.from=a;function s(e){return new o.NotebookRendererScript(p.revive(e.uri),e.provides)}t.to=s})(Yt||={});var ke;(t=>{function a(e){return{message:f.fromStrict(e.message)||"",type:he.Error,expected:e.expectedOutput,actual:e.actualOutput,contextValue:e.contextValue,location:e.location&&{range:u.from(e.location.range),uri:e.location.uri},stackTrace:e.stackTrace?.map(n=>({label:n.label,position:n.position&&K.from(n.position),uri:n.uri&&p.revive(n.uri).toJSON()}))}}t.from=a;function s(e){const n=new o.TestMessage(typeof e.message=="string"?e.message:f.to(e.message));return n.actualOutput=e.actual,n.expectedOutput=e.expected,n.contextValue=e.contextValue,n.location=e.location?E.to(e.location):void 0,n}t.to=s})(ke||={});var M;(t=>(t.namespace=ct,t.denamespace=st))(M||={});var Ke;(t=>{function a(e){const n=rt(e).controllerId;return{extId:U.fromExtHostTestItem(e,n).toString(),label:e.label,uri:p.revive(e.uri),busy:e.busy,tags:e.tags.map(i=>M.namespace(n,i.id)),range:ye.Range.lift(u.from(e.range)),description:e.description||null,sortText:e.sortText||null,error:e.error&&f.fromStrict(e.error)||null}}t.from=a;function s(e){return{parent:void 0,error:void 0,id:U.fromString(e.extId).localId,label:e.label,uri:p.revive(e.uri),tags:(e.tags||[]).map(n=>{const{tagId:i}=M.denamespace(n);return new o.TestTag(i)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:u.to(e.range||void 0),canResolveChildren:!1,busy:e.busy,description:e.description||void 0,sortText:e.sortText||void 0}}t.toPlain=s})(Ke||={}),(t=>{function a(e){return{id:e.id}}t.from=a;function s(e){return new o.TestTag(e.id)}t.to=s})(M||={});var Zt;(t=>{const a=(e,n)=>{const i=e.value;if(!i)return;const l={...Ke.toPlain(i.item),parent:n,taskStates:i.tasks.map(r=>({state:r.state,duration:r.duration,messages:r.messages.filter(d=>d.type===he.Error).map(ke.to)})),children:[]};if(e.children)for(const r of e.children.values()){const d=a(r,l);d&&l.children.push(d)}return l};function s(e){const n=new Ye;for(const r of e.items)n.insert(U.fromString(r.item.extId).path,r);const i=[n.nodes],l=[];for(;i.length;)for(const r of i.pop())r.value?l.push(r):r.children&&i.push(r.children.values());return{completedAt:e.completedAt,results:l.map(r=>a(r)).filter(tt)}}t.to=s})(Zt||={});var en;(l=>{function a(r){return{covered:r.covered,total:r.total}}function s(r){return"line"in r?K.from(r):u.from(r)}function t(r){if(r)return"endLineNumber"in r?u.to(r):K.to(r)}function e(r){if(r.type===B.Statement){const d=[];if(r.branches)for(const m of r.branches)d.push({executed:m.count,location:t(m.location),label:m.label});return new o.StatementCoverage(r.count,t(r.location),r.branches?.map(m=>new o.BranchCoverage(m.count,t(m.location),m.label)))}else return new o.DeclarationCoverage(r.name,r.count,t(r.location))}l.to=e;function n(r){if(typeof r.executed=="number"&&r.executed<0)throw new Error(`Invalid coverage count ${r.executed}`);return"branches"in r?{count:r.executed,location:s(r.location),type:B.Statement,branches:r.branches.length?r.branches.map(d=>({count:d.executed,location:d.location&&s(d.location),label:d.label})):void 0}:{type:B.Declaration,name:r.name,count:r.executed,location:s(r.location)}}l.fromDetails=n;function i(r,d,m){return o.validateTestCoverageCount(m.statementCoverage),o.validateTestCoverageCount(m.branchCoverage),o.validateTestCoverageCount(m.declarationCoverage),{id:d,uri:m.uri,statement:a(m.statementCoverage),branch:m.branchCoverage&&a(m.branchCoverage),declaration:m.declarationCoverage&&a(m.declarationCoverage),testIds:m instanceof o.FileCoverage&&m.fromTests.length?m.fromTests.map(x=>U.fromExtHostTestItem(x,r).toString()):void 0}}l.fromFile=i})(en||={});var tn;(s=>{function a(t){switch(t){case c.CodeActionTriggerType.Invoke:return o.CodeActionTriggerKind.Invoke;case c.CodeActionTriggerType.Auto:return o.CodeActionTriggerKind.Automatic}}s.to=a})(tn||={});var nn;(t=>{function a(e){const n=new o.TypeHierarchyItem(h.to(e.kind),e.name,e.detail||"",p.revive(e.uri),u.to(e.range),u.to(e.selectionRange));return n._sessionId=e._sessionId,n._itemId=e._itemId,n}t.to=a;function s(e,n,i){if(n=n??e._sessionId,i=i??e._itemId,n===void 0||i===void 0)throw new Error("invalid item");return{_sessionId:n,_itemId:i,kind:h.from(e.kind),name:e.name,detail:e.detail??"",uri:e.uri,range:u.from(e.range),selectionRange:u.from(e.selectionRange),tags:e.tags?.map(P.from)}}t.from=s})(nn||={});var on;(s=>{function a(t){if(t)return{value:t.value,tooltip:t.tooltip}}s.from=a})(on||={});var ae;(n=>{function a(i,l,r){const d=l.fileData;return d?new o.InternalFileDataTransferItem(new o.DataTransferFile(d.name,p.revive(d.uri),d.id,Qe(()=>r(d.id)))):i===Ce.uriList&&l.uriListData?new o.InternalDataTransferItem(e(l.uriListData)):new o.InternalDataTransferItem(l.asString)}n.to=a;async function s(i,l){const r=await l.asString();if(i===Ce.uriList)return{asString:r,fileData:void 0,uriListData:t(r)};const d=l.asFile();return{asString:r,fileData:d?{name:d.name,uri:d.uri,id:d._itemId??d.id}:void 0}}n.from=s;function t(i){return fe.split(i).map(l=>{if(l.startsWith("#"))return l;try{return p.parse(l)}catch{}return l})}function e(i){return fe.create(i.map(l=>typeof l=="string"?l:p.revive(l)))}})(ae||={});var rn;(t=>{function a(e,n){const i=e.items.map(([l,r])=>[l,ae.to(l,r,n)]);return new o.DataTransfer(i)}t.toDataTransfer=a;async function s(e){const n={items:[]},i=[];for(const[l,r]of e)i.push((async()=>{n.items.push([l,await ae.from(l,r)])})());return await Promise.all(i),n}t.from=s})(rn||={});var we;(t=>{function a(e,n){return{kind:"reply",agentId:e.participant??n?.agentId??"",subCommand:e.command??n?.command,message:e.prompt,title:e.label}}t.from=a;function s(e){return{prompt:e.message,label:e.title,participant:e.agentId,command:e.subCommand}}t.to=s})(we||={});var ie;(t=>{function a(e){switch(e){case S.ChatMessageRole.System:return o.LanguageModelChatMessageRole.System;case S.ChatMessageRole.User:return o.LanguageModelChatMessageRole.User;case S.ChatMessageRole.Assistant:return o.LanguageModelChatMessageRole.Assistant}}t.to=a;function s(e){switch(e){case o.LanguageModelChatMessageRole.System:return S.ChatMessageRole.System;case o.LanguageModelChatMessageRole.User:return S.ChatMessageRole.User;case o.LanguageModelChatMessageRole.Assistant:return S.ChatMessageRole.Assistant}return S.ChatMessageRole.User}t.from=s})(ie||={});var an;(t=>{function a(e){const n=e.content.map(d=>d.type==="text"?d.value:d.type==="tool_result"?new o.LanguageModelToolResultPart(d.toolCallId,d.value,d.isError):new o.LanguageModelToolCallPart(d.name,d.toolCallId,d.parameters)),i=n.find(d=>typeof d=="string")??"",l=ie.to(e.role),r=new o.LanguageModelChatMessage(l,i,e.name);return r.content2=n,r}t.to=a;function s(e){const n=ie.from(e.role),i=e.name,l=e.content2.map(r=>{if(r instanceof o.LanguageModelToolResultPart)return{type:"tool_result",toolCallId:r.toolCallId,value:r.content,isError:r.isError};if(r instanceof o.LanguageModelToolCallPart)return{type:"tool_use",toolCallId:r.toolCallId,name:r.name,parameters:r.parameters};if(typeof r!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:r}});return{role:n,name:i,content:l}}t.from=s})(an||={});var se;(t=>{function a(e){return{kind:"markdownContent",content:f.from(e.value)}}t.from=a;function s(e){return new o.ChatResponseMarkdownPart(f.to(e.content))}t.to=s})(se||={});var Ee;(t=>{function a(e){return{kind:"markdownVuln",content:f.from(e.value),vulnerabilities:e.vulnerabilities}}t.from=a;function s(e){return new o.ChatResponseMarkdownWithVulnerabilitiesPart(f.to(e.content),e.vulnerabilities)}t.to=s})(Ee||={});var Me;(t=>{function a(e){return{kind:"agentDetection",agentId:e.participant,command:e.command}}t.from=a;function s(e){return new o.ChatResponseDetectedParticipantPart(e.agentId,e.command)}t.to=s})(Me||={});var Le;(s=>{function a(t){return{kind:"confirmation",title:t.title,message:t.message,data:t.data,buttons:t.buttons}}s.from=a})(Le||={});var ce;(t=>{function a(e){const{value:n,baseUri:i}=e;function l(r,d){return r.map(m=>{const x=p.joinPath(d,m.name);return{label:m.name,uri:x,children:m.children&&l(m.children,x)}})}return{kind:"treeData",treeData:{label:Ze(i),uri:i,children:l(n,i)}}}t.from=a;function s(e){const n=L(e.treeData);function i(d){return d.map(m=>({name:m.label,children:m.children&&i(m.children)}))}const l=n.uri,r=n.children?i(n.children):[];return new o.ChatResponseFileTreePart(r,l)}t.to=s})(ce||={});var le;(t=>{function a(e){const n=i=>p.isUri(i);return{kind:"inlineReference",name:e.title,inlineReference:n(e.value)?e.value:D.from(e.value)}}t.from=a;function s(e){const n=L(e);return new o.ChatResponseAnchorPart(p.isUri(n.inlineReference)?n.inlineReference:D.to(n.inlineReference),e.name)}t.to=s})(le||={});var Ne;(t=>{function a(e){return{kind:"progressMessage",content:f.from(e.value)}}t.from=a;function s(e){return new o.ChatResponseProgressPart(e.content.value)}t.to=s})(Ne||={});var He;(t=>{function a(e){return{kind:"warning",content:f.from(e.value)}}t.from=a;function s(e){return new o.ChatResponseWarningPart(e.content.value)}t.to=s})(He||={});var Oe;(t=>{function a(e){return{kind:"move",uri:e.uri,range:u.from(e.range)}}t.from=a;function s(e){return new o.ChatResponseMovePart(p.revive(e.uri),u.to(e.range))}t.to=s})(Oe||={});var sn;(s=>{function a(t){return{kind:"progressTask",content:f.from(t.value)}}s.from=a})(sn||={});var cn;(s=>{function a(t){return{kind:"progressTaskResult",content:typeof t=="string"?f.from(t):void 0}}s.from=a})(cn||={});var de;(t=>{function a(e,n,i){return{kind:"command",command:n.toInternal(e.value,i)??{command:e.value.command,title:e.value.title}}}t.from=a;function s(e,n){return new o.ChatResponseCommandButtonPart(n.fromInternal(e.command)??{command:e.command.id,title:e.command.title})}t.to=s})(de||={});var Ae;(t=>{function a(e){return{kind:"textEdit",uri:e.uri,edits:e.edits.map(n=>v.from(n))}}t.from=a;function s(e){return new o.ChatResponseTextEditPart(p.revive(e.uri),e.edits.map(n=>v.to(n)))}t.to=s})(Ae||={});var ue;(t=>{function a(e){const n=et.isThemeIcon(e.iconPath)?e.iconPath:p.isUri(e.iconPath)?{light:p.revive(e.iconPath)}:e.iconPath&&"light"in e.iconPath&&"dark"in e.iconPath&&p.isUri(e.iconPath.light)&&p.isUri(e.iconPath.dark)?{light:p.revive(e.iconPath.light),dark:p.revive(e.iconPath.dark)}:void 0;return typeof e.value=="object"&&"variableName"in e.value?{kind:"reference",reference:{variableName:e.value.variableName,value:p.isUri(e.value.value)||!e.value.value?e.value.value:D.from(e.value.value)},iconPath:n,options:e.options}:{kind:"reference",reference:p.isUri(e.value)||typeof e.value=="string"?e.value:D.from(e.value),iconPath:n,options:e.options}}t.from=a;function s(e){const n=L(e),i=l=>p.isUri(l)?l:D.to(l);return new o.ChatResponseReferencePart(typeof n.reference=="string"?n.reference:"variableName"in n.reference?{variableName:n.reference.variableName,value:n.reference.value&&i(n.reference.value)}:i(n.reference))}t.to=s})(ue||={});var Fe;(s=>{function a(t){return{kind:"codeCitation",value:t.value,license:t.license,snippet:t.snippet}}s.from=a})(Fe||={});var ln;(e=>{function a(n,i,l){return n instanceof o.ChatResponseMarkdownPart?se.from(n):n instanceof o.ChatResponseAnchorPart?le.from(n):n instanceof o.ChatResponseReferencePart?ue.from(n):n instanceof o.ChatResponseProgressPart?Ne.from(n):n instanceof o.ChatResponseFileTreePart?ce.from(n):n instanceof o.ChatResponseCommandButtonPart?de.from(n,i,l):n instanceof o.ChatResponseTextEditPart?Ae.from(n):n instanceof o.ChatResponseMarkdownWithVulnerabilitiesPart?Ee.from(n):n instanceof o.ChatResponseDetectedParticipantPart?Me.from(n):n instanceof o.ChatResponseWarningPart?He.from(n):n instanceof o.ChatResponseConfirmationPart?Le.from(n):n instanceof o.ChatResponseCodeCitationPart?Fe.from(n):n instanceof o.ChatResponseMovePart?Oe.from(n):{kind:"markdownContent",content:f.from("")}}e.from=a;function s(n,i){switch(n.kind){case"reference":return ue.to(n);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return t(n,i)}}e.to=s;function t(n,i){switch(n.kind){case"markdownContent":return se.to(n);case"inlineReference":return le.to(n);case"progressMessage":return;case"treeData":return ce.to(n);case"command":return de.to(n,i)}}e.toContent=t})(ln||={});var dn;(s=>{function a(t,e){const n=t.variables.variables.filter(l=>l.isTool),i=t.variables.variables.filter(l=>!l.isTool);return{prompt:t.message,command:t.command,attempt:t.attempt??0,enableCommandDetection:t.enableCommandDetection??!0,isParticipantDetected:t.isParticipantDetected??!1,references:i.map(We.to),toolReferences:n.map(Ve.to),location:Ue.to(t.location),acceptedConfirmationData:t.acceptedConfirmationData,rejectedConfirmationData:t.rejectedConfirmationData,location2:e}}s.to=a})(dn||={});var Ue;(t=>{function a(e){switch(e){case R.Notebook:return o.ChatLocation.Notebook;case R.Terminal:return o.ChatLocation.Terminal;case R.Panel:return o.ChatLocation.Panel;case R.Editor:return o.ChatLocation.Editor}}t.to=a;function s(e){switch(e){case o.ChatLocation.Notebook:return R.Notebook;case o.ChatLocation.Terminal:return R.Terminal;case o.ChatLocation.Panel:return R.Panel;case o.ChatLocation.Editor:return R.Editor}}t.from=s})(Ue||={});var We;(s=>{function a(t){const e=t.value;if(!e)throw new Error("Invalid value reference");return{id:t.id,name:t.name,range:t.range&&[t.range.start,t.range.endExclusive],value:ve(e)?p.revive(e):e&&typeof e=="object"&&"uri"in e&&"range"in e&&ve(e.uri)?D.to(L(e)):e,modelDescription:t.modelDescription}}s.to=a})(We||={});var Ve;(s=>{function a(t){if(t.value)throw new Error("Invalid tool reference");return{id:t.id,range:t.range&&[t.range.start,t.range.endExclusive]}}s.to=a})(Ve||={});var un;(s=>{function a(t,e,n){return{id:t.id,label:t.label,fullName:t.fullName,icon:t.icon?.id,value:t.values[0].value,insertText:t.insertText,detail:t.detail,documentation:t.documentation,command:e.toInternal(t.command,n)}}s.from=a})(un||={});var _e;(s=>{function a(t){return{errorDetails:t.errorDetails,metadata:t.metadata,nextQuestion:t.nextQuestion}}s.to=a})(_e||={});var mn;(s=>{function a(t,e,n){if(e.action.kind==="vote")return;const i=_e.to(t);if(e.action.kind==="command"){const l=e.action.commandButton.command;return{action:{kind:"command",commandButton:{command:n.fromInternal(l)??{command:l.id,title:l.title}}},result:i}}else return e.action.kind==="followUp"?{action:{kind:"followUp",followup:we.to(e.action.followup)},result:i}:e.action.kind==="inlineChat"?{action:{kind:"editor",accepted:e.action.action==="accepted"},result:i}:{action:e.action,result:i}}s.to=a})(mn||={});var pn;(t=>{function a(e){return{...e,string:e.toString()}}t.from=a;function s(e){const n={...e,toString:()=>e.string};return delete n.string,n}t.to=s})(pn||={});var fn;(s=>{function a(t,e,n){return"terminalCommand"in t?{terminalCommand:t.terminalCommand,shouldExecute:t.shouldExecute}:"uri"in t?{uri:t.uri}:e.toInternal(t,n)}s.from=a})(fn||={});var gn;(s=>{function a(t){return{kind:Be.to(t.kind)}}s.to=a})(gn||={});var Be;(s=>{function a(t){switch(t){case c.PartialAcceptTriggerKind.Word:return o.PartialAcceptTriggerKind.Word;case c.PartialAcceptTriggerKind.Line:return o.PartialAcceptTriggerKind.Line;case c.PartialAcceptTriggerKind.Suggest:return o.PartialAcceptTriggerKind.Suggest;default:return o.PartialAcceptTriggerKind.Unknown}}s.to=a})(Be||={});var Cn;(s=>{function a(t,e){return{id:e,label:t.label,description:t.description,canEdit:t.canEdit,collapsibleState:t.collapsibleState||it.None,contextValue:t.contextValue}}s.from=a})(Cn||={});var xn;(s=>{function a(t){return{id:t.id,modelDescription:t.modelDescription,parametersSchema:t.parametersSchema,displayName:t.displayName}}s.to=a})(xn||={});export{bt as CallHierarchyIncomingCall,J as CallHierarchyItem,Tt as CallHierarchyOutgoingCall,un as ChatAgentCompletionItem,dn as ChatAgentRequest,_e as ChatAgentResult,mn as ChatAgentUserActionEvent,we as ChatFollowup,Ve as ChatLanguageModelToolReference,Ue as ChatLocation,We as ChatPromptReference,le as ChatResponseAnchorPart,Fe as ChatResponseCodeCitationPart,de as ChatResponseCommandButtonPart,Le as ChatResponseConfirmationPart,Me as ChatResponseDetectedParticipantPart,ce as ChatResponseFilesPart,se as ChatResponseMarkdownPart,Ee as ChatResponseMarkdownWithVulnerabilitiesPart,Oe as ChatResponseMovePart,ln as ChatResponsePart,Ne as ChatResponseProgressPart,ue as ChatResponseReferencePart,Ae as ChatResponseTextEditPart,He as ChatResponseWarningPart,sn as ChatTask,cn as ChatTaskResult,tn as CodeActionTriggerKind,Ot as Color,Ht as ColorPresentation,wt as CompletionContext,Et as CompletionItem,Se as CompletionItemKind,Re as CompletionItemTag,Te as CompletionTriggerKind,rn as DataTransfer,ae as DataTransferItem,Cn as DebugTreeItem,be as DecorationRangeBehavior,It as DecorationRenderOptions,Rt as DefinitionLink,ft as Diagnostic,j as DiagnosticRelatedInformation,z as DiagnosticSeverity,G as DiagnosticTag,X as DocumentHighlight,Nt as DocumentLink,pt as DocumentSelector,ht as DocumentSymbol,Z as EndOfLine,Dt as EvaluatableExpression,Vt as FoldingRange,ee as FoldingRangeKind,b as GlobPattern,St as Hover,Lt as InlayHint,Pe as InlayHintKind,De as InlayHintLabelPart,Pt as InlineValue,kt as InlineValueContext,an as LanguageModelChatMessage,ie as LanguageModelChatMessageRole,xn as LanguageModelToolDescription,pn as LanguageModelToolResult,Bt as LanguageSelector,D as Location,Gt as MappedEditsContext,f as MarkdownString,Kt as MultiDocumentHighlight,W as NotebookCellData,zt as NotebookCellExecutionState,te as NotebookCellExecutionSummary,ne as NotebookCellKind,re as NotebookCellOutput,oe as NotebookCellOutputItem,Qt as NotebookData,qt as NotebookDocumentContentOptions,$t as NotebookExclusiveDocumentPattern,Xt as NotebookKernelSourceAction,jt as NotebookRange,Yt as NotebookRendererScript,Jt as NotebookStatusBarItem,q as ParameterInformation,gn as PartialAcceptInfo,Be as PartialAcceptTriggerKind,K as Position,Wt as ProgressLocation,u as Range,ut as Selection,At as SelectionRange,Mt as SignatureHelp,Y as SignatureInformation,h as SymbolKind,P as SymbolTag,fn as TerminalQuickFix,en as TestCoverage,Ke as TestItem,ke as TestMessage,Zt as TestResults,M as TestTag,Ft as TextDocumentSaveReason,v as TextEdit,Ut as TextEditorLineNumbersStyle,_t as TextEditorOpenOptions,w as ThemableDecorationAttachmentRenderOptions,$ as ThemableDecorationRenderOptions,mt as TokenType,nn as TypeHierarchyItem,on as ViewBadge,gt as ViewColumn,vt as WorkspaceEdit,yt as WorkspaceSymbol,ar as fromRangeOrRangeWithMessage,xt as isDecorationOptionsArr,E as location,Q as pathOrURIToURI};
