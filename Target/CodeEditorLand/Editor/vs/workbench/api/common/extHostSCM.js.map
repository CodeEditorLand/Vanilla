{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/api/common/extHostSCM.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable local/code-no-native-private */\n\nimport type * as vscode from \"vscode\";\nimport { equals, sortedDiff } from \"../../../base/common/arrays.js\";\nimport { asPromise } from \"../../../base/common/async.js\";\nimport type { CancellationToken } from \"../../../base/common/cancellation.js\";\nimport { comparePaths } from \"../../../base/common/comparers.js\";\nimport { debounce } from \"../../../base/common/decorators.js\";\nimport { Emitter, Event } from \"../../../base/common/event.js\";\nimport type { IMarkdownString } from \"../../../base/common/htmlContent.js\";\nimport {\n\tDisposableStore,\n\ttype IDisposable,\n\tMutableDisposable,\n} from \"../../../base/common/lifecycle.js\";\nimport { MarshalledId } from \"../../../base/common/marshallingIds.js\";\nimport { Schemas } from \"../../../base/common/network.js\";\nimport { isLinux } from \"../../../base/common/platform.js\";\nimport type { ISplice } from \"../../../base/common/sequence.js\";\nimport { ThemeIcon } from \"../../../base/common/themables.js\";\nimport { URI, type UriComponents } from \"../../../base/common/uri.js\";\nimport {\n\tExtensionIdentifierMap,\n\ttype IExtensionDescription,\n} from \"../../../platform/extensions/common/extensions.js\";\nimport { ILogService } from \"../../../platform/log/common/log.js\";\nimport {\n\tcheckProposedApiEnabled,\n\tisProposedApiEnabled,\n} from \"../../services/extensions/common/extensions.js\";\nimport {\n\ttype ExtHostSCMShape,\n\ttype ICommandDto,\n\ttype IMainContext,\n\tMainContext,\n\ttype MainThreadSCMShape,\n\ttype MainThreadTelemetryShape,\n\ttype SCMGroupFeatures,\n\ttype SCMHistoryItemChangeDto,\n\ttype SCMHistoryItemDto,\n\ttype SCMHistoryItemRefDto,\n\ttype SCMRawResource,\n\ttype SCMRawResourceSplice,\n\ttype SCMRawResourceSplices,\n} from \"./extHost.protocol.js\";\nimport type { ExtHostCommands } from \"./extHostCommands.js\";\nimport type { ExtHostDocuments } from \"./extHostDocuments.js\";\nimport { MarkdownString } from \"./extHostTypeConverters.js\";\n\ntype ProviderHandle = number;\ntype GroupHandle = number;\ntype ResourceStateHandle = number;\n\nfunction isUri(thing: any): thing is vscode.Uri {\n\treturn thing instanceof URI;\n}\n\nfunction uriEquals(a: vscode.Uri, b: vscode.Uri): boolean {\n\tif (a.scheme === Schemas.file && b.scheme === Schemas.file && isLinux) {\n\t\treturn a.toString() === b.toString();\n\t}\n\n\treturn a.toString().toLowerCase() === b.toString().toLowerCase();\n}\n\nfunction getIconResource(\n\tdecorations?: vscode.SourceControlResourceThemableDecorations,\n): UriComponents | ThemeIcon | undefined {\n\tif (!decorations) {\n\t\treturn undefined;\n\t} else if (typeof decorations.iconPath === \"string\") {\n\t\treturn URI.file(decorations.iconPath);\n\t} else if (URI.isUri(decorations.iconPath)) {\n\t\treturn decorations.iconPath;\n\t} else if (ThemeIcon.isThemeIcon(decorations.iconPath)) {\n\t\treturn decorations.iconPath;\n\t} else {\n\t\treturn undefined;\n\t}\n}\n\nfunction getHistoryItemIconDto(\n\ticon:\n\t\t| vscode.Uri\n\t\t| { light: vscode.Uri; dark: vscode.Uri }\n\t\t| vscode.ThemeIcon\n\t\t| undefined,\n):\n\t| UriComponents\n\t| { light: UriComponents; dark: UriComponents }\n\t| ThemeIcon\n\t| undefined {\n\tif (!icon) {\n\t\treturn undefined;\n\t} else if (URI.isUri(icon)) {\n\t\treturn icon;\n\t} else if (ThemeIcon.isThemeIcon(icon)) {\n\t\treturn icon;\n\t} else {\n\t\tconst iconDto = icon as { light: URI; dark: URI };\n\t\treturn { light: iconDto.light, dark: iconDto.dark };\n\t}\n}\n\nfunction toSCMHistoryItemDto(\n\thistoryItem: vscode.SourceControlHistoryItem,\n): SCMHistoryItemDto {\n\tconst references = historyItem.references?.map((r) => ({\n\t\t...r,\n\t\ticon: getHistoryItemIconDto(r.icon),\n\t}));\n\n\treturn { ...historyItem, references };\n}\n\nfunction toSCMHistoryItemRefDto(\n\thistoryItemRef?: vscode.SourceControlHistoryItemRef,\n): SCMHistoryItemRefDto | undefined {\n\treturn historyItemRef\n\t\t? {\n\t\t\t\t...historyItemRef,\n\t\t\t\ticon: getHistoryItemIconDto(historyItemRef.icon),\n\t\t\t}\n\t\t: undefined;\n}\n\nfunction compareResourceThemableDecorations(\n\ta: vscode.SourceControlResourceThemableDecorations,\n\tb: vscode.SourceControlResourceThemableDecorations,\n): number {\n\tif (!a.iconPath && !b.iconPath) {\n\t\treturn 0;\n\t} else if (!a.iconPath) {\n\t\treturn -1;\n\t} else if (!b.iconPath) {\n\t\treturn 1;\n\t}\n\n\tconst aPath =\n\t\ttypeof a.iconPath === \"string\"\n\t\t\t? a.iconPath\n\t\t\t: URI.isUri(a.iconPath)\n\t\t\t\t? a.iconPath.fsPath\n\t\t\t\t: (a.iconPath as vscode.ThemeIcon).id;\n\tconst bPath =\n\t\ttypeof b.iconPath === \"string\"\n\t\t\t? b.iconPath\n\t\t\t: URI.isUri(b.iconPath)\n\t\t\t\t? b.iconPath.fsPath\n\t\t\t\t: (b.iconPath as vscode.ThemeIcon).id;\n\treturn comparePaths(aPath, bPath);\n}\n\nfunction compareResourceStatesDecorations(\n\ta: vscode.SourceControlResourceDecorations,\n\tb: vscode.SourceControlResourceDecorations,\n): number {\n\tlet result = 0;\n\n\tif (a.strikeThrough !== b.strikeThrough) {\n\t\treturn a.strikeThrough ? 1 : -1;\n\t}\n\n\tif (a.faded !== b.faded) {\n\t\treturn a.faded ? 1 : -1;\n\t}\n\n\tif (a.tooltip !== b.tooltip) {\n\t\treturn (a.tooltip || \"\").localeCompare(b.tooltip || \"\");\n\t}\n\n\tresult = compareResourceThemableDecorations(a, b);\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.light && b.light) {\n\t\tresult = compareResourceThemableDecorations(a.light, b.light);\n\t} else if (a.light) {\n\t\treturn 1;\n\t} else if (b.light) {\n\t\treturn -1;\n\t}\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.dark && b.dark) {\n\t\tresult = compareResourceThemableDecorations(a.dark, b.dark);\n\t} else if (a.dark) {\n\t\treturn 1;\n\t} else if (b.dark) {\n\t\treturn -1;\n\t}\n\n\treturn result;\n}\n\nfunction compareCommands(a: vscode.Command, b: vscode.Command): number {\n\tif (a.command !== b.command) {\n\t\treturn a.command < b.command ? -1 : 1;\n\t}\n\n\tif (a.title !== b.title) {\n\t\treturn a.title < b.title ? -1 : 1;\n\t}\n\n\tif (a.tooltip !== b.tooltip) {\n\t\tif (a.tooltip !== undefined && b.tooltip !== undefined) {\n\t\t\treturn a.tooltip < b.tooltip ? -1 : 1;\n\t\t} else if (a.tooltip !== undefined) {\n\t\t\treturn 1;\n\t\t} else if (b.tooltip !== undefined) {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tif (a.arguments === b.arguments) {\n\t\treturn 0;\n\t} else if (!a.arguments) {\n\t\treturn -1;\n\t} else if (!b.arguments) {\n\t\treturn 1;\n\t} else if (a.arguments.length !== b.arguments.length) {\n\t\treturn a.arguments.length - b.arguments.length;\n\t}\n\n\tfor (let i = 0; i < a.arguments.length; i++) {\n\t\tconst aArg = a.arguments[i];\n\t\tconst bArg = b.arguments[i];\n\n\t\tif (aArg === bArg) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (isUri(aArg) && isUri(bArg) && uriEquals(aArg, bArg)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\treturn aArg < bArg ? -1 : 1;\n\t}\n\n\treturn 0;\n}\n\nfunction compareResourceStates(\n\ta: vscode.SourceControlResourceState,\n\tb: vscode.SourceControlResourceState,\n): number {\n\tlet result = comparePaths(a.resourceUri.fsPath, b.resourceUri.fsPath, true);\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.command && b.command) {\n\t\tresult = compareCommands(a.command, b.command);\n\t} else if (a.command) {\n\t\treturn 1;\n\t} else if (b.command) {\n\t\treturn -1;\n\t}\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.decorations && b.decorations) {\n\t\tresult = compareResourceStatesDecorations(a.decorations, b.decorations);\n\t} else if (a.decorations) {\n\t\treturn 1;\n\t} else if (b.decorations) {\n\t\treturn -1;\n\t}\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.multiFileDiffEditorModifiedUri && b.multiFileDiffEditorModifiedUri) {\n\t\tresult = comparePaths(\n\t\t\ta.multiFileDiffEditorModifiedUri.fsPath,\n\t\t\tb.multiFileDiffEditorModifiedUri.fsPath,\n\t\t\ttrue,\n\t\t);\n\t} else if (a.multiFileDiffEditorModifiedUri) {\n\t\treturn 1;\n\t} else if (b.multiFileDiffEditorModifiedUri) {\n\t\treturn -1;\n\t}\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tif (a.multiDiffEditorOriginalUri && b.multiDiffEditorOriginalUri) {\n\t\tresult = comparePaths(\n\t\t\ta.multiDiffEditorOriginalUri.fsPath,\n\t\t\tb.multiDiffEditorOriginalUri.fsPath,\n\t\t\ttrue,\n\t\t);\n\t} else if (a.multiDiffEditorOriginalUri) {\n\t\treturn 1;\n\t} else if (b.multiDiffEditorOriginalUri) {\n\t\treturn -1;\n\t}\n\n\treturn result;\n}\n\nfunction compareArgs(a: any[], b: any[]): boolean {\n\tfor (let i = 0; i < a.length; i++) {\n\t\tif (a[i] !== b[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction commandEquals(a: vscode.Command, b: vscode.Command): boolean {\n\treturn (\n\t\ta.command === b.command &&\n\t\ta.title === b.title &&\n\t\ta.tooltip === b.tooltip &&\n\t\t(a.arguments && b.arguments\n\t\t\t? compareArgs(a.arguments, b.arguments)\n\t\t\t: a.arguments === b.arguments)\n\t);\n}\n\nfunction commandListEquals(\n\ta: readonly vscode.Command[],\n\tb: readonly vscode.Command[],\n): boolean {\n\treturn equals(a, b, commandEquals);\n}\n\nexport interface IValidateInput {\n\t(\n\t\tvalue: string,\n\t\tcursorPosition: number,\n\t): vscode.ProviderResult<\n\t\tvscode.SourceControlInputBoxValidation | undefined | null\n\t>;\n}\n\nexport class ExtHostSCMInputBox implements vscode.SourceControlInputBox {\n\t#proxy: MainThreadSCMShape;\n\t#extHostDocuments: ExtHostDocuments;\n\n\tprivate _value = \"\";\n\n\tget value(): string {\n\t\treturn this._value;\n\t}\n\n\tset value(value: string) {\n\t\tvalue = value ?? \"\";\n\t\tthis.#proxy.$setInputBoxValue(this._sourceControlHandle, value);\n\t\tthis.updateValue(value);\n\t}\n\n\tprivate readonly _onDidChange = new Emitter<string>();\n\n\tget onDidChange(): Event<string> {\n\t\treturn this._onDidChange.event;\n\t}\n\n\tprivate _placeholder = \"\";\n\n\tget placeholder(): string {\n\t\treturn this._placeholder;\n\t}\n\n\tset placeholder(placeholder: string) {\n\t\tthis.#proxy.$setInputBoxPlaceholder(\n\t\t\tthis._sourceControlHandle,\n\t\t\tplaceholder,\n\t\t);\n\t\tthis._placeholder = placeholder;\n\t}\n\n\tprivate _validateInput: IValidateInput | undefined;\n\n\tget validateInput(): IValidateInput | undefined {\n\t\tcheckProposedApiEnabled(this._extension, \"scmValidation\");\n\n\t\treturn this._validateInput;\n\t}\n\n\tset validateInput(fn: IValidateInput | undefined) {\n\t\tcheckProposedApiEnabled(this._extension, \"scmValidation\");\n\n\t\tif (fn && typeof fn !== \"function\") {\n\t\t\tthrow new Error(\n\t\t\t\t`[${this._extension.identifier.value}]: Invalid SCM input box validation function`,\n\t\t\t);\n\t\t}\n\n\t\tthis._validateInput = fn;\n\t\tthis.#proxy.$setValidationProviderIsEnabled(\n\t\t\tthis._sourceControlHandle,\n\t\t\t!!fn,\n\t\t);\n\t}\n\n\tprivate _enabled = true;\n\n\tget enabled(): boolean {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(enabled: boolean) {\n\t\tenabled = !!enabled;\n\n\t\tif (this._enabled === enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._enabled = enabled;\n\t\tthis.#proxy.$setInputBoxEnablement(this._sourceControlHandle, enabled);\n\t}\n\n\tprivate _visible = true;\n\n\tget visible(): boolean {\n\t\treturn this._visible;\n\t}\n\n\tset visible(visible: boolean) {\n\t\tvisible = !!visible;\n\n\t\tif (this._visible === visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._visible = visible;\n\t\tthis.#proxy.$setInputBoxVisibility(this._sourceControlHandle, visible);\n\t}\n\n\tget document(): vscode.TextDocument {\n\t\tcheckProposedApiEnabled(this._extension, \"scmTextDocument\");\n\n\t\treturn this.#extHostDocuments.getDocument(this._documentUri);\n\t}\n\n\tconstructor(\n\t\tprivate _extension: IExtensionDescription,\n\t\t_extHostDocuments: ExtHostDocuments,\n\t\tproxy: MainThreadSCMShape,\n\t\tprivate _sourceControlHandle: number,\n\t\tprivate _documentUri: URI,\n\t) {\n\t\tthis.#extHostDocuments = _extHostDocuments;\n\t\tthis.#proxy = proxy;\n\t}\n\n\tshowValidationMessage(\n\t\tmessage: string | vscode.MarkdownString,\n\t\ttype: vscode.SourceControlInputBoxValidationType,\n\t) {\n\t\tcheckProposedApiEnabled(this._extension, \"scmValidation\");\n\n\t\tthis.#proxy.$showValidationMessage(\n\t\t\tthis._sourceControlHandle,\n\t\t\tmessage,\n\t\t\ttype as any,\n\t\t);\n\t}\n\n\t$onInputBoxValueChange(value: string): void {\n\t\tthis.updateValue(value);\n\t}\n\n\tprivate updateValue(value: string): void {\n\t\tthis._value = value;\n\t\tthis._onDidChange.fire(value);\n\t}\n}\n\nclass ExtHostSourceControlResourceGroup\n\timplements vscode.SourceControlResourceGroup\n{\n\tprivate static _handlePool = 0;\n\tprivate _resourceHandlePool = 0;\n\tprivate _resourceStates: vscode.SourceControlResourceState[] = [];\n\n\tprivate _resourceStatesMap = new Map<\n\t\tResourceStateHandle,\n\t\tvscode.SourceControlResourceState\n\t>();\n\tprivate _resourceStatesCommandsMap = new Map<\n\t\tResourceStateHandle,\n\t\tvscode.Command\n\t>();\n\tprivate _resourceStatesDisposablesMap = new Map<\n\t\tResourceStateHandle,\n\t\tIDisposable\n\t>();\n\n\tprivate readonly _onDidUpdateResourceStates = new Emitter<void>();\n\treadonly onDidUpdateResourceStates = this._onDidUpdateResourceStates.event;\n\n\tprivate _disposed = false;\n\tget disposed(): boolean {\n\t\treturn this._disposed;\n\t}\n\tprivate readonly _onDidDispose = new Emitter<void>();\n\treadonly onDidDispose = this._onDidDispose.event;\n\n\tprivate _handlesSnapshot: number[] = [];\n\tprivate _resourceSnapshot: vscode.SourceControlResourceState[] = [];\n\n\tget id(): string {\n\t\treturn this._id;\n\t}\n\n\tget label(): string {\n\t\treturn this._label;\n\t}\n\tset label(label: string) {\n\t\tthis._label = label;\n\t\tthis._proxy.$updateGroupLabel(\n\t\t\tthis._sourceControlHandle,\n\t\t\tthis.handle,\n\t\t\tlabel,\n\t\t);\n\t}\n\n\tprivate _hideWhenEmpty: boolean | undefined = undefined;\n\tget hideWhenEmpty(): boolean | undefined {\n\t\treturn this._hideWhenEmpty;\n\t}\n\tset hideWhenEmpty(hideWhenEmpty: boolean | undefined) {\n\t\tthis._hideWhenEmpty = hideWhenEmpty;\n\t\tthis._proxy.$updateGroup(\n\t\t\tthis._sourceControlHandle,\n\t\t\tthis.handle,\n\t\t\tthis.features,\n\t\t);\n\t}\n\n\tget features(): SCMGroupFeatures {\n\t\treturn {\n\t\t\thideWhenEmpty: this.hideWhenEmpty,\n\t\t};\n\t}\n\n\tget resourceStates(): vscode.SourceControlResourceState[] {\n\t\treturn [...this._resourceStates];\n\t}\n\tset resourceStates(resources: vscode.SourceControlResourceState[]) {\n\t\tthis._resourceStates = [...resources];\n\t\tthis._onDidUpdateResourceStates.fire();\n\t}\n\n\treadonly handle = ExtHostSourceControlResourceGroup._handlePool++;\n\n\tconstructor(\n\t\tprivate _proxy: MainThreadSCMShape,\n\t\tprivate _commands: ExtHostCommands,\n\t\tprivate _sourceControlHandle: number,\n\t\tprivate _id: string,\n\t\tprivate _label: string,\n\t\tpublic readonly multiDiffEditorEnableViewChanges: boolean,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) {}\n\n\tgetResourceState(\n\t\thandle: number,\n\t): vscode.SourceControlResourceState | undefined {\n\t\treturn this._resourceStatesMap.get(handle);\n\t}\n\n\t$executeResourceCommand(\n\t\thandle: number,\n\t\tpreserveFocus: boolean,\n\t): Promise<void> {\n\t\tconst command = this._resourceStatesCommandsMap.get(handle);\n\n\t\tif (!command) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\treturn asPromise(() =>\n\t\t\tthis._commands.executeCommand(\n\t\t\t\tcommand.command,\n\t\t\t\t...(command.arguments || []),\n\t\t\t\tpreserveFocus,\n\t\t\t),\n\t\t);\n\t}\n\n\t_takeResourceStateSnapshot(): SCMRawResourceSplice[] {\n\t\tconst snapshot = [...this._resourceStates].sort(compareResourceStates);\n\t\tconst diffs = sortedDiff(\n\t\t\tthis._resourceSnapshot,\n\t\t\tsnapshot,\n\t\t\tcompareResourceStates,\n\t\t);\n\n\t\tconst splices = diffs.map<\n\t\t\tISplice<{ rawResource: SCMRawResource; handle: number }>\n\t\t>((diff) => {\n\t\t\tconst toInsert = diff.toInsert.map((r) => {\n\t\t\t\tconst handle = this._resourceHandlePool++;\n\t\t\t\tthis._resourceStatesMap.set(handle, r);\n\n\t\t\t\tconst sourceUri = r.resourceUri;\n\n\t\t\t\tlet command: ICommandDto | undefined;\n\t\t\t\tif (r.command) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tr.command.command === \"vscode.open\" ||\n\t\t\t\t\t\tr.command.command === \"vscode.diff\" ||\n\t\t\t\t\t\tr.command.command === \"vscode.changes\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst disposables = new DisposableStore();\n\t\t\t\t\t\tcommand = this._commands.converter.toInternal(\n\t\t\t\t\t\t\tr.command,\n\t\t\t\t\t\t\tdisposables,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis._resourceStatesDisposablesMap.set(\n\t\t\t\t\t\t\thandle,\n\t\t\t\t\t\t\tdisposables,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._resourceStatesCommandsMap.set(handle, r.command);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst hasScmMultiDiffEditorProposalEnabled =\n\t\t\t\t\tisProposedApiEnabled(this._extension, \"scmMultiDiffEditor\");\n\t\t\t\tconst multiFileDiffEditorOriginalUri =\n\t\t\t\t\thasScmMultiDiffEditorProposalEnabled\n\t\t\t\t\t\t? r.multiDiffEditorOriginalUri\n\t\t\t\t\t\t: undefined;\n\t\t\t\tconst multiFileDiffEditorModifiedUri =\n\t\t\t\t\thasScmMultiDiffEditorProposalEnabled\n\t\t\t\t\t\t? r.multiFileDiffEditorModifiedUri\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\tconst icon = getIconResource(r.decorations);\n\t\t\t\tconst lightIcon =\n\t\t\t\t\t(r.decorations && getIconResource(r.decorations.light)) ||\n\t\t\t\t\ticon;\n\t\t\t\tconst darkIcon =\n\t\t\t\t\t(r.decorations && getIconResource(r.decorations.dark)) ||\n\t\t\t\t\ticon;\n\t\t\t\tconst icons: SCMRawResource[2] = [lightIcon, darkIcon];\n\n\t\t\t\tconst tooltip = (r.decorations && r.decorations.tooltip) || \"\";\n\t\t\t\tconst strikeThrough =\n\t\t\t\t\tr.decorations && !!r.decorations.strikeThrough;\n\t\t\t\tconst faded = r.decorations && !!r.decorations.faded;\n\t\t\t\tconst contextValue = r.contextValue || \"\";\n\n\t\t\t\tconst rawResource = [\n\t\t\t\t\thandle,\n\t\t\t\t\tsourceUri,\n\t\t\t\t\ticons,\n\t\t\t\t\ttooltip,\n\t\t\t\t\tstrikeThrough,\n\t\t\t\t\tfaded,\n\t\t\t\t\tcontextValue,\n\t\t\t\t\tcommand,\n\t\t\t\t\tmultiFileDiffEditorOriginalUri,\n\t\t\t\t\tmultiFileDiffEditorModifiedUri,\n\t\t\t\t] as SCMRawResource;\n\n\t\t\t\treturn { rawResource, handle };\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tstart: diff.start,\n\t\t\t\tdeleteCount: diff.deleteCount,\n\t\t\t\ttoInsert,\n\t\t\t};\n\t\t});\n\n\t\tconst rawResourceSplices = splices.map(\n\t\t\t({ start, deleteCount, toInsert }) =>\n\t\t\t\t[\n\t\t\t\t\tstart,\n\t\t\t\t\tdeleteCount,\n\t\t\t\t\ttoInsert.map((i) => i.rawResource),\n\t\t\t\t] as SCMRawResourceSplice,\n\t\t);\n\n\t\tconst reverseSplices = splices.reverse();\n\n\t\tfor (const { start, deleteCount, toInsert } of reverseSplices) {\n\t\t\tconst handles = toInsert.map((i) => i.handle);\n\t\t\tconst handlesToDelete = this._handlesSnapshot.splice(\n\t\t\t\tstart,\n\t\t\t\tdeleteCount,\n\t\t\t\t...handles,\n\t\t\t);\n\n\t\t\tfor (const handle of handlesToDelete) {\n\t\t\t\tthis._resourceStatesMap.delete(handle);\n\t\t\t\tthis._resourceStatesCommandsMap.delete(handle);\n\t\t\t\tthis._resourceStatesDisposablesMap.get(handle)?.dispose();\n\t\t\t\tthis._resourceStatesDisposablesMap.delete(handle);\n\t\t\t}\n\t\t}\n\n\t\tthis._resourceSnapshot = snapshot;\n\t\treturn rawResourceSplices;\n\t}\n\n\tdispose(): void {\n\t\tthis._disposed = true;\n\t\tthis._onDidDispose.fire();\n\t}\n}\n\nclass ExtHostSourceControl implements vscode.SourceControl {\n\tprivate static _handlePool = 0;\n\n\t#proxy: MainThreadSCMShape;\n\n\tprivate _groups: Map<GroupHandle, ExtHostSourceControlResourceGroup> =\n\t\tnew Map<GroupHandle, ExtHostSourceControlResourceGroup>();\n\n\tget id(): string {\n\t\treturn this._id;\n\t}\n\n\tget label(): string {\n\t\treturn this._label;\n\t}\n\n\tget rootUri(): vscode.Uri | undefined {\n\t\treturn this._rootUri;\n\t}\n\n\tprivate _inputBox: ExtHostSCMInputBox;\n\tget inputBox(): ExtHostSCMInputBox {\n\t\treturn this._inputBox;\n\t}\n\n\tprivate _count: number | undefined = undefined;\n\n\tget count(): number | undefined {\n\t\treturn this._count;\n\t}\n\n\tset count(count: number | undefined) {\n\t\tif (this._count === count) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._count = count;\n\t\tthis.#proxy.$updateSourceControl(this.handle, { count });\n\t}\n\n\tprivate _quickDiffProvider: vscode.QuickDiffProvider | undefined =\n\t\tundefined;\n\n\tget quickDiffProvider(): vscode.QuickDiffProvider | undefined {\n\t\treturn this._quickDiffProvider;\n\t}\n\n\tset quickDiffProvider(quickDiffProvider:\n\t\t| vscode.QuickDiffProvider\n\t\t| undefined) {\n\t\tthis._quickDiffProvider = quickDiffProvider;\n\t\tlet quickDiffLabel;\n\t\tif (isProposedApiEnabled(this._extension, \"quickDiffProvider\")) {\n\t\t\tquickDiffLabel = quickDiffProvider?.label;\n\t\t}\n\t\tthis.#proxy.$updateSourceControl(this.handle, {\n\t\t\thasQuickDiffProvider: !!quickDiffProvider,\n\t\t\tquickDiffLabel,\n\t\t});\n\t}\n\n\tprivate _historyProvider: vscode.SourceControlHistoryProvider | undefined;\n\tprivate readonly _historyProviderDisposable =\n\t\tnew MutableDisposable<DisposableStore>();\n\n\tget historyProvider(): vscode.SourceControlHistoryProvider | undefined {\n\t\tcheckProposedApiEnabled(this._extension, \"scmHistoryProvider\");\n\t\treturn this._historyProvider;\n\t}\n\n\tset historyProvider(historyProvider:\n\t\t| vscode.SourceControlHistoryProvider\n\t\t| undefined) {\n\t\tcheckProposedApiEnabled(this._extension, \"scmHistoryProvider\");\n\n\t\tthis._historyProvider = historyProvider;\n\t\tthis._historyProviderDisposable.value = new DisposableStore();\n\n\t\tthis.#proxy.$updateSourceControl(this.handle, {\n\t\t\thasHistoryProvider: !!historyProvider,\n\t\t});\n\n\t\tif (historyProvider) {\n\t\t\tthis._historyProviderDisposable.value.add(\n\t\t\t\thistoryProvider.onDidChangeCurrentHistoryItemRefs(() => {\n\t\t\t\t\tconst historyItemRef = toSCMHistoryItemRefDto(\n\t\t\t\t\t\thistoryProvider?.currentHistoryItemRef,\n\t\t\t\t\t);\n\t\t\t\t\tconst historyItemRemoteRef = toSCMHistoryItemRefDto(\n\t\t\t\t\t\thistoryProvider?.currentHistoryItemRemoteRef,\n\t\t\t\t\t);\n\t\t\t\t\tconst historyItemBaseRef = toSCMHistoryItemRefDto(\n\t\t\t\t\t\thistoryProvider?.currentHistoryItemBaseRef,\n\t\t\t\t\t);\n\n\t\t\t\t\tthis.#proxy.$onDidChangeHistoryProviderCurrentHistoryItemRefs(\n\t\t\t\t\t\tthis.handle,\n\t\t\t\t\t\thistoryItemRef,\n\t\t\t\t\t\thistoryItemRemoteRef,\n\t\t\t\t\t\thistoryItemBaseRef,\n\t\t\t\t\t);\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._historyProviderDisposable.value.add(\n\t\t\t\thistoryProvider.onDidChangeHistoryItemRefs((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\te.added.length === 0 &&\n\t\t\t\t\t\te.modified.length === 0 &&\n\t\t\t\t\t\te.removed.length === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst added = e.added.map((ref) => ({\n\t\t\t\t\t\t...ref,\n\t\t\t\t\t\ticon: getHistoryItemIconDto(ref.icon),\n\t\t\t\t\t}));\n\t\t\t\t\tconst modified = e.modified.map((ref) => ({\n\t\t\t\t\t\t...ref,\n\t\t\t\t\t\ticon: getHistoryItemIconDto(ref.icon),\n\t\t\t\t\t}));\n\t\t\t\t\tconst removed = e.removed.map((ref) => ({\n\t\t\t\t\t\t...ref,\n\t\t\t\t\t\ticon: getHistoryItemIconDto(ref.icon),\n\t\t\t\t\t}));\n\n\t\t\t\t\tthis.#proxy.$onDidChangeHistoryProviderHistoryItemRefs(\n\t\t\t\t\t\tthis.handle,\n\t\t\t\t\t\t{ added, modified, removed, silent: e.silent },\n\t\t\t\t\t);\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _commitTemplate: string | undefined = undefined;\n\n\tget commitTemplate(): string | undefined {\n\t\treturn this._commitTemplate;\n\t}\n\n\tset commitTemplate(commitTemplate: string | undefined) {\n\t\tif (commitTemplate === this._commitTemplate) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._commitTemplate = commitTemplate;\n\t\tthis.#proxy.$updateSourceControl(this.handle, { commitTemplate });\n\t}\n\n\tprivate readonly _acceptInputDisposables =\n\t\tnew MutableDisposable<DisposableStore>();\n\tprivate _acceptInputCommand: vscode.Command | undefined = undefined;\n\n\tget acceptInputCommand(): vscode.Command | undefined {\n\t\treturn this._acceptInputCommand;\n\t}\n\n\tset acceptInputCommand(acceptInputCommand: vscode.Command | undefined) {\n\t\tthis._acceptInputDisposables.value = new DisposableStore();\n\n\t\tthis._acceptInputCommand = acceptInputCommand;\n\n\t\tconst internal = this._commands.converter.toInternal(\n\t\t\tacceptInputCommand,\n\t\t\tthis._acceptInputDisposables.value,\n\t\t);\n\t\tthis.#proxy.$updateSourceControl(this.handle, {\n\t\t\tacceptInputCommand: internal,\n\t\t});\n\t}\n\n\tprivate readonly _actionButtonDisposables =\n\t\tnew MutableDisposable<DisposableStore>();\n\tprivate _actionButton: vscode.SourceControlActionButton | undefined;\n\tget actionButton(): vscode.SourceControlActionButton | undefined {\n\t\tcheckProposedApiEnabled(this._extension, \"scmActionButton\");\n\t\treturn this._actionButton;\n\t}\n\tset actionButton(actionButton:\n\t\t| vscode.SourceControlActionButton\n\t\t| undefined) {\n\t\tcheckProposedApiEnabled(this._extension, \"scmActionButton\");\n\t\tthis._actionButtonDisposables.value = new DisposableStore();\n\n\t\tthis._actionButton = actionButton;\n\n\t\tconst internal =\n\t\t\tactionButton !== undefined\n\t\t\t\t? {\n\t\t\t\t\t\tcommand: this._commands.converter.toInternal(\n\t\t\t\t\t\t\tactionButton.command,\n\t\t\t\t\t\t\tthis._actionButtonDisposables.value,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsecondaryCommands: actionButton.secondaryCommands?.map(\n\t\t\t\t\t\t\t(commandGroup) => {\n\t\t\t\t\t\t\t\treturn commandGroup.map((command) =>\n\t\t\t\t\t\t\t\t\tthis._commands.converter.toInternal(\n\t\t\t\t\t\t\t\t\t\tcommand,\n\t\t\t\t\t\t\t\t\t\tthis._actionButtonDisposables.value!,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t),\n\t\t\t\t\t\tdescription: actionButton.description,\n\t\t\t\t\t\tenabled: actionButton.enabled,\n\t\t\t\t\t}\n\t\t\t\t: undefined;\n\t\tthis.#proxy.$updateSourceControl(this.handle, {\n\t\t\tactionButton: internal ?? null,\n\t\t});\n\t}\n\n\tprivate readonly _statusBarDisposables =\n\t\tnew MutableDisposable<DisposableStore>();\n\tprivate _statusBarCommands: vscode.Command[] | undefined = undefined;\n\n\tget statusBarCommands(): vscode.Command[] | undefined {\n\t\treturn this._statusBarCommands;\n\t}\n\n\tset statusBarCommands(statusBarCommands: vscode.Command[] | undefined) {\n\t\tif (\n\t\t\tthis._statusBarCommands &&\n\t\t\tstatusBarCommands &&\n\t\t\tcommandListEquals(this._statusBarCommands, statusBarCommands)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._statusBarDisposables.value = new DisposableStore();\n\n\t\tthis._statusBarCommands = statusBarCommands;\n\n\t\tconst internal = (statusBarCommands || []).map((c) =>\n\t\t\tthis._commands.converter.toInternal(\n\t\t\t\tc,\n\t\t\t\tthis._statusBarDisposables.value!,\n\t\t\t),\n\t\t) as ICommandDto[];\n\t\tthis.#proxy.$updateSourceControl(this.handle, {\n\t\t\tstatusBarCommands: internal,\n\t\t});\n\t}\n\n\tprivate _selected = false;\n\n\tget selected(): boolean {\n\t\treturn this._selected;\n\t}\n\n\tprivate readonly _onDidChangeSelection = new Emitter<boolean>();\n\treadonly onDidChangeSelection = this._onDidChangeSelection.event;\n\n\tprivate handle: number = ExtHostSourceControl._handlePool++;\n\n\tconstructor(\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\t_extHostDocuments: ExtHostDocuments,\n\t\tproxy: MainThreadSCMShape,\n\t\tprivate _commands: ExtHostCommands,\n\t\tprivate _id: string,\n\t\tprivate _label: string,\n\t\tprivate _rootUri?: vscode.Uri,\n\t) {\n\t\tthis.#proxy = proxy;\n\n\t\tconst inputBoxDocumentUri = URI.from({\n\t\t\tscheme: Schemas.vscodeSourceControl,\n\t\t\tpath: `${_id}/scm${this.handle}/input`,\n\t\t\tquery: _rootUri\n\t\t\t\t? `rootUri=${encodeURIComponent(_rootUri.toString())}`\n\t\t\t\t: undefined,\n\t\t});\n\n\t\tthis._inputBox = new ExtHostSCMInputBox(\n\t\t\t_extension,\n\t\t\t_extHostDocuments,\n\t\t\tthis.#proxy,\n\t\t\tthis.handle,\n\t\t\tinputBoxDocumentUri,\n\t\t);\n\t\tthis.#proxy.$registerSourceControl(\n\t\t\tthis.handle,\n\t\t\t_id,\n\t\t\t_label,\n\t\t\t_rootUri,\n\t\t\tinputBoxDocumentUri,\n\t\t);\n\t}\n\n\tprivate createdResourceGroups = new Map<\n\t\tExtHostSourceControlResourceGroup,\n\t\tIDisposable\n\t>();\n\tprivate updatedResourceGroups =\n\t\tnew Set<ExtHostSourceControlResourceGroup>();\n\n\tcreateResourceGroup(\n\t\tid: string,\n\t\tlabel: string,\n\t\toptions?: { multiDiffEditorEnableViewChanges?: boolean },\n\t): ExtHostSourceControlResourceGroup {\n\t\tconst multiDiffEditorEnableViewChanges =\n\t\t\tisProposedApiEnabled(this._extension, \"scmMultiDiffEditor\") &&\n\t\t\toptions?.multiDiffEditorEnableViewChanges === true;\n\t\tconst group = new ExtHostSourceControlResourceGroup(\n\t\t\tthis.#proxy,\n\t\t\tthis._commands,\n\t\t\tthis.handle,\n\t\t\tid,\n\t\t\tlabel,\n\t\t\tmultiDiffEditorEnableViewChanges,\n\t\t\tthis._extension,\n\t\t);\n\t\tconst disposable = Event.once(group.onDidDispose)(() =>\n\t\t\tthis.createdResourceGroups.delete(group),\n\t\t);\n\t\tthis.createdResourceGroups.set(group, disposable);\n\t\tthis.eventuallyAddResourceGroups();\n\t\treturn group;\n\t}\n\n\t@debounce(100)\n\teventuallyAddResourceGroups(): void {\n\t\tconst groups: [\n\t\t\tnumber /*handle*/,\n\t\t\tstring /*id*/,\n\t\t\tstring /*label*/,\n\t\t\tSCMGroupFeatures,\n\t\t\t/*multiDiffEditorEnableViewChanges*/ boolean,\n\t\t][] = [];\n\t\tconst splices: SCMRawResourceSplices[] = [];\n\n\t\tfor (const [group, disposable] of this.createdResourceGroups) {\n\t\t\tdisposable.dispose();\n\n\t\t\tconst updateListener = group.onDidUpdateResourceStates(() => {\n\t\t\t\tthis.updatedResourceGroups.add(group);\n\t\t\t\tthis.eventuallyUpdateResourceStates();\n\t\t\t});\n\n\t\t\tEvent.once(group.onDidDispose)(() => {\n\t\t\t\tthis.updatedResourceGroups.delete(group);\n\t\t\t\tupdateListener.dispose();\n\t\t\t\tthis._groups.delete(group.handle);\n\t\t\t\tthis.#proxy.$unregisterGroup(this.handle, group.handle);\n\t\t\t});\n\n\t\t\tgroups.push([\n\t\t\t\tgroup.handle,\n\t\t\t\tgroup.id,\n\t\t\t\tgroup.label,\n\t\t\t\tgroup.features,\n\t\t\t\tgroup.multiDiffEditorEnableViewChanges,\n\t\t\t]);\n\n\t\t\tconst snapshot = group._takeResourceStateSnapshot();\n\n\t\t\tif (snapshot.length > 0) {\n\t\t\t\tsplices.push([group.handle, snapshot]);\n\t\t\t}\n\n\t\t\tthis._groups.set(group.handle, group);\n\t\t}\n\n\t\tthis.#proxy.$registerGroups(this.handle, groups, splices);\n\t\tthis.createdResourceGroups.clear();\n\t}\n\n\t@debounce(100)\n\teventuallyUpdateResourceStates(): void {\n\t\tconst splices: SCMRawResourceSplices[] = [];\n\n\t\tthis.updatedResourceGroups.forEach((group) => {\n\t\t\tconst snapshot = group._takeResourceStateSnapshot();\n\n\t\t\tif (snapshot.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsplices.push([group.handle, snapshot]);\n\t\t});\n\n\t\tif (splices.length > 0) {\n\t\t\tthis.#proxy.$spliceResourceStates(this.handle, splices);\n\t\t}\n\n\t\tthis.updatedResourceGroups.clear();\n\t}\n\n\tgetResourceGroup(\n\t\thandle: GroupHandle,\n\t): ExtHostSourceControlResourceGroup | undefined {\n\t\treturn this._groups.get(handle);\n\t}\n\n\tsetSelectionState(selected: boolean): void {\n\t\tthis._selected = selected;\n\t\tthis._onDidChangeSelection.fire(selected);\n\t}\n\n\tdispose(): void {\n\t\tthis._acceptInputDisposables.dispose();\n\t\tthis._actionButtonDisposables.dispose();\n\t\tthis._statusBarDisposables.dispose();\n\n\t\tthis._groups.forEach((group) => group.dispose());\n\t\tthis.#proxy.$unregisterSourceControl(this.handle);\n\t}\n}\n\nexport class ExtHostSCM implements ExtHostSCMShape {\n\tprivate static _handlePool = 0;\n\n\tprivate _proxy: MainThreadSCMShape;\n\tprivate readonly _telemetry: MainThreadTelemetryShape;\n\tprivate _sourceControls: Map<ProviderHandle, ExtHostSourceControl> =\n\t\tnew Map<ProviderHandle, ExtHostSourceControl>();\n\tprivate _sourceControlsByExtension: ExtensionIdentifierMap<\n\t\tExtHostSourceControl[]\n\t> = new ExtensionIdentifierMap<ExtHostSourceControl[]>();\n\n\tprivate readonly _onDidChangeActiveProvider =\n\t\tnew Emitter<vscode.SourceControl>();\n\tget onDidChangeActiveProvider(): Event<vscode.SourceControl> {\n\t\treturn this._onDidChangeActiveProvider.event;\n\t}\n\n\tprivate _selectedSourceControlHandle: number | undefined;\n\n\tconstructor(\n\t\tmainContext: IMainContext,\n\t\tprivate _commands: ExtHostCommands,\n\t\tprivate _extHostDocuments: ExtHostDocuments,\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tthis._proxy = mainContext.getProxy(MainContext.MainThreadSCM);\n\t\tthis._telemetry = mainContext.getProxy(MainContext.MainThreadTelemetry);\n\n\t\t_commands.registerArgumentProcessor({\n\t\t\tprocessArgument: (arg) => {\n\t\t\t\tif (arg && arg.$mid === MarshalledId.ScmResource) {\n\t\t\t\t\tconst sourceControl = this._sourceControls.get(\n\t\t\t\t\t\targ.sourceControlHandle,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (!sourceControl) {\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst group = sourceControl.getResourceGroup(\n\t\t\t\t\t\targ.groupHandle,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (!group) {\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn group.getResourceState(arg.handle);\n\t\t\t\t} else if (arg && arg.$mid === MarshalledId.ScmResourceGroup) {\n\t\t\t\t\tconst sourceControl = this._sourceControls.get(\n\t\t\t\t\t\targ.sourceControlHandle,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (!sourceControl) {\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn sourceControl.getResourceGroup(arg.groupHandle);\n\t\t\t\t} else if (arg && arg.$mid === MarshalledId.ScmProvider) {\n\t\t\t\t\tconst sourceControl = this._sourceControls.get(arg.handle);\n\n\t\t\t\t\tif (!sourceControl) {\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn sourceControl;\n\t\t\t\t}\n\n\t\t\t\treturn arg;\n\t\t\t},\n\t\t});\n\t}\n\n\tcreateSourceControl(\n\t\textension: IExtensionDescription,\n\t\tid: string,\n\t\tlabel: string,\n\t\trootUri: vscode.Uri | undefined,\n\t): vscode.SourceControl {\n\t\tthis.logService.trace(\n\t\t\t\"ExtHostSCM#createSourceControl\",\n\t\t\textension.identifier.value,\n\t\t\tid,\n\t\t\tlabel,\n\t\t\trootUri,\n\t\t);\n\n\t\ttype TEvent = { extensionId: string };\n\t\ttype TMeta = {\n\t\t\towner: \"joaomoreno\";\n\t\t\textensionId: {\n\t\t\t\tclassification: \"SystemMetaData\";\n\t\t\t\tpurpose: \"FeatureInsight\";\n\t\t\t\tcomment: \"The ID of the extension contributing to the Source Control API.\";\n\t\t\t};\n\t\t\tcomment: \"This is used to know what extensions contribute to the Source Control API.\";\n\t\t};\n\t\tthis._telemetry.$publicLog2<TEvent, TMeta>(\n\t\t\t\"api/scm/createSourceControl\",\n\t\t\t{\n\t\t\t\textensionId: extension.identifier.value,\n\t\t\t},\n\t\t);\n\n\t\tconst handle = ExtHostSCM._handlePool++;\n\t\tconst sourceControl = new ExtHostSourceControl(\n\t\t\textension,\n\t\t\tthis._extHostDocuments,\n\t\t\tthis._proxy,\n\t\t\tthis._commands,\n\t\t\tid,\n\t\t\tlabel,\n\t\t\trootUri,\n\t\t);\n\t\tthis._sourceControls.set(handle, sourceControl);\n\n\t\tconst sourceControls =\n\t\t\tthis._sourceControlsByExtension.get(extension.identifier) || [];\n\t\tsourceControls.push(sourceControl);\n\t\tthis._sourceControlsByExtension.set(\n\t\t\textension.identifier,\n\t\t\tsourceControls,\n\t\t);\n\n\t\treturn sourceControl;\n\t}\n\n\t// Deprecated\n\tgetLastInputBox(\n\t\textension: IExtensionDescription,\n\t): ExtHostSCMInputBox | undefined {\n\t\tthis.logService.trace(\n\t\t\t\"ExtHostSCM#getLastInputBox\",\n\t\t\textension.identifier.value,\n\t\t);\n\n\t\tconst sourceControls = this._sourceControlsByExtension.get(\n\t\t\textension.identifier,\n\t\t);\n\t\tconst sourceControl =\n\t\t\tsourceControls && sourceControls[sourceControls.length - 1];\n\t\treturn sourceControl && sourceControl.inputBox;\n\t}\n\n\t$provideOriginalResource(\n\t\tsourceControlHandle: number,\n\t\turiComponents: UriComponents,\n\t\ttoken: CancellationToken,\n\t): Promise<UriComponents | null> {\n\t\tconst uri = URI.revive(uriComponents);\n\t\tthis.logService.trace(\n\t\t\t\"ExtHostSCM#$provideOriginalResource\",\n\t\t\tsourceControlHandle,\n\t\t\turi.toString(),\n\t\t);\n\n\t\tconst sourceControl = this._sourceControls.get(sourceControlHandle);\n\n\t\tif (\n\t\t\t!sourceControl ||\n\t\t\t!sourceControl.quickDiffProvider ||\n\t\t\t!sourceControl.quickDiffProvider.provideOriginalResource\n\t\t) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\treturn asPromise(() =>\n\t\t\tsourceControl.quickDiffProvider!.provideOriginalResource!(\n\t\t\t\turi,\n\t\t\t\ttoken,\n\t\t\t),\n\t\t).then<UriComponents | null>((r) => r || null);\n\t}\n\n\t$onInputBoxValueChange(\n\t\tsourceControlHandle: number,\n\t\tvalue: string,\n\t): Promise<void> {\n\t\tthis.logService.trace(\n\t\t\t\"ExtHostSCM#$onInputBoxValueChange\",\n\t\t\tsourceControlHandle,\n\t\t);\n\n\t\tconst sourceControl = this._sourceControls.get(sourceControlHandle);\n\n\t\tif (!sourceControl) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tsourceControl.inputBox.$onInputBoxValueChange(value);\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\t$executeResourceCommand(\n\t\tsourceControlHandle: number,\n\t\tgroupHandle: number,\n\t\thandle: number,\n\t\tpreserveFocus: boolean,\n\t): Promise<void> {\n\t\tthis.logService.trace(\n\t\t\t\"ExtHostSCM#$executeResourceCommand\",\n\t\t\tsourceControlHandle,\n\t\t\tgroupHandle,\n\t\t\thandle,\n\t\t);\n\n\t\tconst sourceControl = this._sourceControls.get(sourceControlHandle);\n\n\t\tif (!sourceControl) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst group = sourceControl.getResourceGroup(groupHandle);\n\n\t\tif (!group) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\treturn group.$executeResourceCommand(handle, preserveFocus);\n\t}\n\n\t$validateInput(\n\t\tsourceControlHandle: number,\n\t\tvalue: string,\n\t\tcursorPosition: number,\n\t): Promise<[string | IMarkdownString, number] | undefined> {\n\t\tthis.logService.trace(\"ExtHostSCM#$validateInput\", sourceControlHandle);\n\n\t\tconst sourceControl = this._sourceControls.get(sourceControlHandle);\n\n\t\tif (!sourceControl) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tif (!sourceControl.inputBox.validateInput) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\treturn asPromise(() =>\n\t\t\tsourceControl.inputBox.validateInput!(value, cursorPosition),\n\t\t).then((result) => {\n\t\t\tif (!result) {\n\t\t\t\treturn Promise.resolve(undefined);\n\t\t\t}\n\n\t\t\tconst message = MarkdownString.fromStrict(result.message);\n\t\t\tif (!message) {\n\t\t\t\treturn Promise.resolve(undefined);\n\t\t\t}\n\n\t\t\treturn Promise.resolve<[string | IMarkdownString, number]>([\n\t\t\t\tmessage,\n\t\t\t\tresult.type,\n\t\t\t]);\n\t\t});\n\t}\n\n\t$setSelectedSourceControl(\n\t\tselectedSourceControlHandle: number | undefined,\n\t): Promise<void> {\n\t\tthis.logService.trace(\n\t\t\t\"ExtHostSCM#$setSelectedSourceControl\",\n\t\t\tselectedSourceControlHandle,\n\t\t);\n\n\t\tif (selectedSourceControlHandle !== undefined) {\n\t\t\tthis._sourceControls\n\t\t\t\t.get(selectedSourceControlHandle)\n\t\t\t\t?.setSelectionState(true);\n\t\t}\n\n\t\tif (this._selectedSourceControlHandle !== undefined) {\n\t\t\tthis._sourceControls\n\t\t\t\t.get(this._selectedSourceControlHandle)\n\t\t\t\t?.setSelectionState(false);\n\t\t}\n\n\t\tthis._selectedSourceControlHandle = selectedSourceControlHandle;\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tasync $resolveHistoryItemRefsCommonAncestor(\n\t\tsourceControlHandle: number,\n\t\thistoryItemRefs: string[],\n\t\ttoken: CancellationToken,\n\t): Promise<string | undefined> {\n\t\tconst historyProvider =\n\t\t\tthis._sourceControls.get(sourceControlHandle)?.historyProvider;\n\t\treturn (\n\t\t\t(await historyProvider?.resolveHistoryItemRefsCommonAncestor(\n\t\t\t\thistoryItemRefs,\n\t\t\t\ttoken,\n\t\t\t)) ?? undefined\n\t\t);\n\t}\n\n\tasync $provideHistoryItemRefs(\n\t\tsourceControlHandle: number,\n\t\ttoken: CancellationToken,\n\t): Promise<SCMHistoryItemRefDto[] | undefined> {\n\t\tconst historyProvider =\n\t\t\tthis._sourceControls.get(sourceControlHandle)?.historyProvider;\n\t\tconst historyItemRefs =\n\t\t\tawait historyProvider?.provideHistoryItemRefs(token);\n\n\t\treturn (\n\t\t\thistoryItemRefs?.map((ref) => ({\n\t\t\t\t...ref,\n\t\t\t\ticon: getHistoryItemIconDto(ref.icon),\n\t\t\t})) ?? undefined\n\t\t);\n\t}\n\n\tasync $provideHistoryItems(\n\t\tsourceControlHandle: number,\n\t\toptions: any,\n\t\ttoken: CancellationToken,\n\t): Promise<SCMHistoryItemDto[] | undefined> {\n\t\tconst historyProvider =\n\t\t\tthis._sourceControls.get(sourceControlHandle)?.historyProvider;\n\t\tconst historyItems = await historyProvider?.provideHistoryItems(\n\t\t\toptions,\n\t\t\ttoken,\n\t\t);\n\n\t\treturn (\n\t\t\thistoryItems?.map((item) => toSCMHistoryItemDto(item)) ?? undefined\n\t\t);\n\t}\n\n\tasync $provideHistoryItemChanges(\n\t\tsourceControlHandle: number,\n\t\thistoryItemId: string,\n\t\thistoryItemParentId: string | undefined,\n\t\ttoken: CancellationToken,\n\t): Promise<SCMHistoryItemChangeDto[] | undefined> {\n\t\tconst historyProvider =\n\t\t\tthis._sourceControls.get(sourceControlHandle)?.historyProvider;\n\t\treturn (\n\t\t\t(await historyProvider?.provideHistoryItemChanges(\n\t\t\t\thistoryItemId,\n\t\t\t\thistoryItemParentId,\n\t\t\t\ttoken,\n\t\t\t)) ?? undefined\n\t\t);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
