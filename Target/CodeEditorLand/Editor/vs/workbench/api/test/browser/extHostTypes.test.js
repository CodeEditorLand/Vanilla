import t from"assert";import{URI as r}from"../../../../base/common/uri.js";import*as n from"../../common/extHostTypes.js";import{isWindows as p}from"../../../../base/common/platform.js";import{assertType as l}from"../../../../base/common/types.js";import{Mimes as f}from"../../../../base/common/mime.js";import{MarshalledId as u}from"../../../../base/common/marshallingIds.js";import{CancellationError as h}from"../../../../base/common/errors.js";import{ensureNoDisposablesAreLeakedInTestSuite as E}from"../../../../base/test/common/utils.js";function i(c,e){const a=JSON.stringify(c),o=JSON.parse(a);t.deepStrictEqual(o,e)}suite("ExtHostTypes",function(){E(),test("URI, toJSON",function(){const e=r.parse("file:///path/test.file");t.deepStrictEqual(e.toJSON(),{$mid:u.Uri,scheme:"file",path:"/path/test.file"}),t.ok(e.fsPath),t.deepStrictEqual(e.toJSON(),{$mid:u.Uri,scheme:"file",path:"/path/test.file",fsPath:"/path/test.file".replace(/\//g,p?"\\":"/"),_sep:p?1:void 0}),t.ok(e.toString()),t.deepStrictEqual(e.toJSON(),{$mid:u.Uri,scheme:"file",path:"/path/test.file",fsPath:"/path/test.file".replace(/\//g,p?"\\":"/"),_sep:p?1:void 0,external:"file:///path/test.file"})}),test("Disposable",()=>{let e=0;const a=new n.Disposable(()=>(e+=1,12));a.dispose(),t.strictEqual(e,1),a.dispose(),t.strictEqual(e,1),n.Disposable.from(void 0,{dispose(){e+=1}}).dispose(),t.strictEqual(e,2),t.throws(()=>{new n.Disposable(()=>{throw new Error}).dispose()}),new n.Disposable(void 0).dispose()}),test("Position",()=>{t.throws(()=>new n.Position(-1,0)),t.throws(()=>new n.Position(0,-1));const e=new n.Position(0,0);t.throws(()=>e.line=-1),t.throws(()=>e.character=-1),t.throws(()=>e.line=12);const{line:a,character:o}=e.toJSON();t.strictEqual(a,0),t.strictEqual(o,0)}),test("Position, toJSON",function(){const e=new n.Position(4,2);i(e,{line:4,character:2})}),test("Position, isBefore(OrEqual)?",function(){const e=new n.Position(1,3),a=new n.Position(1,2),o=new n.Position(0,4);t.ok(e.isBeforeOrEqual(e)),t.ok(!e.isBefore(e)),t.ok(a.isBefore(e)),t.ok(o.isBefore(a))}),test("Position, isAfter(OrEqual)?",function(){const e=new n.Position(1,3),a=new n.Position(1,2),o=new n.Position(0,4);t.ok(e.isAfterOrEqual(e)),t.ok(!e.isAfter(e)),t.ok(e.isAfter(a)),t.ok(a.isAfter(o)),t.ok(e.isAfter(o))}),test("Position, compareTo",function(){const e=new n.Position(1,3),a=new n.Position(1,2),o=new n.Position(0,4);t.strictEqual(e.compareTo(e),0),t.strictEqual(a.compareTo(e),-1),t.strictEqual(e.compareTo(a),1),t.strictEqual(a.compareTo(o),1),t.strictEqual(e.compareTo(o),1)}),test("Position, translate",function(){const e=new n.Position(1,3);t.ok(e.translate()===e),t.ok(e.translate({})===e),t.ok(e.translate(0,0)===e),t.ok(e.translate(0)===e),t.ok(e.translate(void 0,0)===e),t.ok(e.translate(void 0)===e);let a=e.translate(-1);t.strictEqual(a.line,0),t.strictEqual(a.character,3),a=e.translate({lineDelta:-1}),t.strictEqual(a.line,0),t.strictEqual(a.character,3),a=e.translate(void 0,-1),t.strictEqual(a.line,1),t.strictEqual(a.character,2),a=e.translate({characterDelta:-1}),t.strictEqual(a.line,1),t.strictEqual(a.character,2),a=e.translate(11),t.strictEqual(a.line,12),t.strictEqual(a.character,3),t.throws(()=>e.translate(null)),t.throws(()=>e.translate(null,null)),t.throws(()=>e.translate(-2)),t.throws(()=>e.translate({lineDelta:-2})),t.throws(()=>e.translate(-2,null)),t.throws(()=>e.translate(0,-4))}),test("Position, with",function(){const e=new n.Position(1,3);t.ok(e.with()===e),t.ok(e.with(1)===e),t.ok(e.with(void 0,3)===e),t.ok(e.with(1,3)===e),t.ok(e.with(void 0)===e),t.ok(e.with({line:1})===e),t.ok(e.with({character:3})===e),t.ok(e.with({line:1,character:3})===e);const a=e.with({line:0,character:11});t.strictEqual(a.line,0),t.strictEqual(a.character,11),t.throws(()=>e.with(null)),t.throws(()=>e.with(-9)),t.throws(()=>e.with(0,-9)),t.throws(()=>e.with({line:-1})),t.throws(()=>e.with({character:-1}))}),test("Range",()=>{t.throws(()=>new n.Range(-1,0,0,0)),t.throws(()=>new n.Range(0,-1,0,0)),t.throws(()=>new n.Range(new n.Position(0,0),void 0)),t.throws(()=>new n.Range(new n.Position(0,0),null)),t.throws(()=>new n.Range(void 0,new n.Position(0,0))),t.throws(()=>new n.Range(null,new n.Position(0,0)));const e=new n.Range(1,0,0,0);t.throws(()=>{e.start=null}),t.throws(()=>{e.start=new n.Position(0,3)})}),test("Range, toJSON",function(){const e=new n.Range(1,2,3,4);i(e,[{line:1,character:2},{line:3,character:4}])}),test("Range, sorting",function(){let e=new n.Range(1,0,0,0);t.strictEqual(e.start.line,0),t.strictEqual(e.end.line,1),e=new n.Range(0,0,1,0),t.strictEqual(e.start.line,0),t.strictEqual(e.end.line,1)}),test("Range, isEmpty|isSingleLine",function(){let e=new n.Range(1,0,0,0);t.ok(!e.isEmpty),t.ok(!e.isSingleLine),e=new n.Range(1,1,1,1),t.ok(e.isEmpty),t.ok(e.isSingleLine),e=new n.Range(0,1,0,11),t.ok(!e.isEmpty),t.ok(e.isSingleLine),e=new n.Range(0,0,1,1),t.ok(!e.isEmpty),t.ok(!e.isSingleLine)}),test("Range, contains",function(){const e=new n.Range(1,1,2,11);t.ok(e.contains(e.start)),t.ok(e.contains(e.end)),t.ok(e.contains(e)),t.ok(!e.contains(new n.Range(1,0,2,11))),t.ok(!e.contains(new n.Range(0,1,2,11))),t.ok(!e.contains(new n.Range(1,1,2,12))),t.ok(!e.contains(new n.Range(1,1,3,11)))}),test("Range, contains (no instanceof)",function(){const e=new n.Range(1,1,2,11),a={line:e.start.line,character:e.start.character},o={line:e.end.line,character:e.end.character},s={start:a,end:o};t.ok(e.contains(a)),t.ok(e.contains(o)),t.ok(e.contains(s))}),test("Range, intersection",function(){const e=new n.Range(1,1,2,11);let a;a=e.intersection(e),t.strictEqual(a.start.line,1),t.strictEqual(a.start.character,1),t.strictEqual(a.end.line,2),t.strictEqual(a.end.character,11),a=e.intersection(new n.Range(2,12,4,0)),t.strictEqual(a,void 0),a=e.intersection(new n.Range(0,0,1,0)),t.strictEqual(a,void 0),a=e.intersection(new n.Range(0,0,1,1)),t.ok(a.isEmpty),t.strictEqual(a.start.line,1),t.strictEqual(a.start.character,1),a=e.intersection(new n.Range(2,11,61,1)),t.ok(a.isEmpty),t.strictEqual(a.start.line,2),t.strictEqual(a.start.character,11),t.throws(()=>e.intersection(null)),t.throws(()=>e.intersection(void 0))}),test("Range, union",function(){let e=new n.Range(0,0,5,5);t.ok(e.union(new n.Range(0,0,1,1))===e);let a;a=e.union(new n.Range(2,2,9,9)),t.ok(a.start===e.start),t.strictEqual(a.end.line,9),t.strictEqual(a.end.character,9),e=new n.Range(2,1,5,3),a=e.union(new n.Range(1,0,4,2)),t.ok(a.end===e.end),t.strictEqual(a.start.line,1),t.strictEqual(a.start.character,0)}),test("Range, with",function(){const e=new n.Range(1,1,2,11);t.ok(e.with(e.start)===e),t.ok(e.with(void 0,e.end)===e),t.ok(e.with(e.start,e.end)===e),t.ok(e.with(new n.Position(1,1))===e),t.ok(e.with(void 0,new n.Position(2,11))===e),t.ok(e.with()===e),t.ok(e.with({start:e.start})===e),t.ok(e.with({start:new n.Position(1,1)})===e),t.ok(e.with({end:e.end})===e),t.ok(e.with({end:new n.Position(2,11)})===e);let a=e.with(void 0,new n.Position(9,8));t.strictEqual(a.end.line,9),t.strictEqual(a.end.character,8),t.strictEqual(a.start.line,1),t.strictEqual(a.start.character,1),a=e.with({end:new n.Position(9,8)}),t.strictEqual(a.end.line,9),t.strictEqual(a.end.character,8),t.strictEqual(a.start.line,1),t.strictEqual(a.start.character,1),a=e.with({end:new n.Position(9,8),start:new n.Position(2,3)}),t.strictEqual(a.end.line,9),t.strictEqual(a.end.character,8),t.strictEqual(a.start.line,2),t.strictEqual(a.start.character,3),t.throws(()=>e.with(null)),t.throws(()=>e.with(void 0,null))}),test("TextEdit",()=>{const e=new n.Range(1,1,2,11);let a=new n.TextEdit(e,void 0);t.strictEqual(a.newText,""),i(a,{range:[{line:1,character:1},{line:2,character:11}],newText:""}),a=new n.TextEdit(e,null),t.strictEqual(a.newText,""),a=new n.TextEdit(e,""),t.strictEqual(a.newText,"")}),test("WorkspaceEdit",()=>{const e=r.file("a.ts"),a=r.file("b.ts"),o=new n.WorkspaceEdit;t.ok(!o.has(e)),o.set(e,[n.TextEdit.insert(new n.Position(0,0),"fff")]),t.ok(o.has(e)),t.strictEqual(o.size,1),i(o,[[e.toJSON(),[{range:[{line:0,character:0},{line:0,character:0}],newText:"fff"}]]]),o.insert(a,new n.Position(1,1),"fff"),o.delete(a,new n.Range(0,0,0,0)),t.ok(o.has(a)),t.strictEqual(o.size,2),i(o,[[e.toJSON(),[{range:[{line:0,character:0},{line:0,character:0}],newText:"fff"}]],[a.toJSON(),[{range:[{line:1,character:1},{line:1,character:1}],newText:"fff"},{range:[{line:0,character:0},{line:0,character:0}],newText:""}]]]),o.set(a,void 0),t.ok(!o.has(a)),t.strictEqual(o.size,1),o.set(a,[n.TextEdit.insert(new n.Position(0,0),"ffff")]),t.strictEqual(o.get(a).length,1)}),test("WorkspaceEdit - keep order of text and file changes",function(){const e=new n.WorkspaceEdit;e.replace(r.parse("foo:a"),new n.Range(1,1,1,1),"foo"),e.renameFile(r.parse("foo:a"),r.parse("foo:b")),e.replace(r.parse("foo:a"),new n.Range(2,1,2,1),"bar"),e.replace(r.parse("foo:b"),new n.Range(3,1,3,1),"bazz");const a=e._allEntries();t.strictEqual(a.length,4);const[o,s,d,w]=a;l(o._type===n.FileEditType.Text),t.strictEqual(o.uri.toString(),"foo:a"),l(s._type===n.FileEditType.File),t.strictEqual(s.from.toString(),"foo:a"),t.strictEqual(s.to.toString(),"foo:b"),l(d._type===n.FileEditType.Text),t.strictEqual(d.uri.toString(),"foo:a"),l(w._type===n.FileEditType.Text),t.strictEqual(w.uri.toString(),"foo:b")}),test("WorkspaceEdit - two edits for one resource",function(){const e=new n.WorkspaceEdit,a=r.parse("foo:bar");e.insert(a,new n.Position(0,0),"Hello"),e.insert(a,new n.Position(0,0),"Foo"),t.strictEqual(e._allEntries().length,2);const[o,s]=e._allEntries();l(o._type===n.FileEditType.Text),l(s._type===n.FileEditType.Text),t.strictEqual(o.edit.newText,"Hello"),t.strictEqual(s.edit.newText,"Foo")}),test("WorkspaceEdit - set with metadata accepts undefined",function(){const e=new n.WorkspaceEdit,a=r.parse("foo:bar");e.set(a,[[n.TextEdit.insert(new n.Position(0,0),"Hello"),{needsConfirmation:!0,label:"foo"}],[n.TextEdit.insert(new n.Position(0,0),"Hello"),void 0]]);const o=e._allEntries();t.strictEqual(o.length,2);const[s,d]=o;t.ok(s.metadata),t.ok(!d.metadata)}),test("DocumentLink",()=>{t.throws(()=>new n.DocumentLink(null,null)),t.throws(()=>new n.DocumentLink(new n.Range(1,1,1,1),null))}),test("toJSON & stringify",function(){i(new n.Selection(3,4,2,1),{start:{line:2,character:1},end:{line:3,character:4},anchor:{line:3,character:4},active:{line:2,character:1}}),i(new n.Location(r.file("u.ts"),new n.Position(3,4)),{uri:r.parse("file:///u.ts").toJSON(),range:[{line:3,character:4},{line:3,character:4}]}),i(new n.Location(r.file("u.ts"),new n.Range(1,2,3,4)),{uri:r.parse("file:///u.ts").toJSON(),range:[{line:1,character:2},{line:3,character:4}]});const e=new n.Diagnostic(new n.Range(0,1,2,3),"hello");i(e,{severity:"Error",message:"hello",range:[{line:0,character:1},{line:2,character:3}]}),e.source="me",i(e,{severity:"Error",message:"hello",range:[{line:0,character:1},{line:2,character:3}],source:"me"}),i(new n.DocumentHighlight(new n.Range(2,3,4,5)),{range:[{line:2,character:3},{line:4,character:5}],kind:"Text"}),i(new n.DocumentHighlight(new n.Range(2,3,4,5),n.DocumentHighlightKind.Read),{range:[{line:2,character:3},{line:4,character:5}],kind:"Read"}),i(new n.SymbolInformation("test",n.SymbolKind.Boolean,new n.Range(0,1,2,3)),{name:"test",kind:"Boolean",location:{range:[{line:0,character:1},{line:2,character:3}]}}),i(new n.CodeLens(new n.Range(7,8,9,10)),{range:[{line:7,character:8},{line:9,character:10}]}),i(new n.CodeLens(new n.Range(7,8,9,10),{command:"id",title:"title"}),{range:[{line:7,character:8},{line:9,character:10}],command:{command:"id",title:"title"}}),i(new n.CompletionItem("complete"),{label:"complete"});const a=new n.CompletionItem("complete");a.kind=n.CompletionItemKind.Interface,i(a,{label:"complete",kind:"Interface"})}),test("SymbolInformation, old ctor",function(){const e=new n.SymbolInformation("foo",n.SymbolKind.Array,new n.Range(1,1,2,3));t.ok(e.location instanceof n.Location),t.strictEqual(e.location.uri,void 0)}),test("SnippetString, builder-methods",function(){let e;e=new n.SnippetString,t.strictEqual(e.appendText("I need $ and $").value,"I need \\$ and \\$"),e=new n.SnippetString,t.strictEqual(e.appendText("I need \\$").value,"I need \\\\\\$"),e=new n.SnippetString,e.appendPlaceholder("fo$o}"),t.strictEqual(e.value,"${1:fo\\$o\\}}"),e=new n.SnippetString,e.appendText("foo").appendTabstop(0).appendText("bar"),t.strictEqual(e.value,"foo$0bar"),e=new n.SnippetString,e.appendText("foo").appendTabstop().appendText("bar"),t.strictEqual(e.value,"foo$1bar"),e=new n.SnippetString,e.appendText("foo").appendTabstop(42).appendText("bar"),t.strictEqual(e.value,"foo$42bar"),e=new n.SnippetString,e.appendText("foo").appendPlaceholder("farboo").appendText("bar"),t.strictEqual(e.value,"foo${1:farboo}bar"),e=new n.SnippetString,e.appendText("foo").appendPlaceholder("far$boo").appendText("bar"),t.strictEqual(e.value,"foo${1:far\\$boo}bar"),e=new n.SnippetString,e.appendText("foo").appendPlaceholder(a=>a.appendText("abc").appendPlaceholder("nested")).appendText("bar"),t.strictEqual(e.value,"foo${1:abc${2:nested}}bar"),e=new n.SnippetString,e.appendVariable("foo"),t.strictEqual(e.value,"${foo}"),e=new n.SnippetString,e.appendText("foo").appendVariable("TM_SELECTED_TEXT").appendText("bar"),t.strictEqual(e.value,"foo${TM_SELECTED_TEXT}bar"),e=new n.SnippetString,e.appendVariable("BAR",a=>a.appendPlaceholder("ops")),t.strictEqual(e.value,"${BAR:${1:ops}}"),e=new n.SnippetString,e.appendVariable("BAR",a=>{}),t.strictEqual(e.value,"${BAR}"),e=new n.SnippetString,e.appendChoice(["b","a","r"]),t.strictEqual(e.value,"${1|b,a,r|}"),e=new n.SnippetString,e.appendChoice(["b,1","a,2","r,3"]),t.strictEqual(e.value,"${1|b\\,1,a\\,2,r\\,3|}"),e=new n.SnippetString,e.appendChoice(["b","a","r"],0),t.strictEqual(e.value,"${0|b,a,r|}"),e=new n.SnippetString,e.appendText("foo").appendChoice(["far","boo"]).appendText("bar"),t.strictEqual(e.value,"foo${1|far,boo|}bar"),e=new n.SnippetString,e.appendText("foo").appendChoice(["far","$boo"]).appendText("bar"),t.strictEqual(e.value,"foo${1|far,$boo|}bar"),e=new n.SnippetString,e.appendText("foo").appendPlaceholder("farboo").appendChoice(["far","boo"]).appendText("bar"),t.strictEqual(e.value,"foo${1:farboo}${2|far,boo|}bar")}),test("Snippet choices are incorrectly escaped/applied #180132",function(){{const e=new n.SnippetString;e.appendChoice(["aaa$aaa"]),e.appendText("bbb$bbb"),t.strictEqual(e.value,"${1|aaa$aaa|}bbb\\$bbb")}{const e=new n.SnippetString;e.appendChoice(["aaa,aaa"]),e.appendText("bbb$bbb"),t.strictEqual(e.value,"${1|aaa\\,aaa|}bbb\\$bbb")}{const e=new n.SnippetString;e.appendChoice(["aaa|aaa"]),e.appendText("bbb$bbb"),t.strictEqual(e.value,"${1|aaa\\|aaa|}bbb\\$bbb")}{const e=new n.SnippetString;e.appendChoice(["aaa\\aaa"]),e.appendText("bbb$bbb"),t.strictEqual(e.value,"${1|aaa\\\\aaa|}bbb\\$bbb")}}),test("instanceof doesn't work for FileSystemError #49386",function(){const e=n.FileSystemError.Unavailable("foo");t.ok(e instanceof Error),t.ok(e instanceof n.FileSystemError)}),test("CancellationError",function(){const e=new h;t.strictEqual(e.name,"Canceled"),t.strictEqual(e.message,"Canceled")}),test("CodeActionKind contains",()=>{t.ok(n.CodeActionKind.RefactorExtract.contains(n.CodeActionKind.RefactorExtract)),t.ok(n.CodeActionKind.RefactorExtract.contains(n.CodeActionKind.RefactorExtract.append("other"))),t.ok(!n.CodeActionKind.RefactorExtract.contains(n.CodeActionKind.Refactor)),t.ok(!n.CodeActionKind.RefactorExtract.contains(n.CodeActionKind.Refactor.append("other"))),t.ok(!n.CodeActionKind.RefactorExtract.contains(n.CodeActionKind.Empty.append("other").append("refactor"))),t.ok(!n.CodeActionKind.RefactorExtract.contains(n.CodeActionKind.Empty.append("refactory")))}),test("CodeActionKind intersects",()=>{t.ok(n.CodeActionKind.RefactorExtract.intersects(n.CodeActionKind.RefactorExtract)),t.ok(n.CodeActionKind.RefactorExtract.intersects(n.CodeActionKind.Refactor)),t.ok(n.CodeActionKind.RefactorExtract.intersects(n.CodeActionKind.RefactorExtract.append("other"))),t.ok(!n.CodeActionKind.RefactorExtract.intersects(n.CodeActionKind.Refactor.append("other"))),t.ok(!n.CodeActionKind.RefactorExtract.intersects(n.CodeActionKind.Empty.append("other").append("refactor"))),t.ok(!n.CodeActionKind.RefactorExtract.intersects(n.CodeActionKind.Empty.append("refactory")))});function c(e){const a=[];for(let o=0,s=e.length;o<s;o++)a[o]=e[o];return a}test("SemanticTokensBuilder simple",()=>{const e=new n.SemanticTokensBuilder;e.push(1,0,5,1,1),e.push(1,10,4,2,2),e.push(2,2,3,2,2),t.deepStrictEqual(c(e.build().data),[1,0,5,1,1,0,10,4,2,2,1,2,3,2,2])}),test("SemanticTokensBuilder no modifier",()=>{const e=new n.SemanticTokensBuilder;e.push(1,0,5,1),e.push(1,10,4,2),e.push(2,2,3,2),t.deepStrictEqual(c(e.build().data),[1,0,5,1,0,0,10,4,2,0,1,2,3,2,0])}),test("SemanticTokensBuilder out of order 1",()=>{const e=new n.SemanticTokensBuilder;e.push(2,0,5,1,1),e.push(2,10,1,2,2),e.push(2,15,2,3,3),e.push(1,0,4,4,4),t.deepStrictEqual(c(e.build().data),[1,0,4,4,4,1,0,5,1,1,0,10,1,2,2,0,5,2,3,3])}),test("SemanticTokensBuilder out of order 2",()=>{const e=new n.SemanticTokensBuilder;e.push(2,10,5,1,1),e.push(2,2,4,2,2),t.deepStrictEqual(c(e.build().data),[2,2,4,2,2,0,8,5,1,1])}),test("SemanticTokensBuilder with legend",()=>{const e=new n.SemanticTokensLegend(["aType","bType","cType","dType"],["mod0","mod1","mod2","mod3","mod4","mod5"]),a=new n.SemanticTokensBuilder(e);a.push(new n.Range(1,0,1,5),"bType"),a.push(new n.Range(2,0,2,4),"cType",["mod0","mod5"]),a.push(new n.Range(3,0,3,3),"dType",["mod2","mod4"]),t.deepStrictEqual(c(a.build().data),[1,0,5,1,0,1,0,4,2,33,1,0,3,3,20])}),test("Markdown codeblock rendering is swapped #111604",function(){const e=new n.MarkdownString().appendCodeblock('<img src=0 onerror="alert(1)">',"html");t.deepStrictEqual(e.value,'\n```html\n<img src=0 onerror="alert(1)">\n```\n')}),test("NotebookCellOutputItem - factories",function(){t.throws(()=>{new n.NotebookCellOutputItem(new Uint8Array,"invalid")});let e=n.NotebookCellOutputItem.error(new Error);t.strictEqual(e.mime,"application/vnd.code.notebook.error"),e=n.NotebookCellOutputItem.error({name:"Hello"}),t.strictEqual(e.mime,"application/vnd.code.notebook.error"),e=n.NotebookCellOutputItem.json(1),t.strictEqual(e.mime,"text/x-json"),t.deepStrictEqual(e.data,new TextEncoder().encode(JSON.stringify(1))),e=n.NotebookCellOutputItem.json(1,"foo/bar"),t.strictEqual(e.mime,"foo/bar"),t.deepStrictEqual(e.data,new TextEncoder().encode(JSON.stringify(1))),e=n.NotebookCellOutputItem.json(!0),t.strictEqual(e.mime,"text/x-json"),t.deepStrictEqual(e.data,new TextEncoder().encode(JSON.stringify(!0))),e=n.NotebookCellOutputItem.json([!0,1,"ddd"]),t.strictEqual(e.mime,"text/x-json"),t.deepStrictEqual(e.data,new TextEncoder().encode(JSON.stringify([!0,1,"ddd"],void 0,"	"))),e=n.NotebookCellOutputItem.text("H\u0119\u0142l\xF6"),t.strictEqual(e.mime,f.text),t.deepStrictEqual(e.data,new TextEncoder().encode("H\u0119\u0142l\xF6")),e=n.NotebookCellOutputItem.text("H\u0119\u0142l\xF6","foo/bar"),t.strictEqual(e.mime,"foo/bar"),t.deepStrictEqual(e.data,new TextEncoder().encode("H\u0119\u0142l\xF6"))}),test("FileDecoration#validate",function(){t.ok(n.FileDecoration.validate({badge:"u"})),t.ok(n.FileDecoration.validate({badge:"\xFC"})),t.ok(n.FileDecoration.validate({badge:"1"})),t.ok(n.FileDecoration.validate({badge:"\xE3\xE3"})),t.ok(n.FileDecoration.validate({badge:"\u{1F44B}"})),t.ok(n.FileDecoration.validate({badge:"\u{1F44B}\u{1F44B}"})),t.ok(n.FileDecoration.validate({badge:"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}"})),t.ok(n.FileDecoration.validate({badge:"\u0BAA\u0BCB"})),t.throws(()=>n.FileDecoration.validate({badge:"hel"})),t.throws(()=>n.FileDecoration.validate({badge:"\u{1F44B}\u{1F44B}\u{1F44B}"})),t.throws(()=>n.FileDecoration.validate({badge:"\u0BAA\u0BC1\u0BA9\u0BCD\u0B9A\u0BBF\u0BB0\u0BBF\u0BAA\u0BCD\u0BAA\u0BCB\u0B9F\u0BC1"})),t.throws(()=>n.FileDecoration.validate({badge:"\xE3\xE3\xE3"}))})});
