var b=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=(a,e,i,o)=>{for(var r=o>1?void 0:o?g(e,i):e,s=a.length-1,n;s>=0;s--)(n=a[s])&&(r=(o?n(e,i,r):n(r))||r);return o&&r&&b(e,i,r),r},p=(a,e)=>(i,o)=>e(i,o,a);import{DisposableStore as S,toDisposable as I}from"../../../base/common/lifecycle.js";import{extHostNamedCustomer as E}from"../../services/extensions/common/extHostCustomers.js";import{StatusbarAlignment as x}from"../../services/statusbar/browser/statusbar.js";import{ExtHostContext as h,MainContext as C}from"../common/extHost.protocol.js";import{IExtensionStatusBarItemService as D,StatusBarUpdateKind as v}from"./statusBarExtensionPoint.js";let d=class{constructor(e,i){this.statusbarService=i;const o=e.getProxy(h.ExtHostStatusBar),r=[];for(const[n,t]of i.getEntries())r.push(s(n,t));o.$acceptStaticEntries(r),this._store.add(i.onDidChange(n=>{n.added&&o.$acceptStaticEntries([s(n.added[0],n.added[1])])}));function s(n,t){return{entryId:n,name:t.entry.name,text:t.entry.text,tooltip:t.entry.tooltip,command:typeof t.entry.command=="string"?t.entry.command:typeof t.entry.command=="object"?t.entry.command.id:void 0,priority:t.priority,alignLeft:t.alignment===x.LEFT,accessibilityInformation:t.entry.ariaLabel?{label:t.entry.ariaLabel,role:t.entry.role}:void 0}}}_store=new S;dispose(){this._store.dispose()}$setEntry(e,i,o,r,s,n,t,y,c,u,f,l){this.statusbarService.setOrUpdateEntry(e,i,o,r,s,n,t,y,c,u,f,l)===v.DidDefine&&this._store.add(I(()=>this.statusbarService.unsetEntry(e)))}$disposeEntry(e){this.statusbarService.unsetEntry(e)}};d=m([E(C.MainThreadStatusBar),p(1,D)],d);export{d as MainThreadStatusBar};
