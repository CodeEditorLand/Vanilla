var S=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=(a,n,i,o)=>{for(var r=o>1?void 0:o?g(n,i):n,s=a.length-1,e;s>=0;s--)(e=a[s])&&(r=(o?e(n,i,r):e(r))||r);return o&&r&&S(n,i,r),r},p=(a,n)=>(i,o)=>n(i,o,a);import"../../../base/common/htmlContent.js";import{DisposableStore as b,toDisposable as I}from"../../../base/common/lifecycle.js";import"../../../base/common/themables.js";import"../../../editor/common/languages.js";import"../../../platform/accessibility/common/accessibility.js";import{extHostNamedCustomer as E}from"../../services/extensions/common/extHostCustomers.js";import{StatusbarAlignment as x}from"../../services/statusbar/browser/statusbar.js";import{ExtHostContext as h,MainContext as C}from"../common/extHost.protocol.js";import{IExtensionStatusBarItemService as D,StatusBarUpdateKind as v}from"./statusBarExtensionPoint.js";let d=class{constructor(n,i){this.statusbarService=i;const o=n.getProxy(h.ExtHostStatusBar),r=[];for(const[e,t]of i.getEntries())r.push(s(e,t));o.$acceptStaticEntries(r),this._store.add(i.onDidChange(e=>{e.added&&o.$acceptStaticEntries([s(e.added[0],e.added[1])])}));function s(e,t){return{entryId:e,name:t.entry.name,text:t.entry.text,tooltip:t.entry.tooltip,command:typeof t.entry.command=="string"?t.entry.command:typeof t.entry.command=="object"?t.entry.command.id:void 0,priority:t.priority,alignLeft:t.alignment===x.LEFT,accessibilityInformation:t.entry.ariaLabel?{label:t.entry.ariaLabel,role:t.entry.role}:void 0}}}_store=new b;dispose(){this._store.dispose()}$setEntry(n,i,o,r,s,e,t,u,f,c,y,l){this.statusbarService.setOrUpdateEntry(n,i,o,r,s,e,t,u,f,c,y,l)===v.DidDefine&&this._store.add(I(()=>this.statusbarService.unsetEntry(n)))}$disposeEntry(n){this.statusbarService.unsetEntry(n)}};d=m([E(C.MainThreadStatusBar),p(1,D)],d);export{d as MainThreadStatusBar};
