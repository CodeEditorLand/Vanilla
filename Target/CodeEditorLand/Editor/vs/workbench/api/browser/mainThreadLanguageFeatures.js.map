{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/api/browser/mainThreadLanguageFeatures.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { createStringDataTransferItem, IReadonlyVSDataTransfer, VSDataTransfer } from '../../../base/common/dataTransfer.js';\nimport { CancellationError } from '../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { HierarchicalKind } from '../../../base/common/hierarchicalKind.js';\nimport { combinedDisposable, Disposable, DisposableMap, toDisposable } from '../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { revive } from '../../../base/common/marshalling.js';\nimport { mixin } from '../../../base/common/objects.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ISingleEditOperation } from '../../../editor/common/core/editOperation.js';\nimport { Position as EditorPosition, IPosition } from '../../../editor/common/core/position.js';\nimport { Range as EditorRange, IRange } from '../../../editor/common/core/range.js';\nimport { Selection } from '../../../editor/common/core/selection.js';\nimport * as languages from '../../../editor/common/languages.js';\nimport { ILanguageService } from '../../../editor/common/languages/language.js';\nimport { IndentationRule, LanguageConfiguration, OnEnterRule } from '../../../editor/common/languages/languageConfiguration.js';\nimport { ILanguageConfigurationService } from '../../../editor/common/languages/languageConfigurationRegistry.js';\nimport { ITextModel } from '../../../editor/common/model.js';\nimport { ILanguageFeaturesService } from '../../../editor/common/services/languageFeatures.js';\nimport { decodeSemanticTokensDto } from '../../../editor/common/services/semanticTokensDto.js';\nimport { ExtensionIdentifier } from '../../../platform/extensions/common/extensions.js';\nimport { IUriIdentityService } from '../../../platform/uriIdentity/common/uriIdentity.js';\nimport { reviveWorkspaceEditDto } from './mainThreadBulkEdits.js';\nimport * as typeConvert from '../common/extHostTypeConverters.js';\nimport { DataTransferFileCache } from '../common/shared/dataTransferCache.js';\nimport * as callh from '../../contrib/callHierarchy/common/callHierarchy.js';\nimport * as search from '../../contrib/search/common/search.js';\nimport * as typeh from '../../contrib/typeHierarchy/common/typeHierarchy.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ExtHostContext, ExtHostLanguageFeaturesShape, HoverWithId, ICallHierarchyItemDto, ICodeActionDto, ICodeActionProviderMetadataDto, IdentifiableInlineCompletion, IdentifiableInlineCompletions, IdentifiableInlineEdit, IDocumentDropEditDto, IDocumentDropEditProviderMetadata, IDocumentFilterDto, IIndentationRuleDto, IInlayHintDto, ILanguageConfigurationDto, ILanguageWordDefinitionDto, ILinkDto, ILocationDto, ILocationLinkDto, IOnEnterRuleDto, IPasteEditDto, IPasteEditProviderMetadataDto, IRegExpDto, ISignatureHelpProviderMetadataDto, ISuggestDataDto, ISuggestDataDtoField, ISuggestResultDtoField, ITypeHierarchyItemDto, IWorkspaceSymbolDto, MainContext, MainThreadLanguageFeaturesShape } from '../common/extHost.protocol.js';\n\n@extHostNamedCustomer(MainContext.MainThreadLanguageFeatures)\nexport class MainThreadLanguageFeatures extends Disposable implements MainThreadLanguageFeaturesShape {\n\n\tprivate readonly _proxy: ExtHostLanguageFeaturesShape;\n\tprivate readonly _registrations = this._register(new DisposableMap<number>());\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@ILanguageConfigurationService private readonly _languageConfigurationService: ILanguageConfigurationService,\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t\t@IUriIdentityService private readonly _uriIdentService: IUriIdentityService\n\t) {\n\t\tsuper();\n\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostLanguageFeatures);\n\n\t\tif (this._languageService) {\n\t\t\tconst updateAllWordDefinitions = () => {\n\t\t\t\tconst wordDefinitionDtos: ILanguageWordDefinitionDto[] = [];\n\t\t\t\tfor (const languageId of _languageService.getRegisteredLanguageIds()) {\n\t\t\t\t\tconst wordDefinition = this._languageConfigurationService.getLanguageConfiguration(languageId).getWordDefinition();\n\t\t\t\t\twordDefinitionDtos.push({\n\t\t\t\t\t\tlanguageId: languageId,\n\t\t\t\t\t\tregexSource: wordDefinition.source,\n\t\t\t\t\t\tregexFlags: wordDefinition.flags\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis._proxy.$setWordDefinitions(wordDefinitionDtos);\n\t\t\t};\n\t\t\tthis._register(this._languageConfigurationService.onDidChange((e) => {\n\t\t\t\tif (!e.languageId) {\n\t\t\t\t\tupdateAllWordDefinitions();\n\t\t\t\t} else {\n\t\t\t\t\tconst wordDefinition = this._languageConfigurationService.getLanguageConfiguration(e.languageId).getWordDefinition();\n\t\t\t\t\tthis._proxy.$setWordDefinitions([{\n\t\t\t\t\t\tlanguageId: e.languageId,\n\t\t\t\t\t\tregexSource: wordDefinition.source,\n\t\t\t\t\t\tregexFlags: wordDefinition.flags\n\t\t\t\t\t}]);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tupdateAllWordDefinitions();\n\t\t}\n\t}\n\n\t$unregister(handle: number): void {\n\t\tthis._registrations.deleteAndDispose(handle);\n\t}\n\n\t//#region --- revive functions\n\n\tprivate static _reviveLocationDto(data?: ILocationDto): languages.Location;\n\tprivate static _reviveLocationDto(data?: ILocationDto[]): languages.Location[];\n\tprivate static _reviveLocationDto(data: ILocationDto | ILocationDto[] | undefined): languages.Location | languages.Location[] | undefined {\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t} else if (Array.isArray(data)) {\n\t\t\tdata.forEach(l => MainThreadLanguageFeatures._reviveLocationDto(l));\n\t\t\treturn <languages.Location[]>data;\n\t\t} else {\n\t\t\tdata.uri = URI.revive(data.uri);\n\t\t\treturn <languages.Location>data;\n\t\t}\n\t}\n\n\tprivate static _reviveLocationLinkDto(data: ILocationLinkDto): languages.LocationLink;\n\tprivate static _reviveLocationLinkDto(data: ILocationLinkDto[]): languages.LocationLink[];\n\tprivate static _reviveLocationLinkDto(data: ILocationLinkDto | ILocationLinkDto[]): languages.LocationLink | languages.LocationLink[] {\n\t\tif (!data) {\n\t\t\treturn <languages.LocationLink>data;\n\t\t} else if (Array.isArray(data)) {\n\t\t\tdata.forEach(l => MainThreadLanguageFeatures._reviveLocationLinkDto(l));\n\t\t\treturn <languages.LocationLink[]>data;\n\t\t} else {\n\t\t\tdata.uri = URI.revive(data.uri);\n\t\t\treturn <languages.LocationLink>data;\n\t\t}\n\t}\n\n\tprivate static _reviveWorkspaceSymbolDto(data: IWorkspaceSymbolDto): search.IWorkspaceSymbol;\n\tprivate static _reviveWorkspaceSymbolDto(data: IWorkspaceSymbolDto[]): search.IWorkspaceSymbol[];\n\tprivate static _reviveWorkspaceSymbolDto(data: undefined): undefined;\n\tprivate static _reviveWorkspaceSymbolDto(data: IWorkspaceSymbolDto | IWorkspaceSymbolDto[] | undefined): search.IWorkspaceSymbol | search.IWorkspaceSymbol[] | undefined {\n\t\tif (!data) {\n\t\t\treturn <undefined>data;\n\t\t} else if (Array.isArray(data)) {\n\t\t\tdata.forEach(MainThreadLanguageFeatures._reviveWorkspaceSymbolDto);\n\t\t\treturn <search.IWorkspaceSymbol[]>data;\n\t\t} else {\n\t\t\tdata.location = MainThreadLanguageFeatures._reviveLocationDto(data.location);\n\t\t\treturn <search.IWorkspaceSymbol>data;\n\t\t}\n\t}\n\n\tprivate static _reviveCodeActionDto(data: ReadonlyArray<ICodeActionDto>, uriIdentService: IUriIdentityService): languages.CodeAction[] {\n\t\tdata?.forEach(code => reviveWorkspaceEditDto(code.edit, uriIdentService));\n\t\treturn <languages.CodeAction[]>data;\n\t}\n\n\tprivate static _reviveLinkDTO(data: ILinkDto): languages.ILink {\n\t\tif (data.url && typeof data.url !== 'string') {\n\t\t\tdata.url = URI.revive(data.url);\n\t\t}\n\t\treturn <languages.ILink>data;\n\t}\n\n\tprivate static _reviveCallHierarchyItemDto(data: ICallHierarchyItemDto | undefined): callh.CallHierarchyItem {\n\t\tif (data) {\n\t\t\tdata.uri = URI.revive(data.uri);\n\t\t}\n\t\treturn data as callh.CallHierarchyItem;\n\t}\n\n\tprivate static _reviveTypeHierarchyItemDto(data: ITypeHierarchyItemDto | undefined): typeh.TypeHierarchyItem {\n\t\tif (data) {\n\t\t\tdata.uri = URI.revive(data.uri);\n\t\t}\n\t\treturn data as typeh.TypeHierarchyItem;\n\t}\n\n\t//#endregion\n\n\t// --- outline\n\n\t$registerDocumentSymbolProvider(handle: number, selector: IDocumentFilterDto[], displayName: string): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentSymbolProvider.register(selector, {\n\t\t\tdisplayName,\n\t\t\tprovideDocumentSymbols: (model: ITextModel, token: CancellationToken): Promise<languages.DocumentSymbol[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideDocumentSymbols(handle, model.uri, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- code lens\n\n\t$registerCodeLensSupport(handle: number, selector: IDocumentFilterDto[], eventHandle: number | undefined): void {\n\n\t\tconst provider: languages.CodeLensProvider = {\n\t\t\tprovideCodeLenses: async (model: ITextModel, token: CancellationToken): Promise<languages.CodeLensList | undefined> => {\n\t\t\t\tconst listDto = await this._proxy.$provideCodeLenses(handle, model.uri, token);\n\t\t\t\tif (!listDto) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tlenses: listDto.lenses,\n\t\t\t\t\tdispose: () => listDto.cacheId && this._proxy.$releaseCodeLenses(handle, listDto.cacheId)\n\t\t\t\t};\n\t\t\t},\n\t\t\tresolveCodeLens: async (model: ITextModel, codeLens: languages.CodeLens, token: CancellationToken): Promise<languages.CodeLens | undefined> => {\n\t\t\t\tconst result = await this._proxy.$resolveCodeLens(handle, codeLens, token);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...result,\n\t\t\t\t\trange: model.validateRange(result.range),\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<languages.CodeLensProvider>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tprovider.onDidChange = emitter.event;\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.codeLensProvider.register(selector, provider));\n\t}\n\n\t$emitCodeLensEvent(eventHandle: number, event?: any): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(event);\n\t\t}\n\t}\n\n\t// --- declaration\n\n\t$registerDefinitionSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.definitionProvider.register(selector, {\n\t\t\tprovideDefinition: (model, position, token): Promise<languages.LocationLink[]> => {\n\t\t\t\treturn this._proxy.$provideDefinition(handle, model.uri, position, token).then(MainThreadLanguageFeatures._reviveLocationLinkDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerDeclarationSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.declarationProvider.register(selector, {\n\t\t\tprovideDeclaration: (model, position, token) => {\n\t\t\t\treturn this._proxy.$provideDeclaration(handle, model.uri, position, token).then(MainThreadLanguageFeatures._reviveLocationLinkDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerImplementationSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.implementationProvider.register(selector, {\n\t\t\tprovideImplementation: (model, position, token): Promise<languages.LocationLink[]> => {\n\t\t\t\treturn this._proxy.$provideImplementation(handle, model.uri, position, token).then(MainThreadLanguageFeatures._reviveLocationLinkDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerTypeDefinitionSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.typeDefinitionProvider.register(selector, {\n\t\t\tprovideTypeDefinition: (model, position, token): Promise<languages.LocationLink[]> => {\n\t\t\t\treturn this._proxy.$provideTypeDefinition(handle, model.uri, position, token).then(MainThreadLanguageFeatures._reviveLocationLinkDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- extra info\n\n\t$registerHoverProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\t/*\n\t\tconst hoverFinalizationRegistry = new FinalizationRegistry((hoverId: number) => {\n\t\t\tthis._proxy.$releaseHover(handle, hoverId);\n\t\t});\n\t\t*/\n\t\tthis._registrations.set(handle, this._languageFeaturesService.hoverProvider.register(selector, {\n\t\t\tprovideHover: async (model: ITextModel, position: EditorPosition, token: CancellationToken, context?: languages.HoverContext<HoverWithId>): Promise<HoverWithId | undefined> => {\n\t\t\t\tconst serializedContext: languages.HoverContext<{ id: number }> = {\n\t\t\t\t\tverbosityRequest: context?.verbosityRequest ? {\n\t\t\t\t\t\tverbosityDelta: context.verbosityRequest.verbosityDelta,\n\t\t\t\t\t\tpreviousHover: { id: context.verbosityRequest.previousHover.id }\n\t\t\t\t\t} : undefined,\n\t\t\t\t};\n\t\t\t\tconst hover = await this._proxy.$provideHover(handle, model.uri, position, serializedContext, token);\n\t\t\t\t// hoverFinalizationRegistry.register(hover, hover.id);\n\t\t\t\treturn hover;\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- debug hover\n\n\t$registerEvaluatableExpressionProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.evaluatableExpressionProvider.register(selector, {\n\t\t\tprovideEvaluatableExpression: (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.EvaluatableExpression | undefined> => {\n\t\t\t\treturn this._proxy.$provideEvaluatableExpression(handle, model.uri, position, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- inline values\n\n\t$registerInlineValuesProvider(handle: number, selector: IDocumentFilterDto[], eventHandle: number | undefined): void {\n\t\tconst provider: languages.InlineValuesProvider = {\n\t\t\tprovideInlineValues: (model: ITextModel, viewPort: EditorRange, context: languages.InlineValueContext, token: CancellationToken): Promise<languages.InlineValue[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideInlineValues(handle, model.uri, viewPort, context, token);\n\t\t\t}\n\t\t};\n\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tprovider.onDidChangeInlineValues = emitter.event;\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.inlineValuesProvider.register(selector, provider));\n\t}\n\n\t$emitInlineValuesEvent(eventHandle: number, event?: any): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(event);\n\t\t}\n\t}\n\n\t// --- occurrences\n\n\t$registerDocumentHighlightProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentHighlightProvider.register(selector, {\n\t\t\tprovideDocumentHighlights: (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.DocumentHighlight[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideDocumentHighlights(handle, model.uri, position, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerMultiDocumentHighlightProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.multiDocumentHighlightProvider.register(selector, {\n\t\t\tselector: selector,\n\t\t\tprovideMultiDocumentHighlights: (model: ITextModel, position: EditorPosition, otherModels: ITextModel[], token: CancellationToken): Promise<Map<URI, languages.DocumentHighlight[]> | undefined> => {\n\t\t\t\treturn this._proxy.$provideMultiDocumentHighlights(handle, model.uri, position, otherModels.map(model => model.uri), token).then(dto => {\n\t\t\t\t\t// dto should be non-null + non-undefined\n\t\t\t\t\t// dto length of 0 is valid, just no highlights, pass this through.\n\t\t\t\t\tif (dto === undefined || dto === null) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\tconst result = new ResourceMap<languages.DocumentHighlight[]>();\n\t\t\t\t\tdto?.forEach(value => {\n\t\t\t\t\t\t// check if the URI exists already, if so, combine the highlights, otherwise create a new entry\n\t\t\t\t\t\tconst uri = URI.revive(value.uri);\n\t\t\t\t\t\tif (result.has(uri)) {\n\t\t\t\t\t\t\tresult.get(uri)!.push(...value.highlights);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.set(uri, value.highlights);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn result;\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- linked editing\n\n\t$registerLinkedEditingRangeProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.linkedEditingRangeProvider.register(selector, {\n\t\t\tprovideLinkedEditingRanges: async (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.LinkedEditingRanges | undefined> => {\n\t\t\t\tconst res = await this._proxy.$provideLinkedEditingRanges(handle, model.uri, position, token);\n\t\t\t\tif (res) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tranges: res.ranges,\n\t\t\t\t\t\twordPattern: res.wordPattern ? MainThreadLanguageFeatures._reviveRegExp(res.wordPattern) : undefined\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- references\n\n\t$registerReferenceSupport(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.referenceProvider.register(selector, {\n\t\t\tprovideReferences: (model: ITextModel, position: EditorPosition, context: languages.ReferenceContext, token: CancellationToken): Promise<languages.Location[]> => {\n\t\t\t\treturn this._proxy.$provideReferences(handle, model.uri, position, context, token).then(MainThreadLanguageFeatures._reviveLocationDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- code actions\n\n\t$registerCodeActionSupport(handle: number, selector: IDocumentFilterDto[], metadata: ICodeActionProviderMetadataDto, displayName: string, extensionId: string, supportsResolve: boolean): void {\n\t\tconst provider: languages.CodeActionProvider = {\n\t\t\tprovideCodeActions: async (model: ITextModel, rangeOrSelection: EditorRange | Selection, context: languages.CodeActionContext, token: CancellationToken): Promise<languages.CodeActionList | undefined> => {\n\t\t\t\tconst listDto = await this._proxy.$provideCodeActions(handle, model.uri, rangeOrSelection, context, token);\n\t\t\t\tif (!listDto) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tactions: MainThreadLanguageFeatures._reviveCodeActionDto(listDto.actions, this._uriIdentService),\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tif (typeof listDto.cacheId === 'number') {\n\t\t\t\t\t\t\tthis._proxy.$releaseCodeActions(handle, listDto.cacheId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t\tprovidedCodeActionKinds: metadata.providedKinds,\n\t\t\tdocumentation: metadata.documentation,\n\t\t\tdisplayName,\n\t\t\textensionId,\n\t\t};\n\n\t\tif (supportsResolve) {\n\t\t\tprovider.resolveCodeAction = async (codeAction: languages.CodeAction, token: CancellationToken): Promise<languages.CodeAction> => {\n\t\t\t\tconst resolved = await this._proxy.$resolveCodeAction(handle, (<ICodeActionDto>codeAction).cacheId!, token);\n\t\t\t\tif (resolved.edit) {\n\t\t\t\t\tcodeAction.edit = reviveWorkspaceEditDto(resolved.edit, this._uriIdentService);\n\t\t\t\t}\n\n\t\t\t\tif (resolved.command) {\n\t\t\t\t\tcodeAction.command = resolved.command;\n\t\t\t\t}\n\n\t\t\t\treturn codeAction;\n\t\t\t};\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.codeActionProvider.register(selector, provider));\n\t}\n\n\t// --- copy paste action provider\n\n\tprivate readonly _pasteEditProviders = new Map<number, MainThreadPasteEditProvider>();\n\n\t$registerPasteEditProvider(handle: number, selector: IDocumentFilterDto[], metadata: IPasteEditProviderMetadataDto): void {\n\t\tconst provider = new MainThreadPasteEditProvider(handle, this._proxy, metadata, this._uriIdentService);\n\t\tthis._pasteEditProviders.set(handle, provider);\n\t\tthis._registrations.set(handle, combinedDisposable(\n\t\t\tthis._languageFeaturesService.documentPasteEditProvider.register(selector, provider),\n\t\t\ttoDisposable(() => this._pasteEditProviders.delete(handle)),\n\t\t));\n\t}\n\n\t$resolvePasteFileData(handle: number, requestId: number, dataId: string): Promise<VSBuffer> {\n\t\tconst provider = this._pasteEditProviders.get(handle);\n\t\tif (!provider) {\n\t\t\tthrow new Error('Could not find provider');\n\t\t}\n\t\treturn provider.resolveFileData(requestId, dataId);\n\t}\n\n\t// --- formatting\n\n\t$registerDocumentFormattingSupport(handle: number, selector: IDocumentFilterDto[], extensionId: ExtensionIdentifier, displayName: string): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentFormattingEditProvider.register(selector, <languages.DocumentFormattingEditProvider>{\n\t\t\textensionId,\n\t\t\tdisplayName,\n\t\t\tprovideDocumentFormattingEdits: (model: ITextModel, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideDocumentFormattingEdits(handle, model.uri, options, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$registerRangeFormattingSupport(handle: number, selector: IDocumentFilterDto[], extensionId: ExtensionIdentifier, displayName: string, supportsRanges: boolean): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentRangeFormattingEditProvider.register(selector, <languages.DocumentRangeFormattingEditProvider>{\n\t\t\textensionId,\n\t\t\tdisplayName,\n\t\t\tprovideDocumentRangeFormattingEdits: (model: ITextModel, range: EditorRange, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideDocumentRangeFormattingEdits(handle, model.uri, range, options, token);\n\t\t\t},\n\t\t\tprovideDocumentRangesFormattingEdits: !supportsRanges\n\t\t\t\t? undefined\n\t\t\t\t: (model, ranges, options, token) => {\n\t\t\t\t\treturn this._proxy.$provideDocumentRangesFormattingEdits(handle, model.uri, ranges, options, token);\n\t\t\t\t},\n\t\t}));\n\t}\n\n\t$registerOnTypeFormattingSupport(handle: number, selector: IDocumentFilterDto[], autoFormatTriggerCharacters: string[], extensionId: ExtensionIdentifier): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.onTypeFormattingEditProvider.register(selector, <languages.OnTypeFormattingEditProvider>{\n\t\t\textensionId,\n\t\t\tautoFormatTriggerCharacters,\n\t\t\tprovideOnTypeFormattingEdits: (model: ITextModel, position: EditorPosition, ch: string, options: languages.FormattingOptions, token: CancellationToken): Promise<ISingleEditOperation[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideOnTypeFormattingEdits(handle, model.uri, position, ch, options, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- navigate type\n\n\t$registerNavigateTypeSupport(handle: number, supportsResolve: boolean): void {\n\t\tlet lastResultId: number | undefined;\n\n\t\tconst provider: search.IWorkspaceSymbolProvider = {\n\t\t\tprovideWorkspaceSymbols: async (search: string, token: CancellationToken): Promise<search.IWorkspaceSymbol[]> => {\n\t\t\t\tconst result = await this._proxy.$provideWorkspaceSymbols(handle, search, token);\n\t\t\t\tif (lastResultId !== undefined) {\n\t\t\t\t\tthis._proxy.$releaseWorkspaceSymbols(handle, lastResultId);\n\t\t\t\t}\n\t\t\t\tlastResultId = result.cacheId;\n\t\t\t\treturn MainThreadLanguageFeatures._reviveWorkspaceSymbolDto(result.symbols);\n\t\t\t}\n\t\t};\n\t\tif (supportsResolve) {\n\t\t\tprovider.resolveWorkspaceSymbol = async (item: search.IWorkspaceSymbol, token: CancellationToken): Promise<search.IWorkspaceSymbol | undefined> => {\n\t\t\t\tconst resolvedItem = await this._proxy.$resolveWorkspaceSymbol(handle, item, token);\n\t\t\t\treturn resolvedItem && MainThreadLanguageFeatures._reviveWorkspaceSymbolDto(resolvedItem);\n\t\t\t};\n\t\t}\n\t\tthis._registrations.set(handle, search.WorkspaceSymbolProviderRegistry.register(provider));\n\t}\n\n\t// --- rename\n\n\t$registerRenameSupport(handle: number, selector: IDocumentFilterDto[], supportResolveLocation: boolean): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.renameProvider.register(selector, {\n\t\t\tprovideRenameEdits: (model: ITextModel, position: EditorPosition, newName: string, token: CancellationToken) => {\n\t\t\t\treturn this._proxy.$provideRenameEdits(handle, model.uri, position, newName, token).then(data => reviveWorkspaceEditDto(data, this._uriIdentService));\n\t\t\t},\n\t\t\tresolveRenameLocation: supportResolveLocation\n\t\t\t\t? (model: ITextModel, position: EditorPosition, token: CancellationToken): Promise<languages.RenameLocation | undefined> => this._proxy.$resolveRenameLocation(handle, model.uri, position, token)\n\t\t\t\t: undefined\n\t\t}));\n\t}\n\n\t$registerNewSymbolNamesProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.newSymbolNamesProvider.register(selector, {\n\t\t\tsupportsAutomaticNewSymbolNamesTriggerKind: this._proxy.$supportsAutomaticNewSymbolNamesTriggerKind(handle),\n\t\t\tprovideNewSymbolNames: (model: ITextModel, range: IRange, triggerKind: languages.NewSymbolNameTriggerKind, token: CancellationToken): Promise<languages.NewSymbolName[] | undefined> => {\n\t\t\t\treturn this._proxy.$provideNewSymbolNames(handle, model.uri, range, triggerKind, token);\n\t\t\t}\n\t\t} satisfies languages.NewSymbolNamesProvider));\n\t}\n\n\t// --- semantic tokens\n\n\t$registerDocumentSemanticTokensProvider(handle: number, selector: IDocumentFilterDto[], legend: languages.SemanticTokensLegend, eventHandle: number | undefined): void {\n\t\tlet event: Event<void> | undefined = undefined;\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tevent = emitter.event;\n\t\t}\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentSemanticTokensProvider.register(selector, new MainThreadDocumentSemanticTokensProvider(this._proxy, handle, legend, event)));\n\t}\n\n\t$emitDocumentSemanticTokensEvent(eventHandle: number): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(undefined);\n\t\t}\n\t}\n\n\t$registerDocumentRangeSemanticTokensProvider(handle: number, selector: IDocumentFilterDto[], legend: languages.SemanticTokensLegend): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.documentRangeSemanticTokensProvider.register(selector, new MainThreadDocumentRangeSemanticTokensProvider(this._proxy, handle, legend)));\n\t}\n\n\t// --- suggest\n\n\tprivate static _inflateSuggestDto(defaultRange: IRange | { insert: IRange; replace: IRange }, data: ISuggestDataDto, extensionId: ExtensionIdentifier): languages.CompletionItem {\n\n\t\tconst label = data[ISuggestDataDtoField.label];\n\t\tconst commandId = data[ISuggestDataDtoField.commandId];\n\t\tconst commandIdent = data[ISuggestDataDtoField.commandIdent];\n\t\tconst commitChars = data[ISuggestDataDtoField.commitCharacters];\n\n\t\treturn {\n\t\t\tlabel,\n\t\t\textensionId,\n\t\t\tkind: data[ISuggestDataDtoField.kind] ?? languages.CompletionItemKind.Property,\n\t\t\ttags: data[ISuggestDataDtoField.kindModifier],\n\t\t\tdetail: data[ISuggestDataDtoField.detail],\n\t\t\tdocumentation: data[ISuggestDataDtoField.documentation],\n\t\t\tsortText: data[ISuggestDataDtoField.sortText],\n\t\t\tfilterText: data[ISuggestDataDtoField.filterText],\n\t\t\tpreselect: data[ISuggestDataDtoField.preselect],\n\t\t\tinsertText: data[ISuggestDataDtoField.insertText] ?? (typeof label === 'string' ? label : label.label),\n\t\t\trange: data[ISuggestDataDtoField.range] ?? defaultRange,\n\t\t\tinsertTextRules: data[ISuggestDataDtoField.insertTextRules],\n\t\t\tcommitCharacters: commitChars ? Array.from(commitChars) : undefined,\n\t\t\tadditionalTextEdits: data[ISuggestDataDtoField.additionalTextEdits],\n\t\t\tcommand: commandId ? {\n\t\t\t\t$ident: commandIdent,\n\t\t\t\tid: commandId,\n\t\t\t\ttitle: '',\n\t\t\t\targuments: commandIdent ? [commandIdent] : data[ISuggestDataDtoField.commandArguments], // Automatically fill in ident as first argument\n\t\t\t} as languages.Command : undefined,\n\t\t\t// not-standard\n\t\t\t_id: data.x,\n\t\t};\n\t}\n\n\t$registerCompletionsProvider(handle: number, selector: IDocumentFilterDto[], triggerCharacters: string[], supportsResolveDetails: boolean, extensionId: ExtensionIdentifier): void {\n\t\tconst provider: languages.CompletionItemProvider = {\n\t\t\ttriggerCharacters,\n\t\t\t_debugDisplayName: `${extensionId.value}(${triggerCharacters.join('')})`,\n\t\t\tprovideCompletionItems: async (model: ITextModel, position: EditorPosition, context: languages.CompletionContext, token: CancellationToken): Promise<languages.CompletionList | undefined> => {\n\t\t\t\tconst result = await this._proxy.$provideCompletionItems(handle, model.uri, position, context, token);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: result[ISuggestResultDtoField.completions].map(d => MainThreadLanguageFeatures._inflateSuggestDto(result[ISuggestResultDtoField.defaultRanges], d, extensionId)),\n\t\t\t\t\tincomplete: result[ISuggestResultDtoField.isIncomplete] || false,\n\t\t\t\t\tduration: result[ISuggestResultDtoField.duration],\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tif (typeof result.x === 'number') {\n\t\t\t\t\t\t\tthis._proxy.$releaseCompletionItems(handle, result.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tif (supportsResolveDetails) {\n\t\t\tprovider.resolveCompletionItem = (suggestion, token) => {\n\t\t\t\treturn this._proxy.$resolveCompletionItem(handle, suggestion._id!, token).then(result => {\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\treturn suggestion;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newSuggestion = MainThreadLanguageFeatures._inflateSuggestDto(suggestion.range, result, extensionId);\n\t\t\t\t\treturn mixin(suggestion, newSuggestion, true);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\tthis._registrations.set(handle, this._languageFeaturesService.completionProvider.register(selector, provider));\n\t}\n\n\t$registerInlineCompletionsSupport(handle: number, selector: IDocumentFilterDto[], supportsHandleEvents: boolean, extensionId: string, yieldsToExtensionIds: string[]): void {\n\t\tconst provider: languages.InlineCompletionsProvider<IdentifiableInlineCompletions> = {\n\t\t\tprovideInlineCompletions: async (model: ITextModel, position: EditorPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<IdentifiableInlineCompletions | undefined> => {\n\t\t\t\treturn this._proxy.$provideInlineCompletions(handle, model.uri, position, context, token);\n\t\t\t},\n\t\t\tprovideInlineEditsForRange: async (model: ITextModel, range: EditorRange, context: languages.InlineCompletionContext, token: CancellationToken): Promise<IdentifiableInlineCompletions | undefined> => {\n\t\t\t\treturn this._proxy.$provideInlineEditsForRange(handle, model.uri, range, context, token);\n\t\t\t},\n\t\t\thandleItemDidShow: async (completions: IdentifiableInlineCompletions, item: IdentifiableInlineCompletion, updatedInsertText: string): Promise<void> => {\n\t\t\t\tif (supportsHandleEvents) {\n\t\t\t\t\tawait this._proxy.$handleInlineCompletionDidShow(handle, completions.pid, item.idx, updatedInsertText);\n\t\t\t\t}\n\t\t\t},\n\t\t\thandlePartialAccept: async (completions, item, acceptedCharacters, info: languages.PartialAcceptInfo): Promise<void> => {\n\t\t\t\tif (supportsHandleEvents) {\n\t\t\t\t\tawait this._proxy.$handleInlineCompletionPartialAccept(handle, completions.pid, item.idx, acceptedCharacters, info);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfreeInlineCompletions: (completions: IdentifiableInlineCompletions): void => {\n\t\t\t\tthis._proxy.$freeInlineCompletionsList(handle, completions.pid);\n\t\t\t},\n\t\t\tgroupId: extensionId,\n\t\t\tyieldsToGroupIds: yieldsToExtensionIds,\n\t\t\ttoString() {\n\t\t\t\treturn `InlineCompletionsProvider(${extensionId})`;\n\t\t\t}\n\t\t};\n\t\tthis._registrations.set(handle, this._languageFeaturesService.inlineCompletionsProvider.register(selector, provider));\n\t}\n\n\t$registerInlineEditProvider(handle: number, selector: IDocumentFilterDto[], extensionId: ExtensionIdentifier): void {\n\t\tconst provider: languages.InlineEditProvider<IdentifiableInlineEdit> = {\n\t\t\tprovideInlineEdit: async (model: ITextModel, context: languages.IInlineEditContext, token: CancellationToken): Promise<IdentifiableInlineEdit | undefined> => {\n\t\t\t\treturn this._proxy.$provideInlineEdit(handle, model.uri, context, token);\n\t\t\t},\n\t\t\tfreeInlineEdit: (edit: IdentifiableInlineEdit): void => {\n\t\t\t\tthis._proxy.$freeInlineEdit(handle, edit.pid);\n\t\t\t}\n\n\t\t};\n\t\tthis._registrations.set(handle, this._languageFeaturesService.inlineEditProvider.register(selector, provider));\n\t}\n\n\t// --- parameter hints\n\n\t$registerSignatureHelpProvider(handle: number, selector: IDocumentFilterDto[], metadata: ISignatureHelpProviderMetadataDto): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.signatureHelpProvider.register(selector, {\n\n\t\t\tsignatureHelpTriggerCharacters: metadata.triggerCharacters,\n\t\t\tsignatureHelpRetriggerCharacters: metadata.retriggerCharacters,\n\n\t\t\tprovideSignatureHelp: async (model: ITextModel, position: EditorPosition, token: CancellationToken, context: languages.SignatureHelpContext): Promise<languages.SignatureHelpResult | undefined> => {\n\t\t\t\tconst result = await this._proxy.$provideSignatureHelp(handle, model.uri, position, context, token);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tvalue: result,\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tthis._proxy.$releaseSignatureHelp(handle, result.id);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- inline hints\n\n\t$registerInlayHintsProvider(handle: number, selector: IDocumentFilterDto[], supportsResolve: boolean, eventHandle: number | undefined, displayName: string | undefined): void {\n\t\tconst provider: languages.InlayHintsProvider = {\n\t\t\tdisplayName,\n\t\t\tprovideInlayHints: async (model: ITextModel, range: EditorRange, token: CancellationToken): Promise<languages.InlayHintList | undefined> => {\n\t\t\t\tconst result = await this._proxy.$provideInlayHints(handle, model.uri, range, token);\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\thints: revive(result.hints),\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tif (result.cacheId) {\n\t\t\t\t\t\t\tthis._proxy.$releaseInlayHints(handle, result.cacheId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tif (supportsResolve) {\n\t\t\tprovider.resolveInlayHint = async (hint, token) => {\n\t\t\t\tconst dto: IInlayHintDto = hint;\n\t\t\t\tif (!dto.cacheId) {\n\t\t\t\t\treturn hint;\n\t\t\t\t}\n\t\t\t\tconst result = await this._proxy.$resolveInlayHint(handle, dto.cacheId, token);\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t}\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn hint;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...hint,\n\t\t\t\t\ttooltip: result.tooltip,\n\t\t\t\t\tlabel: revive<string | languages.InlayHintLabelPart[]>(result.label),\n\t\t\t\t\ttextEdits: result.textEdits\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<void>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tprovider.onDidChangeInlayHints = emitter.event;\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.inlayHintsProvider.register(selector, provider));\n\t}\n\n\t$emitInlayHintsEvent(eventHandle: number): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(undefined);\n\t\t}\n\t}\n\n\t// --- links\n\n\t$registerDocumentLinkProvider(handle: number, selector: IDocumentFilterDto[], supportsResolve: boolean): void {\n\t\tconst provider: languages.LinkProvider = {\n\t\t\tprovideLinks: (model, token) => {\n\t\t\t\treturn this._proxy.$provideDocumentLinks(handle, model.uri, token).then(dto => {\n\t\t\t\t\tif (!dto) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlinks: dto.links.map(MainThreadLanguageFeatures._reviveLinkDTO),\n\t\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\t\tif (typeof dto.cacheId === 'number') {\n\t\t\t\t\t\t\t\tthis._proxy.$releaseDocumentLinks(handle, dto.cacheId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tif (supportsResolve) {\n\t\t\tprovider.resolveLink = (link, token) => {\n\t\t\t\tconst dto: ILinkDto = link;\n\t\t\t\tif (!dto.cacheId) {\n\t\t\t\t\treturn link;\n\t\t\t\t}\n\t\t\t\treturn this._proxy.$resolveDocumentLink(handle, dto.cacheId, token).then(obj => {\n\t\t\t\t\treturn obj && MainThreadLanguageFeatures._reviveLinkDTO(obj);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\tthis._registrations.set(handle, this._languageFeaturesService.linkProvider.register(selector, provider));\n\t}\n\n\t// --- colors\n\n\t$registerDocumentColorProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tconst proxy = this._proxy;\n\t\tthis._registrations.set(handle, this._languageFeaturesService.colorProvider.register(selector, {\n\t\t\tprovideDocumentColors: (model, token) => {\n\t\t\t\treturn proxy.$provideDocumentColors(handle, model.uri, token)\n\t\t\t\t\t.then(documentColors => {\n\t\t\t\t\t\treturn documentColors.map(documentColor => {\n\t\t\t\t\t\t\tconst [red, green, blue, alpha] = documentColor.color;\n\t\t\t\t\t\t\tconst color = {\n\t\t\t\t\t\t\t\tred: red,\n\t\t\t\t\t\t\t\tgreen: green,\n\t\t\t\t\t\t\t\tblue: blue,\n\t\t\t\t\t\t\t\talpha\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t\t\trange: documentColor.range\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t},\n\n\t\t\tprovideColorPresentations: (model, colorInfo, token) => {\n\t\t\t\treturn proxy.$provideColorPresentations(handle, model.uri, {\n\t\t\t\t\tcolor: [colorInfo.color.red, colorInfo.color.green, colorInfo.color.blue, colorInfo.color.alpha],\n\t\t\t\t\trange: colorInfo.range\n\t\t\t\t}, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- folding\n\n\t$registerFoldingRangeProvider(handle: number, selector: IDocumentFilterDto[], extensionId: ExtensionIdentifier, eventHandle: number | undefined): void {\n\t\tconst provider: languages.FoldingRangeProvider = {\n\t\t\tid: extensionId.value,\n\t\t\tprovideFoldingRanges: (model, context, token) => {\n\t\t\t\treturn this._proxy.$provideFoldingRanges(handle, model.uri, context, token);\n\t\t\t}\n\t\t};\n\n\t\tif (typeof eventHandle === 'number') {\n\t\t\tconst emitter = new Emitter<languages.FoldingRangeProvider>();\n\t\t\tthis._registrations.set(eventHandle, emitter);\n\t\t\tprovider.onDidChange = emitter.event;\n\t\t}\n\n\t\tthis._registrations.set(handle, this._languageFeaturesService.foldingRangeProvider.register(selector, provider));\n\t}\n\n\t$emitFoldingRangeEvent(eventHandle: number, event?: any): void {\n\t\tconst obj = this._registrations.get(eventHandle);\n\t\tif (obj instanceof Emitter) {\n\t\t\tobj.fire(event);\n\t\t}\n\t}\n\n\t// -- smart select\n\n\t$registerSelectionRangeProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, this._languageFeaturesService.selectionRangeProvider.register(selector, {\n\t\t\tprovideSelectionRanges: (model, positions, token) => {\n\t\t\t\treturn this._proxy.$provideSelectionRanges(handle, model.uri, positions, token);\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- call hierarchy\n\n\t$registerCallHierarchyProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, callh.CallHierarchyProviderRegistry.register(selector, {\n\n\t\t\tprepareCallHierarchy: async (document, position, token) => {\n\t\t\t\tconst items = await this._proxy.$prepareCallHierarchy(handle, document.uri, position, token);\n\t\t\t\tif (!items || items.length === 0) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tfor (const item of items) {\n\t\t\t\t\t\t\tthis._proxy.$releaseCallHierarchy(handle, item._sessionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\troots: items.map(MainThreadLanguageFeatures._reviveCallHierarchyItemDto)\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprovideOutgoingCalls: async (item, token) => {\n\t\t\t\tconst outgoing = await this._proxy.$provideCallHierarchyOutgoingCalls(handle, item._sessionId, item._itemId, token);\n\t\t\t\tif (!outgoing) {\n\t\t\t\t\treturn outgoing;\n\t\t\t\t}\n\t\t\t\toutgoing.forEach(value => {\n\t\t\t\t\tvalue.to = MainThreadLanguageFeatures._reviveCallHierarchyItemDto(value.to);\n\t\t\t\t});\n\t\t\t\treturn <any>outgoing;\n\t\t\t},\n\t\t\tprovideIncomingCalls: async (item, token) => {\n\t\t\t\tconst incoming = await this._proxy.$provideCallHierarchyIncomingCalls(handle, item._sessionId, item._itemId, token);\n\t\t\t\tif (!incoming) {\n\t\t\t\t\treturn incoming;\n\t\t\t\t}\n\t\t\t\tincoming.forEach(value => {\n\t\t\t\t\tvalue.from = MainThreadLanguageFeatures._reviveCallHierarchyItemDto(value.from);\n\t\t\t\t});\n\t\t\t\treturn <any>incoming;\n\t\t\t}\n\t\t}));\n\t}\n\n\t// --- configuration\n\n\tprivate static _reviveRegExp(regExp: IRegExpDto): RegExp {\n\t\treturn new RegExp(regExp.pattern, regExp.flags);\n\t}\n\n\tprivate static _reviveIndentationRule(indentationRule: IIndentationRuleDto): IndentationRule {\n\t\treturn {\n\t\t\tdecreaseIndentPattern: MainThreadLanguageFeatures._reviveRegExp(indentationRule.decreaseIndentPattern),\n\t\t\tincreaseIndentPattern: MainThreadLanguageFeatures._reviveRegExp(indentationRule.increaseIndentPattern),\n\t\t\tindentNextLinePattern: indentationRule.indentNextLinePattern ? MainThreadLanguageFeatures._reviveRegExp(indentationRule.indentNextLinePattern) : undefined,\n\t\t\tunIndentedLinePattern: indentationRule.unIndentedLinePattern ? MainThreadLanguageFeatures._reviveRegExp(indentationRule.unIndentedLinePattern) : undefined,\n\t\t};\n\t}\n\n\tprivate static _reviveOnEnterRule(onEnterRule: IOnEnterRuleDto): OnEnterRule {\n\t\treturn {\n\t\t\tbeforeText: MainThreadLanguageFeatures._reviveRegExp(onEnterRule.beforeText),\n\t\t\tafterText: onEnterRule.afterText ? MainThreadLanguageFeatures._reviveRegExp(onEnterRule.afterText) : undefined,\n\t\t\tpreviousLineText: onEnterRule.previousLineText ? MainThreadLanguageFeatures._reviveRegExp(onEnterRule.previousLineText) : undefined,\n\t\t\taction: onEnterRule.action\n\t\t};\n\t}\n\n\tprivate static _reviveOnEnterRules(onEnterRules: IOnEnterRuleDto[]): OnEnterRule[] {\n\t\treturn onEnterRules.map(MainThreadLanguageFeatures._reviveOnEnterRule);\n\t}\n\n\t$setLanguageConfiguration(handle: number, languageId: string, _configuration: ILanguageConfigurationDto): void {\n\n\t\tconst configuration: LanguageConfiguration = {\n\t\t\tcomments: _configuration.comments,\n\t\t\tbrackets: _configuration.brackets,\n\t\t\twordPattern: _configuration.wordPattern ? MainThreadLanguageFeatures._reviveRegExp(_configuration.wordPattern) : undefined,\n\t\t\tindentationRules: _configuration.indentationRules ? MainThreadLanguageFeatures._reviveIndentationRule(_configuration.indentationRules) : undefined,\n\t\t\tonEnterRules: _configuration.onEnterRules ? MainThreadLanguageFeatures._reviveOnEnterRules(_configuration.onEnterRules) : undefined,\n\n\t\t\tautoClosingPairs: undefined,\n\t\t\tsurroundingPairs: undefined,\n\t\t\t__electricCharacterSupport: undefined\n\t\t};\n\n\t\tif (_configuration.autoClosingPairs) {\n\t\t\tconfiguration.autoClosingPairs = _configuration.autoClosingPairs;\n\t\t} else if (_configuration.__characterPairSupport) {\n\t\t\t// backwards compatibility\n\t\t\tconfiguration.autoClosingPairs = _configuration.__characterPairSupport.autoClosingPairs;\n\t\t}\n\n\t\tif (_configuration.__electricCharacterSupport && _configuration.__electricCharacterSupport.docComment) {\n\t\t\tconfiguration.__electricCharacterSupport = {\n\t\t\t\tdocComment: {\n\t\t\t\t\topen: _configuration.__electricCharacterSupport.docComment.open,\n\t\t\t\t\tclose: _configuration.__electricCharacterSupport.docComment.close\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (this._languageService.isRegisteredLanguageId(languageId)) {\n\t\t\tthis._registrations.set(handle, this._languageConfigurationService.register(languageId, configuration, 100));\n\t\t}\n\t}\n\n\t// --- type hierarchy\n\n\t$registerTypeHierarchyProvider(handle: number, selector: IDocumentFilterDto[]): void {\n\t\tthis._registrations.set(handle, typeh.TypeHierarchyProviderRegistry.register(selector, {\n\n\t\t\tprepareTypeHierarchy: async (document, position, token) => {\n\t\t\t\tconst items = await this._proxy.$prepareTypeHierarchy(handle, document.uri, position, token);\n\t\t\t\tif (!items) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tfor (const item of items) {\n\t\t\t\t\t\t\tthis._proxy.$releaseTypeHierarchy(handle, item._sessionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\troots: items.map(MainThreadLanguageFeatures._reviveTypeHierarchyItemDto)\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprovideSupertypes: async (item, token) => {\n\t\t\t\tconst supertypes = await this._proxy.$provideTypeHierarchySupertypes(handle, item._sessionId, item._itemId, token);\n\t\t\t\tif (!supertypes) {\n\t\t\t\t\treturn supertypes;\n\t\t\t\t}\n\t\t\t\treturn supertypes.map(MainThreadLanguageFeatures._reviveTypeHierarchyItemDto);\n\t\t\t},\n\t\t\tprovideSubtypes: async (item, token) => {\n\t\t\t\tconst subtypes = await this._proxy.$provideTypeHierarchySubtypes(handle, item._sessionId, item._itemId, token);\n\t\t\t\tif (!subtypes) {\n\t\t\t\t\treturn subtypes;\n\t\t\t\t}\n\t\t\t\treturn subtypes.map(MainThreadLanguageFeatures._reviveTypeHierarchyItemDto);\n\t\t\t}\n\t\t}));\n\t}\n\n\n\t// --- document drop Edits\n\n\tprivate readonly _documentOnDropEditProviders = new Map<number, MainThreadDocumentOnDropEditProvider>();\n\n\t$registerDocumentOnDropEditProvider(handle: number, selector: IDocumentFilterDto[], metadata: IDocumentDropEditProviderMetadata): void {\n\t\tconst provider = new MainThreadDocumentOnDropEditProvider(handle, this._proxy, metadata, this._uriIdentService);\n\t\tthis._documentOnDropEditProviders.set(handle, provider);\n\t\tthis._registrations.set(handle, combinedDisposable(\n\t\t\tthis._languageFeaturesService.documentDropEditProvider.register(selector, provider),\n\t\t\ttoDisposable(() => this._documentOnDropEditProviders.delete(handle)),\n\t\t));\n\t}\n\n\tasync $resolveDocumentOnDropFileData(handle: number, requestId: number, dataId: string): Promise<VSBuffer> {\n\t\tconst provider = this._documentOnDropEditProviders.get(handle);\n\t\tif (!provider) {\n\t\t\tthrow new Error('Could not find provider');\n\t\t}\n\t\treturn provider.resolveDocumentOnDropFileData(requestId, dataId);\n\t}\n\n\t// --- mapped edits\n\n\t$registerMappedEditsProvider(handle: number, selector: IDocumentFilterDto[], displayName: string): void {\n\t\tconst provider = new MainThreadMappedEditsProvider(displayName, handle, this._proxy, this._uriIdentService);\n\t\tthis._registrations.set(handle, this._languageFeaturesService.mappedEditsProvider.register(selector, provider));\n\t}\n}\n\nclass MainThreadPasteEditProvider implements languages.DocumentPasteEditProvider {\n\n\tprivate readonly dataTransfers = new DataTransferFileCache();\n\n\tpublic readonly copyMimeTypes?: readonly string[];\n\tpublic readonly pasteMimeTypes?: readonly string[];\n\tpublic readonly providedPasteEditKinds?: readonly HierarchicalKind[];\n\n\treadonly prepareDocumentPaste?: languages.DocumentPasteEditProvider['prepareDocumentPaste'];\n\treadonly provideDocumentPasteEdits?: languages.DocumentPasteEditProvider['provideDocumentPasteEdits'];\n\treadonly resolveDocumentPasteEdit?: languages.DocumentPasteEditProvider['resolveDocumentPasteEdit'];\n\n\tconstructor(\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tmetadata: IPasteEditProviderMetadataDto,\n\t\t@IUriIdentityService private readonly _uriIdentService: IUriIdentityService\n\t) {\n\t\tthis.copyMimeTypes = metadata.copyMimeTypes;\n\t\tthis.pasteMimeTypes = metadata.pasteMimeTypes;\n\t\tthis.providedPasteEditKinds = metadata.providedPasteEditKinds?.map(kind => new HierarchicalKind(kind));\n\n\t\tif (metadata.supportsCopy) {\n\t\t\tthis.prepareDocumentPaste = async (model: ITextModel, selections: readonly IRange[], dataTransfer: IReadonlyVSDataTransfer, token: CancellationToken): Promise<IReadonlyVSDataTransfer | undefined> => {\n\t\t\t\tconst dataTransferDto = await typeConvert.DataTransfer.from(dataTransfer);\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\tconst newDataTransfer = await this._proxy.$prepareDocumentPaste(_handle, model.uri, selections, dataTransferDto, token);\n\t\t\t\tif (!newDataTransfer) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\tconst dataTransferOut = new VSDataTransfer();\n\t\t\t\tfor (const [type, item] of newDataTransfer.items) {\n\t\t\t\t\tdataTransferOut.replace(type, createStringDataTransferItem(item.asString));\n\t\t\t\t}\n\t\t\t\treturn dataTransferOut;\n\t\t\t};\n\t\t}\n\n\t\tif (metadata.supportsPaste) {\n\t\t\tthis.provideDocumentPasteEdits = async (model: ITextModel, selections: Selection[], dataTransfer: IReadonlyVSDataTransfer, context: languages.DocumentPasteContext, token: CancellationToken) => {\n\t\t\t\tconst request = this.dataTransfers.add(dataTransfer);\n\t\t\t\ttry {\n\t\t\t\t\tconst dataTransferDto = await typeConvert.DataTransfer.from(dataTransfer);\n\t\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst edits = await this._proxy.$providePasteEdits(this._handle, request.id, model.uri, selections, dataTransferDto, {\n\t\t\t\t\t\tonly: context.only?.value,\n\t\t\t\t\t\ttriggerKind: context.triggerKind,\n\t\t\t\t\t}, token);\n\t\t\t\t\tif (!edits) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tedits: edits.map((edit): languages.DocumentPasteEdit => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...edit,\n\t\t\t\t\t\t\t\tkind: edit.kind ? new HierarchicalKind(edit.kind.value) : new HierarchicalKind(''),\n\t\t\t\t\t\t\t\tyieldTo: edit.yieldTo?.map(x => ({ kind: new HierarchicalKind(x) })),\n\t\t\t\t\t\t\t\tadditionalEdit: edit.additionalEdit ? reviveWorkspaceEditDto(edit.additionalEdit, this._uriIdentService, dataId => this.resolveFileData(request.id, dataId)) : undefined,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\t\tthis._proxy.$releasePasteEdits(this._handle, request.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t} finally {\n\t\t\t\t\trequest.dispose();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tif (metadata.supportsResolve) {\n\t\t\tthis.resolveDocumentPasteEdit = async (edit: languages.DocumentPasteEdit, token: CancellationToken) => {\n\t\t\t\tconst resolved = await this._proxy.$resolvePasteEdit(this._handle, (<IPasteEditDto>edit)._cacheId!, token);\n\t\t\t\tif (resolved.additionalEdit) {\n\t\t\t\t\tedit.additionalEdit = reviveWorkspaceEditDto(resolved.additionalEdit, this._uriIdentService);\n\t\t\t\t}\n\t\t\t\treturn edit;\n\t\t\t};\n\t\t}\n\t}\n\n\tresolveFileData(requestId: number, dataId: string): Promise<VSBuffer> {\n\t\treturn this.dataTransfers.resolveFileData(requestId, dataId);\n\t}\n}\n\nclass MainThreadDocumentOnDropEditProvider implements languages.DocumentDropEditProvider {\n\n\tprivate readonly dataTransfers = new DataTransferFileCache();\n\n\treadonly dropMimeTypes?: readonly string[];\n\n\treadonly resolveDocumentDropEdit?: languages.DocumentDropEditProvider['resolveDocumentDropEdit'];\n\n\tconstructor(\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tmetadata: IDocumentDropEditProviderMetadata | undefined,\n\t\t@IUriIdentityService private readonly _uriIdentService: IUriIdentityService\n\t) {\n\t\tthis.dropMimeTypes = metadata?.dropMimeTypes ?? ['*/*'];\n\n\t\tif (metadata?.supportsResolve) {\n\t\t\tthis.resolveDocumentDropEdit = async (edit, token) => {\n\t\t\t\tconst resolved = await this._proxy.$resolvePasteEdit(this._handle, (<IDocumentDropEditDto>edit)._cacheId!, token);\n\t\t\t\tif (resolved.additionalEdit) {\n\t\t\t\t\tedit.additionalEdit = reviveWorkspaceEditDto(resolved.additionalEdit, this._uriIdentService);\n\t\t\t\t}\n\t\t\t\treturn edit;\n\t\t\t};\n\t\t}\n\t}\n\n\tasync provideDocumentDropEdits(model: ITextModel, position: IPosition, dataTransfer: IReadonlyVSDataTransfer, token: CancellationToken): Promise<languages.DocumentDropEditsSession | undefined> {\n\t\tconst request = this.dataTransfers.add(dataTransfer);\n\t\ttry {\n\t\t\tconst dataTransferDto = await typeConvert.DataTransfer.from(dataTransfer);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst edits = await this._proxy.$provideDocumentOnDropEdits(this._handle, request.id, model.uri, position, dataTransferDto, token);\n\t\t\tif (!edits) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tedits: edits.map(edit => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...edit,\n\t\t\t\t\t\tyieldTo: edit.yieldTo?.map(x => ({ kind: new HierarchicalKind(x) })),\n\t\t\t\t\t\tkind: edit.kind ? new HierarchicalKind(edit.kind) : undefined,\n\t\t\t\t\t\tadditionalEdit: reviveWorkspaceEditDto(edit.additionalEdit, this._uriIdentService, dataId => this.resolveDocumentOnDropFileData(request.id, dataId)),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\tdispose: () => {\n\t\t\t\t\tthis._proxy.$releaseDocumentOnDropEdits(this._handle, request.id);\n\t\t\t\t},\n\t\t\t};\n\t\t} finally {\n\t\t\trequest.dispose();\n\t\t}\n\t}\n\n\tpublic resolveDocumentOnDropFileData(requestId: number, dataId: string): Promise<VSBuffer> {\n\t\treturn this.dataTransfers.resolveFileData(requestId, dataId);\n\t}\n}\n\nexport class MainThreadDocumentSemanticTokensProvider implements languages.DocumentSemanticTokensProvider {\n\n\tconstructor(\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _legend: languages.SemanticTokensLegend,\n\t\tpublic readonly onDidChange: Event<void> | undefined,\n\t) {\n\t}\n\n\tpublic releaseDocumentSemanticTokens(resultId: string | undefined): void {\n\t\tif (resultId) {\n\t\t\tthis._proxy.$releaseDocumentSemanticTokens(this._handle, parseInt(resultId, 10));\n\t\t}\n\t}\n\n\tpublic getLegend(): languages.SemanticTokensLegend {\n\t\treturn this._legend;\n\t}\n\n\tasync provideDocumentSemanticTokens(model: ITextModel, lastResultId: string | null, token: CancellationToken): Promise<languages.SemanticTokens | languages.SemanticTokensEdits | null> {\n\t\tconst nLastResultId = lastResultId ? parseInt(lastResultId, 10) : 0;\n\t\tconst encodedDto = await this._proxy.$provideDocumentSemanticTokens(this._handle, model.uri, nLastResultId, token);\n\t\tif (!encodedDto) {\n\t\t\treturn null;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn null;\n\t\t}\n\t\tconst dto = decodeSemanticTokensDto(encodedDto);\n\t\tif (dto.type === 'full') {\n\t\t\treturn {\n\t\t\t\tresultId: String(dto.id),\n\t\t\t\tdata: dto.data\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tresultId: String(dto.id),\n\t\t\tedits: dto.deltas\n\t\t};\n\t}\n}\n\nexport class MainThreadDocumentRangeSemanticTokensProvider implements languages.DocumentRangeSemanticTokensProvider {\n\n\tconstructor(\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _legend: languages.SemanticTokensLegend,\n\t) {\n\t}\n\n\tpublic getLegend(): languages.SemanticTokensLegend {\n\t\treturn this._legend;\n\t}\n\n\tasync provideDocumentRangeSemanticTokens(model: ITextModel, range: EditorRange, token: CancellationToken): Promise<languages.SemanticTokens | null> {\n\t\tconst encodedDto = await this._proxy.$provideDocumentRangeSemanticTokens(this._handle, model.uri, range, token);\n\t\tif (!encodedDto) {\n\t\t\treturn null;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn null;\n\t\t}\n\t\tconst dto = decodeSemanticTokensDto(encodedDto);\n\t\tif (dto.type === 'full') {\n\t\t\treturn {\n\t\t\t\tresultId: String(dto.id),\n\t\t\t\tdata: dto.data\n\t\t\t};\n\t\t}\n\t\tthrow new Error(`Unexpected`);\n\t}\n}\n\nexport class MainThreadMappedEditsProvider implements languages.MappedEditsProvider {\n\n\tconstructor(\n\t\tpublic readonly displayName: string,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _proxy: ExtHostLanguageFeaturesShape,\n\t\tprivate readonly _uriService: IUriIdentityService,\n\t) { }\n\n\tasync provideMappedEdits(document: ITextModel, codeBlocks: string[], context: languages.MappedEditsContext, token: CancellationToken): Promise<languages.WorkspaceEdit | null> {\n\t\tconst res = await this._proxy.$provideMappedEdits(this._handle, document.uri, codeBlocks, context, token);\n\t\treturn res ? reviveWorkspaceEditDto(res, this._uriService) : null;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,gBAAgB;AACzB,SAAS,yBAAyB;AAClC,SAAS,8BAA8B,yBAAyB,sBAAsB;AACtF,SAAS,yBAAyB;AAClC,SAAS,SAAS,aAAa;AAC/B,SAAS,wBAAwB;AACjC,SAAS,oBAAoB,YAAY,eAAe,oBAAoB;AAC5E,SAAS,mBAAmB;AAC5B,SAAS,cAAc;AACvB,SAAS,aAAa;AACtB,SAAS,WAAW;AACpB,SAAS,4BAA4B;AACrC,SAAS,YAAY,gBAAgB,iBAAiB;AACtD,SAAS,SAAS,aAAa,cAAc;AAC7C,SAAS,iBAAiB;AAC1B,YAAY,eAAe;AAC3B,SAAS,wBAAwB;AACjC,SAAS,iBAAiB,uBAAuB,mBAAmB;AACpE,SAAS,qCAAqC;AAC9C,SAAS,kBAAkB;AAC3B,SAAS,gCAAgC;AACzC,SAAS,+BAA+B;AACxC,SAAS,2BAA2B;AACpC,SAAS,2BAA2B;AACpC,SAAS,8BAA8B;AACvC,YAAY,iBAAiB;AAC7B,SAAS,6BAA6B;AACtC,YAAY,WAAW;AACvB,YAAY,YAAY;AACxB,YAAY,WAAW;AACvB,SAAS,sBAAsB,uBAAuB;AACtD,SAAS,gBAAgB,8BAA8B,aAAa,uBAAuB,gBAAgB,gCAAgC,8BAA8B,+BAA+B,wBAAwB,sBAAsB,mCAAmC,oBAAoB,qBAAqB,eAAe,2BAA2B,4BAA4B,UAAU,cAAc,kBAAkB,iBAAiB,eAAe,+BAA+B,YAAY,mCAAmC,iBAAiB,sBAAsB,wBAAwB,uBAAuB,qBAAqB,aAAa,uCAAuC;AAGxrB,IAAM,6BAAN,cAAyC,WAAsD;AAAA,EAKrG,YACC,gBACmC,kBACa,+BACL,0BACL,kBACrC;AACD,UAAM;AAL6B;AACa;AACL;AACL;AAItC,SAAK,SAAS,eAAe,SAAS,eAAe,uBAAuB;AAE5E,QAAI,KAAK,kBAAkB;AAC1B,YAAM,2BAA2B,6BAAM;AACtC,cAAM,qBAAmD,CAAC;AAC1D,mBAAW,cAAc,iBAAiB,yBAAyB,GAAG;AACrE,gBAAM,iBAAiB,KAAK,8BAA8B,yBAAyB,UAAU,EAAE,kBAAkB;AACjH,6BAAmB,KAAK;AAAA,YACvB;AAAA,YACA,aAAa,eAAe;AAAA,YAC5B,YAAY,eAAe;AAAA,UAC5B,CAAC;AAAA,QACF;AACA,aAAK,OAAO,oBAAoB,kBAAkB;AAAA,MACnD,GAXiC;AAYjC,WAAK,UAAU,KAAK,8BAA8B,YAAY,CAAC,MAAM;AACpE,YAAI,CAAC,EAAE,YAAY;AAClB,mCAAyB;AAAA,QAC1B,OAAO;AACN,gBAAM,iBAAiB,KAAK,8BAA8B,yBAAyB,EAAE,UAAU,EAAE,kBAAkB;AACnH,eAAK,OAAO,oBAAoB,CAAC;AAAA,YAChC,YAAY,EAAE;AAAA,YACd,aAAa,eAAe;AAAA,YAC5B,YAAY,eAAe;AAAA,UAC5B,CAAC,CAAC;AAAA,QACH;AAAA,MACD,CAAC,CAAC;AACF,+BAAyB;AAAA,IAC1B;AAAA,EACD;AAAA,EAzCiB;AAAA,EACA,iBAAiB,KAAK,UAAU,IAAI,cAAsB,CAAC;AAAA,EA0C5E,YAAY,QAAsB;AACjC,SAAK,eAAe,iBAAiB,MAAM;AAAA,EAC5C;AAAA,EAMA,OAAe,mBAAmB,MAAwG;AACzI,QAAI,CAAC,MAAM;AACV,aAAO;AAAA,IACR,WAAW,MAAM,QAAQ,IAAI,GAAG;AAC/B,WAAK,QAAQ,OAAK,2BAA2B,mBAAmB,CAAC,CAAC;AAClE,aAA6B;AAAA,IAC9B,OAAO;AACN,WAAK,MAAM,IAAI,OAAO,KAAK,GAAG;AAC9B,aAA2B;AAAA,IAC5B;AAAA,EACD;AAAA,EAIA,OAAe,uBAAuB,MAAgG;AACrI,QAAI,CAAC,MAAM;AACV,aAA+B;AAAA,IAChC,WAAW,MAAM,QAAQ,IAAI,GAAG;AAC/B,WAAK,QAAQ,OAAK,2BAA2B,uBAAuB,CAAC,CAAC;AACtE,aAAiC;AAAA,IAClC,OAAO;AACN,WAAK,MAAM,IAAI,OAAO,KAAK,GAAG;AAC9B,aAA+B;AAAA,IAChC;AAAA,EACD;AAAA,EAKA,OAAe,0BAA0B,MAAgI;AACxK,QAAI,CAAC,MAAM;AACV,aAAkB;AAAA,IACnB,WAAW,MAAM,QAAQ,IAAI,GAAG;AAC/B,WAAK,QAAQ,2BAA2B,yBAAyB;AACjE,aAAkC;AAAA,IACnC,OAAO;AACN,WAAK,WAAW,2BAA2B,mBAAmB,KAAK,QAAQ;AAC3E,aAAgC;AAAA,IACjC;AAAA,EACD;AAAA,EAEA,OAAe,qBAAqB,MAAqC,iBAA8D;AACtI,UAAM,QAAQ,UAAQ,uBAAuB,KAAK,MAAM,eAAe,CAAC;AACxE,WAA+B;AAAA,EAChC;AAAA,EAEA,OAAe,eAAe,MAAiC;AAC9D,QAAI,KAAK,OAAO,OAAO,KAAK,QAAQ,UAAU;AAC7C,WAAK,MAAM,IAAI,OAAO,KAAK,GAAG;AAAA,IAC/B;AACA,WAAwB;AAAA,EACzB;AAAA,EAEA,OAAe,4BAA4B,MAAkE;AAC5G,QAAI,MAAM;AACT,WAAK,MAAM,IAAI,OAAO,KAAK,GAAG;AAAA,IAC/B;AACA,WAAO;AAAA,EACR;AAAA,EAEA,OAAe,4BAA4B,MAAkE;AAC5G,QAAI,MAAM;AACT,WAAK,MAAM,IAAI,OAAO,KAAK,GAAG;AAAA,IAC/B;AACA,WAAO;AAAA,EACR;AAAA;AAAA;AAAA,EAMA,gCAAgC,QAAgB,UAAgC,aAA2B;AAC1G,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,uBAAuB,SAAS,UAAU;AAAA,MACvG;AAAA,MACA,wBAAwB,wBAAC,OAAmB,UAA8E;AACzH,eAAO,KAAK,OAAO,wBAAwB,QAAQ,MAAM,KAAK,KAAK;AAAA,MACpE,GAFwB;AAAA,IAGzB,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,yBAAyB,QAAgB,UAAgC,aAAuC;AAE/G,UAAM,WAAuC;AAAA,MAC5C,mBAAmB,8BAAO,OAAmB,UAA0E;AACtH,cAAM,UAAU,MAAM,KAAK,OAAO,mBAAmB,QAAQ,MAAM,KAAK,KAAK;AAC7E,YAAI,CAAC,SAAS;AACb,iBAAO;AAAA,QACR;AACA,eAAO;AAAA,UACN,QAAQ,QAAQ;AAAA,UAChB,SAAS,6BAAM,QAAQ,WAAW,KAAK,OAAO,mBAAmB,QAAQ,QAAQ,OAAO,GAA/E;AAAA,QACV;AAAA,MACD,GATmB;AAAA,MAUnB,iBAAiB,8BAAO,OAAmB,UAA8B,UAAsE;AAC9I,cAAM,SAAS,MAAM,KAAK,OAAO,iBAAiB,QAAQ,UAAU,KAAK;AACzE,YAAI,CAAC,QAAQ;AACZ,iBAAO;AAAA,QACR;AACA,eAAO;AAAA,UACN,GAAG;AAAA,UACH,OAAO,MAAM,cAAc,OAAO,KAAK;AAAA,QACxC;AAAA,MACD,GATiB;AAAA,IAUlB;AAEA,QAAI,OAAO,gBAAgB,UAAU;AACpC,YAAM,UAAU,IAAI,QAAoC;AACxD,WAAK,eAAe,IAAI,aAAa,OAAO;AAC5C,eAAS,cAAc,QAAQ;AAAA,IAChC;AAEA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,iBAAiB,SAAS,UAAU,QAAQ,CAAC;AAAA,EAC5G;AAAA,EAEA,mBAAmB,aAAqB,OAAmB;AAC1D,UAAM,MAAM,KAAK,eAAe,IAAI,WAAW;AAC/C,QAAI,eAAe,SAAS;AAC3B,UAAI,KAAK,KAAK;AAAA,IACf;AAAA,EACD;AAAA;AAAA,EAIA,2BAA2B,QAAgB,UAAsC;AAChF,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,mBAAmB,SAAS,UAAU;AAAA,MACnG,mBAAmB,wBAAC,OAAO,UAAU,UAA6C;AACjF,eAAO,KAAK,OAAO,mBAAmB,QAAQ,MAAM,KAAK,UAAU,KAAK,EAAE,KAAK,2BAA2B,sBAAsB;AAAA,MACjI,GAFmB;AAAA,IAGpB,CAAC,CAAC;AAAA,EACH;AAAA,EAEA,4BAA4B,QAAgB,UAAsC;AACjF,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,oBAAoB,SAAS,UAAU;AAAA,MACpG,oBAAoB,wBAAC,OAAO,UAAU,UAAU;AAC/C,eAAO,KAAK,OAAO,oBAAoB,QAAQ,MAAM,KAAK,UAAU,KAAK,EAAE,KAAK,2BAA2B,sBAAsB;AAAA,MAClI,GAFoB;AAAA,IAGrB,CAAC,CAAC;AAAA,EACH;AAAA,EAEA,+BAA+B,QAAgB,UAAsC;AACpF,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,uBAAuB,SAAS,UAAU;AAAA,MACvG,uBAAuB,wBAAC,OAAO,UAAU,UAA6C;AACrF,eAAO,KAAK,OAAO,uBAAuB,QAAQ,MAAM,KAAK,UAAU,KAAK,EAAE,KAAK,2BAA2B,sBAAsB;AAAA,MACrI,GAFuB;AAAA,IAGxB,CAAC,CAAC;AAAA,EACH;AAAA,EAEA,+BAA+B,QAAgB,UAAsC;AACpF,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,uBAAuB,SAAS,UAAU;AAAA,MACvG,uBAAuB,wBAAC,OAAO,UAAU,UAA6C;AACrF,eAAO,KAAK,OAAO,uBAAuB,QAAQ,MAAM,KAAK,UAAU,KAAK,EAAE,KAAK,2BAA2B,sBAAsB;AAAA,MACrI,GAFuB;AAAA,IAGxB,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,uBAAuB,QAAgB,UAAsC;AAM5E,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,cAAc,SAAS,UAAU;AAAA,MAC9F,cAAc,8BAAO,OAAmB,UAA0B,OAA0B,YAAoF;AAC/K,cAAM,oBAA4D;AAAA,UACjE,kBAAkB,SAAS,mBAAmB;AAAA,YAC7C,gBAAgB,QAAQ,iBAAiB;AAAA,YACzC,eAAe,EAAE,IAAI,QAAQ,iBAAiB,cAAc,GAAG;AAAA,UAChE,IAAI;AAAA,QACL;AACA,cAAM,QAAQ,MAAM,KAAK,OAAO,cAAc,QAAQ,MAAM,KAAK,UAAU,mBAAmB,KAAK;AAEnG,eAAO;AAAA,MACR,GAVc;AAAA,IAWf,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,uCAAuC,QAAgB,UAAsC;AAC5F,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,8BAA8B,SAAS,UAAU;AAAA,MAC9G,8BAA8B,wBAAC,OAAmB,UAA0B,UAAmF;AAC9J,eAAO,KAAK,OAAO,8BAA8B,QAAQ,MAAM,KAAK,UAAU,KAAK;AAAA,MACpF,GAF8B;AAAA,IAG/B,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,8BAA8B,QAAgB,UAAgC,aAAuC;AACpH,UAAM,WAA2C;AAAA,MAChD,qBAAqB,wBAAC,OAAmB,UAAuB,SAAuC,UAA2E;AACjL,eAAO,KAAK,OAAO,qBAAqB,QAAQ,MAAM,KAAK,UAAU,SAAS,KAAK;AAAA,MACpF,GAFqB;AAAA,IAGtB;AAEA,QAAI,OAAO,gBAAgB,UAAU;AACpC,YAAM,UAAU,IAAI,QAAc;AAClC,WAAK,eAAe,IAAI,aAAa,OAAO;AAC5C,eAAS,0BAA0B,QAAQ;AAAA,IAC5C;AAEA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,qBAAqB,SAAS,UAAU,QAAQ,CAAC;AAAA,EAChH;AAAA,EAEA,uBAAuB,aAAqB,OAAmB;AAC9D,UAAM,MAAM,KAAK,eAAe,IAAI,WAAW;AAC/C,QAAI,eAAe,SAAS;AAC3B,UAAI,KAAK,KAAK;AAAA,IACf;AAAA,EACD;AAAA;AAAA,EAIA,mCAAmC,QAAgB,UAAsC;AACxF,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,0BAA0B,SAAS,UAAU;AAAA,MAC1G,2BAA2B,wBAAC,OAAmB,UAA0B,UAAiF;AACzJ,eAAO,KAAK,OAAO,2BAA2B,QAAQ,MAAM,KAAK,UAAU,KAAK;AAAA,MACjF,GAF2B;AAAA,IAG5B,CAAC,CAAC;AAAA,EACH;AAAA,EAEA,wCAAwC,QAAgB,UAAsC;AAC7F,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,+BAA+B,SAAS,UAAU;AAAA,MAC/G;AAAA,MACA,gCAAgC,wBAAC,OAAmB,UAA0B,aAA2B,UAA2F;AACnM,eAAO,KAAK,OAAO,gCAAgC,QAAQ,MAAM,KAAK,UAAU,YAAY,IAAI,CAAAA,WAASA,OAAM,GAAG,GAAG,KAAK,EAAE,KAAK,SAAO;AAGvI,cAAI,QAAQ,UAAa,QAAQ,MAAM;AACtC,mBAAO;AAAA,UACR;AACA,gBAAM,SAAS,IAAI,YAA2C;AAC9D,eAAK,QAAQ,WAAS;AAErB,kBAAM,MAAM,IAAI,OAAO,MAAM,GAAG;AAChC,gBAAI,OAAO,IAAI,GAAG,GAAG;AACpB,qBAAO,IAAI,GAAG,EAAG,KAAK,GAAG,MAAM,UAAU;AAAA,YAC1C,OAAO;AACN,qBAAO,IAAI,KAAK,MAAM,UAAU;AAAA,YACjC;AAAA,UACD,CAAC;AACD,iBAAO;AAAA,QACR,CAAC;AAAA,MACF,GAnBgC;AAAA,IAoBjC,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,oCAAoC,QAAgB,UAAsC;AACzF,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,2BAA2B,SAAS,UAAU;AAAA,MAC3G,4BAA4B,8BAAO,OAAmB,UAA0B,UAAiF;AAChK,cAAM,MAAM,MAAM,KAAK,OAAO,4BAA4B,QAAQ,MAAM,KAAK,UAAU,KAAK;AAC5F,YAAI,KAAK;AACR,iBAAO;AAAA,YACN,QAAQ,IAAI;AAAA,YACZ,aAAa,IAAI,cAAc,2BAA2B,cAAc,IAAI,WAAW,IAAI;AAAA,UAC5F;AAAA,QACD;AACA,eAAO;AAAA,MACR,GAT4B;AAAA,IAU7B,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,0BAA0B,QAAgB,UAAsC;AAC/E,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,kBAAkB,SAAS,UAAU;AAAA,MAClG,mBAAmB,wBAAC,OAAmB,UAA0B,SAAqC,UAA4D;AACjK,eAAO,KAAK,OAAO,mBAAmB,QAAQ,MAAM,KAAK,UAAU,SAAS,KAAK,EAAE,KAAK,2BAA2B,kBAAkB;AAAA,MACtI,GAFmB;AAAA,IAGpB,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,2BAA2B,QAAgB,UAAgC,UAA0C,aAAqB,aAAqB,iBAAgC;AAC9L,UAAM,WAAyC;AAAA,MAC9C,oBAAoB,8BAAO,OAAmB,kBAA2C,SAAsC,UAA4E;AAC1M,cAAM,UAAU,MAAM,KAAK,OAAO,oBAAoB,QAAQ,MAAM,KAAK,kBAAkB,SAAS,KAAK;AACzG,YAAI,CAAC,SAAS;AACb,iBAAO;AAAA,QACR;AACA,eAAO;AAAA,UACN,SAAS,2BAA2B,qBAAqB,QAAQ,SAAS,KAAK,gBAAgB;AAAA,UAC/F,SAAS,6BAAM;AACd,gBAAI,OAAO,QAAQ,YAAY,UAAU;AACxC,mBAAK,OAAO,oBAAoB,QAAQ,QAAQ,OAAO;AAAA,YACxD;AAAA,UACD,GAJS;AAAA,QAKV;AAAA,MACD,GAboB;AAAA,MAcpB,yBAAyB,SAAS;AAAA,MAClC,eAAe,SAAS;AAAA,MACxB;AAAA,MACA;AAAA,IACD;AAEA,QAAI,iBAAiB;AACpB,eAAS,oBAAoB,OAAO,YAAkC,UAA4D;AACjI,cAAM,WAAW,MAAM,KAAK,OAAO,mBAAmB,QAAyB,WAAY,SAAU,KAAK;AAC1G,YAAI,SAAS,MAAM;AAClB,qBAAW,OAAO,uBAAuB,SAAS,MAAM,KAAK,gBAAgB;AAAA,QAC9E;AAEA,YAAI,SAAS,SAAS;AACrB,qBAAW,UAAU,SAAS;AAAA,QAC/B;AAEA,eAAO;AAAA,MACR;AAAA,IACD;AAEA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,mBAAmB,SAAS,UAAU,QAAQ,CAAC;AAAA,EAC9G;AAAA;AAAA,EAIiB,sBAAsB,oBAAI,IAAyC;AAAA,EAEpF,2BAA2B,QAAgB,UAAgC,UAA+C;AACzH,UAAM,WAAW,IAAI,4BAA4B,QAAQ,KAAK,QAAQ,UAAU,KAAK,gBAAgB;AACrG,SAAK,oBAAoB,IAAI,QAAQ,QAAQ;AAC7C,SAAK,eAAe,IAAI,QAAQ;AAAA,MAC/B,KAAK,yBAAyB,0BAA0B,SAAS,UAAU,QAAQ;AAAA,MACnF,aAAa,MAAM,KAAK,oBAAoB,OAAO,MAAM,CAAC;AAAA,IAC3D,CAAC;AAAA,EACF;AAAA,EAEA,sBAAsB,QAAgB,WAAmB,QAAmC;AAC3F,UAAM,WAAW,KAAK,oBAAoB,IAAI,MAAM;AACpD,QAAI,CAAC,UAAU;AACd,YAAM,IAAI,MAAM,yBAAyB;AAAA,IAC1C;AACA,WAAO,SAAS,gBAAgB,WAAW,MAAM;AAAA,EAClD;AAAA;AAAA,EAIA,mCAAmC,QAAgB,UAAgC,aAAkC,aAA2B;AAC/I,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,+BAA+B,SAAS,UAAoD;AAAA,MACzJ;AAAA,MACA;AAAA,MACA,gCAAgC,wBAAC,OAAmB,SAAsC,UAA0E;AACnK,eAAO,KAAK,OAAO,gCAAgC,QAAQ,MAAM,KAAK,SAAS,KAAK;AAAA,MACrF,GAFgC;AAAA,IAGjC,CAAC,CAAC;AAAA,EACH;AAAA,EAEA,gCAAgC,QAAgB,UAAgC,aAAkC,aAAqB,gBAA+B;AACrK,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,oCAAoC,SAAS,UAAyD;AAAA,MACnK;AAAA,MACA;AAAA,MACA,qCAAqC,wBAAC,OAAmB,OAAoB,SAAsC,UAA0E;AAC5L,eAAO,KAAK,OAAO,qCAAqC,QAAQ,MAAM,KAAK,OAAO,SAAS,KAAK;AAAA,MACjG,GAFqC;AAAA,MAGrC,sCAAsC,CAAC,iBACpC,SACA,CAAC,OAAO,QAAQ,SAAS,UAAU;AACpC,eAAO,KAAK,OAAO,sCAAsC,QAAQ,MAAM,KAAK,QAAQ,SAAS,KAAK;AAAA,MACnG;AAAA,IACF,CAAC,CAAC;AAAA,EACH;AAAA,EAEA,iCAAiC,QAAgB,UAAgC,6BAAuC,aAAwC;AAC/J,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,6BAA6B,SAAS,UAAkD;AAAA,MACrJ;AAAA,MACA;AAAA,MACA,8BAA8B,wBAAC,OAAmB,UAA0B,IAAY,SAAsC,UAA0E;AACvM,eAAO,KAAK,OAAO,8BAA8B,QAAQ,MAAM,KAAK,UAAU,IAAI,SAAS,KAAK;AAAA,MACjG,GAF8B;AAAA,IAG/B,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,6BAA6B,QAAgB,iBAAgC;AAC5E,QAAI;AAEJ,UAAM,WAA4C;AAAA,MACjD,yBAAyB,8BAAOC,SAAgB,UAAiE;AAChH,cAAM,SAAS,MAAM,KAAK,OAAO,yBAAyB,QAAQA,SAAQ,KAAK;AAC/E,YAAI,iBAAiB,QAAW;AAC/B,eAAK,OAAO,yBAAyB,QAAQ,YAAY;AAAA,QAC1D;AACA,uBAAe,OAAO;AACtB,eAAO,2BAA2B,0BAA0B,OAAO,OAAO;AAAA,MAC3E,GAPyB;AAAA,IAQ1B;AACA,QAAI,iBAAiB;AACpB,eAAS,yBAAyB,OAAO,MAA+B,UAA2E;AAClJ,cAAM,eAAe,MAAM,KAAK,OAAO,wBAAwB,QAAQ,MAAM,KAAK;AAClF,eAAO,gBAAgB,2BAA2B,0BAA0B,YAAY;AAAA,MACzF;AAAA,IACD;AACA,SAAK,eAAe,IAAI,QAAQ,OAAO,gCAAgC,SAAS,QAAQ,CAAC;AAAA,EAC1F;AAAA;AAAA,EAIA,uBAAuB,QAAgB,UAAgC,wBAAuC;AAC7G,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,eAAe,SAAS,UAAU;AAAA,MAC/F,oBAAoB,wBAAC,OAAmB,UAA0B,SAAiB,UAA6B;AAC/G,eAAO,KAAK,OAAO,oBAAoB,QAAQ,MAAM,KAAK,UAAU,SAAS,KAAK,EAAE,KAAK,UAAQ,uBAAuB,MAAM,KAAK,gBAAgB,CAAC;AAAA,MACrJ,GAFoB;AAAA,MAGpB,uBAAuB,yBACpB,CAAC,OAAmB,UAA0B,UAA4E,KAAK,OAAO,uBAAuB,QAAQ,MAAM,KAAK,UAAU,KAAK,IAC/L;AAAA,IACJ,CAAC,CAAC;AAAA,EACH;AAAA,EAEA,gCAAgC,QAAgB,UAAsC;AACrF,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,uBAAuB,SAAS,UAAU;AAAA,MACvG,4CAA4C,KAAK,OAAO,4CAA4C,MAAM;AAAA,MAC1G,uBAAuB,wBAAC,OAAmB,OAAe,aAAiD,UAA6E;AACvL,eAAO,KAAK,OAAO,uBAAuB,QAAQ,MAAM,KAAK,OAAO,aAAa,KAAK;AAAA,MACvF,GAFuB;AAAA,IAGxB,CAA4C,CAAC;AAAA,EAC9C;AAAA;AAAA,EAIA,wCAAwC,QAAgB,UAAgC,QAAwC,aAAuC;AACtK,QAAI,QAAiC;AACrC,QAAI,OAAO,gBAAgB,UAAU;AACpC,YAAM,UAAU,IAAI,QAAc;AAClC,WAAK,eAAe,IAAI,aAAa,OAAO;AAC5C,cAAQ,QAAQ;AAAA,IACjB;AACA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,+BAA+B,SAAS,UAAU,IAAI,yCAAyC,KAAK,QAAQ,QAAQ,QAAQ,KAAK,CAAC,CAAC;AAAA,EAClM;AAAA,EAEA,iCAAiC,aAA2B;AAC3D,UAAM,MAAM,KAAK,eAAe,IAAI,WAAW;AAC/C,QAAI,eAAe,SAAS;AAC3B,UAAI,KAAK,MAAS;AAAA,IACnB;AAAA,EACD;AAAA,EAEA,6CAA6C,QAAgB,UAAgC,QAA8C;AAC1I,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,oCAAoC,SAAS,UAAU,IAAI,8CAA8C,KAAK,QAAQ,QAAQ,MAAM,CAAC,CAAC;AAAA,EACrM;AAAA;AAAA,EAIA,OAAe,mBAAmB,cAA4D,MAAuB,aAA4D;AAEhL,UAAM,QAAQ,KAAK,qBAAqB,KAAK;AAC7C,UAAM,YAAY,KAAK,qBAAqB,SAAS;AACrD,UAAM,eAAe,KAAK,qBAAqB,YAAY;AAC3D,UAAM,cAAc,KAAK,qBAAqB,gBAAgB;AAE9D,WAAO;AAAA,MACN;AAAA,MACA;AAAA,MACA,MAAM,KAAK,qBAAqB,IAAI,KAAK,UAAU,mBAAmB;AAAA,MACtE,MAAM,KAAK,qBAAqB,YAAY;AAAA,MAC5C,QAAQ,KAAK,qBAAqB,MAAM;AAAA,MACxC,eAAe,KAAK,qBAAqB,aAAa;AAAA,MACtD,UAAU,KAAK,qBAAqB,QAAQ;AAAA,MAC5C,YAAY,KAAK,qBAAqB,UAAU;AAAA,MAChD,WAAW,KAAK,qBAAqB,SAAS;AAAA,MAC9C,YAAY,KAAK,qBAAqB,UAAU,MAAM,OAAO,UAAU,WAAW,QAAQ,MAAM;AAAA,MAChG,OAAO,KAAK,qBAAqB,KAAK,KAAK;AAAA,MAC3C,iBAAiB,KAAK,qBAAqB,eAAe;AAAA,MAC1D,kBAAkB,cAAc,MAAM,KAAK,WAAW,IAAI;AAAA,MAC1D,qBAAqB,KAAK,qBAAqB,mBAAmB;AAAA,MAClE,SAAS,YAAY;AAAA,QACpB,QAAQ;AAAA,QACR,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,WAAW,eAAe,CAAC,YAAY,IAAI,KAAK,qBAAqB,gBAAgB;AAAA;AAAA,MACtF,IAAyB;AAAA;AAAA,MAEzB,KAAK,KAAK;AAAA,IACX;AAAA,EACD;AAAA,EAEA,6BAA6B,QAAgB,UAAgC,mBAA6B,wBAAiC,aAAwC;AAClL,UAAM,WAA6C;AAAA,MAClD;AAAA,MACA,mBAAmB,GAAG,YAAY,KAAK,IAAI,kBAAkB,KAAK,EAAE,CAAC;AAAA,MACrE,wBAAwB,8BAAO,OAAmB,UAA0B,SAAsC,UAA4E;AAC7L,cAAM,SAAS,MAAM,KAAK,OAAO,wBAAwB,QAAQ,MAAM,KAAK,UAAU,SAAS,KAAK;AACpG,YAAI,CAAC,QAAQ;AACZ,iBAAO;AAAA,QACR;AACA,eAAO;AAAA,UACN,aAAa,OAAO,uBAAuB,WAAW,EAAE,IAAI,OAAK,2BAA2B,mBAAmB,OAAO,uBAAuB,aAAa,GAAG,GAAG,WAAW,CAAC;AAAA,UAC5K,YAAY,OAAO,uBAAuB,YAAY,KAAK;AAAA,UAC3D,UAAU,OAAO,uBAAuB,QAAQ;AAAA,UAChD,SAAS,6BAAM;AACd,gBAAI,OAAO,OAAO,MAAM,UAAU;AACjC,mBAAK,OAAO,wBAAwB,QAAQ,OAAO,CAAC;AAAA,YACrD;AAAA,UACD,GAJS;AAAA,QAKV;AAAA,MACD,GAfwB;AAAA,IAgBzB;AACA,QAAI,wBAAwB;AAC3B,eAAS,wBAAwB,CAAC,YAAY,UAAU;AACvD,eAAO,KAAK,OAAO,uBAAuB,QAAQ,WAAW,KAAM,KAAK,EAAE,KAAK,YAAU;AACxF,cAAI,CAAC,QAAQ;AACZ,mBAAO;AAAA,UACR;AAEA,gBAAM,gBAAgB,2BAA2B,mBAAmB,WAAW,OAAO,QAAQ,WAAW;AACzG,iBAAO,MAAM,YAAY,eAAe,IAAI;AAAA,QAC7C,CAAC;AAAA,MACF;AAAA,IACD;AACA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,mBAAmB,SAAS,UAAU,QAAQ,CAAC;AAAA,EAC9G;AAAA,EAEA,kCAAkC,QAAgB,UAAgC,sBAA+B,aAAqB,sBAAsC;AAC3K,UAAM,WAA+E;AAAA,MACpF,0BAA0B,8BAAO,OAAmB,UAA0B,SAA4C,UAAiF;AAC1M,eAAO,KAAK,OAAO,0BAA0B,QAAQ,MAAM,KAAK,UAAU,SAAS,KAAK;AAAA,MACzF,GAF0B;AAAA,MAG1B,4BAA4B,8BAAO,OAAmB,OAAoB,SAA4C,UAAiF;AACtM,eAAO,KAAK,OAAO,4BAA4B,QAAQ,MAAM,KAAK,OAAO,SAAS,KAAK;AAAA,MACxF,GAF4B;AAAA,MAG5B,mBAAmB,8BAAO,aAA4C,MAAoC,sBAA6C;AACtJ,YAAI,sBAAsB;AACzB,gBAAM,KAAK,OAAO,+BAA+B,QAAQ,YAAY,KAAK,KAAK,KAAK,iBAAiB;AAAA,QACtG;AAAA,MACD,GAJmB;AAAA,MAKnB,qBAAqB,8BAAO,aAAa,MAAM,oBAAoB,SAAqD;AACvH,YAAI,sBAAsB;AACzB,gBAAM,KAAK,OAAO,qCAAqC,QAAQ,YAAY,KAAK,KAAK,KAAK,oBAAoB,IAAI;AAAA,QACnH;AAAA,MACD,GAJqB;AAAA,MAKrB,uBAAuB,wBAAC,gBAAqD;AAC5E,aAAK,OAAO,2BAA2B,QAAQ,YAAY,GAAG;AAAA,MAC/D,GAFuB;AAAA,MAGvB,SAAS;AAAA,MACT,kBAAkB;AAAA,MAClB,WAAW;AACV,eAAO,6BAA6B,WAAW;AAAA,MAChD;AAAA,IACD;AACA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,0BAA0B,SAAS,UAAU,QAAQ,CAAC;AAAA,EACrH;AAAA,EAEA,4BAA4B,QAAgB,UAAgC,aAAwC;AACnH,UAAM,WAAiE;AAAA,MACtE,mBAAmB,8BAAO,OAAmB,SAAuC,UAA0E;AAC7J,eAAO,KAAK,OAAO,mBAAmB,QAAQ,MAAM,KAAK,SAAS,KAAK;AAAA,MACxE,GAFmB;AAAA,MAGnB,gBAAgB,wBAAC,SAAuC;AACvD,aAAK,OAAO,gBAAgB,QAAQ,KAAK,GAAG;AAAA,MAC7C,GAFgB;AAAA,IAIjB;AACA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,mBAAmB,SAAS,UAAU,QAAQ,CAAC;AAAA,EAC9G;AAAA;AAAA,EAIA,+BAA+B,QAAgB,UAAgC,UAAmD;AACjI,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,sBAAsB,SAAS,UAAU;AAAA,MAEtG,gCAAgC,SAAS;AAAA,MACzC,kCAAkC,SAAS;AAAA,MAE3C,sBAAsB,8BAAO,OAAmB,UAA0B,OAA0B,YAAgG;AACnM,cAAM,SAAS,MAAM,KAAK,OAAO,sBAAsB,QAAQ,MAAM,KAAK,UAAU,SAAS,KAAK;AAClG,YAAI,CAAC,QAAQ;AACZ,iBAAO;AAAA,QACR;AACA,eAAO;AAAA,UACN,OAAO;AAAA,UACP,SAAS,6BAAM;AACd,iBAAK,OAAO,sBAAsB,QAAQ,OAAO,EAAE;AAAA,UACpD,GAFS;AAAA,QAGV;AAAA,MACD,GAXsB;AAAA,IAYvB,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,4BAA4B,QAAgB,UAAgC,iBAA0B,aAAiC,aAAuC;AAC7K,UAAM,WAAyC;AAAA,MAC9C;AAAA,MACA,mBAAmB,8BAAO,OAAmB,OAAoB,UAA2E;AAC3I,cAAM,SAAS,MAAM,KAAK,OAAO,mBAAmB,QAAQ,MAAM,KAAK,OAAO,KAAK;AACnF,YAAI,CAAC,QAAQ;AACZ;AAAA,QACD;AACA,eAAO;AAAA,UACN,OAAO,OAAO,OAAO,KAAK;AAAA,UAC1B,SAAS,6BAAM;AACd,gBAAI,OAAO,SAAS;AACnB,mBAAK,OAAO,mBAAmB,QAAQ,OAAO,OAAO;AAAA,YACtD;AAAA,UACD,GAJS;AAAA,QAKV;AAAA,MACD,GAbmB;AAAA,IAcpB;AACA,QAAI,iBAAiB;AACpB,eAAS,mBAAmB,OAAO,MAAM,UAAU;AAClD,cAAM,MAAqB;AAC3B,YAAI,CAAC,IAAI,SAAS;AACjB,iBAAO;AAAA,QACR;AACA,cAAM,SAAS,MAAM,KAAK,OAAO,kBAAkB,QAAQ,IAAI,SAAS,KAAK;AAC7E,YAAI,MAAM,yBAAyB;AAClC,gBAAM,IAAI,kBAAkB;AAAA,QAC7B;AACA,YAAI,CAAC,QAAQ;AACZ,iBAAO;AAAA,QACR;AACA,eAAO;AAAA,UACN,GAAG;AAAA,UACH,SAAS,OAAO;AAAA,UAChB,OAAO,OAAgD,OAAO,KAAK;AAAA,UACnE,WAAW,OAAO;AAAA,QACnB;AAAA,MACD;AAAA,IACD;AACA,QAAI,OAAO,gBAAgB,UAAU;AACpC,YAAM,UAAU,IAAI,QAAc;AAClC,WAAK,eAAe,IAAI,aAAa,OAAO;AAC5C,eAAS,wBAAwB,QAAQ;AAAA,IAC1C;AAEA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,mBAAmB,SAAS,UAAU,QAAQ,CAAC;AAAA,EAC9G;AAAA,EAEA,qBAAqB,aAA2B;AAC/C,UAAM,MAAM,KAAK,eAAe,IAAI,WAAW;AAC/C,QAAI,eAAe,SAAS;AAC3B,UAAI,KAAK,MAAS;AAAA,IACnB;AAAA,EACD;AAAA;AAAA,EAIA,8BAA8B,QAAgB,UAAgC,iBAAgC;AAC7G,UAAM,WAAmC;AAAA,MACxC,cAAc,wBAAC,OAAO,UAAU;AAC/B,eAAO,KAAK,OAAO,sBAAsB,QAAQ,MAAM,KAAK,KAAK,EAAE,KAAK,SAAO;AAC9E,cAAI,CAAC,KAAK;AACT,mBAAO;AAAA,UACR;AACA,iBAAO;AAAA,YACN,OAAO,IAAI,MAAM,IAAI,2BAA2B,cAAc;AAAA,YAC9D,SAAS,6BAAM;AACd,kBAAI,OAAO,IAAI,YAAY,UAAU;AACpC,qBAAK,OAAO,sBAAsB,QAAQ,IAAI,OAAO;AAAA,cACtD;AAAA,YACD,GAJS;AAAA,UAKV;AAAA,QACD,CAAC;AAAA,MACF,GAdc;AAAA,IAef;AACA,QAAI,iBAAiB;AACpB,eAAS,cAAc,CAAC,MAAM,UAAU;AACvC,cAAM,MAAgB;AACtB,YAAI,CAAC,IAAI,SAAS;AACjB,iBAAO;AAAA,QACR;AACA,eAAO,KAAK,OAAO,qBAAqB,QAAQ,IAAI,SAAS,KAAK,EAAE,KAAK,SAAO;AAC/E,iBAAO,OAAO,2BAA2B,eAAe,GAAG;AAAA,QAC5D,CAAC;AAAA,MACF;AAAA,IACD;AACA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,aAAa,SAAS,UAAU,QAAQ,CAAC;AAAA,EACxG;AAAA;AAAA,EAIA,+BAA+B,QAAgB,UAAsC;AACpF,UAAM,QAAQ,KAAK;AACnB,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,cAAc,SAAS,UAAU;AAAA,MAC9F,uBAAuB,wBAAC,OAAO,UAAU;AACxC,eAAO,MAAM,uBAAuB,QAAQ,MAAM,KAAK,KAAK,EAC1D,KAAK,oBAAkB;AACvB,iBAAO,eAAe,IAAI,mBAAiB;AAC1C,kBAAM,CAAC,KAAK,OAAO,MAAM,KAAK,IAAI,cAAc;AAChD,kBAAM,QAAQ;AAAA,cACb;AAAA,cACA;AAAA,cACA;AAAA,cACA;AAAA,YACD;AAEA,mBAAO;AAAA,cACN;AAAA,cACA,OAAO,cAAc;AAAA,YACtB;AAAA,UACD,CAAC;AAAA,QACF,CAAC;AAAA,MACH,GAlBuB;AAAA,MAoBvB,2BAA2B,wBAAC,OAAO,WAAW,UAAU;AACvD,eAAO,MAAM,2BAA2B,QAAQ,MAAM,KAAK;AAAA,UAC1D,OAAO,CAAC,UAAU,MAAM,KAAK,UAAU,MAAM,OAAO,UAAU,MAAM,MAAM,UAAU,MAAM,KAAK;AAAA,UAC/F,OAAO,UAAU;AAAA,QAClB,GAAG,KAAK;AAAA,MACT,GAL2B;AAAA,IAM5B,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,8BAA8B,QAAgB,UAAgC,aAAkC,aAAuC;AACtJ,UAAM,WAA2C;AAAA,MAChD,IAAI,YAAY;AAAA,MAChB,sBAAsB,wBAAC,OAAO,SAAS,UAAU;AAChD,eAAO,KAAK,OAAO,sBAAsB,QAAQ,MAAM,KAAK,SAAS,KAAK;AAAA,MAC3E,GAFsB;AAAA,IAGvB;AAEA,QAAI,OAAO,gBAAgB,UAAU;AACpC,YAAM,UAAU,IAAI,QAAwC;AAC5D,WAAK,eAAe,IAAI,aAAa,OAAO;AAC5C,eAAS,cAAc,QAAQ;AAAA,IAChC;AAEA,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,qBAAqB,SAAS,UAAU,QAAQ,CAAC;AAAA,EAChH;AAAA,EAEA,uBAAuB,aAAqB,OAAmB;AAC9D,UAAM,MAAM,KAAK,eAAe,IAAI,WAAW;AAC/C,QAAI,eAAe,SAAS;AAC3B,UAAI,KAAK,KAAK;AAAA,IACf;AAAA,EACD;AAAA;AAAA,EAIA,gCAAgC,QAAgB,UAAsC;AACrF,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,uBAAuB,SAAS,UAAU;AAAA,MACvG,wBAAwB,wBAAC,OAAO,WAAW,UAAU;AACpD,eAAO,KAAK,OAAO,wBAAwB,QAAQ,MAAM,KAAK,WAAW,KAAK;AAAA,MAC/E,GAFwB;AAAA,IAGzB,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,+BAA+B,QAAgB,UAAsC;AACpF,SAAK,eAAe,IAAI,QAAQ,MAAM,8BAA8B,SAAS,UAAU;AAAA,MAEtF,sBAAsB,8BAAO,UAAU,UAAU,UAAU;AAC1D,cAAM,QAAQ,MAAM,KAAK,OAAO,sBAAsB,QAAQ,SAAS,KAAK,UAAU,KAAK;AAC3F,YAAI,CAAC,SAAS,MAAM,WAAW,GAAG;AACjC,iBAAO;AAAA,QACR;AACA,eAAO;AAAA,UACN,SAAS,6BAAM;AACd,uBAAW,QAAQ,OAAO;AACzB,mBAAK,OAAO,sBAAsB,QAAQ,KAAK,UAAU;AAAA,YAC1D;AAAA,UACD,GAJS;AAAA,UAKT,OAAO,MAAM,IAAI,2BAA2B,2BAA2B;AAAA,QACxE;AAAA,MACD,GAbsB;AAAA,MAetB,sBAAsB,8BAAO,MAAM,UAAU;AAC5C,cAAM,WAAW,MAAM,KAAK,OAAO,mCAAmC,QAAQ,KAAK,YAAY,KAAK,SAAS,KAAK;AAClH,YAAI,CAAC,UAAU;AACd,iBAAO;AAAA,QACR;AACA,iBAAS,QAAQ,WAAS;AACzB,gBAAM,KAAK,2BAA2B,4BAA4B,MAAM,EAAE;AAAA,QAC3E,CAAC;AACD,eAAY;AAAA,MACb,GATsB;AAAA,MAUtB,sBAAsB,8BAAO,MAAM,UAAU;AAC5C,cAAM,WAAW,MAAM,KAAK,OAAO,mCAAmC,QAAQ,KAAK,YAAY,KAAK,SAAS,KAAK;AAClH,YAAI,CAAC,UAAU;AACd,iBAAO;AAAA,QACR;AACA,iBAAS,QAAQ,WAAS;AACzB,gBAAM,OAAO,2BAA2B,4BAA4B,MAAM,IAAI;AAAA,QAC/E,CAAC;AACD,eAAY;AAAA,MACb,GATsB;AAAA,IAUvB,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAIA,OAAe,cAAc,QAA4B;AACxD,WAAO,IAAI,OAAO,OAAO,SAAS,OAAO,KAAK;AAAA,EAC/C;AAAA,EAEA,OAAe,uBAAuB,iBAAuD;AAC5F,WAAO;AAAA,MACN,uBAAuB,2BAA2B,cAAc,gBAAgB,qBAAqB;AAAA,MACrG,uBAAuB,2BAA2B,cAAc,gBAAgB,qBAAqB;AAAA,MACrG,uBAAuB,gBAAgB,wBAAwB,2BAA2B,cAAc,gBAAgB,qBAAqB,IAAI;AAAA,MACjJ,uBAAuB,gBAAgB,wBAAwB,2BAA2B,cAAc,gBAAgB,qBAAqB,IAAI;AAAA,IAClJ;AAAA,EACD;AAAA,EAEA,OAAe,mBAAmB,aAA2C;AAC5E,WAAO;AAAA,MACN,YAAY,2BAA2B,cAAc,YAAY,UAAU;AAAA,MAC3E,WAAW,YAAY,YAAY,2BAA2B,cAAc,YAAY,SAAS,IAAI;AAAA,MACrG,kBAAkB,YAAY,mBAAmB,2BAA2B,cAAc,YAAY,gBAAgB,IAAI;AAAA,MAC1H,QAAQ,YAAY;AAAA,IACrB;AAAA,EACD;AAAA,EAEA,OAAe,oBAAoB,cAAgD;AAClF,WAAO,aAAa,IAAI,2BAA2B,kBAAkB;AAAA,EACtE;AAAA,EAEA,0BAA0B,QAAgB,YAAoB,gBAAiD;AAE9G,UAAM,gBAAuC;AAAA,MAC5C,UAAU,eAAe;AAAA,MACzB,UAAU,eAAe;AAAA,MACzB,aAAa,eAAe,cAAc,2BAA2B,cAAc,eAAe,WAAW,IAAI;AAAA,MACjH,kBAAkB,eAAe,mBAAmB,2BAA2B,uBAAuB,eAAe,gBAAgB,IAAI;AAAA,MACzI,cAAc,eAAe,eAAe,2BAA2B,oBAAoB,eAAe,YAAY,IAAI;AAAA,MAE1H,kBAAkB;AAAA,MAClB,kBAAkB;AAAA,MAClB,4BAA4B;AAAA,IAC7B;AAEA,QAAI,eAAe,kBAAkB;AACpC,oBAAc,mBAAmB,eAAe;AAAA,IACjD,WAAW,eAAe,wBAAwB;AAEjD,oBAAc,mBAAmB,eAAe,uBAAuB;AAAA,IACxE;AAEA,QAAI,eAAe,8BAA8B,eAAe,2BAA2B,YAAY;AACtG,oBAAc,6BAA6B;AAAA,QAC1C,YAAY;AAAA,UACX,MAAM,eAAe,2BAA2B,WAAW;AAAA,UAC3D,OAAO,eAAe,2BAA2B,WAAW;AAAA,QAC7D;AAAA,MACD;AAAA,IACD;AAEA,QAAI,KAAK,iBAAiB,uBAAuB,UAAU,GAAG;AAC7D,WAAK,eAAe,IAAI,QAAQ,KAAK,8BAA8B,SAAS,YAAY,eAAe,GAAG,CAAC;AAAA,IAC5G;AAAA,EACD;AAAA;AAAA,EAIA,+BAA+B,QAAgB,UAAsC;AACpF,SAAK,eAAe,IAAI,QAAQ,MAAM,8BAA8B,SAAS,UAAU;AAAA,MAEtF,sBAAsB,8BAAO,UAAU,UAAU,UAAU;AAC1D,cAAM,QAAQ,MAAM,KAAK,OAAO,sBAAsB,QAAQ,SAAS,KAAK,UAAU,KAAK;AAC3F,YAAI,CAAC,OAAO;AACX,iBAAO;AAAA,QACR;AACA,eAAO;AAAA,UACN,SAAS,6BAAM;AACd,uBAAW,QAAQ,OAAO;AACzB,mBAAK,OAAO,sBAAsB,QAAQ,KAAK,UAAU;AAAA,YAC1D;AAAA,UACD,GAJS;AAAA,UAKT,OAAO,MAAM,IAAI,2BAA2B,2BAA2B;AAAA,QACxE;AAAA,MACD,GAbsB;AAAA,MAetB,mBAAmB,8BAAO,MAAM,UAAU;AACzC,cAAM,aAAa,MAAM,KAAK,OAAO,gCAAgC,QAAQ,KAAK,YAAY,KAAK,SAAS,KAAK;AACjH,YAAI,CAAC,YAAY;AAChB,iBAAO;AAAA,QACR;AACA,eAAO,WAAW,IAAI,2BAA2B,2BAA2B;AAAA,MAC7E,GANmB;AAAA,MAOnB,iBAAiB,8BAAO,MAAM,UAAU;AACvC,cAAM,WAAW,MAAM,KAAK,OAAO,8BAA8B,QAAQ,KAAK,YAAY,KAAK,SAAS,KAAK;AAC7G,YAAI,CAAC,UAAU;AACd,iBAAO;AAAA,QACR;AACA,eAAO,SAAS,IAAI,2BAA2B,2BAA2B;AAAA,MAC3E,GANiB;AAAA,IAOlB,CAAC,CAAC;AAAA,EACH;AAAA;AAAA,EAKiB,+BAA+B,oBAAI,IAAkD;AAAA,EAEtG,oCAAoC,QAAgB,UAAgC,UAAmD;AACtI,UAAM,WAAW,IAAI,qCAAqC,QAAQ,KAAK,QAAQ,UAAU,KAAK,gBAAgB;AAC9G,SAAK,6BAA6B,IAAI,QAAQ,QAAQ;AACtD,SAAK,eAAe,IAAI,QAAQ;AAAA,MAC/B,KAAK,yBAAyB,yBAAyB,SAAS,UAAU,QAAQ;AAAA,MAClF,aAAa,MAAM,KAAK,6BAA6B,OAAO,MAAM,CAAC;AAAA,IACpE,CAAC;AAAA,EACF;AAAA,EAEA,MAAM,+BAA+B,QAAgB,WAAmB,QAAmC;AAC1G,UAAM,WAAW,KAAK,6BAA6B,IAAI,MAAM;AAC7D,QAAI,CAAC,UAAU;AACd,YAAM,IAAI,MAAM,yBAAyB;AAAA,IAC1C;AACA,WAAO,SAAS,8BAA8B,WAAW,MAAM;AAAA,EAChE;AAAA;AAAA,EAIA,6BAA6B,QAAgB,UAAgC,aAA2B;AACvG,UAAM,WAAW,IAAI,8BAA8B,aAAa,QAAQ,KAAK,QAAQ,KAAK,gBAAgB;AAC1G,SAAK,eAAe,IAAI,QAAQ,KAAK,yBAAyB,oBAAoB,SAAS,UAAU,QAAQ,CAAC;AAAA,EAC/G;AACD;AAz8BsG;AAAzF,6BAAN;AAAA,EADN,qBAAqB,YAAY,0BAA0B;AAAA,EAQzD;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAVU;AA28Bb,IAAM,8BAAN,MAAiF;AAAA,EAYhF,YACkB,SACA,QACjB,UACsC,kBACrC;AAJgB;AACA;AAEqB;AAEtC,SAAK,gBAAgB,SAAS;AAC9B,SAAK,iBAAiB,SAAS;AAC/B,SAAK,yBAAyB,SAAS,wBAAwB,IAAI,UAAQ,IAAI,iBAAiB,IAAI,CAAC;AAErG,QAAI,SAAS,cAAc;AAC1B,WAAK,uBAAuB,OAAO,OAAmB,YAA+B,cAAuC,UAA2E;AACtM,cAAM,kBAAkB,MAAM,YAAY,aAAa,KAAK,YAAY;AACxE,YAAI,MAAM,yBAAyB;AAClC,iBAAO;AAAA,QACR;AAEA,cAAM,kBAAkB,MAAM,KAAK,OAAO,sBAAsB,SAAS,MAAM,KAAK,YAAY,iBAAiB,KAAK;AACtH,YAAI,CAAC,iBAAiB;AACrB,iBAAO;AAAA,QACR;AAEA,cAAM,kBAAkB,IAAI,eAAe;AAC3C,mBAAW,CAAC,MAAM,IAAI,KAAK,gBAAgB,OAAO;AACjD,0BAAgB,QAAQ,MAAM,6BAA6B,KAAK,QAAQ,CAAC;AAAA,QAC1E;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAEA,QAAI,SAAS,eAAe;AAC3B,WAAK,4BAA4B,OAAO,OAAmB,YAAyB,cAAuC,SAAyC,UAA6B;AAChM,cAAM,UAAU,KAAK,cAAc,IAAI,YAAY;AACnD,YAAI;AACH,gBAAM,kBAAkB,MAAM,YAAY,aAAa,KAAK,YAAY;AACxE,cAAI,MAAM,yBAAyB;AAClC;AAAA,UACD;AAEA,gBAAM,QAAQ,MAAM,KAAK,OAAO,mBAAmB,KAAK,SAAS,QAAQ,IAAI,MAAM,KAAK,YAAY,iBAAiB;AAAA,YACpH,MAAM,QAAQ,MAAM;AAAA,YACpB,aAAa,QAAQ;AAAA,UACtB,GAAG,KAAK;AACR,cAAI,CAAC,OAAO;AACX;AAAA,UACD;AAEA,iBAAO;AAAA,YACN,OAAO,MAAM,IAAI,CAAC,SAAsC;AACvD,qBAAO;AAAA,gBACN,GAAG;AAAA,gBACH,MAAM,KAAK,OAAO,IAAI,iBAAiB,KAAK,KAAK,KAAK,IAAI,IAAI,iBAAiB,EAAE;AAAA,gBACjF,SAAS,KAAK,SAAS,IAAI,QAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,EAAE,EAAE;AAAA,gBACnE,gBAAgB,KAAK,iBAAiB,uBAAuB,KAAK,gBAAgB,KAAK,kBAAkB,YAAU,KAAK,gBAAgB,QAAQ,IAAI,MAAM,CAAC,IAAI;AAAA,cAChK;AAAA,YACD,CAAC;AAAA,YACD,SAAS,6BAAM;AACd,mBAAK,OAAO,mBAAmB,KAAK,SAAS,QAAQ,EAAE;AAAA,YACxD,GAFS;AAAA,UAGV;AAAA,QACD,UAAE;AACD,kBAAQ,QAAQ;AAAA,QACjB;AAAA,MACD;AAAA,IACD;AACA,QAAI,SAAS,iBAAiB;AAC7B,WAAK,2BAA2B,OAAO,MAAmC,UAA6B;AACtG,cAAM,WAAW,MAAM,KAAK,OAAO,kBAAkB,KAAK,SAAyB,KAAM,UAAW,KAAK;AACzG,YAAI,SAAS,gBAAgB;AAC5B,eAAK,iBAAiB,uBAAuB,SAAS,gBAAgB,KAAK,gBAAgB;AAAA,QAC5F;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAAA,EAxkCD,OAk/BiF;AAAA;AAAA;AAAA,EAE/D,gBAAgB,IAAI,sBAAsB;AAAA,EAE3C;AAAA,EACA;AAAA,EACA;AAAA,EAEP;AAAA,EACA;AAAA,EACA;AAAA,EA8ET,gBAAgB,WAAmB,QAAmC;AACrE,WAAO,KAAK,cAAc,gBAAgB,WAAW,MAAM;AAAA,EAC5D;AACD;AA3FM,8BAAN;AAAA,EAgBG;AAAA,GAhBG;AA6FN,IAAM,uCAAN,MAAyF;AAAA,EAQxF,YACkB,SACA,QACjB,UACsC,kBACrC;AAJgB;AACA;AAEqB;AAEtC,SAAK,gBAAgB,UAAU,iBAAiB,CAAC,KAAK;AAEtD,QAAI,UAAU,iBAAiB;AAC9B,WAAK,0BAA0B,OAAO,MAAM,UAAU;AACrD,cAAM,WAAW,MAAM,KAAK,OAAO,kBAAkB,KAAK,SAAgC,KAAM,UAAW,KAAK;AAChH,YAAI,SAAS,gBAAgB;AAC5B,eAAK,iBAAiB,uBAAuB,SAAS,gBAAgB,KAAK,gBAAgB;AAAA,QAC5F;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAAA,EAxmCD,OA+kCyF;AAAA;AAAA;AAAA,EAEvE,gBAAgB,IAAI,sBAAsB;AAAA,EAElD;AAAA,EAEA;AAAA,EAqBT,MAAM,yBAAyB,OAAmB,UAAqB,cAAuC,OAAmF;AAChM,UAAM,UAAU,KAAK,cAAc,IAAI,YAAY;AACnD,QAAI;AACH,YAAM,kBAAkB,MAAM,YAAY,aAAa,KAAK,YAAY;AACxE,UAAI,MAAM,yBAAyB;AAClC;AAAA,MACD;AAEA,YAAM,QAAQ,MAAM,KAAK,OAAO,4BAA4B,KAAK,SAAS,QAAQ,IAAI,MAAM,KAAK,UAAU,iBAAiB,KAAK;AACjI,UAAI,CAAC,OAAO;AACX;AAAA,MACD;AAEA,aAAO;AAAA,QACN,OAAO,MAAM,IAAI,UAAQ;AACxB,iBAAO;AAAA,YACN,GAAG;AAAA,YACH,SAAS,KAAK,SAAS,IAAI,QAAM,EAAE,MAAM,IAAI,iBAAiB,CAAC,EAAE,EAAE;AAAA,YACnE,MAAM,KAAK,OAAO,IAAI,iBAAiB,KAAK,IAAI,IAAI;AAAA,YACpD,gBAAgB,uBAAuB,KAAK,gBAAgB,KAAK,kBAAkB,YAAU,KAAK,8BAA8B,QAAQ,IAAI,MAAM,CAAC;AAAA,UACpJ;AAAA,QACD,CAAC;AAAA,QACD,SAAS,6BAAM;AACd,eAAK,OAAO,4BAA4B,KAAK,SAAS,QAAQ,EAAE;AAAA,QACjE,GAFS;AAAA,MAGV;AAAA,IACD,UAAE;AACD,cAAQ,QAAQ;AAAA,IACjB;AAAA,EACD;AAAA,EAEO,8BAA8B,WAAmB,QAAmC;AAC1F,WAAO,KAAK,cAAc,gBAAgB,WAAW,MAAM;AAAA,EAC5D;AACD;AA7DM,uCAAN;AAAA,EAYG;AAAA,GAZG;AA+DC,MAAM,yCAA6F;AAAA,EAEzG,YACkB,QACA,SACA,SACD,aACf;AAJgB;AACA;AACA;AACD;AAAA,EAEjB;AAAA,EAtpCD,OA8oC0G;AAAA;AAAA;AAAA,EAUlG,8BAA8B,UAAoC;AACxE,QAAI,UAAU;AACb,WAAK,OAAO,+BAA+B,KAAK,SAAS,SAAS,UAAU,EAAE,CAAC;AAAA,IAChF;AAAA,EACD;AAAA,EAEO,YAA4C;AAClD,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,MAAM,8BAA8B,OAAmB,cAA6B,OAAoG;AACvL,UAAM,gBAAgB,eAAe,SAAS,cAAc,EAAE,IAAI;AAClE,UAAM,aAAa,MAAM,KAAK,OAAO,+BAA+B,KAAK,SAAS,MAAM,KAAK,eAAe,KAAK;AACjH,QAAI,CAAC,YAAY;AAChB,aAAO;AAAA,IACR;AACA,QAAI,MAAM,yBAAyB;AAClC,aAAO;AAAA,IACR;AACA,UAAM,MAAM,wBAAwB,UAAU;AAC9C,QAAI,IAAI,SAAS,QAAQ;AACxB,aAAO;AAAA,QACN,UAAU,OAAO,IAAI,EAAE;AAAA,QACvB,MAAM,IAAI;AAAA,MACX;AAAA,IACD;AACA,WAAO;AAAA,MACN,UAAU,OAAO,IAAI,EAAE;AAAA,MACvB,OAAO,IAAI;AAAA,IACZ;AAAA,EACD;AACD;AAEO,MAAM,8CAAuG;AAAA,EAEnH,YACkB,QACA,SACA,SAChB;AAHgB;AACA;AACA;AAAA,EAElB;AAAA,EAhsCD,OAyrCoH;AAAA;AAAA;AAAA,EAS5G,YAA4C;AAClD,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,MAAM,mCAAmC,OAAmB,OAAoB,OAAoE;AACnJ,UAAM,aAAa,MAAM,KAAK,OAAO,oCAAoC,KAAK,SAAS,MAAM,KAAK,OAAO,KAAK;AAC9G,QAAI,CAAC,YAAY;AAChB,aAAO;AAAA,IACR;AACA,QAAI,MAAM,yBAAyB;AAClC,aAAO;AAAA,IACR;AACA,UAAM,MAAM,wBAAwB,UAAU;AAC9C,QAAI,IAAI,SAAS,QAAQ;AACxB,aAAO;AAAA,QACN,UAAU,OAAO,IAAI,EAAE;AAAA,QACvB,MAAM,IAAI;AAAA,MACX;AAAA,IACD;AACA,UAAM,IAAI,MAAM,YAAY;AAAA,EAC7B;AACD;AAEO,MAAM,8BAAuE;AAAA,EAEnF,YACiB,aACC,SACA,QACA,aAChB;AAJe;AACC;AACA;AACA;AAAA,EACd;AAAA,EAhuCL,OAytCoF;AAAA;AAAA;AAAA,EASnF,MAAM,mBAAmB,UAAsB,YAAsB,SAAuC,OAAmE;AAC9K,UAAM,MAAM,MAAM,KAAK,OAAO,oBAAoB,KAAK,SAAS,SAAS,KAAK,YAAY,SAAS,KAAK;AACxG,WAAO,MAAM,uBAAuB,KAAK,KAAK,WAAW,IAAI;AAAA,EAC9D;AACD;",
  "names": ["model", "search"]
}
