{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/api/browser/mainThreadFileSystemEventService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { raceCancellation } from \"../../../base/common/async.js\";\nimport {\n\ttype CancellationToken,\n\tCancellationTokenSource,\n} from \"../../../base/common/cancellation.js\";\nimport { GLOBSTAR } from \"../../../base/common/glob.js\";\nimport {\n\tDisposableMap,\n\tDisposableStore,\n} from \"../../../base/common/lifecycle.js\";\nimport Severity from \"../../../base/common/severity.js\";\nimport { rtrim } from \"../../../base/common/strings.js\";\nimport { URI, type UriComponents } from \"../../../base/common/uri.js\";\nimport { IBulkEditService } from \"../../../editor/browser/services/bulkEditService.js\";\nimport { localize } from \"../../../nls.js\";\nimport {\n\tAction2,\n\tregisterAction2,\n} from \"../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../platform/configuration/common/configuration.js\";\nimport { IDialogService } from \"../../../platform/dialogs/common/dialogs.js\";\nimport { IEnvironmentService } from \"../../../platform/environment/common/environment.js\";\nimport {\n\tFileOperation,\n\tIFileService,\n\ttype IFilesConfiguration,\n\ttype IWatchOptions,\n} from \"../../../platform/files/common/files.js\";\nimport { normalizeWatcherPattern } from \"../../../platform/files/common/watcher.js\";\nimport type { ServicesAccessor } from \"../../../platform/instantiation/common/instantiation.js\";\nimport { ILogService } from \"../../../platform/log/common/log.js\";\nimport {\n\tIProgressService,\n\tProgressLocation,\n} from \"../../../platform/progress/common/progress.js\";\nimport {\n\tIStorageService,\n\tStorageScope,\n\tStorageTarget,\n} from \"../../../platform/storage/common/storage.js\";\nimport { IUriIdentityService } from \"../../../platform/uriIdentity/common/uriIdentity.js\";\nimport { IWorkspaceContextService } from \"../../../platform/workspace/common/workspace.js\";\nimport {\n\ttype IExtHostContext,\n\textHostNamedCustomer,\n} from \"../../services/extensions/common/extHostCustomers.js\";\nimport {\n\ttype IFileOperationUndoRedoInfo,\n\ttype IWorkingCopyFileOperationParticipant,\n\tIWorkingCopyFileService,\n\ttype SourceTargetPair,\n} from \"../../services/workingCopy/common/workingCopyFileService.js\";\nimport {\n\tExtHostContext,\n\ttype ExtHostFileSystemEventServiceShape,\n\tMainContext,\n\ttype MainThreadFileSystemEventServiceShape,\n} from \"../common/extHost.protocol.js\";\nimport { reviveWorkspaceEditDto } from \"./mainThreadBulkEdits.js\";\n\n@extHostNamedCustomer(MainContext.MainThreadFileSystemEventService)\nexport class MainThreadFileSystemEventService\n\timplements MainThreadFileSystemEventServiceShape\n{\n\tstatic readonly MementoKeyAdditionalEdits =\n\t\t`file.particpants.additionalEdits`;\n\n\tprivate readonly _proxy: ExtHostFileSystemEventServiceShape;\n\n\tprivate readonly _listener = new DisposableStore();\n\tprivate readonly _watches = new DisposableMap<number>();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IWorkingCopyFileService workingCopyFileService: IWorkingCopyFileService,\n\t\t@IBulkEditService bulkEditService: IBulkEditService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@IDialogService dialogService: IDialogService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@ILogService logService: ILogService,\n\t\t@IEnvironmentService envService: IEnvironmentService,\n\t\t@IUriIdentityService uriIdentService: IUriIdentityService,\n\t\t@IWorkspaceContextService private readonly _contextService: IWorkspaceContextService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostFileSystemEventService);\n\n\t\tthis._listener.add(_fileService.onDidFilesChange(event => {\n\t\t\tthis._proxy.$onFileEvent({\n\t\t\t\tcreated: event.rawAdded,\n\t\t\t\tchanged: event.rawUpdated,\n\t\t\t\tdeleted: event.rawDeleted\n\t\t\t});\n\t\t}));\n\n\t\tconst that = this;\n\t\tconst fileOperationParticipant = new class implements IWorkingCopyFileOperationParticipant {\n\t\t\tasync participate(files: SourceTargetPair[], operation: FileOperation, undoInfo: IFileOperationUndoRedoInfo | undefined, timeout: number, token: CancellationToken) {\n\t\t\t\tif (undoInfo?.isUndoing) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst cts = new CancellationTokenSource(token);\n\t\t\t\tconst timer = setTimeout(() => cts.cancel(), timeout);\n\n\t\t\t\tconst data = await progressService.withProgress({\n\t\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\t\ttitle: this._progressLabel(operation),\n\t\t\t\t\tcancellable: true,\n\t\t\t\t\tdelay: Math.min(timeout / 2, 3000)\n\t\t\t\t}, () => {\n\t\t\t\t\t// race extension host event delivery against timeout AND user-cancel\n\t\t\t\t\tconst onWillEvent = that._proxy.$onWillRunFileOperation(operation, files, timeout, cts.token);\n\t\t\t\t\treturn raceCancellation(onWillEvent, cts.token);\n\t\t\t\t}, () => {\n\t\t\t\t\t// user-cancel\n\t\t\t\t\tcts.cancel();\n\n\t\t\t\t}).finally(() => {\n\t\t\t\t\tcts.dispose();\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t});\n\n\t\t\t\tif (!data || data.edit.edits.length === 0) {\n\t\t\t\t\t// cancelled, no reply, or no edits\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst needsConfirmation = data.edit.edits.some(edit => edit.metadata?.needsConfirmation);\n\t\t\t\tlet showPreview = storageService.getBoolean(MainThreadFileSystemEventService.MementoKeyAdditionalEdits, StorageScope.PROFILE);\n\n\t\t\t\tif (envService.extensionTestsLocationURI) {\n\t\t\t\t\t// don't show dialog in tests\n\t\t\t\t\tshowPreview = false;\n\t\t\t\t}\n\n\t\t\t\tif (showPreview === undefined) {\n\t\t\t\t\t// show a user facing message\n\n\t\t\t\t\tlet message: string;\n\t\t\t\t\tif (data.extensionNames.length === 1) {\n\t\t\t\t\t\tif (operation === FileOperation.CREATE) {\n\t\t\t\t\t\t\tmessage = localize('ask.1.create', \"Extension '{0}' wants to make refactoring changes with this file creation\", data.extensionNames[0]);\n\t\t\t\t\t\t} else if (operation === FileOperation.COPY) {\n\t\t\t\t\t\t\tmessage = localize('ask.1.copy', \"Extension '{0}' wants to make refactoring changes with this file copy\", data.extensionNames[0]);\n\t\t\t\t\t\t} else if (operation === FileOperation.MOVE) {\n\t\t\t\t\t\t\tmessage = localize('ask.1.move', \"Extension '{0}' wants to make refactoring changes with this file move\", data.extensionNames[0]);\n\t\t\t\t\t\t} else /* if (operation === FileOperation.DELETE) */ {\n\t\t\t\t\t\t\tmessage = localize('ask.1.delete', \"Extension '{0}' wants to make refactoring changes with this file deletion\", data.extensionNames[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (operation === FileOperation.CREATE) {\n\t\t\t\t\t\t\tmessage = localize({ key: 'ask.N.create', comment: ['{0} is a number, e.g \"3 extensions want...\"'] }, \"{0} extensions want to make refactoring changes with this file creation\", data.extensionNames.length);\n\t\t\t\t\t\t} else if (operation === FileOperation.COPY) {\n\t\t\t\t\t\t\tmessage = localize({ key: 'ask.N.copy', comment: ['{0} is a number, e.g \"3 extensions want...\"'] }, \"{0} extensions want to make refactoring changes with this file copy\", data.extensionNames.length);\n\t\t\t\t\t\t} else if (operation === FileOperation.MOVE) {\n\t\t\t\t\t\t\tmessage = localize({ key: 'ask.N.move', comment: ['{0} is a number, e.g \"3 extensions want...\"'] }, \"{0} extensions want to make refactoring changes with this file move\", data.extensionNames.length);\n\t\t\t\t\t\t} else /* if (operation === FileOperation.DELETE) */ {\n\t\t\t\t\t\t\tmessage = localize({ key: 'ask.N.delete', comment: ['{0} is a number, e.g \"3 extensions want...\"'] }, \"{0} extensions want to make refactoring changes with this file deletion\", data.extensionNames.length);\n\t\t\t\t\t\t}\n\n\t\t\t\t\tif (needsConfirmation) {\n\t\t\t\t\t\t// edit which needs confirmation -> always show dialog\n\t\t\t\t\t\tconst { confirmed } = await dialogService.confirm({\n\t\t\t\t\t\t\ttype: Severity.Info,\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\tprimaryButton: localize('preview', \"Show &&Preview\"),\n\t\t\t\t\t\t\tcancelButton: localize('cancel', \"Skip Changes\")\n\t\t\t\t\t\t});\n\t\t\t\t\t\tshowPreview = true;\n\t\t\t\t\t\tif (!confirmed) {\n\t\t\t\t\t\t\t// no changes wanted\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// choice\n\t\t\t\t\t\tenum Choice {\n\t\t\t\t\t\t\tOK = 0,\n\t\t\t\t\t\t\tPreview = 1,\n\t\t\t\t\t\t\tCancel = 2\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { result, checkboxChecked } = await dialogService.prompt<Choice>({\n\t\t\t\t\t\t\ttype: Severity.Info,\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: localize({ key: 'ok', comment: ['&& denotes a mnemonic'] }, \"&&OK\"),\n\t\t\t\t\t\t\t\t\trun: () => Choice.OK\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: localize({ key: 'preview', comment: ['&& denotes a mnemonic'] }, \"Show &&Preview\"),\n\t\t\t\t\t\t\t\t\trun: () => Choice.Preview\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tcancelButton: {\n\t\t\t\t\t\t\t\tlabel: localize('cancel', \"Skip Changes\"),\n\t\t\t\t\t\t\t\trun: () => Choice.Cancel\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcheckbox: { label: localize('again', \"Do not ask me again\") }\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (result === Choice.Cancel) {\n\t\t\t\t\t\t\t// no changes wanted, don't persist cancel option\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowPreview = result === Choice.Preview;\n\t\t\t\t\t\tif (checkboxChecked) {\n\t\t\t\t\t\t\tstorageService.store(MainThreadFileSystemEventService.MementoKeyAdditionalEdits, showPreview, StorageScope.PROFILE, StorageTarget.USER);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlogService.info('[onWill-handler] applying additional workspace edit from extensions', data.extensionNames);\n\n\t\t\t\tawait bulkEditService.apply(\n\t\t\t\t\treviveWorkspaceEditDto(data.edit, uriIdentService),\n\t\t\t\t\t{ undoRedoGroupId: undoInfo?.undoRedoGroupId, showPreview }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tprivate _progressLabel(operation: FileOperation): string {\n\t\t\t\tswitch (operation) {\n\t\t\t\t\tcase FileOperation.CREATE:\n\t\t\t\t\t\treturn localize('msg-create', \"Running 'File Create' participants...\");\n\t\t\t\t\tcase FileOperation.MOVE:\n\t\t\t\t\t\treturn localize('msg-rename', \"Running 'File Rename' participants...\");\n\t\t\t\t\tcase FileOperation.COPY:\n\t\t\t\t\t\treturn localize('msg-copy', \"Running 'File Copy' participants...\");\n\t\t\t\t\tcase FileOperation.DELETE:\n\t\t\t\t\t\treturn localize('msg-delete', \"Running 'File Delete' participants...\");\n\t\t\t\t\tcase FileOperation.WRITE:\n\t\t\t\t\t\treturn localize('msg-write', \"Running 'File Write' participants...\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// BEFORE file operation\n\t\tthis._listener.add(workingCopyFileService.addFileOperationParticipant(fileOperationParticipant));\n\n\t\t// AFTER file operation\n\t\tthis._listener.add(workingCopyFileService.onDidRunWorkingCopyFileOperation(e => this._proxy.$onDidRunFileOperation(e.operation, e.files)));\n\t}\n\n\tasync $watch(\n\t\textensionId: string,\n\t\tsession: number,\n\t\tresource: UriComponents,\n\t\tunvalidatedOpts: IWatchOptions,\n\t\tcorrelate: boolean,\n\t): Promise<void> {\n\t\tconst uri = URI.revive(resource);\n\n\t\tconst opts: IWatchOptions = {\n\t\t\t...unvalidatedOpts,\n\t\t};\n\n\t\t// Convert a recursive watcher to a flat watcher if the path\n\t\t// turns out to not be a folder. Recursive watching is only\n\t\t// possible on folders, so we help all file watchers by checking\n\t\t// early.\n\t\tif (opts.recursive) {\n\t\t\ttry {\n\t\t\t\tconst stat = await this._fileService.stat(uri);\n\t\t\t\tif (!stat.isDirectory) {\n\t\t\t\t\topts.recursive = false;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\t// ignore\n\t\t\t}\n\t\t}\n\n\t\t// Correlated file watching is taken as is\n\t\tif (correlate) {\n\t\t\tthis._logService.trace(\n\t\t\t\t`MainThreadFileSystemEventService#$watch(): request to start watching correlated (extension: ${extensionId}, path: ${uri.toString(true)}, recursive: ${opts.recursive}, session: ${session})`,\n\t\t\t);\n\n\t\t\tconst watcherDisposables = new DisposableStore();\n\t\t\tconst subscription = watcherDisposables.add(\n\t\t\t\tthis._fileService.createWatcher(uri, opts),\n\t\t\t);\n\t\t\twatcherDisposables.add(\n\t\t\t\tsubscription.onDidChange((event) => {\n\t\t\t\t\tthis._proxy.$onFileEvent({\n\t\t\t\t\t\tsession,\n\t\t\t\t\t\tcreated: event.rawAdded,\n\t\t\t\t\t\tchanged: event.rawUpdated,\n\t\t\t\t\t\tdeleted: event.rawDeleted,\n\t\t\t\t\t});\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis._watches.set(session, watcherDisposables);\n\t\t}\n\n\t\t// Uncorrelated file watching gets special treatment\n\t\telse {\n\t\t\tthis._logService.trace(\n\t\t\t\t`MainThreadFileSystemEventService#$watch(): request to start watching uncorrelated (extension: ${extensionId}, path: ${uri.toString(true)}, recursive: ${opts.recursive}, session: ${session})`,\n\t\t\t);\n\n\t\t\tconst workspaceFolder =\n\t\t\t\tthis._contextService.getWorkspaceFolder(uri);\n\n\t\t\t// Automatically add `files.watcherExclude` patterns when watching\n\t\t\t// recursively to give users a chance to configure exclude rules\n\t\t\t// for reducing the overhead of watching recursively\n\t\t\tif (opts.recursive && opts.excludes.length === 0) {\n\t\t\t\tconst config =\n\t\t\t\t\tthis._configurationService.getValue<IFilesConfiguration>();\n\t\t\t\tif (config.files?.watcherExclude) {\n\t\t\t\t\tfor (const key in config.files.watcherExclude) {\n\t\t\t\t\t\tif (key && config.files.watcherExclude[key] === true) {\n\t\t\t\t\t\t\topts.excludes.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Non-recursive watching inside the workspace will overlap with\n\t\t\t// our standard workspace watchers. To prevent duplicate events,\n\t\t\t// we only want to include events for files that are otherwise\n\t\t\t// excluded via `files.watcherExclude`. As such, we configure\n\t\t\t// to include each configured exclude pattern so that only those\n\t\t\t// events are reported that are otherwise excluded.\n\t\t\t// However, we cannot just use the pattern as is, because a pattern\n\t\t\t// such as `bar` for a exclude, will work to exclude any of\n\t\t\t// `<workspace path>/bar` but will not work as include for files within\n\t\t\t// `bar` unless a suffix of `/**` if added.\n\t\t\t// (https://github.com/microsoft/vscode/issues/148245)\n\t\t\telse if (!opts.recursive && workspaceFolder) {\n\t\t\t\tconst config =\n\t\t\t\t\tthis._configurationService.getValue<IFilesConfiguration>();\n\t\t\t\tif (config.files?.watcherExclude) {\n\t\t\t\t\tfor (const key in config.files.watcherExclude) {\n\t\t\t\t\t\tif (key && config.files.watcherExclude[key] === true) {\n\t\t\t\t\t\t\tif (!opts.includes) {\n\t\t\t\t\t\t\t\topts.includes = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst includePattern = `${rtrim(key, \"/\")}/${GLOBSTAR}`;\n\t\t\t\t\t\t\topts.includes.push(\n\t\t\t\t\t\t\t\tnormalizeWatcherPattern(\n\t\t\t\t\t\t\t\t\tworkspaceFolder.uri.fsPath,\n\t\t\t\t\t\t\t\t\tincludePattern,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Still ignore watch request if there are actually no configured\n\t\t\t\t// exclude rules, because in that case our default recursive watcher\n\t\t\t\t// should be able to take care of all events.\n\t\t\t\tif (!opts.includes || opts.includes.length === 0) {\n\t\t\t\t\tthis._logService.trace(\n\t\t\t\t\t\t`MainThreadFileSystemEventService#$watch(): ignoring request to start watching because path is inside workspace and no excludes are configured (extension: ${extensionId}, path: ${uri.toString(true)}, recursive: ${opts.recursive}, session: ${session})`,\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst subscription = this._fileService.watch(uri, opts);\n\t\t\tthis._watches.set(session, subscription);\n\t\t}\n\t}\n\n\t$unwatch(session: number): void {\n\t\tif (this._watches.has(session)) {\n\t\t\tthis._logService.trace(\n\t\t\t\t`MainThreadFileSystemEventService#$unwatch(): request to stop watching (session: ${session})`,\n\t\t\t);\n\t\t\tthis._watches.deleteAndDispose(session);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis._listener.dispose();\n\t\tthis._watches.dispose();\n\t}\n}\n\nregisterAction2(\n\tclass ResetMemento extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: \"files.participants.resetChoice\",\n\t\t\t\ttitle: {\n\t\t\t\t\tvalue: localize(\n\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\"Reset choice for 'File operation needs preview'\",\n\t\t\t\t\t),\n\t\t\t\t\toriginal: `Reset choice for 'File operation needs preview'`,\n\t\t\t\t},\n\t\t\t\tf1: true,\n\t\t\t});\n\t\t}\n\t\trun(accessor: ServicesAccessor) {\n\t\t\taccessor\n\t\t\t\t.get(IStorageService)\n\t\t\t\t.remove(\n\t\t\t\t\tMainThreadFileSystemEventService.MementoKeyAdditionalEdits,\n\t\t\t\t\tStorageScope.PROFILE,\n\t\t\t\t);\n\t\t}\n\t},\n);\n"],
  "mappings": "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",
  "names": ["Choice"]
}
