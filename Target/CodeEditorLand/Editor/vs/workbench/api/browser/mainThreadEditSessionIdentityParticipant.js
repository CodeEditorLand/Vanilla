var m=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var c=(r,t,e,i)=>{for(var o=i>1?void 0:i?d(t,e):t,s=r.length-1,n;s>=0;s--)(n=r[s])&&(o=(i?n(t,e,o):n(o))||o);return i&&o&&m(t,e,o),o},p=(r,t)=>(e,i)=>t(e,i,r);import{raceCancellationError as l}from"../../../../vs/base/common/async.js";import"../../../../vs/base/common/cancellation.js";import"../../../../vs/base/common/lifecycle.js";import{localize as I}from"../../../../vs/nls.js";import{IInstantiationService as x}from"../../../../vs/platform/instantiation/common/instantiation.js";import{IEditSessionIdentityService as y}from"../../../../vs/platform/workspace/common/editSessions.js";import"../../../../vs/platform/workspace/common/workspace.js";import{ExtHostContext as v}from"../../../../vs/workbench/api/common/extHost.protocol.js";import{extHostCustomer as E}from"../../../../vs/workbench/services/extensions/common/extHostCustomers.js";class S{_proxy;timeout=1e4;constructor(t){this._proxy=t.getProxy(v.ExtHostWorkspace)}async participate(t,e){const i=new Promise((o,s)=>{setTimeout(()=>s(new Error(I("timeout.onWillCreateEditSessionIdentity","Aborted onWillCreateEditSessionIdentity-event after 10000ms"))),this.timeout),this._proxy.$onWillCreateEditSessionIdentity(t.uri,e,this.timeout).then(o,s)});return l(i,e)}}let a=class{constructor(t,e,i){this._editSessionIdentityService=i;this._saveParticipantDisposable=this._editSessionIdentityService.addEditSessionIdentityCreateParticipant(e.createInstance(S,t))}_saveParticipantDisposable;dispose(){this._saveParticipantDisposable.dispose()}};a=c([E,p(1,x),p(2,y)],a);export{a as EditSessionIdentityCreateParticipant};
