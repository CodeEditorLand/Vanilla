var NR=Object.defineProperty;var FR=Object.getOwnPropertyDescriptor;var T=(r,e,t,n)=>{for(var i=n>1?void 0:n?FR(e,t):e,o=r.length-1,s;o>=0;o--)(s=r[o])&&(i=(n?s(e,t,i):s(i))||i);return n&&i&&NR(e,t,i),i},S=(r,e)=>(t,n)=>e(t,n,r);function $p(r,e){let t=r;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}var pe=window;function Vb(r){return r===pe?!1:typeof r?.vscodeWindowId=="number"}function Gp(r,e){let t=zb(r,e);if(t!==-1)return r[t]}function zb(r,e,t=r.length-1){for(let n=t;n>=0;n--){let i=r[n];if(e(i))return n}return-1}function Hb(r,e){let t=dc(r,e);return t===-1?void 0:r[t]}function dc(r,e,t=0,n=r.length){let i=t,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(r[s])?i=s+1:o=s}return i-1}function qp(r,e,t=0,n=r.length){let i=t,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(r[s])?o=s:i=s+1}return i}var Kb=class{unexpectedErrorHandler;listeners;constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?yo.isErrorNoTelemetry(e)?new yo(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},Gb=new Kb;function cl(r){Gb.onUnexpectedError(r)}function Ae(r){Xo(r)||Gb.onUnexpectedError(r)}function Zs(r){Xo(r)||Gb.onUnexpectedExternalError(r)}var $b="Canceled";function Xo(r){return r instanceof Ln?!0:r instanceof Error&&r.name===$b&&r.message===$b}var Ln=class extends Error{constructor(){super($b),this.name=this.message}};function ea(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function CE(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}var jp=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}};var yo=class r extends Error{name;constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof r)return e;let t=new r;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},He=class r extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,r.prototype)}};function zn(r,e=0){return r[r.length-(1+e)]}function Si(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(!t(r[n],e[n]))return!1;return!0}function EE(r,e,t){return UR(r.length,n=>t(r[n],e))}function UR(r,e){let t=0,n=r-1;for(;t<=n;){let i=(t+n)/2|0,o=e(i);if(o<0)t=i+1;else if(o>0)n=i-1;else return i}return-(t+1)}function On(r){return r.filter(e=>!!e)}function ul(r){return Array.isArray(r)&&r.length>0}function Hn(r,e=t=>t){let t=new Set;return r.filter(n=>{let i=e(n);return t.has(i)?!1:(t.add(i),!0)})}function cc(r,e){let t=typeof e=="number"?r:0;typeof e=="number"?t=r:(t=0,e=r);let n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function Xp(r,e){return r.push(e),()=>WR(r,e)}function WR(r,e){let t=r.indexOf(e);if(t>-1)return r.splice(t,1),e}function So(r,e,t){let n=r.slice(0,e),i=r.slice(e);return n.concat(t,i)}function qb(r,e){for(let t of e)r.push(t)}function jb(r){return Array.isArray(r)?r:[r]}var TE;(a=>{function r(l){return l<0}a.isLessThan=r;function e(l){return l<=0}a.isLessThanOrEqual=e;function t(l){return l>0}a.isGreaterThan=t;function n(l){return l===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(TE||={});function Xb(r,e){return(t,n)=>e(r(t),r(n))}var ta=class{constructor(e){this.items=e}firstIdx=0;lastIdx=this.items.length-1;get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}},xo=class r{constructor(e){this.iterate=e}static empty=new r(e=>{});forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new r(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new r(t=>this.iterate(n=>t(e(n))))}some(e){let t=!1;return this.iterate(n=>(t=e(n),!t)),t}findFirst(e){let t;return this.iterate(n=>e(n)?(t=n,!1):!0),t}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(i=>((n||TE.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0)),t}};function Qb(r,e){let t=Object.create(null);for(let n of r){let i=e(n),o=t[i];o||(o=t[i]=[]),o.push(n)}return t}function Yb(){return globalThis._VSCODE_NLS_MESSAGES}function uc(){return globalThis._VSCODE_NLS_LANGUAGE}var zR=uc()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function Qp(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,(n,i)=>{let o=i[0],s=e[o],a=n;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),zR&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),t}function c(r,e,...t){return Qp(typeof r=="number"?wE(r,e):e,t)}function wE(r,e){let t=Yb()?.[r];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${r} !!!`)}return t}function ii(r,e,...t){let n;typeof r=="number"?n=wE(r,e):n=e;let i=Qp(n,t);return{value:i,original:e===n?i:Qp(e,t)}}var pl="en",mc=!1,gc=!1,hc=!1,HR=!1,RE=!1,Zb=!1,KR=!1,ev=!1,$R=!1,GR=!1,pc,Yp=pl,kE=pl,qR,Co,Eo=globalThis,Ci;typeof Eo.vscode<"u"&&typeof Eo.vscode.process<"u"?Ci=Eo.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Ci=process);var PE=typeof Ci?.versions?.electron=="string",jR=PE&&Ci?.type==="renderer";if(typeof Ci=="object"){mc=Ci.platform==="win32",gc=Ci.platform==="darwin",hc=Ci.platform==="linux",HR=hc&&!!Ci.env.SNAP&&!!Ci.env.SNAP_REVISION,KR=PE,$R=!!Ci.env.CI||!!Ci.env.BUILD_ARTIFACTSTAGINGDIRECTORY,pc=pl,Yp=pl;let r=Ci.env.VSCODE_NLS_CONFIG;if(r)try{let e=JSON.parse(r);pc=e.userLocale,kE=e.osLocale,Yp=e.resolvedLanguage||pl,qR=e.languagePack?.translationsConfigFile}catch{}RE=!0}else typeof navigator=="object"&&!jR?(Co=navigator.userAgent,mc=Co.indexOf("Windows")>=0,gc=Co.indexOf("Macintosh")>=0,ev=(Co.indexOf("Macintosh")>=0||Co.indexOf("iPad")>=0||Co.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,hc=Co.indexOf("Linux")>=0,GR=Co?.indexOf("Mobi")>=0,Zb=!0,Yp=uc()||pl,pc=navigator.language.toLowerCase(),kE=pc):console.error("Unable to resolve platform.");var Jb=0;gc?Jb=1:mc?Jb=3:hc&&(Jb=2);var lt=mc,Fe=gc,on=hc;var Qo=RE;var Yt=Zb,XR=Zb&&typeof Eo.importScripts=="function",LE=XR?Eo.origin:void 0,hl=ev;var Fr=Co,Ei=Yp,QR;(n=>{function r(){return Ei}n.value=r;function e(){return Ei.length===2?Ei==="en":Ei.length>=3?Ei[0]==="e"&&Ei[1]==="n"&&Ei[2]==="-":!1}n.isDefaultVariant=e;function t(){return Ei==="en"}n.isDefault=t})(QR||={});var OE=pc;var YR=typeof Eo.postMessage=="function"&&!Eo.importScripts,Jp=(()=>{if(YR){let r=[];Eo.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=r.length;n<i;n++){let o=r[n];if(o.id===t.data.vscodeScheduleAsyncWork){r.splice(n,1),o.callback();return}}});let e=0;return t=>{let n=++e;r.push({id:n,callback:t}),Eo.postMessage({vscodeScheduleAsyncWork:n},"*")}}return r=>setTimeout(r)})();var Br=gc||ev?2:mc?1:3,DE=!0,_E=!1;function AE(){if(!_E){_E=!0;let r=new Uint8Array(2);r[0]=1,r[1]=2,DE=new Uint16Array(r.buffer)[0]===513}return DE}var tv=!!(Fr&&Fr.indexOf("Chrome")>=0),Zp=!!(Fr&&Fr.indexOf("Firefox")>=0),ME=!!(!tv&&Fr&&Fr.indexOf("Safari")>=0),NE=!!(Fr&&Fr.indexOf("Edg/")>=0),f2=!!(Fr&&Fr.indexOf("Android")>=0);var na,nv=globalThis.vscode;if(typeof nv<"u"&&typeof nv.process<"u"){let r=nv.process;na={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?na={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:na={get platform(){return lt?"win32":Fe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var fc=na.cwd,To=na.env,iv=na.platform,JR=na.arch;var e0=65,t0=97,n0=90,i0=122,Zo=46,sn=47,ri=92,Yo=58,r0=63,eh=class extends Error{code;constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${o} ${i} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function o0(r,e){if(r===null||typeof r!="object")throw new eh(e,"Object",r)}function Lt(r,e){if(typeof r!="string")throw new eh(e,"string",r)}var oi=iv==="win32";function ze(r){return r===sn||r===ri}function rv(r){return r===sn}function Jo(r){return r>=e0&&r<=n0||r>=t0&&r<=i0}function th(r,e,t,n){let i="",o=0,s=-1,a=0,l=0;for(let d=0;d<=r.length;++d){if(d<r.length)l=r.charCodeAt(d);else{if(n(l))break;l=sn}if(n(l)){if(!(s===d-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Zo||i.charCodeAt(i.length-2)!==Zo){if(i.length>2){let u=i.lastIndexOf(t);u===-1?(i="",o=0):(i=i.slice(0,u),o=i.length-1-i.lastIndexOf(t)),s=d,a=0;continue}else if(i.length!==0){i="",o=0,s=d,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",o=2)}else i.length>0?i+=`${t}${r.slice(s+1,d)}`:i=r.slice(s+1,d),o=d-s-1;s=d,a=0}else l===Zo&&a!==-1?++a:a=-1}return i}function s0(r){return r?`${r[0]==="."?"":"."}${r}`:""}function FE(r,e){o0(e,"pathObject");let t=e.dir||e.root,n=e.base||`${e.name||""}${s0(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${r}${n}`:n}var It={resolve(...r){let e="",t="",n=!1;for(let i=r.length-1;i>=-1;i--){let o;if(i>=0){if(o=r[i],Lt(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=fc():(o=To[`=${e}`]||fc(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===ri)&&(o=`${e}\\`));let s=o.length,a=0,l="",d=!1,u=o.charCodeAt(0);if(s===1)ze(u)&&(a=1,d=!0);else if(ze(u))if(d=!0,ze(o.charCodeAt(1))){let p=2,h=p;for(;p<s&&!ze(o.charCodeAt(p));)p++;if(p<s&&p!==h){let g=o.slice(h,p);for(h=p;p<s&&ze(o.charCodeAt(p));)p++;if(p<s&&p!==h){for(h=p;p<s&&!ze(o.charCodeAt(p));)p++;(p===s||p!==h)&&(l=`\\\\${g}\\${o.slice(h,p)}`,a=p)}}}else a=1;else Jo(u)&&o.charCodeAt(1)===Yo&&(l=o.slice(0,2),a=2,s>2&&ze(o.charCodeAt(2))&&(d=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=th(t,!n,"\\",ze),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){Lt(r,"path");let e=r.length;if(e===0)return".";let t=0,n,i=!1,o=r.charCodeAt(0);if(e===1)return rv(o)?"\\":r;if(ze(o))if(i=!0,ze(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ze(r.charCodeAt(a));)a++;if(a<e&&a!==l){let d=r.slice(l,a);for(l=a;a<e&&ze(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ze(r.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${r.slice(l)}\\`;a!==l&&(n=`\\\\${d}\\${r.slice(l,a)}`,t=a)}}}else t=1;else Jo(o)&&r.charCodeAt(1)===Yo&&(n=r.slice(0,2),t=2,e>2&&ze(r.charCodeAt(2))&&(i=!0,t=3));let s=t<e?th(r.slice(t),!i,"\\",ze):"";return s.length===0&&!i&&(s="."),s.length>0&&ze(r.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(r){Lt(r,"path");let e=r.length;if(e===0)return!1;let t=r.charCodeAt(0);return ze(t)||e>2&&Jo(t)&&r.charCodeAt(1)===Yo&&ze(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let o=0;o<r.length;++o){let s=r[o];Lt(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&ze(t.charCodeAt(0))){++i;let o=t.length;o>1&&ze(t.charCodeAt(1))&&(++i,o>2&&(ze(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&ze(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return It.normalize(e)},relative(r,e){if(Lt(r,"from"),Lt(e,"to"),r===e)return"";let t=It.resolve(r),n=It.resolve(e);if(t===n||(r=t.toLowerCase(),e=n.toLowerCase(),r===e))return"";let i=0;for(;i<r.length&&r.charCodeAt(i)===ri;)i++;let o=r.length;for(;o-1>i&&r.charCodeAt(o-1)===ri;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===ri;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===ri;)l--;let d=l-a,u=s<d?s:d,p=-1,h=0;for(;h<u;h++){let b=r.charCodeAt(i+h);if(b!==e.charCodeAt(a+h))break;b===ri&&(p=h)}if(h!==u){if(p===-1)return n}else{if(d>u){if(e.charCodeAt(a+h)===ri)return n.slice(a+h+1);if(h===2)return n.slice(a+h)}s>u&&(r.charCodeAt(i+h)===ri?p=h:h===2&&(p=3)),p===-1&&(p=0)}let g="";for(h=i+p+1;h<=o;++h)(h===o||r.charCodeAt(h)===ri)&&(g+=g.length===0?"..":"\\..");return a+=p,g.length>0?`${g}${n.slice(a,l)}`:(n.charCodeAt(a)===ri&&++a,n.slice(a,l))},toNamespacedPath(r){if(typeof r!="string"||r.length===0)return r;let e=It.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===ri){if(e.charCodeAt(1)===ri){let t=e.charCodeAt(2);if(t!==r0&&t!==Zo)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Jo(e.charCodeAt(0))&&e.charCodeAt(1)===Yo&&e.charCodeAt(2)===ri)return`\\\\?\\${e}`;return r},dirname(r){Lt(r,"path");let e=r.length;if(e===0)return".";let t=-1,n=0,i=r.charCodeAt(0);if(e===1)return ze(i)?r:".";if(ze(i)){if(t=n=1,ze(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ze(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&ze(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ze(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=n=a+1)}}}}else Jo(i)&&r.charCodeAt(1)===Yo&&(t=e>2&&ze(r.charCodeAt(2))?3:2,n=t);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(ze(r.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return r.slice(0,o)},basename(r,e){e!==void 0&&Lt(e,"suffix"),Lt(r,"path");let t=0,n=-1,i=!0,o;if(r.length>=2&&Jo(r.charCodeAt(0))&&r.charCodeAt(1)===Yo&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=t;--o){let l=r.charCodeAt(o);if(ze(l)){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=t;--o)if(ze(r.charCodeAt(o))){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){Lt(r,"path");let e=0,t=-1,n=0,i=-1,o=!0,s=0;r.length>=2&&r.charCodeAt(1)===Yo&&Jo(r.charCodeAt(0))&&(e=n=2);for(let a=r.length-1;a>=e;--a){let l=r.charCodeAt(a);if(ze(l)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),l===Zo?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:FE.bind(null,"\\"),parse(r){Lt(r,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;let t=r.length,n=0,i=r.charCodeAt(0);if(t===1)return ze(i)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(ze(i)){if(n=1,ze(r.charCodeAt(1))){let p=2,h=p;for(;p<t&&!ze(r.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&ze(r.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&!ze(r.charCodeAt(p));)p++;p===t?n=p:p!==h&&(n=p+1)}}}}else if(Jo(i)&&r.charCodeAt(1)===Yo){if(t<=2)return e.root=e.dir=r,e;if(n=2,ze(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;n=3}}n>0&&(e.root=r.slice(0,n));let o=-1,s=n,a=-1,l=!0,d=r.length-1,u=0;for(;d>=n;--d){if(i=r.charCodeAt(d),ze(i)){if(!l){s=d+1;break}continue}a===-1&&(l=!1,a=d+1),i===Zo?o===-1?o=d:u!==1&&(u=1):o!==-1&&(u=-1)}return a!==-1&&(o===-1||u===0||u===1&&o===a-1&&o===s+1?e.base=e.name=r.slice(s,a):(e.name=r.slice(s,o),e.base=r.slice(s,a),e.ext=r.slice(o,a))),s>0&&s!==n?e.dir=r.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},a0=(()=>{if(oi){let r=/\\/g;return()=>{let e=fc().replace(r,"/");return e.slice(e.indexOf("/"))}}return()=>fc()})(),Pe={resolve(...r){let e="",t=!1;for(let n=r.length-1;n>=-1&&!t;n--){let i=n>=0?r[n]:a0();Lt(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===sn)}return e=th(e,!t,"/",rv),t?`/${e}`:e.length>0?e:"."},normalize(r){if(Lt(r,"path"),r.length===0)return".";let e=r.charCodeAt(0)===sn,t=r.charCodeAt(r.length-1)===sn;return r=th(r,!e,"/",rv),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return Lt(r,"path"),r.length>0&&r.charCodeAt(0)===sn},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){let n=r[t];Lt(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Pe.normalize(e)},relative(r,e){if(Lt(r,"from"),Lt(e,"to"),r===e||(r=Pe.resolve(r),e=Pe.resolve(e),r===e))return"";let t=1,n=r.length,i=n-t,o=1,s=e.length-o,a=i<s?i:s,l=-1,d=0;for(;d<a;d++){let p=r.charCodeAt(t+d);if(p!==e.charCodeAt(o+d))break;p===sn&&(l=d)}if(d===a)if(s>a){if(e.charCodeAt(o+d)===sn)return e.slice(o+d+1);if(d===0)return e.slice(o+d)}else i>a&&(r.charCodeAt(t+d)===sn?l=d:d===0&&(l=0));let u="";for(d=t+l+1;d<=n;++d)(d===n||r.charCodeAt(d)===sn)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(o+l)}`},toNamespacedPath(r){return r},dirname(r){if(Lt(r,"path"),r.length===0)return".";let e=r.charCodeAt(0)===sn,t=-1,n=!0;for(let i=r.length-1;i>=1;--i)if(r.charCodeAt(i)===sn){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&Lt(e,"ext"),Lt(r,"path");let t=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=0;--o){let l=r.charCodeAt(o);if(l===sn){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===sn){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){Lt(r,"path");let e=-1,t=0,n=-1,i=!0,o=0;for(let s=r.length-1;s>=0;--s){let a=r.charCodeAt(s);if(a===sn){if(!i){t=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===Zo?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":r.slice(e,n)},format:FE.bind(null,"/"),parse(r){Lt(r,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;let t=r.charCodeAt(0)===sn,n;t?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,l=r.length-1,d=0;for(;l>=n;--l){let u=r.charCodeAt(l);if(u===sn){if(!a){o=l+1;break}continue}s===-1&&(a=!1,s=l+1),u===Zo?i===-1?i=l:d!==1&&(d=1):i!==-1&&(d=-1)}if(s!==-1){let u=o===0&&t?1:o;i===-1||d===0||d===1&&i===s-1&&i===o+1?e.base=e.name=r.slice(u,s):(e.name=r.slice(u,i),e.base=r.slice(u,s),e.ext=r.slice(i,s))}return o>0?e.dir=r.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Pe.win32=It.win32=It;Pe.posix=It.posix=Pe;var Ti=oi?It.normalize:Pe.normalize,wi=oi?It.isAbsolute:Pe.isAbsolute,An=oi?It.join:Pe.join,ml=oi?It.resolve:Pe.resolve,gl=oi?It.relative:Pe.relative,fl=oi?It.dirname:Pe.dirname,tr=oi?It.basename:Pe.basename,nh=oi?It.extname:Pe.extname,I2=oi?It.format:Pe.format,BE=oi?It.parse:Pe.parse,y2=oi?It.toNamespacedPath:Pe.toNamespacedPath,Mn=oi?It.sep:Pe.sep,x2=oi?It.delimiter:Pe.delimiter;var d0=/^\w[\w\d+.-]*$/,c0=/^\//,u0=/^\/\//;function p0(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!d0.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!c0.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u0.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function h0(r,e){return!r&&!e?"file":r}function m0(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==nr&&(e=nr+e):e=nr;break}return e}var gt="",nr="/",g0=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,L=class r{static isUri(e){return e instanceof r?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,t,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||gt,this.authority=e.authority||gt,this.path=e.path||gt,this.query=e.query||gt,this.fragment=e.fragment||gt):(this.scheme=h0(e,s),this.authority=t||gt,this.path=m0(this.scheme,n||gt),this.query=i||gt,this.fragment=o||gt,p0(this,s))}get fsPath(){return bc(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=gt),n===void 0?n=this.authority:n===null&&(n=gt),i===void 0?i=this.path:i===null&&(i=gt),o===void 0?o=this.query:o===null&&(o=gt),s===void 0?s=this.fragment:s===null&&(s=gt),t===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new es(t,n,i,o,s)}static parse(e,t=!1){let n=g0.exec(e);return n?new es(n[2]||gt,ih(n[4]||gt),ih(n[5]||gt),ih(n[7]||gt),ih(n[9]||gt),t):new es(gt,gt,gt,gt,gt)}static file(e){let t=gt;if(lt&&(e=e.replace(/\\/g,nr)),e[0]===nr&&e[1]===nr){let n=e.indexOf(nr,2);n===-1?(t=e.substring(2),e=nr):(t=e.substring(2,n),e=e.substring(n)||nr)}return new es("file",t,e,gt,gt)}static from(e,t){return new es(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return lt&&e.scheme==="file"?n=r.file(It.join(bc(e,!0),...t)).path:n=Pe.join(e.path,...t),e.with({path:n})}toString(e=!1){return ov(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof r)return e;{let t=new es(e);return t._formatted=e.external??null,t._fsPath=e._sep===zE?e.fsPath??null:null,t}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function VE(r){return!r||typeof r!="object"?!1:typeof r.scheme=="string"&&(typeof r.authority=="string"||typeof r.authority>"u")&&(typeof r.path=="string"||typeof r.path>"u")&&(typeof r.query=="string"||typeof r.query>"u")&&(typeof r.fragment=="string"||typeof r.fragment>"u")}var zE=lt?1:void 0,es=class extends L{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=bc(this,!1)),this._fsPath}toString(e=!1){return e?ov(this,!0):(this._formatted||(this._formatted=ov(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=zE),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},HE={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function UE(r,e,t){let n,i=-1;for(let o=0;o<r.length;o++){let s=r.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||t&&s===91||t&&s===93||t&&s===58)i!==-1&&(n+=encodeURIComponent(r.substring(i,o)),i=-1),n!==void 0&&(n+=r.charAt(o));else{n===void 0&&(n=r.substr(0,o));let a=HE[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(r.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(r.substring(i))),n!==void 0?n:r}function f0(r){let e;for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);n===35||n===63?(e===void 0&&(e=r.substr(0,t)),e+=HE[n]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function bc(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,lt&&(t=t.replace(/\//g,"\\")),t}function ov(r,e){let t=e?f0:UE,n="",{scheme:i,authority:o,path:s,query:a,fragment:l}=r;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=nr,n+=nr),o){let d=o.indexOf("@");if(d!==-1){let u=o.substr(0,d);o=o.substr(d+1),d=u.lastIndexOf(":"),d===-1?n+=t(u,!1,!1):(n+=t(u.substr(0,d),!1,!1),n+=":",n+=t(u.substr(d+1),!1,!0)),n+="@"}o=o.toLowerCase(),d=o.lastIndexOf(":"),d===-1?n+=t(o,!1,!0):(n+=t(o.substr(0,d),!1,!0),n+=o.substr(d))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let d=s.charCodeAt(1);d>=65&&d<=90&&(s=`/${String.fromCharCode(d+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let d=s.charCodeAt(0);d>=65&&d<=90&&(s=`${String.fromCharCode(d+32)}:${s.substr(2)}`)}n+=t(s,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:UE(l,!1,!1)),n}function KE(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+KE(r.substr(3)):r}}var WE=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ih(r){return r.match(WE)?r.replace(WE,e=>KE(e)):r}function Ic(r,e,t){let n=r.get(e);return n===void 0&&(n=t,r.set(e,n)),n}var sv=class{constructor(e,t){this.uri=e;this.value=t}};function b0(r){return Array.isArray(r)}var Ft=class r{static defaultToKey=e=>e.toString();[Symbol.toStringTag]="ResourceMap";map;toKey;constructor(e,t){if(e instanceof r)this.map=new Map(e.map),this.toKey=t??r.defaultToKey;else if(b0(e)){this.map=new Map,this.toKey=t??r.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??r.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new sv(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[Symbol.iterator](){for(let[,e]of this.map)yield[e.uri,e.value]}},rh=class{[Symbol.toStringTag]="ResourceSet";_map;constructor(e,t){!e||typeof e=="function"?this._map=new Ft(e):(this._map=new Ft(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,i)=>e.call(t,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[Symbol.iterator](){return this.keys()}};var av=class{[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){let n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}},oh=class extends av{_limit;_ratio;constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},Ui=class extends oh{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}},sh=class extends oh{constructor(e,t=1){super(e,t)}trim(e){this.trimNew(e)}set(e,t){return this._limit<=this.size&&!this.has(e)&&this.trim(Math.round(this._limit*this._ratio)-1),super.set(e,t),this}};var vc=class{map=new Map;add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){let n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){let n=this.map.get(e);n&&n.forEach(t)}get(e){let t=this.map.get(e);return t||new Set}};function yc(r,e){let t=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=r.apply(t,arguments)}finally{e()}else i=r.apply(t,arguments);return i}}var yt;(A=>{function r(B){return B&&typeof B=="object"&&typeof B[Symbol.iterator]=="function"}A.is=r;let e=Object.freeze([]);function t(){return e}A.empty=t;function*n(B){yield B}A.single=n;function i(B){return r(B)?B:n(B)}A.wrap=i;function o(B){return B||e}A.from=o;function*s(B){for(let W=B.length-1;W>=0;W--)yield B[W]}A.reverse=s;function a(B){return!B||B[Symbol.iterator]().next().done===!0}A.isEmpty=a;function l(B){return B[Symbol.iterator]().next().value}A.first=l;function d(B,W){let H=0;for(let ue of B)if(W(ue,H++))return!0;return!1}A.some=d;function u(B,W){for(let H of B)if(W(H))return H}A.find=u;function*p(B,W){for(let H of B)W(H)&&(yield H)}A.filter=p;function*h(B,W){let H=0;for(let ue of B)yield W(ue,H++)}A.map=h;function*g(B,W){let H=0;for(let ue of B)yield*W(ue,H++)}A.flatMap=g;function*b(...B){for(let W of B)yield*W}A.concat=b;function f(B,W,H){let ue=H;for(let Y of B)ue=W(ue,Y);return ue}A.reduce=f;function*v(B,W,H=B.length){for(W<0&&(W+=B.length),H<0?H+=B.length:H>B.length&&(H=B.length);W<H;W++)yield B[W]}A.slice=v;function D(B,W=Number.POSITIVE_INFINITY){let H=[];if(W===0)return[H,B];let ue=B[Symbol.iterator]();for(let Y=0;Y<W;Y++){let oe=ue.next();if(oe.done)return[H,A.empty()];H.push(oe.value)}return[H,{[Symbol.iterator](){return ue}}]}A.consume=D;async function R(B){let W=[];for await(let H of B)W.push(H);return Promise.resolve(W)}A.asyncToArray=R})(yt||={});var v0=!1,ia=null;function I0(r){ia=r}if(v0){let r="__is_disposable_tracked__";I0(new class{trackDisposable(e){let t=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[r]||console.log(t)},3e3)}setParent(e,t){if(e&&e!==O.None)try{e[r]=!0}catch{}}markAsDisposed(e){if(e&&e!==O.None)try{e[r]=!0}catch{}}markAsSingleton(e){}})}function ra(r){return ia?.trackDisposable(r),r}function oa(r){ia?.markAsDisposed(r)}function xc(r,e){ia?.setParent(r,e)}function y0(r,e){if(ia)for(let t of r)ia.setParent(t,e)}function lv(r){return ia?.markAsSingleton(r),r}function $E(r){return typeof r=="object"&&r!==null&&typeof r.dispose=="function"&&r.dispose.length===0}function ft(r){if(yt.is(r)){let e=[];for(let t of r)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function ir(...r){let e=j(()=>ft(r));return y0(r,e),e}function j(r){let e=ra({dispose:yc(()=>{oa(e),r()})});return e}var le=class r{static DISABLE_DISPOSED_WARNING=!1;_toDispose=new Set;_isDisposed=!1;constructor(){ra(this)}dispose(){this._isDisposed||(oa(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{ft(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return xc(e,this),this._isDisposed?r.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),xc(e,null))}},O=class{static None=Object.freeze({dispose(){}});_store=new le;constructor(){ra(this),xc(this._store,this)}dispose(){oa(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}},fn=class{_value;_isDisposed=!1;constructor(){ra(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&xc(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,oa(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&xc(e,null),e}};var vl=class{constructor(e){this._disposable=e}_counter=1;acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}};var $n=class{_store=new Map;_isDisposed=!1;constructor(){ra(this)}dispose(){oa(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{ft(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){let t=this._store.get(e);return this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var GE=Object.freeze(function(r,e){let t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}}),We;(n=>{function r(i){return i===n.None||i===n.Cancelled||i instanceof Il?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=r,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Q.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:GE})})(We||={});var Il=class{_isCancelled=!1;_emitter=null;cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?GE:(this._emitter||(this._emitter=new E),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Nn=class{_token=void 0;_parentListener=void 0;constructor(e){this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Il),this._token}cancel(){this._token?this._token instanceof Il&&this._token.cancel():this._token=We.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Il&&this._token.dispose():this._token=We.None}};var xt=class r{static Undefined=new r(void 0);element;next;prev;constructor(e){this.element=e,this.next=r.Undefined,this.prev=r.Undefined}},an=class{_first=xt.Undefined;_last=xt.Undefined;_size=0;get size(){return this._size}isEmpty(){return this._first===xt.Undefined}clear(){let e=this._first;for(;e!==xt.Undefined;){let t=e.next;e.prev=xt.Undefined,e.next=xt.Undefined,e=t}this._first=xt.Undefined,this._last=xt.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new xt(e);if(this._first===xt.Undefined)this._first=n,this._last=n;else if(t){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==xt.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==xt.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==xt.Undefined&&e.next!==xt.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===xt.Undefined&&e.next===xt.Undefined?(this._first=xt.Undefined,this._last=xt.Undefined):e.next===xt.Undefined?(this._last=this._last.prev,this._last.next=xt.Undefined):e.prev===xt.Undefined&&(this._first=this._first.next,this._first.prev=xt.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==xt.Undefined;)yield e.element,e=e.next}};var ts=(r,e)=>r===e;var ki=class{constructor(e,t,n){this.owner=e;this.debugNameSource=t;this.referenceFn=n}getDebugName(e){return QE(e,this)}},qE=new Map,dv=new WeakMap;function QE(r,e){let t=dv.get(r);if(t)return t;let n=x0(r,e);if(n){let i=qE.get(n)??0;i++,qE.set(n,i);let o=i===1?n:`${n}#${i}`;return dv.set(r,o),o}}function x0(r,e){let t=dv.get(r);if(t)return t;let n=e.owner?C0(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let s=e.referenceFn;if(s!==void 0&&(i=ah(s),i!==void 0))return n+i;if(e.owner!==void 0){let a=S0(e.owner,r);if(a!==void 0)return n+a}}function S0(r,e){for(let t in r)if(r[t]===e)return t}var jE=new Map,XE=new WeakMap;function C0(r){let e=XE.get(r);if(e)return e;let t=E0(r),n=jE.get(t)??0;n++,jE.set(t,n);let i=n===1?t:`${t}#${n}`;return XE.set(r,i),i}function E0(r){let e=r.constructor;return e?e.name:"Object"}function ah(r){let e=r.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}function Sc(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function YE(r,e="Unreachable"){throw new Error(e)}function yl(r){if(!r()){debugger;r(),Ae(new He("Assertion Failed"))}}function Ur(r){return new lh(new ki(void 0,void 0,r),r,void 0,void 0)}var lh=class{constructor(e,t,n,i){this._debugNameData=e;this._runFn=t;this.createChangeSummary=n;this._handleChange=i;this.changeSummary=this.createChangeSummary?.(),si()?.handleAutorunCreated(this),this._runIfNeeded(),ra(this)}state=2;updateCount=0;disposed=!1;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),oa(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;let t=this.disposed;try{if(!t){si()?.handleAutorunTriggered(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}catch(i){cl(i)}}}finally{t||si()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}yl(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e))try{(this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:i=>i===e},this.changeSummary):!0)&&(this.state=2)}catch(n){cl(n)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}};(e=>e.Observer=lh)(Ur||={});function cv(r,e){return new dh(new ki(r.owner,r.debugName,r.debugReferenceFn),e,void 0,void 0,r.onLastObserverRemoved,r.equalsFn??ts)}ZE(cv);var dh=class extends ns{constructor(t,n,i,o,s=void 0,a){super();this._debugNameData=t;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=s;this._equalityComparator=a;this.changeSummary=this.createChangeSummary?.(),si()?.handleDerivedCreated(this)}state=0;value=void 0;updateCount=0;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary=void 0;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0;for(let t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){let t=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(let t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let t=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=t;let n=this.state!==0,i=this.value;this.state=3;let o=!1;try{let s=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,s)}finally{for(let a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),si()?.handleDerivedRecomputed(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(s){cl(s)}if(o)for(let s of this.observers)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(t){this.updateCount++;let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}endUpdate(t){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this)}yl(()=>this.updateCount>=0)}handlePossibleChange(t){if(this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(t,n){if(this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:t,change:n,didChange:s=>s===t},this.changeSummary):!0}catch(s){cl(s)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let s of this.observers)s.handlePossibleChange(this)}}readObservable(t){t.addObserver(this);let n=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),n}addObserver(t){let n=!this.observers.has(t)&&this.updateCount>0;super.addObserver(t),n&&t.beginUpdate(this)}removeObserver(t){let n=this.observers.has(t)&&this.updateCount>0;super.removeObserver(t),n&&t.endUpdate(this)}};function pv(r){return new uv(r)}var uv=class extends Cc{constructor(t){super();this.value=t}get debugName(){return this.toString()}get(){return this.value}addObserver(t){}removeObserver(t){}toString(){return`Const: ${this.value}`}};function hv(...r){let e,t,n;return r.length===3?[e,t,n]=r:[t,n]=r,new is(new ki(e,void 0,n),t,n,()=>is.globalTransaction,ts)}var is=class extends ns{constructor(t,n,i,o,s){super();this._debugNameData=t;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=s}static globalTransaction;value;hasValue=!1;subscription;getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let t=this.getDebugName();return"From Event"+(t?`: ${t}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}handleEvent=t=>{let n=this._getValue(t),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),s=!1;o&&(this.value=n,this.hasValue&&(s=!0,mv(this._getTransaction(),a=>{si()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)a.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")})),this.hasValue=!0),s||si()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})};onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(t=>{t.Observer=is;function e(n,i){let o=!1;is.globalTransaction===void 0&&(is.globalTransaction=n,o=!0);try{i()}finally{o&&(is.globalTransaction=void 0)}}t.batchEventsGlobally=e})(hv||={});function tT(r){let e=new ch(!1,void 0);return r.addObserver(e),j(()=>{r.removeObserver(e)})}rT(tT);function nT(r,e){let t=new ch(!0,e);return r.addObserver(t),e?e(r.get()):r.reportChanges(),j(()=>{r.removeObserver(t)})}iT(nT);var ch=class{constructor(e,t){this._forceRecompute=e;this._handleValue=t}_counter=0;beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}};var oT;function sT(r){oT=r}function si(){return oT}var ph=class{indentation=0;textToConsoleArgs(e){return k0([xl(R0("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[xl(" "),rr(Tc(e.oldValue,70),{color:"red",strikeThrough:!0}),xl(" "),rr(Tc(e.newValue,60),{color:"green"})]:[xl(" (unchanged)")]:[xl(" "),rr(Tc(e.newValue,60),{color:"green"}),xl(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([Ec("observable value changed"),rr(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}changedObservablesSets=new WeakMap;formatChanges(e){if(e.size!==0)return rr(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,i)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,i]))}handleDerivedRecomputed(e,t){let n=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Ec("derived recomputed"),rr(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([Ec("observable from event triggered"),rr(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,i)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,i]))}handleAutorunTriggered(e){let t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Ec("autorun"),rr(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.textToConsoleArgs([Ec("transaction"),rr(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function k0(r){let e=new Array,t=[],n="";function i(s){if("length"in s)for(let a of s)a&&i(a);else"text"in s?(n+=`%c${s.text}`,e.push(s.style),s.data&&t.push(...s.data)):"data"in s&&t.push(...s.data)}i(r);let o=[n,...e];return o.push(...t),o}function xl(r){return rr(r,{color:"black"})}function Ec(r){return rr(P0(`${r}: `,10),{color:"black",bold:!0})}function rr(r,e={color:"black"}){function t(i){return Object.entries(i).reduce((o,[s,a])=>`${o}${s}:${a};`,"")}let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:r,style:t(n)}}function Tc(r,e){switch(typeof r){case"number":return""+r;case"string":return r.length+2<=e?`"${r}"`:`"${r.substr(0,e-7)}"+...`;case"boolean":return r?"true":"false";case"undefined":return"undefined";case"object":return r===null?"null":Array.isArray(r)?D0(r,e):_0(r,e);case"symbol":return r.toString();case"function":return`[[Function${r.name?" "+r.name:""}]]`;default:return""+r}}function D0(r,e){let t="[ ",n=!0;for(let i of r){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${Tc(i,e-t.length)}`}return t+=" ]",t}function _0(r,e){let t="{ ",n=!0;for(let[i,o]of Object.entries(r)){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${i}: ${Tc(o,e-t.length)}`}return t+=" }",t}function R0(r,e){let t="";for(let n=1;n<=e;n++)t+=r;return t}function P0(r,e){for(;r.length<e;)r+=" ";return r}var aT;function iT(r){aT=r}var lT;function rT(r){lT=r}var gv;function ZE(r){gv=r}var Cc=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){let n=t===void 0?void 0:e,i=t===void 0?e:t;return gv({owner:n,debugName:()=>{let o=ah(i);if(o!==void 0)return o;let a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return gv({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(aT(this,t)),this}keepObserved(e){return e.add(lT(this)),this}get debugValue(){return this.get()}},ns=class extends Cc{observers=new Set;addObserver(e){let t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};function uh(r,e){let t=new wc(r,e);try{r(t)}finally{t.finish()}}function mv(r,e,t){r?e(r):uh(e,t)}var wc=class{constructor(e,t){this._fn=e;this._getDebugName=t;si()?.handleBeginTransaction(this)}updatingObservers=[];getDebugName(){return this._getDebugName?this._getDebugName():ah(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){let e=this.updatingObservers;for(let t=0;t<e.length;t++){let{observer:n,observable:i}=e[t];n.endUpdate(i)}this.updatingObservers=null,si()?.handleEndTransaction()}};function Di(r,e){let t;return typeof r=="string"?t=new ki(void 0,r,void 0):t=new ki(r,void 0,void 0),new hh(t,e,ts)}var hh=class extends ns{constructor(t,n,i){super();this._debugNameData=t;this._equalityComparator=i;this._value=n}_value;get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(t,n,i){if(i===void 0&&this._equalityComparator(this._value,t))return;let o;n||(n=o=new wc(()=>{},()=>`Setting ${this.debugName}`));try{let s=this._value;this._setValue(t),si()?.handleObservableChanged(this,{oldValue:s,newValue:t,change:i,didChange:!0,hadValue:!0});for(let a of this.observers)n.updateObserver(a,this),a.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(t){this._value=t}};var O0=!1;O0&&sT(new ph);var A0=globalThis.performance&&typeof globalThis.performance.now=="function",sa=class r{_startTime;_stopTime;_now;static create(e){return new r(e)}constructor(e){this._now=A0&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var dT=Symbol("MicrotaskDelay");var M0=!1,cT=!1,N0=!1,Q;(ut=>{ut.None=()=>O.None;function e(se){if(N0){let{onDidAddListener:G}=se,te=kc.create(),J=0;se.onDidAddListener=()=>{++J===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),te.print()),G?.()}}}function t(se,G){return g(se,()=>{},0,void 0,!0,void 0,G)}ut.defer=t;function n(se){return(G,te=null,J)=>{let ne=!1,Ee;return Ee=se(xe=>{if(!ne)return Ee?Ee.dispose():ne=!0,G.call(te,xe)},null,J),ne&&Ee.dispose(),Ee}}ut.once=n;function i(se,G){return ut.once(ut.filter(se,G))}ut.onceIf=i;function o(se,G,te){return p((J,ne=null,Ee)=>se(xe=>J.call(ne,G(xe)),null,Ee),te)}ut.map=o;function s(se,G,te){return p((J,ne=null,Ee)=>se(xe=>{G(xe),J.call(ne,xe)},null,Ee),te)}ut.forEach=s;function a(se,G,te){return p((J,ne=null,Ee)=>se(xe=>G(xe)&&J.call(ne,xe),null,Ee),te)}ut.filter=a;function l(se){return se}ut.signal=l;function d(...se){return(G,te=null,J)=>{let ne=ir(...se.map(Ee=>Ee(xe=>G.call(te,xe))));return h(ne,J)}}ut.any=d;function u(se,G,te,J){let ne=te;return o(se,Ee=>(ne=G(ne,Ee),ne),J)}ut.reduce=u;function p(se,G){let te,J={onWillAddFirstListener(){te=se(ne.fire,ne)},onDidRemoveLastListener(){te?.dispose()}};G||e(J);let ne=new E(J);return G?.add(ne),ne.event}function h(se,G){return G instanceof Array?G.push(se):G&&G.add(se),se}function g(se,G,te=100,J=!1,ne=!1,Ee,xe){let et,_e,fe,gn=0,Qt,er={leakWarningThreshold:Ee,onWillAddFirstListener(){et=se(sl=>{gn++,_e=G(_e,sl),J&&!fe&&(Fi.fire(_e),_e=void 0),Qt=()=>{let ni=_e;_e=void 0,fe=void 0,(!J||gn>1)&&Fi.fire(ni),gn=0},typeof te=="number"?(clearTimeout(fe),fe=setTimeout(Qt,te)):fe===void 0&&(fe=0,queueMicrotask(Qt))})},onWillRemoveListener(){ne&&gn>0&&Qt?.()},onDidRemoveLastListener(){Qt=void 0,et.dispose()}};xe||e(er);let Fi=new E(er);return xe?.add(Fi),Fi.event}ut.debounce=g;function b(se,G=0,te){return ut.debounce(se,(J,ne)=>J?(J.push(ne),J):[ne],G,void 0,!0,void 0,te)}ut.accumulate=b;function f(se,G=(J,ne)=>J===ne,te){let J=!0,ne;return a(se,Ee=>{let xe=J||!G(Ee,ne);return J=!1,ne=Ee,xe},te)}ut.latch=f;function v(se,G,te){return[ut.filter(se,G,te),ut.filter(se,J=>!G(J),te)]}ut.split=v;function D(se,G=!1,te=[],J){let ne=te.slice(),Ee=se(_e=>{ne?ne.push(_e):et.fire(_e)});J&&J.add(Ee);let xe=()=>{ne?.forEach(_e=>et.fire(_e)),ne=null},et=new E({onWillAddFirstListener(){Ee||(Ee=se(_e=>et.fire(_e)),J&&J.add(Ee))},onDidAddFirstListener(){ne&&(G?setTimeout(xe):xe())},onDidRemoveLastListener(){Ee&&Ee.dispose(),Ee=null}});return J&&J.add(et),et.event}ut.buffer=D;function R(se,G){return(J,ne,Ee)=>{let xe=G(new B);return se(function(et){let _e=xe.evaluate(et);_e!==A&&J.call(ne,_e)},void 0,Ee)}}ut.chain=R;let A=Symbol("HaltChainable");class B{steps=[];map(G){return this.steps.push(G),this}forEach(G){return this.steps.push(te=>(G(te),te)),this}filter(G){return this.steps.push(te=>G(te)?te:A),this}reduce(G,te){let J=te;return this.steps.push(ne=>(J=G(J,ne),J)),this}latch(G=(te,J)=>te===J){let te=!0,J;return this.steps.push(ne=>{let Ee=te||!G(ne,J);return te=!1,J=ne,Ee?ne:A}),this}evaluate(G){for(let te of this.steps)if(G=te(G),G===A)break;return G}}function W(se,G,te=J=>J){let J=(...et)=>xe.fire(te(...et)),ne=()=>se.on(G,J),Ee=()=>se.removeListener(G,J),xe=new E({onWillAddFirstListener:ne,onDidRemoveLastListener:Ee});return xe.event}ut.fromNodeEventEmitter=W;function H(se,G,te=J=>J){let J=(...et)=>xe.fire(te(...et)),ne=()=>se.addEventListener(G,J),Ee=()=>se.removeEventListener(G,J),xe=new E({onWillAddFirstListener:ne,onDidRemoveLastListener:Ee});return xe.event}ut.fromDOMEventEmitter=H;function ue(se){return new Promise(G=>n(se)(G))}ut.toPromise=ue;function Y(se){let G=new E;return se.then(te=>{G.fire(te)},()=>{G.fire(void 0)}).finally(()=>{G.dispose()}),G.event}ut.fromPromise=Y;function oe(se,G){return se(te=>G.fire(te))}ut.forward=oe;function de(se,G,te){return G(te),se(J=>G(J))}ut.runAndSubscribe=de;class be{constructor(G,te){this._observable=G;let J={onWillAddFirstListener:()=>{G.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{G.removeObserver(this)}};te||e(J),this.emitter=new E(J),te&&te.add(this.emitter)}emitter;_counter=0;_hasChanged=!1;beginUpdate(G){this._counter++}handlePossibleChange(G){}handleChange(G,te){this._hasChanged=!0}endUpdate(G){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function ge(se,G){return new be(se,G).emitter.event}ut.fromObservable=ge;function Ye(se){return(G,te,J)=>{let ne=0,Ee=!1,xe={beginUpdate(){ne++},endUpdate(){ne--,ne===0&&(se.reportChanges(),Ee&&(Ee=!1,G.call(te)))},handlePossibleChange(){},handleChange(){Ee=!0}};se.addObserver(xe),se.reportChanges();let et={dispose(){se.removeObserver(xe)}};return J instanceof le?J.add(et):Array.isArray(J)&&J.push(et),et}}ut.fromObservableLight=Ye})(Q||={});var fv=class r{static all=new Set;static _idPool=0;name;listenerCount=0;invocationCount=0;elapsedOverall=0;durations=[];_stopWatch;constructor(e){this.name=`${e}_${r._idPool++}`,r.all.add(this)}start(e){this._stopWatch=new sa,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},uT=-1;var bv=class r{constructor(e,t,n=(r._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=t;this.name=n}static _idPool=1;_stacks;_warnCountdown=0;dispose(){this._stacks?.clear()}check(e,t){let n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,s]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${s}):`;console.warn(a),console.warn(o);let l=new vv(a,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[n,i]of this._stacks)(!e||t<i)&&(e=[n,i],t=i);return e}},kc=class r{constructor(e){this.value=e}static create(){let e=new Error;return new r(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},vv=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},Iv=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},F0=0,Sl=class{constructor(e){this.value=e}stack;id=F0++},B0=2,pT=(r,e)=>{if(r instanceof Sl)e(r);else for(let t=0;t<r.length;t++){let n=r[t];n&&e(n)}},mh;if(M0){let r=[];setInterval(()=>{r.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(r.join(`
`)),r.length=0)},3e3),mh=new FinalizationRegistry(e=>{typeof e=="string"&&r.push(e)})}var E=class{_options;_leakageMon;_perfMon;_disposed;_event;_listeners;_deliveryQueue;_size=0;constructor(e){this._options=e,this._leakageMon=uT>0||this._options?.leakWarningThreshold?new bv(e?.onListenerError??Ae,this._options?.leakWarningThreshold??uT):void 0,this._perfMon=this._options?._profName?new fv(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(cT){let e=this._listeners;queueMicrotask(()=>{pT(e,t=>t.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,t,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let d=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],u=new Iv(`${l}. HINT: Stack shows most frequent listener (${d[1]}-times)`,d[0]);return(this._options?.onListenerError||Ae)(u),O.None}if(this._disposed)return O.None;t&&(e=e.bind(t));let i=new Sl(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=kc.create(),o=this._leakageMon.check(i.stack,this._size+1)),cT&&(i.stack=s??kc.create()),this._listeners?this._listeners instanceof Sl?(this._deliveryQueue??=new yv,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=j(()=>{mh?.unregister(a),o?.(),this._removeListener(i)});if(n instanceof le?n.add(a):Array.isArray(n)&&n.push(a),mh){let l=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),d=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(l);mh.register(a,d?.[2]??l,a)}return a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*B0<=t.length){let o=0;for(let s=0;s<t.length;s++)t[s]?t[o++]=t[s]:i&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=o}}_deliver(e,t){if(!e)return;let n=this._options?.onListenerError||Ae;if(!n){e.value(t);return}try{e.value(t)}catch(i){n(i)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Sl)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var yv=class{i=-1;end=0;current;value;enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Cl=class extends E{_asyncDeliveryQueue;async fireAsync(e,t,n){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new an),pT(this._listeners,i=>this._asyncDeliveryQueue.push([i.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){let[i,o]=this._asyncDeliveryQueue.shift(),s=[],a={...o,token:t,waitUntil:l=>{if(Object.isFrozen(s))throw new Error("waitUntil can NOT be called asynchronous");n&&(l=n(l,i)),s.push(l)}};try{i(a)}catch(l){Ae(l);continue}Object.freeze(s),await Promise.allSettled(s).then(l=>{for(let d of l)d.status==="rejected"&&Ae(d.reason)})}}},rs=class extends E{_isPaused=0;_eventQueue=new an;_mergeFn;get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}};var gh=class extends E{_queuedEvents=[];_mergeFn;constructor(e){super(e),this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}};var fh=class{data=[];wrapEvent(e,t,n){return(i,o,s)=>e(a=>{let l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>i.call(o,a)):i.call(o,a);return}let d=l;if(!d){i.call(o,t(n,a));return}d.items??=[],d.items.push(a),d.buffers.length===0&&l.buffers.push(()=>{d.reducedResult??=n?d.items.reduce(t,n):d.items.reduce(t),i.call(o,d.reducedResult)})},void 0,s)}bufferEvents(e){let t={buffers:new Array};this.data.push(t);let n=e();return this.data.pop(),t.buffers.forEach(i=>i()),n}};var aa=class r{static INSTANCE=new r;mapWindowIdToZoomLevel=new Map;_onDidChangeZoomLevel=new E;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(n,e),this._onDidChangeZoomLevel.fire(n)}mapWindowIdToZoomFactor=new Map;getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}_onDidChangeFullscreen=new E;onDidChangeFullscreen=this._onDidChangeFullscreen.event;mapWindowIdToFullScreen=new Map;setFullscreen(e,t){if(this.isFullscreen(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToFullScreen.set(n,e),this._onDidChangeFullscreen.fire(n)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};function W0(r,e,t){typeof e=="string"&&(e=r.matchMedia(e)),e.addEventListener("change",t)}function hT(r){return aa.INSTANCE.getZoomLevel(r)}var NW=aa.INSTANCE.onDidChangeZoomLevel;function mT(r){return aa.INSTANCE.getZoomFactor(r)}function gT(r,e){aa.INSTANCE.setFullscreen(r,e)}var FW=aa.INSTANCE.onDidChangeFullscreen,El=navigator.userAgent,Tl=El.indexOf("Firefox")>=0,wl=El.indexOf("AppleWebKit")>=0,Dc=El.indexOf("Chrome")>=0,kl=!Dc&&El.indexOf("Safari")>=0;var BW=El.indexOf("Electron/")>=0,UW=El.indexOf("Android")>=0,bh=!1;if(typeof pe.matchMedia=="function"){let r=pe.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=pe.matchMedia("(display-mode: fullscreen)");bh=r.matches,W0(pe,r,({matches:t})=>{bh&&e.matches||(bh=t)})}function fT(){return bh}var bT={clipboard:{writeText:Qo||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Qo||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:Qo||fT()?0:navigator.keyboard||kl?1:2,touch:"ontouchstart"in pe||navigator.maxTouchPoints>0,pointerEvents:pe.PointerEvent&&("ontouchstart"in pe||navigator.maxTouchPoints>0)};var _c=class{_keyCodeToStr;_strToKeyCode;constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},Ih=new _c,xv=new _c,Sv=new _c,Ev=new Array(230),V0={},z0=[],H0=Object.create(null),K0=Object.create(null);var vT=[],Cv=[];for(let r=0;r<=193;r++)vT[r]=-1;for(let r=0;r<=132;r++)Cv[r]=-1;(function(){let r="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",r,r],[1,1,"Hyper",0,r,0,r,r,r],[1,2,"Super",0,r,0,r,r,r],[1,3,"Fn",0,r,0,r,r,r],[1,4,"FnLock",0,r,0,r,r,r],[1,5,"Suspend",0,r,0,r,r,r],[1,6,"Resume",0,r,0,r,r,r],[1,7,"Turbo",0,r,0,r,r,r],[1,8,"Sleep",0,r,0,"VK_SLEEP",r,r],[1,9,"WakeUp",0,r,0,r,r,r],[0,10,"KeyA",31,"A",65,"VK_A",r,r],[0,11,"KeyB",32,"B",66,"VK_B",r,r],[0,12,"KeyC",33,"C",67,"VK_C",r,r],[0,13,"KeyD",34,"D",68,"VK_D",r,r],[0,14,"KeyE",35,"E",69,"VK_E",r,r],[0,15,"KeyF",36,"F",70,"VK_F",r,r],[0,16,"KeyG",37,"G",71,"VK_G",r,r],[0,17,"KeyH",38,"H",72,"VK_H",r,r],[0,18,"KeyI",39,"I",73,"VK_I",r,r],[0,19,"KeyJ",40,"J",74,"VK_J",r,r],[0,20,"KeyK",41,"K",75,"VK_K",r,r],[0,21,"KeyL",42,"L",76,"VK_L",r,r],[0,22,"KeyM",43,"M",77,"VK_M",r,r],[0,23,"KeyN",44,"N",78,"VK_N",r,r],[0,24,"KeyO",45,"O",79,"VK_O",r,r],[0,25,"KeyP",46,"P",80,"VK_P",r,r],[0,26,"KeyQ",47,"Q",81,"VK_Q",r,r],[0,27,"KeyR",48,"R",82,"VK_R",r,r],[0,28,"KeyS",49,"S",83,"VK_S",r,r],[0,29,"KeyT",50,"T",84,"VK_T",r,r],[0,30,"KeyU",51,"U",85,"VK_U",r,r],[0,31,"KeyV",52,"V",86,"VK_V",r,r],[0,32,"KeyW",53,"W",87,"VK_W",r,r],[0,33,"KeyX",54,"X",88,"VK_X",r,r],[0,34,"KeyY",55,"Y",89,"VK_Y",r,r],[0,35,"KeyZ",56,"Z",90,"VK_Z",r,r],[0,36,"Digit1",22,"1",49,"VK_1",r,r],[0,37,"Digit2",23,"2",50,"VK_2",r,r],[0,38,"Digit3",24,"3",51,"VK_3",r,r],[0,39,"Digit4",25,"4",52,"VK_4",r,r],[0,40,"Digit5",26,"5",53,"VK_5",r,r],[0,41,"Digit6",27,"6",54,"VK_6",r,r],[0,42,"Digit7",28,"7",55,"VK_7",r,r],[0,43,"Digit8",29,"8",56,"VK_8",r,r],[0,44,"Digit9",30,"9",57,"VK_9",r,r],[0,45,"Digit0",21,"0",48,"VK_0",r,r],[1,46,"Enter",3,"Enter",13,"VK_RETURN",r,r],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",r,r],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",r,r],[1,49,"Tab",2,"Tab",9,"VK_TAB",r,r],[1,50,"Space",10,"Space",32,"VK_SPACE",r,r],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,r,0,r,r,r],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",r,r],[1,64,"F1",59,"F1",112,"VK_F1",r,r],[1,65,"F2",60,"F2",113,"VK_F2",r,r],[1,66,"F3",61,"F3",114,"VK_F3",r,r],[1,67,"F4",62,"F4",115,"VK_F4",r,r],[1,68,"F5",63,"F5",116,"VK_F5",r,r],[1,69,"F6",64,"F6",117,"VK_F6",r,r],[1,70,"F7",65,"F7",118,"VK_F7",r,r],[1,71,"F8",66,"F8",119,"VK_F8",r,r],[1,72,"F9",67,"F9",120,"VK_F9",r,r],[1,73,"F10",68,"F10",121,"VK_F10",r,r],[1,74,"F11",69,"F11",122,"VK_F11",r,r],[1,75,"F12",70,"F12",123,"VK_F12",r,r],[1,76,"PrintScreen",0,r,0,r,r,r],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",r,r],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",r,r],[1,79,"Insert",19,"Insert",45,"VK_INSERT",r,r],[1,80,"Home",14,"Home",36,"VK_HOME",r,r],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",r,r],[1,82,"Delete",20,"Delete",46,"VK_DELETE",r,r],[1,83,"End",13,"End",35,"VK_END",r,r],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",r,r],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",r],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",r],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",r],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",r],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",r,r],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",r,r],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",r,r],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",r,r],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",r,r],[1,94,"NumpadEnter",3,r,0,r,r,r],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",r,r],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",r,r],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",r,r],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",r,r],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",r,r],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",r,r],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",r,r],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",r,r],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",r,r],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",r,r],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",r,r],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",r,r],[1,107,"ContextMenu",58,"ContextMenu",93,r,r,r],[1,108,"Power",0,r,0,r,r,r],[1,109,"NumpadEqual",0,r,0,r,r,r],[1,110,"F13",71,"F13",124,"VK_F13",r,r],[1,111,"F14",72,"F14",125,"VK_F14",r,r],[1,112,"F15",73,"F15",126,"VK_F15",r,r],[1,113,"F16",74,"F16",127,"VK_F16",r,r],[1,114,"F17",75,"F17",128,"VK_F17",r,r],[1,115,"F18",76,"F18",129,"VK_F18",r,r],[1,116,"F19",77,"F19",130,"VK_F19",r,r],[1,117,"F20",78,"F20",131,"VK_F20",r,r],[1,118,"F21",79,"F21",132,"VK_F21",r,r],[1,119,"F22",80,"F22",133,"VK_F22",r,r],[1,120,"F23",81,"F23",134,"VK_F23",r,r],[1,121,"F24",82,"F24",135,"VK_F24",r,r],[1,122,"Open",0,r,0,r,r,r],[1,123,"Help",0,r,0,r,r,r],[1,124,"Select",0,r,0,r,r,r],[1,125,"Again",0,r,0,r,r,r],[1,126,"Undo",0,r,0,r,r,r],[1,127,"Cut",0,r,0,r,r,r],[1,128,"Copy",0,r,0,r,r,r],[1,129,"Paste",0,r,0,r,r,r],[1,130,"Find",0,r,0,r,r,r],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",r,r],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",r,r],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",r,r],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",r,r],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",r,r],[1,136,"KanaMode",0,r,0,r,r,r],[0,137,"IntlYen",0,r,0,r,r,r],[1,138,"Convert",0,r,0,r,r,r],[1,139,"NonConvert",0,r,0,r,r,r],[1,140,"Lang1",0,r,0,r,r,r],[1,141,"Lang2",0,r,0,r,r,r],[1,142,"Lang3",0,r,0,r,r,r],[1,143,"Lang4",0,r,0,r,r,r],[1,144,"Lang5",0,r,0,r,r,r],[1,145,"Abort",0,r,0,r,r,r],[1,146,"Props",0,r,0,r,r,r],[1,147,"NumpadParenLeft",0,r,0,r,r,r],[1,148,"NumpadParenRight",0,r,0,r,r,r],[1,149,"NumpadBackspace",0,r,0,r,r,r],[1,150,"NumpadMemoryStore",0,r,0,r,r,r],[1,151,"NumpadMemoryRecall",0,r,0,r,r,r],[1,152,"NumpadMemoryClear",0,r,0,r,r,r],[1,153,"NumpadMemoryAdd",0,r,0,r,r,r],[1,154,"NumpadMemorySubtract",0,r,0,r,r,r],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",r,r],[1,156,"NumpadClearEntry",0,r,0,r,r,r],[1,0,r,5,"Ctrl",17,"VK_CONTROL",r,r],[1,0,r,4,"Shift",16,"VK_SHIFT",r,r],[1,0,r,6,"Alt",18,"VK_MENU",r,r],[1,0,r,57,"Meta",91,"VK_COMMAND",r,r],[1,157,"ControlLeft",5,r,0,"VK_LCONTROL",r,r],[1,158,"ShiftLeft",4,r,0,"VK_LSHIFT",r,r],[1,159,"AltLeft",6,r,0,"VK_LMENU",r,r],[1,160,"MetaLeft",57,r,0,"VK_LWIN",r,r],[1,161,"ControlRight",5,r,0,"VK_RCONTROL",r,r],[1,162,"ShiftRight",4,r,0,"VK_RSHIFT",r,r],[1,163,"AltRight",6,r,0,"VK_RMENU",r,r],[1,164,"MetaRight",57,r,0,"VK_RWIN",r,r],[1,165,"BrightnessUp",0,r,0,r,r,r],[1,166,"BrightnessDown",0,r,0,r,r,r],[1,167,"MediaPlay",0,r,0,r,r,r],[1,168,"MediaRecord",0,r,0,r,r,r],[1,169,"MediaFastForward",0,r,0,r,r,r],[1,170,"MediaRewind",0,r,0,r,r,r],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",r,r],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",r,r],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",r,r],[1,174,"Eject",0,r,0,r,r,r],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",r,r],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",r,r],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",r,r],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",r,r],[1,179,"LaunchApp1",0,r,0,"VK_MEDIA_LAUNCH_APP1",r,r],[1,180,"SelectTask",0,r,0,r,r,r],[1,181,"LaunchScreenSaver",0,r,0,r,r,r],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",r,r],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",r,r],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",r,r],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",r,r],[1,186,"BrowserStop",0,r,0,"VK_BROWSER_STOP",r,r],[1,187,"BrowserRefresh",0,r,0,"VK_BROWSER_REFRESH",r,r],[1,188,"BrowserFavorites",0,r,0,"VK_BROWSER_FAVORITES",r,r],[1,189,"ZoomToggle",0,r,0,r,r,r],[1,190,"MailReply",0,r,0,r,r,r],[1,191,"MailForward",0,r,0,r,r,r],[1,192,"MailSend",0,r,0,r,r,r],[1,0,r,114,"KeyInComposition",229,r,r,r],[1,0,r,116,"ABNT_C2",194,"VK_ABNT_C2",r,r],[1,0,r,96,"OEM_8",223,"VK_OEM_8",r,r],[1,0,r,0,r,0,"VK_KANA",r,r],[1,0,r,0,r,0,"VK_HANGUL",r,r],[1,0,r,0,r,0,"VK_JUNJA",r,r],[1,0,r,0,r,0,"VK_FINAL",r,r],[1,0,r,0,r,0,"VK_HANJA",r,r],[1,0,r,0,r,0,"VK_KANJI",r,r],[1,0,r,0,r,0,"VK_CONVERT",r,r],[1,0,r,0,r,0,"VK_NONCONVERT",r,r],[1,0,r,0,r,0,"VK_ACCEPT",r,r],[1,0,r,0,r,0,"VK_MODECHANGE",r,r],[1,0,r,0,r,0,"VK_SELECT",r,r],[1,0,r,0,r,0,"VK_PRINT",r,r],[1,0,r,0,r,0,"VK_EXECUTE",r,r],[1,0,r,0,r,0,"VK_SNAPSHOT",r,r],[1,0,r,0,r,0,"VK_HELP",r,r],[1,0,r,0,r,0,"VK_APPS",r,r],[1,0,r,0,r,0,"VK_PROCESSKEY",r,r],[1,0,r,0,r,0,"VK_PACKET",r,r],[1,0,r,0,r,0,"VK_DBE_SBCSCHAR",r,r],[1,0,r,0,r,0,"VK_DBE_DBCSCHAR",r,r],[1,0,r,0,r,0,"VK_ATTN",r,r],[1,0,r,0,r,0,"VK_CRSEL",r,r],[1,0,r,0,r,0,"VK_EXSEL",r,r],[1,0,r,0,r,0,"VK_EREOF",r,r],[1,0,r,0,r,0,"VK_PLAY",r,r],[1,0,r,0,r,0,"VK_ZOOM",r,r],[1,0,r,0,r,0,"VK_NONAME",r,r],[1,0,r,0,r,0,"VK_PA1",r,r],[1,0,r,0,r,0,"VK_OEM_CLEAR",r,r]],t=[],n=[];for(let i of e){let[o,s,a,l,d,u,p,h,g]=i;if(n[s]||(n[s]=!0,z0[s]=a,H0[a]=s,K0[a.toLowerCase()]=s,o&&(vT[s]=l,l!==0&&l!==3&&l!==5&&l!==4&&l!==6&&l!==57&&(Cv[l]=s))),!t[l]){if(t[l]=!0,!d)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);Ih.define(l,d),xv.define(l,h||d),Sv.define(l,g||h||d)}u&&(Ev[u]=l),p&&(V0[p]=l)}Cv[3]=46})();var yh;(s=>{function r(a){return Ih.keyCodeToStr(a)}s.toString=r;function e(a){return Ih.strToKeyCode(a)}s.fromString=e;function t(a){return xv.keyCodeToStr(a)}s.toUserSettingsUS=t;function n(a){return Sv.keyCodeToStr(a)}s.toUserSettingsGeneral=n;function i(a){return xv.strToKeyCode(a)||Sv.strToKeyCode(a)}s.fromUserSettings=i;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Ih.keyCodeToStr(a)}s.toElectronAccelerator=o})(yh||={});function Tv(r,e){if(typeof r=="number"){if(r===0)return null;let t=(r&65535)>>>0,n=(r&4294901760)>>>16;return n!==0?new Dl([xh(t,e),xh(n,e)]):new Dl([xh(t,e)])}else{let t=[];for(let n=0;n<r.length;n++)t.push(xh(r[n],e));return new Dl(t)}}function xh(r,e){let t=!!(r&2048),n=!!(r&256),i=e===2?n:t,o=!!(r&1024),s=!!(r&512),a=e===2?t:n,l=r&255;return new Rc(i,o,s,a,l)}var Rc=class r{constructor(e,t,n,i,o){this.ctrlKey=e;this.shiftKey=t;this.altKey=n;this.metaKey=i;this.keyCode=o}equals(e){return e instanceof r&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`K${e}${t}${n}${i}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Dl([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}};var Dl=class{chords;constructor(e){if(e.length===0)throw ea("chords");this.chords=e}getHashCode(){let e="";for(let t=0,n=this.chords.length;t<n;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function G0(r){if(r.charCode){let t=String.fromCharCode(r.charCode).toUpperCase();return yh.fromString(t)}let e=r.keyCode;if(e===3)return 7;if(Tl)switch(e){case 59:return 85;case 60:if(on)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Fe)return 57;break}else if(wl){if(Fe&&e===93)return 57;if(!Fe&&e===92)return 57}return Ev[e]||0}var q0=Fe?256:2048,j0=512,X0=1024,Q0=Fe?2048:256;var ln=class{_standardKeyboardEventBrand=!0;browserEvent;target;ctrlKey;shiftKey;altKey;metaKey;altGraphKey;keyCode;code;_asKeybinding;_asKeyCodeChord;constructor(e){let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=G0(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=q0),this.altKey&&(t|=j0),this.shiftKey&&(t|=X0),this.metaKey&&(t|=Q0),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Rc(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}};var IT=new WeakMap;function Y0(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return r.parent}var Sh=class{static getSameOriginWindowChain(e){let t=IT.get(e);if(!t){t=[],IT.set(e,t);let n=e,i;do i=Y0(n),i?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0,o=this.getSameOriginWindowChain(e);for(let s of o){let a=s.window.deref();if(n+=a?.scrollY??0,i+=a?.scrollX??0,a===t||!s.iframeElement)break;let l=s.iframeElement.getBoundingClientRect();n+=l.top,i+=l.left}return{top:n,left:i}}};var Wi=class{browserEvent;leftButton;middleButton;rightButton;buttons;target;detail;posx;posy;ctrlKey;shiftKey;altKey;metaKey;timestamp;constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=Sh.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}};var or=class{browserEvent;deltaY;deltaX;target;constructor(e,t=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let i=!1;if(Dc){let o=navigator.userAgent.match(/Chrome\/(\d+)/);i=(o?parseInt(o[1]):123)<=122}if(e){let o=e,s=e,a=e.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")i?this.deltaY=o.wheelDeltaY/(120*a):this.deltaY=o.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?Tl&&!Fe?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")kl&&lt?this.deltaX=-(o.wheelDeltaX/120):i?this.deltaX=o.wheelDeltaX/(120*a):this.deltaX=o.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?Tl&&!Fe?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(i?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}};function yT(r){return r}var Ch=class{lastCache=void 0;lastArgKey=void 0;_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=yT):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}},Pc=class{_map=new Map;_map2=new Map;get cachedValues(){return this._map}_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=yT):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);let n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}};var Ot=class{constructor(e){this.executor=e}_didRun=!1;_value;_error;get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function wv(r){return r<0?0:r>255?255:r|0}function Th(r){return!r||typeof r!="string"?!0:r.trim().length===0}function ET(r){return r.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function _v(r){return r.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function bn(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Rv(r,e){if(!r||!e)return r;let t=e.length;if(t===0||r.length===0)return r;let n=0;for(;r.indexOf(e,n)===n;)n=n+t;return r.substring(n)}function Oc(r,e){if(!r||!e)return r;let t=e.length,n=r.length;if(t===0||n===0)return r;let i=n,o=-1;for(;o=r.lastIndexOf(e,i-1),!(o===-1||o+t!==i);){if(o===0)return"";i=o}return r.substring(0,i)}function wh(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=bn(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(r,n)}function Pv(r){return r.split(/\r\n|\r|\n/)}function ko(r){for(let e=0,t=r.length;e<t;e++){let n=r.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Lv(r,e=r.length-1){for(let t=e;t>=0;t--){let n=r.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function da(r,e){return r<e?-1:r>e?1:0}function TT(r,e,t=0,n=r.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=r.charCodeAt(t),d=e.charCodeAt(i);if(l<d)return-1;if(l>d)return 1}let s=n-t,a=o-i;return s<a?-1:s>a?1:0}function Ov(r,e){return kh(r,e,0,r.length,0,e.length)}function kh(r,e,t=0,n=r.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=r.charCodeAt(t),d=e.charCodeAt(i);if(l===d)continue;if(l>=128||d>=128)return TT(r.toLowerCase(),e.toLowerCase(),t,n,i,o);xT(l)&&(l-=32),xT(d)&&(d-=32);let u=l-d;if(u!==0)return u}let s=n-t,a=o-i;return s<a?-1:s>a?1:0}function xT(r){return r>=97&&r<=122}function Av(r){return r>=65&&r<=90}function vn(r,e){return r.length===e.length&&kh(r,e)===0}function os(r,e){let t=e.length;return e.length>r.length?!1:kh(r,e,0,t)===0}function ai(r){return 55296<=r&&r<=56319}function Rl(r){return 56320<=r&&r<=57343}function Dh(r,e){return(r-55296<<10)+(e-56320)+65536}function Pl(r,e,t){let n=r.charCodeAt(t);if(ai(n)&&t+1<e){let i=r.charCodeAt(t+1);if(Rl(i))return Dh(n,i)}return n}function J0(r,e){let t=r.charCodeAt(e-1);if(Rl(t)&&e>1){let n=r.charCodeAt(e-2);if(ai(n))return Dh(n,t)}return t}var Lc=class{_str;_len;_offset;get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=J0(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=Pl(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}},la=class{_iterator;get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new Lc(e,t)}nextGraphemeLength(){let e=Eh.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let o=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(ST(i,s)){t.setOffset(o);break}i=s}return t.offset-n}prevGraphemeLength(){let e=Eh.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let o=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(ST(s,i)){t.setOffset(o);break}i=s}return n-t.offset}eol(){return this._iterator.eol()}};function Z0(r,e){return new la(r,e).nextGraphemeLength()}function eP(r,e){return new la(r,e).prevGraphemeLength()}function wT(r,e){e>0&&Rl(r.charCodeAt(e))&&e--;let t=e+Z0(r,e);return[t-eP(r,t),t]}var kv;function tP(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function _h(r){return kv||(kv=tP()),kv.test(r)}var nP=/^[\t\n\r\x20-\x7E]*$/;function kT(r){return nP.test(r)}var Mv=/[\u2028\u2029]/;function Rh(r){return Mv.test(r)}function DT(r){return r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function Ph(r){return r>=127462&&r<=127487||r===8986||r===8987||r===9200||r===9203||r>=9728&&r<=10175||r===11088||r===11093||r>=127744&&r<=128591||r>=128640&&r<=128764||r>=128992&&r<=129008||r>=129280&&r<=129535||r>=129648&&r<=129782}var _T=String.fromCharCode(65279);function RT(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function Nv(r,e=!1){return r?(e&&(r=r.replace(/\\./g,"")),r.toLowerCase()!==r):!1}function PT(r){let e=26;return r=r%(2*e),r<e?String.fromCharCode(97+r):String.fromCharCode(65+r-e)}function ST(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}var Eh=class r{static _INSTANCE=null;static getInstance(){return r._INSTANCE||(r._INSTANCE=new r),r._INSTANCE}_data;constructor(){this._data=iP()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,n=t.length/3,i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}};function iP(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var CT=class r{constructor(e){this.confusableDictionary=e}static ambiguousCharacterData=new Ot(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));static cache=new Ch({getCacheKey:JSON.stringify},e=>{function t(u){let p=new Map;for(let h=0;h<u.length;h+=2)p.set(u[h],u[h+1]);return p}function n(u,p){let h=new Map(u);for(let[g,b]of p)h.set(g,b);return h}function i(u,p){if(!u)return p;let h=new Map;for(let[g,b]of u)p.has(g)&&h.set(g,b);return h}let o=this.ambiguousCharacterData.value,s=e.filter(u=>!u.startsWith("_")&&u in o);s.length===0&&(s=["_default"]);let a;for(let u of s){let p=t(o[u]);a=i(a,p)}let l=t(o._common),d=n(l,a);return new r(d)});static getInstance(e){return r.cache.get(Array.from(e))}static _locales=new Ot(()=>Object.keys(r.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));static getLocales(){return r._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){let n=e.codePointAt(t);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};function Oe(r){return typeof r=="string"}function Fv(r){return Array.isArray(r)&&r.every(e=>Oe(e))}function kt(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function Gn(r){return typeof r=="number"&&!isNaN(r)}function LT(r){return r===!0||r===!1}function Zt(r){return typeof r>"u"}function Ll(r){return!Bt(r)}function Bt(r){return Zt(r)||r===null}function Vi(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function In(r){if(Bt(r))throw new Error("Assertion Failed: argument is undefined or null");return r}var rP=Object.prototype.hasOwnProperty;function ca(r){if(!kt(r))return!1;for(let e in r)if(rP.call(r,e))return!1;return!0}function Bv(r){return typeof r=="function"}function OT(r,e){let t=Math.min(r.length,e.length);for(let n=0;n<t;n++)oP(r[n],e[n])}function oP(r,e){if(Oe(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Bv(e)){try{if(r instanceof e)return}catch{}if(!Bt(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function ss(r){return r===47||r===92}function Lh(r){return r.replace(/[\\/]/g,Pe.sep)}function AT(r){return r.indexOf("/")===-1&&(r=Lh(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function Uv(r,e=Pe.sep){if(!r)return"";let t=r.length,n=r.charCodeAt(0);if(ss(n)){if(ss(r.charCodeAt(1))&&!ss(r.charCodeAt(2))){let o=3,s=o;for(;o<t&&!ss(r.charCodeAt(o));o++);if(s!==o&&!ss(r.charCodeAt(o+1))){for(o+=1;o<t;o++)if(ss(r.charCodeAt(o)))return r.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(NT(n)&&r.charCodeAt(1)===58)return ss(r.charCodeAt(2))?r.slice(0,2)+e:r.slice(0,2);let i=r.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(ss(r.charCodeAt(i)))return r.slice(0,i+1)}return""}var sP=/[\\/:\*\?"<>\|]/g,aP=/[/]/g,lP=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function MT(r,e=lt){let t=e?sP:aP;return!(!r||r.length===0||/^\s+$/.test(r)||(t.lastIndex=0,t.test(r))||e&&lP.test(r)||r==="."||r===".."||e&&r[r.length-1]==="."||e&&r.length!==r.trim().length||r.length>255)}function ua(r,e,t,n=Mn){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!os(r,e))return!1;if(e.length===r.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,r.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),r.indexOf(e)===0}function NT(r){return r>=65&&r<=90||r>=97&&r<=122}function FT(r,e=lt){return e?NT(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}function BT(r,e=lt){return FT(r,e)?r[0]:void 0}function UT(r,e,t){return e.length>r.length?-1:r===e?0:(t&&(r=r.toLowerCase(),e=e.toLowerCase()),r.indexOf(e))}function WT(r){let e=r.split(":"),t,n,i;for(let o of e){let s=Number(o);Gn(s)?n===void 0?n=s:i===void 0&&(i=s):t=t?[t,o].join(":"):o}if(!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:n!==void 0?n:void 0,column:i!==void 0?i:n!==void 0?1:void 0}}var q;(fe=>(fe.inMemory="inmemory",fe.vscode="vscode",fe.internal="private",fe.walkThrough="walkThrough",fe.walkThroughSnippet="walkThroughSnippet",fe.http="http",fe.https="https",fe.file="file",fe.mailto="mailto",fe.untitled="untitled",fe.data="data",fe.command="command",fe.vscodeRemote="vscode-remote",fe.vscodeRemoteResource="vscode-remote-resource",fe.vscodeManagedRemoteResource="vscode-managed-remote-resource",fe.vscodeUserData="vscode-userdata",fe.vscodeCustomEditor="vscode-custom-editor",fe.vscodeNotebookCell="vscode-notebook-cell",fe.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",fe.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",fe.vscodeNotebookCellOutput="vscode-notebook-cell-output",fe.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",fe.vscodeNotebookMetadata="vscode-notebook-metadata",fe.vscodeInteractiveInput="vscode-interactive-input",fe.vscodeSettings="vscode-settings",fe.vscodeWorkspaceTrust="vscode-workspace-trust",fe.vscodeTerminal="vscode-terminal",fe.vscodeChatCodeBlock="vscode-chat-code-block",fe.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",fe.vscodeChatSesssion="vscode-chat-editor",fe.webviewPanel="webview-panel",fe.vscodeWebview="vscode-webview",fe.extension="extension",fe.vscodeFileResource="vscode-file",fe.tmp="tmp",fe.vsls="vsls",fe.vscodeSourceControl="vscode-scm",fe.commentsInput="comment",fe.codeSetting="code-setting",fe.outputChannel="output"))(q||={});function Oh(r,e){return L.isUri(r)?vn(r.scheme,e):os(r,e+":")}var dP="tkn",Wv=class{_hosts=Object.create(null);_ports=Object.create(null);_connectionTokens=Object.create(null);_preferredWebSchema="http";_delegate=null;_serverRootPath="/";setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=cP(e,t)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return Pe.join(this._serverRootPath,q.vscodeRemoteResource)}set(e,t,n){this._hosts[e]=t,this._ports[e]=n}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Ae(a),e}let t=e.authority,n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[t],o=this._connectionTokens[t],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${dP}=${encodeURIComponent(o)}`),L.from({scheme:Yt?this._preferredWebSchema:q.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},Ah=new Wv;function cP(r,e){return Pe.join(e??"/",`${r.quality??"oss"}-${r.commit??"dev"}`)}var zv="vscode-app",Vv=class r{static FALLBACK_AUTHORITY=zv;asBrowserUri(e){let t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===q.vscodeRemote?Ah.rewrite(e):e.scheme===q.file&&(Qo||LE===`${q.vscodeFileResource}://${r.FALLBACK_AUTHORITY}`)?e.with({scheme:q.vscodeFileResource,authority:e.authority||r.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===q.vscodeFileResource?e.with({scheme:q.file,authority:e.authority!==r.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){if(L.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return L.joinPath(L.parse(n,!0),e);let i=An(n,e);return L.file(i)}return L.parse(t.toUrl(e))}},pa=new Vv,uP;(o=>{let r=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(r.get("3"));let t="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:L.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let l=a?.get(t);if(l)return r.get(l)}o.getHeadersFromQuery=n;function i(s,a,l){if(!globalThis.crossOriginIsolated)return;let d=a&&l?"3":l?"2":"1";s instanceof URLSearchParams?s.set(t,d):s[t]=d}o.addSearchParam=i})(uP||={});function Do(r){return bc(r,!0)}var Ac=class{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:da(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===q.file)return ua(Do(e),Do(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(zT(e.authority,t.authority))return ua(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return L.joinPath(e,...t)}basenameOrAuthority(e){return qn(e)||e.authority}basename(e){return Pe.basename(e.path)}extname(e){return Pe.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===q.file?t=L.file(fl(Do(e))).path:(t=Pe.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===q.file?t=L.file(Ti(Do(e))).path:t=Pe.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!zT(e.authority,t.authority))return;if(e.scheme===q.file){let o=gl(Do(e),Do(t));return lt?Lh(o):o}let n=e.path||"/",i=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(n.length,i.length);o<s&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return Pe.relative(n,i)}resolvePath(e,t){if(e.scheme===q.file){let n=L.file(ml(Do(e),t));return e.with({authority:n.authority,path:n.path})}return t=AT(t),e.with({path:Pe.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&vn(e,t)}hasTrailingPathSeparator(e,t=Mn){if(e.scheme===q.file){let n=Do(e);return n.length>Uv(n).length&&n[n.length-1]===t}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Mn){return HT(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Mn){let n=!1;if(e.scheme===q.file){let i=Do(e);n=i!==void 0&&i.length===Uv(i).length&&i[i.length-1]===t}else{t="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!HT(e,t)?e.with({path:e.path+"/"}):e}},Je=new Ac(()=>!1),pP=new Ac(r=>r.scheme===q.file?!on:!0),hP=new Ac(r=>!0),bt=Je.isEqual.bind(Je),KT=Je.isEqualOrParent.bind(Je),E4=Je.getComparisonKey.bind(Je),ha=Je.basenameOrAuthority.bind(Je),qn=Je.basename.bind(Je),mP=Je.extname.bind(Je),sr=Je.dirname.bind(Je),Me=Je.joinPath.bind(Je),T4=Je.normalizePath.bind(Je),ma=Je.relativePath.bind(Je),gP=Je.resolvePath.bind(Je),$T=Je.isAbsolutePath.bind(Je),zT=Je.isEqualAuthority.bind(Je),HT=Je.hasTrailingPathSeparator.bind(Je),w4=Je.removeTrailingPathSeparator.bind(Je),k4=Je.addTrailingPathSeparator.bind(Je);var fP;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(u=>{let[p,h]=u.split(":");p&&h&&a.set(p,h)});let d=s.path.substring(0,s.path.indexOf(";"));return d&&a.set(o.META_DATA_MIME,d),a}o.parseMetaData=i})(fP||={});function GT(r,e,t){if(e){let n=r.path;return n&&n[0]!==Pe.sep&&(n=Pe.sep+n),r.with({scheme:t,authority:e,path:n})}return r.with({scheme:t})}function Fc(r){return!!r&&typeof r.then=="function"}function ar(r){let e=new Nn,t=r(e.token),n=new Promise((i,o)=>{let s=e.token.onCancellationRequested(()=>{s.dispose(),o(new Ln)});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),i(a)},a=>{s.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function Bc(r,e,t){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(t)});r.then(n,i).finally(()=>o.dispose())})}function jT(){let r,e;return{promise:new Promise((n,i)=>{r=n,e=i}),resolve:r,reject:e}}var Kv=class{activePromise;queuedPromise;queuedPromiseFactory;isDisposed=!1;constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let t=()=>{if(this.queuedPromise=null,this.isDisposed)return;let n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}dispose(){this.isDisposed=!0}};var bP=(r,e)=>{let t=!0,n=setTimeout(()=>{t=!1,e()},r);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},vP=r=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,r())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},Ol=class{constructor(e){this.defaultDelay=e;this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}deferred;completionPromise;doResolve;doReject;task;trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,o)=>{this.doResolve=i,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let i=this.task;return this.task=null,i()}}));let n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===dT?vP(n):bP(t,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new Ln),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}},ga=class{delayer;throttler;constructor(e){this.delayer=new Ol(e),this.throttler=new Kv}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}},Al=class{_isOpen;_promise;_completePromise;constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}};function jn(r,e){return e?new Promise((t,n)=>{let i=setTimeout(()=>{o.dispose(),t()},r),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new Ln)})}):ar(t=>jn(r,t))}function $v(r,e=0,t){let n=setTimeout(()=>{r(),t&&i.dispose()},e),i=j(()=>{clearTimeout(n),t?.deleteAndLeak(i)});return t?.add(i),i}var _o=class{_token;_isDisposed=!1;constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new He("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new He("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},Mh=class{disposable=void 0;isDisposed=!1;cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new He("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let i=n.setInterval(()=>{e()},t);this.disposable=j(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},li=class{runner;timeoutToken;timeout;timeoutHandler;constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}};var as,Mc;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Mc=(r,e)=>{Jp(()=>{if(t)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:Mc=(r,e,t)=>{let n=r.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0),i=!1;return{dispose(){i||(i=!0,r.cancelIdleCallback(n))}}},as=r=>Mc(globalThis,r)})();var Nh=class{_executor;_handle;_didRun=!1;_value;_error;constructor(e,t){this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=Mc(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},Nc=class extends Nh{constructor(e){super(globalThis,e)}};var Fh=class{_running;_queued;isRunning(e){return typeof e=="number"?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,n){return this._running={taskId:e,cancel:()=>n?.(),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){let e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{let{promise:t,resolve:n,reject:i}=jT();this._queued={run:e,promise:t,promiseResolve:n,promiseReject:i}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}};var yn=class{completeCallback;errorCallback;outcome;get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}p;constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Ln)}},zi;(t=>{async function r(n){let i,o=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}t.settled=r;function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(s){o(s)}})}t.withAsyncBody=e})(zi||={});var qT=class r{static fromArray(e){return new r(t=>{t.emitMany(e)})}static fromPromise(e){return new r(async t=>{t.emitMany(await e)})}static fromPromises(e){return new r(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new r(async t=>{await Promise.all(e.map(async n=>{for await(let i of n)t.emitOne(i)}))})}static EMPTY=r.fromArray([]);_state;_results;_error;_onReturn;_onStateChanged;constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new E,queueMicrotask(async()=>{let n={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Q.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new r(async n=>{for await(let i of e)n.emitOne(t(i))})}map(e){return r.map(this,e)}static filter(e,t){return new r(async n=>{for await(let i of e)t(i)&&n.emitOne(i)})}filter(e){return r.filter(this,e)}static coalesce(e){return r.filter(e,t=>!!t)}coalesce(){return r.coalesce(this)}static async toPromise(e){let t=[];for await(let n of e)t.push(n);return t}toPromise(){return r.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var{entries:nw,setPrototypeOf:XT,isFrozen:IP,getPrototypeOf:yP,getOwnPropertyDescriptor:xP}=Object,{freeze:Xn,seal:dr,create:SP}=Object,{apply:Yv,construct:Jv}=typeof Reflect<"u"&&Reflect;Yv||(Yv=function(e,t,n){return e.apply(t,n)});Xn||(Xn=function(e){return e});dr||(dr=function(e){return e});Jv||(Jv=function(e,t){return new e(...t)});var CP=Hi(Array.prototype.forEach),QT=Hi(Array.prototype.pop),Uc=Hi(Array.prototype.push),Wh=Hi(String.prototype.toLowerCase),Gv=Hi(String.prototype.toString),EP=Hi(String.prototype.match),lr=Hi(String.prototype.replace),TP=Hi(String.prototype.indexOf),wP=Hi(String.prototype.trim),_i=Hi(RegExp.prototype.test),Wc=kP(TypeError);function Hi(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Yv(r,e,n)}}function kP(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jv(r,t)}}function Ke(r,e,t){var n;t=(n=t)!==null&&n!==void 0?n:Wh,XT&&XT(r,null);let i=e.length;for(;i--;){let o=e[i];if(typeof o=="string"){let s=t(o);s!==o&&(IP(e)||(e[i]=s),o=s)}r[o]=!0}return r}function Ml(r){let e=SP(null);for(let[t,n]of nw(r))e[t]=n;return e}function Bh(r,e){for(;r!==null;){let n=xP(r,e);if(n){if(n.get)return Hi(n.get);if(typeof n.value=="function")return Hi(n.value)}r=yP(r)}function t(n){return console.warn("fallback value for",n),null}return t}var YT=Xn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qv=Xn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jv=Xn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),DP=Xn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Xv=Xn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_P=Xn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),JT=Xn(["#text"]),ZT=Xn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Qv=Xn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ew=Xn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Uh=Xn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),RP=dr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),PP=dr(/<%[\w\W]*|[\w\W]*%>/gm),LP=dr(/\${[\w\W]*}/gm),OP=dr(/^data-[\-\w.\u00B7-\uFFFF]/),AP=dr(/^aria-[\-\w]+$/),iw=dr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),MP=dr(/^(?:\w+script|data):/i),NP=dr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rw=dr(/^html$/i),tw=Object.freeze({__proto__:null,MUSTACHE_EXPR:RP,ERB_EXPR:PP,TMPLIT_EXPR:LP,DATA_ATTR:OP,ARIA_ATTR:AP,IS_ALLOWED_URI:iw,IS_SCRIPT_OR_DATA:MP,ATTR_WHITESPACE:NP,DOCTYPE_NAME:rw}),FP=()=>typeof window>"u"?null:window,BP=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));let o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function ow(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FP(),e=he=>ow(he);if(e.version="3.0.5",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;let t=r.document,n=t.currentScript,{document:i}=r,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:d,NamedNodeMap:u=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:g}=r,b=l.prototype,f=Bh(b,"cloneNode"),v=Bh(b,"nextSibling"),D=Bh(b,"childNodes"),R=Bh(b,"parentNode");if(typeof s=="function"){let he=i.createElement("template");he.content&&he.content.ownerDocument&&(i=he.content.ownerDocument)}let A,B="",{implementation:W,createNodeIterator:H,createDocumentFragment:ue,getElementsByTagName:Y}=i,{importNode:oe}=t,de={};e.isSupported=typeof nw=="function"&&typeof R=="function"&&W&&W.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:be,ERB_EXPR:ge,TMPLIT_EXPR:Ye,DATA_ATTR:ut,ARIA_ATTR:se,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:te}=tw,{IS_ALLOWED_URI:J}=tw,ne=null,Ee=Ke({},[...YT,...qv,...jv,...Xv,...JT]),xe=null,et=Ke({},[...ZT,...Qv,...ew,...Uh]),_e=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fe=null,gn=null,Qt=!0,er=!0,Fi=!1,sl=!0,ni=!1,go=!1,sc=!1,ac=!1,$o=!1,al=!1,ll=!1,Fp=!0,Bp=!1,Fb="user-content-",Go=!0,Qs=!1,fo={},bo=null,Up=Ke({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),dl=null,Wp=Ke({},["audio","video","img","source","image","track"]),Ys=null,Vp=Ke({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vo="http://www.w3.org/1998/Math/MathML",Or="http://www.w3.org/2000/svg",Mt="http://www.w3.org/1999/xhtml",Bi=Mt,qo=!1,Vn=null,Js=Ke({},[vo,Or,Mt],Gv),Ar,Io=["application/xhtml+xml","text/html"],it="text/html",Kt,jo=null,Bb=i.createElement("form"),zp=function(P){return P instanceof RegExp||P instanceof Function},lc=function(P){if(!(jo&&jo===P)){if((!P||typeof P!="object")&&(P={}),P=Ml(P),Ar=Io.indexOf(P.PARSER_MEDIA_TYPE)===-1?Ar=it:Ar=P.PARSER_MEDIA_TYPE,Kt=Ar==="application/xhtml+xml"?Gv:Wh,ne="ALLOWED_TAGS"in P?Ke({},P.ALLOWED_TAGS,Kt):Ee,xe="ALLOWED_ATTR"in P?Ke({},P.ALLOWED_ATTR,Kt):et,Vn="ALLOWED_NAMESPACES"in P?Ke({},P.ALLOWED_NAMESPACES,Gv):Js,Ys="ADD_URI_SAFE_ATTR"in P?Ke(Ml(Vp),P.ADD_URI_SAFE_ATTR,Kt):Vp,dl="ADD_DATA_URI_TAGS"in P?Ke(Ml(Wp),P.ADD_DATA_URI_TAGS,Kt):Wp,bo="FORBID_CONTENTS"in P?Ke({},P.FORBID_CONTENTS,Kt):Up,fe="FORBID_TAGS"in P?Ke({},P.FORBID_TAGS,Kt):{},gn="FORBID_ATTR"in P?Ke({},P.FORBID_ATTR,Kt):{},fo="USE_PROFILES"in P?P.USE_PROFILES:!1,Qt=P.ALLOW_ARIA_ATTR!==!1,er=P.ALLOW_DATA_ATTR!==!1,Fi=P.ALLOW_UNKNOWN_PROTOCOLS||!1,sl=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ni=P.SAFE_FOR_TEMPLATES||!1,go=P.WHOLE_DOCUMENT||!1,$o=P.RETURN_DOM||!1,al=P.RETURN_DOM_FRAGMENT||!1,ll=P.RETURN_TRUSTED_TYPE||!1,ac=P.FORCE_BODY||!1,Fp=P.SANITIZE_DOM!==!1,Bp=P.SANITIZE_NAMED_PROPS||!1,Go=P.KEEP_CONTENT!==!1,Qs=P.IN_PLACE||!1,J=P.ALLOWED_URI_REGEXP||iw,Bi=P.NAMESPACE||Mt,_e=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&zp(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_e.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&zp(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_e.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(_e.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ni&&(er=!1),al&&($o=!0),fo&&(ne=Ke({},[...JT]),xe=[],fo.html===!0&&(Ke(ne,YT),Ke(xe,ZT)),fo.svg===!0&&(Ke(ne,qv),Ke(xe,Qv),Ke(xe,Uh)),fo.svgFilters===!0&&(Ke(ne,jv),Ke(xe,Qv),Ke(xe,Uh)),fo.mathMl===!0&&(Ke(ne,Xv),Ke(xe,ew),Ke(xe,Uh))),P.ADD_TAGS&&(ne===Ee&&(ne=Ml(ne)),Ke(ne,P.ADD_TAGS,Kt)),P.ADD_ATTR&&(xe===et&&(xe=Ml(xe)),Ke(xe,P.ADD_ATTR,Kt)),P.ADD_URI_SAFE_ATTR&&Ke(Ys,P.ADD_URI_SAFE_ATTR,Kt),P.FORBID_CONTENTS&&(bo===Up&&(bo=Ml(bo)),Ke(bo,P.FORBID_CONTENTS,Kt)),Go&&(ne["#text"]=!0),go&&Ke(ne,["html","head","body"]),ne.table&&(Ke(ne,["tbody"]),delete fe.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw Wc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Wc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=P.TRUSTED_TYPES_POLICY,B=A.createHTML("")}else A===void 0&&(A=BP(g,n)),A!==null&&typeof B=="string"&&(B=A.createHTML(""));Xn&&Xn(P),jo=P}},Hp=Ke({},["mi","mo","mn","ms","mtext"]),Kp=Ke({},["foreignobject","desc","title","annotation-xml"]),Ub=Ke({},["title","style","font","a","script"]),we=Ke({},qv);Ke(we,jv),Ke(we,DP);let I=Ke({},Xv);Ke(I,_P);let x=function(P){let X=R(P);(!X||!X.tagName)&&(X={namespaceURI:Bi,tagName:"template"});let ce=Wh(P.tagName),at=Wh(X.tagName);return Vn[P.namespaceURI]?P.namespaceURI===Or?X.namespaceURI===Mt?ce==="svg":X.namespaceURI===vo?ce==="svg"&&(at==="annotation-xml"||Hp[at]):!!we[ce]:P.namespaceURI===vo?X.namespaceURI===Mt?ce==="math":X.namespaceURI===Or?ce==="math"&&Kp[at]:!!I[ce]:P.namespaceURI===Mt?X.namespaceURI===Or&&!Kp[at]||X.namespaceURI===vo&&!Hp[at]?!1:!I[ce]&&(Ub[ce]||!we[ce]):!!(Ar==="application/xhtml+xml"&&Vn[P.namespaceURI]):!1},C=function(P){Uc(e.removed,{element:P});try{P.parentNode.removeChild(P)}catch{P.remove()}},w=function(P,X){try{Uc(e.removed,{attribute:X.getAttributeNode(P),from:X})}catch{Uc(e.removed,{attribute:null,from:X})}if(X.removeAttribute(P),P==="is"&&!xe[P])if($o||al)try{C(X)}catch{}else try{X.setAttribute(P,"")}catch{}},_=function(P){let X,ce;if(ac)P="<remove></remove>"+P;else{let Pn=EP(P,/^[\r\n\t ]+/);ce=Pn&&Pn[0]}Ar==="application/xhtml+xml"&&Bi===Mt&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");let at=A?A.createHTML(P):P;if(Bi===Mt)try{X=new h().parseFromString(at,Ar)}catch{}if(!X||!X.documentElement){X=W.createDocument(Bi,"template",null);try{X.documentElement.innerHTML=qo?B:at}catch{}}let Nt=X.body||X.documentElement;return P&&ce&&Nt.insertBefore(i.createTextNode(ce),Nt.childNodes[0]||null),Bi===Mt?Y.call(X,go?"html":"body")[0]:go?X.documentElement:Nt},N=function(P){return H.call(P.ownerDocument||P,P,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},z=function(P){return P instanceof p&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof u)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},Z=function(P){return typeof a=="object"?P instanceof a:P&&typeof P=="object"&&typeof P.nodeType=="number"&&typeof P.nodeName=="string"},ae=function(P,X,ce){de[P]&&CP(de[P],at=>{at.call(e,X,ce,jo)})},ke=function(P){let X;if(ae("beforeSanitizeElements",P,null),z(P))return C(P),!0;let ce=Kt(P.nodeName);if(ae("uponSanitizeElement",P,{tagName:ce,allowedTags:ne}),P.hasChildNodes()&&!Z(P.firstElementChild)&&(!Z(P.content)||!Z(P.content.firstElementChild))&&_i(/<[/\w]/g,P.innerHTML)&&_i(/<[/\w]/g,P.textContent))return C(P),!0;if(!ne[ce]||fe[ce]){if(!fe[ce]&&pt(ce)&&(_e.tagNameCheck instanceof RegExp&&_i(_e.tagNameCheck,ce)||_e.tagNameCheck instanceof Function&&_e.tagNameCheck(ce)))return!1;if(Go&&!bo[ce]){let at=R(P)||P.parentNode,Nt=D(P)||P.childNodes;if(Nt&&at){let Pn=Nt.length;for(let Tt=Pn-1;Tt>=0;--Tt)at.insertBefore(f(Nt[Tt],!0),v(P))}}return C(P),!0}return P instanceof l&&!x(P)||(ce==="noscript"||ce==="noembed"||ce==="noframes")&&_i(/<\/no(script|embed|frames)/i,P.innerHTML)?(C(P),!0):(ni&&P.nodeType===3&&(X=P.textContent,X=lr(X,be," "),X=lr(X,ge," "),X=lr(X,Ye," "),P.textContent!==X&&(Uc(e.removed,{element:P.cloneNode()}),P.textContent=X)),ae("afterSanitizeElements",P,null),!1)},$e=function(P,X,ce){if(Fp&&(X==="id"||X==="name")&&(ce in i||ce in Bb))return!1;if(!(er&&!gn[X]&&_i(ut,X))){if(!(Qt&&_i(se,X))){if(!xe[X]||gn[X]){if(!(pt(P)&&(_e.tagNameCheck instanceof RegExp&&_i(_e.tagNameCheck,P)||_e.tagNameCheck instanceof Function&&_e.tagNameCheck(P))&&(_e.attributeNameCheck instanceof RegExp&&_i(_e.attributeNameCheck,X)||_e.attributeNameCheck instanceof Function&&_e.attributeNameCheck(X))||X==="is"&&_e.allowCustomizedBuiltInElements&&(_e.tagNameCheck instanceof RegExp&&_i(_e.tagNameCheck,ce)||_e.tagNameCheck instanceof Function&&_e.tagNameCheck(ce))))return!1}else if(!Ys[X]){if(!_i(J,lr(ce,te,""))){if(!((X==="src"||X==="xlink:href"||X==="href")&&P!=="script"&&TP(ce,"data:")===0&&dl[P])){if(!(Fi&&!_i(G,lr(ce,te,"")))){if(ce)return!1}}}}}}return!0},pt=function(P){return P.indexOf("-")>0},Pt=function(P){let X,ce,at,Nt;ae("beforeSanitizeAttributes",P,null);let{attributes:Pn}=P;if(!Pn)return;let Tt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe};for(Nt=Pn.length;Nt--;){X=Pn[Nt];let{name:Mr,namespaceURI:Wb}=X;if(ce=Mr==="value"?X.value:wP(X.value),at=Kt(Mr),Tt.attrName=at,Tt.attrValue=ce,Tt.keepAttr=!0,Tt.forceKeepAttr=void 0,ae("uponSanitizeAttribute",P,Tt),ce=Tt.attrValue,Tt.forceKeepAttr||(w(Mr,P),!Tt.keepAttr))continue;if(!sl&&_i(/\/>/i,ce)){w(Mr,P);continue}ni&&(ce=lr(ce,be," "),ce=lr(ce,ge," "),ce=lr(ce,Ye," "));let SE=Kt(P.nodeName);if($e(SE,at,ce)){if(Bp&&(at==="id"||at==="name")&&(w(Mr,P),ce=Fb+ce),A&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Wb)switch(g.getAttributeType(SE,at)){case"TrustedHTML":{ce=A.createHTML(ce);break}case"TrustedScriptURL":{ce=A.createScriptURL(ce);break}}try{Wb?P.setAttributeNS(Wb,Mr,ce):P.setAttribute(Mr,ce),QT(e.removed)}catch{}}}ae("afterSanitizeAttributes",P,null)},mt=function he(P){let X,ce=N(P);for(ae("beforeSanitizeShadowDOM",P,null);X=ce.nextNode();)ae("uponSanitizeShadowNode",X,null),!ke(X)&&(X.content instanceof o&&he(X.content),Pt(X));ae("afterSanitizeShadowDOM",P,null)};return e.sanitize=function(he){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X,ce,at,Nt;if(qo=!he,qo&&(he="<!-->"),typeof he!="string"&&!Z(he))if(typeof he.toString=="function"){if(he=he.toString(),typeof he!="string")throw Wc("dirty is not a string, aborting")}else throw Wc("toString is not a function");if(!e.isSupported)return he;if(sc||lc(P),e.removed=[],typeof he=="string"&&(Qs=!1),Qs){if(he.nodeName){let Mr=Kt(he.nodeName);if(!ne[Mr]||fe[Mr])throw Wc("root node is forbidden and cannot be sanitized in-place")}}else if(he instanceof a)X=_("<!---->"),ce=X.ownerDocument.importNode(he,!0),ce.nodeType===1&&ce.nodeName==="BODY"||ce.nodeName==="HTML"?X=ce:X.appendChild(ce);else{if(!$o&&!ni&&!go&&he.indexOf("<")===-1)return A&&ll?A.createHTML(he):he;if(X=_(he),!X)return $o?null:ll?B:""}X&&ac&&C(X.firstChild);let Pn=N(Qs?he:X);for(;at=Pn.nextNode();)ke(at)||(at.content instanceof o&&mt(at.content),Pt(at));if(Qs)return he;if($o){if(al)for(Nt=ue.call(X.ownerDocument);X.firstChild;)Nt.appendChild(X.firstChild);else Nt=X;return(xe.shadowroot||xe.shadowrootmode)&&(Nt=oe.call(t,Nt,!0)),Nt}let Tt=go?X.outerHTML:X.innerHTML;return go&&ne["!doctype"]&&X.ownerDocument&&X.ownerDocument.doctype&&X.ownerDocument.doctype.name&&_i(rw,X.ownerDocument.doctype.name)&&(Tt="<!DOCTYPE "+X.ownerDocument.doctype.name+`>
`+Tt),ni&&(Tt=lr(Tt,be," "),Tt=lr(Tt,ge," "),Tt=lr(Tt,Ye," ")),A&&ll?A.createHTML(Tt):Tt},e.setConfig=function(he){lc(he),sc=!0},e.clearConfig=function(){jo=null,sc=!1},e.isValidAttribute=function(he,P,X){jo||lc({});let ce=Kt(he),at=Kt(P);return $e(ce,at,X)},e.addHook=function(he,P){typeof P=="function"&&(de[he]=de[he]||[],Uc(de[he],P))},e.removeHook=function(he){if(de[he])return QT(de[he])},e.removeHooks=function(he){de[he]&&(de[he]=[])},e.removeAllHooks=function(){de={}},e}var Vr=ow();var K4=Vr.version,$4=Vr.isSupported,sw=Vr.sanitize,G4=Vr.setConfig,q4=Vr.clearConfig,j4=Vr.isValidAttribute,aw=Vr.addHook,lw=Vr.removeHook,X4=Vr.removeHooks,Q4=Vr.removeAllHooks;function xn(r){return eI(r,0)}function eI(r,e){switch(typeof r){case"object":return r===null?Ro(349,e):Array.isArray(r)?WP(r,e):VP(r,e);case"string":return zc(r,e);case"boolean":return UP(r,e);case"number":return Ro(r,e);case"undefined":return Ro(937,e);default:return Ro(617,e)}}function Ro(r,e){return(e<<5)-e+r|0}function UP(r,e){return Ro(r?433:863,e)}function zc(r,e){e=Ro(149417,e);for(let t=0,n=r.length;t<n;t++)e=Ro(r.charCodeAt(t),e);return e}function WP(r,e){return e=Ro(104579,e),r.reduce((t,n)=>eI(n,t),e)}function VP(r,e){return e=Ro(181387,e),Object.keys(r).sort().reduce((t,n)=>(t=zc(n,t),eI(r[n],t)),e)}function Zv(r,e,t=32){let n=t-e,i=~((1<<n)-1);return(r<<e|(i&r)>>>n)>>>0}function cw(r,e=0,t=r.byteLength,n=0){for(let i=0;i<t;i++)r[e+i]=n}function zP(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function Vc(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):zP((r>>>0).toString(16),e/4)}var Vh=class r{static _bigBlock32=new DataView(new ArrayBuffer(320));_h0=1732584193;_h1=4023233417;_h2=2562383102;_h3=271733878;_h4=3285377520;_buff;_buffDV;_buffLen;_totalLen;_leftoverHighSurrogate;_finished;constructor(){this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let n=this._buff,i=this._buffLen,o=this._leftoverHighSurrogate,s,a;for(o!==0?(s=o,a=-1,o=0):(s=e.charCodeAt(0),a=0);;){let l=s;if(ai(s))if(a+1<t){let d=e.charCodeAt(a+1);Rl(d)?(a++,l=Dh(s,d)):l=65533}else{o=s;break}else Rl(s)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Vc(this._h0)+Vc(this._h1)+Vc(this._h2)+Vc(this._h3)+Vc(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,cw(this._buff,this._buffLen),this._buffLen>56&&(this._step(),cw(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=r._bigBlock32,t=this._buffDV;for(let p=0;p<64;p+=4)e.setUint32(p,t.getUint32(p,!1),!1);for(let p=64;p<320;p+=4)e.setUint32(p,Zv(e.getUint32(p-12,!1)^e.getUint32(p-32,!1)^e.getUint32(p-56,!1)^e.getUint32(p-64,!1),1),!1);let n=this._h0,i=this._h1,o=this._h2,s=this._h3,a=this._h4,l,d,u;for(let p=0;p<80;p++)p<20?(l=i&o|~i&s,d=1518500249):p<40?(l=i^o^s,d=1859775393):p<60?(l=i&o|i&s|o&s,d=2400959708):(l=i^o^s,d=3395469782),u=Zv(n,5)+l+a+d+e.getUint32(p*4,!1)&4294967295,a=s,s=o,o=Zv(i,30),i=n,n=u;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}};function Hc(r,e,t){return Math.min(Math.max(r,e),t)}var{registerWindow:hw,getWindow:Be,getDocument:b5,getWindows:$c,getWindowsCount:$h,getWindowId:zh,getWindowById:Gh,hasWindow:v5,onDidRegisterWindow:iI,onWillUnregisterWindow:I5,onDidUnregisterWindow:y5}=function(){let r=new Map;$p(pe,1);let e={window:pe,disposables:new le};r.set(pe.vscodeWindowId,e);let t=new E,n=new E,i=new E;function o(s,a){return(typeof s=="number"?r.get(s):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:i.event,onDidUnregisterWindow:n.event,registerWindow(s){if(r.has(s.vscodeWindowId))return O.None;let a=new le,l={window:s,disposables:a.add(new le)};return r.set(s.vscodeWindowId,l),a.add(j(()=>{r.delete(s.vscodeWindowId),n.fire(s)})),a.add(ie(s,Ie.BEFORE_UNLOAD,()=>{i.fire(s)})),t.fire(l),a},getWindows(){return r.values()},getWindowsCount(){return r.size},getWindowId(s){return s.vscodeWindowId},hasWindow(s){return r.has(s)},getWindowById:o,getWindow(s){let a=s;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;let l=s;return l?.view?l.view.window:pe},getDocument(s){return Be(s).document}}}();function Nl(r){for(;r.firstChild;)r.firstChild.remove()}var tI=class{_handler;_node;_type;_options;constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function ie(r,e,t,n){return new tI(r,e,t,n)}function HP(r,e){return function(t){return e(new Wi(r,t))}}function KP(r){return function(e){return r(new ln(e))}}var ba=function(e,t,n,i){let o=n;return t==="click"||t==="mousedown"||t==="contextmenu"?o=HP(Be(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=KP(n)),ie(e,t,o,i)};var $P,ur;var Hh=class extends Mh{defaultTarget;constructor(e){super(),this.defaultTarget=e&&Be(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}},Kc=class{_runner;priority;_canceled;constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ae(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let r=new Map,e=new Map,t=new Map,n=new Map,i=o=>{t.set(o,!1);let s=r.get(o)??[];for(e.set(o,s),r.set(o,[]),n.set(o,!0);s.length>0;)s.sort(Kc.sort),s.shift().execute();n.set(o,!1)};ur=(o,s,a=0)=>{let l=zh(o),d=new Kc(s,a),u=r.get(l);return u||(u=[],r.set(l,u)),u.push(d),t.get(l)||(t.set(l,!0),o.requestAnimationFrame(()=>i(l))),d},$P=(o,s,a)=>{let l=zh(o);if(n.get(l)){let d=new Kc(s,a),u=e.get(l);return u||(u=[],e.set(l,u)),u.push(d),d}else return ur(o,s,a)}})();function mw(r){return Be(r).getComputedStyle(r,null)}function Gc(r,e){let t=Be(r),n=t.document;if(r!==n.body)return new cr(r.clientWidth,r.clientHeight);if(hl&&t?.visualViewport)return new cr(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new cr(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new cr(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new cr(n.documentElement.clientWidth,n.documentElement.clientHeight);if(e)return Gc(e);throw new Error("Unable to figure out browser width and height")}var Ki=class r{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let i=mw(e),o=i?i.getPropertyValue(t):"0";return r.convertToPixels(e,o)}static getBorderLeftWidth(e){return r.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return r.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return r.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return r.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return r.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return r.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return r.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return r.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return r.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return r.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return r.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return r.getDimension(e,"margin-bottom","marginBottom")}},cr=class r{constructor(e,t){this.width=e;this.height=t}static None=new r(0,0);with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new r(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof r?e:new r(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};function qc(r){let e=r.offsetParent,t=r.offsetTop,n=r.offsetLeft;for(;(r=r.parentNode)!==null&&r!==r.ownerDocument.body&&r!==r.ownerDocument.documentElement;){t-=r.scrollTop;let i=vw(r)?null:mw(r);i&&(n-=i.direction!=="rtl"?r.scrollLeft:-r.scrollLeft),r===e&&(n+=Ki.getBorderLeftWidth(r),t+=Ki.getBorderTopWidth(r),t+=r.offsetTop,n+=r.offsetLeft,e=r.offsetParent)}return{left:n,top:t}}function gw(r,e,t,n,i,o="absolute"){typeof e=="number"&&(r.style.top=`${e}px`),typeof t=="number"&&(r.style.right=`${t}px`),typeof n=="number"&&(r.style.bottom=`${n}px`),typeof i=="number"&&(r.style.left=`${i}px`),r.style.position=o}function qh(r){let e=r.getBoundingClientRect(),t=Be(r);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function jh(r){let e=Ki.getBorderLeftWidth(r)+Ki.getBorderRightWidth(r),t=Ki.getPaddingLeft(r)+Ki.getPaddingRight(r);return r.offsetWidth-e-t}function fw(r){let e=Ki.getBorderTopWidth(r)+Ki.getBorderBottomWidth(r),t=Ki.getPaddingTop(r)+Ki.getPaddingBottom(r);return r.offsetHeight-e-t}function fa(r,e){return!!e?.contains(r)}var GP="parentFlowToElementId";function bw(r,e){r.dataset[GP]=e.id}function vw(r){return r&&!!r.host&&!!r.mode}function qP(r){for(;r.parentNode;){if(r===r.ownerDocument?.body)return null;r=r.parentNode}return vw(r)?r:null}function Xh(){let r=oI().activeElement;for(;r?.shadowRoot;)r=r.shadowRoot.activeElement;return r}function rI(r){return Xh()===r}function oI(){return $h()<=1?pe.document:Array.from($c()).map(({window:e})=>e.document).find(e=>e.hasFocus())??pe.document}function jc(){return oI().defaultView?.window??pe}var sI=new Map;function Iw(r){return sI.has(r)}function Fl(r=pe.document.head,e,t){let n=document.createElement("style");if(n.type="text/css",n.media="screen",e?.(n),r.appendChild(n),t&&t.add(j(()=>n.remove())),r===pe.document.head){let i=new Set;sI.set(n,i);for(let{window:o,disposables:s}of $c()){if(o===pe)continue;let a=s.add(xw(n,i,o));t?.add(a)}}return n}function yw(r){let e=new le;for(let[t,n]of sI)e.add(xw(t,n,r));return e}function xw(r,e,t){let n=new le,i=r.cloneNode(!0);t.document.head.appendChild(i),n.add(j(()=>i.remove()));for(let o of jP(r))i.sheet?.insertRule(o.cssText,i.sheet?.cssRules.length);return n.add(Qh.observe(r,n,{childList:!0})(()=>{i.textContent=r.textContent})),e.add(i),n.add(j(()=>e.delete(i))),n}var Qh=new class{mutationObservers=new Map;observe(r,e,t){let n=this.mutationObservers.get(r);n||(n=new Map,this.mutationObservers.set(r,n));let i=xn(t),o=n.get(i);if(o)o.users+=1;else{let s=new E,a=new MutationObserver(d=>s.fire(d));a.observe(r,t);let l=o={users:1,observer:a,onDidMutate:s.event};e.add(j(()=>{l.users-=1,l.users===0&&(s.dispose(),a.disconnect(),n?.delete(i),n?.size===0&&this.mutationObservers.delete(r))})),n.set(i,o)}return o.onDidMutate}};function Sw(r=pe.document.head){return Ew("meta",r)}function Cw(r=pe.document.head){return Ew("link",r)}function Ew(r,e=pe.document.head){let t=document.createElement(r);return e.appendChild(t),t}function jP(r){return r?.sheet?.rules?r.sheet.rules:r?.sheet?.cssRules?r.sheet.cssRules:[]}function di(r){return r instanceof HTMLElement||r instanceof Be(r).HTMLElement}function Tw(r){return r instanceof SVGElement||r instanceof Be(r).SVGElement}function ww(r){return r instanceof MouseEvent||r instanceof Be(r).MouseEvent}var Ie={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:wl?"webkitAnimationStart":"animationstart",ANIMATION_END:wl?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:wl?"webkitAnimationIteration":"animationiteration"};var Sn={stop:(r,e)=>(r.preventDefault(),e&&r.stopPropagation(),r)};var nI=class r extends O{_onDidFocus=this._register(new E);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new E);onDidBlur=this._onDidBlur.event;_refreshStateHandler;static hasFocusWithin(e){if(di(e)){let t=qP(e),n=t?t.activeElement:e.ownerDocument.activeElement;return fa(n,e)}else{let t=e;return fa(t.document.activeElement,t.document)}}constructor(e){super();let t=r.hasFocusWithin(e),n=!1,i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(n=!0,(di(e)?Be(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{r.hasFocusWithin(e)!==t&&(t?o():i())},this._register(ie(e,Ie.FOCUS,i,!0)),this._register(ie(e,Ie.BLUR,o,!0)),di(e)&&(this._register(ie(e,Ie.FOCUS_IN,()=>this._refreshStateHandler())),this._register(ie(e,Ie.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}};function Xc(r){return new nI(r)}var XP=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function kw(r,e,t,...n){let i=XP.exec(e);if(!i)throw new Error("Bad use of emmet");let o=i[1]||"div",s;return r!=="http://www.w3.org/1999/xhtml"?s=document.createElementNS(r,o):s=document.createElement(o),i[3]&&(s.id=i[3]),i[4]&&(s.className=i[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?s[a]=l:a==="selected"?l&&s.setAttribute(a,"true"):s.setAttribute(a,l))}),s.append(...n),s}function ci(r,e,...t){return kw("http://www.w3.org/1999/xhtml",r,e,...t)}ci.SVG=function(r,e,...t){return kw("http://www.w3.org/2000/svg",r,e,...t)};function aI(r){pe.open(r,"_blank","noopener")}var uw=780,pw=640;function lI(r){let e=Math.floor(pe.screenLeft+pe.innerWidth/2-uw/2),t=Math.floor(pe.screenTop+pe.innerHeight/2-pw/2);pe.open(r,"_blank",`width=${uw},height=${pw},top=${t},left=${e}`)}function Dw(r,e=!0){let t=pe.open();return t?(e&&(t.opener=null),t.location.href=r,!0):!1}function _w(r,e){let t=()=>{e(),n=ur(r,t)},n=ur(r,t);return j(()=>n.dispose())}Ah.setPreferredWebSchema(/^https:/.test(pe.location.href)?"https":"http");function dI(r){return r?`url('${pa.uriToBrowserUri(r).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function Bl(r,e){if(r!==void 0){let t=r.match(/^\s*var\((.+)\)$/);if(t){let n=t[1].split(",",2);return n.length===2&&(e=Bl(n[1].trim(),e)),`var(${n[0]}, ${e})`}return r}return e}var x5=[q.http,q.https,q.command],QP=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),S5=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});function YP(r){let e=new Uint16Array(r.length);for(let i=0;i<e.length;i++)e[i]=r.charCodeAt(i);let t="",n=new Uint8Array(e.buffer);for(let i=0;i<n.length;i++)t+=String.fromCharCode(n[i]);return t}function Rw(r){return btoa(YP(r))}var Kh=class r extends E{_subscriptions=new le;_keyStatus;static instance;constructor(){super(),this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Q.runAndSubscribe(iI,({window:e,disposables:t})=>this.registerListeners(e,t),{window:pe,disposables:this._subscriptions}))}registerListeners(e,t){t.add(ie(e,"keydown",n=>{if(n.defaultPrevented)return;let i=new ln(n);if(!(i.keyCode===6&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(i.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(ie(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(ie(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(ie(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(ie(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(ie(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return this._keyStatus.altKey||this._keyStatus.ctrlKey||this._keyStatus.metaKey||this._keyStatus.shiftKey}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return r.instance||(r.instance=new r),r.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};function Yh(r,e,t){for(let{name:n,value:i}of r.attributes)(!t||t.includes(n))&&e.setAttribute(n,i)}function JP(r,e,t){let n=r.getAttribute(t);n?e.setAttribute(t,n):e.removeAttribute(t)}function Jh(r,e,t){Yh(r,e,t);let n=new le;return n.add(Qh.observe(r,n,{attributes:!0,attributeFilter:t})(i=>{for(let o of i)o.type==="attributes"&&o.attributeName&&JP(r,e,o.attributeName)})),n}function va(r){return r.tagName.toLowerCase()==="input"||r.tagName.toLowerCase()==="textarea"||di(r)&&!!r.editContext}function uI(r,e){return new cI(r,e)}var cI=class{constructor(e,t){this.reducer=e;this.options=t}state={flowing:!1,ended:!1,destroyed:!1};buffer={data:[],error:[]};listeners={data:[],error:[],end:[]};pendingWritePromises=[];pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(t=>this.pendingWritePromises.push(t))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(typeof e<"u"&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){this.listeners.error.length===0?Ae(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors();break}}removeListener(e,t){if(this.state.destroyed)return;let n;switch(e){case"data":n=this.listeners.data;break;case"end":n=this.listeners.end;break;case"error":n=this.listeners.error;break}if(n){let i=n.indexOf(t);i>=0&&n.splice(i,1)}}flowData(){if(this.buffer.data.length>0){let e=this.reducer(this.buffer.data);this.emitData(e),this.buffer.data.length=0;let t=[...this.pendingWritePromises];this.pendingWritePromises.length=0,t.forEach(n=>n())}}flowErrors(){if(this.listeners.error.length>0){for(let e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}};function Pw(r,e){return new Promise((t,n)=>{let i=[];Zh(r,{onData:o=>{e&&i.push(o)},onError:o=>{e?n(o):t(void 0)},onEnd:()=>{t(e?e(i):void 0)}})})}function Zh(r,e,t){r.on("error",n=>{t?.isCancellationRequested||e.onError(n)}),r.on("end",()=>{t?.isCancellationRequested||e.onEnd()}),r.on("data",n=>{t?.isCancellationRequested||e.onData(n)})}function Lw(r,e){let t=uI(e);return t.end(r),t}function Ow(r){let e=!1;return{read:()=>e?null:(e=!0,r)}}var em=typeof Buffer<"u",eL=new Ot(()=>new Uint8Array(256)),pI,hI,Ne=class r{static alloc(e){return em?new r(Buffer.allocUnsafe(e)):new r(new Uint8Array(e))}static wrap(e){return em&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new r(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&em?new r(Buffer.from(e)):(pI||(pI=new TextEncoder),new r(pI.encode(e)))}static fromByteArray(e){let t=r.alloc(e.length);for(let n=0,i=e.length;n<i;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let o=0,s=e.length;o<s;o++)t+=e[o].byteLength}let n=r.alloc(t),i=0;for(let o=0,s=e.length;o<s;o++){let a=e[o];n.set(a,i),i+=a.byteLength}return n}buffer;byteLength;constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let e=r.alloc(this.byteLength);return e.set(this),e}toString(){return em?this.buffer.toString():(hI||(hI=new TextDecoder),hI.decode(this.buffer))}slice(e,t){return new r(this.buffer.subarray(e,t))}set(e,t){if(e instanceof r)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return $t(this.buffer,e)}writeUInt32BE(e,t){Gt(this.buffer,e,t)}readUInt32LE(e){return nL(this.buffer,e)}writeUInt32LE(e,t){iL(this.buffer,e,t)}readUInt8(e){return tm(this.buffer,e)}writeUInt8(e,t){nm(this.buffer,e,t)}indexOf(e,t=0){return tL(this.buffer,e instanceof r?e.buffer:e,t)}};function tL(r,e,t=0){let n=e.byteLength,i=r.byteLength;if(n===0)return 0;if(n===1)return r.indexOf(e[0]);if(n>i-t)return-1;let o=eL.value;o.fill(e.length);for(let d=0;d<e.length;d++)o[e[d]]=e.length-d-1;let s=t+e.length-1,a=s,l=-1;for(;s<i;)if(r[s]===e[a]){if(a===0){l=s;break}s--,a--}else s+=Math.max(e.length-a,o[r[s]]),a=e.length-1;return l}function Aw(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function Mw(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function $t(r,e){return r[e]*2**24+r[e+1]*2**16+r[e+2]*2**8+r[e+3]}function Gt(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function nL(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0|r[e+2]<<16>>>0|r[e+3]<<24>>>0}function iL(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255,e=e>>>8,r[t+2]=e&255,e=e>>>8,r[t+3]=e&255}function tm(r,e){return r[e]}function nm(r,e,t){r[t]=e}function Nw(r){return Ow(r)}function Fw(r){return Pw(r,e=>Ne.concat(e))}function Bw(r){return Lw(r,e=>Ne.concat(e))}function im(r){let e=0,t=0,n=0,i=new Uint8Array(Math.floor(r.length/4*3)),o=a=>{switch(t){case 3:i[n++]=e|a,t=0;break;case 2:i[n++]=e|a>>>2,e=a<<6,t=3;break;case 1:i[n++]=e|a>>>4,e=a<<4,t=2;break;default:e=a<<2,t=1}};for(let a=0;a<r.length;a++){let l=r.charCodeAt(a);if(l>=65&&l<=90)o(l-65);else if(l>=97&&l<=122)o(l-97+26);else if(l>=48&&l<=57)o(l-48+52);else if(l===43||l===45)o(62);else if(l===47||l===95)o(63);else{if(l===61)break;throw new SyntaxError(`Unexpected base64 character ${r[a]}`)}}let s=n;for(;t>0;)o(0);return Ne.wrap(i).slice(0,s)}var rL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function rm({buffer:r},e=!0,t=!1){let n=t?oL:rL,i="",o=r.byteLength%3,s=0;for(;s<r.byteLength-o;s+=3){let a=r[s+0],l=r[s+1],d=r[s+2];i+=n[a>>>2],i+=n[(a<<4|l>>>4)&63],i+=n[(l<<2|d>>>6)&63],i+=n[d&63]}if(o===1){let a=r[s+0];i+=n[a>>>2],i+=n[a<<4&63],e&&(i+="==")}else if(o===2){let a=r[s+0],l=r[s+1];i+=n[a>>>2],i+=n[(a<<4|l>>>4)&63],i+=n[l<<2&63],e&&(i+="=")}return i}var dt=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let r;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?r=crypto.getRandomValues.bind(crypto):r=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){r(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,o="";return o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o}}();var gI=Object.create(null);function m(r,e){if(Oe(e)){let t=gI[e];if(t===void 0)throw new Error(`${r} references an unknown codicon: ${e}`);e=t}return gI[r]=e,{id:r}}function Ww(){return gI}var Vw={add:m("add",6e4),plus:m("plus",6e4),gistNew:m("gist-new",6e4),repoCreate:m("repo-create",6e4),lightbulb:m("lightbulb",60001),lightBulb:m("light-bulb",60001),repo:m("repo",60002),repoDelete:m("repo-delete",60002),gistFork:m("gist-fork",60003),repoForked:m("repo-forked",60003),gitPullRequest:m("git-pull-request",60004),gitPullRequestAbandoned:m("git-pull-request-abandoned",60004),recordKeys:m("record-keys",60005),keyboard:m("keyboard",60005),tag:m("tag",60006),gitPullRequestLabel:m("git-pull-request-label",60006),tagAdd:m("tag-add",60006),tagRemove:m("tag-remove",60006),person:m("person",60007),personFollow:m("person-follow",60007),personOutline:m("person-outline",60007),personFilled:m("person-filled",60007),gitBranch:m("git-branch",60008),gitBranchCreate:m("git-branch-create",60008),gitBranchDelete:m("git-branch-delete",60008),sourceControl:m("source-control",60008),mirror:m("mirror",60009),mirrorPublic:m("mirror-public",60009),star:m("star",60010),starAdd:m("star-add",60010),starDelete:m("star-delete",60010),starEmpty:m("star-empty",60010),comment:m("comment",60011),commentAdd:m("comment-add",60011),alert:m("alert",60012),warning:m("warning",60012),search:m("search",60013),searchSave:m("search-save",60013),logOut:m("log-out",60014),signOut:m("sign-out",60014),logIn:m("log-in",60015),signIn:m("sign-in",60015),eye:m("eye",60016),eyeUnwatch:m("eye-unwatch",60016),eyeWatch:m("eye-watch",60016),circleFilled:m("circle-filled",60017),primitiveDot:m("primitive-dot",60017),closeDirty:m("close-dirty",60017),debugBreakpoint:m("debug-breakpoint",60017),debugBreakpointDisabled:m("debug-breakpoint-disabled",60017),debugHint:m("debug-hint",60017),terminalDecorationSuccess:m("terminal-decoration-success",60017),primitiveSquare:m("primitive-square",60018),edit:m("edit",60019),pencil:m("pencil",60019),info:m("info",60020),issueOpened:m("issue-opened",60020),gistPrivate:m("gist-private",60021),gitForkPrivate:m("git-fork-private",60021),lock:m("lock",60021),mirrorPrivate:m("mirror-private",60021),close:m("close",60022),removeClose:m("remove-close",60022),x:m("x",60022),repoSync:m("repo-sync",60023),sync:m("sync",60023),clone:m("clone",60024),desktopDownload:m("desktop-download",60024),beaker:m("beaker",60025),microscope:m("microscope",60025),vm:m("vm",60026),deviceDesktop:m("device-desktop",60026),file:m("file",60027),fileText:m("file-text",60027),more:m("more",60028),ellipsis:m("ellipsis",60028),kebabHorizontal:m("kebab-horizontal",60028),mailReply:m("mail-reply",60029),reply:m("reply",60029),organization:m("organization",60030),organizationFilled:m("organization-filled",60030),organizationOutline:m("organization-outline",60030),newFile:m("new-file",60031),fileAdd:m("file-add",60031),newFolder:m("new-folder",60032),fileDirectoryCreate:m("file-directory-create",60032),trash:m("trash",60033),trashcan:m("trashcan",60033),history:m("history",60034),clock:m("clock",60034),folder:m("folder",60035),fileDirectory:m("file-directory",60035),symbolFolder:m("symbol-folder",60035),logoGithub:m("logo-github",60036),markGithub:m("mark-github",60036),github:m("github",60036),terminal:m("terminal",60037),console:m("console",60037),repl:m("repl",60037),zap:m("zap",60038),symbolEvent:m("symbol-event",60038),error:m("error",60039),stop:m("stop",60039),variable:m("variable",60040),symbolVariable:m("symbol-variable",60040),array:m("array",60042),symbolArray:m("symbol-array",60042),symbolModule:m("symbol-module",60043),symbolPackage:m("symbol-package",60043),symbolNamespace:m("symbol-namespace",60043),symbolObject:m("symbol-object",60043),symbolMethod:m("symbol-method",60044),symbolFunction:m("symbol-function",60044),symbolConstructor:m("symbol-constructor",60044),symbolBoolean:m("symbol-boolean",60047),symbolNull:m("symbol-null",60047),symbolNumeric:m("symbol-numeric",60048),symbolNumber:m("symbol-number",60048),symbolStructure:m("symbol-structure",60049),symbolStruct:m("symbol-struct",60049),symbolParameter:m("symbol-parameter",60050),symbolTypeParameter:m("symbol-type-parameter",60050),symbolKey:m("symbol-key",60051),symbolText:m("symbol-text",60051),symbolReference:m("symbol-reference",60052),goToFile:m("go-to-file",60052),symbolEnum:m("symbol-enum",60053),symbolValue:m("symbol-value",60053),symbolRuler:m("symbol-ruler",60054),symbolUnit:m("symbol-unit",60054),activateBreakpoints:m("activate-breakpoints",60055),archive:m("archive",60056),arrowBoth:m("arrow-both",60057),arrowDown:m("arrow-down",60058),arrowLeft:m("arrow-left",60059),arrowRight:m("arrow-right",60060),arrowSmallDown:m("arrow-small-down",60061),arrowSmallLeft:m("arrow-small-left",60062),arrowSmallRight:m("arrow-small-right",60063),arrowSmallUp:m("arrow-small-up",60064),arrowUp:m("arrow-up",60065),bell:m("bell",60066),bold:m("bold",60067),book:m("book",60068),bookmark:m("bookmark",60069),debugBreakpointConditionalUnverified:m("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:m("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:m("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:m("debug-breakpoint-data-unverified",60072),debugBreakpointData:m("debug-breakpoint-data",60073),debugBreakpointDataDisabled:m("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:m("debug-breakpoint-log-unverified",60074),debugBreakpointLog:m("debug-breakpoint-log",60075),debugBreakpointLogDisabled:m("debug-breakpoint-log-disabled",60075),briefcase:m("briefcase",60076),broadcast:m("broadcast",60077),browser:m("browser",60078),bug:m("bug",60079),calendar:m("calendar",60080),caseSensitive:m("case-sensitive",60081),check:m("check",60082),checklist:m("checklist",60083),chevronDown:m("chevron-down",60084),chevronLeft:m("chevron-left",60085),chevronRight:m("chevron-right",60086),chevronUp:m("chevron-up",60087),chromeClose:m("chrome-close",60088),chromeMaximize:m("chrome-maximize",60089),chromeMinimize:m("chrome-minimize",60090),chromeRestore:m("chrome-restore",60091),circleOutline:m("circle-outline",60092),circle:m("circle",60092),debugBreakpointUnverified:m("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:m("terminal-decoration-incomplete",60092),circleSlash:m("circle-slash",60093),circuitBoard:m("circuit-board",60094),clearAll:m("clear-all",60095),clippy:m("clippy",60096),closeAll:m("close-all",60097),cloudDownload:m("cloud-download",60098),cloudUpload:m("cloud-upload",60099),code:m("code",60100),collapseAll:m("collapse-all",60101),colorMode:m("color-mode",60102),commentDiscussion:m("comment-discussion",60103),creditCard:m("credit-card",60105),dash:m("dash",60108),dashboard:m("dashboard",60109),database:m("database",60110),debugContinue:m("debug-continue",60111),debugDisconnect:m("debug-disconnect",60112),debugPause:m("debug-pause",60113),debugRestart:m("debug-restart",60114),debugStart:m("debug-start",60115),debugStepInto:m("debug-step-into",60116),debugStepOut:m("debug-step-out",60117),debugStepOver:m("debug-step-over",60118),debugStop:m("debug-stop",60119),debug:m("debug",60120),deviceCameraVideo:m("device-camera-video",60121),deviceCamera:m("device-camera",60122),deviceMobile:m("device-mobile",60123),diffAdded:m("diff-added",60124),diffIgnored:m("diff-ignored",60125),diffModified:m("diff-modified",60126),diffRemoved:m("diff-removed",60127),diffRenamed:m("diff-renamed",60128),diff:m("diff",60129),diffSidebyside:m("diff-sidebyside",60129),discard:m("discard",60130),editorLayout:m("editor-layout",60131),emptyWindow:m("empty-window",60132),exclude:m("exclude",60133),extensions:m("extensions",60134),eyeClosed:m("eye-closed",60135),fileBinary:m("file-binary",60136),fileCode:m("file-code",60137),fileMedia:m("file-media",60138),filePdf:m("file-pdf",60139),fileSubmodule:m("file-submodule",60140),fileSymlinkDirectory:m("file-symlink-directory",60141),fileSymlinkFile:m("file-symlink-file",60142),fileZip:m("file-zip",60143),files:m("files",60144),filter:m("filter",60145),flame:m("flame",60146),foldDown:m("fold-down",60147),foldUp:m("fold-up",60148),fold:m("fold",60149),folderActive:m("folder-active",60150),folderOpened:m("folder-opened",60151),gear:m("gear",60152),gift:m("gift",60153),gistSecret:m("gist-secret",60154),gist:m("gist",60155),gitCommit:m("git-commit",60156),gitCompare:m("git-compare",60157),compareChanges:m("compare-changes",60157),gitMerge:m("git-merge",60158),githubAction:m("github-action",60159),githubAlt:m("github-alt",60160),globe:m("globe",60161),grabber:m("grabber",60162),graph:m("graph",60163),gripper:m("gripper",60164),heart:m("heart",60165),home:m("home",60166),horizontalRule:m("horizontal-rule",60167),hubot:m("hubot",60168),inbox:m("inbox",60169),issueReopened:m("issue-reopened",60171),issues:m("issues",60172),italic:m("italic",60173),jersey:m("jersey",60174),json:m("json",60175),kebabVertical:m("kebab-vertical",60176),key:m("key",60177),law:m("law",60178),lightbulbAutofix:m("lightbulb-autofix",60179),linkExternal:m("link-external",60180),link:m("link",60181),listOrdered:m("list-ordered",60182),listUnordered:m("list-unordered",60183),liveShare:m("live-share",60184),loading:m("loading",60185),location:m("location",60186),mailRead:m("mail-read",60187),mail:m("mail",60188),markdown:m("markdown",60189),megaphone:m("megaphone",60190),mention:m("mention",60191),milestone:m("milestone",60192),gitPullRequestMilestone:m("git-pull-request-milestone",60192),mortarBoard:m("mortar-board",60193),move:m("move",60194),multipleWindows:m("multiple-windows",60195),mute:m("mute",60196),noNewline:m("no-newline",60197),note:m("note",60198),octoface:m("octoface",60199),openPreview:m("open-preview",60200),package:m("package",60201),paintcan:m("paintcan",60202),pin:m("pin",60203),play:m("play",60204),run:m("run",60204),plug:m("plug",60205),preserveCase:m("preserve-case",60206),preview:m("preview",60207),project:m("project",60208),pulse:m("pulse",60209),question:m("question",60210),quote:m("quote",60211),radioTower:m("radio-tower",60212),reactions:m("reactions",60213),references:m("references",60214),refresh:m("refresh",60215),regex:m("regex",60216),remoteExplorer:m("remote-explorer",60217),remote:m("remote",60218),remove:m("remove",60219),replaceAll:m("replace-all",60220),replace:m("replace",60221),repoClone:m("repo-clone",60222),repoForcePush:m("repo-force-push",60223),repoPull:m("repo-pull",60224),repoPush:m("repo-push",60225),report:m("report",60226),requestChanges:m("request-changes",60227),rocket:m("rocket",60228),rootFolderOpened:m("root-folder-opened",60229),rootFolder:m("root-folder",60230),rss:m("rss",60231),ruby:m("ruby",60232),saveAll:m("save-all",60233),saveAs:m("save-as",60234),save:m("save",60235),screenFull:m("screen-full",60236),screenNormal:m("screen-normal",60237),searchStop:m("search-stop",60238),server:m("server",60240),settingsGear:m("settings-gear",60241),settings:m("settings",60242),shield:m("shield",60243),smiley:m("smiley",60244),sortPrecedence:m("sort-precedence",60245),splitHorizontal:m("split-horizontal",60246),splitVertical:m("split-vertical",60247),squirrel:m("squirrel",60248),starFull:m("star-full",60249),starHalf:m("star-half",60250),symbolClass:m("symbol-class",60251),symbolColor:m("symbol-color",60252),symbolConstant:m("symbol-constant",60253),symbolEnumMember:m("symbol-enum-member",60254),symbolField:m("symbol-field",60255),symbolFile:m("symbol-file",60256),symbolInterface:m("symbol-interface",60257),symbolKeyword:m("symbol-keyword",60258),symbolMisc:m("symbol-misc",60259),symbolOperator:m("symbol-operator",60260),symbolProperty:m("symbol-property",60261),wrench:m("wrench",60261),wrenchSubaction:m("wrench-subaction",60261),symbolSnippet:m("symbol-snippet",60262),tasklist:m("tasklist",60263),telescope:m("telescope",60264),textSize:m("text-size",60265),threeBars:m("three-bars",60266),thumbsdown:m("thumbsdown",60267),thumbsup:m("thumbsup",60268),tools:m("tools",60269),triangleDown:m("triangle-down",60270),triangleLeft:m("triangle-left",60271),triangleRight:m("triangle-right",60272),triangleUp:m("triangle-up",60273),twitter:m("twitter",60274),unfold:m("unfold",60275),unlock:m("unlock",60276),unmute:m("unmute",60277),unverified:m("unverified",60278),verified:m("verified",60279),versions:m("versions",60280),vmActive:m("vm-active",60281),vmOutline:m("vm-outline",60282),vmRunning:m("vm-running",60283),watch:m("watch",60284),whitespace:m("whitespace",60285),wholeWord:m("whole-word",60286),window:m("window",60287),wordWrap:m("word-wrap",60288),zoomIn:m("zoom-in",60289),zoomOut:m("zoom-out",60290),listFilter:m("list-filter",60291),listFlat:m("list-flat",60292),listSelection:m("list-selection",60293),selection:m("selection",60293),listTree:m("list-tree",60294),debugBreakpointFunctionUnverified:m("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:m("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:m("debug-breakpoint-function-disabled",60296),debugStackframeActive:m("debug-stackframe-active",60297),circleSmallFilled:m("circle-small-filled",60298),debugStackframeDot:m("debug-stackframe-dot",60298),terminalDecorationMark:m("terminal-decoration-mark",60298),debugStackframe:m("debug-stackframe",60299),debugStackframeFocused:m("debug-stackframe-focused",60299),debugBreakpointUnsupported:m("debug-breakpoint-unsupported",60300),symbolString:m("symbol-string",60301),debugReverseContinue:m("debug-reverse-continue",60302),debugStepBack:m("debug-step-back",60303),debugRestartFrame:m("debug-restart-frame",60304),debugAlt:m("debug-alt",60305),callIncoming:m("call-incoming",60306),callOutgoing:m("call-outgoing",60307),menu:m("menu",60308),expandAll:m("expand-all",60309),feedback:m("feedback",60310),gitPullRequestReviewer:m("git-pull-request-reviewer",60310),groupByRefType:m("group-by-ref-type",60311),ungroupByRefType:m("ungroup-by-ref-type",60312),account:m("account",60313),gitPullRequestAssignee:m("git-pull-request-assignee",60313),bellDot:m("bell-dot",60314),debugConsole:m("debug-console",60315),library:m("library",60316),output:m("output",60317),runAll:m("run-all",60318),syncIgnored:m("sync-ignored",60319),pinned:m("pinned",60320),githubInverted:m("github-inverted",60321),serverProcess:m("server-process",60322),serverEnvironment:m("server-environment",60323),pass:m("pass",60324),issueClosed:m("issue-closed",60324),stopCircle:m("stop-circle",60325),playCircle:m("play-circle",60326),record:m("record",60327),debugAltSmall:m("debug-alt-small",60328),vmConnect:m("vm-connect",60329),cloud:m("cloud",60330),merge:m("merge",60331),export:m("export",60332),graphLeft:m("graph-left",60333),magnet:m("magnet",60334),notebook:m("notebook",60335),redo:m("redo",60336),checkAll:m("check-all",60337),pinnedDirty:m("pinned-dirty",60338),passFilled:m("pass-filled",60339),circleLargeFilled:m("circle-large-filled",60340),circleLarge:m("circle-large",60341),circleLargeOutline:m("circle-large-outline",60341),combine:m("combine",60342),gather:m("gather",60342),table:m("table",60343),variableGroup:m("variable-group",60344),typeHierarchy:m("type-hierarchy",60345),typeHierarchySub:m("type-hierarchy-sub",60346),typeHierarchySuper:m("type-hierarchy-super",60347),gitPullRequestCreate:m("git-pull-request-create",60348),runAbove:m("run-above",60349),runBelow:m("run-below",60350),notebookTemplate:m("notebook-template",60351),debugRerun:m("debug-rerun",60352),workspaceTrusted:m("workspace-trusted",60353),workspaceUntrusted:m("workspace-untrusted",60354),workspaceUnknown:m("workspace-unknown",60355),terminalCmd:m("terminal-cmd",60356),terminalDebian:m("terminal-debian",60357),terminalLinux:m("terminal-linux",60358),terminalPowershell:m("terminal-powershell",60359),terminalTmux:m("terminal-tmux",60360),terminalUbuntu:m("terminal-ubuntu",60361),terminalBash:m("terminal-bash",60362),arrowSwap:m("arrow-swap",60363),copy:m("copy",60364),personAdd:m("person-add",60365),filterFilled:m("filter-filled",60366),wand:m("wand",60367),debugLineByLine:m("debug-line-by-line",60368),inspect:m("inspect",60369),layers:m("layers",60370),layersDot:m("layers-dot",60371),layersActive:m("layers-active",60372),compass:m("compass",60373),compassDot:m("compass-dot",60374),compassActive:m("compass-active",60375),azure:m("azure",60376),issueDraft:m("issue-draft",60377),gitPullRequestClosed:m("git-pull-request-closed",60378),gitPullRequestDraft:m("git-pull-request-draft",60379),debugAll:m("debug-all",60380),debugCoverage:m("debug-coverage",60381),runErrors:m("run-errors",60382),folderLibrary:m("folder-library",60383),debugContinueSmall:m("debug-continue-small",60384),beakerStop:m("beaker-stop",60385),graphLine:m("graph-line",60386),graphScatter:m("graph-scatter",60387),pieChart:m("pie-chart",60388),bracket:m("bracket",60175),bracketDot:m("bracket-dot",60389),bracketError:m("bracket-error",60390),lockSmall:m("lock-small",60391),azureDevops:m("azure-devops",60392),verifiedFilled:m("verified-filled",60393),newline:m("newline",60394),layout:m("layout",60395),layoutActivitybarLeft:m("layout-activitybar-left",60396),layoutActivitybarRight:m("layout-activitybar-right",60397),layoutPanelLeft:m("layout-panel-left",60398),layoutPanelCenter:m("layout-panel-center",60399),layoutPanelJustify:m("layout-panel-justify",60400),layoutPanelRight:m("layout-panel-right",60401),layoutPanel:m("layout-panel",60402),layoutSidebarLeft:m("layout-sidebar-left",60403),layoutSidebarRight:m("layout-sidebar-right",60404),layoutStatusbar:m("layout-statusbar",60405),layoutMenubar:m("layout-menubar",60406),layoutCentered:m("layout-centered",60407),target:m("target",60408),indent:m("indent",60409),recordSmall:m("record-small",60410),errorSmall:m("error-small",60411),terminalDecorationError:m("terminal-decoration-error",60411),arrowCircleDown:m("arrow-circle-down",60412),arrowCircleLeft:m("arrow-circle-left",60413),arrowCircleRight:m("arrow-circle-right",60414),arrowCircleUp:m("arrow-circle-up",60415),layoutSidebarRightOff:m("layout-sidebar-right-off",60416),layoutPanelOff:m("layout-panel-off",60417),layoutSidebarLeftOff:m("layout-sidebar-left-off",60418),blank:m("blank",60419),heartFilled:m("heart-filled",60420),map:m("map",60421),mapHorizontal:m("map-horizontal",60421),foldHorizontal:m("fold-horizontal",60421),mapFilled:m("map-filled",60422),mapHorizontalFilled:m("map-horizontal-filled",60422),foldHorizontalFilled:m("fold-horizontal-filled",60422),circleSmall:m("circle-small",60423),bellSlash:m("bell-slash",60424),bellSlashDot:m("bell-slash-dot",60425),commentUnresolved:m("comment-unresolved",60426),gitPullRequestGoToChanges:m("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:m("git-pull-request-new-changes",60428),searchFuzzy:m("search-fuzzy",60429),commentDraft:m("comment-draft",60430),send:m("send",60431),sparkle:m("sparkle",60432),insert:m("insert",60433),mic:m("mic",60434),thumbsdownFilled:m("thumbsdown-filled",60435),thumbsupFilled:m("thumbsup-filled",60436),coffee:m("coffee",60437),snake:m("snake",60438),game:m("game",60439),vr:m("vr",60440),chip:m("chip",60441),piano:m("piano",60442),music:m("music",60443),micFilled:m("mic-filled",60444),repoFetch:m("repo-fetch",60445),copilot:m("copilot",60446),lightbulbSparkle:m("lightbulb-sparkle",60447),robot:m("robot",60448),sparkleFilled:m("sparkle-filled",60449),diffSingle:m("diff-single",60450),diffMultiple:m("diff-multiple",60451),surroundWith:m("surround-with",60452),share:m("share",60453),gitStash:m("git-stash",60454),gitStashApply:m("git-stash-apply",60455),gitStashPop:m("git-stash-pop",60456),vscode:m("vscode",60457),vscodeInsiders:m("vscode-insiders",60458),codeOss:m("code-oss",60459),runCoverage:m("run-coverage",60460),runAllCoverage:m("run-all-coverage",60461),coverage:m("coverage",60462),githubProject:m("github-project",60463),mapVertical:m("map-vertical",60464),foldVertical:m("fold-vertical",60464),mapVerticalFilled:m("map-vertical-filled",60465),foldVerticalFilled:m("fold-vertical-filled",60465),goToSearch:m("go-to-search",60466),percentage:m("percentage",60467),sortPercentage:m("sort-percentage",60467),attach:m("attach",60468)};var sL={dialogError:m("dialog-error","error"),dialogWarning:m("dialog-warning","warning"),dialogInfo:m("dialog-info","info"),dialogClose:m("dialog-close","close"),treeItemExpanded:m("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:m("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:m("tree-filter-on-type-off","list-selection"),treeFilterClear:m("tree-filter-clear","close"),treeItemLoading:m("tree-item-loading","loading"),menuSelection:m("menu-selection","check"),menuSubmenu:m("menu-submenu","chevron-right"),menuBarMore:m("menubar-more","more"),scrollbarButtonLeft:m("scrollbar-button-left","triangle-left"),scrollbarButtonRight:m("scrollbar-button-right","triangle-right"),scrollbarButtonUp:m("scrollbar-button-up","triangle-up"),scrollbarButtonDown:m("scrollbar-button-down","triangle-down"),toolBarMore:m("toolbar-more","more"),quickInputBack:m("quick-input-back","arrow-left"),dropDownButton:m("drop-down-button",60084),symbolCustomColor:m("symbol-customcolor",60252),exportIcon:m("export",60332),workspaceUnspecified:m("workspace-unspecified",60355),newLine:m("newline",60394),thumbsDownFilled:m("thumbsdown-filled",60435),thumbsUpFilled:m("thumbsup-filled",60436),gitFetch:m("git-fetch",60445),lightbulbSparkleAutofix:m("lightbulb-sparkle-autofix",60447),debugBreakpointPending:m("debug-breakpoint-pending",60377)},ee={...Vw,...sL};var zw;(e=>{function r(t){return t&&typeof t=="object"&&typeof t.id=="string"}e.isThemeColor=r})(zw||={});var Dt;(f=>{f.iconNameSegment="[A-Za-z0-9]+",f.iconNameExpression="[A-Za-z0-9-]+",f.iconModifierExpression="~[A-Za-z]+",f.iconNameCharacter="[A-Za-z0-9~-]";let i=new RegExp(`^(${f.iconNameExpression})(${f.iconModifierExpression})?$`);function o(v){let D=i.exec(v.id);if(!D)return o(ee.error);let[,R,A]=D,B=["codicon","codicon-"+R];return A&&B.push("codicon-modifier-"+A.substring(1)),B}f.asClassNameArray=o;function s(v){return o(v).join(" ")}f.asClassName=s;function a(v){return"."+o(v).join(".")}f.asCSSSelector=a;function l(v){return v&&typeof v=="object"&&typeof v.id=="string"&&(typeof v.color>"u"||zw.isThemeColor(v.color))}f.isThemeIcon=l;let d=new RegExp(`^\\$\\((${f.iconNameExpression}(?:${f.iconModifierExpression})?)\\)$`);function u(v){let D=d.exec(v);if(!D)return;let[,R]=D;return{id:R}}f.fromString=u;function p(v){return{id:v}}f.fromId=p;function h(v,D){let R=v.id,A=R.lastIndexOf("~");return A!==-1&&(R=R.substring(0,A)),D&&(R=`${R}~${D}`),{id:R}}f.modify=h;function g(v){let D=v.id.lastIndexOf("~");if(D!==-1)return v.id.substring(D+1)}f.getModifier=g;function b(v,D){return v.id===D.id&&v.color?.id===D.color?.id}f.isEqual=b})(Dt||={});var G5=new Uint32Array(10);var q5=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),j5=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),X5=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Q5=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function Kw(...r){return function(e,t){for(let n=0,i=r.length;n<i;n++){let o=r[n](e,t);if(o)return o}return null}}var iV=$w.bind(void 0,!1),Ul=$w.bind(void 0,!0);function $w(r,e,t){if(!t||t.length<e.length)return null;let n;return r?n=os(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function aL(r,e){let t=e.toLowerCase().indexOf(r.toLowerCase());return t===-1?null:[{start:t,end:t+r.length}]}function lL(r,e){return bI(r.toLowerCase(),e.toLowerCase(),0,0)}function bI(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]===e[n]){let i=null;return(i=bI(r,e,t+1,n+1))?qw({start:n,end:n+1},i):null}return bI(r,e,t,n+1)}function xI(r){return 97<=r&&r<=122}function Yc(r){return 65<=r&&r<=90}function SI(r){return 48<=r&&r<=57}function dL(r){return r===32||r===9||r===10||r===13}var cL=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(r=>cL.add(r.charCodeAt(0)));function Gw(r){return xI(r)||Yc(r)||SI(r)}function qw(r,e){return e.length===0?e=[r]:r.end===e[0].start?e[0].start=r.start:e.unshift(r),e}function jw(r,e){for(let t=e;t<r.length;t++){let n=r.charCodeAt(t);if(Yc(n)||SI(n)||t>0&&!Gw(r.charCodeAt(t-1)))return t}return r.length}function vI(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=vI(r,e,t+1,n+1);!i&&(o=jw(e,o))<e.length;)i=vI(r,e,t+1,o),o++;return i===null?null:qw({start:n,end:n+1},i)}}function uL(r){let e=0,t=0,n=0,i=0,o=0;for(let u=0;u<r.length;u++)o=r.charCodeAt(u),Yc(o)&&e++,xI(o)&&t++,Gw(o)&&n++,SI(o)&&i++;let s=e/r.length,a=t/r.length,l=n/r.length,d=i/r.length;return{upperPercent:s,lowerPercent:a,alphaPercent:l,numericPercent:d}}function pL(r){let{upperPercent:e,lowerPercent:t}=r;return t===0&&e>.6}function hL(r){let{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=r;return t>.2&&e<.8&&n>.6&&i<.2}function mL(r){let e=0,t=0,n=0,i=0;for(let o=0;o<r.length;o++)n=r.charCodeAt(o),Yc(n)&&e++,xI(n)&&t++,dL(n)&&i++;return(e===0||t===0)&&i===0?r.length<=30:e<=5}function Xw(r,e){if(!e||(e=e.trim(),e.length===0)||!mL(r))return null;e.length>60&&(e=e.substring(0,60));let t=uL(e);if(!hL(t)){if(!pL(t))return null;e=e.toLowerCase()}let n=null,i=0;for(r=r.toLowerCase();i<e.length&&(n=vI(r,e,0,i))===null;)i=jw(e,i+1);return n}var rV=Kw(Ul,Xw,aL),oV=Kw(Ul,Xw,lL),sV=new Ui(1e4);function Qw(r,e){let t=ek(r,r.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?Yw(t):null}function Yw(r){if(typeof r>"u")return[];let e=[],t=r[1];for(let n=r.length-1;n>1;n--){let i=r[n]+t,o=e[e.length-1];o&&o.end===i?o.end=i+1:e.push({start:i,end:i+1})}return e}var ds=128;function CI(){let r=[],e=[];for(let t=0;t<=ds;t++)e[t]=0;for(let t=0;t<=ds;t++)r.push(e.slice(0));return r}function Jw(r){let e=[];for(let t=0;t<=r;t++)e[t]=0;return e}var Zw=Jw(2*ds),II=Jw(2*ds),zr=CI(),ls=CI(),Qc=CI(),gL=!1;function fI(r,e,t,n,i){function o(a,l,d=" "){for(;a.length<l;)a=d+a;return a}let s=` |   |${n.split("").map(a=>o(a,3)).join("|")}
`;for(let a=0;a<=t;a++)a===0?s+=" |":s+=`${e[a-1]}|`,s+=r[a].slice(0,i+1).map(l=>o(l.toString(),3)).join("|")+`
`;return s}function fL(r,e,t,n){r=r.substr(e),t=t.substr(n),console.log(fI(ls,r,r.length,t,t.length)),console.log(fI(Qc,r,r.length,t,t.length)),console.log(fI(zr,r,r.length,t,t.length))}function om(r,e){if(e<0||e>=r.length)return!1;let t=r.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Ph(t)}}function Hw(r,e){if(e<0||e>=r.length)return!1;switch(r.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function sm(r,e,t){return e[r]!==t[r]}function bL(r,e,t,n,i,o,s=!1){for(;e<t&&i<o;)r[e]===n[i]&&(s&&(Zw[e]=i),e+=1),i+=1;return e===t}var vL;(t=>{t.Default=[-100,0];function e(n){return!n||n.length===2&&n[0]===-100&&n[1]===0}t.isDefault=e})(vL||={});var yI=class{constructor(e,t){this.firstMatchCanBeWeak=e;this.boostFullMatch=t}static default={boostFullMatch:!0,firstMatchCanBeWeak:!1}};function ek(r,e,t,n,i,o,s=yI.default){let a=r.length>ds?ds:r.length,l=n.length>ds?ds:n.length;if(t>=a||o>=l||a-t>l-o||!bL(e,t,a,i,o,l,!0))return;IL(a,l,t,o,e,i);let d=1,u=1,p=t,h=o,g=[!1];for(d=1,p=t;p<a;d++,p++){let R=Zw[p],A=II[p],B=p+1<a?II[p+1]:l;for(u=R-o+1,h=R;h<B;u++,h++){let W=Number.MIN_SAFE_INTEGER,H=!1;h<=A&&(W=yL(r,e,p,t,n,i,h,l,o,zr[d-1][u-1]===0,g));let ue=0;W!==Number.MAX_SAFE_INTEGER&&(H=!0,ue=W+ls[d-1][u-1]);let Y=h>R,oe=Y?ls[d][u-1]+(zr[d][u-1]>0?-5:0):0,de=h>R+1&&zr[d][u-1]>0,be=de?ls[d][u-2]+(zr[d][u-2]>0?-5:0):0;if(de&&(!Y||be>=oe)&&(!H||be>=ue))ls[d][u]=be,Qc[d][u]=3,zr[d][u]=0;else if(Y&&(!H||oe>=ue))ls[d][u]=oe,Qc[d][u]=2,zr[d][u]=0;else if(H)ls[d][u]=ue,Qc[d][u]=1,zr[d][u]=zr[d-1][u-1]+1;else throw new Error("not possible")}}if(gL&&fL(r,t,n,o),!g[0]&&!s.firstMatchCanBeWeak)return;d--,u--;let b=[ls[d][u],o],f=0,v=0;for(;d>=1;){let R=u;do{let A=Qc[d][R];if(A===3)R=R-2;else if(A===2)R=R-1;else break}while(R>=1);f>1&&e[t+d-1]===i[o+u-1]&&!sm(R+o-1,n,i)&&f+1>zr[d][R]&&(R=u),R===u?f++:f=1,v||(v=R),d--,u=R-1,b.push(u)}l-o===a&&s.boostFullMatch&&(b[0]+=2);let D=v-a;return b[0]-=D,b}function IL(r,e,t,n,i,o){let s=r-1,a=e-1;for(;s>=t&&a>=n;)i[s]===o[a]&&(II[s]=a,s--),a--}function yL(r,e,t,n,i,o,s,a,l,d,u){if(e[t]!==o[s])return Number.MIN_SAFE_INTEGER;let p=1,h=!1;return s===t-n?p=r[t]===i[s]?7:5:sm(s,i,o)&&(s===0||!sm(s-1,i,o))?(p=r[t]===i[s]?7:5,h=!0):om(o,s)&&(s===0||!om(o,s-1))?p=5:(om(o,s-1)||Hw(o,s-1))&&(p=5,h=!0),p>1&&t===n&&(u[0]=!0),h||(h=sm(s,i,o)||om(o,s-1)||Hw(o,s-1)),t===n?s>l&&(p-=h?3:5):d?p+=h?2:0:p+=h?0:1,s+1===a&&(p-=h?3:5),p}var EI=new RegExp(`\\$\\(${Dt.iconNameExpression}(?:${Dt.iconModifierExpression})?\\)`,"g"),xL=new RegExp(`(\\\\)?${EI.source}`,"g");function tk(r){return r.replace(xL,(e,t)=>t?e:`\\${e}`)}var hV=new RegExp(`\\\\${EI.source}`,"g");var mV=new RegExp(`(\\s)?(\\\\)?${EI.source}(\\s)?`,"g");var gV=new RegExp(`\\$\\(${Dt.iconNameCharacter}+\\)`,"g");var Ia=class{value;isTrusted;supportThemeIcons;supportHtml;baseUri;constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw ea("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=SL(this.supportThemeIcons?tk(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${CL(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){let n=new RegExp(bn(t),"g");return e.replace(n,(i,o)=>e.charAt(o-1)!=="\\"?`\\${i}`:i)}};function TI(r){return r instanceof Ia?!0:r&&typeof r=="object"?typeof r.value=="string"&&(typeof r.isTrusted=="boolean"||typeof r.isTrusted=="object"||r.isTrusted===void 0)&&(typeof r.supportThemeIcons=="boolean"||r.supportThemeIcons===void 0):!1}function SL(r){return r.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function CL(r,e){let t=r.match(/^`+/gm)?.reduce((i,o)=>i.length>o.length?i:o).length??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,r,`${"`".repeat(n)}`].join(`
`)}function Jc(r){return r.replace(/"/g,"&quot;")}function am(r){return r&&r.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function nk(r){let e=[],t=r.split("|").map(i=>i.trim());r=t[0];let n=t[1];if(n){let i=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),s=i?i[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),d=isFinite(parseInt(s));l&&e.push(`width="${a}"`),d&&e.push(`height="${s}"`)}return{href:r,dimensions:e}}var lm=(i=>(i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error",i))(lm||{});(a=>{let r="error",e="warning",t="warn",n="info",i="ignore";function o(l){return l?vn(r,l)?3:vn(e,l)||vn(t,l)?2:vn(n,l)?1:0:0}a.fromValue=o;function s(l){switch(l){case 3:return r;case 2:return e;case 1:return n;default:return i}}a.toString=s})(lm||={});var St=lm;var Zc=class{ctor;staticArguments;supportsDelayedInstantiation;constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}};var cs;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n})(cs||={});var Ct=k("instantiationService");function EL(r,e,t){e[cs.DI_TARGET]===e?e[cs.DI_DEPENDENCIES].push({id:r,index:t}):(e[cs.DI_DEPENDENCIES]=[{id:r,index:t}],e[cs.DI_TARGET]=e)}function k(r){if(cs.serviceIds.has(r))return cs.serviceIds.get(r);let e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");EL(e,t,i)};return e.toString=()=>r,cs.serviceIds.set(r,e),e}var us=k("telemetryService"),BV=k("customEndpointTelemetryService");function rk(r,e){return r.replace(/^~($|\/|\\)/,`${e}$1`)}var ik="\u2026",eu="\\\\",tu="~";function ok(r,e=Mn){let t=new Array(r.length),n=!1;for(let i=0;i<r.length;i++){let o=r[i];if(o===""){t[i]=`.${e}`;continue}if(!o){t[i]=o;continue}n=!0;let s="",a=o;a.indexOf(eu)===0?(s=a.substr(0,a.indexOf(eu)+eu.length),a=a.substr(a.indexOf(eu)+eu.length)):a.indexOf(e)===0?(s=a.substr(0,a.indexOf(e)+e.length),a=a.substr(a.indexOf(e)+e.length)):a.indexOf(tu)===0&&(s=a.substr(0,a.indexOf(tu)+tu.length),a=a.substr(a.indexOf(tu)+tu.length));let l=a.split(e);for(let d=1;n&&d<=l.length;d++)for(let u=l.length-d;n&&u>=0;u--){n=!1;let p=l.slice(u,u+d).join(e);for(let h=0;!n&&h<r.length;h++)if(h!==i&&r[h]&&r[h].indexOf(p)>-1){let g=u+d===l.length,b=u>0&&r[h].indexOf(e)>-1?e+p:p,f=r[h].endsWith(b);n=!g||f}if(!n){let h="";(l[0].endsWith(":")||s!=="")&&(u===1&&(u=0,d++,p=l[0]+e+p),u>0&&(h=l[0]+e),h=s+h),u>0&&(h=h+ik+e),h=h+p,u+d<l.length&&(h=h+e+ik),t[i]=h}}n&&(t[i]=o)}return t}var ps=k("productService"),sk="vscode://schemas/vscode-product";function _t(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;let e=Array.isArray(r)?[]:{};return Object.entries(r).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?_t(n):n}),e}function Hr(r,e,t=!0){return kt(r)?(kt(e)&&Object.keys(e).forEach(n=>{n in r?t&&(kt(r[n])&&kt(e[n])?Hr(r[n],e[n],t):r[n]=e[n]):r[n]=e[n]}),r):e}function Cn(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!Cn(r[t],e[t]))return!1}else{let i=[];for(n in r)i.push(n);i.sort();let o=[];for(n in e)o.push(n);if(o.sort(),!Cn(i,o))return!1;for(t=0;t<i.length;t++)if(!Cn(r[i[t]],e[i[t]]))return!1}return!0}function ak(r,e){let t={};for(let[n,i]of Object.entries(r))t[n]=e(i,n);return t}var ya=k("dialogService");var Wl=k("fileDialogService");var dm="**",lk="/",cm="[/\\\\]",um="[^/\\\\]",TL=/\//g;function dk(r,e){switch(r){case 0:return"";case 1:return`${um}*?`;default:return`(?:${cm}|${um}+${cm}${e?`|${cm}${um}+`:""})*?`}}function pm(r,e){if(!r)return[];let t=[],n=!1,i=!1,o="";for(let s of r){switch(s){case e:if(!n&&!i){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=s}return o&&t.push(o),t}function mk(r){if(!r)return"";let e="",t=pm(r,lk);if(t.every(n=>n===dm))e=".*";else{let n=!1;t.forEach((i,o)=>{if(i===dm){if(n)return;e+=dk(2,o===t.length-1)}else{let s=!1,a="",l=!1,d="";for(let u of i){if(u!=="}"&&s){a+=u;continue}if(l&&(u!=="]"||!d)){let p;u==="-"?p=u:(u==="^"||u==="!")&&!d?p="^":u===lk?p="":p=bn(u),d+=p;continue}switch(u){case"{":s=!0;continue;case"[":l=!0;continue;case"}":{let h=`(?:${pm(a,",").map(g=>mk(g)).join("|")})`;e+=h,s=!1,a="";break}case"]":{e+="["+d+"]",l=!1,d="";break}case"?":e+=um;continue;case"*":e+=dk(1);continue;default:e+=bn(u)}}o<t.length-1&&(t[o+1]!==dm||o+2<t.length)&&(e+=cm)}n=i===dm})}return e}var wL=/^\*\*\/\*\.[\w\.-]+$/,kL=/^\*\*\/([\w\.-]+)\/?$/,DL=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,_L=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,RL=/^\*\*((\/[\w\.-]+)+)\/?$/,PL=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,ck=new Ui(1e4),uk=function(){return!1},Kr=function(){return null};function kI(r,e){if(!r)return Kr;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();let n=`${t}_${!!e.trimForExclusions}`,i=ck.get(n);if(i)return pk(i,r);let o;return wL.test(t)?i=LL(t.substr(4),t):(o=kL.exec(wI(t,e)))?i=OL(o[1],t):(e.trimForExclusions?_L:DL).test(t)?i=AL(t,e):(o=RL.exec(wI(t,e)))?i=hk(o[1].substr(1),t,!0):(o=PL.exec(wI(t,e)))?i=hk(o[1],t,!1):i=ML(t),ck.set(n,i),pk(i,r)}function pk(r,e){if(typeof e=="string")return r;let t=function(n,i){return ua(n,e.base,!on)?r(Rv(n.substr(e.base.length),Mn),i):null};return t.allBasenames=r.allBasenames,t.allPaths=r.allPaths,t.basenames=r.basenames,t.patterns=r.patterns,t}function wI(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function LL(r,e){return function(t,n){return typeof t=="string"&&t.endsWith(r)?e:null}}function OL(r,e){let t=`/${r}`,n=`\\${r}`,i=function(s,a){return typeof s!="string"?null:a?a===r?e:null:s===r||s.endsWith(t)||s.endsWith(n)?e:null},o=[r];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}function AL(r,e){let t=gk(r.slice(1,-1).split(",").map(a=>kI(a,e)).filter(a=>a!==Kr),r),n=t.length;if(!n)return Kr;if(n===1)return t[0];let i=function(a,l){for(let d=0,u=t.length;d<u;d++)if(t[d](a,l))return r;return null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function hk(r,e,t){let n=Mn===Pe.sep,i=n?r:r.replace(TL,Mn),o=Mn+i,s=Pe.sep+r,a;return t?a=function(l,d){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===r||l.endsWith(s)))?e:null}:a=function(l,d){return typeof l=="string"&&(l===i||!n&&l===r)?e:null},a.allPaths=[(t?"*/":"./")+r],a}function ML(r){try{let e=new RegExp(`^${mk(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch{return Kr}}function Po(r,e,t){return!r||typeof e!="string"?!1:hs(r)(e,void 0,t)}function hs(r,e={}){if(!r)return uk;if(typeof r=="string"||iu(r)){let t=kI(r,e);if(t===Kr)return uk;let n=function(i,o){return!!t(i,o)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return NL(r,e)}function iu(r){let e=r;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function NL(r,e){let t=gk(Object.getOwnPropertyNames(r).map(a=>FL(a,r[a],e)).filter(a=>a!==Kr)),n=t.length;if(!n)return Kr;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];let a=function(u,p){let h;for(let g=0,b=t.length;g<b;g++){let f=t[g](u,p);if(typeof f=="string")return f;Fc(f)&&(h||(h=[]),h.push(f))}return h?(async()=>{for(let g of h){let b=await g;if(typeof b=="string")return b}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);let d=t.reduce((u,p)=>p.allPaths?u.concat(p.allPaths):u,[]);return d.length&&(a.allPaths=d),a}let i=function(a,l,d){let u,p;for(let h=0,g=t.length;h<g;h++){let b=t[h];b.requiresSiblings&&d&&(l||(l=tr(a)),u||(u=l.substr(0,l.length-nh(a).length)));let f=b(a,l,u,d);if(typeof f=="string")return f;Fc(f)&&(p||(p=[]),p.push(f))}return p?(async()=>{for(let h of p){let g=await h;if(typeof g=="string")return g}return null})():null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function FL(r,e,t){if(e===!1)return Kr;let n=kI(r,t);if(n===Kr)return Kr;if(typeof e=="boolean")return n;if(e){let i=e.when;if(typeof i=="string"){let o=(s,a,l,d)=>{if(!d||!n(s,a))return null;let u=i.replace("$(basename)",()=>l),p=d(u);return Fc(p)?p.then(h=>h?r:null):p?r:null};return o.requiresSiblings=!0,o}}return n}function gk(r,e){let t=r.filter(a=>!!a.basenames);if(t.length<2)return r;let n=t.reduce((a,l)=>{let d=l.basenames;return d?a.concat(d):a},[]),i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{let d=l.patterns;return d?a.concat(d):a},[]);let o=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){let p=a.charCodeAt(u-1);if(p===47||p===92)break}l=a.substr(u)}let d=n.indexOf(l);return d!==-1?i[d]:null};o.basenames=n,o.patterns=i,o.allBasenames=n;let s=r.filter(a=>!a.basenames);return s.push(o),s}var Ut=k("fileService");function fk(r){return!!(r.capabilities&2048)}var DI=class r extends Error{constructor(t,n){super(t);this.code=n}static create(t,n){let i=new r(t.toString(),n);return UL(i,n),i}};function UL(r,e){return r.name=e?`${e} (FileSystemError)`:"FileSystemError",r}function WL(r){if(!r)return"Unknown";if(r instanceof DI)return r.code;let e=/^(.+) \(FileSystemError\)$/.exec(r.name);if(!e)return"Unknown";switch(e[1]){case"EntryExists":return"EntryExists";case"EntryIsADirectory":return"EntryIsADirectory";case"EntryNotADirectory":return"EntryNotADirectory";case"EntryNotFound":return"EntryNotFound";case"EntryTooLarge":return"EntryTooLarge";case"EntryWriteLocked":return"EntryWriteLocked";case"NoPermissions":return"NoPermissions";case"Unavailable":return"Unavailable"}return"Unknown"}function bk(r){if(r instanceof ru)return r.fileOperationResult;switch(WL(r)){case"EntryNotFound":return 1;case"EntryIsADirectory":return 0;case"EntryNotADirectory":return 9;case"EntryWriteLocked":return 5;case"NoPermissions":return 6;case"EntryExists":return 4;case"EntryTooLarge":return 7;default:return 10}}var ru=class extends Error{constructor(t,n,i){super(t);this.fileOperationResult=n;this.options=i}};var hm=class extends ru{constructor(t,n,i){super(t,2,i);this.stat=n}};var pr={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},zl={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"};var vk="files.readonlyInclude",Ik="files.readonlyExclude";var ou="";var ms=class r{static KB=1024;static MB=r.KB*r.KB;static GB=r.MB*r.KB;static TB=r.GB*r.KB;static formatSize(e){return Gn(e)||(e=0),e<r.KB?c("sizeB","{0}B",e.toFixed(0)):e<r.MB?c("sizeKB","{0}KB",(e/r.KB).toFixed(2)):e<r.GB?c("sizeMB","{0}MB",(e/r.MB).toFixed(2)):e<r.TB?c("sizeGB","{0}GB",(e/r.GB).toFixed(2)):c("sizeTB","{0}TB",(e/r.TB).toFixed(2))}};function yk(r){let e=typeof r=="string"||r?.scheme===q.vscodeRemote;return typeof r!="string"&&r?.scheme===q.file?1024*ms.MB:e?10*ms.MB:Yt?50*ms.MB:1024*ms.MB}var Ri=k("environmentService"),bH=Ri;var Qn=k("contextService");function gm(r){let e=r;return typeof e?.id=="string"&&L.isUri(e.uri)}function fm(r){let e=r;return typeof e?.id=="string"&&L.isUri(e.configPath)}var _I=class{constructor(e,t){this.raw=t;this.uri=e.uri,this.index=e.index,this.name=e.name}uri;name;index;toResource(e){return Me(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function RI(r){return new _I({uri:r,index:0,name:ha(r)},{uri:r.toString()})}var xk="code-workspace",PH=`.${xk}`,LH=[{name:c("codeWorkspace","Code Workspace"),extensions:[xk]}];var $i=k("labelService");var su={exports:{}};(function(){function e(o){let s=[];typeof o=="number"&&s.push("code/timeOrigin",o);function a(d){s.push(d,Date.now())}function l(){let d=[];for(let u=0;u<s.length;u+=2)d.push({name:s[u],startTime:s[u+1]});return d}return{mark:a,getMarks:l}}function t(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?e():{mark(o){performance.mark(o)},getMarks(){let o=performance.timeOrigin;typeof o!="number"&&(o=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);let s=[{name:"code/timeOrigin",startTime:Math.round(o)}];for(let a of performance.getEntriesByType("mark"))s.push({name:a.name,startTime:Math.round(o+a.startTime)});return s}};if(typeof process=="object"){let o=performance?.timeOrigin;return e(o)}else return console.trace("perf-util loaded in UNKNOWN environment"),e()}function n(o){return o.MonacoPerformanceMarks||(o.MonacoPerformanceMarks=t()),o.MonacoPerformanceMarks}var i;typeof global=="object"?i=global:typeof self=="object"?i=self:i={},typeof su=="object"&&typeof su.exports=="object"?su.exports=n(i):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),i.perf=n(i))})();var Wt=su.exports.mark,GH=su.exports.getMarks;function Pi(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return L.revive(r);case 2:return new RegExp(r.source,r.flags);case 17:return new Date(r.source)}if(r instanceof Ne||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=Pi(r[t],e+1);else for(let t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=Pi(r[t],e+1))}return r}var Hl=class extends O{_onWillRun=this._register(new E);onWillRun=this._onWillRun.event;_onDidRun=this._register(new E);onDidRun=this._onDidRun.event;async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}};function hr(r){return{id:r.id,label:r.label,tooltip:r.tooltip??r.label,class:r.class,enabled:r.enabled??!0,checked:r.checked,run:async(...e)=>r.run(...e)}}function PI(r,e){return e&&(r.stack||r.stacktrace)?c("stackTrace.format","{0}: {1}",Ck(r),Sk(r.stack)||Sk(r.stacktrace)):Ck(r)}function Sk(r){return Array.isArray(r)?r.join(`
`):r}function Ck(r){return r.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${r.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?c("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function bm(r=null,e=!1){if(!r)return c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){let t=On(r),n=bm(t[0],e);return t.length>1?c("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(Oe(r))return r;if(r.detail){let t=r.detail;if(t.error)return PI(t.error,e);if(t.exception)return PI(t.exception,e)}return r.stack?PI(r,e):r.message?r.message:c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function LI(r){let e=r;return e instanceof Error&&Array.isArray(e.actions)}function Ek(r,e){let t;return typeof r=="string"?t=new Error(r):t=r,t.actions=e,t}function OI(...r){switch(r.length){case 1:return c("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",r[0]);case 2:return c("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",r[0],r[1]);case 3:return c("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",r[0],r[1],r[2]);default:return}}var HL=c("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),KL=c("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),gs=class r{static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw CE(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static _regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0)));static _keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);_input="";_start=0;_current=0;_tokens=[];_errors=[];get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){let t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){let t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(OI("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(OI("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(OI("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){let t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy;_string(){this.stringRe.lastIndex=this._start;let e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;let t=this._input.substring(this._start,this._current),n=r._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(HL);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(KL);return}let o=this._input.charCodeAt(e);if(t)t=!1;else if(o===47&&!n){e++;break}else o===91?n=!0:o===92?t=!0:o===93&&(n=!1);e++}for(;e<this._input.length&&r._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;let i=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};var en=new Map;en.set("false",!1);en.set("true",!0);en.set("isMac",Fe);en.set("isLinux",on);en.set("isWindows",lt);en.set("isWeb",Yt);en.set("isMacNative",Fe&&!Yt);en.set("isEdge",NE);en.set("isFirefox",Zp);en.set("isChrome",tv);en.set("isSafari",ME);var $L=Object.prototype.hasOwnProperty;var GL={regexParsingWithErrorRecovery:!0},qL=c("contextkey.parser.error.emptyString","Empty context key expression"),jL=c("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),XL=c("contextkey.parser.error.noInAfterNot","'in' after 'not'."),Tk=c("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),QL=c("contextkey.parser.error.unexpectedToken","Unexpected token"),YL=c("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),JL=c("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),ZL=c("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?"),AI=class r{constructor(e=GL){this._config=e}static _parseError=new Error;_scanner=new gs;_tokens=[];_current=0;_parsingErrors=[];get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}parse(e){if(e===""){this._parsingErrors.push({message:qL,offset:0,lexeme:"",additionalInfo:jL});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{let t=this._expr();if(!this._isAtEnd()){let n=this._peek(),i=n.type===17?YL:void 0;throw this._parsingErrors.push({message:QL,offset:n.offset,lexeme:gs.getLexeme(n),additionalInfo:i}),r._parseError}return t}catch(t){if(t!==r._parseError)throw t;return}}_expr(){return this._or()}_or(){let e=[this._and()];for(;this._matchOne(16);){let t=this._and();e.push(t)}return e.length===1?e[0]:vt.or(...e)}_and(){let e=[this._term()];for(;this._matchOne(15);){let t=this._term();e.push(t)}return e.length===1?e[0]:vt.and(...e)}_term(){if(this._matchOne(2)){let e=this._peek();switch(e.type){case 11:return this._advance(),En.INSTANCE;case 12:return this._advance(),Fn.INSTANCE;case 0:{this._advance();let t=this._expr();return this._consume(1,Tk),t?.negate()}case 17:return this._advance(),Sa.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){let e=this._peek();switch(e.type){case 11:return this._advance(),vt.true();case 12:return this._advance(),vt.false();case 0:{this._advance();let t=this._expr();return this._consume(1,Tk),t}case 17:{let t=e.lexeme;if(this._advance(),this._matchOne(9)){let i=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),i.type!==10)throw this._errExpectedButGot("REGEX",i);let o=i.lexeme,s=o.lastIndexOf("/"),a=s===o.length-1?void 0:this._removeFlagsGY(o.substring(s+1)),l;try{l=new RegExp(o.substring(1,s),a)}catch{throw this._errExpectedButGot("REGEX",i)}return mu.create(t,l)}switch(i.type){case 10:case 19:{let o=[i.lexeme];this._advance();let s=this._peek(),a=0;for(let h=0;h<i.lexeme.length;h++)i.lexeme.charCodeAt(h)===40?a++:i.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&s.type!==15&&s.type!==16;){switch(s.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:i.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;o.push(gs.getLexeme(s)),this._advance(),s=this._peek()}let l=o.join(""),d=l.lastIndexOf("/"),u=d===l.length-1?void 0:this._removeFlagsGY(l.substring(d+1)),p;try{p=new RegExp(l.substring(1,d),u)}catch{throw this._errExpectedButGot("REGEX",i)}return vt.regex(t,p)}case 18:{let o=i.lexeme;this._advance();let s=null;if(!Th(o)){let a=o.indexOf("/"),l=o.lastIndexOf("/");if(a!==l&&a>=0){let d=o.slice(a+1,l),u=o[l+1]==="i"?"i":"";try{s=new RegExp(d,u)}catch{throw this._errExpectedButGot("REGEX",i)}}}if(s===null)throw this._errExpectedButGot("REGEX",i);return mu.create(t,s)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,XL);let i=this._value();return vt.notIn(t,i)}switch(this._peek().type){case 3:{this._advance();let i=this._value();if(this._previous().type===18)return vt.equals(t,i);switch(i){case"true":return vt.has(t);case"false":return vt.not(t);default:return vt.equals(t,i)}}case 4:{this._advance();let i=this._value();if(this._previous().type===18)return vt.notEquals(t,i);switch(i){case"true":return vt.not(t);case"false":return vt.has(t);default:return vt.notEquals(t,i)}}case 5:return this._advance(),pu.create(t,this._value());case 6:return this._advance(),hu.create(t,this._value());case 7:return this._advance(),cu.create(t,this._value());case 8:return this._advance(),uu.create(t,this._value());case 13:return this._advance(),vt.in(t,this._value());default:return vt.has(t)}}case 20:throw this._parsingErrors.push({message:JL,offset:e.offset,lexeme:"",additionalInfo:ZL}),r._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_flagsGYRe=/g|y/g;_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){let i=c("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,gs.getLexeme(t)),o=t.offset,s=gs.getLexeme(t);return this._parsingErrors.push({message:i,offset:o,lexeme:s,additionalInfo:n}),r._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},vt=class{static false(){return En.INSTANCE}static true(){return Fn.INSTANCE}static has(e){return xa.create(e)}static equals(e,t){return lu.create(e,t)}static notEquals(e,t){return du.create(e,t)}static regex(e,t){return mu.create(e,t)}static in(e,t){return vm.create(e,t)}static notIn(e,t){return Im.create(e,t)}static not(e){return Sa.create(e)}static and(...e){return ym.create(e,null,!0)}static or(...e){return gu.create(e,null,!0)}static greater(e,t){return cu.create(e,t)}static greaterEquals(e,t){return uu.create(e,t)}static smaller(e,t){return pu.create(e,t)}static smallerEquals(e,t){return hu.create(e,t)}static _parser=new AI({regexParsingWithErrorRecovery:!1});static deserialize(e){return e==null?void 0:this._parser.parse(e)}};function au(r,e){return r.cmp(e)}var En=class r{static INSTANCE=new r;type=0;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return Fn.INSTANCE}},Fn=class r{static INSTANCE=new r;type=1;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return En.INSTANCE}},xa=class r{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=en.get(e);return typeof n=="boolean"?n?Fn.INSTANCE:En.INSTANCE:new r(e,t)}type=2;cmp(e){return e.type!==this.type?this.type-e.type:Dk(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=en.get(this.key);return typeof e=="boolean"?e?Fn.INSTANCE:En.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=Sa.create(this.key,this)),this.negated}},lu=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?xa.create(e,n):Sa.create(e,n);let i=en.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Fn.INSTANCE:En.INSTANCE:new r(e,t,n)}type=4;cmp(e){return e.type!==this.type?this.type-e.type:Ca(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=en.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Fn.INSTANCE:En.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=du.create(this.key,this.value,this)),this.negated}},vm=class r{constructor(e,t){this.key=e;this.valueKey=t}static create(e,t){return new r(e,t)}type=10;negated=null;cmp(e){return e.type!==this.type?this.type-e.type:Ca(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?$L.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=Im.create(this.key,this.valueKey)),this.negated}},Im=class r{constructor(e,t){this.key=e;this.valueKey=t;this._negated=vm.create(e,t)}static create(e,t){return new r(e,t)}type=11;_negated;cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}},du=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?Sa.create(e,n):xa.create(e,n);let i=en.get(e);return typeof i=="boolean"?t===(i?"true":"false")?En.INSTANCE:Fn.INSTANCE:new r(e,t,n)}type=5;cmp(e){return e.type!==this.type?this.type-e.type:Ca(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=en.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?En.INSTANCE:Fn.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=lu.create(this.key,this.value,this)),this.negated}},Sa=class r{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=en.get(e);return typeof n=="boolean"?n?En.INSTANCE:Fn.INSTANCE:new r(e,t)}type=3;cmp(e){return e.type!==this.type?this.type-e.type:Dk(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=en.get(this.key);return typeof e=="boolean"?e?En.INSTANCE:Fn.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=xa.create(this.key,this)),this.negated}};function xm(r,e){if(typeof r=="string"){let t=parseFloat(r);isNaN(t)||(r=t)}return typeof r=="string"||typeof r=="number"?e(r):En.INSTANCE}var cu=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return xm(t,i=>new r(e,i,n))}type=12;cmp(e){return e.type!==this.type?this.type-e.type:Ca(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=hu.create(this.key,this.value,this)),this.negated}},uu=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return xm(t,i=>new r(e,i,n))}type=13;cmp(e){return e.type!==this.type?this.type-e.type:Ca(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=pu.create(this.key,this.value,this)),this.negated}},pu=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return xm(t,i=>new r(e,i,n))}type=14;cmp(e){return e.type!==this.type?this.type-e.type:Ca(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=uu.create(this.key,this.value,this)),this.negated}},hu=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return xm(t,i=>new r(e,i,n))}type=15;cmp(e){return e.type!==this.type?this.type-e.type:Ca(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=cu.create(this.key,this.value,this)),this.negated}},mu=class r{constructor(e,t){this.key=e;this.regexp=t}static create(e,t){return new r(e,t)}type=7;negated=null;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=MI.create(this)),this.negated}},MI=class r{constructor(e){this._actual=e}static create(e){return new r(e)}type=8;cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new r(this._actual.map(e))}negate(){return this._actual}};function kk(r){let e=null;for(let t=0,n=r.length;t<n;t++){let i=r[t].substituteConstants();if(r[t]!==i&&e===null){e=[];for(let o=0;o<t;o++)e[o]=r[o]}e!==null&&(e[t]=i)}return e===null?r:e}var ym=class r{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return r._normalizeArr(e,t,n)}type=6;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let i=au(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=kk(this.expr);return e===this.expr?this:r.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){let i=[],o=!1;for(let s of e)if(s){if(s.type===1){o=!0;continue}if(s.type===0)return En.INSTANCE;if(s.type===6){i.push(...s.expr);continue}i.push(s)}if(i.length===0&&o)return Fn.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(au);for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];for(;i.length>1;){let s=i[i.length-1];if(s.type!==9)break;i.pop();let a=i.pop(),l=i.length===0,d=gu.create(s.expr.map(u=>r.create([u,a],null,n)),null,l);d&&(i.push(d),i.sort(au))}if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)if(i[s].negate().equals(i[a]))return En.INSTANCE;if(i.length===1)return i[0]}return new r(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new r(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=gu.create(e,this,!0)}return this.negated}},gu=class r{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return r._normalizeArr(e,t,n)}type=9;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let i=au(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=kk(this.expr);return e===this.expr?this:r.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],o=!1;if(e){for(let s=0,a=e.length;s<a;s++){let l=e[s];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return Fn.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&o)return En.INSTANCE;i.sort(au)}if(i.length!==0){if(i.length===1)return i[0];for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)if(i[s].negate().equals(i[a]))return Fn.INSTANCE;if(i.length===1)return i[0]}return new r(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new r(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){let t=e.shift(),n=e.shift(),i=[];for(let o of wk(t))for(let s of wk(n))i.push(ym.create([o,s],null,!1));e.unshift(r.create(i,null,!1))}this.negated=r.create(e,this,!0)}return this.negated}},V=class r extends xa{static _info=[];static all(){return r._info.values()}_defaultValue;constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?r._info.push({...n,key:e}):n!==!0&&r._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return lu.create(this.key,e)}notEqualsTo(e){return du.create(this.key,e)}},ui=k("contextKeyService");function Dk(r,e){return r<e?-1:r>e?1:0}function Ca(r,e,t,n){return r<t?-1:r>t?1:e<n?-1:e>n?1:0}function wk(r){return r.type===9?r.expr:[r]}var A7=Object.freeze({View:ii("view","View"),Help:ii("help","Help"),Test:ii("test","Test"),File:ii("file","File"),Preferences:ii("preferences","Preferences"),Developer:ii({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});function _k(r){let e=!1,t=new Map,n=new Map;if(eO(r,u=>{if(r===u)return!0;let p=JSON.stringify(u);if(p.length<30)return!0;let h=t.get(p);if(!h){let g={schemas:[u]};return t.set(p,g),n.set(u,g),!0}return h.schemas.push(u),n.set(u,h),e=!0,!1}),t.clear(),!e)return JSON.stringify(r);let o="$defs";for(;r.hasOwnProperty(o);)o+="_";let s=[];function a(u){return JSON.stringify(u,(p,h)=>{if(h!==u){let g=n.get(h);if(g&&g.schemas.length>1)return g.id||(g.id=`_${s.length}`,s.push(g.schemas[0])),{$ref:`#/${o}/${g.id}`}}return h})}let l=a(r),d=[];for(let u=0;u<s.length;u++)d.push(`"_${u}":${a(s[u])}`);return d.length?`${l.substring(0,l.length-1)},"${o}":{${d.join(",")}}}`:l}function Kl(r){return typeof r=="object"&&r!==null}function eO(r,e){if(!r||typeof r!="object")return;let t=(...l)=>{for(let d of l)Kl(d)&&s.push(d)},n=(...l)=>{for(let d of l)if(Kl(d))for(let u in d){let p=d[u];Kl(p)&&s.push(p)}},i=(...l)=>{for(let d of l)if(Array.isArray(d))for(let u of d)Kl(u)&&s.push(u)},o=l=>{if(Array.isArray(l))for(let d of l)Kl(d)&&s.push(d);else Kl(l)&&s.push(l)},s=[r],a=s.pop();for(;a;)e(a)&&(t(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),n(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),i(a.anyOf,a.allOf,a.oneOf,a.prefixItems),o(a.items)),a=s.pop()}var NI=k("commandService"),Tn=new class{_commands=new Map;_onDidRegisterCommand=new E;onDidRegisterCommand=this._onDidRegisterCommand.event;registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}if(r.metadata&&Array.isArray(r.metadata.args)){let s=[];for(let l of r.metadata.args)s.push(l.constraint);let a=r.handler;r.handler=function(l,...d){return OT(d,s),a(l,...d)}}let{id:t}=r,n=this._commands.get(t);n||(n=new an,this._commands.set(t,n));let i=n.unshift(r),o=j(()=>{i(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(r,e){return Tn.registerCommand(r,(t,...n)=>t.get(NI).executeCommand(e,...n))}getCommand(r){let e=this._commands.get(r);if(!(!e||e.isEmpty()))return yt.first(e)}getCommands(){let r=new Map;for(let e of this._commands.keys()){let t=this.getCommand(e);t&&r.set(e,t)}return r}};Tn.registerCommand("noop",()=>{});var je=k("logService"),_9=k("loggerService");function Sm(r){switch(r){case 1:return"trace";case 2:return"debug";case 3:return"info";case 4:return"warn";case 5:return"error";case 0:return"off"}}var R9=new V("logLevel",Sm(3));var Gi=k("IUriIdentityService");function Pk(r){let e=r;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&L.isUri(e.location)&&L.isUri(e.globalStorageHome)&&L.isUri(e.settingsResource)&&L.isUri(e.keybindingsResource)&&L.isUri(e.tasksResource)&&L.isUri(e.snippetsHome)&&L.isUri(e.extensionsResource))}var Lk=k("IUserDataProfilesService");function Cm(r,e,t,n,i,o){return{id:r,name:e,location:t,isDefault:!1,shortName:i?.shortName,icon:i?.icon,globalStorageHome:o&&i?.useDefaultFlags?.globalState?o.globalStorageHome:Me(t,"globalStorage"),settingsResource:o&&i?.useDefaultFlags?.settings?o.settingsResource:Me(t,"settings.json"),keybindingsResource:o&&i?.useDefaultFlags?.keybindings?o.keybindingsResource:Me(t,"keybindings.json"),tasksResource:o&&i?.useDefaultFlags?.tasks?o.tasksResource:Me(t,"tasks.json"),snippetsHome:o&&i?.useDefaultFlags?.snippets?o.snippetsHome:Me(t,"snippets"),extensionsResource:o&&i?.useDefaultFlags?.extensions?o.extensionsResource:Me(t,"extensions.json"),cacheHome:Me(n,r),useDefaultFlags:i?.useDefaultFlags,isTransient:i?.transient}}var Em=class extends O{constructor(t,n,i,o){super();this.environmentService=t;this.fileService=n;this.uriIdentityService=i;this.logService=o;this.profilesHome=Me(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=Me(this.environmentService.cacheHome,"CachedProfilesData")}static PROFILES_KEY="userDataProfiles";static PROFILE_ASSOCIATIONS_KEY="profileAssociations";_serviceBrand;enabled=!0;profilesHome;profilesCacheHome;get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}_onDidChangeProfiles=this._register(new E);onDidChangeProfiles=this._onDidChangeProfiles.event;_onWillCreateProfile=this._register(new E);onWillCreateProfile=this._onWillCreateProfile.event;_onWillRemoveProfile=this._register(new E);onWillRemoveProfile=this._onWillRemoveProfile.event;_onDidResetWorkspaces=this._register(new E);onDidResetWorkspaces=this._onDidResetWorkspaces.event;profileCreationPromises=new Map;transientProfilesObject={profiles:[],folders:new Ft,workspaces:new Ft,emptyWindows:new Map};init(){this._profilesObject=void 0}setEnablement(t){this.enabled!==t&&(this._profilesObject=void 0,this.enabled=t)}isEnabled(){return this.enabled}_profilesObject;get profilesObject(){if(!this._profilesObject){let t=this.createDefaultProfile(),n=[t];if(this.enabled)try{for(let s of this.getStoredProfiles()){if(!s.name||!Oe(s.name)||!s.location){this.logService.warn("Skipping the invalid stored profile",s.location||s.name);continue}n.push(Cm(qn(s.location),s.name,s.location,this.profilesCacheHome,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.logService.error(s)}let i=new Ft,o=new Map;if(n.length)try{let s=this.getStoredProfileAssociations();if(s.workspaces)for(let[a,l]of Object.entries(s.workspaces)){let d=L.parse(a),u=n.find(p=>p.id===l);u&&i.set(d,u)}if(s.emptyWindows)for(let[a,l]of Object.entries(s.emptyWindows)){let d=n.find(u=>u.id===l);d&&o.set(a,d)}}catch(s){this.logService.error(s)}this._profilesObject={profiles:n,workspaces:i,emptyWindows:o}}return this._profilesObject}createDefaultProfile(){let t=Cm("__default__profile__",c("defaultProfile","Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...t,extensionsResource:this.getDefaultProfileExtensionsLocation()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){let n="Temp",i=new RegExp(`${bn(n)}\\s(\\d+)`),o=0;for(let a of this.profiles){let l=i.exec(a.name),d=l?parseInt(l[1]):0;o=d>o?d:o}let s=`${n} ${o+1}`;return this.createProfile(xn(dt()).toString(16),s,{transient:!0},t)}async createNamedProfile(t,n,i){return this.createProfile(xn(dt()).toString(16),t,n,i)}async createProfile(t,n,i,o){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let s=await this.doCreateProfile(t,n,i);return o&&await this.setProfileForWorkspace(o,s),s}async doCreateProfile(t,n,i){if(!Oe(n)||!n)throw new Error("Name of the profile is mandatory and must be of type `string`");let o=this.profileCreationPromises.get(n);return o||(o=(async()=>{try{if(this.profiles.find(d=>d.name===n||d.id===t))throw new Error(`Profile with ${n} name already exists`);let a=Cm(t,n,Me(this.profilesHome,t),this.profilesCacheHome,i,this.defaultProfile);await this.fileService.createFolder(a.location);let l=[];return this._onWillCreateProfile.fire({profile:a,join(d){l.push(d)}}),await zi.settled(l),this.updateProfiles([a],[],[]),a}finally{this.profileCreationPromises.delete(n)}})(),this.profileCreationPromises.set(n,o)),o}async updateProfile(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find(o=>o.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);return i=Cm(i.id,n.name??i.name,i.location,this.profilesCacheHome,{shortName:n.shortName??i.shortName,icon:n.icon===null?void 0:n.icon??i.icon,transient:n.transient??i.isTransient,useDefaultFlags:n.useDefaultFlags??i.useDefaultFlags},this.defaultProfile),this.updateProfiles([],[],[i]),i}async removeProfile(t){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");let n=this.profiles.find(o=>o.id===t.id);if(!n)throw new Error(`Profile '${t.name}' does not exist`);let i=[];this._onWillRemoveProfile.fire({profile:n,join(o){i.push(o)}});try{await Promise.allSettled(i)}catch(o){this.logService.error(o)}for(let o of[...this.profilesObject.emptyWindows.keys()])n.id===this.profilesObject.emptyWindows.get(o)?.id&&this.profilesObject.emptyWindows.delete(o);for(let o of[...this.profilesObject.workspaces.keys()])n.id===this.profilesObject.workspaces.get(o)?.id&&this.profilesObject.workspaces.delete(o);this.updateStoredProfileAssociations(),this.updateProfiles([],[n],[]);try{await this.fileService.del(n.cacheHome,{recursive:!0})}catch(o){bk(o)!==1&&this.logService.error(o)}}async setProfileForWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find(o=>o.id===n.id);if(!i)throw new Error(`Profile '${n.name}' does not exist`);this.updateWorkspaceAssociation(t,i)}unsetWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");this.updateWorkspaceAssociation(t,void 0,n)}async resetWorkspaces(){this.transientProfilesObject.folders.clear(),this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindows.clear(),this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(this.enabled&&await this.fileService.exists(this.profilesHome)){let t=await this.fileService.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(n=>n.isDirectory&&this.profiles.every(i=>!this.uriIdentityService.extUri.isEqual(i.location,n.resource))).map(n=>this.fileService.del(n.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.enabled)return;let t=this.transientProfilesObject.profiles.filter(n=>!this.isProfileAssociatedToWorkspace(n));await Promise.allSettled(t.map(n=>this.removeProfile(n)))}getProfileForWorkspace(t){let n=this.getWorkspace(t),i=L.isUri(n)?this.profilesObject.workspaces.get(n):this.profilesObject.emptyWindows.get(n);return i||(gm(t)?this.transientProfilesObject.folders.get(t.uri):fm(t)?this.transientProfilesObject.workspaces.get(t.configPath):this.transientProfilesObject.emptyWindows.get(t.id))}getWorkspace(t){return gm(t)?t.uri:fm(t)?t.configPath:t.id}isProfileAssociatedToWorkspace(t){return!!([...this.profilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.profilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.folders.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location)))}updateProfiles(t,n,i){let o=[...this.profiles,...t],s=[],a=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];for(let l of o){if(l.isDefault||n.some(u=>l.id===u.id))continue;l=i.find(u=>l.id===u.id)??l;let d=a.find(u=>l.id===u.id);if(l.isTransient)this.transientProfilesObject.profiles.push(l);else{if(d){for(let[u,p]of this.transientProfilesObject.emptyWindows.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:u},l);break}for(let[u,p]of this.transientProfilesObject.workspaces.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",configPath:u},l);break}for(let[u,p]of this.transientProfilesObject.folders.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",uri:u},l);break}}s.push({location:l.location,name:l.name,shortName:l.shortName,icon:l.icon,useDefaultFlags:l.useDefaultFlags})}}this.saveStoredProfiles(s),this._profilesObject=void 0,this.triggerProfilesChanges(t,n,i)}triggerProfilesChanges(t,n,i){this._onDidChangeProfiles.fire({added:t,removed:n,updated:i,all:this.profiles})}updateWorkspaceAssociation(t,n,i){if(i=n?.isTransient?!0:i,i)gm(t)?(this.transientProfilesObject.folders.delete(t.uri),n&&this.transientProfilesObject.folders.set(t.uri,n)):fm(t)?(this.transientProfilesObject.workspaces.delete(t.configPath),n&&this.transientProfilesObject.workspaces.set(t.configPath,n)):(this.transientProfilesObject.emptyWindows.delete(t.id),n&&this.transientProfilesObject.emptyWindows.set(t.id,n));else{this.updateWorkspaceAssociation(t,void 0,!0);let o=this.getWorkspace(t);L.isUri(o)?(this.profilesObject.workspaces.delete(o),n&&this.profilesObject.workspaces.set(o,n)):(this.profilesObject.emptyWindows.delete(o),n&&this.profilesObject.emptyWindows.set(o,n)),this.updateStoredProfileAssociations()}}updateStoredProfileAssociations(){let t={};for(let[i,o]of this.profilesObject.workspaces.entries())t[i.toString()]=o.id;let n={};for(let[i,o]of this.profilesObject.emptyWindows.entries())n[i.toString()]=o.id;this.saveStoredProfileAssociations({workspaces:t,emptyWindows:n}),this._profilesObject=void 0}migrateStoredProfileAssociations(t){let n={},i=this.createDefaultProfile();if(t.workspaces)for(let[s,a]of Object.entries(t.workspaces)){let l=L.parse(a);n[s]=this.uriIdentityService.extUri.isEqual(l,i.location)?i.id:this.uriIdentityService.extUri.basename(l)}let o={};if(t.emptyWindows)for(let[s,a]of Object.entries(t.emptyWindows)){let l=L.parse(a);o[s]=this.uriIdentityService.extUri.isEqual(l,i.location)?i.id:this.uriIdentityService.extUri.basename(l)}return{workspaces:n,emptyWindows:o}}getStoredProfiles(){return[]}saveStoredProfiles(t){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(t){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};Em=T([S(0,Ri),S(1,Ut),S(2,Gi),S(3,je)],Em);var tO="__$__isNewStorageMarker",Tm="__$__targetStorageMarker",Vt=k("storageService");function nO(r){let e=r.get(Tm);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}var Ok=class r extends O{constructor(t={flushInterval:r.DEFAULT_FLUSH_INTERVAL}){super();this.options=t}static DEFAULT_FLUSH_INTERVAL=60*1e3;_onDidChangeValue=this._register(new rs);_onDidChangeTarget=this._register(new rs);onDidChangeTarget=this._onDidChangeTarget.event;_onWillSaveState=this._register(new E);onWillSaveState=this._onWillSaveState.event;initializationPromise;flushWhenIdleScheduler=this._register(new li(()=>this.doFlushWhenIdle(),this.options.flushInterval));runFlushWhenIdle=this._register(new fn);onDidChangeValue(t,n,i){return Q.filter(this._onDidChangeValue.event,o=>o.scope===t&&(n===void 0||o.key===n),i)}doFlushWhenIdle(){this.runFlushWhenIdle.value=as(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){ft([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{Wt("code/willInitStorage");try{await this.doInitialize()}finally{Wt("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(t,n){let{key:i,external:o}=n;if(i===Tm){switch(t){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:t})}else this._onDidChangeValue.fire({scope:t,key:i,target:this.getKeyTargets(t)[i],external:o})}emitWillSaveState(t){this._onWillSaveState.fire({reason:t})}get(t,n,i){return this.getStorage(n)?.get(t,i)}getBoolean(t,n,i){return this.getStorage(n)?.getBoolean(t,i)}getNumber(t,n,i){return this.getStorage(n)?.getNumber(t,i)}getObject(t,n,i){return this.getStorage(n)?.getObject(t,i)}storeAll(t,n){this.withPausedEmitters(()=>{for(let i of t)this.store(i.key,i.value,i.scope,i.target,n)})}store(t,n,i,o,s=!1){if(Bt(n)){this.remove(t,i,s);return}this.withPausedEmitters(()=>{this.updateKeyTarget(t,i,o),this.getStorage(i)?.set(t,n,s)})}remove(t,n,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(t,n,void 0),this.getStorage(n)?.delete(t,i)})}withPausedEmitters(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(t,n){let i=[],o=this.getKeyTargets(t);for(let s of Object.keys(o))o[s]===n&&i.push(s);return i}updateKeyTarget(t,n,i,o=!1){let s=this.getKeyTargets(n);typeof i=="number"?s[t]!==i&&(s[t]=i,this.getStorage(n)?.set(Tm,JSON.stringify(s),o)):typeof s[t]=="number"&&(delete s[t],this.getStorage(n)?.set(Tm,JSON.stringify(s),o))}_workspaceKeyTargets=void 0;get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}_profileKeyTargets=void 0;get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}_applicationKeyTargets=void 0;get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(t){switch(t){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(t){let n=this.getStorage(t);return n?nO(n):Object.create(null)}isNew(t){return this.getBoolean(tO,t)===!0}async flush(t=0){this._onWillSaveState.fire({reason:t});let n=this.getStorage(-1),i=this.getStorage(0),o=this.getStorage(1);switch(t){case 0:await zi.settled([n?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),o?.whenFlushed()??Promise.resolve()]);break;case 1:await zi.settled([n?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),o?.flush(0)??Promise.resolve()]);break}}async log(){let t=this.getStorage(-1)?.items??new Map,n=this.getStorage(0)?.items??new Map,i=this.getStorage(1)?.items??new Map;return iO(t,n,i,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async optimize(t){return await this.flush(),this.getStorage(t)?.optimize()}async switch(t,n){return this.emitWillSaveState(0),Pk(t)?this.switchToProfile(t,n):this.switchToWorkspace(t,n)}canSwitchProfile(t,n){return!(t.id===n.id||Ak(n)&&Ak(t))}switchData(t,n,i){this.withPausedEmitters(()=>{let o=new Set;for(let[s,a]of t)o.add(s),n.get(s)!==a&&this.emitDidChangeValue(i,{key:s,external:!0});for(let[s]of n.items)o.has(s)||this.emitDidChangeValue(i,{key:s,external:!0})})}};function Ak(r){return r.isDefault||!!r.useDefaultFlags?.globalState}async function iO(r,e,t,n,i,o){let s=f=>{try{return JSON.parse(f)}catch{return f}},a=new Map,l=new Map;r.forEach((f,v)=>{a.set(v,f),l.set(v,s(f))});let d=new Map,u=new Map;e.forEach((f,v)=>{d.set(v,f),u.set(v,s(f))});let p=new Map,h=new Map;t.forEach((f,v)=>{p.set(v,f),h.set(v,s(f))}),console.group(n!==i?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);let g=[];if(a.forEach((f,v)=>{g.push({key:v,value:f})}),console.table(g),console.groupEnd(),console.log(l),n!==i){console.group(`Storage: Profile (path: ${i}, profile specific)`);let f=[];d.forEach((v,D)=>{f.push({key:D,value:v})}),console.table(f),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${o})`);let b=[];p.forEach((f,v)=>{b.push({key:v,value:f})}),console.table(b),console.groupEnd(),console.log(h)}var fs=k("undoRedoService");var Mk=class r{static _ID=0;id;order;constructor(){this.id=r._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new r},Nk=class r{static _ID=0;id;order;constructor(){this.id=r._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new r};var Xe=k("configurationService");function Fk(r){return r.applicationValue!==void 0||r.userValue!==void 0||r.userLocalValue!==void 0||r.userRemoteValue!==void 0||r.workspaceValue!==void 0||r.workspaceFolderValue!==void 0}function Bk(r){return r.replace(/[\[\]]/g,"")}var Uk=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var Rt=class{value;_lower;constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){let n=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return vn(n,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},fu=class{_set=new Set;get size(){return this._set.size}constructor(e){if(e)for(let t of e)this.add(t)}add(e){this._set.add(Rt.toKey(e))}delete(e){return this._set.delete(Rt.toKey(e))}has(e){return this._set.has(Rt.toKey(e))}};var t3=k("IBuiltinExtensionsScannerService");function FI(r){let e=r;return typeof e?.resolve=="function"&&typeof e?.isResolved=="function"}var wm=k("openerService");var UI=class r{constructor(e,t,n,i,o,s,a){this._forceIntegerValues=e;this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,o=o|0,s=s|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),o<0&&(o=0),a+o>s&&(a=s-o),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=o,this.scrollHeight=s,this.scrollTop=a}_scrollStateBrand=void 0;rawScrollLeft;rawScrollTop;width;scrollWidth;scrollLeft;height;scrollHeight;scrollTop;equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new r(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new r(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){let n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:o,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:l}}},$l=class extends O{_scrollableBrand=void 0;_smoothScrollDuration;_scheduleAtNextAnimationFrame;_state;_smoothScrolling;_onScroll=this._register(new E);onScroll=this._onScroll.event;constructor(e){super(),this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new UI(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new Dm(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=Dm.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}},km=class{scrollLeft;scrollTop;isDone;constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};function BI(r,e){let t=e-r;return function(n){return r+t*aO(n)}}function oO(r,e,t){return function(n){return n<t?r(n/t):e((n-t)/(1-t))}}var Dm=class r{from;to;duration;startTime;animationFrameDisposable;scrollLeft;scrollTop;constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,s;return e<t?(o=e+.75*n,s=t-.75*n):(o=e-.75*n,s=t+.75*n),oO(BI(e,o),BI(s,t),.33)}return BI(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;if(t<1){let n=this.scrollLeft(t),i=this.scrollTop(t);return new km(n,i,!1)}return new km(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return r.start(e,t,n)}static start(e,t,n){n=n+10;let i=Date.now()-10;return new r(e,t,i,n)}};function sO(r){return Math.pow(r,3)}function aO(r){return 1-sO(1-r)}var lO=new class{_zoomLevel=0;_onDidChangeZoomLevel=new E;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(){return this._zoomLevel}setZoomLevel(r){r=Math.min(Math.max(-5,r),20),this._zoomLevel!==r&&(this._zoomLevel=r,this._onDidChangeZoomLevel.fire(this._zoomLevel))}};var Gr={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var WI="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function cO(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let t of WI)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}var VI=cO();function bu(r){let e=VI;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}var Wk=new an;Wk.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Rm(r,e,t,n,i){if(e=bu(e),i||(i=yt.first(Wk)),t.length>i.maxLen){let d=r-i.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,r+i.maxLen/2),Rm(r,e,t,n,i)}let o=Date.now(),s=r-1-n,a=-1,l=null;for(let d=1;!(Date.now()-o>=i.timeBudget);d++){let u=s-i.windowSize*d;e.lastIndex=Math.max(0,u);let p=uO(e,t,s,a);if(!p&&l||(l=p,u<=0))break;a=u}if(l){let d={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,d}return null}function uO(r,e,t,n){let i;for(;i=r.exec(e);){let o=i.index||0;if(o<=t&&r.lastIndex>=t)return i;if(n>0&&o>n)return null}return null}var Pm=k("accessibilityService");var K3=new V("accessibilityModeEnabled",!1);var zI=class{data=new Map;add(e,t){Sc(Oe(e)),Sc(kt(t)),Sc(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}},De=new zI;var Lo={JSONContribution:"base.contributions.json"};function pO(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}var HI=class{schemasById;_onDidChangeSchema=new E;onDidChangeSchema=this._onDidChangeSchema.event;constructor(){this.schemasById={}}registerSchema(e,t){this.schemasById[pO(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){let t=this.schemasById[e];return t?_k(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}},hO=new HI;De.add(Lo.JSONContribution,hO);var i6=k("policy");var qi={Configuration:"base.contributions.configuration"};var Om={properties:{},patternProperties:{}},Am={properties:{},patternProperties:{}},Mm={properties:{},patternProperties:{}},Nm={properties:{},patternProperties:{}},Fm={properties:{},patternProperties:{}},vu={properties:{},patternProperties:{}},Ea="vscode://schemas/settings/resourceLanguage";var Bm=De.as(Lo.JSONContribution),KI=class{registeredConfigurationDefaults=[];configurationDefaultsOverrides;defaultLanguageConfigurationOverridesNode;configurationContributors;configurationProperties;policyConfigurations;excludedConfigurationProperties;resourceLanguageSettingsSchema;overrideIdentifiers=new Set;_onDidSchemaChange=new E;onDidSchemaChange=this._onDidSchemaChange.event;_onDidUpdateConfiguration=new E;onDidUpdateConfiguration=this._onDidUpdateConfiguration.event;constructor(){this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:c("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},Bm.registerSchema(Ea,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let n=new Set;this.doRegisterConfigurations(e,t,n),Bm.registerSchema(Ea,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){let t=new Set;this.doDeregisterConfigurations(e,t),Bm.registerSchema(Ea,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){let n=new Set;this.doDeregisterConfigurations(t,n),this.doRegisterConfigurations(e,!1,n),Bm.registerSchema(Ea,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){let t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);let n=[];for(let{overrides:i,source:o}of e)for(let s in i){t.add(s);let a=this.configurationDefaultsOverrides.get(s)??this.configurationDefaultsOverrides.set(s,{configurationDefaultOverrides:[]}).get(s),l=i[s];if(a.configurationDefaultOverrides.push({value:l,source:o}),Gl.test(s)){let d=this.mergeDefaultConfigurationsForOverrideIdentifier(s,l,o,a.configurationDefaultOverrideValue);if(!d)continue;a.configurationDefaultOverrideValue=d,this.updateDefaultOverrideProperty(s,d,o),n.push(...mO(s))}else{let d=this.mergeDefaultConfigurationsForConfigurationProperty(s,l,o,a.configurationDefaultOverrideValue);if(!d)continue;a.configurationDefaultOverrideValue=d;let u=this.configurationProperties[s];u&&(this.updatePropertyDefaultValue(s,u),this.updateSchema(s,u))}}this.doRegisterOverrideIdentifiers(n)}deregisterDefaultConfigurations(e){let t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(let n of e){let i=this.registeredConfigurationDefaults.indexOf(n);i!==-1&&this.registeredConfigurationDefaults.splice(i,1)}for(let{overrides:n,source:i}of e)for(let o in n){let s=this.configurationDefaultsOverrides.get(o);if(!s)continue;let a=s.configurationDefaultOverrides.findIndex(l=>i?l.source?.id===i.id:l.value===n[o]);if(a!==-1){if(s.configurationDefaultOverrides.splice(a,1),s.configurationDefaultOverrides.length===0&&this.configurationDefaultsOverrides.delete(o),Gl.test(o)){let l;for(let d of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForOverrideIdentifier(o,d.value,d.source,l);l&&!ca(l.value)?(s.configurationDefaultOverrideValue=l,this.updateDefaultOverrideProperty(o,l,i)):(this.configurationDefaultsOverrides.delete(o),delete this.configurationProperties[o],delete this.defaultLanguageConfigurationOverridesNode.properties[o])}else{let l;for(let u of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForConfigurationProperty(o,u.value,u.source,l);s.configurationDefaultOverrideValue=l;let d=this.configurationProperties[o];d&&(this.updatePropertyDefaultValue(o,d),this.updateSchema(o,d))}t.add(o)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,n){let i={type:"object",default:t.value,description:c("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",Bk(e)),$ref:Ea,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=i,this.defaultLanguageConfigurationOverridesNode.properties[e]=i}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,i){let o=i?.value||{},s=i?.source??new Map;if(!(s instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(let a of Object.keys(t)){let l=t[a];if(kt(l)&&(Zt(o[a])||kt(o[a]))){if(o[a]={...o[a]??{},...l},n)for(let u in l)s.set(`${a}.${u}`,n)}else o[a]=l,n?s.set(a,n):s.delete(a)}return{value:o,source:s}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,i){let o=this.configurationProperties[e],s=i?.value??o?.defaultDefaultValue,a=n;if(kt(t)&&(o!==void 0&&o.type==="object"||o===void 0&&(Zt(s)||kt(s)))){if(a=i?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(let d in t)n&&a.set(`${e}.${d}`,n);t={...kt(s)?s:{},...t}}return{value:t,source:a}}deltaConfiguration(e){let t=!1,n=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,n),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,n),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,n),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(i=>{this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties,void 0,n),this.configurationContributors.push(i),this.registerJSONConfiguration(i)})}doDeregisterConfigurations(e,t){let n=i=>{if(i.properties)for(let o in i.properties){t.add(o);let s=this.configurationProperties[o];s?.policy?.name&&this.policyConfigurations.delete(s.policy.name),delete this.configurationProperties[o],this.removeFromSchema(o,i.properties[o])}i.allOf?.forEach(o=>n(o))};for(let i of e){n(i);let o=this.configurationContributors.indexOf(i);o!==-1&&this.configurationContributors.splice(o,1)}}validateAndRegisterProperties(e,t=!0,n,i,o=3,s){o=Bt(e.scope)?o:e.scope;let a=e.properties;if(a)for(let d in a){let u=a[d];if(t&&fO(d,u)){delete a[d];continue}if(u.source=n,u.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,u),Gl.test(d)?u.scope=void 0:(u.scope=Bt(u.scope)?o:u.scope,u.restricted=Bt(u.restricted)?!!i?.includes(d):u.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d],a[d].policy?.name&&this.policyConfigurations.set(a[d].policy.name,d);!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),s.add(d)}let l=e.allOf;if(l)for(let d of l)this.validateAndRegisterProperties(d,t,n,i,o,s)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){let e=new Map;for(let[t,n]of this.configurationDefaultsOverrides)n.configurationDefaultOverrideValue&&e.set(t,n.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){let t=n=>{let i=n.properties;if(i)for(let s in i)this.updateSchema(s,i[s]);n.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(Om.properties[e]=t,t.scope){case 1:Am.properties[e]=t;break;case 2:Mm.properties[e]=t;break;case 6:Nm.properties[e]=t;break;case 3:Fm.properties[e]=t;break;case 4:vu.properties[e]=t;break;case 5:vu.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(delete Om.properties[e],t.scope){case 1:delete Am.properties[e];break;case 2:delete Mm.properties[e];break;case 6:delete Nm.properties[e];break;case 3:delete Fm.properties[e];break;case 4:case 5:delete vu.properties[e],delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,n={type:"object",description:c("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:c("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Ea};this.updatePropertyDefaultValue(t,n),Om.properties[t]=n,Am.properties[t]=n,Mm.properties[t]=n,Nm.properties[t]=n,Fm.properties[t]=n,vu.properties[t]=n}}registerOverridePropertyPatternKey(){let e={type:"object",description:c("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:c("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Ea};Om.patternProperties[Ta]=e,Am.patternProperties[Ta]=e,Mm.patternProperties[Ta]=e,Nm.patternProperties[Ta]=e,Fm.patternProperties[Ta]=e,vu.patternProperties[Ta]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue,i,o;n&&(!t.disallowConfigurationDefault||!n.source)&&(i=n.value,o=n.source),Zt(i)&&(i=t.defaultDefaultValue,o=void 0),Zt(i)&&(i=gO(t.type)),t.default=i,t.defaultValueSource=o}},zk="\\[([^\\]]+)\\]",Vk=new RegExp(zk,"g"),Ta=`^(${zk})+$`,Gl=new RegExp(Ta);function mO(r){let e=[];if(Gl.test(r)){let t=Vk.exec(r);for(;t?.length;){let n=t[1].trim();n&&e.push(n),t=Vk.exec(r)}}return Hn(e)}function gO(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Um=new KI;De.add(qi.Configuration,Um);function fO(r,e){return r.trim()?Gl.test(r)?c("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):Um.getConfigurationProperties()[r]!==void 0?c("config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):e.policy?.name&&Um.getPolicyConfigurations().get(e.policy?.name)!==void 0?c("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",r,e.policy?.name,Um.getPolicyConfigurations().get(e.policy?.name)):null:c("config.property.empty","Cannot register an empty property")}var bO=8;var $I=class{stableMinimapLayoutInput;stableFitMaxMinimapScale;stableFitRemainingWidth;constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Qe=class{id;name;defaultValue;schema;constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Wm(e,t)}compute(e,t,n){return n}},jl=class{constructor(e,t){this.newValue=e;this.didChange=t}};function Wm(r,e){if(typeof r!="object"||typeof e!="object"||!r||!e)return new jl(e,r!==e);if(Array.isArray(r)||Array.isArray(e)){let n=Array.isArray(r)&&Array.isArray(e)&&Si(r,e);return new jl(e,!n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){let i=Wm(r[n],e[n]);i.didChange&&(r[n]=i.newValue,t=!0)}return new jl(r,t)}var ka=class{id;name;defaultValue;schema=void 0;constructor(e){this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Wm(e,t)}validate(e){return this.defaultValue}},bs=class{id;name;defaultValue;schema;constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Wm(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}};function re(r,e){return typeof r>"u"?e:r==="false"?!1:!!r}var Te=class extends bs{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return re(e,this.defaultValue)}};function vO(r,e,t,n){if(typeof r>"u")return e;let i=parseInt(r,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}var Ge=class r extends bs{static clampedInt(e,t,n,i){return vO(e,t,n,i)}minimum;maximum;constructor(e,t,n,i,o,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=i,s.maximum=o),super(e,t,n,s),this.minimum=i,this.maximum=o}validate(e){return r.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}};var ji=class r extends bs{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;let n=parseFloat(e);return isNaN(n)?t:n}validationFn;constructor(e,t,n,i,o){typeof o<"u"&&(o.type="number",o.default=n),super(e,t,n,o),this.validationFn=i}validate(e){return this.validationFn(r.float(e,this.defaultValue))}},cn=class r extends bs{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return r.string(e,this.defaultValue)}};function ht(r,e,t,n){return typeof r!="string"?e:n&&r in n?n[r]:t.indexOf(r)===-1?e:r}var rt=class extends bs{_allowedValues;constructor(e,t,n,i,o=void 0){typeof o<"u"&&(o.type="string",o.enum=i,o.default=n),super(e,t,n,o),this._allowedValues=i}validate(e){return ht(e,this.defaultValue,this._allowedValues)}},ql=class extends Qe{_allowedValues;_convert;constructor(e,t,n,i,o,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=i),super(e,t,n,a),this._allowedValues=o,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function IO(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var GI=class extends Qe{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[c("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),c("accessibilitySupport.on","Optimize for usage with a Screen Reader."),c("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:c("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}},qI=class extends Qe{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:c("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:c("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertSpace:re(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:re(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};function yO(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}function xO(r){switch(r){case"line":return 1;case"block":return 2;case"underline":return 3;case"line-thin":return 4;case"block-outline":return 5;case"underline-thin":return 6}}var jI=class extends ka{constructor(){super(144)}compute(e,t,n){let i=["monaco-editor"];return t.get(40)&&i.push(t.get(40)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(75)==="default"?i.push("mouse-default"):t.get(75)==="copy"&&i.push("mouse-copy"),t.get(113)&&i.push("showUnused"),t.get(142)&&i.push("showDeprecated"),i.join(" ")}},XI=class extends Te{constructor(){super(38,"emptySelectionClipboard",!0,{description:c("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}},QI=class extends Qe{constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(42,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:c("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[c("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),c("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),c("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:c("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[c("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),c("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),c("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:c("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:c("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Fe},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:c("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:c("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{cursorMoveOnType:re(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":ht(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":ht(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:re(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:re(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:re(t.loop,this.defaultValue.loop)}}},YI=class r extends Qe{static OFF='"liga" off, "calt" off';static ON='"liga" on, "calt" on';constructor(){super(52,"fontLigatures",r.OFF,{anyOf:[{type:"boolean",description:c("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:c("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:c("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?r.OFF:e==="true"?r.ON:e:e?r.ON:r.OFF}},_m=class r extends Qe{static OFF="normal";static TRANSLATE="translate";constructor(){super(55,"fontVariations",r.OFF,{anyOf:[{type:"boolean",description:c("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:c("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:c("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?r.OFF:e==="true"?r.TRANSLATE:e:e?r.TRANSLATE:r.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}},JI=class extends ka{constructor(){super(51)}compute(e,t,n){return e.fontInfo}},ZI=class extends bs{constructor(){super(53,"fontSize",$r.fontSize,{type:"number",minimum:6,maximum:100,default:$r.fontSize,description:c("fontSize","Controls the font size in pixels.")})}validate(e){let t=ji.float(e,this.defaultValue);return t===0?$r.fontSize:ji.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}},ey=class r extends Qe{static SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];static MINIMUM_VALUE=1;static MAXIMUM_VALUE=1e3;constructor(){super(54,"fontWeight",$r.fontWeight,{anyOf:[{type:"number",minimum:r.MINIMUM_VALUE,maximum:r.MAXIMUM_VALUE,errorMessage:c("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:r.SUGGESTION_VALUES}],default:$r.fontWeight,description:c("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Ge.clampedInt(e,$r.fontWeight,r.MINIMUM_VALUE,r.MAXIMUM_VALUE))}},ty=class extends Qe{constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[c("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),c("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),c("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(59,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:c("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:c("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:c("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:c("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:c("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:c("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:c("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:c("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:c("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:c("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:c("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{multiple:ht(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??ht(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??ht(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??ht(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??ht(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??ht(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??ht(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:cn.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:cn.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:cn.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:cn.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:cn.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:cn.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},ny=class extends Qe{constructor(){let e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(61,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:c("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:c("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:c("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:c("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:c("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),delay:Ge.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:re(t.sticky,this.defaultValue.sticky),hidingDelay:Ge.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:re(t.above,this.defaultValue.above)}}};var iy=class r extends ka{constructor(){super(147)}compute(e,t,n){return r.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight),i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));let o=(n+e.viewLineCount+i)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:o,minimapLineCount:s}}static _computeMinimapLayout(e,t){let n=e.outerWidth,i=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};let s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.paddingTop===s.paddingTop&&e.paddingBottom===s.paddingBottom&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,l=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,p=e.minimap.renderCharacters,h=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale,g=e.minimap.maxColumn,b=e.minimap.size,f=e.minimap.side,v=e.verticalScrollbarWidth,D=e.viewLineCount,R=e.remainingWidth,A=e.isViewportWrapping,B=p?2:3,W=Math.floor(o*i),H=W/o,ue=!1,Y=!1,oe=B*h,de=h/o,be=1;if(b==="fill"||b==="fit"){let{typicalViewportLineCount:J,extraLinesBeforeFirstLine:ne,extraLinesBeyondLastLine:Ee,desiredRatio:xe,minimapLineCount:et}=r.computeContainedMinimapLineCount({viewLineCount:D,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:i,lineHeight:l,pixelRatio:o});if(D/et>1)ue=!0,Y=!0,h=1,oe=1,de=h/o;else{let fe=!1,gn=h+1;if(b==="fit"){let Qt=Math.ceil((ne+D+Ee)*oe);A&&a&&R<=t.stableFitRemainingWidth?(fe=!0,gn=t.stableFitMaxMinimapScale):fe=Qt>W}if(b==="fill"||fe){ue=!0;let Qt=h;oe=Math.min(l*o,Math.max(1,Math.floor(1/xe))),A&&a&&R<=t.stableFitRemainingWidth&&(gn=t.stableFitMaxMinimapScale),h=Math.min(gn,Math.max(1,Math.floor(oe/B))),h>Qt&&(be=Math.min(2,h/Qt)),de=h/o/be,W=Math.ceil(Math.max(J,ne+D+Ee)*oe),A?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=R,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}let ge=Math.floor(g*de),Ye=Math.min(ge,Math.max(0,Math.floor((R-v-2)*de/(d+de)))+bO),ut=Math.floor(o*Ye),se=ut/o;ut=Math.floor(ut*be);let G=p?1:2,te=f==="left"?0:n-Ye-v;return{renderMinimap:G,minimapLeft:te,minimapWidth:Ye,minimapHeightIsEditorHeight:ue,minimapIsSampling:Y,minimapScale:h,minimapLineHeight:oe,minimapCanvasInnerWidth:ut,minimapCanvasInnerHeight:W,minimapCanvasOuterWidth:se,minimapCanvasOuterHeight:H}}static computeLayout(e,t){let n=t.outerWidth|0,i=t.outerHeight|0,o=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,d=t.pixelRatio,u=t.viewLineCount,p=e.get(139),h=p==="inherit"?e.get(138):p,g=h==="inherit"?e.get(134):h,b=e.get(137),f=t.isDominatedByLongLines,v=e.get(58),D=e.get(69).renderType!==0,R=e.get(70),A=e.get(107),B=e.get(85),W=e.get(74),H=e.get(105),ue=H.verticalScrollbarSize,Y=H.verticalHasArrows,oe=H.arrowSize,de=H.horizontalScrollbarSize,be=e.get(44),ge=e.get(112)!=="never",Ye=e.get(67);be&&ge&&(Ye+=16);let ut=0;if(D){let Fi=Math.max(s,R);ut=Math.round(Fi*l)}let se=0;v&&(se=o*t.glyphMarginDecorationLaneCount);let G=0,te=G+se,J=te+ut,ne=J+Ye,Ee=n-se-ut-Ye,xe=!1,et=!1,_e=-1;h==="inherit"&&f?(xe=!0,et=!0):g==="on"||g==="bounded"?et=!0:g==="wordWrapColumn"&&(_e=b);let fe=r._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:A,paddingTop:B.top,paddingBottom:B.bottom,minimap:W,verticalScrollbarWidth:ue,viewLineCount:u,remainingWidth:Ee,isViewportWrapping:et},t.memory||new $I);fe.renderMinimap!==0&&fe.minimapLeft===0&&(G+=fe.minimapWidth,te+=fe.minimapWidth,J+=fe.minimapWidth,ne+=fe.minimapWidth);let gn=Ee-fe.minimapWidth,Qt=Math.max(1,Math.floor((gn-ue-2)/a)),er=Y?oe:0;return et&&(_e=Math.max(1,Qt),g==="bounded"&&(_e=Math.min(_e,b))),{width:n,height:i,glyphMarginLeft:G,glyphMarginWidth:se,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:te,lineNumbersWidth:ut,decorationsLeft:J,decorationsWidth:Ye,contentLeft:ne,contentWidth:gn,minimap:fe,viewportColumn:Qt,isWordWrapMinified:xe,isViewportWrapping:et,wrappingColumn:_e,verticalScrollbarWidth:ue,horizontalScrollbarHeight:de,overviewRuler:{top:er,width:ue,height:i-2*er,right:0}}}},ry=class extends Qe{constructor(){super(141,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[c("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),c("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:c("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return ht(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}};var oy=class extends Qe{constructor(){let e={enabled:"onCode"};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:["off","onCode","on"],default:e.enabled,enumDescriptions:[c("editor.lightbulb.enabled.off","Disable the code action menu."),c("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),c("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:c("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:ht(e.enabled,this.defaultValue.enabled,["off","onCode","on"])}}},sy=class extends Qe{constructor(){let e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(117,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:c("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:c("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:c("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:c("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),maxLineCount:Ge.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:ht(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:re(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},ay=class extends Qe{constructor(){let e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(143,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:c("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[c("editor.inlayHints.on","Inlay hints are enabled"),c("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Fe?"Ctrl+Option":"Ctrl+Alt"),c("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Fe?"Ctrl+Option":"Ctrl+Alt"),c("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:c("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:c("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:c("inlayHints.padding","Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:c("inlayHints.maximumLength","Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:ht(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ge.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:cn.string(t.fontFamily,this.defaultValue.fontFamily),padding:re(t.padding,this.defaultValue.padding),maximumLength:Ge.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},ly=class extends Qe{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Ge.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?Ge.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}},dy=class extends ji{constructor(){super(68,"lineHeight",$r.lineHeight,e=>ji.clamp(e,0,150),{markdownDescription:c("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}},cy=class extends Qe{constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:c("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:c("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[c("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),c("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),c("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:c("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:c("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:c("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:c("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:c("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:c("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:c("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:c("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:c("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:c("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),autohide:re(t.autohide,this.defaultValue.autohide),size:ht(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ht(t.side,this.defaultValue.side,["right","left"]),showSlider:ht(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:re(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ge.clampedInt(t.scale,1,1,3),maxColumn:Ge.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:re(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:re(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:ji.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:ji.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function SO(r){return r==="ctrlCmd"?Fe?"metaKey":"ctrlKey":"altKey"}var uy=class extends Qe{constructor(){super(85,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:c("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:c("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{top:Ge.clampedInt(t.top,0,0,1e3),bottom:Ge.clampedInt(t.bottom,0,0,1e3)}}},py=class extends Qe{constructor(){let e={enabled:!0,cycle:!0};super(87,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:c("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:c("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),cycle:re(t.cycle,this.defaultValue.cycle)}}},hy=class extends ka{constructor(){super(145)}compute(e,t,n){return e.pixelRatio}},my=class extends Qe{constructor(){super(89,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},gy=class extends Qe{defaultValue;constructor(){let e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[c("on","Quick suggestions show inside the suggest widget"),c("inline","Quick suggestions show as ghost text"),c("off","Quick suggestions are disabled")]}];super(91,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:c("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:c("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:c("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:c("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){let d=e?"on":"off";return{comments:d,strings:d,other:d}}if(!e||typeof e!="object")return this.defaultValue;let{other:t,comments:n,strings:i}=e,o=["on","inline","off"],s,a,l;return typeof t=="boolean"?s=t?"on":"off":s=ht(t,this.defaultValue.other,o),typeof n=="boolean"?a=n?"on":"off":a=ht(n,this.defaultValue.comments,o),typeof i=="boolean"?l=i?"on":"off":l=ht(i,this.defaultValue.strings,o),{other:s,comments:a,strings:l}}};var fy=class extends Qe{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[c("lineNumbers.off","Line numbers are not rendered."),c("lineNumbers.on","Line numbers are rendered as absolute number."),c("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),c("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:c("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}};var by=class extends Qe{constructor(){let e=[],t={type:"number",description:c("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(104,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:c("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:c("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:Ge.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){let i=n;t.push({column:Ge.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}},vy=class extends Qe{constructor(){super(94,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function Hk(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}var Iy=class extends Qe{constructor(){let e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(105,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[c("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),c("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),c("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:c("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[c("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),c("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),c("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:c("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:c("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:c("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:c("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:c("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e,n=Ge.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Ge.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ge.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Hk(t.vertical,this.defaultValue.vertical),horizontal:Hk(t.horizontal,this.defaultValue.horizontal),useShadows:re(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:re(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:re(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:re(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:re(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Ge.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Ge.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:re(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:re(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},mr="inUntrustedWorkspace",wa={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},yy=class extends Qe{constructor(){let e={nonBasicASCII:mr,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:mr,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(127,"unicodeHighlight",e,{[wa.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,mr],default:e.nonBasicASCII,description:c("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[wa.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:c("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[wa.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:c("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[wa.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,mr],default:e.includeComments,description:c("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[wa.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,mr],default:e.includeStrings,description:c("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[wa.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:c("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[wa.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:c("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(Cn(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(Cn(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));let i=super.applyUpdate(e,t);return n?new jl(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{nonBasicASCII:Xl(t.nonBasicASCII,mr,[!0,!1,mr]),invisibleCharacters:re(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:re(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Xl(t.includeComments,mr,[!0,!1,mr]),includeStrings:Xl(t.includeStrings,mr,[!0,!1,mr]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;let n={};for(let[i,o]of Object.entries(e))o===!0&&(n[i]=!0);return n}},xy=class extends Qe{constructor(){let e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1};super(63,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:c("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[c("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),c("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),c("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:c("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:c("inlineSuggest.syntaxHighlightingEnabled","Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:c("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:c("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),mode:ht(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:ht(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:re(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:re(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:cn.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:re(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled)}}},Sy=class extends Qe{constructor(){let e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(64,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:c("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[c("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),c("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),c("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:c("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:c("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),showToolbar:ht(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:cn.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:re(t.keepOnBlur,this.defaultValue.keepOnBlur)}}},Cy=class extends Qe{constructor(){let e={enabled:Gr.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Gr.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:c("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:re(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},Ey=class extends Qe{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[c("editor.guides.bracketPairs.true","Enables bracket pair guides."),c("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),c("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:c("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[c("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),c("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),c("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:c("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:c("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:c("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[c("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),c("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),c("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:c("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{bracketPairs:Xl(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Xl(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:re(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:re(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Xl(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Xl(r,e,t){let n=t.indexOf(r);return n===-1?e:t[n]}var Ty=class extends Qe{constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(120,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[c("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),c("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:c("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:c("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:c("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:c("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[c("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),c("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),c("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),c("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:c("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:c("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:c("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:c("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:c("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:c("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:c("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:c("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertMode:ht(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:re(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:re(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:re(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:re(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:ht(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:re(t.showIcons,this.defaultValue.showIcons),showStatusBar:re(t.showStatusBar,this.defaultValue.showStatusBar),preview:re(t.preview,this.defaultValue.preview),previewMode:ht(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:re(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:re(t.showMethods,this.defaultValue.showMethods),showFunctions:re(t.showFunctions,this.defaultValue.showFunctions),showConstructors:re(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:re(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:re(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:re(t.showFields,this.defaultValue.showFields),showVariables:re(t.showVariables,this.defaultValue.showVariables),showClasses:re(t.showClasses,this.defaultValue.showClasses),showStructs:re(t.showStructs,this.defaultValue.showStructs),showInterfaces:re(t.showInterfaces,this.defaultValue.showInterfaces),showModules:re(t.showModules,this.defaultValue.showModules),showProperties:re(t.showProperties,this.defaultValue.showProperties),showEvents:re(t.showEvents,this.defaultValue.showEvents),showOperators:re(t.showOperators,this.defaultValue.showOperators),showUnits:re(t.showUnits,this.defaultValue.showUnits),showValues:re(t.showValues,this.defaultValue.showValues),showConstants:re(t.showConstants,this.defaultValue.showConstants),showEnums:re(t.showEnums,this.defaultValue.showEnums),showEnumMembers:re(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:re(t.showKeywords,this.defaultValue.showKeywords),showWords:re(t.showWords,this.defaultValue.showWords),showColors:re(t.showColors,this.defaultValue.showColors),showFiles:re(t.showFiles,this.defaultValue.showFiles),showReferences:re(t.showReferences,this.defaultValue.showReferences),showFolders:re(t.showFolders,this.defaultValue.showFolders),showTypeParameters:re(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:re(t.showSnippets,this.defaultValue.showSnippets),showUsers:re(t.showUsers,this.defaultValue.showUsers),showIssues:re(t.showIssues,this.defaultValue.showIssues)}}},wy=class extends Qe{constructor(){super(115,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:c("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:c("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:re(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:re(e.selectSubwords,this.defaultValue.selectSubwords)}}},ky=class extends Qe{constructor(){let e=[];super(132,"wordSegmenterLocales",e,{anyOf:[{description:c("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:c("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}};var Dy=class extends Qe{constructor(){super(140,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[c("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),c("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),c("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),c("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:c("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}},_y=class extends ka{constructor(){super(148)}compute(e,t,n){let i=t.get(147);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},Ry=class extends Qe{constructor(){let e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:c("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[c("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),c("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),showDropSelector:ht(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},Py=class extends Qe{constructor(){let e={enabled:!0,showPasteSelector:"afterPaste"};super(86,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:c("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[c("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),c("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:re(t.enabled,this.defaultValue.enabled),showPasteSelector:ht(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},CO="Consolas, 'Courier New', monospace",EO="Menlo, Monaco, 'Courier New', monospace",TO="'Droid Sans Mono', 'monospace', monospace",$r={fontFamily:Fe?EO:on?TO:CO,fontWeight:"normal",fontSize:Fe?12:14,lineHeight:0,letterSpacing:0},wO=[];function M(r){return wO[r.id]=r,r}var dO={acceptSuggestionOnCommitCharacter:M(new Te(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:c("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:M(new rt(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",c("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:c("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:M(new GI),accessibilityPageSize:M(new Ge(3,"accessibilityPageSize",10,1,1073741824,{description:c("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:M(new cn(4,"ariaLabel",c("editorViewAccessibleLabel","Editor content"))),ariaRequired:M(new Te(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:M(new Te(8,"screenReaderAnnounceInlineSuggestion",!0,{description:c("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:M(new rt(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),c("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:c("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:M(new rt(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),c("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:c("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:M(new rt(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",c("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:c("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:M(new rt(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",c("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:c("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:M(new rt(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),c("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:c("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:M(new ql(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],IO,{enumDescriptions:[c("editor.autoIndent.none","The editor will not insert indentation automatically."),c("editor.autoIndent.keep","The editor will keep the current line's indentation."),c("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),c("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),c("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:c("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:M(new Te(13,"automaticLayout",!1)),autoSurround:M(new rt(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[c("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),c("editor.autoSurround.quotes","Surround with quotes but not brackets."),c("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:c("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:M(new Cy),bracketPairGuides:M(new Ey),stickyTabStops:M(new Te(118,"stickyTabStops",!1,{description:c("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:M(new Te(17,"codeLens",!0,{description:c("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:M(new cn(18,"codeLensFontFamily","",{description:c("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:M(new Ge(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:c("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:M(new Te(20,"colorDecorators",!0,{description:c("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:M(new rt(150,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[c("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),c("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),c("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:c("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:M(new Ge(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:c("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:M(new Te(22,"columnSelection",!1,{description:c("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:M(new qI),contextmenu:M(new Te(24,"contextmenu",!0)),copyWithSyntaxHighlighting:M(new Te(25,"copyWithSyntaxHighlighting",!0,{description:c("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:M(new ql(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],yO,{description:c("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:M(new rt(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[c("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),c("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),c("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:c("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:M(new ql(28,"cursorStyle",1,"line",["line","block","underline","line-thin","block-outline","underline-thin"],xO,{description:c("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:M(new Ge(29,"cursorSurroundingLines",0,0,1073741824,{description:c("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:M(new rt(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[c("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),c("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:c("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:M(new Ge(31,"cursorWidth",0,0,1073741824,{markdownDescription:c("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:M(new Te(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:M(new Te(33,"disableMonospaceOptimizations",!1)),domReadOnly:M(new Te(34,"domReadOnly",!1)),dragAndDrop:M(new Te(35,"dragAndDrop",!0,{description:c("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:M(new XI),dropIntoEditor:M(new Ry),experimentalEditContextEnabled:M(new Te(37,"experimentalEditContextEnabled",!1,{description:c("experimentalEditContextEnabled","Sets whether the new experimental edit context should be used instead of the text area.")})),stickyScroll:M(new sy),experimentalWhitespaceRendering:M(new rt(39,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[c("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),c("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),c("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:c("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:M(new cn(40,"extraEditorClassName","")),fastScrollSensitivity:M(new ji(41,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:c("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:M(new QI),fixedOverflowWidgets:M(new Te(43,"fixedOverflowWidgets",!1)),folding:M(new Te(44,"folding",!0,{description:c("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:M(new rt(45,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[c("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),c("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:c("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:M(new Te(46,"foldingHighlight",!0,{description:c("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:M(new Te(47,"foldingImportsByDefault",!1,{description:c("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:M(new Ge(48,"foldingMaximumRegions",5e3,10,65e3,{description:c("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:M(new Te(49,"unfoldOnClickAfterEndOfLine",!1,{description:c("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:M(new cn(50,"fontFamily",$r.fontFamily,{description:c("fontFamily","Controls the font family.")})),fontInfo:M(new JI),fontLigatures2:M(new YI),fontSize:M(new ZI),fontWeight:M(new ey),fontVariations:M(new _m),formatOnPaste:M(new Te(56,"formatOnPaste",!1,{description:c("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:M(new Te(57,"formatOnType",!1,{description:c("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:M(new Te(58,"glyphMargin",!0,{description:c("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:M(new ty),hideCursorInOverviewRuler:M(new Te(60,"hideCursorInOverviewRuler",!1,{description:c("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:M(new ny),inDiffEditor:M(new Te(62,"inDiffEditor",!1)),letterSpacing:M(new ji(65,"letterSpacing",$r.letterSpacing,r=>ji.clamp(r,-5,20),{description:c("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:M(new oy),lineDecorationsWidth:M(new ly),lineHeight:M(new dy),lineNumbers:M(new fy),lineNumbersMinChars:M(new Ge(70,"lineNumbersMinChars",5,1,300)),linkedEditing:M(new Te(71,"linkedEditing",!1,{description:c("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:M(new Te(72,"links",!0,{description:c("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:M(new rt(73,"matchBrackets","always",["always","near","never"],{description:c("matchBrackets","Highlight matching brackets.")})),minimap:M(new cy),mouseStyle:M(new rt(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:M(new ji(76,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:c("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:M(new Te(77,"mouseWheelZoom",!1,{markdownDescription:Fe?c("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):c("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:M(new Te(78,"multiCursorMergeOverlapping",!0,{description:c("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:M(new ql(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],SO,{markdownEnumDescriptions:[c("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),c("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:c({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:M(new rt(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[c("multiCursorPaste.spread","Each cursor pastes a single line of the text."),c("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:c("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:M(new Ge(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:c("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:M(new rt(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[c("occurrencesHighlight.off","Does not highlight occurrences."),c("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),c("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:c("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:M(new Te(83,"overviewRulerBorder",!0,{description:c("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:M(new Ge(84,"overviewRulerLanes",3,0,3)),padding:M(new uy),pasteAs:M(new Py),parameterHints:M(new py),peekWidgetDefaultFocus:M(new rt(88,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[c("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),c("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:c("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:M(new my),definitionLinkOpensInPeek:M(new Te(90,"definitionLinkOpensInPeek",!1,{description:c("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:M(new gy),quickSuggestionsDelay:M(new Ge(92,"quickSuggestionsDelay",10,0,1073741824,{description:c("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:M(new Te(93,"readOnly",!1)),readOnlyMessage:M(new vy),renameOnType:M(new Te(95,"renameOnType",!1,{description:c("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:c("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:M(new Te(96,"renderControlCharacters",!0,{description:c("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:M(new rt(97,"renderFinalNewline",on?"dimmed":"on",["off","on","dimmed"],{description:c("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:M(new rt(98,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",c("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:c("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:M(new Te(99,"renderLineHighlightOnlyWhenFocus",!1,{description:c("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:M(new rt(100,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:M(new rt(101,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",c("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),c("renderWhitespace.selection","Render whitespace characters only on selected text."),c("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:c("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:M(new Ge(102,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:M(new Te(103,"roundedSelection",!0,{description:c("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:M(new by),scrollbar:M(new Iy),scrollBeyondLastColumn:M(new Ge(106,"scrollBeyondLastColumn",4,0,1073741824,{description:c("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:M(new Te(107,"scrollBeyondLastLine",!0,{description:c("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:M(new Te(108,"scrollPredominantAxis",!0,{description:c("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:M(new Te(109,"selectionClipboard",!0,{description:c("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:on})),selectionHighlight:M(new Te(110,"selectionHighlight",!0,{description:c("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:M(new Te(111,"selectOnLineNumbers",!0)),showFoldingControls:M(new rt(112,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[c("showFoldingControls.always","Always show the folding controls."),c("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),c("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:c("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:M(new Te(113,"showUnused",!0,{description:c("showUnused","Controls fading out of unused code.")})),showDeprecated:M(new Te(142,"showDeprecated",!0,{description:c("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:M(new ay),snippetSuggestions:M(new rt(114,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[c("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),c("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),c("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),c("snippetSuggestions.none","Do not show snippet suggestions.")],description:c("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:M(new wy),smoothScrolling:M(new Te(116,"smoothScrolling",!1,{description:c("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:M(new Ge(119,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:M(new Ty),inlineSuggest:M(new xy),inlineEdit:M(new Sy),inlineCompletionsAccessibilityVerbose:M(new Te(151,"inlineCompletionsAccessibilityVerbose",!1,{description:c("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:M(new Ge(121,"suggestFontSize",0,0,1e3,{markdownDescription:c("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:M(new Ge(122,"suggestLineHeight",0,0,1e3,{markdownDescription:c("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:M(new Te(123,"suggestOnTriggerCharacters",!0,{description:c("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:M(new rt(124,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[c("suggestSelection.first","Always select the first suggestion."),c("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),c("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:c("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:M(new rt(125,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[c("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),c("tabCompletion.off","Disable tab completions."),c("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:c("tabCompletion","Enables tab completions.")})),tabIndex:M(new Ge(126,"tabIndex",0,-1,1073741824)),unicodeHighlight:M(new yy),unusualLineTerminators:M(new rt(128,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[c("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),c("unusualLineTerminators.off","Unusual line terminators are ignored."),c("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:c("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:M(new Te(129,"useShadowDOM",!0)),useTabStops:M(new Te(130,"useTabStops",!0,{description:c("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:M(new rt(131,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[c("wordBreak.normal","Use the default line break rule."),c("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:c("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:M(new ky),wordSeparators:M(new cn(133,"wordSeparators",WI,{description:c("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:M(new rt(134,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[c("wordWrap.off","Lines will never wrap."),c("wordWrap.on","Lines will wrap at the viewport width."),c({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),c({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:c({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:M(new cn(135,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:M(new cn(136,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:M(new Ge(137,"wordWrapColumn",80,1,1073741824,{markdownDescription:c({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:M(new rt(138,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:M(new rt(139,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:M(new jI),defaultColorDecorators:M(new Te(149,"defaultColorDecorators",!1,{markdownDescription:c("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:M(new hy),tabFocusMode:M(new Te(146,"tabFocusMode",!1,{markdownDescription:c("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:M(new iy),wrappingInfo:M(new _y),wrappingIndent:M(new Dy),wrappingStrategy:M(new ry)};var Se=class r{lineNumber;column;constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new r(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return r.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return r.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return r.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){let o=e.column|0,s=t.column|0;return o-s}return n-i}clone(){return new r(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new r(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var $=class r{startLineNumber;startColumn;endLineNumber;endColumn;constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return r.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return r.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return r.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return r.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return r.plusRange(this,e)}static plusRange(e,t){let n,i,o,s;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new r(n,i,o,s)}intersectRanges(e){return r.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,l=t.startColumn,d=t.endLineNumber,u=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),o>d?(o=d,s=u):o===d&&(s=Math.min(s,u)),n>o||n===o&&i>s?null:new r(n,i,o,s)}equalsRange(e){return r.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return r.getEndPosition(this)}static getEndPosition(e){return new Se(e.endLineNumber,e.endColumn)}getStartPosition(){return r.getStartPosition(this)}static getStartPosition(e){return new Se(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new r(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new r(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return r.collapseToStart(this)}static collapseToStart(e){return new r(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return r.collapseToEnd(this)}static collapseToEnd(e){return new r(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new r(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){let o=e.startLineNumber|0,s=t.startLineNumber|0;if(o===s){let a=e.startColumn|0,l=t.startColumn|0;if(a===l){let d=e.endLineNumber|0,u=t.endLineNumber|0;if(d===u){let p=e.endColumn|0,h=t.endColumn|0;return p-h}return d-u}return a-l}return o-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var vs=class r extends ${selectionStartLineNumber;selectionStartColumn;positionLineNumber;positionColumn;constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return r.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new r(this.startLineNumber,this.startColumn,e,t):new r(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Se(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Se(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new r(e,t,this.endLineNumber,this.endColumn):new r(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new r(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new r(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,o){return o===0?new r(e,t,n,i):new r(n,i,e,t)}};var gr=class{originalStart;originalLength;modifiedStart;modifiedLength;constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}};var Is=class{static Assert(e,t){if(!e)throw new Error(t)}},ys=class{static Copy(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}static Copy2(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}};var Vm=class{m_changes;m_originalStart;m_modifiedStart;m_originalCount;m_modifiedCount;constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new gr(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},Iu=class r{ContinueProcessingPredicate;_originalSequence;_modifiedSequence;_hasStrings;_originalStringElements;_originalElementsOrHash;_modifiedStringElements;_modifiedElementsOrHash;m_forwardHistory;m_reverseHistory;constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;let[i,o,s]=r._getElements(e),[a,l,d]=r._getElements(t);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){let t=e.getElements();if(r._isStringArray(t)){let n=new Int32Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=zc(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;let n=r._getStrictElement(this._originalSequence,e),i=r._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,o){let s=[!1],a=this.ComputeDiffRecursive(e,t,n,i,s);return o&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,n,i,o){for(o[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let p;return n<=i?(Is.Assert(e===t+1,"originalStart should only be one more than originalEnd"),p=[new gr(e,0,n,i-n+1)]):e<=t?(Is.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),p=[new gr(e,t-e+1,n,0)]):(Is.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Is.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),p=[]),p}let s=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,s,a,o),d=s[0],u=a[0];if(l!==null)return l;if(!o[0]){let p=this.ComputeDiffRecursive(e,d,n,u,o),h=[];return o[0]?h=[new gr(d+1,t-(d+1)+1,u+1,i-(u+1)+1)]:h=this.ComputeDiffRecursive(d+1,t,u+1,i,o),this.ConcatenateChanges(p,h)}return[new gr(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,o,s,a,l,d,u,p,h,g,b,f,v,D,R){let A=null,B=null,W=new Vm,H=t,ue=n,Y=g[0]-v[0]-i,oe=-1073741824,de=this.m_forwardHistory.length-1;do{let be=Y+e;be===H||be<ue&&d[be-1]<d[be+1]?(p=d[be+1],b=p-Y-i,p<oe&&W.MarkNextChange(),oe=p,W.AddModifiedElement(p+1,b),Y=be+1-e):(p=d[be-1]+1,b=p-Y-i,p<oe&&W.MarkNextChange(),oe=p-1,W.AddOriginalElement(p,b+1),Y=be-1-e),de>=0&&(d=this.m_forwardHistory[de],e=d[0],H=1,ue=d.length-1)}while(--de>=-1);if(A=W.getReverseChanges(),R[0]){let be=g[0]+1,ge=v[0]+1;if(A!==null&&A.length>0){let Ye=A[A.length-1];be=Math.max(be,Ye.getOriginalEnd()),ge=Math.max(ge,Ye.getModifiedEnd())}B=[new gr(be,h-be+1,ge,f-ge+1)]}else{W=new Vm,H=s,ue=a,Y=g[0]-v[0]-l,oe=1073741824,de=D?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let be=Y+o;be===H||be<ue&&u[be-1]>=u[be+1]?(p=u[be+1]-1,b=p-Y-l,p>oe&&W.MarkNextChange(),oe=p+1,W.AddOriginalElement(p+1,b+1),Y=be+1-o):(p=u[be-1],b=p-Y-l,p>oe&&W.MarkNextChange(),oe=p,W.AddModifiedElement(p+1,b+1),Y=be-1-o),de>=0&&(u=this.m_reverseHistory[de],o=u[0],H=1,ue=u.length-1)}while(--de>=-1);B=W.getChanges()}return this.ConcatenateChanges(A,B)}ComputeRecursionPoint(e,t,n,i,o,s,a){let l=0,d=0,u=0,p=0,h=0,g=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let b=t-e+(i-n),f=b+1,v=new Int32Array(f),D=new Int32Array(f),R=i-n,A=t-e,B=e-n,W=t-i,ue=(A-R)%2===0;v[R]=e,D[A]=t,a[0]=!1;for(let Y=1;Y<=b/2+1;Y++){let oe=0,de=0;u=this.ClipDiagonalBound(R-Y,Y,R,f),p=this.ClipDiagonalBound(R+Y,Y,R,f);for(let ge=u;ge<=p;ge+=2){ge===u||ge<p&&v[ge-1]<v[ge+1]?l=v[ge+1]:l=v[ge-1]+1,d=l-(ge-R)-B;let Ye=l;for(;l<t&&d<i&&this.ElementsAreEqual(l+1,d+1);)l++,d++;if(v[ge]=l,l+d>oe+de&&(oe=l,de=d),!ue&&Math.abs(ge-A)<=Y-1&&l>=D[ge])return o[0]=l,s[0]=d,Ye<=D[ge]&&Y<=1448?this.WALKTRACE(R,u,p,B,A,h,g,W,v,D,l,t,o,d,i,s,ue,a):null}let be=(oe-e+(de-n)-Y)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(oe,be))return a[0]=!0,o[0]=oe,s[0]=de,be>0&&Y<=1448?this.WALKTRACE(R,u,p,B,A,h,g,W,v,D,l,t,o,d,i,s,ue,a):(e++,n++,[new gr(e,t-e+1,n,i-n+1)]);h=this.ClipDiagonalBound(A-Y,Y,A,f),g=this.ClipDiagonalBound(A+Y,Y,A,f);for(let ge=h;ge<=g;ge+=2){ge===h||ge<g&&D[ge-1]>=D[ge+1]?l=D[ge+1]-1:l=D[ge-1],d=l-(ge-A)-W;let Ye=l;for(;l>e&&d>n&&this.ElementsAreEqual(l,d);)l--,d--;if(D[ge]=l,ue&&Math.abs(ge-R)<=Y&&l<=v[ge])return o[0]=l,s[0]=d,Ye>=v[ge]&&Y<=1448?this.WALKTRACE(R,u,p,B,A,h,g,W,v,D,l,t,o,d,i,s,ue,a):null}if(Y<=1447){let ge=new Int32Array(p-u+2);ge[0]=R-u+1,ys.Copy2(v,u,ge,1,p-u+1),this.m_forwardHistory.push(ge),ge=new Int32Array(g-h+2),ge[0]=A-h+1,ys.Copy2(D,h,ge,1,g-h+1),this.m_reverseHistory.push(ge)}}return this.WALKTRACE(R,u,p,B,A,h,g,W,v,D,l,t,o,d,i,s,ue,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){let d=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!d)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let n=e[t],i=0,o=0;if(t>0){let p=e[t-1];i=p.originalStart+p.originalLength,o=p.modifiedStart+p.modifiedLength}let s=n.originalLength>0,a=n.modifiedLength>0,l=0,d=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let p=1;;p++){let h=n.originalStart-p,g=n.modifiedStart-p;if(h<i||g<o||s&&!this.OriginalElementsAreEqual(h,h+n.originalLength)||a&&!this.ModifiedElementsAreEqual(g,g+n.modifiedLength))break;let f=(h===i&&g===o?5:0)+this._boundaryScore(h,n.originalLength,g,n.modifiedLength);f>d&&(d=f,l=p)}n.originalStart-=l,n.modifiedStart-=l;let u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){let i=e[t-1],o=e[t],s=o.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=o.originalStart+o.originalLength,d=l-a,u=i.modifiedStart,p=o.modifiedStart+o.modifiedLength,h=p-u;if(s<5&&d<20&&h<20){let g=this._findBetterContiguousSequence(a,d,u,h,s);if(g){let[b,f]=g;(b!==i.originalStart+i.originalLength||f!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=b-i.originalStart,i.modifiedLength=f-i.modifiedStart,o.originalStart=b+s,o.modifiedStart=f+s,o.originalLength=l-o.originalStart,o.modifiedLength=p-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,o){if(t<o||i<o)return null;let s=e+t-o+1,a=n+i-o+1,l=0,d=0,u=0;for(let p=e;p<s;p++)for(let h=n;h<a;h++){let g=this._contiguousSequenceScore(p,h,o);g>0&&g>l&&(l=g,d=p,u=h)}return l>0?[d,u]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){let o=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(n,i)?1:0;return o+s}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){let i=new Array(e.length+t.length-1);return ys.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],ys.Copy(t,1,i,e.length,t.length-1),i}else{let i=new Array(e.length+t.length);return ys.Copy(e,0,i,0,e.length),ys.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(Is.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Is.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new gr(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=t%2===0;if(e<0){let l=o%2===0;return a===l?0:1}else{let l=s%2===0;return a===l?i-1:i-2}}};var Re=class r{constructor(e,t){this.start=e;this.endExclusive=t;if(e>t)throw new He(`Invalid range: ${this.toString()}`)}static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let i=n;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(n===i)t.splice(n,0,e);else{let o=Math.min(e.start,t[n].start),s=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(n,i-n,new r(o,s))}}static tryCreate(e,t){if(!(e>t))return new r(e,t)}static ofLength(e){return new r(0,e)}static ofStartAndLength(e,t){return new r(e,e+t)}static emptyAt(e){return new r(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new r(this.start+e,this.endExclusive+e)}deltaStart(e){return new r(this.start+e,this.endExclusive)}deltaEnd(e){return new r(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new r(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new r(t,n)}intersectionLength(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-t)}intersects(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}intersectsOrTouches(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new He(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new He(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let t=[];for(let n=this.start;n<this.endExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}};var wn=class r{static fromRange(e){return new r(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new r(e.startLineNumber,e.endLineNumber+1)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new r(e.startLineNumber,t.startLineNumber),new r(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new r(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new r(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=new zm(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new zm(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new He("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)t=Math.min(t,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new r(t,n)}static ofLength(e,t){return new r(e,e+t)}static deserialize(e){return new r(e[0],e[1])}startLineNumber;endLineNumberExclusive;constructor(e,t){if(e>t)throw new He(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new r(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new r(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new r(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new r(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new $(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new $(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Re(this.startLineNumber-1,this.endLineNumberExclusive-1)}},zm=class r{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let t=qp(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=dc(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){let i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{let i=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,i)}}contains(e){let t=Hb(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=Hb(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let t=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[n],l=e._normalizedRanges[i];a.startLineNumber<l.startLineNumber?(s=a,n++):(s=l,i++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[i],i++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new wn(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(t.push(o),o=s)}return o!==null&&t.push(o),new r(t)}subtractFrom(e){let t=qp(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=dc(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new r([e]);let i=[],o=e.startLineNumber;for(let s=t;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>o&&i.push(new wn(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new wn(o,e.endLineNumberExclusive)),new r(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let t=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],s=e._normalizedRanges[i],a=o.intersect(s);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<s.endLineNumberExclusive?n++:i++}return new r(t)}getWithDelta(e){return new r(this._normalizedRanges.map(t=>t.delta(e)))}};var Ql=class r{constructor(e,t){this.lineCount=e;this.columnCount=t}static zero=new r(0,0);static lengthDiffNonNegative(e,t){return t.isLessThan(e)?r.zero:e.lineCount===t.lineCount?new r(0,t.columnCount-e.columnCount):new r(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new r(0,t.column-e.column):new r(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return r.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(let i of e)i===`
`?(t++,n=0):n++;return new r(t,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new r(this.lineCount,this.columnCount+e.columnCount):new r(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new $(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new $(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new $(1,1,this.lineCount+1,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new Se(e.lineNumber,e.column+this.columnCount):new Se(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};var Ly;function Kk(){return Ly||(Ly=new TextDecoder("UTF-16LE")),Ly}var Oy;function DO(){return Oy||(Oy=new TextDecoder("UTF-16BE")),Oy}var Ay;function $k(){return Ay||(Ay=AE()?Kk():DO()),Ay}function Gk(r,e,t){let n=new Uint16Array(r.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?_O(r,e,t):Kk().decode(n)}function _O(r,e,t){let n=[],i=0;for(let o=0;o<t;o++){let s=Aw(r,e);e+=2,n[i++]=String.fromCharCode(s)}return n.join("")}function Hm(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var pi=class r{constructor(e,t,n,i){this.oldPosition=e;this.oldText=t;this.newPosition=n;this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Hm(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Hm(this.oldText)}")`:`(replace@${this.oldPosition} "${Hm(this.oldText)}" with "${Hm(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){let i=t.length;Gt(e,i,n),n+=4;for(let o=0;o<i;o++)Mw(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){let n=$t(e,t);return t+=4,Gk(e,t,n)}writeSize(){return 8+r._writeStringSize(this.oldText)+r._writeStringSize(this.newText)}write(e,t){return Gt(e,this.oldPosition,t),t+=4,Gt(e,this.newPosition,t),t+=4,t=r._writeString(e,this.oldText,t),t=r._writeString(e,this.newText,t),t}static read(e,t,n){let i=$t(e,t);t+=4;let o=$t(e,t);t+=4;let s=r._readString(e,t);t+=r._writeStringSize(s);let a=r._readString(e,t);return t+=r._writeStringSize(a),n.push(new r(i,s,o,a)),t}};function qk(r,e){return r===null||r.length===0?e:new My(r,e).compress()}var My=class r{_prevEdits;_currEdits;_result;_resultLen;_prevLen;_prevDeltaOffset;_currLen;_currDeltaOffset;constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){let[d,u]=r._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(d),i=u;continue}if(n.newPosition<i.oldPosition){let[d,u]=r._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(d),n=u;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){let[d,u]=r._splitPrev(n,i.oldLength);a=d,l=i,n=u,i=this._getCurr(++t)}else{let[d,u]=r._splitCurr(i,n.newLength);a=n,l=d,n=this._getPrev(++e),i=u}this._result[this._resultLen++]=new pi(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}let o=r._merge(this._result);return r._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=r._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=r._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new pi(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new pi(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let n=e.newText.substr(0,t),i=e.newText.substr(t);return[new pi(e.oldPosition,e.oldText,e.newPosition,n),new pi(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){let n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new pi(e.oldPosition,n,e.newPosition,e.newText),new pi(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,i=e[0];for(let o=1;o<e.length;o++){let s=e[o];i.oldEnd===s.oldPosition?i=new pi(i.oldPosition,i.oldText+s.oldText,i.newPosition,i.newText+s.newText):(t[n++]=i,i=s)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let i=0;i<e.length;i++){let o=e[i];o.oldText!==o.newText&&(t[n++]=o)}return t}};var Km=class r{_asciiMap;_map;_defaultValue;constructor(e){let t=wv(e);this._defaultValue=t,this._asciiMap=r._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let n=wv(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}};var Ny=class extends Km{intlSegmenterLocales;_segmenter=null;_cachedLine=null;_cachedSegments=[];constructor(e,t){super(0),this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,i=e.length;n<i;n++)this.set(e.charCodeAt(n),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(let i of this._getIntlSegmenterWordsOnLine(e)){if(i.index>t)break;n=i}return n}findNextIntlWordAtOrAfterOffset(e,t){for(let n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){let t=[];for(let n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}},jk=new Ui(10);function Xk(r,e){let t=`${r}/${e.join(",")}`,n=jk.get(t);return n||(n=new Ny(r,e),jk.set(t,n)),n}function Ss(r,e){let t=Math.pow(10,e);return Math.round(r*t)/t}var Ce=class{_rgbaBrand=void 0;r;g;b;a;constructor(e,t,n,i=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Ss(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},xs=class r{_hslaBrand=void 0;h;s;l;a;constructor(e,t,n,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Ss(Math.max(Math.min(1,t),0),3),this.l=Ss(Math.max(Math.min(1,n),0),3),this.a=Ss(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,i=e.b/255,o=e.a,s=Math.max(t,n,i),a=Math.min(t,n,i),l=0,d=0,u=(a+s)/2,p=s-a;if(p>0){switch(d=Math.min(u<=.5?p/(2*u):p/(2-2*u),1),s){case t:l=(n-i)/p+(n<i?6:0);break;case n:l=(i-t)/p+2;break;case i:l=(t-n)/p+4;break}l*=60,l=Math.round(l)}return new r(l,d,u,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){let t=e.h/360,{s:n,l:i,a:o}=e,s,a,l;if(n===0)s=a=l=i;else{let d=i<.5?i*(1+n):i+n-i*n,u=2*i-d;s=r._hue2rgb(u,d,t+1/3),a=r._hue2rgb(u,d,t),l=r._hue2rgb(u,d,t-1/3)}return new Ce(Math.round(s*255),Math.round(a*255),Math.round(l*255),o)}},Yl=class r{_hsvaBrand=void 0;h;s;v;a;constructor(e,t,n,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Ss(Math.max(Math.min(1,t),0),3),this.v=Ss(Math.max(Math.min(1,n),0),3),this.a=Ss(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(t,n,i),s=Math.min(t,n,i),a=o-s,l=o===0?0:a/o,d;return a===0?d=0:o===t?d=((n-i)/a%6+6)%6:o===n?d=(i-t)/a+2:d=(t-n)/a+4,new r(Math.round(d*60),l,o,e.a)}static toRGBA(e){let{h:t,s:n,v:i,a:o}=e,s=i*n,a=s*(1-Math.abs(t/60%2-1)),l=i-s,[d,u,p]=[0,0,0];return t<60?(d=s,u=a):t<120?(d=a,u=s):t<180?(u=s,p=a):t<240?(u=a,p=s):t<300?(d=a,p=s):t<=360&&(d=s,p=a),d=Math.round((d+l)*255),u=Math.round((u+l)*255),p=Math.round((p+l)*255),new Ce(d,u,p,o)}},F=class r{static fromHex(e){return r.Format.CSS.parseHex(e)||r.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}rgba;_hsla;get hsla(){return this._hsla?this._hsla:xs.fromRGBA(this.rgba)}_hsva;get hsva(){return this._hsva?this._hsva:Yl.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Ce)this.rgba=e;else if(e instanceof xs)this._hsla=e,this.rgba=xs.toRGBA(e);else if(e instanceof Yl)this._hsva=e,this.rgba=Yl.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Ce.equals(this.rgba,e.rgba)&&xs.equals(this.hsla,e.hsla)&&Yl.equals(this.hsva,e.hsva)}getRelativeLuminance(){let e=r._relativeLuminanceForComponent(this.rgba.r),t=r._relativeLuminanceForComponent(this.rgba.g),n=r._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return Ss(i,4)}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new r(new xs(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new r(new xs(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){let{r:t,g:n,b:i,a:o}=this.rgba;return new r(new Ce(t,n,i,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new r(new Ce(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){let t=e.rgba,n=this.rgba.a,i=t.a,o=n+i*(1-n);if(o<1e-6)return r.transparent;let s=this.rgba.r*n/o+t.r*i*(1-n)/o,a=this.rgba.g*n/o+t.g*i*(1-n)/o,l=this.rgba.b*n/o+t.b*i*(1-n)/o;return new r(new Ce(s,a,l,o))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;let{r:t,g:n,b:i,a:o}=this.rgba;return new r(new Ce(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-n),e.rgba.b-o*(e.rgba.b-i),1))}flatten(...e){let t=e.reduceRight((n,i)=>r._flatten(i,n));return r._flatten(this,t)}static _flatten(e,t){let n=1-e.rgba.a;return new r(new Ce(n*t.rgba.r+e.rgba.a*e.rgba.r,n*t.rgba.g+e.rgba.a*e.rgba.g,n*t.rgba.b+e.rgba.a*e.rgba.b))}_toString;toString(){return this._toString||(this._toString=r.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;let i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-i)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;let i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(i-o)/i,e.darken(n)}static white=new r(new Ce(255,255,255,1));static black=new r(new Ce(0,0,0,1));static red=new r(new Ce(255,0,0,1));static blue=new r(new Ce(0,0,255,1));static green=new r(new Ce(0,255,0,1));static cyan=new r(new Ce(0,255,255,1));static lightgrey=new r(new Ce(211,211,211,1));static transparent=new r(new Ce(0,0,0,0))};(e=>{let r;(n=>{let t;(b=>{function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:e.Format.CSS.formatRGBA(f)}b.formatRGB=i;function o(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}b.formatRGBA=o;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:e.Format.CSS.formatHSLA(f)}b.formatHSL=s;function a(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}b.formatHSLA=a;function l(f){let v=f.toString(16);return v.length!==2?"0"+v:v}function d(f){return`#${l(f.rgba.r)}${l(f.rgba.g)}${l(f.rgba.b)}`}b.formatHex=d;function u(f,v=!1){return v&&f.rgba.a===1?e.Format.CSS.formatHex(f):`#${l(f.rgba.r)}${l(f.rgba.g)}${l(f.rgba.b)}${l(Math.round(f.rgba.a*255))}`}b.formatHexA=u;function p(f){return f.isOpaque()?e.Format.CSS.formatHex(f):e.Format.CSS.formatRGBA(f)}b.format=p;function h(f){let v=f.length;if(v===0||f.charCodeAt(0)!==35)return null;if(v===7){let D=16*g(f.charCodeAt(1))+g(f.charCodeAt(2)),R=16*g(f.charCodeAt(3))+g(f.charCodeAt(4)),A=16*g(f.charCodeAt(5))+g(f.charCodeAt(6));return new e(new Ce(D,R,A,1))}if(v===9){let D=16*g(f.charCodeAt(1))+g(f.charCodeAt(2)),R=16*g(f.charCodeAt(3))+g(f.charCodeAt(4)),A=16*g(f.charCodeAt(5))+g(f.charCodeAt(6)),B=16*g(f.charCodeAt(7))+g(f.charCodeAt(8));return new e(new Ce(D,R,A,B/255))}if(v===4){let D=g(f.charCodeAt(1)),R=g(f.charCodeAt(2)),A=g(f.charCodeAt(3));return new e(new Ce(16*D+D,16*R+R,16*A+A))}if(v===5){let D=g(f.charCodeAt(1)),R=g(f.charCodeAt(2)),A=g(f.charCodeAt(3)),B=g(f.charCodeAt(4));return new e(new Ce(16*D+D,16*R+R,16*A+A,(16*B+B)/255))}return null}b.parseHex=h;function g(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(t=n.CSS||={})})(r=e.Format||={})})(F||={});var PO=Object.freeze({create:r=>Hn(r.map(e=>e.toString())).join(`\r
`),split:r=>r.split(`\r
`),parse:r=>PO.split(r).filter(e=>!e.startsWith("#"))});var Qk=class r{constructor(e){this.value=e}static sep=".";static None=new r("@@none@@");static Empty=new r("");equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+r.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new r((this.value?[this.value,...e]:e).join(r.sep))}};var hi=class{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){let n=this.getForeground(e),i=this.getFontStyle(e),o=`color: ${t[n]};`;i&1&&(o+="font-style: italic;"),i&2&&(o+="font-weight: bold;");let s="";return i&4&&(s+=" underline"),i&8&&(s+=" line-through"),s&&(o+=`text-decoration:${s};`),o}static getPresentationFromMetadata(e){let t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}};function Fy(r,e,t,n,i,o){if(Array.isArray(r)){let s=0;for(let a of r){let l=Fy(a,e,t,n,i,o);if(l===10)return l;l>s&&(s=l)}return s}else{if(typeof r=="string")return n?r==="*"?5:r===t?10:0:0;if(r){let{language:s,pattern:a,scheme:l,hasAccessToAllModels:d,notebookType:u}=r;if(!n&&!d)return 0;u&&i&&(e=i);let p=0;if(l)if(l===e.scheme)p=10;else if(l==="*")p=5;else return 0;if(s)if(s===t)p=10;else if(s==="*")p=Math.max(p,5);else return 0;if(u)if(u===o)p=10;else if(u==="*"&&o!==void 0)p=Math.max(p,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h={...a,base:Ti(a.base)},h===e.fsPath||Po(h,e.fsPath))p=10;else return 0}return p}else return 0}}var yu=class{_tokenizationSupports=new Map;_factories=new Map;_onDidChange=new E;onDidChange=this._onDidChange.event;_colorMap;constructor(){this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),j(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();let n=new By(this,e,t);return this._factories.set(e,n),j(()=>{let i=this._factories.get(e);!i||i!==n||(this._factories.delete(e),i.dispose())})}async getOrCreate(e){let t=this.get(e);if(t)return t;let n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;let n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},By=class extends O{constructor(t,n,i){super();this._registry=t;this._languageId=n;this._factory=i}_isDisposed=!1;_resolvePromise=null;_isResolved=!1;get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){let t=await this._factory.tokenizationSupport;this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t))}};function Yn(r){let e=0,t=0,n=0,i=0;for(let o=0,s=r.length;o<s;o++){let a=r.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<s&&r.charCodeAt(o+1)===10?(i|=2,o++):i|=3,n=o+1):a===10&&(i|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=r.length),[e,t,r.length-n,i]}var Wy=class r{constructor(e){this._tokenInfo=e}static create(e){return new r(e)}forEach(e){let t=0;for(let n of this._tokenInfo){let i=new Re(t,t+n.length);e(i,n),t+=n.length}}slice(e){let t=[],n=0;for(let i of this._tokenInfo){let o=n,s=o+i.length;if(s>e.start){if(o>=e.endExclusive)break;let a=Math.max(0,e.start-o),l=Math.max(0,s-e.endExclusive);t.push(new $m(i.length-a-l,i.metadata))}n+=i.length}return r.create(t)}},$m=class{constructor(e,t){this.length=e;this.metadata=t}},Gm=class{_tokens=[];add(e,t){this._tokens.push(new $m(e,t))}build(){return Wy.create(this._tokens)}};var un=class r{static createEmpty(e,t){let n=r.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new r(i,e,t)}static createFromTextAndMetadata(e,t){let n=0,i="",o=new Array;for(let{text:s,metadata:a}of e)o.push(n+s.length,a),n+=s.length,i+=s;return new r(new Uint32Array(o),i,t)}static convertToEndOffset(e,t){let i=(e.length>>>1)-1;for(let o=0;o<i;o++)e[o<<1]=e[o+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){let o=n+Math.floor((i-n)/2),s=e[o<<1];if(s===t)return o+1;s<t?n=o+1:s>t&&(i=o)}return n}_lineTokensBrand=void 0;_tokens;_tokensCount;_text;languageIdCodec;static defaultTokenMetadata=(32768|2<<24)>>>0;constructor(e,t,n){this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof r?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let i=t<<1,o=i+(n<<1);for(let s=i;s<o;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],n=hi.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return hi.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return hi.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return hi.getClassNameFromMetadata(t)}getInlineStyle(e,t){let n=this._tokens[(e<<1)+1];return hi.getInlineStyleFromMetadata(n,t)}getPresentation(e){let t=this._tokens[(e<<1)+1];return hi.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return r.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new Vy(this,e,t,n)}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="",o=new Array,s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(s,a);let d=this._tokens[(t<<1)+1];o.push(i.length,d),t++,s=a}else if(l){if(l.offset>s){i+=this._text.substring(s,l.offset);let d=this._tokens[(t<<1)+1];o.push(i.length,d),s=l.offset}i+=l.text,o.push(i.length,l.tokenMetadata),n++}else break}return new r(new Uint32Array(o),i,this.languageIdCodec)}getTokensInRange(e){let t=new Gm,n=this.findTokenIndexAtOffset(e.start),i=this.findTokenIndexAtOffset(e.endExclusive);for(let o=n;o<=i;o++){let a=new Re(this.getStartOffset(o),this.getEndOffset(o)).intersectionLength(e);a>0&&t.add(a,this.getMetadata(o))}return t.build()}getTokenText(e){let t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){let t=this.getCount();for(let n=0;n<t;n++)e(n)}},Vy=class r{_source;_startOffset;_endOffset;_deltaOffset;_firstTokenIndex;_tokensCount;languageIdCodec;constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let o=this._firstTokenIndex,s=e.getCount();o<s&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof r?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){let t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),i=this._source.getEndOffset(t),o=this._source.getTokenText(t);return n<this._startOffset&&(o=o.substring(this._startOffset-n)),i>this._endOffset&&(o=o.substring(0,o.length-(i-this._endOffset))),o}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}};var qr=new Uint32Array(0).buffer,qt=class r{static deleteBeginning(e,t){return e===null||e===qr?e:r.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===qr)return e;let n=jr(e),i=n[n.length-2];return r.delete(e,t,i)}static delete(e,t,n){if(e===null||e===qr||t===n)return e;let i=jr(e),o=i.length>>>1;if(t===0&&i[i.length-2]===n)return qr;let s=un.findIndexInTokensArray(i,t),a=s>0?i[s-1<<1]:0,l=i[s<<1];if(n<l){let g=n-t;for(let b=s;b<o;b++)i[b<<1]-=g;return e}let d,u;a!==t?(i[s<<1]=t,d=s+1<<1,u=t):(d=s<<1,u=a);let p=n-t;for(let g=s+1;g<o;g++){let b=i[g<<1]-p;b>u&&(i[d++]=b,i[d++]=i[(g<<1)+1],u=b)}if(d===i.length)return e;let h=new Uint32Array(d);return h.set(i.subarray(0,d),0),h.buffer}static append(e,t){if(t===qr)return e;if(e===qr)return t;if(e===null)return e;if(t===null)return null;let n=jr(e),i=jr(t),o=i.length>>>1,s=new Uint32Array(n.length+i.length);s.set(n,0);let a=n.length,l=n[n.length-2];for(let d=0;d<o;d++)s[a++]=i[d<<1]+l,s[a++]=i[(d<<1)+1];return s.buffer}static insert(e,t,n){if(e===null||e===qr)return e;let i=jr(e),o=i.length>>>1,s=un.findIndexInTokensArray(i,t);s>0&&i[s-1<<1]===t&&s--;for(let a=s;a<o;a++)i[a<<1]+=n;return e}};function jr(r){return r instanceof Uint32Array?r:new Uint32Array(r)}var xu=class r{static deserialize(e,t,n){let i=new Uint32Array(e.buffer),o=$t(e,t);t+=4;let s=$t(e,t);t+=4;let a=[];for(let l=0;l<s;l++){let d=$t(e,t);t+=4,a.push(i.subarray(t/4,t/4+d/4)),t+=d}return n.push(new r(o,a)),t}_startLineNumber;_tokens;get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new wn(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){let n=this._tokens[t];if(!(n instanceof Uint32Array))throw new Error("Not supported!");e+=4,e+=n.byteLength}return e}serialize(e,t){Gt(e,this._startLineNumber,t),t+=4,Gt(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++){let i=this._tokens[n];if(!(i instanceof Uint32Array))throw new Error("Not supported!");Gt(e,i.byteLength,t),t+=4,e.set(new Uint8Array(i.buffer),t),t+=i.byteLength}return t}applyEdit(e,t){let[n,i]=Yn(t);this._acceptDeleteRange(e),this._acceptInsertText(new Se(e.startLineNumber,e.startColumn),n,i)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let i=n-t;this._startLineNumber-=i;return}if(!(t>=this._tokens.length)){if(t<0&&n>=this._tokens.length){this._startLineNumber=0,this._tokens=[];return}if(t===n){this._tokens[t]=qt.delete(this._tokens[t],e.startColumn-1,e.endColumn-1);return}if(t>=0)if(this._tokens[t]=qt.deleteEnding(this._tokens[t],e.startColumn-1),n<this._tokens.length){let i=qt.deleteBeginning(this._tokens[n],e.endColumn-1);this._tokens[t]=qt.append(this._tokens[t],i),this._tokens.splice(t+1,n-t)}else this._tokens[t]=qt.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{let i=-t;this._startLineNumber-=i,this._tokens[n]=qt.deleteBeginning(this._tokens[n],e.endColumn-1),this._tokens=this._tokens.slice(n)}}}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let i=e.lineNumber-this._startLineNumber;if(i<0){this._startLineNumber+=t;return}if(!(i>=this._tokens.length)){if(t===0){this._tokens[i]=qt.insert(this._tokens[i],e.column-1,n);return}this._tokens[i]=qt.deleteEnding(this._tokens[i],e.column-1),this._tokens[i]=qt.insert(this._tokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._tokens=So(this._tokens,e,n)}};var Jl=(i=>(i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error",i))(Jl||{});(o=>{function r(s,a){return a-s}o.compare=r;let e=Object.create(null);e[8]=c("sev.error","Error"),e[4]=c("sev.warning","Warning"),e[2]=c("sev.info","Info");function t(s){return e[s]||""}o.toString=t;function n(s){switch(s){case St.Error:return 8;case St.Warning:return 4;case St.Info:return 2;case St.Ignore:return 1}}o.fromSeverity=n;function i(s){switch(s){case 8:return St.Error;case 4:return St.Warning;case 2:return St.Info;case 1:return St.Ignore}}o.toSeverity=i})(Jl||={});var LO;(n=>{let r="";function e(i){return t(i,!0)}n.makeKey=e;function t(i,o){let s=[r];return i.source?s.push(i.source.replace("\xA6","\\\xA6")):s.push(r),i.code?typeof i.code=="string"?s.push(i.code.replace("\xA6","\\\xA6")):s.push(i.code.value.replace("\xA6","\\\xA6")):s.push(r),i.severity!==void 0&&i.severity!==null?s.push(Jl.toString(i.severity)):s.push(r),i.message&&o?s.push(i.message.replace("\xA6","\\\xA6")):s.push(r),i.startLineNumber!==void 0&&i.startLineNumber!==null?s.push(i.startLineNumber.toString()):s.push(r),i.startColumn!==void 0&&i.startColumn!==null?s.push(i.startColumn.toString()):s.push(r),i.endLineNumber!==void 0&&i.endLineNumber!==null?s.push(i.endLineNumber.toString()):s.push(r),i.endColumn!==void 0&&i.endColumn!==null?s.push(i.endColumn.toString()):s.push(r),s.push(r),s.join("\xA6")}n.makeKeyOptionalMessage=t})(LO||={});var Jk=k("markerService");var qm=class{constructor(e,t){this.tokens=e;this.endState=t}_encodedTokenizationResultBrand=void 0};var OO;(i=>{let r=new Map;r.set(0,ee.symbolMethod),r.set(1,ee.symbolFunction),r.set(2,ee.symbolConstructor),r.set(3,ee.symbolField),r.set(4,ee.symbolVariable),r.set(5,ee.symbolClass),r.set(6,ee.symbolStruct),r.set(7,ee.symbolInterface),r.set(8,ee.symbolModule),r.set(9,ee.symbolProperty),r.set(10,ee.symbolEvent),r.set(11,ee.symbolOperator),r.set(12,ee.symbolUnit),r.set(13,ee.symbolValue),r.set(15,ee.symbolEnum),r.set(14,ee.symbolConstant),r.set(15,ee.symbolEnum),r.set(16,ee.symbolEnumMember),r.set(17,ee.symbolKeyword),r.set(27,ee.symbolSnippet),r.set(18,ee.symbolText),r.set(19,ee.symbolColor),r.set(20,ee.symbolFile),r.set(21,ee.symbolReference),r.set(22,ee.symbolCustomColor),r.set(23,ee.symbolFolder),r.set(24,ee.symbolTypeParameter),r.set(25,ee.account),r.set(26,ee.issues);function e(o){let s=r.get(o);return s||(console.info("No codicon found for CompletionItemKind "+o),s=ee.symbolProperty),s}i.toIcon=e;let t=new Map;t.set("method",0),t.set("function",1),t.set("constructor",2),t.set("field",3),t.set("variable",4),t.set("class",5),t.set("struct",6),t.set("interface",7),t.set("module",8),t.set("property",9),t.set("event",10),t.set("operator",11),t.set("unit",12),t.set("value",13),t.set("constant",14),t.set("enum",15),t.set("enum-member",16),t.set("enumMember",16),t.set("keyword",17),t.set("snippet",27),t.set("text",18),t.set("color",19),t.set("file",20),t.set("reference",21),t.set("customcolor",22),t.set("folder",23),t.set("type-parameter",24),t.set("typeParameter",24),t.set("account",25),t.set("issue",26);function n(o,s){let a=t.get(o);return typeof a>"u"&&!s&&(a=9),a}i.fromString=n})(OO||={});var sq={17:c("Array","array"),16:c("Boolean","boolean"),4:c("Class","class"),13:c("Constant","constant"),8:c("Constructor","constructor"),9:c("Enum","enumeration"),21:c("EnumMember","enumeration member"),23:c("Event","event"),7:c("Field","field"),0:c("File","file"),11:c("Function","function"),10:c("Interface","interface"),19:c("Key","key"),5:c("Method","method"),1:c("Module","module"),2:c("Namespace","namespace"),20:c("Null","null"),15:c("Number","number"),18:c("Object","object"),24:c("Operator","operator"),3:c("Package","package"),6:c("Property","property"),14:c("String","string"),22:c("Struct","struct"),25:c("TypeParameter","type parameter"),12:c("Variable","variable")};var AO;(t=>{let r=new Map;r.set(0,ee.symbolFile),r.set(1,ee.symbolModule),r.set(2,ee.symbolNamespace),r.set(3,ee.symbolPackage),r.set(4,ee.symbolClass),r.set(5,ee.symbolMethod),r.set(6,ee.symbolProperty),r.set(7,ee.symbolField),r.set(8,ee.symbolConstructor),r.set(9,ee.symbolEnum),r.set(10,ee.symbolInterface),r.set(11,ee.symbolFunction),r.set(12,ee.symbolVariable),r.set(13,ee.symbolConstant),r.set(14,ee.symbolString),r.set(15,ee.symbolNumber),r.set(16,ee.symbolBoolean),r.set(17,ee.symbolArray),r.set(18,ee.symbolObject),r.set(19,ee.symbolKey),r.set(20,ee.symbolNull),r.set(21,ee.symbolEnumMember),r.set(22,ee.symbolStruct),r.set(23,ee.symbolEvent),r.set(24,ee.symbolOperator),r.set(25,ee.symbolTypeParameter);function e(n){let i=r.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=ee.symbolProperty),i}t.toIcon=e})(AO||={});var Zk=class r{constructor(e){this.value=e}static Comment=new r("comment");static Imports=new r("imports");static Region=new r("region");static fromValue(e){switch(e){case"comment":return r.Comment;case"imports":return r.Imports;case"region":return r.Region}return new r(e)}};var MO;(e=>{function r(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}e.is=r})(MO||={});var Hy=new yu,Su=new yu;var Xi=k("languageService");var eD=(e=>(e[e.value=3]="value",e))(eD||{});function Qi(r){return(r&eD.value)!==0}var Zl=class{open;close;_inString;_inComment;_inRegEx;_neutralCharacter=null;_neutralCharacterSearched=!1;constructor(e){if(this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;let n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){let i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}},jm=class{autoClosingPairsOpenByStart;autoClosingPairsOpenByEnd;autoClosingPairsCloseByStart;autoClosingPairsCloseByEnd;autoClosingPairsCloseSingleChar;constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let t of e)Cu(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Cu(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Cu(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Cu(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Cu(this.autoClosingPairsCloseSingleChar,t.close,t)}};function Cu(r,e,t){r.has(e)?r.get(e).push(t):r.set(e,[t])}var Ky=class r{_richEditBracketBrand=void 0;languageId;index;open;close;forwardRegex;reversedRegex;_openSet;_closeSet;constructor(e,t,n,i,o,s){this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=o,this.reversedRegex=s,this._openSet=r._toSet(this.open),this._closeSet=r._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let n of e)t.add(n);return t}};function NO(r){let e=r.length;r=r.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);let t=[];for(let s=0;s<e;s++)t[s]=s;let n=(s,a)=>{let[l,d]=s,[u,p]=a;return l===u||l===p||d===u||d===p},i=(s,a)=>{let l=Math.min(s,a),d=Math.max(s,a);for(let u=0;u<e;u++)t[u]===d&&(t[u]=l)};for(let s=0;s<e;s++){let a=r[s];for(let l=s+1;l<e;l++){let d=r[l];n(a,d)&&i(t[s],t[l])}}let o=[];for(let s=0;s<e;s++){let a=[],l=[];for(let d=0;d<e;d++)if(t[d]===s){let[u,p]=r[d];a.push(u),l.push(p)}a.length>0&&o.push({open:a,close:l})}return o}var Xm=class{_richEditBracketsBrand=void 0;brackets;forwardRegex;reversedRegex;maxBracketLength;textIsBracket;textIsOpenBracket;constructor(e,t){let n=NO(t);this.brackets=n.map((i,o)=>new Ky(e,o,i.open,i.close,FO(i.open,i.close,n,o),BO(i.open,i.close,n,o))),this.forwardRegex=UO(this.brackets),this.reversedRegex=WO(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let i of this.brackets){for(let o of i.open)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(let o of i.close)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}};function tD(r,e,t,n){for(let i=0,o=e.length;i<o;i++){if(i===t)continue;let s=e[i];for(let a of s.open)a.indexOf(r)>=0&&n.push(a);for(let a of s.close)a.indexOf(r)>=0&&n.push(a)}}function nD(r,e){return r.length-e.length}function Qm(r){if(r.length<=1)return r;let e=[],t=new Set;for(let n of r)t.has(n)||(e.push(n),t.add(n));return e}function FO(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let o=0,s=i.length;o<s;o++)tD(i[o],t,n,i);return i=Qm(i),i.sort(nD),i.reverse(),ed(i)}function BO(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let o=0,s=i.length;o<s;o++)tD(i[o],t,n,i);return i=Qm(i),i.sort(nD),i.reverse(),ed(i.map($y))}function UO(r){let e=[];for(let t of r){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=Qm(e),ed(e)}function WO(r){let e=[];for(let t of r){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=Qm(e),ed(e.map($y))}function VO(r){let e=/^[\w ]+$/.test(r);return r=bn(r),e?`\\b${r}\\b`:r}function ed(r,e){let t=`(${r.map(VO).join(")|(")})`;return wh(t,!0,e)}var $y=function(){function r(n){let i=new Uint16Array(n.length),o=0;for(let s=n.length-1;s>=0;s--)i[o++]=n.charCodeAt(s);return $k().decode(i)}let e=null,t=null;return function(i){return e!==i&&(e=i,t=r(e)),t}}(),Bn=class{static _findPrevBracketInText(e,t,n,i){let o=n.match(e);if(!o)return null;let s=n.length-(o.index||0),a=o[0].length,l=i+s;return new $(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,o){let a=$y(n).substring(n.length-o,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){let o=n.match(e);if(!o)return null;let s=o.index||0,a=o[0].length;if(a===0)return null;let l=i+s;return new $(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,o){let s=n.substring(i,o);return this.findNextBracketInText(e,t,s,i)}};var Ym=class{constructor(e,t){this.languageId=e;let n=t.brackets?iD(t.brackets):[],i=new Pc(a=>{let l=new Set;return{info:new Gy(this,a,l),closing:l}}),o=new Pc(a=>{let l=new Set,d=new Set;return{info:new qy(this,a,l,d),opening:l,openingColorized:d}});for(let[a,l]of n){let d=i.get(a),u=o.get(l);d.closing.add(u.info),u.opening.add(d.info)}let s=t.colorizedBracketPairs?iD(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(let[a,l]of s){let d=i.get(a),u=o.get(l);d.closing.add(u.info),u.openingColorized.add(d.info),u.opening.add(d.info)}this._openingBrackets=new Map([...i.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info]))}_openingBrackets;_closingBrackets;get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){let t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return ed(t,e)}};function iD(r){return r.filter(([e,t])=>e!==""&&t!=="")}var Jm=class{constructor(e,t){this.config=e;this.bracketText=t}get languageId(){return this.config.languageId}},Gy=class extends Jm{constructor(t,n,i){super(t,n);this.openedBrackets=i}isOpeningBracket=!0},qy=class extends Jm{constructor(t,n,i,o){super(t,n);this.openingBrackets=i;this.openingColorizedBrackets=o}isOpeningBracket=!1;closes(t){return t.config!==this.config?!1:this.openingBrackets.has(t)}closesColorized(t){return t.config!==this.config?!1:this.openingColorizedBrackets.has(t)}getOpeningBrackets(){return[...this.openingBrackets]}};var Cs=class r{static _nextVisibleColumn(e,t,n){return e===9?r.nextRenderTabStop(t,n):DT(e)||Ph(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){let i=Math.min(t-1,e.length),o=e.substring(0,i),s=new la(o),a=0;for(;!s.eol();){let l=Pl(o,i,s.offset);s.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static toStatusbarColumn(e,t,n){let i=e.substring(0,Math.min(t-1,e.length)),o=new Lc(i),s=0;for(;!o.eol();)o.nextCodePoint()===9?s=r.nextRenderTabStop(s,n):s=s+1;return s+1}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;let i=e.length,o=new la(e),s=0,a=1;for(;!o.eol();){let l=Pl(e,i,o.offset);o.nextGraphemeLength();let d=this._nextVisibleColumn(l,s,n),u=o.offset+1;if(d>=t){let p=t-s;return d-t<p?u:a}s=d,a=u}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}};function rD(r,e,t,n){return r!==t?ct(t-r,n):ct(0,n-e)}var zt=0;function td(r){return r===0}var mi=2**26;function ct(r,e){return r*mi+e}function kn(r){let e=r,t=Math.floor(e/mi),n=e-t*mi;return new Ql(t,n)}function oD(r){return Math.floor(r/mi)}function ot(r,e){let t=r+e;return e>=mi&&(t=t-r%mi),t}function sD(r,e){return r.reduce((t,n)=>ot(t,e(n)),zt)}function jy(r,e){return r===e}function Ra(r,e){let t=r,n=e;if(n-t<=0)return zt;let o=Math.floor(t/mi),s=Math.floor(n/mi),a=n-s*mi;if(o===s){let l=t-o*mi;return ct(0,a-l)}else return ct(s-o,a)}function Oo(r,e){return r<e}function Es(r,e){return r<=e}function nd(r,e){return r>=e}function Ts(r){return ct(r.lineNumber-1,r.column-1)}function ws(r,e){let t=r,n=Math.floor(t/mi),i=t-n*mi,o=e,s=Math.floor(o/mi),a=o-s*mi;return new $(n+1,i+1,s+1,a+1)}function aD(r){let e=Pv(r);return ct(e.length-1,e[e.length-1].length)}var Zm=[],tn=class r{constructor(e,t){this.items=e;this.additionalItems=t}static cache=new Array(129);static create(e,t){if(e<=128&&t.length===0){let n=r.cache[e];return n||(n=new r(e,t),r.cache[e]=n),n}return new r(e,t)}static empty=r.create(0,Zm);static getEmpty(){return this.empty}add(e,t){let n=t.getKey(e),i=n>>5;if(i===0){let s=1<<n|this.items;return s===this.items?this:r.create(s,this.additionalItems)}i--;let o=this.additionalItems.slice(0);for(;o.length<i;)o.push(0);return o[i]|=1<<(n&31),r.create(this.items,o)}has(e,t){let n=t.getKey(e),i=n>>5;return i===0?(this.items&1<<n)!==0:(i--,((this.additionalItems[i]||0)&1<<(n&31))!==0)}merge(e){let t=this.items|e.items;if(this.additionalItems===Zm&&e.additionalItems===Zm)return t===this.items?this:t===e.items?e:r.create(t,Zm);let n=[];for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){let o=this.additionalItems[i]||0,s=e.additionalItems[i]||0;n.push(o|s)}return r.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}},Xy={getKey(r){return r}},eg=class{items=new Map;getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find(([t,n])=>n===e)?.[0]}reverseLookupSet(e){let t=[];for(let[n]of this.items)e.has(n,this)&&t.push(n);return t}keys(){return this.items.keys()}};var tg=class r{static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_WHITESPACE=` 
	`;_autoClosingPairs;_surroundingPairs;_autoCloseBeforeForQuotes;_autoCloseBeforeForBrackets;constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Zl(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Zl({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){let t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Zl({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:r.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:r.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};var ng=class{_richEditBrackets;constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let n of t.close){let i=n.charAt(n.length-1);e.push(i)}return Hn(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let i=t.findTokenIndexAtOffset(n-1);if(Qi(t.getStandardTokenType(i)))return null;let o=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=Bn.findPrevBracketInRange(o,1,s,0,s.length);if(!a)return null;let l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;let u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}};function ig(r){return r.global&&(r.lastIndex=0),!0}var rg=class{_indentationRules;constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&ig(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&ig(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&ig(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&ig(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}};var og=class r{_brackets;_regExpRules;constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{let n=r._createOpenBracketRegExp(t[0]),i=r._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let o=0,s=this._regExpRules.length;o<s;o++){let a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let o=0,s=this._brackets.length;o<s;o++){let a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:2}}if(e>=2&&n.length>0){for(let o=0,s=this._brackets.length;o<s;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:1}}return null}static _createOpenBracketRegExp(e){let t=bn(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",r._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=bn(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,r._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ae(t),null}}};var zO=[];function At(r,e,t){e instanceof Zc||(e=new Zc(e,[],!!t)),zO.push([r,e])}var fr=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});var HO={ModesRegistry:"editor.modesRegistry"},Qy=class{_languages;_onDidChangeLanguages=new E;onDidChangeLanguages=this._onDidChangeLanguages.event;constructor(){this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}},lD=new Qy;De.add(HO.ModesRegistry,lD);var Ao="plaintext",KO=".txt";lD.registerLanguage({id:Ao,extensions:[KO],aliases:[c("plainText.alias","Plain Text"),"text"],mimetypes:[fr.text]});De.as(qi.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var Tu=class{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}},wu=k("languageConfigurationService"),Eu=class extends O{constructor(t,n){super();this.configurationService=t;this.languageService=n;let i=new Set(Object.values(Yy));this._register(this.configurationService.onDidChangeConfiguration(o=>{let s=o.change.keys.some(l=>i.has(l)),a=o.change.overrides.filter(([l,d])=>d.some(u=>i.has(u))).map(([l])=>l);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new Tu(void 0));else for(let l of a)this.languageService.isRegisteredLanguageId(l)&&(this.configurations.delete(l),this.onDidChangeEmitter.fire(new Tu(l)))})),this._register(this._registry.onDidChange(o=>{this.configurations.delete(o.languageId),this.onDidChangeEmitter.fire(new Tu(o.languageId))}))}_serviceBrand;_registry=this._register(new Zy);onDidChangeEmitter=this._register(new E);onDidChange=this.onDidChangeEmitter.event;configurations=new Map;register(t,n,i){return this._registry.register(t,n,i)}getLanguageConfiguration(t){let n=this.configurations.get(t);return n||(n=$O(t,this._registry,this.configurationService,this.languageService),this.configurations.set(t,n)),n}};Eu=T([S(0,Xe),S(1,Xi)],Eu);function $O(r,e,t,n){let i=e.getLanguageConfiguration(r);if(!i){if(!n.isRegisteredLanguageId(r))return new id(r,{});i=new id(r,{})}let o=GO(i.languageId,t),s=cD([i.underlyingConfig,o]);return new id(i.languageId,s)}var Yy={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function GO(r,e){let t=e.getValue(Yy.brackets,{overrideIdentifier:r}),n=e.getValue(Yy.colorizedBracketPairs,{overrideIdentifier:r});return{brackets:dD(t),colorizedBracketPairs:dD(n)}}function dD(r){if(Array.isArray(r))return r.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}var Jy=class{constructor(e){this.languageId=e;this._entries=[],this._order=0,this._resolved=null}_entries;_order;_resolved=null;register(e,t){let n=new sg(e,t,++this._order);return this._entries.push(n),this._resolved=null,j(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new id(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(sg.cmp),cD(this._entries.map(e=>e.configuration)))}};function cD(r){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let t of r)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}var sg=class{constructor(e,t,n){this.configuration=e;this.priority=t;this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}},ag=class{constructor(e){this.languageId=e}},Zy=class extends O{_entries=new Map;_onDidChange=this._register(new E);onDidChange=this._onDidChange.event;constructor(){super(),this._register(this.register(Ao,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new Jy(e),this._entries.set(e,i));let o=i.register(t,n);return this._onDidChange.fire(new ag(e)),j(()=>{o.dispose(),this._onDidChange.fire(new ag(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}},id=class r{constructor(e,t){this.languageId=e;this.underlyingConfig=t;this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new og(this.underlyingConfig):null,this.comments=r._handleComments(this.underlyingConfig),this.characterPair=new tg(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||VI,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new rg(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new Ym(e,this.underlyingConfig)}_brackets;_electricCharacter;_onEnterSupport;comments;characterPair;wordDefinition;indentRulesSupport;indentationRules;foldingRules;bracketsNew;getWordDefinition(){return bu(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Xm(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new ng(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new jm(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[i,o]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=o}return n}};At(wu,Eu,1);var ex=class r{constructor(e){this.map=e}static createFromLanguage(e,t){function n(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}let i=new Map;for(let o of e.bracketsNew.openingBrackets){let s=ct(0,o.bracketText.length),a=n(o),l=tn.getEmpty().add(a,Xy);i.set(o.bracketText,new br(s,1,a,l,ku.create(s,o,l)))}for(let o of e.bracketsNew.closingBrackets){let s=ct(0,o.bracketText.length),a=tn.getEmpty(),l=o.getOpeningBrackets();for(let d of l)a=a.add(n(d),Xy);i.set(o.bracketText,new br(s,2,n(l[0]),a,ku.create(s,o,a)))}return new r(i)}hasRegExp=!1;_regExpGlobal=null;getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>qO(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}};function qO(r){let e=bn(r);return/^[\w ]+/.test(r)&&(e=`\\b${e}`),/[\w ]+$/.test(r)&&(e=`${e}\\b`),e}var lg=class{constructor(e,t){this.denseKeyProvider=e;this.getLanguageConfiguration=t}languageIdToBracketTokens=new Map;didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=ex.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}};var br=class{constructor(e,t,n,i,o){this.length=e;this.kind=t;this.bracketId=n;this.bracketIds=i;this.astNode=o}},dg=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;reader=new tx(this.textModel,this.bracketTokens);_offset=zt;get offset(){return this._offset}get length(){return ct(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=ot(this._offset,e);let t=kn(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}didPeek=!1;peeked=null;read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=ot(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}},tx=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;lineIdx=0;line=null;lineCharOffset=0;lineTokens=null;lineTokenOffset=0;setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}peekedToken=null;read(){if(this.peekedToken){let o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,n=0;for(;;){let o=this.lineTokens,s=o.getCount(),a=null;if(this.lineTokenOffset<s){let l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let d=hi.getTokenType(l)===0,u=hi.containsBalancedBrackets(l),p=o.getEndOffset(this.lineTokenOffset);if(u&&d&&this.lineCharOffset<p){let h=o.getLanguageId(this.lineTokenOffset),g=this.line.substring(this.lineCharOffset,p),b=this.bracketTokens.getSingleLanguageBracketTokens(h),f=b.regExpGlobal;if(f){f.lastIndex=0;let v=f.exec(g);v&&(a=b.getToken(v[0]),a&&(this.lineCharOffset+=v.index))}}if(n+=p-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=p}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}let i=rD(e,t,this.lineIdx,this.lineCharOffset);return new br(i,0,-1,tn.getEmpty(),new vr(i))}},cg=class{constructor(e,t){this.text=e;let n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,o=[],s,a=0,l=0,d=0,u=0,p=[];for(let b=0;b<60;b++)p.push(new br(ct(0,b),0,-1,tn.getEmpty(),new vr(ct(0,b))));let h=[];for(let b=0;b<60;b++)h.push(new br(ct(1,b),0,-1,tn.getEmpty(),new vr(ct(1,b))));if(i)for(i.lastIndex=0;(s=i.exec(e))!==null;){let b=s.index,f=s[0];if(f===`
`)a++,l=b+1;else{if(d!==b){let v;if(u===a){let D=b-d;if(D<p.length)v=p[D];else{let R=ct(0,D);v=new br(R,0,-1,tn.getEmpty(),new vr(R))}}else{let D=a-u,R=b-l;if(D===1&&R<h.length)v=h[R];else{let A=ct(D,R);v=new br(A,0,-1,tn.getEmpty(),new vr(A))}}o.push(v)}o.push(t.getToken(f)),d=b+f.length,u=a}}let g=e.length;if(d!==g){let b=u===a?ct(0,g-d):ct(a-u,g-l);o.push(new br(b,0,-1,tn.getEmpty(),new vr(b)))}this.length=ct(a,g-l),this.tokens=o}_offset=zt;tokens;idx=0;get offset(){return this._offset}length;read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new jp}getText(){return this.text}};var Du=class{_length;get length(){return this._length}constructor(e){this._length=e}},_u=class r extends Du{constructor(t,n,i,o,s){super(t);this.openingBracket=n;this.child=i;this.closingBracket=o;this.missingOpeningBracketIds=s}static create(t,n,i){let o=t.length;return n&&(o=ot(o,n.length)),i&&(o=ot(o,i.length)),new r(o,t,n,i,n?n.missingOpeningBracketIds:tn.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(t){switch(t){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){let t=[];return t.push(this.openingBracket),this.child&&t.push(this.child),this.closingBracket&&t.push(this.closingBracket),t}canBeReused(t){return!(this.closingBracket===null||t.intersects(this.missingOpeningBracketIds))}flattenLists(){return r.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new r(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(t,n){return this.child?this.child.computeMinIndentation(ot(t,this.openingBracket.length),n):Number.MAX_SAFE_INTEGER}},gi=class r extends Du{constructor(t,n,i){super(t);this.listHeight=n;this._missingOpeningBracketIds=i}static create23(t,n,i,o=!1){let s=t.length,a=t.missingOpeningBracketIds;if(t.listHeight!==n.listHeight)throw new Error("Invalid list heights");if(s=ot(s,n.length),a=a.merge(n.missingOpeningBracketIds),i){if(t.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=ot(s,i.length),a=a.merge(i.missingOpeningBracketIds)}return o?new nx(s,t.listHeight+1,t,n,i,a):new Ru(s,t.listHeight+1,t,n,i,a)}static create(t,n=!1){if(t.length===0)return this.getEmpty();{let i=t[0].length,o=t[0].missingOpeningBracketIds;for(let s=1;s<t.length;s++)i=ot(i,t[s].length),o=o.merge(t[s].missingOpeningBracketIds);return n?new ug(i,t[0].listHeight+1,t,o):new Pu(i,t[0].listHeight+1,t,o)}}static getEmpty(){return new ug(zt,0,[],tn.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}cachedMinIndentation=-1;throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let t=this.childrenLength;if(t===0)return;let n=this.getChild(t-1),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(t-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let n=this.getChild(0),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(0,i),i}canBeReused(t){if(t.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let n=this;for(;n.kind===4;){let i=n.childrenLength;if(i===0)throw new He;n=n.getChild(i-1)}return n.canBeReused(t)}handleChildrenChanged(){this.throwIfImmutable();let t=this.childrenLength,n=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let o=1;o<t;o++){let s=this.getChild(o);n=ot(n,s.length),i=i.merge(s.missingOpeningBracketIds)}this._length=n,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}flattenLists(){let t=[];for(let n of this.children){let i=n.flattenLists();i.kind===4?t.push(...i.children):t.push(i)}return r.create(t)}computeMinIndentation(t,n){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,o=t;for(let s=0;s<this.childrenLength;s++){let a=this.getChild(s);a&&(i=Math.min(i,a.computeMinIndentation(o,n)),o=ot(o,a.length))}return this.cachedMinIndentation=i,i}},Ru=class r extends gi{constructor(t,n,i,o,s,a){super(t,n,a);this._item1=i;this._item2=o;this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(t){switch(t){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(t,n){switch(t){case 0:this._item1=n;return;case 1:this._item2=n;return;case 2:this._item3=n;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new r(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=t,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item3;return this._item3=null,this.handleChildrenChanged(),t}prependChildOfSameHeight(t){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=t,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),t}toMutable(){return this}},nx=class extends Ru{toMutable(){return new Ru(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},Pu=class r extends gi{constructor(t,n,i,o){super(t,n,o);this._children=i}get childrenLength(){return this._children.length}getChild(t){return this._children[t]}setChild(t,n){this._children[t]=n}get children(){return this._children}deepClone(){let t=new Array(this._children.length);for(let n=0;n<this._children.length;n++)t[n]=this._children[n].deepClone();return new r(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){this.throwIfImmutable(),this._children.push(t),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let t=this._children.pop();return this.handleChildrenChanged(),t}prependChildOfSameHeight(t){this.throwIfImmutable(),this._children.unshift(t),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let t=this._children.shift();return this.handleChildrenChanged(),t}toMutable(){return this}},ug=class extends Pu{toMutable(){return new Pu(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},XO=[],Lu=class extends Du{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return XO}flattenLists(){return this}deepClone(){return this}},vr=class extends Lu{get kind(){return 0}get missingOpeningBracketIds(){return tn.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let n=kn(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=oD(ot(e,this.length))+1,s=Number.MAX_SAFE_INTEGER;for(let a=i;a<=o;a++){let l=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(l===0)continue;let u=Cs.visibleColumnFromColumn(d,l,t.getOptions().tabSize);s=Math.min(s,u)}return s}},ku=class r extends Lu{constructor(t,n,i){super(t);this.bracketInfo=n;this.bracketIds=i}static create(t,n,i){return new r(t,n,i)}get kind(){return 1}get missingOpeningBracketIds(){return tn.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(t){return!1}computeMinIndentation(t,n){return Number.MAX_SAFE_INTEGER}},pg=class extends Lu{get kind(){return 3}missingOpeningBracketIds;constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};var Ou=class{constructor(e,t,n,i){this.range=e;this.nestingLevel=t;this.nestingLevelOfEqualBracketType=n;this.isInvalid=i}},ix=class{constructor(e,t,n,i,o,s){this.range=e;this.openingBracketRange=t;this.closingBracketRange=n;this.nestingLevel=i;this.nestingLevelOfEqualBracketType=o;this.bracketPairNode=s}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}},hg=class extends ix{constructor(t,n,i,o,s,a,l){super(t,n,i,o,s,a);this.minVisibleColumnIndentation=l}};var mg=class{changeType=1},Au=class r{constructor(e,t,n,i,o){this.ownerId=e;this.lineNumber=t;this.column=n;this.options=i;this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(let o of t)n+=e.substring(i,o.column-1),i=o.column-1,n+=o.options.content;return n+=e.substring(i),n}static fromDecorations(e){let t=[];for(let n of e)n.options.before&&n.options.before.content.length>0&&t.push(new r(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new r(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}withText(e){return new r(this.ownerId,this.lineNumber,this.column,{...this.options,content:e},this.order)}},Mu=class{changeType=2;lineNumber;detail;injectedText;constructor(e,t,n){this.lineNumber=e,this.detail=t,this.injectedText=n}},gg=class{changeType=3;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}},fg=class{changeType=4;fromLineNumber;toLineNumber;detail;injectedTexts;constructor(e,t,n,i){this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}},bg=class{changeType=5},Pa=class r{changes;versionId;isUndoing;isRedoing;resultingSelection;constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){let n=[].concat(e.changes).concat(t.changes),i=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new r(n,i,o,s)}},vg=class{changes;constructor(e){this.changes=e}},Ig=class r{constructor(e,t){this.rawContentChangedEvent=e;this.contentChangedEvent=t}merge(e){let t=Pa.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=r._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new r(t,n)}static _mergeChangeEvents(e,t){let n=[].concat(e.changes).concat(t.changes),i=t.eol,o=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,d=e.isEolChange&&t.isEolChange;return{changes:n,eol:i,isEolChange:d,versionId:o,isUndoing:s,isRedoing:a,isFlush:l}}};var La=class{constructor(e,t,n,i,o,s){this.visibleColumn=e;this.column=t;this.className=n;this.horizontalLine=i;this.forWrappedLinesAfterColumn=o;this.forWrappedLinesBeforeOrAtColumn=s;if(e!==-1==(t!==-1))throw new Error}},rd=class{constructor(e,t){this.top=e;this.endColumn=t}};var yg=class r{constructor(e){this.edits=e;let t=-1;for(let n of e){if(!(n.replaceRange.start>=t))throw new He(`Edits must be disjoint and sorted. Found ${n} after ${t}`);t=n.replaceRange.endExclusive}}static empty=new r([]);static fromJson(e){return new r(e.map(Ir.fromJson))}static replace(e,t){return new r([new Ir(e,t)])}static insert(e,t){return r.replace(Re.emptyAt(e),t)}normalize(){let e=[],t;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(t&&t.replaceRange.endExclusive===n.replaceRange.start?t=new Ir(t.replaceRange.join(n.replaceRange),t.newText+n.newText):(t&&e.push(t),t=n));return t&&e.push(t),new r(e)}toString(){return`[${this.edits.map(t=>t.toString()).join(", ")}]`}apply(e){let t=[],n=0;for(let i of this.edits)t.push(e.substring(n,i.replaceRange.start)),t.push(i.newText),n=i.replaceRange.endExclusive;return t.push(e.substring(n)),t.join("")}compose(e){return QO(this,e)}inverse(e){let t=[],n=0;for(let i of this.edits)t.push(new Ir(Re.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new r(t)}getNewTextRanges(){let e=[],t=0;for(let n of this.edits)e.push(Re.ofStartAndLength(n.replaceRange.start+t,n.newText.length)),t+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let t=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[i];if(a)s?a.replaceRange.intersects(s.replaceRange)?i++:a.replaceRange.start<s.replaceRange.start?(t.push(new Ir(a.replaceRange.delta(o),a.newText)),i++):(n++,o+=s.newText.length-s.replaceRange.length):(t.push(new Ir(a.replaceRange.delta(o),a.newText)),i++);else break}return new r(t)}applyToOffset(e){let t=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+t;t+=n.newText.length-n.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new Re(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-t){if(e-t<n.replaceRange.start+i)return n.replaceRange.start;t+=i-n.replaceRange.length}else break}return e-t}},Ir=class r{constructor(e,t){this.replaceRange=e;this.newText=t}static fromJson(e){return new r(Re.ofStartAndLength(e.pos,e.len),e.txt)}static insert(e,t){return new r(Re.emptyAt(e),t)}toString(){return`${this.replaceRange} -> "${this.newText}"`}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function QO(r,e){if(r=r.normalize(),e=e.normalize(),r.isEmpty)return e;if(e.isEmpty)return r;let t=[...r.edits],n=[],i=0;for(let o of e.edits){for(;;){let d=t[0];if(!d||d.replaceRange.start+i+d.newText.length>=o.replaceRange.start)break;t.shift(),n.push(d),i+=d.newText.length-d.replaceRange.length}let s=i,a,l;for(;;){let d=t[0];if(!d||d.replaceRange.start+i>o.replaceRange.endExclusive)break;a||(a=d),l=d,t.shift(),i+=d.newText.length-d.replaceRange.length}if(!a)n.push(new Ir(o.replaceRange.delta(-i),o.newText));else{let d="",u=o.replaceRange.start-(a.replaceRange.start+s);u>0&&(d=a.newText.slice(0,u));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let b=new Ir(Re.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));t.unshift(b),i-=b.newText.length-b.replaceRange.length}let h=d+o.newText,g=new Re(Math.min(a.replaceRange.start,o.replaceRange.start-s),o.replaceRange.endExclusive-i);n.push(new Ir(g,h))}}for(;;){let o=t.shift();if(!o)break;n.push(o)}return new yg(n).normalize()}var od=class{_textModelResolvedOptionsBrand=void 0;tabSize;indentSize;_indentSizeIsTabSize;insertSpaces;defaultEOL;trimAutoWhitespace;bracketPairColorizationOptions;get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Cn(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},ks=class{_findMatchBrand=void 0;range;matches;constructor(e,t){this.range=e,this.matches=t}};function uD(r){return r&&typeof r.read=="function"}var sd=class{constructor(e,t,n,i,o,s){this.identifier=e;this.range=t;this.text=n;this.forceMoveMarkers=i;this.isAutoWhitespaceEdit=o;this._isTracked=s}},xg=class{regex;wordSeparators;simpleSearch;constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}},Sg=class{constructor(e,t,n){this.reverseEdits=e;this.changes=t;this.trimAutoWhitespaceLineNumbers=n}};function pD(r){return!r.isTooLargeForSyncing()&&!r.isForSimpleWidget}var Cg="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",rZ=new RegExp(Cg);var oZ=k("extensionGalleryService");var sZ=k("extensionManagementService");var aZ=k("IGlobalExtensionEnablementService"),lZ=k("IExtensionTipsService"),dZ=ii("extensions","Extensions"),cZ=ii("preferences","Preferences");var rx=class{telemetryLevel=0;sessionId="someValue.sessionId";machineId="someValue.machineId";sqmId="someValue.sqmId";devDeviceId="someValue.devDeviceId";firstSessionDate="someValue.firstSessionDate";sendErrorTelemetry=!1;publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},KZ=new rx;function gD(r,e){return r.uuid&&e.uuid?r.uuid===e.uuid:r.id===e.id?!0:Ov(r.id,e.id)===0}function ox(r,e){return`${r}.${e}`}function fD(r){return r.toLowerCase()}var uee=new Rt("pprice.better-merge");var Pee=k("IExtensionStorageService"),tA=/^extensionKeys\/([^.]+\..+)@(\d+\.\d+\.\d+(-.*)?)$/,Li=class extends O{constructor(t,n,i){super();this.storageService=t;this.productService=n;this.logService=i;this.extensionsWithKeysForSync=Li.readAllExtensionsWithKeysForSync(t),this._register(this.storageService.onDidChangeValue(0,void 0,this._register(new le))(o=>this.onDidChangeStorageValue(o)))}_serviceBrand;static LARGE_STATE_WARNING_THRESHOLD=512*1024;static toKey(t){return`extensionKeys/${fD(t.id)}@${t.version}`}static fromKey(t){let n=tA.exec(t);if(n&&n[1])return{id:n[1],version:n[2]}}static async removeOutdatedExtensionVersions(t,n){let i=await t.getInstalled(),o=[];for(let[s,a]of Li.readAllExtensionsWithKeysForSync(n)){let l=i.find(d=>gD(d.identifier,{id:s}))?.manifest.version;for(let d of a)l!==d&&o.push(Li.toKey({id:s,version:d}))}for(let s of o)n.remove(s,0)}static readAllExtensionsWithKeysForSync(t){let n=new Map,i=t.keys(0,1);for(let o of i){let s=Li.fromKey(o);if(s){let a=n.get(s.id.toLowerCase());a||n.set(s.id.toLowerCase(),a=[]),a.push(s.version)}}return n}_onDidChangeExtensionStorageToSync=this._register(new E);onDidChangeExtensionStorageToSync=this._onDidChangeExtensionStorageToSync.event;extensionsWithKeysForSync;onDidChangeStorageValue(t){if(this.extensionsWithKeysForSync.has(t.key.toLowerCase())){this._onDidChangeExtensionStorageToSync.fire();return}let n=Li.fromKey(t.key);if(n){if(this.storageService.get(t.key,0)===void 0)this.extensionsWithKeysForSync.delete(n.id.toLowerCase());else{let i=this.extensionsWithKeysForSync.get(n.id.toLowerCase());i||this.extensionsWithKeysForSync.set(n.id.toLowerCase(),i=[]),i.push(n.version),this._onDidChangeExtensionStorageToSync.fire()}return}}getExtensionId(t){if(Oe(t))return t;let n=t.manifest?t.manifest.publisher:t.publisher,i=t.manifest?t.manifest.name:t.name;return ox(n,i)}getExtensionState(t,n){let i=this.getExtensionId(t),o=this.getExtensionStateRaw(t,n);if(o)try{return JSON.parse(o)}catch(s){this.logService.error(`[mainThreadStorage] unexpected error parsing storage contents (extensionId: ${i}, global: ${n}): ${s}`)}}getExtensionStateRaw(t,n){let i=this.getExtensionId(t),o=this.storageService.get(i,n?0:1);return o&&o?.length>Li.LARGE_STATE_WARNING_THRESHOLD&&this.logService.warn(`[mainThreadStorage] large extension state detected (extensionId: ${i}, global: ${n}): ${o.length/1024}kb. Consider to use 'storageUri' or 'globalStorageUri' to store this data on disk instead.`),o}setExtensionState(t,n,i){let o=this.getExtensionId(t);n===void 0?this.storageService.remove(o,i?0:1):this.storageService.store(o,JSON.stringify(n),i?0:1,1)}setKeysForSync(t,n){this.storageService.store(Li.toKey(t),JSON.stringify(n),0,1)}getKeysForSync(t){let n=this.productService.extensionSyncedKeys?.[t.id.toLowerCase()],i=this.storageService.get(Li.toKey(t),0),o=i?JSON.parse(i):void 0;return o&&n?Hn([...o,...n]):o||n}addToMigrationList(t,n){if(t!==n){let i=this.migrationList.filter(o=>!o.includes(t)&&!o.includes(n));i.push([t,n]),this.migrationList=i}}getSourceExtensionToMigrate(t){let n=this.migrationList.find(([,i])=>t===i);return n?n[0]:void 0}get migrationList(){let t=this.storageService.get("extensionStorage.migrationList",-1,"[]");try{let n=JSON.parse(t);if(Array.isArray(n))return n}catch{}return[]}set migrationList(t){t.length?this.storageService.store("extensionStorage.migrationList",JSON.stringify(t),-1,1):this.storageService.remove("extensionStorage.migrationList",-1)}};Li=T([S(0,Vt),S(1,ps),S(2,je)],Li);var bD=St,vD=k("notificationService");var sx=k("progressService");var Jee=Object.freeze({total(){},worked(){},done(){}}),ID=class{constructor(e){this.callback=e}static None=Object.freeze({report(){}});_value;get value(){return this._value}report(e){this._value=e,this.callback(this._value)}};var Eg=class extends O{deferred=new yn;reporter;lastStep;constructor(e,t){super(),t.withProgress(e,n=>(this.reporter=n,this.lastStep&&n.report(this.lastStep),this.deferred.p)),this._register(j(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};Eg=T([S(1,sx)],Eg);var Zee=k("editorProgressService");var nA={Quickaccess:"workbench.contributions.quickaccess"},ax=class{providers=[];defaultProvider=void 0;registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),j(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return On([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}clear(){let e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}};De.add(nA.Quickaccess,new ax);var bte=new Ot(()=>{let r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}}),vte=new Ot(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),Ite=new Ot(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));var Pte=Object.freeze({score:0}),Lte=1<<18,Ote=1<<17;var lx=class{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===q.file?e.resource.fsPath:e.resource?.path}},ine=new lx,rne=k("quickInputService");var yD=k("remoteAuthorityResolverService");var xD=k("requestService");function iA(r){return r.res.statusCode&&r.res.statusCode>=200&&r.res.statusCode<300||r.res.statusCode===1223}function rA(r){return r.res.statusCode===204}async function SD(r){if(!iA(r))throw new Error("Server returned "+r.res.statusCode);if(rA(r))return null;let t=(await Fw(r.stream)).toString();try{return JSON.parse(t)}catch(n){throw n.message+=`:
`+t,n}}var dx;function oA(r){let e=De.as(qi.Configuration),t=dx;dx={id:"http",order:15,title:c("httpConfigurationTitle","HTTP"),type:"object",scope:r,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:c("proxy","The proxy setting to use. If not set, will be inherited from the `http_proxy` and `https_proxy` environment variables."),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:c("strictSSL","Controls whether the proxy server certificate should be verified against the list of supplied CAs."),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:c("proxyKerberosServicePrincipal","Overrides the principal service name for Kerberos authentication with the HTTP proxy. A default based on the proxy hostname is used when this is not set."),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:c("noProxy","Specifies domain names for which proxy settings should be ignored for HTTP/HTTPS requests."),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:c("proxyAuthorization","The value to send as the `Proxy-Authorization` header for every network request."),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[c("proxySupportOff","Disable proxy support for extensions."),c("proxySupportOn","Enable proxy support for extensions."),c("proxySupportFallback","Enable proxy support for extensions, fall back to request options, when no proxy found."),c("proxySupportOverride","Enable proxy support for extensions, override request options.")],default:"override",description:c("proxySupport","Use the proxy support for extensions."),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:c("systemCertificates","Controls whether CA certificates should be loaded from the OS. (On Windows and macOS, a reload of the window is required after turning this off.)"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:c("systemCertificatesV2","Controls whether experimental loading of CA certificates from the OS should be enabled. This uses a more general approach than the default implemenation."),restricted:!0}}},e.updateConfigurations({add:[dx],remove:t?[t]:[]})}oA(1);var Qie=new V("terminalTabFocusMode",!1,!0);var Yie=k("ptyService");var sA={Backend:"workbench.contributions.terminal.processBackend"},ux=class{_backends=new Map;get backends(){return this._backends}registerTerminalBackend(e){let t=this._sanitizeRemoteAuthority(e.remoteAuthority);if(this._backends.has(t))throw new Error(`A terminal backend with remote authority '${t}' was already registered.`);this._backends.set(t,e)}getTerminalBackend(e){return this._backends.get(this._sanitizeRemoteAuthority(e))}_sanitizeRemoteAuthority(e){return e?.toLowerCase()??""}};De.add(sA.Backend,new ux);var Jie=k("localPtyService"),Zie=k("terminalLogService");function aA(r){return(e,t,n)=>{let i=null,o=null;if(typeof n.value=="function"?(i="value",o=n.value):typeof n.get=="function"&&(i="get",o=n.get),!o)throw new Error("not supported");n[i]=r(o,t)}}function K(r,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");let o=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,s)}),this[o]}}function CD(r,e,t){return aA((n,i)=>{let o=`$debounce$${i}`,s=`$debounce$result$${i}`;return function(...a){this[s]||(this[s]=t?t():void 0),clearTimeout(this[o]),e&&(this[s]=e(this[s],...a),a=[this[s]]),this[o]=setTimeout(()=>{n.apply(this,a),this[s]=t?t():void 0},r)}})}function ED(r){switch(r){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}function TD(r){switch(r){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}function ld(r){let e=0;for(let t=0;;t+=7){let n=r.read(1);if(e|=(n.buffer[0]&127)<<t,!(n.buffer[0]&128))return e}}var dA=Ds(0);function dd(r,e){if(e===0){r.write(dA);return}let t=0;for(let i=e;i!==0;i=i>>>7)t++;let n=Ne.alloc(t);for(let i=0;e!==0;i++)n.buffer[i]=e&127,e=e>>>7,e>0&&(n.buffer[i]|=128);r.write(n)}var hx=class{constructor(e){this.buffer=e}pos=0;read(e){let t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}},mx=class{buffers=[];get buffer(){return Ne.concat(this.buffers)}write(e){this.buffers.push(e)}};function Ds(r){let e=Ne.alloc(1);return e.writeUInt8(r,0),e}var Aa={Undefined:Ds(0),String:Ds(1),Buffer:Ds(2),VSBuffer:Ds(3),Array:Ds(4),Object:Ds(5),Uint:Ds(6)},cA=typeof Buffer<"u";function gx(r,e){if(typeof e>"u")r.write(Aa.Undefined);else if(typeof e=="string"){let t=Ne.fromString(e);r.write(Aa.String),dd(r,t.byteLength),r.write(t)}else if(cA&&Buffer.isBuffer(e)){let t=Ne.wrap(e);r.write(Aa.Buffer),dd(r,t.byteLength),r.write(t)}else if(e instanceof Ne)r.write(Aa.VSBuffer),dd(r,e.byteLength),r.write(e);else if(Array.isArray(e)){r.write(Aa.Array),dd(r,e.length);for(let t of e)gx(r,t)}else if(typeof e=="number"&&(e|0)===e)r.write(Aa.Uint),dd(r,e);else{let t=Ne.fromString(JSON.stringify(e));r.write(Aa.Object),dd(r,t.byteLength),r.write(t)}}function fx(r){switch(r.read(1).readUInt8(0)){case 0:return;case 1:return r.read(ld(r)).toString();case 2:return r.read(ld(r)).buffer;case 3:return r.read(ld(r));case 4:{let t=ld(r),n=[];for(let i=0;i<t;i++)n.push(fx(r));return n}case 5:return JSON.parse(r.read(ld(r)).toString());case 6:return ld(r)}}var px=class{constructor(e,t=null){this.protocol=e;this.protocolListener=this.protocol.onMessage(n=>this.onBuffer(n)),this.logger=t}isDisposed=!1;state=0;activeRequests=new Set;handlers=new Map;lastRequestId=0;protocolListener;logger;_onDidInitialize=new E;onDidInitialize=this._onDidInitialize.event;getChannel(e){let t=this;return{call(n,i,o){return t.isDisposed?Promise.reject(new Ln):t.requestPromise(e,n,i,o)},listen(n,i){return t.isDisposed?Q.None:t.requestEvent(e,n,i)}}}requestPromise(e,t,n,i=We.None){let o=this.lastRequestId++,a={id:o,type:100,channelName:e,name:t,arg:n};if(i.isCancellationRequested)return Promise.reject(new Ln);let l;return new Promise((u,p)=>{if(i.isCancellationRequested)return p(new Ln);let h=()=>{let v=D=>{switch(D.type){case 201:this.handlers.delete(o),u(D.data);break;case 202:{this.handlers.delete(o);let R=new Error(D.data.message);R.stack=Array.isArray(D.data.stack)?D.data.stack.join(`
`):D.data.stack,R.name=D.data.name,p(R);break}case 203:this.handlers.delete(o),p(D.data);break}};this.handlers.set(o,v),this.sendRequest(a)},g=null;this.state===1?h():(g=ar(v=>this.whenInitialized()),g.then(()=>{g=null,h()}));let b=()=>{g?(g.cancel(),g=null):this.sendRequest({id:o,type:101}),p(new Ln)},f=i.onCancellationRequested(b);l=ir(j(b),f),this.activeRequests.add(l)}).finally(()=>{l.dispose(),this.activeRequests.delete(l)})}requestEvent(e,t,n){let i=this.lastRequestId++,s={id:i,type:102,channelName:e,name:t,arg:n},a=null,l=new E({onWillAddFirstListener:()=>{a=ar(u=>this.whenInitialized()),a.then(()=>{a=null,this.activeRequests.add(l),this.sendRequest(s)})},onDidRemoveLastListener:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(l),this.sendRequest({id:i,type:103}))}}),d=u=>l.fire(u.data);return this.handlers.set(i,d),l.event}sendRequest(e){switch(e.type){case 100:case 102:{let t=this.send([e.type,e.id,e.channelName,e.name],e.arg);this.logger?.logOutgoing(t,e.id,0,`${ED(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{let t=this.send([e.type,e.id]);this.logger?.logOutgoing(t,e.id,0,ED(e.type));return}}}send(e,t=void 0){let n=new mx;return gx(n,e),gx(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{return this.protocol.send(e),e.byteLength}catch{return 0}}onBuffer(e){let t=new hx(e),n=fx(t),i=fx(t),o=n[0];switch(o){case 200:return this.logger?.logIncoming(e.byteLength,0,0,TD(o)),this.onResponse({type:n[0]});case 201:case 202:case 204:case 203:return this.logger?.logIncoming(e.byteLength,n[1],0,TD(o),i),this.onResponse({type:n[0],id:n[1],data:i})}}onResponse(e){if(e.type===200){this.state=1,this._onDidInitialize.fire();return}this.handlers.get(e.id)?.(e)}get onDidInitializePromise(){return Q.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===1?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),ft(this.activeRequests.values()),this.activeRequests.clear()}};T([K],px.prototype,"onDidInitializePromise",1);var uA;(i=>{function r(o,s,a){let l=o,d=a&&a.disableMarshalling,u=new Map;for(let p in l)t(p)&&u.set(p,Q.buffer(l[p],!0,void 0,s));return new class{listen(p,h,g){let b=u.get(h);if(b)return b;let f=l[h];if(typeof f=="function"){if(n(h))return f.call(l,g);if(t(h))return u.set(h,Q.buffer(l[h],!0,void 0,s)),u.get(h)}throw new yo(`Event not found: ${h}`)}call(p,h,g){let b=l[h];if(typeof b=="function"){if(!d&&Array.isArray(g))for(let v=0;v<g.length;v++)g[v]=Pi(g[v]);let f=b.apply(l,g);return f instanceof Promise||(f=Promise.resolve(f)),f}throw new yo(`Method not found: ${h}`)}}}i.fromService=r;function e(o,s){let a=s&&s.disableMarshalling;return new Proxy({},{get(l,d){if(typeof d=="string")return s?.properties?.has(d)?s.properties.get(d):n(d)?function(u){return o.listen(d,u)}:t(d)?o.listen(d):async function(...u){let p;s&&!Bt(s.context)?p=[s.context,...u]:p=u;let h=await o.call(d,p);return a?h:Pi(h)};throw new yo(`Property not found: ${String(d)}`)}})}i.toService=e;function t(o){return o[0]==="o"&&o[1]==="n"&&Av(o.charCodeAt(2))}function n(o){return/^onDynamic/.test(o)&&Av(o.charCodeAt(9))}})(uA||={});var pA;(s=>{s.enableDiagnostics=!1,s.records=[];let t=new WeakMap,n=0;function i(a,l){if(!t.has(a)){let d=String(++n);t.set(a,d)}return t.get(a)}function o(a,l,d,u){}s.traceSocketEvent=o})(pA||={});var $re=k("remoteSocketFactoryService");var hA="signService",jre=k(hA);var Toe=30*1e3;var wD=k("tunnelService"),zoe=k("sharedTunnelsService");function kD(r){if(r.scheme!=="http"&&r.scheme!=="https")return;let e=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(r.authority);if(e)return{address:e[1],port:+e[2]}}var cd=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function ud(r){return cd.indexOf(r)>=0}var Nu=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function pd(r){return Nu.indexOf(r)>=0}var Tg=class extends O{constructor(t,n){super();this.logService=t;this.configurationService=n}_onTunnelOpened=new E;onTunnelOpened=this._onTunnelOpened.event;_onTunnelClosed=new E;onTunnelClosed=this._onTunnelClosed.event;_onAddedTunnelProvider=new E;onAddedTunnelProvider=this._onAddedTunnelProvider.event;_tunnels=new Map;_tunnelProvider;_canElevate=!1;_canChangeProtocol=!0;_privacyOptions=[];_factoryInProgress=new Set;get hasTunnelProvider(){return!!this._tunnelProvider}get defaultTunnelHost(){let t=this.configurationService.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this._tunnelProvider=t,t?(this._onAddedTunnelProvider.fire(),{dispose:()=>{this._tunnelProvider=void 0,this._canElevate=!1,this._privacyOptions=[]}}):(this._canElevate=!1,this._privacyOptions=[],this._onAddedTunnelProvider.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this._canElevate=t.elevation,this._privacyOptions=t.privacyOptions,this._canChangeProtocol=t.protocol}get canChangeProtocol(){return this._canChangeProtocol}get canElevate(){return this._canElevate}get canChangePrivacy(){return this._privacyOptions.length>0}get privacyOptions(){return this._privacyOptions}get tunnels(){return this.getTunnels()}async getTunnels(){let t=[],n=Array.from(this._tunnels.values());for(let i of n){let o=Array.from(i.values());for(let s of o){let a=await s.value;a&&typeof a!="string"&&t.push(a)}}return t}async dispose(){super.dispose();for(let t of this._tunnels.values()){for(let{value:n}of t.values())await n.then(i=>typeof i!="string"?i?.dispose():void 0);t.clear()}this._tunnels.clear()}setEnvironmentTunnel(t,n,i,o,s){this.addTunnelToMap(t,n,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:n,localAddress:i,privacy:o,protocol:s,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,n){(pd(t)||ud(t))&&(t=cd[0]);let i=this.getTunnelFromMap(t,n);if(i)return++i.refcount,i.value}openTunnel(t,n,i,o,s,a=!1,l,d){this.logService.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${n}:${i} on local port ${s}.`);let u=this._tunnelProvider??t;if(!u)return;if(n||(n="localhost"),o||(o=this.defaultTunnelHost),this._tunnelProvider&&this._factoryInProgress.has(i)){this.logService.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}let p=this.retainOrCreateTunnel(u,n,i,o,s,a,l,d);return p?p.then(h=>{if(h){if(typeof h=="string")return this.logService.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.removeEmptyOrErrorTunnelFromMap(n,i),h}else{this.logService.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.removeEmptyOrErrorTunnelFromMap(n,i);return}this.logService.trace("ForwardedPorts: (TunnelService) New tunnel established.");let g=this.makeTunnel(h);return(h.tunnelRemoteHost!==n||h.tunnelRemotePort!==i)&&this.logService.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),l&&h.privacy!==l&&this.logService.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this._onTunnelOpened.fire(g),g}):(this.logService.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),p)}makeTunnel(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.logService.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);let n=this._tunnels.get(t.tunnelRemoteHost);if(n){let i=n.get(t.tunnelRemotePort);i&&(i.refcount--,await this.tryDisposeTunnel(t.tunnelRemoteHost,t.tunnelRemotePort,i))}}}}async tryDisposeTunnel(t,n,i){if(i.refcount<=0){this.logService.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${n}.`);let o=i.value.then(async s=>{s&&typeof s!="string"&&(await s.dispose(!0),this._onTunnelClosed.fire({host:s.tunnelRemoteHost,port:s.tunnelRemotePort}))});return this._tunnels.has(t)&&this._tunnels.get(t).delete(n),o}}async closeTunnel(t,n){this.logService.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${n} `);let i=this._tunnels.get(t);if(i&&i.has(n)){let o=i.get(n);o.refcount=0,await this.tryDisposeTunnel(t,n,o)}}addTunnelToMap(t,n,i){this._tunnels.has(t)||this._tunnels.set(t,new Map),this._tunnels.get(t).set(n,{refcount:1,value:i})}async removeEmptyOrErrorTunnelFromMap(t,n){let i=this._tunnels.get(t);if(i){let o=i.get(n),s=o?await o.value:void 0;(!s||typeof s=="string")&&i.delete(n),i.size===0&&this._tunnels.delete(t)}}getTunnelFromMap(t,n){let i=[t];ud(t)?(i.push(...cd),i.push(...Nu)):pd(t)&&i.push(...Nu);let o=i.map(s=>this._tunnels.get(s));for(let s of o){let a=s?.get(n);if(a)return a}}canTunnel(t){return!!kD(t)}createWithProvider(t,n,i,o,s,a,l){this.logService.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${n}:${i} on local port ${o}.`);let d=i;this._factoryInProgress.add(d);let u=o===void 0?i:o,p={elevationRequired:s?this.isPortPrivileged(u):!1},h={remoteAddress:{host:n,port:i},localAddressPort:o,privacy:a,public:a?a!=="private":void 0,protocol:l},g=t.forwardPort(h,p);return g?(this.addTunnelToMap(n,i,g),g.finally(()=>{this.logService.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this._factoryInProgress.delete(d)})):this._factoryInProgress.delete(d),g}};Tg=T([S(0,je),S(1,Xe)],Tg);var Joe=k("editSessionIdentityService");var ase=k("workspaceTrustEnablementService"),lse=k("workspaceTrustManagementService");var dse=k("workspaceTrustRequestService");var hd=k("textModelService");var wg="";var _s=class extends O{_onWillDispose=this._register(new E);onWillDispose=this._onWillDispose.event;resolved=!1;async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}};var Qr=k("modelService");var md=k("ILanguageDetectionService"),bx="languageDetection";var yr=class extends _s{constructor(t,n,i,o,s){super();this.modelService=t;this.languageService=n;this.languageDetectionService=i;this.accessibilityService=o;s&&this.handleExistingModel(s)}static AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;textEditorModelHandle=void 0;createdEditorModel;modelDisposeListener=this._register(new fn);autoDetectLanguageThrottler=this._register(new ga(yr.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY));handleExistingModel(t){let n=this.modelService.getModel(t);if(!n)throw new Error(`Document with resource ${t.toString(!0)} does not exist`);this.textEditorModelHandle=t,this.registerModelDisposeListener(n)}registerModelDisposeListener(t){this.modelDisposeListener.value=t.onWillDispose(()=>{this.textEditorModelHandle=void 0,this.dispose()})}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}_hasLanguageSetExplicitly=!1;get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}setLanguageId(t,n){this._hasLanguageSetExplicitly=!0,this.setLanguageIdInternal(t,n)}setLanguageIdInternal(t,n){this.isResolved()&&(!t||t===this.textEditorModel.getLanguageId()||this.textEditorModel.setLanguage(this.languageService.createById(t),n))}installModelListeners(t){let n=this._register(t.onDidChangeLanguage(i=>{i.source!==bx&&(this._hasLanguageSetExplicitly=!0,n.dispose())}))}getLanguageId(){return this.textEditorModel?.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger(()=>this.doAutoDetectLanguage())}async doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(this.getLanguageId()??Ao))return;let t=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),n=this.getLanguageId();if(t&&t!==n&&!this.isDisposed()){this.setLanguageIdInternal(t,bx);let i=this.languageService.getLanguageName(t);this.accessibilityService.alert(c("languageAutoDetected","Language {0} was automatically detected and set as the language mode.",i??t))}}createTextEditorModel(t,n,i){let o=this.getFirstLineText(t),s=this.getOrCreateLanguage(n,this.languageService,i,o);return this.doCreateTextEditorModel(t,s,n)}doCreateTextEditorModel(t,n,i){let o=i&&this.modelService.getModel(i);return o?this.updateTextEditorModel(t,n.languageId):(o=this.modelService.createModel(t,n,i),this.createdEditorModel=!0,this.registerModelDisposeListener(o)),this.textEditorModelHandle=o.uri,o}getFirstLineText(t){let n=t;return typeof n.getFirstLineText=="function"?n.getFirstLineText(1e3):t.getLineContent(1).substr(0,1e3)}getOrCreateLanguage(t,n,i,o){return!i||i===Ao?n.createByFilepathOrFirstLine(t??null,o):n.createById(i)}updateTextEditorModel(t,n){this.isResolved()&&(t&&this.modelService.updateModel(this.textEditorModel,t),n&&n!==Ao&&this.textEditorModel.getLanguageId()!==n&&this.textEditorModel.setLanguage(this.languageService.createById(n)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}};yr=T([S(0,Qr),S(1,Xi),S(2,md),S(3,Pm)],yr);var gd=k("workingCopyBackupService");var Rs=k("textResourceConfigurationService"),sle=k("textResourcePropertiesService");function mA(r,e,t){let n=0;for(let o=0;o<r.length;o++)r.charAt(o)==="	"?n=Cs.nextIndentTabStop(n,e):n++;let i="";if(!t){let o=Math.floor(n/e);n=n%e;for(let s=0;s<o;s++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}function DD(r,e,t){let n=ko(r);return n===-1&&(n=r.length),mA(r.substring(0,n),e,t)+r.substring(n)}var Ma=class r{constructor(e,t,n){this.startOffset=e;this.endOffset=t;this.newLength=n}static fromModelContentChanges(e){return e.map(n=>{let i=$.lift(n.range);return new r(Ts(i.getStartPosition()),Ts(i.getEndPosition()),aD(n.text))}).reverse()}toString(){return`[${kn(this.startOffset)}...${kn(this.endOffset)}) -> ${kn(this.newLength)}`}},kg=class{nextEditIdx=0;deltaOldToNewLineCount=0;deltaOldToNewColumnCount=0;deltaLineIdxInOld=-1;edits;constructor(e){this.edits=e.map(t=>vx.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:Ra(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?ct(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):ct(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=kn(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?ct(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):ct(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Es(n,e)){this.nextEditIdx++;let i=kn(n),o=kn(this.translateOldToCur(t.endOffsetBeforeObj)),s=i.lineCount-o.lineCount;this.deltaOldToNewLineCount+=s;let a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},vx=class r{static from(e){return new r(e.startOffset,e.endOffset,e.newLength)}endOffsetBeforeObj;endOffsetAfterObj;offsetObj;constructor(e,t,n){this.endOffsetBeforeObj=kn(t),this.endOffsetAfterObj=kn(ot(e,n)),this.offsetObj=kn(e)}};function PD(r){if(r.length===0)return null;if(r.length===1)return r[0];let e=0;function t(){if(e>=r.length)return null;let s=e,a=r[s].listHeight;for(e++;e<r.length&&r[e].listHeight===a;)e++;return e-s>=2?yx(s===0&&e===r.length?r:r.slice(s,e),!1):r[s]}let n=t(),i=t();if(!i)return n;for(let s=t();s;s=t())_D(n,i)<=_D(i,s)?(n=Ix(n,i),i=s):i=Ix(i,s);return Ix(n,i)}function yx(r,e=!1){if(r.length===0)return null;if(r.length===1)return r[0];let t=r.length;for(;t>3;){let n=t>>1;for(let i=0;i<n;i++){let o=i<<1;r[i]=gi.create23(r[o],r[o+1],o+3===t?r[o+2]:null,e)}t=n}return gi.create23(r[0],r[1],t>=3?r[2]:null,e)}function _D(r,e){return Math.abs(r.listHeight-e.listHeight)}function Ix(r,e){return r.listHeight===e.listHeight?gi.create23(r,e,null,!1):r.listHeight>e.listHeight?gA(r,e):fA(e,r)}function gA(r,e){r=r.toMutable();let t=r,n=[],i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){let s=n[o];i?s.childrenLength>=3?i=gi.create23(s.unappendChild(),i,null,!1):(s.appendChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?gi.create23(r,i,null,!1):r}function fA(r,e){r=r.toMutable();let t=r,n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let o=n.length-1;o>=0;o--){let s=n[o];i?s.childrenLength>=3?i=gi.create23(i,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?gi.create23(i,r,null,!1):r}var Dg=class{nextNodes;offsets;idxs;lastOffset=zt;constructor(e){this.nextNodes=[e],this.offsets=[zt],this.idxs=[]}readLongestNodeAt(e,t){if(Oo(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){let n=Fu(this.nextNodes);if(!n)return;let i=Fu(this.offsets);if(Oo(e,i))return;if(Oo(i,e))if(ot(i,n.length)<=e)this.nextNodeAfterCurrent();else{let o=xx(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{let o=xx(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){let e=Fu(this.offsets),t=Fu(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let n=Fu(this.nextNodes),i=xx(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(ot(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}};function xx(r,e=-1){for(;;){if(e++,e>=r.childrenLength)return-1;if(r.getChild(e))return e}}function Fu(r){return r.length>0?r[r.length-1]:void 0}function Cx(r,e,t,n){return new Sx(r,e,t,n).parseDocument()}var Sx=class{constructor(e,t,n,i){this.tokenizer=e;this.createImmutableLists=i;if(n&&i)throw new Error("Not supported");this.oldNodeReader=n?new Dg(n):void 0,this.positionMapper=new kg(t)}oldNodeReader;positionMapper;_itemsConstructed=0;_itemsFromCache=0;get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(tn.getEmpty(),0);return e||(e=gi.getEmpty()),e}parseList(e,t){let n=[];for(;;){let o=this.tryReadChildFromCache(e);if(!o){let s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;o=this.parseChild(e,t+1)}o.kind===4&&o.childrenLength===0||n.push(o)}return this.oldNodeReader?PD(n):yx(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!td(t)){let n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>t!==null&&!Oo(i.length,t)?!1:i.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;let n=this.tokenizer.read();switch(n.kind){case 2:return new pg(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new vr(n.length);let i=e.merge(n.bracketIds),o=this.parseList(i,t+1),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===n.bracketId||s.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),_u.create(n.astNode,o,s.astNode)):_u.create(n.astNode,o,null)}default:throw new Error("unexpected")}}};function Ex(r,e){if(r.length===0)return e;if(e.length===0)return r;let t=new ta(LD(r)),n=LD(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=t.dequeue();function o(d){if(d===void 0){let p=t.takeWhile(h=>!0)||[];return i&&p.unshift(i),p}let u=[];for(;i&&!td(d);){let[p,h]=i.splitAt(d);u.push(p),d=Ra(p.lengthAfter,d),i=h??t.dequeue()}return td(d)||u.push(new Bu(!1,d,d)),u}let s=[];function a(d,u,p){if(s.length>0&&jy(s[s.length-1].endOffset,d)){let h=s[s.length-1];s[s.length-1]=new Ma(h.startOffset,u,ot(h.newLength,p))}else s.push({startOffset:d,endOffset:u,newLength:p})}let l=zt;for(let d of n){let u=o(d.lengthBefore);if(d.modified){let p=sD(u,g=>g.lengthBefore),h=ot(l,p);a(l,h,d.lengthAfter),l=h}else for(let p of u){let h=l;l=ot(l,p.lengthBefore),p.modified&&a(h,l,p.lengthAfter)}}return s}var Bu=class r{constructor(e,t,n){this.modified=e;this.lengthBefore=t;this.lengthAfter=n}splitAt(e){let t=Ra(e,this.lengthAfter);return jy(t,zt)?[this,void 0]:this.modified?[new r(this.modified,this.lengthBefore,e),new r(this.modified,zt,t)]:[new r(this.modified,e,e),new r(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${kn(this.lengthBefore)} -> ${kn(this.lengthAfter)}`}};function LD(r){let e=[],t=zt;for(let n of r){let i=Ra(t,n.startOffset);td(i)||e.push(new Bu(!1,i,i));let o=Ra(n.startOffset,n.endOffset);e.push(new Bu(!0,o,n.newLength)),t=n.endOffset}return e}var _g=class extends O{constructor(t,n){super();this.textModel=t;this.getLanguageConfiguration=n;if(t.tokenization.hasTokens)t.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),o=new cg(this.textModel.getValue(),i);this.initialAstWithoutTokens=Cx(o,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}didChangeEmitter=new E;initialAstWithoutTokens;astWithTokens;denseKeyProvider=new eg;brackets=new lg(this.denseKeyProvider,this.getLanguageConfiguration);didLanguageChange(t){return this.brackets.didLanguageChange(t)}onDidChange=this.didChangeEmitter.event;queuedTextEditsForInitialAstWithoutTokens=[];queuedTextEdits=[];handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){let t=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,t||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:t}){let n=t.map(i=>new Ma(ct(i.fromLineNumber-1,0),ct(i.toLineNumber,0),ct(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(n,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(t){let n=Ma.fromModelContentChanges(t.changes);this.handleEdits(n,!1)}handleEdits(t,n){let i=Ex(this.queuedTextEdits,t);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!n&&(this.queuedTextEditsForInitialAstWithoutTokens=Ex(this.queuedTextEditsForInitialAstWithoutTokens,t))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(t,n,i){let s=n,a=new dg(this.textModel,this.brackets);return Cx(a,t,s,i)}getBracketsInRange(t,n){this.flushQueue();let i=ct(t.startLineNumber-1,t.startColumn-1),o=ct(t.endLineNumber-1,t.endColumn-1);return new xo(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens;Tx(a,zt,a.length,i,o,s,0,0,new Map,n)})}getBracketPairsInRange(t,n){this.flushQueue();let i=Ts(t.getStartPosition()),o=Ts(t.getEndPosition());return new xo(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens,l=new wx(s,n,this.textModel);kx(a,zt,a.length,i,o,l,0,new Map)})}getFirstBracketAfter(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return MD(n,zt,n.length,Ts(t))}getFirstBracketBefore(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return AD(n,zt,n.length,Ts(t))}};function AD(r,e,t,n){if(r.kind===4||r.kind===2){let i=[];for(let o of r.children)t=ot(e,o.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=i.length-1;o>=0;o--){let{nodeOffsetStart:s,nodeOffsetEnd:a}=i[o];if(Oo(s,n)){let l=AD(r.children[o],s,a,n);if(l)return l}}return null}else{if(r.kind===3)return null;if(r.kind===1){let i=ws(e,t);return{bracketInfo:r.bracketInfo,range:i}}}return null}function MD(r,e,t,n){if(r.kind===4||r.kind===2){for(let i of r.children){if(t=ot(e,i.length),Oo(n,t)){let o=MD(i,e,t,n);if(o)return o}e=t}return null}else{if(r.kind===3)return null;if(r.kind===1){let i=ws(e,t);return{bracketInfo:r.bracketInfo,range:i}}}return null}function Tx(r,e,t,n,i,o,s,a,l,d,u=!1){if(s>200)return!0;e:for(;;)switch(r.kind){case 4:{let p=r.childrenLength;for(let h=0;h<p;h++){let g=r.getChild(h);if(g){if(t=ot(e,g.length),Es(e,i)&&nd(t,n)){if(nd(t,i)){r=g;continue e}if(!Tx(g,e,t,n,i,o,s,0,l,d))return!1}e=t}}return!0}case 2:{let p=!d||!r.closingBracket||r.closingBracket.bracketInfo.closesColorized(r.openingBracket.bracketInfo),h=0;if(l){let b=l.get(r.openingBracket.text);b===void 0&&(b=0),h=b,p&&(b++,l.set(r.openingBracket.text,b))}let g=r.childrenLength;for(let b=0;b<g;b++){let f=r.getChild(b);if(f){if(t=ot(e,f.length),Es(e,i)&&nd(t,n)){if(nd(t,i)&&f.kind!==1){r=f,p?(s++,a=h+1):a=h;continue e}if((p||f.kind!==1||!r.closingBracket)&&!Tx(f,e,t,n,i,o,p?s+1:s,p?h+1:h,l,d,!r.closingBracket))return!1}e=t}}return l?.set(r.openingBracket.text,h),!0}case 3:{let p=ws(e,t);return o(new Ou(p,s-1,0,!0))}case 1:{let p=ws(e,t);return o(new Ou(p,s-1,a-1,u))}case 0:return!0}}var wx=class{constructor(e,t,n){this.push=e;this.includeMinIndentation=t;this.textModel=n}};function kx(r,e,t,n,i,o,s,a){if(s>200)return!0;let l=!0;if(r.kind===2){let d=0;if(a){let h=a.get(r.openingBracket.text);h===void 0&&(h=0),d=h,h++,a.set(r.openingBracket.text,h)}let u=ot(e,r.openingBracket.length),p=-1;if(o.includeMinIndentation&&(p=r.computeMinIndentation(e,o.textModel)),l=o.push(new hg(ws(e,t),ws(e,u),r.closingBracket?ws(ot(u,r.child?.length||zt),t):void 0,s,d,r,p)),e=u,l&&r.child){let h=r.child;if(t=ot(e,h.length),Es(e,i)&&nd(t,n)&&(l=kx(h,e,t,n,i,o,s+1,a),!l))return!1}a?.set(r.openingBracket.text,d)}else{let d=e;for(let u of r.children){let p=d;if(d=ot(d,u.length),Es(p,i)&&Es(n,d)&&(l=kx(u,p,d,n,i,o,s,a),!l))return!1}}return l}var Pg=class extends O{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}bracketPairsTree=this._register(new fn);onDidChangeEmitter=new E;onDidChange=this.onDidChangeEmitter.event;get canBuildAST(){return this.textModel.getValueLength()<=5e6}bracketsRequested=!1;handleLanguageConfigurationServiceChange(t){(!t.languageId||this.bracketPairsTree.value?.object.didLanguageChange(t.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(t){this.bracketPairsTree.value?.object.handleContentChanged(t)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(t){this.bracketPairsTree.value?.object.handleDidChangeTokens(t)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let t=new le;this.bracketPairsTree.value=bA(t.add(new _g(this.textModel,n=>this.languageConfigurationService.getLanguageConfiguration(n))),t),t.add(this.bracketPairsTree.value.object.onDidChange(n=>this.onDidChangeEmitter.fire(n))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!1)||xo.empty}getBracketPairsInRangeWithMinIndentation(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!0)||xo.empty}getBracketsInRange(t,n=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(t,n)||xo.empty}findMatchingBracketUp(t,n,i){let o=this.textModel.validatePosition(n),s=this.textModel.getLanguageIdAtPosition(o.lineNumber,o.column);if(this.canBuildAST){let a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(t);if(!a)return null;let l=this.getBracketPairsInRange($.fromPositions(n,n)).findLast(d=>a.closes(d.openingBracketInfo));return l?l.openingBracketRange:null}else{let a=t.toLowerCase(),l=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!l)return null;let d=l.textIsBracket[a];return d?Rg(this._findMatchingBracketUp(d,o,Dx(i))):null}}matchBracket(t,n){if(this.canBuildAST){let i=this.getBracketPairsInRange($.fromPositions(t,t)).filter(o=>o.closingBracketRange!==void 0&&(o.openingBracketRange.containsPosition(t)||o.closingBracketRange.containsPosition(t))).findLastMaxBy(Xb(o=>o.openingBracketRange.containsPosition(t)?o.openingBracketRange:o.closingBracketRange,$.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{let i=Dx(n);return this._matchBracket(this.textModel.validatePosition(t),i)}}_establishBracketSearchOffsets(t,n,i,o){let s=n.getCount(),a=n.getLanguageId(o),l=Math.max(0,t.column-1-i.maxBracketLength);for(let u=o-1;u>=0;u--){let p=n.getEndOffset(u);if(p<=l)break;if(Qi(n.getStandardTokenType(u))||n.getLanguageId(u)!==a){l=p;break}}let d=Math.min(n.getLineContent().length,t.column-1+i.maxBracketLength);for(let u=o+1;u<s;u++){let p=n.getStartOffset(u);if(p>=d)break;if(Qi(n.getStandardTokenType(u))||n.getLanguageId(u)!==a){d=p;break}}return{searchStartOffset:l,searchEndOffset:d}}_matchBracket(t,n){let i=t.lineNumber,o=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),a=o.findTokenIndexAtOffset(t.column-1);if(a<0)return null;let l=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId(a)).brackets;if(l&&!Qi(o.getStandardTokenType(a))){let{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(t,o,l,a),p=null;for(;;){let h=Bn.findNextBracketInRange(l.forwardRegex,i,s,d,u);if(!h)break;if(h.startColumn<=t.column&&t.column<=h.endColumn){let g=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),b=this._matchFoundBracket(h,l.textIsBracket[g],l.textIsOpenBracket[g],n);if(b){if(b instanceof Mo)return null;p=b}}d=h.endColumn-1}if(p)return p}if(a>0&&o.getStartOffset(a)===t.column-1){let d=a-1,u=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId(d)).brackets;if(u&&!Qi(o.getStandardTokenType(d))){let{searchStartOffset:p,searchEndOffset:h}=this._establishBracketSearchOffsets(t,o,u,d),g=Bn.findPrevBracketInRange(u.reversedRegex,i,s,p,h);if(g&&g.startColumn<=t.column&&t.column<=g.endColumn){let b=s.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),f=this._matchFoundBracket(g,u.textIsBracket[b],u.textIsOpenBracket[b],n);if(f)return f instanceof Mo?null:f}}}return null}_matchFoundBracket(t,n,i,o){if(!n)return null;let s=i?this._findMatchingBracketDown(n,t.getEndPosition(),o):this._findMatchingBracketUp(n,t.getStartPosition(),o);return s?s instanceof Mo?s:[t,s]:null}_findMatchingBracketUp(t,n,i){let o=t.languageId,s=t.reversedRegex,a=-1,l=0,d=(u,p,h,g)=>{for(;;){if(i&&++l%100===0&&!i())return Mo.INSTANCE;let b=Bn.findPrevBracketInRange(s,u,p,h,g);if(!b)break;let f=p.substring(b.startColumn-1,b.endColumn-1).toLowerCase();if(t.isOpen(f)?a++:t.isClose(f)&&a--,a===0)return b;g=b.startColumn-1}return null};for(let u=n.lineNumber;u>=1;u--){let p=this.textModel.tokenization.getLineTokens(u),h=p.getCount(),g=this.textModel.getLineContent(u),b=h-1,f=g.length,v=g.length;u===n.lineNumber&&(b=p.findTokenIndexAtOffset(n.column-1),f=n.column-1,v=n.column-1);let D=!0;for(;b>=0;b--){let R=p.getLanguageId(b)===o&&!Qi(p.getStandardTokenType(b));if(R)D?f=p.getStartOffset(b):(f=p.getStartOffset(b),v=p.getEndOffset(b));else if(D&&f!==v){let A=d(u,g,f,v);if(A)return A}D=R}if(D&&f!==v){let R=d(u,g,f,v);if(R)return R}}return null}_findMatchingBracketDown(t,n,i){let o=t.languageId,s=t.forwardRegex,a=1,l=0,d=(p,h,g,b)=>{for(;;){if(i&&++l%100===0&&!i())return Mo.INSTANCE;let f=Bn.findNextBracketInRange(s,p,h,g,b);if(!f)break;let v=h.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(t.isOpen(v)?a++:t.isClose(v)&&a--,a===0)return f;g=f.endColumn-1}return null},u=this.textModel.getLineCount();for(let p=n.lineNumber;p<=u;p++){let h=this.textModel.tokenization.getLineTokens(p),g=h.getCount(),b=this.textModel.getLineContent(p),f=0,v=0,D=0;p===n.lineNumber&&(f=h.findTokenIndexAtOffset(n.column-1),v=n.column-1,D=n.column-1);let R=!0;for(;f<g;f++){let A=h.getLanguageId(f)===o&&!Qi(h.getStandardTokenType(f));if(A)R||(v=h.getStartOffset(f)),D=h.getEndOffset(f);else if(R&&v!==D){let B=d(p,b,v,D);if(B)return B}R=A}if(R&&v!==D){let A=d(p,b,v,D);if(A)return A}}return null}findPrevBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(n)||null;let i=null,o=null,s=null;for(let a=n.lineNumber;a>=1;a--){let l=this.textModel.tokenization.getLineTokens(a),d=l.getCount(),u=this.textModel.getLineContent(a),p=d-1,h=u.length,g=u.length;if(a===n.lineNumber){p=l.findTokenIndexAtOffset(n.column-1),h=n.column-1,g=n.column-1;let f=l.getLanguageId(p);i!==f&&(i=f,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let b=!0;for(;p>=0;p--){let f=l.getLanguageId(p);if(i!==f){if(o&&s&&b&&h!==g){let D=Bn.findPrevBracketInRange(o.reversedRegex,a,u,h,g);if(D)return this._toFoundBracket(s,D);b=!1}i=f,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}let v=!!o&&!Qi(l.getStandardTokenType(p));if(v)b?h=l.getStartOffset(p):(h=l.getStartOffset(p),g=l.getEndOffset(p));else if(s&&o&&b&&h!==g){let D=Bn.findPrevBracketInRange(o.reversedRegex,a,u,h,g);if(D)return this._toFoundBracket(s,D)}b=v}if(s&&o&&b&&h!==g){let f=Bn.findPrevBracketInRange(o.reversedRegex,a,u,h,g);if(f)return this._toFoundBracket(s,f)}}return null}findNextBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(n)||null;let i=this.textModel.getLineCount(),o=null,s=null,a=null;for(let l=n.lineNumber;l<=i;l++){let d=this.textModel.tokenization.getLineTokens(l),u=d.getCount(),p=this.textModel.getLineContent(l),h=0,g=0,b=0;if(l===n.lineNumber){h=d.findTokenIndexAtOffset(n.column-1),g=n.column-1,b=n.column-1;let v=d.getLanguageId(h);o!==v&&(o=v,s=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew)}let f=!0;for(;h<u;h++){let v=d.getLanguageId(h);if(o!==v){if(a&&s&&f&&g!==b){let R=Bn.findNextBracketInRange(s.forwardRegex,l,p,g,b);if(R)return this._toFoundBracket(a,R);f=!1}o=v,s=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew}let D=!!s&&!Qi(d.getStandardTokenType(h));if(D)f||(g=d.getStartOffset(h)),b=d.getEndOffset(h);else if(a&&s&&f&&g!==b){let R=Bn.findNextBracketInRange(s.forwardRegex,l,p,g,b);if(R)return this._toFoundBracket(a,R)}f=D}if(a&&s&&f&&g!==b){let v=Bn.findNextBracketInRange(s.forwardRegex,l,p,g,b);if(v)return this._toFoundBracket(a,v)}}return null}findEnclosingBrackets(t,n){let i=this.textModel.validatePosition(t);if(this.canBuildAST){let b=$.fromPositions(i),f=this.getBracketPairsInRange($.fromPositions(i,i)).findLast(v=>v.closingBracketRange!==void 0&&v.range.strictContainsRange(b));return f?[f.openingBracketRange,f.closingBracketRange]:null}let o=Dx(n),s=this.textModel.getLineCount(),a=new Map,l=[],d=(b,f)=>{if(!a.has(b)){let v=[];for(let D=0,R=f?f.brackets.length:0;D<R;D++)v[D]=0;a.set(b,v)}l=a.get(b)},u=0,p=(b,f,v,D,R)=>{for(;;){if(o&&++u%100===0&&!o())return Mo.INSTANCE;let A=Bn.findNextBracketInRange(b.forwardRegex,f,v,D,R);if(!A)break;let B=v.substring(A.startColumn-1,A.endColumn-1).toLowerCase(),W=b.textIsBracket[B];if(W&&(W.isOpen(B)?l[W.index]++:W.isClose(B)&&l[W.index]--,l[W.index]===-1))return this._matchFoundBracket(A,W,!1,o);D=A.endColumn-1}return null},h=null,g=null;for(let b=i.lineNumber;b<=s;b++){let f=this.textModel.tokenization.getLineTokens(b),v=f.getCount(),D=this.textModel.getLineContent(b),R=0,A=0,B=0;if(b===i.lineNumber){R=f.findTokenIndexAtOffset(i.column-1),A=i.column-1,B=i.column-1;let H=f.getLanguageId(R);h!==H&&(h=H,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,d(h,g))}let W=!0;for(;R<v;R++){let H=f.getLanguageId(R);if(h!==H){if(g&&W&&A!==B){let Y=p(g,b,D,A,B);if(Y)return Rg(Y);W=!1}h=H,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,d(h,g)}let ue=!!g&&!Qi(f.getStandardTokenType(R));if(ue)W||(A=f.getStartOffset(R)),B=f.getEndOffset(R);else if(g&&W&&A!==B){let Y=p(g,b,D,A,B);if(Y)return Rg(Y)}W=ue}if(g&&W&&A!==B){let H=p(g,b,D,A,B);if(H)return Rg(H)}}return null}_toFoundBracket(t,n){if(!n)return null;let i=this.textModel.getValueInRange(n);i=i.toLowerCase();let o=t.getBracketInfo(i);return o?{range:n,bracketInfo:o}:null}};function bA(r,e){return{object:r,dispose:()=>e?.dispose()}}function Dx(r){if(typeof r>"u")return()=>!0;{let e=Date.now();return()=>Date.now()-e<=r}}var Mo=class r{static INSTANCE=new r;_searchCanceledBrand=void 0;constructor(){}};function Rg(r){return r instanceof Mo?null:r}var vA={IconContribution:"base.contributions.icons"},IA;(e=>{function r(t,n){let i=t.defaults;for(;Dt.isThemeIcon(i);){let o=fd.getIcon(i.id);if(!o)return;i=o.defaults}return i}e.getDefinition=r})(IA||={});var yA;(t=>{function r(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}t.toJSONObject=r;function e(n){let i=o=>Oe(o)?o:void 0;if(n&&Array.isArray(n.src)&&n.src.every(o=>Oe(o.format)&&Oe(o.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(o=>({format:o.format,location:L.parse(o.location)}))}}t.fromJSONObject=e})(yA||={});var _x=class{_onDidChange=new E;onDidChange=this._onDidChange.event;iconsById;iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:c("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:c("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}};iconReferenceSchema={type:"string",pattern:`^${Dt.iconNameExpression}$`,enum:[],enumDescriptions:[]};iconFontsById;constructor(){this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){let o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;let l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return o}let s={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];let t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){let n=this.iconFontsById[e];return n||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(o,s)=>o.id.localeCompare(s.id),t=o=>{for(;Dt.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let i=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(let o of i.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${Dt.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(let o of i.filter(s=>!Dt.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}},fd=new _x;De.add(vA.IconContribution,fd);function No(r,e,t,n){return fd.registerIcon(r,e,t,n)}function xA(){let r=Ww();for(let e in r){let t="\\"+r[e].toString(16);fd.registerIcon(e,{fontCharacter:t})}}xA();var FD="vscode://schemas/icons",BD=De.as(Lo.JSONContribution);BD.registerSchema(FD,fd.getIconSchema());var ND=new li(()=>BD.notifySchemaChanged(FD),200);fd.onDidChange(()=>{ND.isScheduled()||ND.schedule()});var Tce=No("widget-close",ee.close,c("widgetClose","Icon for the close action in widgets.")),wce=No("goto-previous-location",ee.arrowUp,c("previousChangeIcon","Icon for goto previous editor location.")),kce=No("goto-next-location",ee.arrowDown,c("nextChangeIcon","Icon for goto next editor location.")),Dce=Dt.modify(ee.sync,"spin"),_ce=Dt.modify(ee.loading,"spin");var UD=k("themeService");var Xce=ee.file,Qce=ee.folder;var SA={ThemingContribution:"base.contributions.theming"},Rx=class{themingParticipants=[];onThemingParticipantAddedEmitter;constructor(){this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new E}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),j(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}},WD=new Rx;De.add(SA.ThemingContribution,WD);function Og(r){return WD.onColorThemeChange(r)}var Lg=class extends O{constructor(t){super();this.themeService=t;this.theme=t.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(n=>this.onThemeChange(n)))}theme;onThemeChange(t){this.theme=t,this.updateStyles()}updateStyles(){}getColor(t,n){let i=this.theme.getColor(t);return i&&n&&(i=n(i,this.theme)),i?i.toString():null}};function CA(r){return r!==null&&typeof r=="object"&&"light"in r&&"dark"in r}var EA={ColorContribution:"base.contributions.colors"},TA="default",Px=class{_onDidChangeSchema=new E;onDidChangeSchema=this._onDidChangeSchema.event;colorsById;colorSchema={type:"object",properties:{}};colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]};constructor(){this.colorsById={}}notifyThemeUpdate(e){for(let t of Object.keys(this.colorsById)){let n=e.getColor(t);n&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body=`\${1:${n.toString()}}`)}this._onDidChangeSchema.fire()}registerColor(e,t,n,i=!1,o){let s={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:o};this.colorsById[e]=s;let a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),i&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=c("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:TA,description:c("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];let t=this.colorReferenceSchema.enum.indexOf(e);t!==-1&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let n=this.colorsById[e];if(n?.defaults){let i=CA(n.defaults)?n.defaults[t.type]:n.defaults;return xr(i,t)}}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){let e=(t,n)=>{let i=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return i!==o?i-o:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}},Ag=new Px;De.add(EA.ColorContribution,Ag);function y(r,e,t,n,i){return Ag.registerColor(r,e,t,n,i)}function wA(r,e){switch(r.op){case 0:return xr(r.value,e)?.darken(r.factor);case 1:return xr(r.value,e)?.lighten(r.factor);case 2:return xr(r.value,e)?.transparent(r.factor);case 3:{let t=xr(r.background,e);return t?xr(r.value,e)?.makeOpaque(t):xr(r.value,e)}case 4:for(let t of r.values){let n=xr(t,e);if(n)return n}return;case 6:return xr(e.defines(r.if)?r.then:r.else,e);case 5:{let t=xr(r.value,e);if(!t)return;let n=xr(r.background,e);return n?t.isDarkerThan(n)?F.getLighterColor(t,n,r.factor).transparent(r.transparency):F.getDarkerColor(t,n,r.factor).transparent(r.transparency):t.transparent(r.factor*r.transparency)}default:throw YE(r)}}function Yr(r,e){return{op:0,value:r,factor:e}}function fi(r,e){return{op:1,value:r,factor:e}}function ve(r,e){return{op:2,value:r,factor:e}}function Lx(...r){return{op:4,values:r}}function zD(r,e,t){return{op:6,if:r,then:e,else:t}}function Ox(r,e,t,n){return{op:5,value:r,background:e,factor:t,transparency:n}}function xr(r,e){if(r!==null){if(typeof r=="string")return r[0]==="#"?F.fromHex(r):e.getColor(r);if(r instanceof F)return r;if(typeof r=="object")return wA(r,e)}}var HD="vscode://schemas/workbench-colors",KD=De.as(Lo.JSONContribution);KD.registerSchema(HD,Ag.getColorSchema());var VD=new li(()=>KD.notifySchemaChanged(HD),200);Ag.onDidChangeSchema(()=>{VD.isScheduled()||VD.schedule()});var Ve=y("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},c("foreground","Overall foreground color. This color is only used if not overridden by a component.")),hue=y("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},c("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),mue=y("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},c("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),gue=y("descriptionForeground",{light:"#717171",dark:ve(Ve,.7),hcDark:ve(Ve,.7),hcLight:ve(Ve,.7)},c("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),Uu=y("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},c("iconForeground","The default color for icons in the workbench.")),Yi=y("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},c("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Le=y("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},c("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Et=y("contrastActiveBorder",{light:null,dark:null,hcDark:Yi,hcLight:Yi},c("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),fue=y("selection.background",null,c("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),bue=y("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},c("textLinkForeground","Foreground color for links in text.")),vue=y("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},c("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),Iue=y("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:F.black,hcLight:"#292929"},c("textSeparatorForeground","Color for text separators.")),yue=y("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},c("textPreformatForeground","Foreground color for preformatted text segments.")),xue=y("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},c("textPreformatBackground","Background color for preformatted text segments.")),Sue=y("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},c("textBlockQuoteBackground","Background color for block quotes in text.")),Cue=y("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:F.white,hcLight:"#292929"},c("textBlockQuoteBorder","Border color for block quotes in text.")),Eue=y("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:F.black,hcLight:"#F2F2F2"},c("textCodeBlockBackground","Background color for code blocks in text."));var _ue=y("sash.hoverBorder",Yi,c("sashActiveBorder","Border color of active sashes.")),Mg=y("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:F.black,hcLight:"#0F4A85"},c("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Rue=y("badge.foreground",{dark:F.white,light:"#333",hcDark:F.white,hcLight:F.white},c("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),$D=y("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},c("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),GD=y("scrollbarSlider.background",{dark:F.fromHex("#797979").transparent(.4),light:F.fromHex("#646464").transparent(.4),hcDark:ve(Le,.6),hcLight:ve(Le,.4)},c("scrollbarSliderBackground","Scrollbar slider background color.")),qD=y("scrollbarSlider.hoverBackground",{dark:F.fromHex("#646464").transparent(.7),light:F.fromHex("#646464").transparent(.7),hcDark:ve(Le,.8),hcLight:ve(Le,.8)},c("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),jD=y("scrollbarSlider.activeBackground",{dark:F.fromHex("#BFBFBF").transparent(.4),light:F.fromHex("#000000").transparent(.6),hcDark:Le,hcLight:Le},c("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),Pue=y("progressBar.background",{dark:F.fromHex("#0E70C0"),light:F.fromHex("#0E70C0"),hcDark:Le,hcLight:Le},c("progressBarBackground","Background color of the progress bar that can show for long running operations."));var Na=y("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:F.black,hcLight:F.white},c("editorBackground","Editor background color.")),Fue=y("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:F.white,hcLight:Ve},c("editorForeground","Editor default foreground color.")),Bue=y("editorStickyScroll.background",Na,c("editorStickyScrollBackground","Background color of sticky scroll in the editor")),Uue=y("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:F.fromHex("#0F4A85").transparent(.1)},c("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),Wue=y("editorStickyScroll.border",{dark:null,light:null,hcDark:Le,hcLight:Le},c("editorStickyScrollBorder","Border color of sticky scroll in the editor")),Vue=y("editorStickyScroll.shadow",$D,c("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),bi=y("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:F.white},c("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Wu=y("editorWidget.foreground",Ve,c("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),kA=y("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Le,hcLight:Le},c("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),zue=y("editorWidget.resizeBorder",null,c("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),Hue=y("editorError.background",null,c("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Fx=y("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},c("editorError.foreground","Foreground color of error squigglies in the editor.")),Kue=y("editorError.border",{dark:null,light:null,hcDark:F.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},c("errorBorder","If set, color of double underlines for errors in the editor.")),n1=y("editorWarning.background",null,c("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Jr=y("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},c("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),yd=y("editorWarning.border",{dark:null,light:null,hcDark:F.fromHex("#FFCC00").transparent(.8),hcLight:F.fromHex("#FFCC00").transparent(.8)},c("warningBorder","If set, color of double underlines for warnings in the editor.")),$ue=y("editorInfo.background",null,c("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Fo=y("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},c("editorInfo.foreground","Foreground color of info squigglies in the editor.")),xd=y("editorInfo.border",{dark:null,light:null,hcDark:F.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},c("infoBorder","If set, color of double underlines for infos in the editor.")),Gue=y("editorHint.foreground",{dark:F.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},c("editorHint.foreground","Foreground color of hint squigglies in the editor.")),que=y("editorHint.border",{dark:null,light:null,hcDark:F.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},c("hintBorder","If set, color of double underlines for hints in the editor.")),jue=y("editorLink.activeForeground",{dark:"#4E94CE",light:F.blue,hcDark:F.cyan,hcLight:"#292929"},c("activeLinkForeground","Color of active links.")),bd=y("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},c("editorSelectionBackground","Color of the editor selection.")),Xue=y("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:F.white},c("editorSelectionForeground","Color of the selected text for high contrast.")),Que=y("editor.inactiveSelectionBackground",{light:ve(bd,.5),dark:ve(bd,.5),hcDark:ve(bd,.7),hcLight:ve(bd,.5)},c("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Yue=y("editor.selectionHighlightBackground",{light:Ox(bd,Na,.3,.6),dark:Ox(bd,Na,.3,.6),hcDark:null,hcLight:null},c("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),Jue=y("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Et,hcLight:Et},c("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),Zue=y("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},c("editorFindMatch","Color of the current search match.")),epe=y("editor.findMatchForeground",null,c("editorFindMatchForeground","Text color of the current search match.")),Sr=y("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},c("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),tpe=y("editor.findMatchHighlightForeground",null,c("findMatchHighlightForeground","Foreground color of the other search matches."),!0),npe=y("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},c("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),ipe=y("editor.findMatchBorder",{light:null,dark:null,hcDark:Et,hcLight:Et},c("editorFindMatchBorder","Border color of the current search match.")),Ps=y("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Et,hcLight:Et},c("findMatchHighlightBorder","Border color of the other search matches.")),rpe=y("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:ve(Et,.4),hcLight:ve(Et,.4)},c("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),ope=y("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},c("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),XD=y("editorHoverWidget.background",bi,c("hoverBackground","Background color of the editor hover.")),spe=y("editorHoverWidget.foreground",Wu,c("hoverForeground","Foreground color of the editor hover.")),ape=y("editorHoverWidget.border",kA,c("hoverBorder","Border color of the editor hover.")),lpe=y("editorHoverWidget.statusBarBackground",{dark:fi(XD,.2),light:Yr(XD,.05),hcDark:bi,hcLight:bi},c("statusBarBackground","Background color of the editor hover status bar.")),i1=y("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:F.white,hcLight:F.black},c("editorInlayHintForeground","Foreground color of inline hints")),r1=y("editorInlayHint.background",{dark:ve(Mg,.1),light:ve(Mg,.1),hcDark:ve(F.white,.1),hcLight:ve(Mg,.1)},c("editorInlayHintBackground","Background color of inline hints")),dpe=y("editorInlayHint.typeForeground",i1,c("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),cpe=y("editorInlayHint.typeBackground",r1,c("editorInlayHintBackgroundTypes","Background color of inline hints for types")),upe=y("editorInlayHint.parameterForeground",i1,c("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),ppe=y("editorInlayHint.parameterBackground",r1,c("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),DA=y("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},c("editorLightBulbForeground","The color used for the lightbulb actions icon.")),hpe=y("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},c("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),mpe=y("editorLightBulbAi.foreground",DA,c("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),gpe=y("editor.snippetTabstopHighlightBackground",{dark:new F(new Ce(124,124,124,.3)),light:new F(new Ce(10,50,100,.2)),hcDark:new F(new Ce(124,124,124,.3)),hcLight:new F(new Ce(10,50,100,.2))},c("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),fpe=y("editor.snippetTabstopHighlightBorder",null,c("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),bpe=y("editor.snippetFinalTabstopHighlightBackground",null,c("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),vpe=y("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new F(new Ce(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},c("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),QD=new F(new Ce(155,185,85,.2)),YD=new F(new Ce(255,0,0,.2)),Ipe=y("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},c("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),ype=y("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},c("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),xpe=y("diffEditor.insertedLineBackground",{dark:QD,light:QD,hcDark:null,hcLight:null},c("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Spe=y("diffEditor.removedLineBackground",{dark:YD,light:YD,hcDark:null,hcLight:null},c("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Cpe=y("diffEditorGutter.insertedLineBackground",null,c("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),Epe=y("diffEditorGutter.removedLineBackground",null,c("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),Tpe=y("diffEditorOverview.insertedForeground",null,c("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),wpe=y("diffEditorOverview.removedForeground",null,c("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),kpe=y("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},c("diffEditorInsertedOutline","Outline color for the text that got inserted.")),Dpe=y("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},c("diffEditorRemovedOutline","Outline color for text that got removed.")),_pe=y("diffEditor.border",{dark:null,light:null,hcDark:Le,hcLight:Le},c("diffEditorBorder","Border color between the two text editors.")),Rpe=y("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},c("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),Ppe=y("diffEditor.unchangedRegionBackground","sideBar.background",c("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),Lpe=y("diffEditor.unchangedRegionForeground","foreground",c("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),Ope=y("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},c("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),o1=y("widget.shadow",{dark:ve(F.black,.36),light:ve(F.black,.16),hcDark:null,hcLight:null},c("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Ape=y("widget.border",{dark:null,light:null,hcDark:Le,hcLight:Le},c("widgetBorder","Border color of widgets such as find/replace inside the editor.")),JD=y("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},c("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),Mpe=y("toolbar.hoverOutline",{dark:null,light:null,hcDark:Et,hcLight:Et},c("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),Npe=y("toolbar.activeBackground",{dark:fi(JD,.1),light:Yr(JD,.1),hcDark:null,hcLight:null},c("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),Fpe=y("breadcrumb.foreground",ve(Ve,.8),c("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Bpe=y("breadcrumb.background",Na,c("breadcrumbsBackground","Background color of breadcrumb items.")),Upe=y("breadcrumb.focusForeground",{light:Yr(Ve,.2),dark:fi(Ve,.1),hcDark:fi(Ve,.1),hcLight:fi(Ve,.1)},c("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Wpe=y("breadcrumb.activeSelectionForeground",{light:Yr(Ve,.2),dark:fi(Ve,.1),hcDark:fi(Ve,.1),hcLight:fi(Ve,.1)},c("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),Vpe=y("breadcrumbPicker.background",bi,c("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),s1=.5,ZD=F.fromHex("#40C8AE").transparent(s1),e1=F.fromHex("#40A6FF").transparent(s1),t1=F.fromHex("#606060").transparent(.4),Bx=.4,vd=1,Ax=y("merge.currentHeaderBackground",{dark:ZD,light:ZD,hcDark:null,hcLight:null},c("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),zpe=y("merge.currentContentBackground",ve(Ax,Bx),c("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Mx=y("merge.incomingHeaderBackground",{dark:e1,light:e1,hcDark:null,hcLight:null},c("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Hpe=y("merge.incomingContentBackground",ve(Mx,Bx),c("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Nx=y("merge.commonHeaderBackground",{dark:t1,light:t1,hcDark:null,hcLight:null},c("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Kpe=y("merge.commonContentBackground",ve(Nx,Bx),c("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Id=y("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},c("mergeBorder","Border color on headers and the splitter in inline merge-conflicts.")),$pe=y("editorOverviewRuler.currentContentForeground",{dark:ve(Ax,vd),light:ve(Ax,vd),hcDark:Id,hcLight:Id},c("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),Gpe=y("editorOverviewRuler.incomingContentForeground",{dark:ve(Mx,vd),light:ve(Mx,vd),hcDark:Id,hcLight:Id},c("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),qpe=y("editorOverviewRuler.commonContentForeground",{dark:ve(Nx,vd),light:ve(Nx,vd),hcDark:Id,hcLight:Id},c("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),jpe=y("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},c("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Xpe=y("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",c("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Qpe=y("problemsErrorIcon.foreground",Fx,c("problemsErrorIconForeground","The color used for the problems error icon.")),Ype=y("problemsWarningIcon.foreground",Jr,c("problemsWarningIconForeground","The color used for the problems warning icon.")),Jpe=y("problemsInfoIcon.foreground",Fo,c("problemsInfoIconForeground","The color used for the problems info icon."));var a1=y("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},c("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),rhe=y("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},c("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),ohe=y("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},c("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),she=y("minimap.infoHighlight",{dark:Fo,light:Fo,hcDark:xd,hcLight:xd},c("minimapInfo","Minimap marker color for infos.")),ahe=y("minimap.warningHighlight",{dark:Jr,light:Jr,hcDark:yd,hcLight:yd},c("overviewRuleWarning","Minimap marker color for warnings.")),lhe=y("minimap.errorHighlight",{dark:new F(new Ce(255,18,18,.7)),light:new F(new Ce(255,18,18,.7)),hcDark:new F(new Ce(255,50,50,1)),hcLight:"#B5200D"},c("minimapError","Minimap marker color for errors.")),dhe=y("minimap.background",null,c("minimapBackground","Minimap background color.")),che=y("minimap.foregroundOpacity",F.fromHex("#000f"),c("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),uhe=y("minimapSlider.background",ve(GD,.5),c("minimapSliderBackground","Minimap slider background color.")),phe=y("minimapSlider.hoverBackground",ve(qD,.5),c("minimapSliderHoverBackground","Minimap slider background color when hovering.")),hhe=y("minimapSlider.activeBackground",ve(jD,.5),c("minimapSliderActiveBackground","Minimap slider background color when clicked on."));var Ihe=y("charts.foreground",Ve,c("chartsForeground","The foreground color used in charts.")),yhe=y("charts.lines",ve(Ve,.5),c("chartsLines","The color used for horizontal lines in charts.")),xhe=y("charts.red",Fx,c("chartsRed","The red color used in chart visualizations.")),She=y("charts.blue",Fo,c("chartsBlue","The blue color used in chart visualizations.")),Che=y("charts.yellow",Jr,c("chartsYellow","The yellow color used in chart visualizations.")),Ehe=y("charts.orange",a1,c("chartsOrange","The orange color used in chart visualizations.")),The=y("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},c("chartsGreen","The green color used in chart visualizations.")),whe=y("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},c("chartsPurple","The purple color used in chart visualizations."));var Lhe=y("input.background",{dark:"#3C3C3C",light:F.white,hcDark:F.black,hcLight:F.white},c("inputBoxBackground","Input box background.")),Ohe=y("input.foreground",Ve,c("inputBoxForeground","Input box foreground.")),Ahe=y("input.border",{dark:null,light:null,hcDark:Le,hcLight:Le},c("inputBoxBorder","Input box border.")),_A=y("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Le,hcLight:Le},c("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),RA=y("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},c("inputOption.hoverBackground","Background color of activated options in input fields.")),PA=y("inputOption.activeBackground",{dark:ve(Yi,.4),light:ve(Yi,.2),hcDark:F.transparent,hcLight:F.transparent},c("inputOption.activeBackground","Background hover color of options in input fields.")),LA=y("inputOption.activeForeground",{dark:F.white,light:F.black,hcDark:Ve,hcLight:Ve},c("inputOption.activeForeground","Foreground color of activated options in input fields.")),Mhe=y("input.placeholderForeground",{light:ve(Ve,.5),dark:ve(Ve,.5),hcDark:ve(Ve,.7),hcLight:ve(Ve,.7)},c("inputPlaceholderForeground","Input box foreground color for placeholder text.")),Nhe=y("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:F.black,hcLight:F.white},c("inputValidationInfoBackground","Input validation background color for information severity.")),Fhe=y("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Ve},c("inputValidationInfoForeground","Input validation foreground color for information severity.")),Bhe=y("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Le,hcLight:Le},c("inputValidationInfoBorder","Input validation border color for information severity.")),Uhe=y("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:F.black,hcLight:F.white},c("inputValidationWarningBackground","Input validation background color for warning severity.")),Whe=y("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Ve},c("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Vhe=y("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Le,hcLight:Le},c("inputValidationWarningBorder","Input validation border color for warning severity.")),zhe=y("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:F.black,hcLight:F.white},c("inputValidationErrorBackground","Input validation background color for error severity.")),Hhe=y("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Ve},c("inputValidationErrorForeground","Input validation foreground color for error severity.")),Khe=y("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Le,hcLight:Le},c("inputValidationErrorBorder","Input validation border color for error severity.")),Bg=y("dropdown.background",{dark:"#3C3C3C",light:F.white,hcDark:F.black,hcLight:F.white},c("dropdownBackground","Dropdown background.")),$he=y("dropdown.listBackground",{dark:null,light:null,hcDark:F.black,hcLight:F.white},c("dropdownListBackground","Dropdown list background.")),Ux=y("dropdown.foreground",{dark:"#F0F0F0",light:Ve,hcDark:F.white,hcLight:Ve},c("dropdownForeground","Dropdown foreground.")),OA=y("dropdown.border",{dark:Bg,light:"#CECECE",hcDark:Le,hcLight:Le},c("dropdownBorder","Dropdown border.")),AA=y("button.foreground",F.white,c("buttonForeground","Button foreground color.")),Ghe=y("button.separator",ve(AA,.4),c("buttonSeparator","Button separator color.")),Ng=y("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},c("buttonBackground","Button background color.")),qhe=y("button.hoverBackground",{dark:fi(Ng,.2),light:Yr(Ng,.2),hcDark:Ng,hcLight:Ng},c("buttonHoverBackground","Button background color when hovering.")),jhe=y("button.border",Le,c("buttonBorder","Button border color.")),Xhe=y("button.secondaryForeground",{dark:F.white,light:F.white,hcDark:F.white,hcLight:Ve},c("buttonSecondaryForeground","Secondary button foreground color.")),l1=y("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:F.white},c("buttonSecondaryBackground","Secondary button background color.")),Qhe=y("button.secondaryHoverBackground",{dark:fi(l1,.2),light:Yr(l1,.2),hcDark:null,hcLight:null},c("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Fg=y("radio.activeForeground",LA,c("radioActiveForeground","Foreground color of active radio option.")),Yhe=y("radio.activeBackground",PA,c("radioBackground","Background color of active radio option.")),Jhe=y("radio.activeBorder",_A,c("radioActiveBorder","Border color of the active radio option.")),Zhe=y("radio.inactiveForeground",null,c("radioInactiveForeground","Foreground color of inactive radio option.")),eme=y("radio.inactiveBackground",null,c("radioInactiveBackground","Background color of inactive radio option.")),tme=y("radio.inactiveBorder",{light:ve(Fg,.2),dark:ve(Fg,.2),hcDark:ve(Fg,.4),hcLight:ve(Fg,.2)},c("radioInactiveBorder","Border color of the inactive radio option.")),nme=y("radio.inactiveHoverBackground",RA,c("radioHoverBackground","Background color of inactive active radio option when hovering.")),ime=y("checkbox.background",Bg,c("checkbox.background","Background color of checkbox widget.")),rme=y("checkbox.selectBackground",bi,c("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),ome=y("checkbox.foreground",Ux,c("checkbox.foreground","Foreground color of checkbox widget.")),sme=y("checkbox.border",OA,c("checkbox.border","Border color of checkbox widget.")),ame=y("checkbox.selectBorder",Uu,c("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),lme=y("keybindingLabel.background",{dark:new F(new Ce(128,128,128,.17)),light:new F(new Ce(221,221,221,.4)),hcDark:F.transparent,hcLight:F.transparent},c("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),dme=y("keybindingLabel.foreground",{dark:F.fromHex("#CCCCCC"),light:F.fromHex("#555555"),hcDark:F.white,hcLight:Ve},c("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),cme=y("keybindingLabel.border",{dark:new F(new Ce(51,51,51,.6)),light:new F(new Ce(204,204,204,.4)),hcDark:new F(new Ce(111,195,223)),hcLight:Le},c("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),ume=y("keybindingLabel.bottomBorder",{dark:new F(new Ce(68,68,68,.6)),light:new F(new Ce(187,187,187,.4)),hcDark:new F(new Ce(111,195,223)),hcLight:Ve},c("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut."));var bme=y("list.focusBackground",null,c("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vme=y("list.focusForeground",null,c("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ime=y("list.focusOutline",{dark:Yi,light:Yi,hcDark:Et,hcLight:Et},c("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),yme=y("list.focusAndSelectionOutline",null,c("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Fa=y("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:F.fromHex("#0F4A85").transparent(.1)},c("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Vu=y("list.activeSelectionForeground",{dark:F.white,light:F.white,hcDark:null,hcLight:null},c("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),d1=y("list.activeSelectionIconForeground",null,c("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),xme=y("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:F.fromHex("#0F4A85").transparent(.1)},c("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Sme=y("list.inactiveSelectionForeground",null,c("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Cme=y("list.inactiveSelectionIconForeground",null,c("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Eme=y("list.inactiveFocusBackground",null,c("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Tme=y("list.inactiveFocusOutline",null,c("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),wme=y("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:F.white.transparent(.1),hcLight:F.fromHex("#0F4A85").transparent(.1)},c("listHoverBackground","List/Tree background when hovering over items using the mouse.")),kme=y("list.hoverForeground",null,c("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Dme=y("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},c("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),_me=y("list.dropBetweenBackground",{dark:Uu,light:Uu,hcDark:null,hcLight:null},c("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Ug=y("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Yi,hcLight:Yi},c("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Rme=y("list.focusHighlightForeground",{dark:Ug,light:zD(Fa,Ug,"#BBE7FF"),hcDark:Ug,hcLight:Ug},c("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),Pme=y("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},c("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),Lme=y("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},c("listErrorForeground","Foreground color of list items containing errors.")),Ome=y("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},c("listWarningForeground","Foreground color of list items containing warnings.")),Ame=y("listFilterWidget.background",{light:Yr(bi,0),dark:fi(bi,0),hcDark:bi,hcLight:bi},c("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Mme=y("listFilterWidget.outline",{dark:F.transparent,light:F.transparent,hcDark:"#f38518",hcLight:"#007ACC"},c("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Nme=y("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Le,hcLight:Le},c("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),Fme=y("listFilterWidget.shadow",o1,c("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),Bme=y("list.filterMatchBackground",{dark:Sr,light:Sr,hcDark:null,hcLight:null},c("listFilterMatchHighlight","Background color of the filtered match.")),Ume=y("list.filterMatchBorder",{dark:Ps,light:Ps,hcDark:Le,hcLight:Et},c("listFilterMatchHighlightBorder","Border color of the filtered match.")),Wme=y("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},c("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized.")),MA=y("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},c("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Vme=y("tree.inactiveIndentGuidesStroke",ve(MA,.4),c("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),zme=y("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},c("tableColumnsBorder","Table border color between columns.")),Hme=y("tree.tableOddRowsBackground",{dark:ve(Ve,.04),light:ve(Ve,.04),hcDark:null,hcLight:null},c("tableOddRowsBackgroundColor","Background color for odd table rows.")),Kme=y("editorActionList.background",bi,c("editorActionListBackground","Action List background color.")),$me=y("editorActionList.foreground",Wu,c("editorActionListForeground","Action List foreground color.")),Gme=y("editorActionList.focusForeground",Vu,c("editorActionListFocusForeground","Action List foreground color for the focused item.")),qme=y("editorActionList.focusBackground",Fa,c("editorActionListFocusBackground","Action List background color for the focused item."));var Zme=y("menu.border",{dark:null,light:null,hcDark:Le,hcLight:Le},c("menuBorder","Border color of menus.")),ege=y("menu.foreground",Ux,c("menuForeground","Foreground color of menu items.")),tge=y("menu.background",Bg,c("menuBackground","Background color of menu items.")),nge=y("menu.selectionForeground",Vu,c("menuSelectionForeground","Foreground color of the selected menu item in menus.")),ige=y("menu.selectionBackground",Fa,c("menuSelectionBackground","Background color of the selected menu item in menus.")),rge=y("menu.selectionBorder",{dark:null,light:null,hcDark:Et,hcLight:Et},c("menuSelectionBorder","Border color of the selected menu item in menus.")),oge=y("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Le,hcLight:Le},c("menuSeparatorBackground","Color of a separator menu item in menus."));var uge=y("quickInput.background",bi,c("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),pge=y("quickInput.foreground",Wu,c("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),hge=y("quickInputTitle.background",{dark:new F(new Ce(255,255,255,.105)),light:new F(new Ce(0,0,0,.06)),hcDark:"#000000",hcLight:F.white},c("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),mge=y("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:F.white,hcLight:"#0F4A85"},c("pickerGroupForeground","Quick picker color for grouping labels.")),gge=y("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:F.white,hcLight:"#0F4A85"},c("pickerGroupBorder","Quick picker color for grouping borders.")),c1=y("quickInput.list.focusBackground",null,"",void 0,c("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),fge=y("quickInputList.focusForeground",Vu,c("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),bge=y("quickInputList.focusIconForeground",d1,c("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),vge=y("quickInputList.focusBackground",{dark:Lx(c1,Fa),light:Lx(c1,Fa),hcDark:null,hcLight:null},c("quickInput.listFocusBackground","Quick picker background color for the focused item."));var Cge=y("search.resultsInfoForeground",{light:Ve,dark:ve(Ve,.65),hcDark:Ve,hcLight:Ve},c("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),Ege=y("searchEditor.findMatchBackground",{light:ve(Sr,.66),dark:ve(Sr,.66),hcDark:Sr,hcLight:Sr},c("searchEditor.queryMatch","Color of the Search Editor query matches.")),Tge=y("searchEditor.findMatchBorder",{light:ve(Ps,.66),dark:ve(Ps,.66),hcDark:Ps,hcLight:Ps},c("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var NA=y("editor.lineHighlightBackground",null,c("lineHighlight","Background color for the highlight of line at the cursor position.")),zge=y("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Le},c("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),Hge=y("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},c("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),Kge=y("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Et,hcLight:Et},c("rangeHighlightBorder","Background color of the border around highlighted ranges.")),$ge=y("editor.symbolHighlightBackground",{dark:Sr,light:Sr,hcDark:null,hcLight:null},c("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),Gge=y("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Et,hcLight:Et},c("symbolHighlightBorder","Background color of the border around highlighted symbols.")),u1=y("editorCursor.foreground",{dark:"#AEAFAD",light:F.black,hcDark:F.white,hcLight:"#0F4A85"},c("caret","Color of the editor cursor.")),p1=y("editorCursor.background",null,c("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),qge=y("editorMultiCursor.primary.foreground",u1,c("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),jge=y("editorMultiCursor.primary.background",p1,c("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Xge=y("editorMultiCursor.secondary.foreground",u1,c("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),Qge=y("editorMultiCursor.secondary.background",p1,c("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),h1=y("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},c("editorWhitespaces","Color of whitespace characters in the editor.")),Yge=y("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:F.white,hcLight:"#292929"},c("editorLineNumbers","Color of editor line numbers.")),FA=y("editorIndentGuide.background",h1,c("editorIndentGuides","Color of the editor indentation guides."),!1,c("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),BA=y("editorIndentGuide.activeBackground",h1,c("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,c("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),Jge=y("editorIndentGuide.background1",FA,c("editorIndentGuides1","Color of the editor indentation guides (1).")),Zge=y("editorIndentGuide.background2","#00000000",c("editorIndentGuides2","Color of the editor indentation guides (2).")),efe=y("editorIndentGuide.background3","#00000000",c("editorIndentGuides3","Color of the editor indentation guides (3).")),tfe=y("editorIndentGuide.background4","#00000000",c("editorIndentGuides4","Color of the editor indentation guides (4).")),nfe=y("editorIndentGuide.background5","#00000000",c("editorIndentGuides5","Color of the editor indentation guides (5).")),ife=y("editorIndentGuide.background6","#00000000",c("editorIndentGuides6","Color of the editor indentation guides (6).")),rfe=y("editorIndentGuide.activeBackground1",BA,c("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),ofe=y("editorIndentGuide.activeBackground2","#00000000",c("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),sfe=y("editorIndentGuide.activeBackground3","#00000000",c("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),afe=y("editorIndentGuide.activeBackground4","#00000000",c("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),lfe=y("editorIndentGuide.activeBackground5","#00000000",c("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),dfe=y("editorIndentGuide.activeBackground6","#00000000",c("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),UA=y("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Et,hcLight:Et},c("editorActiveLineNumber","Color of editor active line number"),!1,c("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),cfe=y("editorLineNumber.activeForeground",UA,c("editorActiveLineNumber","Color of editor active line number")),ufe=y("editorLineNumber.dimmedForeground",null,c("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),pfe=y("editorRuler.foreground",{dark:"#5A5A5A",light:F.lightgrey,hcDark:F.white,hcLight:"#292929"},c("editorRuler","Color of the editor rulers.")),hfe=y("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},c("editorCodeLensForeground","Foreground color of editor CodeLens")),mfe=y("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},c("editorBracketMatchBackground","Background color behind matching brackets")),gfe=y("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Le,hcLight:Le},c("editorBracketMatchBorder","Color for matching brackets boxes")),ffe=y("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},c("editorOverviewRulerBorder","Color of the overview ruler border.")),bfe=y("editorOverviewRuler.background",null,c("editorOverviewRulerBackground","Background color of the editor overview ruler.")),vfe=y("editorGutter.background",Na,c("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),Ife=y("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:F.fromHex("#fff").transparent(.8),hcLight:Le},c("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),yfe=y("editorUnnecessaryCode.opacity",{dark:F.fromHex("#000a"),light:F.fromHex("#0007"),hcDark:null,hcLight:null},c("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),xfe=y("editorGhostText.border",{dark:null,light:null,hcDark:F.fromHex("#fff").transparent(.8),hcLight:F.fromHex("#292929").transparent(.8)},c("editorGhostTextBorder","Border color of ghost text in the editor.")),Sfe=y("editorGhostText.foreground",{dark:F.fromHex("#ffffff56"),light:F.fromHex("#0007"),hcDark:null,hcLight:null},c("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),Cfe=y("editorGhostText.background",null,c("editorGhostTextBackground","Background color of the ghost text in the editor.")),WA=new F(new Ce(0,122,204,.6)),Efe=y("editorOverviewRuler.rangeHighlightForeground",WA,c("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Tfe=y("editorOverviewRuler.errorForeground",{dark:new F(new Ce(255,18,18,.7)),light:new F(new Ce(255,18,18,.7)),hcDark:new F(new Ce(255,50,50,1)),hcLight:"#B5200D"},c("overviewRuleError","Overview ruler marker color for errors.")),wfe=y("editorOverviewRuler.warningForeground",{dark:Jr,light:Jr,hcDark:yd,hcLight:yd},c("overviewRuleWarning","Overview ruler marker color for warnings.")),kfe=y("editorOverviewRuler.infoForeground",{dark:Fo,light:Fo,hcDark:xd,hcLight:xd},c("overviewRuleInfo","Overview ruler marker color for infos.")),m1=y("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},c("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),g1=y("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},c("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),f1=y("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},c("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),b1=y("editorBracketHighlight.foreground4","#00000000",c("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),v1=y("editorBracketHighlight.foreground5","#00000000",c("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),I1=y("editorBracketHighlight.foreground6","#00000000",c("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),y1=y("editorBracketHighlight.unexpectedBracket.foreground",{dark:new F(new Ce(255,18,18,.8)),light:new F(new Ce(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},c("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),Dfe=y("editorBracketPairGuide.background1","#00000000",c("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),_fe=y("editorBracketPairGuide.background2","#00000000",c("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Rfe=y("editorBracketPairGuide.background3","#00000000",c("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Pfe=y("editorBracketPairGuide.background4","#00000000",c("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Lfe=y("editorBracketPairGuide.background5","#00000000",c("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Ofe=y("editorBracketPairGuide.background6","#00000000",c("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Afe=y("editorBracketPairGuide.activeBackground1","#00000000",c("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Mfe=y("editorBracketPairGuide.activeBackground2","#00000000",c("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Nfe=y("editorBracketPairGuide.activeBackground3","#00000000",c("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Ffe=y("editorBracketPairGuide.activeBackground4","#00000000",c("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Bfe=y("editorBracketPairGuide.activeBackground5","#00000000",c("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Ufe=y("editorBracketPairGuide.activeBackground6","#00000000",c("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),Wfe=y("editorUnicodeHighlight.border",Jr,c("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),Vfe=y("editorUnicodeHighlight.background",n1,c("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Og((r,e)=>{let t=r.getColor(Na),n=r.getColor(NA),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)});var Wg=class extends O{constructor(t){super();this.textModel=t;this.colorizationOptions=t.getOptions().bracketPairColorizationOptions,this._register(t.bracketPairs.onDidChange(n=>{this.onDidChangeEmitter.fire()}))}colorizationOptions;colorProvider=new Vg;onDidChangeEmitter=new E;onDidChange=this.onDidChangeEmitter.event;handleDidChangeOptions(t){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(t,n,i,o){return o?[]:n===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(t,!0).map(a=>({id:`bracket${a.range.toString()}-${a.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(a,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:a.range})).toArray():[]}getAllDecorations(t,n){return t===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new $(1,1,this.textModel.getLineCount(),1),t,n):[]}},Vg=class{unexpectedClosingBracketClassName="unexpected-closing-bracket";getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};Og((r,e)=>{let t=[m1,g1,f1,b1,v1,I1],n=new Vg;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${r.getColor(y1)}; }`);let i=t.map(o=>r.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){let s=i[o%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${s}; }`)}});function Sd(r){return r.toString()}var Jn=class r{constructor(e,t,n,i,o,s,a){this.beforeVersionId=e;this.afterVersionId=t;this.beforeEOL=n;this.afterEOL=i;this.beforeCursorState=o;this.afterCursorState=s;this.changes=a}static create(e,t){let n=e.getAlternativeVersionId(),i=zx(e);return new r(n,n,i,i,t,t,[])}append(e,t,n,i,o){t.length>0&&(this.changes=qk(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Gt(e,t?t.length:0,n),n+=4,t)for(let i of t)Gt(e,i.selectionStartLineNumber,n),n+=4,Gt(e,i.selectionStartColumn,n),n+=4,Gt(e,i.positionLineNumber,n),n+=4,Gt(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){let i=$t(e,t);t+=4;for(let o=0;o<i;o++){let s=$t(e,t);t+=4;let a=$t(e,t);t+=4;let l=$t(e,t);t+=4;let d=$t(e,t);t+=4,n.push(new vs(s,a,l,d))}return t}serialize(){let e=10+r._writeSelectionsSize(this.beforeCursorState)+r._writeSelectionsSize(this.afterCursorState)+4;for(let i of this.changes)e+=i.writeSize();let t=new Uint8Array(e),n=0;Gt(t,this.beforeVersionId,n),n+=4,Gt(t,this.afterVersionId,n),n+=4,nm(t,this.beforeEOL,n),n+=1,nm(t,this.afterEOL,n),n+=1,n=r._writeSelections(t,this.beforeCursorState,n),n=r._writeSelections(t,this.afterCursorState,n),Gt(t,this.changes.length,n),n+=4;for(let i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){let t=new Uint8Array(e),n=0,i=$t(t,n);n+=4;let o=$t(t,n);n+=4;let s=tm(t,n);n+=1;let a=tm(t,n);n+=1;let l=[];n=r._readSelections(t,n,l);let d=[];n=r._readSelections(t,n,d);let u=$t(t,n);n+=4;let p=[];for(let h=0;h<u;h++)n=pi.read(t,n,p);return new r(i,o,s,a,l,d,p)}},zg=class{constructor(e,t,n,i){this.label=e;this.code=t;this.model=n,this._data=Jn.create(n,i)}model;_data;get type(){return 0}get resource(){return L.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof Jn?this._data:Jn.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(L.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Jn}append(e,t,n,i,o){this._data instanceof Jn&&this._data.append(e,t,n,i,o)}close(){this._data instanceof Jn&&(this._data=this._data.serialize())}open(){this._data instanceof Jn||(this._data=Jn.deserialize(this._data))}undo(){if(L.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Jn&&(this._data=this._data.serialize());let e=Jn.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(L.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Jn&&(this._data=this._data.serialize());let e=Jn.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Jn&&(this._data=this._data.serialize()),this._data.byteLength+168}},Vx=class{constructor(e,t,n){this.label=e;this.code=t;this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(let i of this._editStackElementsArr){let o=Sd(i.resource);this._editStackElementsMap.set(o,i)}this._delegate=null}type=1;_isOpen;_editStackElementsArr;_editStackElementsMap;_delegate;get resources(){return this._editStackElementsArr.map(e=>e.resource)}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){let e=[];for(let t of this._editStackElementsArr)L.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){let t=Sd(e);return this._editStackElementsMap.has(t)}setModel(e){let t=Sd(L.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=Sd(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,o){let s=Sd(e.uri);this._editStackElementsMap.get(s).append(e,t,n,i,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=Sd(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${qn(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};function zx(r){return r.getEOL()===`
`?0:1}function Wx(r){return r?r instanceof zg||r instanceof Vx:!1}var Hg=class r{_model;_undoRedoService;constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);Wx(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);Wx(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){let n=this._undoRedoService.getLastElement(this._model.uri);if(Wx(n)&&n.canAppend(this._model))return n;let i=new zg(c("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){let t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],zx(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,i){let o=this._getOrCreateEditStackElement(e,i),s=this._model.applyEdits(t,!0),a=r._computeCursorState(n,s),l=s.map((d,u)=>({index:u,textChange:d.textChange}));return l.sort((d,u)=>d.textChange.oldPosition===u.textChange.oldPosition?d.index-u.index:d.textChange.oldPosition-u.textChange.oldPosition),o.append(this._model,l.map(d=>d.textChange),zx(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Ae(n),null}}};var Cd=class extends O{_isDisposed=!1;dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}};function x1(r,e){let t=0,n=0,i=r.length;for(;n<i;){let o=r.charCodeAt(n);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;n++}return n===i?-1:t}var Kg=class extends Cd{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}getLanguageConfiguration(t){return this.languageConfigurationService.getLanguageConfiguration(t)}_computeIndentLevel(t){return x1(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(t,n,i){this.assertNotDisposed();let o=this.textModel.getLineCount();if(t<1||t>o)throw new He("Illegal value for lineNumber");let s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=-2,d=-1,u=-2,p=-1,h=Y=>{if(l!==-1&&(l===-2||l>Y-1)){l=-1,d=-1;for(let oe=Y-2;oe>=0;oe--){let de=this._computeIndentLevel(oe);if(de>=0){l=oe,d=de;break}}}if(u===-2){u=-1,p=-1;for(let oe=Y;oe<o;oe++){let de=this._computeIndentLevel(oe);if(de>=0){u=oe,p=de;break}}}},g=-2,b=-1,f=-2,v=-1,D=Y=>{if(g===-2){g=-1,b=-1;for(let oe=Y-2;oe>=0;oe--){let de=this._computeIndentLevel(oe);if(de>=0){g=oe,b=de;break}}}if(f!==-1&&(f===-2||f<Y-1)){f=-1,v=-1;for(let oe=Y;oe<o;oe++){let de=this._computeIndentLevel(oe);if(de>=0){f=oe,v=de;break}}}},R=0,A=!0,B=0,W=!0,H=0,ue=0;for(let Y=0;A||W;Y++){let oe=t-Y,de=t+Y;Y>1&&(oe<1||oe<n)&&(A=!1),Y>1&&(de>o||de>i)&&(W=!1),Y>5e4&&(A=!1,W=!1);let be=-1;if(A&&oe>=1){let Ye=this._computeIndentLevel(oe-1);Ye>=0?(u=oe-1,p=Ye,be=Math.ceil(Ye/this.textModel.getOptions().indentSize)):(h(oe),be=this._getIndentLevelForWhitespaceLine(a,d,p))}let ge=-1;if(W&&de<=o){let Ye=this._computeIndentLevel(de-1);Ye>=0?(g=de-1,b=Ye,ge=Math.ceil(Ye/this.textModel.getOptions().indentSize)):(D(de),ge=this._getIndentLevelForWhitespaceLine(a,b,v))}if(Y===0){ue=be;continue}if(Y===1){if(de<=o&&ge>=0&&ue+1===ge){A=!1,R=de,B=de,H=ge;continue}if(oe>=1&&be>=0&&be-1===ue){W=!1,R=oe,B=oe,H=be;continue}if(R=t,B=t,H=ue,H===0)return{startLineNumber:R,endLineNumber:B,indent:H}}A&&(be>=H?R=oe:A=!1),W&&(ge>=H?B=de:W=!1)}return{startLineNumber:R,endLineNumber:B,indent:H}}getLinesBracketGuides(t,n,i,o){let s=[];for(let h=t;h<=n;h++)s.push([]);let a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new $(t,1,n,this.textModel.getLineMaxColumn(n))).toArray(),d;if(i&&l.length>0){let h=(t<=i.lineNumber&&i.lineNumber<=n?l:this.textModel.bracketPairs.getBracketPairsInRange($.fromPositions(i)).toArray()).filter(g=>$.strictContainsPosition(g.range,i));d=Gp(h,g=>a||g.range.startLineNumber!==g.range.endLineNumber)?.range}let u=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,p=new Kx;for(let h of l){if(!h.closingBracketRange)continue;let g=d&&h.range.equalsRange(d);if(!g&&!o.includeInactive)continue;let b=p.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,u)+(o.highlightActive&&g?" "+p.activeClassName:""),f=h.openingBracketRange.getStartPosition(),v=h.closingBracketRange.getStartPosition(),D=o.horizontalGuides===2||o.horizontalGuides===1&&g;if(h.range.startLineNumber===h.range.endLineNumber){a&&D&&s[h.range.startLineNumber-t].push(new La(-1,h.openingBracketRange.getEndPosition().column,b,new rd(!1,v.column),-1,-1));continue}let R=this.getVisibleColumnFromPosition(v),A=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),B=Math.min(A,R,h.minVisibleColumnIndentation+1),W=!1;ko(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(W=!0);let Y=Math.max(f.lineNumber,t),oe=Math.min(v.lineNumber,n),de=W?1:0;for(let be=Y;be<oe+de;be++)s[be-t].push(new La(B,-1,b,null,be===f.lineNumber?f.column:-1,be===v.lineNumber?v.column:-1));D&&(f.lineNumber>=t&&A>B&&s[f.lineNumber-t].push(new La(B,-1,b,new rd(!1,f.column),-1,-1)),v.lineNumber<=n&&R>B&&s[v.lineNumber-t].push(new La(B,-1,b,new rd(!W,v.column),-1,-1)))}for(let h of s)h.sort((g,b)=>g.visibleColumn-b.visibleColumn);return s}getVisibleColumnFromPosition(t){return Cs.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(t,n){this.assertNotDisposed();let i=this.textModel.getLineCount();if(t<1||t>i)throw new Error("Illegal value for startLineNumber");if(n<1||n>i)throw new Error("Illegal value for endLineNumber");let o=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=new Array(n-t+1),d=-2,u=-1,p=-2,h=-1;for(let g=t;g<=n;g++){let b=g-t,f=this._computeIndentLevel(g-1);if(f>=0){d=g-1,u=f,l[b]=Math.ceil(f/o.indentSize);continue}if(d===-2){d=-1,u=-1;for(let v=g-2;v>=0;v--){let D=this._computeIndentLevel(v);if(D>=0){d=v,u=D;break}}}if(p!==-1&&(p===-2||p<g-1)){p=-1,h=-1;for(let v=g;v<i;v++){let D=this._computeIndentLevel(v);if(D>=0){p=v,h=D;break}}}l[b]=this._getIndentLevelForWhitespaceLine(a,u,h)}return l}_getIndentLevelForWhitespaceLine(t,n,i){let o=this.textModel.getOptions();return n===-1||i===-1?0:n<i?1+Math.floor(n/o.indentSize):n===i||t?Math.ceil(i/o.indentSize):1+Math.floor(i/o.indentSize)}},Kx=class{activeClassName="indent-active";getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};var $x=class{spacesDiff=0;looksLikeAlignment=!1};function zA(r,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let h=r.charCodeAt(o),g=t.charCodeAt(o);if(h!==g)break}let s=0,a=0;for(let h=o;h<e;h++)r.charCodeAt(h)===32?s++:a++;let l=0,d=0;for(let h=o;h<n;h++)t.charCodeAt(h)===32?l++:d++;if(s>0&&a>0||l>0&&d>0)return;let u=Math.abs(a-d),p=Math.abs(s-l);if(u===0){i.spacesDiff=p,p>0&&0<=l-1&&l-1<r.length&&l<t.length&&t.charCodeAt(l)!==32&&r.charCodeAt(l-1)===32&&r.charCodeAt(r.length-1)===44&&(i.looksLikeAlignment=!0);return}if(p%u===0){i.spacesDiff=p/u;return}}function Gx(r,e,t){let n=Math.min(r.getLineCount(),1e4),i=0,o=0,s="",a=0,l=[2,4,6,8,3,5,7],d=8,u=[0,0,0,0,0,0,0,0,0],p=new $x;for(let b=1;b<=n;b++){let f=r.getLineLength(b),v=r.getLineContent(b),D=f<=65536,R=!1,A=0,B=0,W=0;for(let ue=0,Y=f;ue<Y;ue++){let oe=D?v.charCodeAt(ue):r.getLineCharCode(b,ue);if(oe===9)W++;else if(oe===32)B++;else{R=!0,A=ue;break}}if(!R||(W>0?i++:B>1&&o++,zA(s,a,v,A,p),p.looksLikeAlignment&&!(t&&e===p.spacesDiff)))continue;let H=p.spacesDiff;H<=d&&u[H]++,s=v,a=A}let h=t;i!==o&&(h=i<o);let g=e;if(h){let b=h?0:.1*n;l.forEach(f=>{let v=u[f];v>b&&(b=v,g=f)}),g===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(g=2)}return{insertSpaces:h,tabSize:g}}function Un(r){return(r.metadata&1)>>>0}function nt(r,e){r.metadata=r.metadata&254|e<<0}function jt(r){return(r.metadata&2)>>>1===1}function Ze(r,e){r.metadata=r.metadata&253|(e?1:0)<<1}function _1(r){return(r.metadata&4)>>>2===1}function S1(r,e){r.metadata=r.metadata&251|(e?1:0)<<2}function R1(r){return(r.metadata&64)>>>6===1}function C1(r,e){r.metadata=r.metadata&191|(e?1:0)<<6}function KA(r){return(r.metadata&24)>>>3}function E1(r,e){r.metadata=r.metadata&231|e<<3}function $A(r){return(r.metadata&32)>>>5===1}function T1(r,e){r.metadata=r.metadata&223|(e?1:0)<<5}var Ku=class{metadata;parent;left;right;start;end;delta;maxEnd;id;ownerId;options;cachedVersionId;cachedAbsoluteStart;cachedAbsoluteEnd;range;constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,nt(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,S1(this,!1),C1(this,!1),E1(this,1),T1(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Ze(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;let t=this.options.className;S1(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),C1(this,this.options.glyphMarginClassName!==null),E1(this,this.options.stickiness),T1(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},ye=new Ku(null,0,0);ye.parent=ye;ye.left=ye;ye.right=ye;nt(ye,0);var Td=class{root;requestNormalizeDelta;constructor(){this.root=ye,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,o,s){return this.root===ye?[]:JA(this,e,t,n,i,o,s)}search(e,t,n,i){return this.root===ye?[]:w1(this,e,t,n,i)}collectNodesFromOwner(e){return QA(this,e)}collectNodesPostOrder(){return YA(this)}insert(e){k1(this,e),this._normalizeDeltaIfNecessary()}delete(e){D1(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let n=e,i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;let o=n.start+i,s=n.end+i;n.setCachedOffsets(o,s,t)}acceptReplace(e,t,n,i){let o=jA(this,e,e+t);for(let s=0,a=o.length;s<a;s++){let l=o[s];D1(this,l)}this._normalizeDeltaIfNecessary(),XA(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=o.length;s<a;s++){let l=o[s];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,qA(l,e,e+t,n,i),l.maxEnd=l.end,k1(this,l)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return w1(this,0,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,GA(this))}};function GA(r){let e=r.root,t=0;for(;e!==ye;){if(e.left!==ye&&!jt(e.left)){e=e.left;continue}if(e.right!==ye&&!jt(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Bo(e),Ze(e,!0),Ze(e.left,!1),Ze(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Ze(r.root,!1)}function Ed(r,e,t,n){return r<t?!0:r>t||n===1?!1:n===2?!0:e}function qA(r,e,t,n,i){let o=KA(r),s=o===0||o===2,a=o===1||o===2,l=t-e,d=n,u=Math.min(l,d),p=r.start,h=!1,g=r.end,b=!1;e<=p&&g<=t&&$A(r)&&(r.start=e,h=!0,r.end=e,b=!0);{let v=i?1:l>0?2:0;!h&&Ed(p,s,e,v)&&(h=!0),!b&&Ed(g,a,e,v)&&(b=!0)}if(u>0&&!i){let v=l>d?2:0;!h&&Ed(p,s,e+u,v)&&(h=!0),!b&&Ed(g,a,e+u,v)&&(b=!0)}{let v=i?1:0;!h&&Ed(p,s,t,v)&&(r.start=e+d,h=!0),!b&&Ed(g,a,t,v)&&(r.end=e+d,b=!0)}let f=d-l;h||(r.start=Math.max(0,p+f)),b||(r.end=Math.max(0,g+f)),r.start>r.end&&(r.end=r.start)}function jA(r,e,t){let n=r.root,i=0,o=0,s=0,a=0,l=[],d=0;for(;n!==ye;){if(jt(n)){Ze(n.left,!1),Ze(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!jt(n.left)){if(o=i+n.maxEnd,o<e){Ze(n,!0);continue}if(n.left!==ye){n=n.left;continue}}if(s=i+n.start,s>t){Ze(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(s,a,0),l[d++]=n),Ze(n,!0),n.right!==ye&&!jt(n.right)){i+=n.delta,n=n.right;continue}}return Ze(r.root,!1),l}function XA(r,e,t,n){let i=r.root,o=0,s=0,a=0,l=n-(t-e);for(;i!==ye;){if(jt(i)){Ze(i.left,!1),Ze(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),Bo(i),i=i.parent;continue}if(!jt(i.left)){if(s=o+i.maxEnd,s<e){Ze(i,!0);continue}if(i.left!==ye){i=i.left;continue}}if(a=o+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(r.requestNormalizeDelta=!0),Ze(i,!0);continue}if(Ze(i,!0),i.right!==ye&&!jt(i.right)){o+=i.delta,i=i.right;continue}}Ze(r.root,!1)}function QA(r,e){let t=r.root,n=[],i=0;for(;t!==ye;){if(jt(t)){Ze(t.left,!1),Ze(t.right,!1),t=t.parent;continue}if(t.left!==ye&&!jt(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),Ze(t,!0),t.right!==ye&&!jt(t.right)){t=t.right;continue}}return Ze(r.root,!1),n}function YA(r){let e=r.root,t=[],n=0;for(;e!==ye;){if(jt(e)){Ze(e.left,!1),Ze(e.right,!1),e=e.parent;continue}if(e.left!==ye&&!jt(e.left)){e=e.left;continue}if(e.right!==ye&&!jt(e.right)){e=e.right;continue}t[n++]=e,Ze(e,!0)}return Ze(r.root,!1),t}function w1(r,e,t,n,i){let o=r.root,s=0,a=0,l=0,d=[],u=0;for(;o!==ye;){if(jt(o)){Ze(o.left,!1),Ze(o.right,!1),o===o.parent.right&&(s-=o.parent.delta),o=o.parent;continue}if(o.left!==ye&&!jt(o.left)){o=o.left;continue}a=s+o.start,l=s+o.end,o.setCachedOffsets(a,l,n);let p=!0;if(e&&o.ownerId&&o.ownerId!==e&&(p=!1),t&&_1(o)&&(p=!1),i&&!R1(o)&&(p=!1),p&&(d[u++]=o),Ze(o,!0),o.right!==ye&&!jt(o.right)){s+=o.delta,o=o.right;continue}}return Ze(r.root,!1),d}function JA(r,e,t,n,i,o,s){let a=r.root,l=0,d=0,u=0,p=0,h=[],g=0;for(;a!==ye;){if(jt(a)){Ze(a.left,!1),Ze(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!jt(a.left)){if(d=l+a.maxEnd,d<e){Ze(a,!0);continue}if(a.left!==ye){a=a.left;continue}}if(u=l+a.start,u>t){Ze(a,!0);continue}if(p=l+a.end,p>=e){a.setCachedOffsets(u,p,o);let b=!0;n&&a.ownerId&&a.ownerId!==n&&(b=!1),i&&_1(a)&&(b=!1),s&&!R1(a)&&(b=!1),b&&(h[g++]=a)}if(Ze(a,!0),a.right!==ye&&!jt(a.right)){l+=a.delta,a=a.right;continue}}return Ze(r.root,!1),h}function k1(r,e){if(r.root===ye)return e.parent=ye,e.left=ye,e.right=ye,nt(e,0),r.root=e,r.root;ZA(r,e),Ls(e.parent);let t=e;for(;t!==r.root&&Un(t.parent)===1;)if(t.parent===t.parent.parent.left){let n=t.parent.parent.right;Un(n)===1?(nt(t.parent,0),nt(n,0),nt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,zu(r,t)),nt(t.parent,0),nt(t.parent.parent,1),Hu(r,t.parent.parent))}else{let n=t.parent.parent.left;Un(n)===1?(nt(t.parent,0),nt(n,0),nt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Hu(r,t)),nt(t.parent,0),nt(t.parent.parent,1),zu(r,t.parent.parent))}return nt(r.root,0),e}function ZA(r,e){let t=0,n=r.root,i=e.start,o=e.end;for(;;)if(tM(i,o,n.start+t,n.end+t)<0)if(n.left===ye){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===ye){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=ye,e.right=ye,nt(e,1)}function D1(r,e){let t,n;if(e.left===ye?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===ye?(t=e.left,n=e):(n=eM(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(r.requestNormalizeDelta=!0)),n===r.root){r.root=t,nt(t,0),e.detach(),qx(),Bo(t),r.root.parent=ye;return}let i=Un(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,nt(n,Un(e)),e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==ye&&(n.left.parent=n),n.right!==ye&&(n.right.parent=n)),e.detach(),i){Ls(t.parent),n!==e&&(Ls(n),Ls(n.parent)),qx();return}Ls(t),Ls(t.parent),n!==e&&(Ls(n),Ls(n.parent));let o;for(;t!==r.root&&Un(t)===0;)t===t.parent.left?(o=t.parent.right,Un(o)===1&&(nt(o,0),nt(t.parent,1),zu(r,t.parent),o=t.parent.right),Un(o.left)===0&&Un(o.right)===0?(nt(o,1),t=t.parent):(Un(o.right)===0&&(nt(o.left,0),nt(o,1),Hu(r,o),o=t.parent.right),nt(o,Un(t.parent)),nt(t.parent,0),nt(o.right,0),zu(r,t.parent),t=r.root)):(o=t.parent.left,Un(o)===1&&(nt(o,0),nt(t.parent,1),Hu(r,t.parent),o=t.parent.left),Un(o.left)===0&&Un(o.right)===0?(nt(o,1),t=t.parent):(Un(o.left)===0&&(nt(o.right,0),nt(o,1),zu(r,o),o=t.parent.left),nt(o,Un(t.parent)),nt(t.parent,0),nt(o.left,0),Hu(r,t.parent),t=r.root));nt(t,0),qx()}function eM(r){for(;r.left!==ye;)r=r.left;return r}function qx(){ye.parent=ye,ye.delta=0,ye.start=0,ye.end=0}function zu(r,e){let t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==ye&&(t.left.parent=e),t.parent=e.parent,e.parent===ye?r.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Bo(e),Bo(t)}function Hu(r,e){let t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(r.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==ye&&(t.right.parent=e),t.parent=e.parent,e.parent===ye?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Bo(e),Bo(t)}function P1(r){let e=r.end;if(r.left!==ye){let t=r.left.maxEnd;t>e&&(e=t)}if(r.right!==ye){let t=r.right.maxEnd+r.delta;t>e&&(e=t)}return e}function Bo(r){r.maxEnd=P1(r)}function Ls(r){for(;r!==ye;){let e=P1(r);if(r.maxEnd===e)return;r.maxEnd=e,r=r.parent}}function tM(r,e,t,n){return r===t?e-n:r-t}var wd=class{parent;left;right;color;piece;size_left;lf_left;constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==me)return $g(this.right);let e=this;for(;e.parent!==me&&e.parent.left!==e;)e=e.parent;return e.parent===me?me:e.parent}prev(){if(this.left!==me)return Xx(this.left);let e=this;for(;e.parent!==me&&e.parent.right!==e;)e=e.parent;return e.parent===me?me:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};var me=new wd(null,0);me.parent=me;me.left=me;me.right=me;me.color=0;function $g(r){for(;r.left!==me;)r=r.left;return r}function Xx(r){for(;r.right!==me;)r=r.right;return r}function Qx(r){return r===me?0:r.size_left+r.piece.length+Qx(r.right)}function Yx(r){return r===me?0:r.lf_left+r.piece.lineFeedCnt+Yx(r.right)}function jx(){me.parent=me}function Gu(r,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==me&&(t.left.parent=e),t.parent=e.parent,e.parent===me?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function qu(r,e){let t=e.left;e.left=t.right,t.right!==me&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===me?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function ju(r,e){let t,n;if(e.left===me?(n=e,t=n.right):e.right===me?(n=e,t=n.left):(n=$g(e.right),t=n.right),n===r.root){r.root=t,t.color=0,e.detach(),jx(),r.root.parent=me;return}let i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,$u(r,t)):(n.parent===e?t.parent=n:t.parent=n.parent,$u(r,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==me&&(n.left.parent=n),n.right!==me&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,$u(r,n)),e.detach(),t.parent.left===t){let s=Qx(t),a=Yx(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let l=s-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,Zr(r,t.parent,l,d)}}if($u(r,t.parent),i){jx();return}let o;for(;t!==r.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,Gu(r,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,qu(r,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,Gu(r,t.parent),t=r.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,qu(r,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,Gu(r,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,qu(r,t.parent),t=r.root));t.color=0,jx()}function Jx(r,e){for($u(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){let t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,Gu(r,e)),e.parent.color=0,e.parent.parent.color=1,qu(r,e.parent.parent))}else{let t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,qu(r,e)),e.parent.color=0,e.parent.parent.color=1,Gu(r,e.parent.parent))}r.root.color=0}function Zr(r,e,t,n){for(;e!==r.root&&e!==me;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function $u(r,e){let t=0,n=0;if(e!==r.root){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e!==r.root)for(e=e.parent,t=Qx(e.left)-e.size_left,n=Yx(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==r.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}var nM=999,Cr=class{searchString;isRegex;matchCase;wordSeparators;constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=eS(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=wh(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new xg(t,this.wordSeparators?Xk(this.wordSeparators,[]):null,n?this.searchString:null)}};function eS(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++){let n=r.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;let i=r.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}function Os(r,e,t){if(!t)return new ks(r,null);let n=[];for(let i=0,o=e.length;i<o;i++)n[i]=e[i];return new ks(r,n)}var Gg=class{_lineFeedsOffsets;constructor(e){let t=[],n=0;for(let i=0,o=e.length;i<o;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){let o=n+((i-n)/2>>0);t[o]>=e?i=o-1:t[o+1]>=e?(n=o,i=o):n=o+1}return n+1}},Ba=class{static findMatches(e,t,n,i,o){let s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new As(s.wordSeparators,s.regex),i,o):this._doFindMatchesLineByLine(e,n,s,i,o):[]}static _getMultilineMatchRange(e,t,n,i,o,s){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let d;if(i){let g=i.findLineFeedCountBeforeOffset(o+s.length)-l;d=a+s.length+g}else d=a+s.length;let u=e.getPositionAt(a),p=e.getPositionAt(d);return new $(u.lineNumber,u.column,p.lineNumber,p.column)}static _doFindMatchesMultiline(e,t,n,i,o){let s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new Gg(a):null,d=[],u=0,p;for(n.reset(0);p=n.next(a);)if(d[u++]=Os(this._getMultilineMatchRange(e,s,a,l,p.index,p[0]),p,i),u>=o)return d;return d}static _doFindMatchesLineByLine(e,t,n,i,o){let s=[],a=0;if(t.startLineNumber===t.endLineNumber){let d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,s,i,o),s}let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,s,i,o);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<o;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,s,i,o);if(a<o){let d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,s,i,o)}return s}static _findMatchesInLine(e,t,n,i,o,s,a,l){let d=e.wordSeparators;if(!a&&e.simpleSearch){let h=e.simpleSearch,g=h.length,b=t.length,f=-g;for(;(f=t.indexOf(h,f+g))!==-1;)if((!d||qg(d,t,b,f,g))&&(s[o++]=new ks(new $(n,f+1+i,n,f+1+g+i),null),o>=l))return o;return o}let u=new As(e.wordSeparators,e.regex),p;u.reset(0);do if(p=u.next(t),p&&(s[o++]=Os(new $(n,p.index+1+i,n,p.index+1+p[0].length+i),p,a),o>=l))return o;while(p);return o}static findNextMatch(e,t,n,i){let o=t.parseSearchRequest();if(!o)return null;let s=new As(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,s,i):this._doFindNextMatchLineByLine(e,n,s,i)}static _doFindNextMatchMultiline(e,t,n,i){let o=new Se(t.lineNumber,1),s=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new $(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new Gg(l):null;n.reset(t.column-1);let u=n.next(l);return u?Os(this._getMultilineMatchRange(e,s,l,d,u.index,u[0]),u,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Se(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){let o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),l=this._findFirstMatchInLine(n,a,s,t.column,i);if(l)return l;for(let d=1;d<=o;d++){let u=(s+d-1)%o,p=e.getLineContent(u+1),h=this._findFirstMatchInLine(n,p,u+1,1,i);if(h)return h}return null}static _findFirstMatchInLine(e,t,n,i,o){e.reset(i-1);let s=e.next(t);return s?Os(new $(n,s.index+1,n,s.index+1+s[0].length),s,o):null}static findPreviousMatch(e,t,n,i){let o=t.parseSearchRequest();if(!o)return null;let s=new As(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,i):this._doFindPreviousMatchLineByLine(e,n,s,i)}static _doFindPreviousMatchMultiline(e,t,n,i){let o=this._doFindMatchesMultiline(e,new $(1,1,t.lineNumber,t.column),n,i,10*nM);if(o.length>0)return o[o.length-1];let s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new Se(s,e.getLineMaxColumn(s)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){let o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,s,i);if(l)return l;for(let d=1;d<=o;d++){let u=(o+s-d-1)%o,p=e.getLineContent(u+1),h=this._findLastMatchInLine(n,p,u+1,i);if(h)return h}return null}static _findLastMatchInLine(e,t,n,i){let o=null,s;for(e.reset(0);s=e.next(t);)o=Os(new $(n,s.index+1,n,s.index+1+s[0].length),s,i);return o}};function iM(r,e,t,n,i){if(n===0)return!0;let o=e.charCodeAt(n-1);if(r.get(o)!==0||o===13||o===10)return!0;if(i>0){let s=e.charCodeAt(n);if(r.get(s)!==0)return!0}return!1}function rM(r,e,t,n,i){if(n+i===t)return!0;let o=e.charCodeAt(n+i);if(r.get(o)!==0||o===13||o===10)return!0;if(i>0){let s=e.charCodeAt(n+i-1);if(r.get(s)!==0)return!0}return!1}function qg(r,e,t,n,i){return iM(r,e,t,n,i)&&rM(r,e,t,n,i)}var As=class{_wordSeparators;_searchRegex;_prevMatchStartIndex;_prevMatchLength;constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;let i=n.index,o=n[0].length;if(i===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){Pl(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=o,!this._wordSeparators||qg(this._wordSeparators,e,t,i,o))return n}while(n);return null}};var Uo=65535;function L1(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}var tS=class{constructor(e,t,n,i,o){this.lineStarts=e;this.cr=t;this.lf=n;this.crlf=i;this.isBasicASCII=o}};function eo(r,e=!0){let t=[0],n=1;for(let i=0,o=r.length;i<o;i++){let s=r.charCodeAt(i);s===13?i+1<o&&r.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:s===10&&(t[n++]=i+1)}return e?L1(t):t}function O1(r,e){r.length=0,r[0]=0;let t=1,n=0,i=0,o=0,s=!0;for(let l=0,d=e.length;l<d;l++){let u=e.charCodeAt(l);u===13?l+1<d&&e.charCodeAt(l+1)===10?(o++,r[t++]=l+2,l++):(n++,r[t++]=l+1):u===10?(i++,r[t++]=l+1):s&&u!==9&&(u<32||u>126)&&(s=!1)}let a=new tS(L1(r),n,i,o,s);return r.length=0,a}var Dn=class{bufferIndex;start;end;length;lineFeedCnt;constructor(e,t,n,i,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=o}},to=class{buffer;lineStarts;constructor(e,t){this.buffer=e,this.lineStarts=t}},nS=class{_pieces;_index;_tree;_BOM;constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==me&&e.iterate(e.root,n=>(n!==me&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},iS=class{_limit;_cache;constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let i=0;i<n.length;i++){let o=n[i];if(o.node.parent===null||o.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){let i=[];for(let o of n)o!==null&&i.push(o);this._cache=i}}},jg=class{root;_buffers;_lineCnt;_length;_EOL;_EOLLength;_EOLNormalized;_lastChangeBufferPos;_searchCache;_lastVisitedLine;constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new to("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=me,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let o=0,s=e.length;o<s;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=eo(e[o].buffer));let a=new Dn(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),i=this.rbInsertRight(i,a)}this._searchCache=new iS(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Uo,n=t-Math.floor(t/3),i=n*2,o="",s=0,a=[];if(this.iterate(this.root,l=>{let d=this.getNodeContent(l),u=d.length;if(s<=n||s+u<i)return o+=d,s+=u,!0;let p=o.replace(/\r\n|\r|\n/g,e);return a.push(new to(p,eo(p))),o=d,s=u,!0}),s>0){let l=o.replace(/\r\n|\r|\n/g,e);a.push(new to(l,eo(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new nS(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===me)return!0;let o=this.getNodeContent(i),s=o.length,a=e.nodeAt(t),l=e.nodeAt(t+s),d=e.getValueInRange2(a,l);return t+=s,o===d})}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==me;)if(i.left!==me&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;let o=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=o+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;for(;t!==me;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){let s=this.getOffsetAt(n+1,1),a=i-s;return new Se(n+1,a+1)}return new Se(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===me){let o=this.getOffsetAt(n+1,1),s=i-e-o;return new Se(n+1,s+1)}else t=t.right;return new Se(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(d+e.remainder,d+t.remainder)}let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=i.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==me;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(l,l+t.remainder);break}else s+=a.substr(l,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",i=!1;return this.iterate(this.root,o=>{if(o===me)return!0;let s=o.piece,a=s.length;if(a===0)return!0;let l=this._buffers[s.bufferIndex].buffer,d=this._buffers[s.bufferIndex].lineStarts,u=s.start.line,p=s.end.line,h=d[u]+s.start.column;if(i&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(u===p)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(i=!0,n+=l.substr(h,a-1)):n+=l.substr(h,a),!0;n+=this._EOLNormalized?l.substring(h,Math.max(h,d[u+1]-this._EOLLength)):l.substring(h,d[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let g=u+1;g<p;g++)n=this._EOLNormalized?l.substring(d[g],d[g+1]-this._EOLLength):l.substring(d[g],d[g+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(d[p]+s.end.column-1)===13?(i=!0,s.end.column===0?t--:n=l.substr(d[p],s.end.column-1)):n=l.substr(d[p],s.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){let t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){let t=this.nodeAt(e);if(t.remainder===t.node.piece.length){let n=t.node.next();if(!n||n===me)return"";let i=this._buffers[n.piece.bufferIndex],o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.buffer.substring(o,o+n.piece.length)}else{let n=this._buffers[t.node.piece.bufferIndex],i=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),o=i+t.remainder,s=i+t.node.piece.length;return n.buffer.substring(o,s)}}findMatchesInNode(e,t,n,i,o,s,a,l,d,u,p){let h=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),b=this.offsetInBuffer(e.piece.bufferIndex,o),f=this.offsetInBuffer(e.piece.bufferIndex,s),v,D={line:0,column:0},R,A;t._wordSeparators?(R=h.buffer.substring(b,f),A=B=>B+b,t.reset(0)):(R=h.buffer,A=B=>B,t.reset(b));do if(v=t.next(R),v){if(A(v.index)>=f)return u;this.positionInBuffer(e,A(v.index)-g,D);let B=this.getLineFeedCnt(e.piece.bufferIndex,o,D),W=D.line===o.line?D.column-o.column+i:D.column+1,H=W+v[0].length;if(p[u++]=Os(new $(n+B,W,n+B,H),v,l),A(v.index)+v[0].length>=f||u>=d)return u}while(v);return u}findMatchesLineByLine(e,t,n,i){let o=[],s=0,a=new As(t.wordSeparators,t.regex),l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let u=this.positionInBuffer(l.node,l.remainder),p=this.positionInBuffer(d.node,d.remainder);if(l.node===d.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,p,t,n,i,s,o),o;let h=e.startLineNumber,g=l.node;for(;g!==d.node;){let f=this.getLineFeedCnt(g.piece.bufferIndex,u,g.piece.end);if(f>=1){let D=this._buffers[g.piece.bufferIndex].lineStarts,R=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),A=D[u.line+f],B=h===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(g,a,h,B,u,this.positionInBuffer(g,A-R),t,n,i,s,o),s>=i)return o;h+=f}let v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){let D=this.getLineContent(h).substring(v,e.endColumn-1);return s=this._findMatchesInLine(t,a,D,e.endLineNumber,v,s,o,n,i),o}if(s=this._findMatchesInLine(t,a,this.getLineContent(h).substr(v),h,v,s,o,n,i),s>=i)return o;h++,l=this.nodeAt2(h,1),g=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){let f=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(f,e.endColumn-1);return s=this._findMatchesInLine(t,a,v,e.endLineNumber,f,s,o,n,i),o}let b=h===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(d.node,a,h,b,u,p,t,n,i,s,o),o}_findMatchesInLine(e,t,n,i,o,s,a,l,d){let u=e.wordSeparators;if(!l&&e.simpleSearch){let h=e.simpleSearch,g=h.length,b=n.length,f=-g;for(;(f=n.indexOf(h,f+g))!==-1;)if((!u||qg(u,n,b,f,g))&&(a[s++]=new ks(new $(i,f+1+o,i,f+1+g+o),null),s>=d))return s;return s}let p;t.reset(0);do if(p=t.next(n),p&&(a[s++]=Os(new $(i,p.index+1+o,i,p.index+1+p[0].length+o),p,l),s>=d))return s;while(p);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==me){let{node:i,remainder:o,nodeStartOffset:s}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,d=this.positionInBuffer(i,o);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<Uo){this.appendToNode(i,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(s+i.piece.length>e){let u=[],p=new Dn(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,o)===10){let f={line:p.start.line+1,column:0};p=new Dn(p.bufferIndex,f,p.end,this.getLineFeedCnt(p.bufferIndex,f,p.end),p.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,o-1)===13){let f=this.positionInBuffer(i,o-1);this.deleteNodeTail(i,f),t="\r"+t,i.piece.length===0&&u.push(i)}else this.deleteNodeTail(i,d);else this.deleteNodeTail(i,d);let h=this.createNewPieces(t);p.length>0&&this.rbInsertRight(i,p);let g=i;for(let b=0;b<h.length;b++)g=this.rbInsertRight(g,h[b]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,i)}else{let i=this.createNewPieces(t),o=this.rbInsertLeft(null,i[0]);for(let s=1;s<i.length;s++)o=this.rbInsertRight(o,i[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===me)return;let n=this.nodeAt(e),i=this.nodeAt(e+t),o=n.node,s=i.node;if(o===s){let h=this.positionInBuffer(o,n.remainder),g=this.positionInBuffer(o,i.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){let b=o.next();ju(this,o),this.validateCRLFWithPrevNode(b),this.computeBufferMetadata();return}this.deleteNodeHead(o,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,h),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,h,g),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);let d=this.positionInBuffer(s,i.remainder);this.deleteNodeHead(s,d),s.piece.length===0&&a.push(s);let u=o.next();for(let h=u;h!==me&&h!==s;h=h.next())a.push(h);let p=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(p),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},l=new Dn(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=l,e+=`
`,Zr(this,t,-1,-1),t.piece.length===0&&n.push(t)}let i=this.createNewPieces(e),o=this.rbInsertLeft(t,i[i.length-1]);for(let s=i.length-2;s>=0;s--)o=this.rbInsertLeft(o,i[s]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),o=i;for(let s=1;s<n.length;s++)o=this.rbInsertRight(o,n[s]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){let i=e.piece,o=e.piece.bufferIndex,s=this._buffers[o].lineStarts,l=s[i.start.line]+i.start.column+t,d=i.start.line,u=i.end.line,p=0,h=0,g=0;for(;d<=u&&(p=d+(u-d)/2|0,g=s[p],p!==u);)if(h=s[p+1],l<g)u=p-1;else if(l>=h)d=p+1;else break;return n?(n.line=p,n.column=l-g,null):{line:p,column:l-g}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;let o=i[n.line+1],s=i[n.line]+n.column;if(o>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)ju(this,e[t])}createNewPieces(e){if(e.length>Uo){let u=[];for(;e.length>Uo;){let h=e.charCodeAt(Uo-1),g;h===13||h>=55296&&h<=56319?(g=e.substring(0,Uo-1),e=e.substring(Uo-1)):(g=e.substring(0,Uo),e=e.substring(Uo));let b=eo(g);u.push(new Dn(this._buffers.length,{line:0,column:0},{line:b.length-1,column:g.length-b[b.length-1]},b.length-1,g.length)),this._buffers.push(new to(g,b))}let p=eo(e);return u.push(new Dn(this._buffers.length,{line:0,column:0},{line:p.length-1,column:e.length-p[p.length-1]},p.length-1,e.length)),this._buffers.push(new to(e,p)),u}let t=this._buffers[0].buffer.length,n=eo(e,!1),i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let u=0;u<n.length;u++)n[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<n.length;u++)n[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}let o=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[s],l={line:s,column:a},d=new Dn(0,i,l,this.getLineFeedCnt(0,i,l),o-t);return this._lastChangeBufferPos=l,[d]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,i="",o=this._searchCache.get2(e);if(o){n=o.node;let s=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+s,l+n.piece.length);else{let d=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(l+s,l+d-t)}}else{let s=0,a=e;for(;n!==me;)if(n.left!==me&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),u=this._buffers[n.piece.bufferIndex].buffer,p=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),u.substring(p+l,p+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=d.substring(u+l,u+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==me;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=s.substring(l,l+a-t),i}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=s.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==me;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,i=this.positionInBuffer(e,t),o=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(s!==o)return{index:s,remainder:0}}return{index:o,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[o]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){let n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),l=this.getLineFeedCnt(n.bufferIndex,n.start,s),d=l-i,u=a-o,p=n.length+u;e.piece=new Dn(n.bufferIndex,n.start,s,l,p),Zr(this,e,u,d)}deleteNodeHead(e,t){let n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),l=this.offsetInBuffer(n.bufferIndex,s),d=a-i,u=o-l,p=n.length+u;e.piece=new Dn(n.bufferIndex,s,n.end,a,p),Zr(this,e,u,d)}shrinkNode(e,t,n){let i=e.piece,o=i.start,s=i.end,a=i.length,l=i.lineFeedCnt,d=t,u=this.getLineFeedCnt(i.bufferIndex,i.start,d),p=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,o);e.piece=new Dn(i.bufferIndex,i.start,d,u,p),Zr(this,e,p-a,u-l);let h=new Dn(i.bufferIndex,n,s,this.getLineFeedCnt(i.bufferIndex,n,s),this.offsetInBuffer(i.bufferIndex,s)-this.offsetInBuffer(i.bufferIndex,n)),g=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let o=eo(t,!1);for(let g=0;g<o.length;g++)o[g]+=i;if(n){let g=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-g}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));let s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],l={line:s,column:a},d=e.piece.length+t.length,u=e.piece.lineFeedCnt,p=this.getLineFeedCnt(0,e.piece.start,l),h=p-u;e.piece=new Dn(e.piece.bufferIndex,e.piece.start,l,p,d),this._lastChangeBufferPos=l,Zr(this,e,t.length,h)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==me;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;let o={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==me;)if(n.left!==me&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(o+t-1,s),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:i};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==me;){if(n.piece.lineFeedCnt>0){let o=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:s}}else if(n.piece.length>=t-1){let o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===me||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,o=n[i]+t.start.column;return i===n.length-1||n[i+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===me||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],i=this._buffers[e.piece.bufferIndex].lineStarts,o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};let s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Dn(e.piece.bufferIndex,e.piece.start,o,a,s),Zr(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0},d=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Dn(t.piece.bufferIndex,l,t.piece.end,u,d),Zr(this,t,-1,-1),t.piece.length===0&&n.push(t);let p=this.createNewPieces(`\r
`);this.rbInsertRight(e,p[0]);for(let h=0;h<n.length;h++)ju(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)ju(this,n);else{let i=n.piece,o={line:i.start.line+1,column:0},s=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,o,i.end);n.piece=new Dn(i.bufferIndex,o,i.end,a,s),Zr(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===me)return t(me);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===me)return"";let t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),o=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,o)}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){let n=new wd(t,1);if(n.left=me,n.right=me,n.parent=me,n.size_left=0,n.lf_left=0,this.root===me)this.root=n,n.color=0;else if(e.right===me)e.right=n,n.parent=e;else{let o=$g(e.right);o.left=n,n.parent=o}return Jx(this,n),n}rbInsertLeft(e,t){let n=new wd(t,1);if(n.left=me,n.right=me,n.parent=me,n.size_left=0,n.lf_left=0,this.root===me)this.root=n,n.color=0;else if(e.left===me)e.left=n,n.parent=e;else{let i=Xx(e.left);i.right=n,n.parent=i}return Jx(this,n),n}getContentOfSubTree(e){let t="";return this.iterate(e,n=>(t+=this.getNodeContent(n),!0)),t}};var Ms=class r extends O{_pieceTree;_BOM;_mightContainRTL;_mightContainUnusualLineTerminators;_mightContainNonBasicASCII;_onDidChangeContent=this._register(new E);onDidChangeContent=this._onDidChangeContent.event;constructor(e,t,n,i,o,s,a){super(),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._pieceTree=new jg(e,n,a)}equals(e){return!(e instanceof r)||this._BOM!==e._BOM||this.getEOL()!==e.getEOL()?!1:this._pieceTree.equal(e._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t,i=this.getPositionAt(e),o=this.getPositionAt(n);return new $(i.lineNumber,i.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";let n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn),o=0,s=this._getEndOfLine(t),a=this.getEOL();if(s.length!==a.length){let l=s.length-a.length,d=e.endLineNumber-e.startLineNumber;o=l*d}return i-n+o}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0,i=e.startLineNumber,o=e.endLineNumber;for(let s=i;s<=o;s++){let a=this.getLineContent(s),l=s===i?e.startColumn-1:0,d=s===o?e.endColumn-1:a.length;for(let u=l;u<d;u++)ai(a.charCodeAt(u))?(n=n+1,u=u+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-i),n}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){let t=ko(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=Lv(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,l=[];for(let f=0;f<e.length;f++){let v=e[f];a&&v._isTracked&&(a=!1);let D=v.range;if(v.text){let H=!0;s||(H=!kT(v.text),s=H),!i&&H&&(i=_h(v.text)),!o&&H&&(o=Rh(v.text))}let R="",A=0,B=0,W=0;if(v.text){let H;[A,B,W,H]=Yn(v.text);let ue=this.getEOL(),Y=ue===`\r
`?2:1;H===0||H===Y?R=v.text:R=v.text.replace(/\r\n|\r|\n/g,ue)}l[f]={sortIndex:f,identifier:v.identifier||null,range:D,rangeOffset:this.getOffsetAt(D.startLineNumber,D.startColumn),rangeLength:this.getValueLengthInRange(D),text:R,eolCount:A,firstLineLength:B,lastLineLength:W,forceMoveMarkers:!!v.forceMoveMarkers,isAutoWhitespaceEdit:v.isAutoWhitespaceEdit||!1}}l.sort(r._sortOpsAscending);let d=!1;for(let f=0,v=l.length-1;f<v;f++){let D=l[f].range.getEndPosition(),R=l[f+1].range.getStartPosition();if(R.isBeforeOrEqual(D)){if(R.isBefore(D))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(l=this._reduceOperations(l));let u=n||t?r._getInverseEditRanges(l):[],p=[];if(t)for(let f=0;f<l.length;f++){let v=l[f],D=u[f];if(v.isAutoWhitespaceEdit&&v.range.isEmpty())for(let R=D.startLineNumber;R<=D.endLineNumber;R++){let A="";R===D.startLineNumber&&(A=this.getLineContent(v.range.startLineNumber),ko(A)!==-1)||p.push({lineNumber:R,oldContent:A})}}let h=null;if(n){let f=0;h=[];for(let v=0;v<l.length;v++){let D=l[v],R=u[v],A=this.getValueInRange(D.range),B=D.rangeOffset+f;f+=D.text.length-A.length,h[v]={sortIndex:D.sortIndex,identifier:D.identifier,range:R,text:A,textChange:new pi(D.rangeOffset,A,B,D.text)}}d||h.sort((v,D)=>v.sortIndex-D.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=s;let g=this._doApplyEdits(l),b=null;if(t&&p.length>0){p.sort((f,v)=>v.lineNumber-f.lineNumber),b=[];for(let f=0,v=p.length;f<v;f++){let D=p[f].lineNumber;if(f>0&&p[f-1].lineNumber===D)continue;let R=p[f].oldContent,A=this.getLineContent(D);A.length===0||A===R||ko(A)!==-1||b.push(D)}}return this._onDidChangeContent.fire(),new Sg(h,g,b)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,n=e[0].range,i=e[e.length-1].range,o=new $(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn),s=n.startLineNumber,a=n.startColumn,l=[];for(let g=0,b=e.length;g<b;g++){let f=e[g],v=f.range;t=t||f.forceMoveMarkers,l.push(this.getValueInRange(new $(s,a,v.startLineNumber,v.startColumn))),f.text.length>0&&l.push(f.text),s=v.endLineNumber,a=v.endColumn}let d=l.join(""),[u,p,h]=Yn(d);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:d,eolCount:u,firstLineLength:p,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(r._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let i=e[n],o=i.range.startLineNumber,s=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(o===a&&s===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);let d=new $(o,s,a,l);t.push({range:d,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){let n=e.startLineNumber,i=e.startColumn,[o,s,a]=Yn(t),l;if(t.length>0){let d=o+1;d===1?l=new $(n,i,n,i+s):l=new $(n,i,n+d-1,a+1)}else l=new $(n,i,n,i);return l}static _getInverseEditRanges(e){let t=[],n=0,i=0,o=null;for(let s=0,a=e.length;s<a;s++){let l=e[s],d,u;o?o.range.endLineNumber===l.range.startLineNumber?(d=n,u=i+(l.range.startColumn-o.range.endColumn)):(d=n+(l.range.startLineNumber-o.range.endLineNumber),u=l.range.startColumn):(d=l.range.startLineNumber,u=l.range.startColumn);let p;if(l.text.length>0){let h=l.eolCount+1;h===1?p=new $(d,u,d,u+l.firstLineLength):p=new $(d,u,d+h-1,l.lastLineLength+1)}else p=new $(d,u,d,u);n=p.endLineNumber,i=p.endColumn,t.push(p),o=l}return t}static _sortOpsAscending(e,t){let n=$.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=$.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}};var rS=class{constructor(e,t,n,i,o,s,a,l,d){this._chunks=e;this._bom=t;this._cr=n;this._lf=i;this._crlf=o;this._containsRTL=s;this._containsUnusualLineTerminators=a;this._isBasicASCII=l;this._normalizeEOL=d}_getEOL(e){let t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,s=n.length;o<s;o++){let a=n[o].buffer.replace(/\r\n|\r|\n/g,t),l=eo(a);n[o]=new to(a,l)}let i=new Ms(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},Ns=class{chunks;BOM;_hasPreviousChar;_previousChar;_tmpLineStarts;cr;lf;crlf;containsRTL;containsUnusualLineTerminators;isBasicASCII;constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&RT(e)&&(this.BOM=_T,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=O1(this._tmpLineStarts,e);this.chunks.push(new to(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=_h(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Rh(e)))}finish(e=!0){return this._finish(),new rS(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=eo(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}};var oM=new class{clone(){return this}equals(r){return this===r}};function M1(r,e){let t=new Uint32Array(2);return t[0]=0,t[1]=(r<<0|0|0|32768|2<<24)>>>0,new qm(t,e===null?oM:e)}var Xg=class{constructor(e){this._default=e}_store=[];get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}let i=this._store.slice(0,e),o=this._store.slice(e+t),s=sM(n,this._default);this._store=i.concat(s,o)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;let n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=So(this._store,e,n)}};function sM(r,e){let t=[];for(let n=0;n<r;n++)t[n]=e;return t}var Ua=class{static deserialize(e){let t=0,n=$t(e,t);t+=4;let i=[];for(let o=0;o<n;o++)t=xu.deserialize(e,t,i);return i}_tokens;constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new xu(e,[t]))}finalize(){return this._tokens}serialize(){let e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;Gt(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++)t=this._tokens[n].serialize(e,t)}};var oS=class{constructor(e,t){this.tokenizationSupport=t;this.store=new Dd(e)}initialState=this.tokenizationSupport.getInitialState();store;getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}},Qg=class extends oS{constructor(t,n,i,o){super(t,n);this._textModel=i;this._languageIdCodec=o}updateTokensUntilLine(t,n){let i=this._textModel.getLanguageId();for(;;){let o=this.getFirstInvalidLine();if(!o||o.lineNumber>n)break;let s=this._textModel.getLineContent(o.lineNumber),a=kd(this._languageIdCodec,i,this.tokenizationSupport,s,!0,o.startState);t.add(o.lineNumber,a.tokens),this.store.setEndState(o.lineNumber,a.endState)}}getTokenTypeIfInsertingCharacter(t,n){let i=this.getStartState(t.lineNumber);if(!i)return 0;let o=this._textModel.getLanguageId(),s=this._textModel.getLineContent(t.lineNumber),a=s.substring(0,t.column-1)+n+s.substring(t.column-1),l=kd(this._languageIdCodec,o,this.tokenizationSupport,a,!0,i),d=new un(l.tokens,a,this._languageIdCodec);if(d.getCount()===0)return 0;let u=d.findTokenIndexAtOffset(t.column-1);return d.getStandardTokenType(u)}tokenizeLineWithEdit(t,n){let i=this.getStartState(t);if(!i)return{mainLineTokens:null,additionalLines:null};let o=this._textModel.getLineContent(t),s=n.lineEdit.apply(o),a=this._textModel.getLanguageIdAtPosition(t,0),l=kd(this._languageIdCodec,a,this.tokenizationSupport,s,!0,i),d=null;if(n.additionalLines){d=[];let p=l.endState;for(let h of n.additionalLines){let g=kd(this._languageIdCodec,a,this.tokenizationSupport,h,!0,p);d.push(new un(g.tokens,h,this._languageIdCodec)),p=g.endState}}return{mainLineTokens:new un(l.tokens,s,this._languageIdCodec),additionalLines:d}}hasAccurateTokensForLine(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n}isCheapToTokenize(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n||t===n&&this._textModel.getLineLength(t)<2048}tokenizeHeuristically(t,n,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(t,i),{heuristicTokens:!1};let o=this.guessStartState(n),s=this._textModel.getLanguageId();for(let a=n;a<=i;a++){let l=this._textModel.getLineContent(a),d=kd(this._languageIdCodec,s,this.tokenizationSupport,l,!0,o);t.add(a,d.tokens),o=d.endState}return{heuristicTokens:!0}}guessStartState(t){let n=this._textModel.getLineFirstNonWhitespaceColumn(t),i=[],o=null;for(let l=t-1;n>1&&l>=1;l--){let d=this._textModel.getLineFirstNonWhitespaceColumn(l);if(d!==0&&d<n&&(i.push(this._textModel.getLineContent(l)),n=d,o=this.getStartState(l),o))break}o||(o=this.tokenizationSupport.getInitialState()),i.reverse();let s=this._textModel.getLanguageId(),a=o;for(let l of i)a=kd(this._languageIdCodec,s,this.tokenizationSupport,l,!1,a).endState;return a}},Dd=class{constructor(e){this.lineCount=e;this._invalidEndStatesLineNumbers.addRange(new Re(1,e+1))}_tokenizationStateStore=new sS;_invalidEndStatesLineNumbers=new aS;getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new He("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);let n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Re(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Re(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(let t of e){let[n]=Yn(t.text);this.acceptChange(new wn(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Re(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){let t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;let n=this.getStartState(t,e);if(!n)throw new He("Start state must be defined");return{lineNumber:t,startState:n}}},sS=class{_lineEndStates=new Xg(null);getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){let n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}acceptChanges(e){for(let t of e){let[n]=Yn(t.text);this.acceptChange(new wn(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}},aS=class{_ranges=[];getRanges(){return this._ranges}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;let e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new Re(e.start+1,e.endExclusive),e.start}delete(e){let t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){let n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Re(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new Re(n.start,e):this._ranges.splice(t,1,new Re(n.start,e),new Re(e+1,n.endExclusive))}}addRange(e){Re.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let i=n;for(;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;let o=t-e.length;for(let s=i;s<this._ranges.length;s++)this._ranges[s]=this._ranges[s].delta(o);if(n===i){let s=new Re(e.start,e.start+t);s.isEmpty||this._ranges.splice(n,0,s)}else{let s=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),l=new Re(s,a+o);l.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}};function kd(r,e,t,n,i,o){let s=null;if(t)try{s=t.tokenizeEncoded(n,i,o.clone())}catch(a){Ae(a)}return s||(s=M1(r.encodeLanguageId(e),o)),un.convertToEndOffset(s.tokens,n.length),s}var Yg=class{constructor(e,t){this._tokenizerWithStateStore=e;this._backgroundTokenStore=t}_isDisposed=!1;dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_isScheduled=!1;_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,as(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Jp(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){let e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new Ua,n=sa.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){let t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new wn(e,t))}};var Jg=class{_onDidChangeVisibleRanges=new E;onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event;_views=new Set;attachView(){let e=new lS(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}},lS=class{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){let n=e.map(i=>new wn(i.startLineNumber,i.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}},Zg=class extends O{constructor(t){super();this._refreshTokens=t}runner=this._register(new li(()=>this.update(),50));_computedLineRanges=[];_lineRanges=[];get lineRanges(){return this._lineRanges}update(){Si(this._computedLineRanges,this._lineRanges,(t,n)=>t.equals(n))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(t){this._lineRanges=t.visibleLineRanges,t.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}},_d=class extends O{constructor(t,n,i){super();this._languageIdCodec=t;this._textModel=n;this.getLanguageId=i}_backgroundTokenizationState=1;get backgroundTokenizationState(){return this._backgroundTokenizationState}_onDidChangeBackgroundTokenizationState=this._register(new E);onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;_onDidChangeTokens=this._register(new E);onDidChangeTokens=this._onDidChangeTokens.event;tokenizeIfCheap(t){this.isCheapToTokenize(t)&&this.forceTokenization(t)}};var N1=k("treeSitterParserService");var Xu=class extends _d{constructor(t,n,i,o){super(n,i,o);this._treeSitterService=t;this._initialize()}_tokenizationSupport=null;_lastLanguageId;_initialize(){let t=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==t)&&(this._lastLanguageId=t,this._tokenizationSupport=Su.get(t))}getLineTokens(t){let n=this._textModel.getLineContent(t);if(this._tokenizationSupport){let i=this._tokenizationSupport.tokenizeEncoded(t,this._textModel);if(i)return new un(i,n,this._languageIdCodec)}return un.createEmpty(n,this._languageIdCodec)}resetTokenization(t=!0){t&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(t){t.isFlush&&this.resetTokenization(!1)}forceTokenization(t){}hasAccurateTokensForLine(t){return!0}isCheapToTokenize(t){return!0}getTokenTypeIfInsertingCharacter(t,n,i){return 0}tokenizeLineWithEdit(t,n){return{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}};var Qu=class r{_lineTokens;_len;_languageIdCodec;constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==qr)return new un(jr(i),n,this._languageIdCodec);let o=new Uint32Array(2);return o[0]=n.length,o[1]=F1(this._languageIdCodec.encodeLanguageId(e)),new un(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){let i=n?jr(n):null;if(t===0){let o=!1;if(i&&i.length>1&&(o=hi.getLanguageId(i[1])!==e),!o)return qr}if(!i||i.length===0){let o=new Uint32Array(2);return o[0]=t,o[1]=F1(e),o.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=So(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,o){let s=r._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);let a=this._lineTokens[t];return this._lineTokens[t]=s,o?!r._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let n=jr(e),i=jr(t);if(n.length!==i.length)return!1;for(let o=0,s=n.length;o<s;o++)if(n[o]!==i[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new Se(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=qt.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=qt.deleteEnding(this._lineTokens[t],e.startColumn-1);let n=e.endLineNumber-1,i=null;n<this._len&&(i=qt.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=qt.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=qt.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=qt.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=qt.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};let n=[];for(let i=0,o=e.length;i<o;i++){let s=e[i],a=0,l=0,d=!1;for(let u=s.startLineNumber;u<=s.endLineNumber;u++)d?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),s.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),s.getLineTokens(u),!0)&&(d=!0,a=u,l=u);d&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}};function F1(r){return(r<<0|0|0|32768|2<<24|1024)>>>0}var ef=class r{_pieces;_isComplete;_languageIdCodec;constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){let o=t[0].getRange(),s=t[t.length-1].getRange();if(!o||!s)return e;n=e.plusRange(o).plusRange(s)}let i=null;for(let o=0,s=this._pieces.length;o<s;o++){let a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};continue}let[l,d]=a.split(n);if(l.isEmpty()){i=i||{index:o};continue}d.isEmpty()||(this._pieces.splice(o,1,l,d),o++,s++,i=i||{index:o})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=So(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;let n=this._pieces;if(n.length===0)return t;let i=r._findFirstPieceWithLine(n,e),o=n[i].getLineTokens(e);if(!o)return t;let s=t.getCount(),a=o.getCount(),l=0,d=[],u=0,p=0,h=(g,b)=>{g!==p&&(p=g,d[u++]=g,d[u++]=b)};for(let g=0;g<a;g++){let b=o.getStartCharacter(g),f=o.getEndCharacter(g),v=o.getMetadata(g),D=((v&1?2048:0)|(v&2?4096:0)|(v&4?8192:0)|(v&8?16384:0)|(v&16?16744448:0)|(v&32?4278190080:0))>>>0,R=~D>>>0;for(;l<s&&t.getEndOffset(l)<=b;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<s&&t.getStartOffset(l)<b&&h(b,t.getMetadata(l));l<s&&t.getEndOffset(l)<f;)h(t.getEndOffset(l),t.getMetadata(l)&R|v&D),l++;if(l<s)h(f,t.getMetadata(l)&R|v&D),t.getEndOffset(l)===f&&l++;else{let A=Math.min(Math.max(0,l-1),s-1);h(f,t.getMetadata(A)&R|v&D)}}for(;l<s;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new un(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let o=n+Math.floor((i-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)i=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,i,o){for(let s of this._pieces)s.acceptEdit(e,t,n,i,o)}};var Wo=class extends Cd{constructor(t,n,i,o,s,a,l){super();this._textModel=t;this._bracketPairsTextModelPart=n;this._languageId=i;this._attachedViews=o;this._languageService=s;this._languageConfigurationService=a;this._treeSitterService=l;this._register(this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(Q.filter(Su.onDidChange,d=>d.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}_semanticTokens=new ef(this._languageService.languageIdCodec);_onDidChangeLanguage=this._register(new E);onDidChangeLanguage=this._onDidChangeLanguage.event;_onDidChangeLanguageConfiguration=this._register(new E);onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event;_onDidChangeTokens=this._register(new E);onDidChangeTokens=this._onDidChangeTokens.event;_tokens;_tokensDisposables=this._register(new le);createGrammarTokens(){return this._register(new tf(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new Xu(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(t){let n=this._tokens!==void 0;this._tokens?.dispose(),this._tokens=t?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(i=>{this._emitModelTokensChangedEvent(i)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(i=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),n&&this._tokens.resetTokenization()}createPreferredTokenProvider(){Su.get(this._languageId)?this._tokens instanceof Xu||this.createTokens(!0):this._tokens instanceof tf||this.createTokens(!1)}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(t){t.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(t){if(t.isFlush)this._semanticTokens.flush();else if(!t.isEolChange)for(let n of t.changes){let[i,o,s]=Yn(n.text);this._semanticTokens.acceptEdit(n.range,i,o,s,n.text.length>0?n.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(t)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(t){this.validateLineNumber(t);let n=this._tokens.getLineTokens(t);return this._semanticTokens.addSparseTokens(t,n)}_emitModelTokensChangedEvent(t){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(t),this._onDidChangeTokens.fire(t))}validateLineNumber(t){if(t<1||t>this._textModel.getLineCount())throw new He("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(t){this.validateLineNumber(t),this._tokens.forceTokenization(t)}hasAccurateTokensForLine(t){return this.validateLineNumber(t),this._tokens.hasAccurateTokensForLine(t)}isCheapToTokenize(t){return this.validateLineNumber(t),this._tokens.isCheapToTokenize(t)}tokenizeIfCheap(t){this.validateLineNumber(t),this._tokens.tokenizeIfCheap(t)}getTokenTypeIfInsertingCharacter(t,n,i){return this._tokens.getTokenTypeIfInsertingCharacter(t,n,i)}tokenizeLineWithEdit(t,n){return this._tokens.tokenizeLineWithEdit(t,n)}setSemanticTokens(t,n){this._semanticTokens.set(t,n),this._emitModelTokensChangedEvent({semanticTokensApplied:t!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(t,n){if(this.hasCompleteSemanticTokens())return;let i=this._textModel.validateRange(this._semanticTokens.setPartial(t,n));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(t){this.assertNotDisposed();let n=this._textModel.validatePosition(t),i=this._textModel.getLineContent(n.lineNumber),o=this.getLineTokens(n.lineNumber),s=o.findTokenIndexAtOffset(n.column-1),[a,l]=Wo._findLanguageBoundaries(o,s),d=Rm(n.column,this.getLanguageConfiguration(o.getLanguageId(s)).getWordDefinition(),i.substring(a,l),a);if(d&&d.startColumn<=t.column&&t.column<=d.endColumn)return d;if(s>0&&a===n.column-1){let[u,p]=Wo._findLanguageBoundaries(o,s-1),h=Rm(n.column,this.getLanguageConfiguration(o.getLanguageId(s-1)).getWordDefinition(),i.substring(u,p),u);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn)return h}return null}getLanguageConfiguration(t){return this._languageConfigurationService.getLanguageConfiguration(t)}static _findLanguageBoundaries(t,n){let i=t.getLanguageId(n),o=0;for(let a=n;a>=0&&t.getLanguageId(a)===i;a--)o=t.getStartOffset(a);let s=t.getLineContent().length;for(let a=n,l=t.getCount();a<l&&t.getLanguageId(a)===i;a++)s=t.getEndOffset(a);return[o,s]}getWordUntilPosition(t){let n=this.getWordAtPosition(t);return n?{word:n.word.substr(0,t.column-n.startColumn),startColumn:n.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(t,n){let i=this._textModel.validatePosition(new Se(t,n)),o=this.getLineTokens(i.lineNumber);return o.getLanguageId(o.findTokenIndexAtOffset(i.column-1))}setLanguageId(t,n="api"){if(this._languageId===t)return;let i={oldLanguage:this._languageId,newLanguage:t,source:n};this._languageId=t,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};Wo=T([S(4,Xi),S(5,wu),S(6,N1)],Wo);var tf=class extends _d{_tokenizer=null;_defaultBackgroundTokenizer=null;_backgroundTokenizer=this._register(new fn);_tokens=new Qu(this._languageIdCodec);_debugBackgroundTokens;_debugBackgroundStates;_debugBackgroundTokenizer=this._register(new fn);_attachedViewStates=this._register(new $n);constructor(e,t,n,i){super(e,t,n),this._register(Hy.onDidChange(o=>{let s=this.getLanguageId();o.changedLanguages.indexOf(s)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(i.onDidChangeVisibleRanges(({view:o,state:s})=>{if(s){let a=this._attachedViewStates.get(o);a||(a=new Zg(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(o,a)),a.handleStateChange(s)}else this._attachedViewStates.deleteAndDispose(o)}))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new Dd(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let o=Hy.get(this.getLanguageId());if(!o)return[null,null];let s;try{s=o.getInitialState()}catch(a){return Ae(a),[null,null]}return[o,s]},[n,i]=t();if(n&&i?this._tokenizer=new Qg(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let o={setTokens:s=>{this.setTokens(s)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;let s=2;this._backgroundTokenizationState=s,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(s,a)=>{if(!this._tokenizer)return;let l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&s>=l&&this._tokenizer?.store.setEndState(s,a)}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new Yg(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),n?.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new Qu(this._languageIdCodec),this._debugBackgroundStates=new Dd(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:s=>{this._debugBackgroundTokens?.setMultilineTokens(s,this._textModel)},backgroundTokenizationFinished(){},setEndState:(s,a)=>{this._debugBackgroundStates?.setEndState(s,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(let t of e.changes){let[n,i]=Yn(t.text);this._tokens.acceptEdit(t.range,n,i),this._debugBackgroundTokens?.acceptEdit(t.range,n,i)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){let{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){let e=wn.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(let t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);let n=new Ua,{heuristicTokens:i}=this._tokenizer.tokenizeHeuristically(n,e,t),o=this.setTokens(n.finalize());if(i)for(let s of o.changes)this._backgroundTokenizer.value?.requestTokens(s.fromLineNumber,s.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){let t=new Ua;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){let t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){let i=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(i)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;let i=this._textModel.validatePosition(new Se(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLineWithEdit(e,t)):{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._tokens.hasTokens}};function fS(r){let e=new Ns;return e.acceptChunk(r),e.finish()}function V1(r){return new Promise((e,t)=>{let n=new Ns,i=!1;Zh(r,{onData:o=>{n.acceptChunk(typeof o=="string"?o:o.toString())},onError:o=>{i||(i=!0,t(o))},onEnd:()=>{i||(i=!0,e(n.finish()))}})})}function aM(r){let e=new Ns,t;for(;typeof(t=r.read())=="string";)e.acceptChunk(t);return e.finish()}function B1(r,e){let t;return typeof r=="string"?t=fS(r):uD(r)?t=aM(r):t=r,t.create(e)}var nf=0,lM=999,dM=1e4,cS=class{_source;_eos;constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}},Yu=()=>{throw new Error("Invalid change accessor")};var Oi=class extends O{constructor(t,n,i,o=null,s,a,l,d){super();this._undoRedoService=s;this._languageService=a;this._languageConfigurationService=l;this.instantiationService=d;nf++,this.id="$model"+nf,this.isForSimpleWidget=i.isForSimpleWidget,typeof o>"u"||o===null?this._associatedResource=L.parse("inmemory://model/"+nf):this._associatedResource=o,this._attachedEditorCount=0;let{textBuffer:u,disposable:p}=B1(t,i.defaultEOL);this._buffer=u,this._bufferDisposable=p,this._options=Oi.resolveOptions(this._buffer,i);let h=typeof n=="string"?n:n.languageId;typeof n!="string"&&(this._languageSelectionListener.value=n.onDidChange(()=>this._setLanguage(n.languageId))),this._bracketPairs=this._register(new Pg(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new Kg(this,this._languageConfigurationService)),this._decorationProvider=this._register(new Wg(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(Wo,this,this._bracketPairs,h,this._attachedViews);let g=this._buffer.getLineCount(),b=this._buffer.getValueLengthInRange(new $(1,1,g,this._buffer.getLineLength(g)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=b>Oi.LARGE_FILE_SIZE_THRESHOLD||g>Oi.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=b>Oi.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=b>Oi._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=PT(nf),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new of,this._commandManager=new Hg(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(h),this._register(this._languageConfigurationService.onDidChange(f=>{this._bracketPairs.handleLanguageConfigurationServiceChange(f),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(f)}))}static _MODEL_SYNC_LIMIT=50*1024*1024;static LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;static LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;static LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;static DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Gr.tabSize,indentSize:Gr.indentSize,insertSpaces:Gr.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Gr.trimAutoWhitespace,largeFileOptimizations:Gr.largeFileOptimizations,bracketPairColorizationOptions:Gr.bracketPairColorizationOptions};static resolveOptions(t,n){if(n.detectIndentation){let i=Gx(t,n.tabSize,n.insertSpaces);return new od({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:n.trimAutoWhitespace,defaultEOL:n.defaultEOL,bracketPairColorizationOptions:n.bracketPairColorizationOptions})}return new od(n)}_onWillDispose=this._register(new E);onWillDispose=this._onWillDispose.event;_onDidChangeDecorations=this._register(new mS(t=>this.handleBeforeFireDecorationsChangedEvent(t)));onDidChangeDecorations=this._onDidChangeDecorations.event;get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}_onDidChangeOptions=this._register(new E);onDidChangeOptions=this._onDidChangeOptions.event;_onDidChangeAttached=this._register(new E);onDidChangeAttached=this._onDidChangeAttached.event;_onDidChangeInjectedText=this._register(new E);_eventEmitter=this._register(new gS);onDidChangeContent(t){return this._eventEmitter.slowEvent(n=>t(n.contentChangedEvent))}onDidChangeContentOrInjectedText(t){return ir(this._eventEmitter.fastEvent(n=>t(n)),this._onDidChangeInjectedText.event(n=>t(n)))}id;isForSimpleWidget;_associatedResource;_attachedEditorCount;_buffer;_bufferDisposable;_options;_languageSelectionListener=this._register(new fn);_isDisposed;__isDisposing;_isDisposing(){return this.__isDisposing}_versionId;_alternativeVersionId;_initialUndoRedoSnapshot;_isTooLargeForSyncing;_isTooLargeForTokenization;_isTooLargeForHeapOperation;_commandManager;_isUndoing;_isRedoing;_trimAutoWhitespaceLines;_instanceId;_deltaDecorationCallCnt=0;_lastDecorationId;_decorations;_decorationsTree;_decorationProvider;_tokenizationTextModelPart;get tokenization(){return this._tokenizationTextModelPart}_bracketPairs;get bracketPairs(){return this._bracketPairs}_guidesTextModelPart;get guides(){return this._guidesTextModelPart}_attachedViews=new Jg;dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let t=new Ms([],"",`
`,!1,!1,!0,!0);t.dispose(),this._buffer=t,this._bufferDisposable=O.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new He("Model is disposed!")}equalsTextBuffer(t){return this._assertNotDisposed(),this._buffer.equals(t)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(t,n){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(n),this._bracketPairs.handleDidChangeContent(n),this._eventEmitter.fire(new Ig(t,n)))}setValue(t){if(this._assertNotDisposed(),t==null)throw ea();let{textBuffer:n,disposable:i}=B1(t,this._options.defaultEOL);this._setValueFromTextBuffer(n,i)}_createContentChanged2(t,n,i,o,s,a,l,d){return{changes:[{range:t,rangeOffset:n,rangeLength:i,text:o}],eol:this._buffer.getEOL(),isEolChange:d,versionId:this.getVersionId(),isUndoing:s,isRedoing:a,isFlush:l}}_setValueFromTextBuffer(t,n){this._assertNotDisposed();let i=this.getFullModelRange(),o=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._buffer=t,this._bufferDisposable.dispose(),this._bufferDisposable=n,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new of,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Pa([new mg],this._versionId,!1,!1),this._createContentChanged2(new $(1,1,s,a),0,o,this.getValue(),!1,!1,!0,!1))}setEOL(t){this._assertNotDisposed();let n=t===1?`\r
`:`
`;if(this._buffer.getEOL()===n)return;let i=this.getFullModelRange(),o=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(n),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Pa([new bg],this._versionId,!1,!1),this._createContentChanged2(new $(1,1,s,a),0,o,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let t=this.getVersionId(),n=this._decorationsTree.collectNodesPostOrder();for(let i=0,o=n.length;i<o;i++){let s=n[i],a=s.range,l=s.cachedAbsoluteStart-s.start,d=this._buffer.getOffsetAt(a.startLineNumber,a.startColumn),u=this._buffer.getOffsetAt(a.endLineNumber,a.endColumn);s.cachedAbsoluteStart=d,s.cachedAbsoluteEnd=u,s.cachedVersionId=t,s.start=d-l,s.end=u-l,Bo(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(t){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(t)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let t=0,n=0,i=this._buffer.getLineCount();for(let o=1;o<=i;o++){let s=this._buffer.getLineLength(o);s>=dM?n+=s:t+=s}return n>t}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(t){this._assertNotDisposed();let n=typeof t.tabSize<"u"?t.tabSize:this._options.tabSize,i=typeof t.indentSize<"u"?t.indentSize:this._options.originalIndentSize,o=typeof t.insertSpaces<"u"?t.insertSpaces:this._options.insertSpaces,s=typeof t.trimAutoWhitespace<"u"?t.trimAutoWhitespace:this._options.trimAutoWhitespace,a=typeof t.bracketColorizationOptions<"u"?t.bracketColorizationOptions:this._options.bracketPairColorizationOptions,l=new od({tabSize:n,indentSize:i,insertSpaces:o,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:a});if(this._options.equals(l))return;let d=this._options.createChangeEvent(l);this._options=l,this._bracketPairs.handleDidChangeOptions(d),this._decorationProvider.handleDidChangeOptions(d),this._onDidChangeOptions.fire(d)}detectIndentation(t,n){this._assertNotDisposed();let i=Gx(this._buffer,n,t);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(t){return this._assertNotDisposed(),DD(t,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(t=null){let n=this.findMatches(Mv.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(t,n.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(t){this._assertNotDisposed();let n=this._validatePosition(t.lineNumber,t.column,0);return this._buffer.getOffsetAt(n.lineNumber,n.column)}getPositionAt(t){this._assertNotDisposed();let n=Math.min(this._buffer.getLength(),Math.max(0,t));return this._buffer.getPositionAt(n)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(t){this._versionId=t}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t}_overwriteInitialUndoRedoSnapshot(t){this._initialUndoRedoSnapshot=t}getValue(t,n=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new He("Operation would exceed heap memory limits");let i=this.getFullModelRange(),o=this.getValueInRange(i,t);return n?this._buffer.getBOM()+o:o}createSnapshot(t=!1){return new cS(this._buffer.createSnapshot(t))}getValueLength(t,n=!1){this._assertNotDisposed();let i=this.getFullModelRange(),o=this.getValueLengthInRange(i,t);return n?this._buffer.getBOM().length+o:o}getValueInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(t),n)}getValueLengthInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(t),n)}getCharacterCountInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(t),n)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new He("Illegal value for lineNumber");return this._buffer.getLineContent(t)}getLineLength(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new He("Illegal value for lineNumber");return this._buffer.getLineLength(t)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new He("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(t){return this._assertNotDisposed(),1}getLineMaxColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new He("Illegal value for lineNumber");return this._buffer.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new He("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(t)}getLineLastNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new He("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(t)}_validateRangeRelaxedNoAllocations(t){let n=this._buffer.getLineCount(),i=t.startLineNumber,o=t.startColumn,s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),a=Math.floor(typeof o=="number"&&!isNaN(o)?o:1);if(s<1)s=1,a=1;else if(s>n)s=n,a=this.getLineMaxColumn(s);else if(a<=1)a=1;else{let h=this.getLineMaxColumn(s);a>=h&&(a=h)}let l=t.endLineNumber,d=t.endColumn,u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1),p=Math.floor(typeof d=="number"&&!isNaN(d)?d:1);if(u<1)u=1,p=1;else if(u>n)u=n,p=this.getLineMaxColumn(u);else if(p<=1)p=1;else{let h=this.getLineMaxColumn(u);p>=h&&(p=h)}return i===s&&o===a&&l===u&&d===p&&t instanceof $&&!(t instanceof vs)?t:new $(s,a,u,p)}_isValidPosition(t,n,i){if(typeof t!="number"||typeof n!="number"||isNaN(t)||isNaN(n)||t<1||n<1||(t|0)!==t||(n|0)!==n)return!1;let o=this._buffer.getLineCount();if(t>o)return!1;if(n===1)return!0;let s=this.getLineMaxColumn(t);if(n>s)return!1;if(i===1){let a=this._buffer.getLineCharCode(t,n-2);if(ai(a))return!1}return!0}_validatePosition(t,n,i){let o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),a=this._buffer.getLineCount();if(o<1)return new Se(1,1);if(o>a)return new Se(a,this.getLineMaxColumn(a));if(s<=1)return new Se(o,1);let l=this.getLineMaxColumn(o);if(s>=l)return new Se(o,l);if(i===1){let d=this._buffer.getLineCharCode(o,s-2);if(ai(d))return new Se(o,s-1)}return new Se(o,s)}validatePosition(t){let n=1;return this._assertNotDisposed(),t instanceof Se&&this._isValidPosition(t.lineNumber,t.column,n)?t:this._validatePosition(t.lineNumber,t.column,n)}_isValidRange(t,n){let i=t.startLineNumber,o=t.startColumn,s=t.endLineNumber,a=t.endColumn;if(!this._isValidPosition(i,o,0)||!this._isValidPosition(s,a,0))return!1;if(n===1){let l=o>1?this._buffer.getLineCharCode(i,o-2):0,d=a>1&&a<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,a-2):0,u=ai(l),p=ai(d);return!u&&!p}return!0}validateRange(t){let n=1;if(this._assertNotDisposed(),t instanceof $&&!(t instanceof vs)&&this._isValidRange(t,n))return t;let i=this._validatePosition(t.startLineNumber,t.startColumn,0),o=this._validatePosition(t.endLineNumber,t.endColumn,0),s=i.lineNumber,a=i.column,l=o.lineNumber,d=o.column;if(n===1){let u=a>1?this._buffer.getLineCharCode(s,a-2):0,p=d>1&&d<=this._buffer.getLineLength(l)?this._buffer.getLineCharCode(l,d-2):0,h=ai(u),g=ai(p);return!h&&!g?new $(s,a,l,d):s===l&&a===d?new $(s,a-1,l,d-1):h&&g?new $(s,a-1,l,d+1):h?new $(s,a-1,l,d):new $(s,a,l,d+1)}return new $(s,a,l,d)}modifyPosition(t,n){this._assertNotDisposed();let i=this.getOffsetAt(t)+n;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();let t=this.getLineCount();return new $(1,1,t,this.getLineMaxColumn(t))}findMatchesLineByLine(t,n,i,o){return this._buffer.findMatchesLineByLine(t,n,i,o)}findMatches(t,n,i,o,s,a,l=lM){this._assertNotDisposed();let d=null;n!==null&&(Array.isArray(n)||(n=[n]),n.every(h=>$.isIRange(h))&&(d=n.map(h=>this.validateRange(h)))),d===null&&(d=[this.getFullModelRange()]),d=d.sort((h,g)=>h.startLineNumber-g.startLineNumber||h.startColumn-g.startColumn);let u=[];u.push(d.reduce((h,g)=>$.areIntersecting(h,g)?h.plusRange(g):(u.push(h),g)));let p;if(!i&&t.indexOf(`
`)<0){let g=new Cr(t,i,o,s).parseSearchRequest();if(!g)return[];p=b=>this.findMatchesLineByLine(b,g,a,l)}else p=h=>Ba.findMatches(this,new Cr(t,i,o,s),h,a,l);return u.map(p).reduce((h,g)=>h.concat(g),[])}findNextMatch(t,n,i,o,s,a){this._assertNotDisposed();let l=this.validatePosition(n);if(!i&&t.indexOf(`
`)<0){let u=new Cr(t,i,o,s).parseSearchRequest();if(!u)return null;let p=this.getLineCount(),h=new $(l.lineNumber,l.column,p,this.getLineMaxColumn(p)),g=this.findMatchesLineByLine(h,u,a,1);return Ba.findNextMatch(this,new Cr(t,i,o,s),l,a),g.length>0||(h=new $(1,1,l.lineNumber,this.getLineMaxColumn(l.lineNumber)),g=this.findMatchesLineByLine(h,u,a,1),g.length>0)?g[0]:null}return Ba.findNextMatch(this,new Cr(t,i,o,s),l,a)}findPreviousMatch(t,n,i,o,s,a){this._assertNotDisposed();let l=this.validatePosition(n);return Ba.findPreviousMatch(this,new Cr(t,i,o,s),l,a)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(t){if((this.getEOL()===`
`?0:1)!==t)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(t){return t instanceof sd?t:new sd(t.identifier||null,this.validateRange(t.range),t.text,t.forceMoveMarkers||!1,t.isAutoWhitespaceEdit||!1,t._isTracked||!1)}_validateEditOperations(t){let n=[];for(let i=0,o=t.length;i<o;i++)n[i]=this._validateEditOperation(t[i]);return n}pushEditOperations(t,n,i,o){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(t,this._validateEditOperations(n),i,o)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(t,n,i,o){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=n.map(l=>({range:this.validateRange(l.range),text:l.text})),a=!0;if(t)for(let l=0,d=t.length;l<d;l++){let u=t[l],p=!1;for(let h=0,g=s.length;h<g;h++){let b=s[h].range,f=b.startLineNumber>u.endLineNumber,v=u.startLineNumber>b.endLineNumber;if(!f&&!v){p=!0;break}}if(!p){a=!1;break}}if(a)for(let l=0,d=this._trimAutoWhitespaceLines.length;l<d;l++){let u=this._trimAutoWhitespaceLines[l],p=this.getLineMaxColumn(u),h=!0;for(let g=0,b=s.length;g<b;g++){let f=s[g].range,v=s[g].text;if(!(u<f.startLineNumber||u>f.endLineNumber)&&!(u===f.startLineNumber&&f.startColumn===p&&f.isEmpty()&&v&&v.length>0&&v.charAt(0)===`
`)&&!(u===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&v&&v.length>0&&v.charAt(v.length-1)===`
`)){h=!1;break}}if(h){let g=new $(u,1,u,p);n.push(new sd(null,g,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(t,n,i,o)}_applyUndo(t,n,i,o){let s=t.map(a=>{let l=this.getPositionAt(a.newPosition),d=this.getPositionAt(a.newEnd);return{range:new $(l.lineNumber,l.column,d.lineNumber,d.column),text:a.oldText}});this._applyUndoRedoEdits(s,n,!0,!1,i,o)}_applyRedo(t,n,i,o){let s=t.map(a=>{let l=this.getPositionAt(a.oldPosition),d=this.getPositionAt(a.oldEnd);return{range:new $(l.lineNumber,l.column,d.lineNumber,d.column),text:a.newText}});this._applyUndoRedoEdits(s,n,!1,!0,i,o)}_applyUndoRedoEdits(t,n,i,o,s,a){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=o,this.applyEdits(t,!1),this.setEOL(n),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(a),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(t,n=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let i=this._validateEditOperations(t);return this._doApplyEdits(i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(t,n){let i=this._buffer.getLineCount(),o=this._buffer.applyEdits(t,this._options.trimAutoWhitespace,n),s=this._buffer.getLineCount(),a=o.changes;if(this._trimAutoWhitespaceLines=o.trimAutoWhitespaceLineNumbers,a.length!==0){for(let u=0,p=a.length;u<p;u++){let h=a[u];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let l=[];this._increaseVersionId();let d=i;for(let u=0,p=a.length;u<p;u++){let h=a[u],[g]=Yn(h.text);this._onDidChangeDecorations.fire();let b=h.range.startLineNumber,f=h.range.endLineNumber,v=f-b,D=g,R=Math.min(v,D),A=D-v,B=s-d-A+b,W=B,H=B+D,ue=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Se(W,1)),this.getOffsetAt(new Se(H,this.getLineMaxColumn(H))),0),Y=Au.fromDecorations(ue),oe=new ta(Y);for(let de=R;de>=0;de--){let be=b+de,ge=B+de;oe.takeFromEndWhile(ut=>ut.lineNumber>ge);let Ye=oe.takeFromEndWhile(ut=>ut.lineNumber===ge);l.push(new Mu(be,this.getLineContent(ge),Ye))}if(R<v){let de=b+R;l.push(new gg(de+1,f))}if(R<D){let de=new ta(Y),be=b+R,ge=D-R,Ye=s-d-ge+be+1,ut=[],se=[];for(let G=0;G<ge;G++){let te=Ye+G;se[G]=this.getLineContent(te),de.takeWhile(J=>J.lineNumber<te),ut[G]=de.takeWhile(J=>J.lineNumber===te)}l.push(new fg(be+1,b+D,se,ut))}d+=A}this._emitContentChangedEvent(new Pa(l,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:a,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return o.reverseEdits===null?void 0:o.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(t){if(t===null||t.size===0)return;let i=Array.from(t).map(o=>new Mu(o,this.getLineContent(o),this._getInjectedTextInLine(o)));this._onDidChangeInjectedText.fire(new vg(i))}changeDecorations(t,n=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(n,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(t,n){let i={addDecoration:(s,a)=>this._deltaDecorationsImpl(t,[],[{range:s,options:a}])[0],changeDecoration:(s,a)=>{this._changeDecorationImpl(s,a)},changeDecorationOptions:(s,a)=>{this._changeDecorationOptionsImpl(s,W1(a))},removeDecoration:s=>{this._deltaDecorationsImpl(t,[s],[])},deltaDecorations:(s,a)=>s.length===0&&a.length===0?[]:this._deltaDecorationsImpl(t,s,a)},o=null;try{o=n(i)}catch(s){Ae(s)}return i.addDecoration=Yu,i.changeDecoration=Yu,i.changeDecorationOptions=Yu,i.removeDecoration=Yu,i.deltaDecorations=Yu,o}deltaDecorations(t,n,i=0){if(this._assertNotDisposed(),t||(t=[]),t.length===0&&n.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Ae(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,t,n)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(t){return this.getDecorationRange(t)}_setTrackedRange(t,n,i){let o=t?this._decorations[t]:null;if(!o)return n?this._deltaDecorationsImpl(0,[],[{range:n,options:U1[i]}],!0)[0]:null;if(!n)return this._decorationsTree.delete(o),delete this._decorations[o.id],null;let s=this._validateRangeRelaxedNoAllocations(n),a=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),l=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(o),o.reset(this.getVersionId(),a,l,s),o.setOptions(U1[i]),this._decorationsTree.insert(o),o.id}removeAllDecorationsWithOwnerId(t){if(this._isDisposed)return;let n=this._decorationsTree.collectNodesFromOwner(t);for(let i=0,o=n.length;i<o;i++){let s=n[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(t){let n=this._decorations[t];return n?n.options:null}getDecorationRange(t){let n=this._decorations[t];return n?this._decorationsTree.getNodeRange(this,n):null}getLineDecorations(t,n=0,i=!1){return t<1||t>this.getLineCount()?[]:this.getLinesDecorations(t,t,n,i)}getLinesDecorations(t,n,i=0,o=!1,s=!1){let a=this.getLineCount(),l=Math.min(a,Math.max(1,t)),d=Math.min(a,Math.max(1,n)),u=this.getLineMaxColumn(d),p=new $(l,1,d,u),h=this._getDecorationsInRange(p,i,o,s);return qb(h,this._decorationProvider.getDecorationsInRange(p,i,o)),h}getDecorationsInRange(t,n=0,i=!1,o=!1,s=!1){let a=this.validateRange(t),l=this._getDecorationsInRange(a,n,i,s);return qb(l,this._decorationProvider.getDecorationsInRange(a,n,i,o)),l}getOverviewRulerDecorations(t=0,n=!1){return this._decorationsTree.getAll(this,t,n,!0,!1)}getInjectedTextDecorations(t=0){return this._decorationsTree.getAllInjectedText(this,t)}_getInjectedTextInLine(t){let n=this._buffer.getOffsetAt(t,1),i=n+this._buffer.getLineLength(t),o=this._decorationsTree.getInjectedTextInInterval(this,n,i,0);return Au.fromDecorations(o).filter(s=>s.lineNumber===t)}getAllDecorations(t=0,n=!1){let i=this._decorationsTree.getAll(this,t,n,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(t,n)),i}getAllMarginDecorations(t=0){return this._decorationsTree.getAll(this,t,!1,!1,!0)}_getDecorationsInRange(t,n,i,o){let s=this._buffer.getOffsetAt(t.startLineNumber,t.startColumn),a=this._buffer.getOffsetAt(t.endLineNumber,t.endColumn);return this._decorationsTree.getAllInInterval(this,s,a,n,i,o)}getRangeAt(t,n){return this._buffer.getRangeAt(t,n-t)}_changeDecorationImpl(t,n){let i=this._decorations[t];if(!i)return;if(i.options.after){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}let o=this._validateRangeRelaxedNoAllocations(n),s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,a,o),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}_changeDecorationOptionsImpl(t,n){let i=this._decorations[t];if(!i)return;let o=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(n.overviewRuler&&n.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(n),i.options.after||n.after){let d=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber)}if(i.options.before||n.before){let d=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber)}let a=o!==s,l=uM(n)!==rf(i);a||l?(this._decorationsTree.delete(i),i.setOptions(n),this._decorationsTree.insert(i)):i.setOptions(n)}_deltaDecorationsImpl(t,n,i,o=!1){let s=this.getVersionId(),a=n.length,l=0,d=i.length,u=0;this._onDidChangeDecorations.beginDeferredEmit();try{let p=new Array(d);for(;l<a||u<d;){let h=null;if(l<a){do h=this._decorations[n[l++]];while(!h&&l<a);if(h){if(h.options.after){let g=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber)}if(h.options.before){let g=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber)}this._decorationsTree.delete(h),o||this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(u<d){if(!h){let R=++this._lastDecorationId,A=`${this._instanceId};${R}`;h=new Ku(A,0,0),this._decorations[A]=h}let g=i[u],b=this._validateRangeRelaxedNoAllocations(g.range),f=W1(g.options),v=this._buffer.getOffsetAt(b.startLineNumber,b.startColumn),D=this._buffer.getOffsetAt(b.endLineNumber,b.endColumn);h.ownerId=t,h.reset(s,v,D,b),h.setOptions(f),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(b.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(b.startLineNumber),o||this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(h),p[u]=h.id,u++}else h&&delete this._decorations[h.id]}return p}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(t,n){typeof t=="string"?(this._languageSelectionListener.clear(),this._setLanguage(t,n)):(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId,n)),this._setLanguage(t.languageId,n))}_setLanguage(t,n){this.tokenization.setLanguageId(t,n),this._languageService.requestRichLanguageFeatures(t)}getLanguageIdAtPosition(t,n){return this.tokenization.getLanguageIdAtPosition(t,n)}getWordAtPosition(t){return this._tokenizationTextModelPart.getWordAtPosition(t)}getWordUntilPosition(t){return this._tokenizationTextModelPart.getWordUntilPosition(t)}normalizePosition(t,n){return t}getLineIndentColumn(t){return cM(this.getLineContent(t))+1}};Oi=T([S(4,fs),S(5,Xi),S(6,wu),S(7,Ct)],Oi);function cM(r){let e=0;for(let t of r)if(t===" "||t==="	")e++;else break;return e}function dS(r){return!!(r.options.overviewRuler&&r.options.overviewRuler.color)}function uM(r){return!!r.after||!!r.before}function rf(r){return!!r.options.after||!!r.options.before}var of=class{_decorationsTree0;_decorationsTree1;_injectedTextDecorationsTree;constructor(){this._decorationsTree0=new Td,this._decorationsTree1=new Td,this._injectedTextDecorationsTree=new Td}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(let n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,o,s){let a=e.getVersionId(),l=this._intervalSearch(t,n,i,o,a,s);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,i,o,s){let a=this._decorationsTree0.intervalSearch(e,t,n,i,o,s),l=this._decorationsTree1.intervalSearch(e,t,n,i,o,s),d=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,o,s);return a.concat(l).concat(d)}getInjectedTextInInterval(e,t,n,i){let o=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,o,!1);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){let n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,i).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,i,o){let s=e.getVersionId(),a=this._search(t,n,i,s,o);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,i,o){if(n)return this._decorationsTree1.search(e,t,i,o);{let s=this._decorationsTree0.search(e,t,i,o),a=this._decorationsTree1.search(e,t,i,o),l=this._injectedTextDecorationsTree.search(e,t,i,o);return s.concat(a).concat(l)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){rf(e)?this._injectedTextDecorationsTree.insert(e):dS(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){rf(e)?this._injectedTextDecorationsTree.delete(e):dS(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){rf(e)?this._injectedTextDecorationsTree.resolveNode(e,t):dS(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}};function no(r){return r.replace(/[^a-z0-9\-_]/gi," ")}var sf=class{color;darkColor;constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}},uS=class extends sf{position;_resolvedColor;constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:2}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}},pS=class{position;persistLane;constructor(e){this.position=e?.position??2,this.persistLane=e?.persistLane}},hS=class extends sf{position;sectionHeaderStyle;sectionHeaderText;_resolvedColor;constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?F.fromHex(e):t.getColor(e.id)}},af=class r{static from(e){return e instanceof r?e:new r(e)}content;tokens;inlineClassName;inlineClassNameAffectsLetterSpacing;attachedData;cursorStops;constructor(e){this.content=e.content||"",this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}},io=class r{static EMPTY;static register(e){return new r(e)}static createDynamic(e){return new r(e)}description;blockClassName;blockIsAfterEnd;blockDoesNotCollapse;blockPadding;stickiness;zIndex;className;shouldFillLineOnLineBreak;hoverMessage;glyphMarginHoverMessage;isWholeLine;showIfCollapsed;collapseOnReplaceEdit;overviewRuler;minimap;glyphMargin;glyphMarginClassName;linesDecorationsClassName;lineNumberClassName;lineNumberHoverMessage;linesDecorationsTooltip;firstLineDecorationClassName;marginClassName;inlineClassName;inlineClassNameAffectsLetterSpacing;beforeContentClassName;afterContentClassName;after;before;hideInCommentTokens;hideInStringTokens;constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?no(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?no(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new uS(e.overviewRuler):null,this.minimap=e.minimap?new hS(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new pS(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?no(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?no(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?no(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?ET(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?no(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?no(e.marginClassName):null,this.inlineClassName=e.inlineClassName?no(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?no(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?no(e.afterContentClassName):null,this.after=e.after?af.from(e.after):null,this.before=e.before?af.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}};io.EMPTY=io.register({description:"empty"});var U1=[io.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),io.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),io.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),io.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function W1(r){return r instanceof io?r:io.createDynamic(r)}var mS=class extends O{constructor(t){super();this.handleBeforeFire=t;this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}_actual=this._register(new E);event=this._actual.event;_deferredCnt;_shouldFireDeferred;_affectsMinimap;_affectsOverviewRuler;_affectedInjectedTextLines=null;_affectsGlyphMargin;_affectsLineNumber;hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(t){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(t)}checkAffectedAndFire(t){this._affectsMinimap||=!!t.minimap?.position,this._affectsOverviewRuler||=!!t.overviewRuler?.color,this._affectsGlyphMargin||=!!t.glyphMarginClassName,this._affectsLineNumber||=!!t.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);let t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(t)}},gS=class extends O{_fastEmitter=this._register(new E);fastEvent=this._fastEmitter.event;_slowEmitter=this._register(new E);slowEvent=this._slowEmitter.event;_deferredCnt;_deferredEvent;constructor(){super(),this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}};var ro=k("workingCopyService"),bS=class extends O{_onDidRegister=this._register(new E);onDidRegister=this._onDidRegister.event;_onDidUnregister=this._register(new E);onDidUnregister=this._onDidUnregister.event;_onDidChangeDirty=this._register(new E);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new E);onDidChangeContent=this._onDidChangeContent.event;_onDidSave=this._register(new E);onDidSave=this._onDidSave.event;get workingCopies(){return Array.from(this._workingCopies.values())}_workingCopies=new Set;mapResourceToWorkingCopies=new Ft;mapWorkingCopyToListeners=this._register(new $n);registerWorkingCopy(e){let t=this.mapResourceToWorkingCopies.get(e.resource);if(t?.has(e.typeId))throw new Error(`Cannot register more than one working copy with the same resource ${e.resource.toString()} and type ${e.typeId}.`);this._workingCopies.add(e),t||(t=new Map,this.mapResourceToWorkingCopies.set(e.resource,t)),t.set(e.typeId,e);let n=new le;return n.add(e.onDidChangeContent(()=>this._onDidChangeContent.fire(e))),n.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),n.add(e.onDidSave(i=>this._onDidSave.fire({workingCopy:e,...i}))),this.mapWorkingCopyToListeners.set(e,n),this._onDidRegister.fire(e),e.isDirty()&&this._onDidChangeDirty.fire(e),j(()=>{this.unregisterWorkingCopy(e),this._onDidUnregister.fire(e)})}unregisterWorkingCopy(e){this._workingCopies.delete(e);let t=this.mapResourceToWorkingCopies.get(e.resource);t?.delete(e.typeId)&&t.size===0&&this.mapResourceToWorkingCopies.delete(e.resource),e.isDirty()&&this._onDidChangeDirty.fire(e),this.mapWorkingCopyToListeners.deleteAndDispose(e)}has(e){return L.isUri(e)?this.mapResourceToWorkingCopies.has(e):this.mapResourceToWorkingCopies.get(e.resource)?.has(e.typeId)??!1}get(e){return this.mapResourceToWorkingCopies.get(e.resource)?.get(e.typeId)}getAll(e){let t=this.mapResourceToWorkingCopies.get(e);if(t)return Array.from(t.values())}get hasDirty(){for(let e of this._workingCopies)if(e.isDirty())return!0;return!1}get dirtyCount(){let e=0;for(let t of this._workingCopies)t.isDirty()&&e++;return e}get dirtyWorkingCopies(){return this.workingCopies.filter(e=>e.isDirty())}get modifiedCount(){let e=0;for(let t of this._workingCopies)t.isModified()&&e++;return e}get modifiedWorkingCopies(){return this.workingCopies.filter(e=>e.isModified())}isDirty(e,t){let n=this.mapResourceToWorkingCopies.get(e);if(n){if(typeof t=="string")return n.get(t)?.isDirty()??!1;for(let[,i]of n)if(i.isDirty())return!0}return!1}};At(ro,bS,1);var vi=class extends Ju{_onDidChangeDirty=this._register(new E);_onDidChangeLabel=this._register(new E);_onDidChangeCapabilities=this._register(new E);_onWillDispose=this._register(new E);onDidChangeDirty=this._onDidChangeDirty.event;onDidChangeLabel=this._onDidChangeLabel.event;onDidChangeCapabilities=this._onDidChangeCapabilities.event;onWillDispose=this._onWillDispose.event;closeHandler;get editorId(){}get capabilities(){return 2}hasCapability(e){return e===0?this.capabilities===0:(this.capabilities&e)!==0}isReadonly(){return this.hasCapability(2)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(0)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}matches(e){if(pn(e))return this===e;let t=e.options?.override;return this.editorId!==t&&t!==void 0&&this.editorId!==void 0?!1:bt(this.resource,Wa.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}};var Wn=class extends vi{constructor(t,n,i,o,s){super();this.preferredName=t;this.preferredDescription=n;this.secondary=i;this.primary=o;this.editorService=s;this.registerListeners()}static ID="workbench.editorinputs.sidebysideEditorInput";get typeId(){return Wn.ID}get capabilities(){let t=this.primary.capabilities;return t&=-33,this.secondary.hasCapability(16)&&(t|=16),this.secondary.hasCapability(8)&&(t|=8),t|=256,t}get resource(){if(this.hasIdenticalSides)return this.primary.resource}hasIdenticalSides=this.primary.matches(this.secondary);registerListeners(){this._register(Q.once(Q.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this._register(this.primary.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.primary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.secondary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.primary.onDidChangeLabel(()=>this._onDidChangeLabel.fire())),this._register(this.secondary.onDidChangeLabel(()=>this._onDidChangeLabel.fire()))}getName(){let t=this.getPreferredName();return t||(this.hasIdenticalSides?this.primary.getName():c("sideBySideLabels","{0} - {1}",this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.preferredName}getDescription(t){let n=this.getPreferredDescription();return n||(this.hasIdenticalSides?this.primary.getDescription(t):super.getDescription(t))}getPreferredDescription(){return this.preferredDescription}getTitle(t){let n;this.hasIdenticalSides?n=this.primary.getTitle(t)??this.getName():n=super.getTitle(t);let i=this.getPreferredTitle();return i&&(n=`${i} (${n})`),n}getPreferredTitle(){if(this.preferredName&&this.preferredDescription)return`${this.preferredName} ${this.preferredDescription}`;if(this.preferredName||this.preferredDescription)return this.preferredName??this.preferredDescription}getLabelExtraClasses(){return this.hasIdenticalSides?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.hasIdenticalSides?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return{...this.primary.getTelemetryDescriptor(),...super.getTelemetryDescriptor()}}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(t,n){let i=await this.primary.save(t,n);return this.saveResultToEditor(i)}async saveAs(t,n){let i=await this.primary.saveAs(t,n);return this.saveResultToEditor(i)}saveResultToEditor(t){if(!t||!this.hasIdenticalSides)return t;if(this.primary.matches(t))return this;if(t instanceof vi)return new Wn(this.preferredName,this.preferredDescription,t,t,this.editorService);if(!Er(t)&&!Pd(t)&&!Fs(t)&&!Bs(t))return{primary:t,secondary:t,label:this.preferredName,description:this.preferredDescription}}revert(t,n){return this.primary.revert(t,n)}async rename(t,n){if(!this.hasIdenticalSides)return;let i=await this.primary.rename(t,n);if(i){if(pn(i.editor))return{editor:new Wn(this.preferredName,this.preferredDescription,i.editor,i.editor,this.editorService),options:{...i.options,viewState:df(this,t,this.editorService)}};if(z1(i.editor))return{editor:{label:this.preferredName,description:this.preferredDescription,primary:i.editor,secondary:i.editor,options:{...i.options,viewState:df(this,t,this.editorService)}}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(t){let n=this.primary.toUntyped(t),i=this.secondary.toUntyped(t);if(n&&i&&!Er(n)&&!Er(i)&&!Pd(n)&&!Pd(i)&&!Fs(n)&&!Fs(i)&&!Bs(n)&&!Bs(i)){let o={label:this.preferredName,description:this.preferredDescription,primary:n,secondary:i};return typeof t?.preserveViewState=="number"&&(o.options={viewState:df(this,t.preserveViewState,this.editorService)}),o}}matches(t){return this===t?!0:vS(t)||Er(t)?!1:t instanceof Wn?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):Fs(t)?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):!1}};Wn=T([S(4,Ht)],Wn);var IS={LEFT:"left",RIGHT:"right",FIRST:"first",LAST:"last"};function pM(r){let e=r;return!!(e&&typeof e=="object"&&Array.isArray(e.editors)&&Array.isArray(e.mru))}var oo=class extends O{constructor(t,n,i){super();this.instantiationService=n;this.configurationService=i;pM(t)?this._id=this.deserialize(t):this._id=oo.IDS++,this.onConfigurationUpdated(),this.registerListeners()}static IDS=0;_onDidModelChange=this._register(new E({leakWarningThreshold:500}));onDidModelChange=this._onDidModelChange.event;_id;get id(){return this._id}editors=[];mru=[];editorListeners=new Set;locked=!1;selection=[];get active(){return this.selection[0]??null}preview=null;sticky=-1;transient=new Set;editorOpenPositioning;focusRecentEditorAfterClose;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationUpdated(t)))}onConfigurationUpdated(t){t&&!t.affectsConfiguration("workbench.editor.openPositioning")&&!t.affectsConfiguration("workbench.editor.focusRecentEditorAfterClose")||(this.editorOpenPositioning=this.configurationService.getValue("workbench.editor.openPositioning"),this.focusRecentEditorAfterClose=this.configurationService.getValue("workbench.editor.focusRecentEditorAfterClose"))}get count(){return this.editors.length}get stickyCount(){return this.sticky+1}getEditors(t,n){let i=t===0?this.mru.slice(0):this.editors.slice(0);return n?.excludeSticky?t===0?i.filter(o=>!this.isSticky(o)):i.slice(this.sticky+1):i}getEditorByIndex(t){return this.editors[t]}get activeEditor(){return this.active}isActive(t){return this.matches(this.active,t)}get previewEditor(){return this.preview}openEditor(t,n){let i=n?.sticky||typeof n?.index=="number"&&this.isSticky(n.index),o=n?.pinned||n?.sticky,s=!!n?.transient,a=n?.active||!this.activeEditor||!o&&this.preview===this.activeEditor,l=this.findEditor(t,n);if(l){let[d,u]=l;return this.doSetTransient(d,u,s===!1?!1:this.isTransient(d)),o&&this.doPin(d,u),this.setSelection(a?d:this.activeEditor,n?.inactiveSelection??[]),n&&typeof n.index=="number"&&this.moveEditor(d,n.index),i&&this.doStick(d,this.indexOf(d)),{editor:d,isNew:!1}}else{let d=t,u=this.indexOf(this.active),p;if(n&&typeof n.index=="number"?p=n.index:this.editorOpenPositioning===IS.FIRST?(p=0,!i&&this.isSticky(p)&&(p=this.sticky+1)):this.editorOpenPositioning===IS.LAST?p=this.editors.length:(this.editorOpenPositioning===IS.LEFT?u===0||!this.editors.length?p=0:p=u:p=u+1,!i&&this.isSticky(p)&&(p=this.sticky+1)),i&&(this.sticky++,this.isSticky(p)||(p=this.sticky)),(o||!this.preview)&&this.splice(p,!1,d),s&&this.doSetTransient(d,p,!0),!o){if(this.preview){let g=this.indexOf(this.preview);p>g&&p--,this.replaceEditor(this.preview,d,p,!a)}this.preview=d}this.registerEditorListeners(d);let h={kind:5,editor:d,editorIndex:p};return this._onDidModelChange.fire(h),this.setSelection(a?d:this.activeEditor,n?.inactiveSelection??[]),{editor:d,isNew:!0}}}registerEditorListeners(t){let n=new le;this.editorListeners.add(n),n.add(Q.once(t.onWillDispose)(()=>{let i=this.editors.indexOf(t);if(i>=0){let o={kind:15,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}})),n.add(t.onDidChangeDirty(()=>{let i={kind:14,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(t.onDidChangeLabel(()=>{let i={kind:9,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(t.onDidChangeCapabilities(()=>{let i={kind:10,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(this.onDidModelChange(i=>{i.kind===6&&i.editor?.matches(t)&&(ft(n),this.editorListeners.delete(n))}))}replaceEditor(t,n,i,o=!0){let s=this.doCloseEditor(t,1,o);if(this.splice(i,!1,n),s){let a={kind:6,...s};this._onDidModelChange.fire(a)}}closeEditor(t,n=0,i=!0){let o=this.doCloseEditor(t,n,i);if(o){let s={kind:6,...o};return this._onDidModelChange.fire(s),o}}doCloseEditor(t,n,i){let o=this.indexOf(t);if(o===-1)return;let s=this.editors[o],a=this.isSticky(o),l=this.active===s;if(i&&l)if(this.mru.length>1){let d;this.focusRecentEditorAfterClose?d=this.mru[1]:o===this.editors.length-1?d=this.editors[o-1]:d=this.editors[o+1];let u=this.selection.filter(p=>p!==s&&p!==d);this.doSetSelection(d,this.editors.indexOf(d),u)}else this.doSetSelection(null,void 0,[]);else if(!l&&this.doIsSelected(s)){let d=this.selection.filter(u=>u!==s&&u!==this.activeEditor);this.doSetSelection(this.activeEditor,this.indexOf(this.activeEditor),d)}return this.preview===s&&(this.preview=null),this.transient.delete(s),this.splice(o,!0),{editor:s,sticky:a,editorIndex:o,context:n}}moveEditor(t,n){n>=this.editors.length?n=this.editors.length-1:n<0&&(n=0);let i=this.indexOf(t);if(i<0||n===i)return;let o=this.editors[i],s=this.sticky;this.isSticky(i)&&n>this.sticky?this.sticky--:!this.isSticky(i)&&n<=this.sticky&&this.sticky++,this.editors.splice(i,1),this.editors.splice(n,0,o);let a={kind:7,editor:o,oldEditorIndex:i,editorIndex:n};if(this._onDidModelChange.fire(a),s!==this.sticky){let l={kind:13,editor:o,editorIndex:n};this._onDidModelChange.fire(l)}return o}setActive(t){let n;return t?n=this.setEditorActive(t):this.setGroupActive(),n}setGroupActive(){this._onDidModelChange.fire({kind:0})}setEditorActive(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doSetSelection(i,o,[]),i}get selectedEditors(){return this.editors.filter(t=>this.doIsSelected(t))}isSelected(t){let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.doIsSelected(n)}doIsSelected(t){return this.selection.includes(t)}setSelection(t,n){let i=this.findEditor(t);if(!i)return;let[o,s]=i,a=new Set;for(let l of n){let d=this.findEditor(l);if(!d)return;let[u]=d;u!==o&&a.add(u)}this.doSetSelection(o,s,Array.from(a))}doSetSelection(t,n,i){let o=this.activeEditor,s=this.selection,a;t?a=[t,...i]:a=[],this.selection=a;let l=t&&typeof n=="number"&&o!==t;if(l){let d=this.indexOf(t,this.mru);this.mru.splice(d,1),this.mru.unshift(t);let u={kind:8,editor:t,editorIndex:n};this._onDidModelChange.fire(u)}if(l||s.length!==a.length||s.some(d=>!a.includes(d))){let d={kind:4};this._onDidModelChange.fire(d)}}setIndex(t){this._onDidModelChange.fire({kind:1})}setLabel(t){this._onDidModelChange.fire({kind:2})}pin(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doPin(i,o),i}doPin(t,n){if(this.isPinned(t))return;this.setTransient(t,!1),this.preview=null;let i={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(i)}unpin(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doUnpin(i,o),i}doUnpin(t,n){if(!this.isPinned(t))return;let i=this.preview;this.preview=t;let o={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(o),i&&this.closeEditor(i,3)}isPinned(t){let n;return typeof t=="number"?n=this.editors[t]:n=t,!this.matches(this.preview,n)}stick(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doStick(i,o),i}doStick(t,n){if(this.isSticky(n))return;this.pin(t);let i=this.sticky+1;this.moveEditor(t,i),this.sticky++;let o={kind:13,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}unstick(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doUnstick(i,o),i}doUnstick(t,n){if(!this.isSticky(n))return;let i=this.sticky;this.moveEditor(t,i),this.sticky--;let o={kind:13,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}isSticky(t){if(this.sticky<0)return!1;let n;return typeof t=="number"?n=t:n=this.indexOf(t),n<0?!1:n<=this.sticky}setTransient(t,n){if(!n&&this.transient.size===0)return;let i=this.findEditor(t);if(!i)return;let[o,s]=i;return this.doSetTransient(o,s,n),o}doSetTransient(t,n,i){if(i){if(this.transient.has(t))return;this.transient.add(t)}else{if(!this.transient.has(t))return;this.transient.delete(t)}let o={kind:12,editor:t,editorIndex:n};this._onDidModelChange.fire(o)}isTransient(t){if(this.transient.size===0)return!1;let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.transient.has(n)}splice(t,n,i){let o=this.editors[t];if(n&&this.isSticky(t)&&this.sticky--,i?this.editors.splice(t,n?1:0,i):this.editors.splice(t,n?1:0),!n&&i)this.mru.length===0?this.mru.push(i):this.mru.splice(1,0,i);else{let s=this.indexOf(o,this.mru);n&&!i?this.mru.splice(s,1):n&&i&&this.mru.splice(s,1,i)}}indexOf(t,n=this.editors,i){let o=-1;if(!t)return o;for(let s=0;s<n.length;s++){let a=n[s];if(this.matches(a,t,i))if(i?.supportSideBySide&&a instanceof Wn&&!(t instanceof Wn))o=s;else{o=s;break}}return o}findEditor(t,n){let i=this.indexOf(t,this.editors,n);if(i!==-1)return[this.editors[i],i]}isFirst(t,n=this.editors){return this.matches(n[0],t)}isLast(t,n=this.editors){return this.matches(n[n.length-1],t)}contains(t,n){return this.indexOf(t,this.editors,n)!==-1}matches(t,n,i){if(!t||!n)return!1;if(i?.supportSideBySide&&t instanceof Wn&&!(n instanceof Wn))switch(i.supportSideBySide){case 4:if(this.matches(t.primary,n,i)||this.matches(t.secondary,n,i))return!0;break;case 3:if(this.matches(t.primary,n,i)&&this.matches(t.secondary,n,i))return!0;break}let o=t===n;return i?.strictEquals?o:o||t.matches(n)}get isLocked(){return this.locked}lock(t){this.isLocked!==t&&(this.locked=t,this._onDidModelChange.fire({kind:3}))}clone(){let t=this.instantiationService.createInstance(oo,void 0);t.editors=this.editors.slice(0),t.mru=this.mru.slice(0),t.preview=this.preview,t.selection=this.selection.slice(0),t.sticky=this.sticky;for(let n of t.editors)t.registerEditorListeners(n);return t}serialize(){let t=De.as(Zu.EditorFactory),n=[],i=[],o,s=this.sticky;for(let l=0;l<this.editors.length;l++){let d=this.editors[l],u=!1,p=t.getEditorSerializer(d);if(p){let h=p.canSerialize(d)?p.serialize(d):void 0;typeof h=="string"?(u=!0,i.push({id:d.typeId,value:h}),n.push(d),this.preview===d&&(o=n.length-1)):u=!1}!u&&this.isSticky(l)&&s--}let a=this.mru.map(l=>this.indexOf(l,n)).filter(l=>l>=0);return{id:this.id,locked:this.locked?!0:void 0,editors:i,mru:a,preview:o,sticky:s>=0?s:void 0}}deserialize(t){let n=De.as(Zu.EditorFactory);return typeof t.id=="number"?(this._id=t.id,oo.IDS=Math.max(t.id+1,oo.IDS)):this._id=oo.IDS++,t.locked&&(this.locked=!0),this.editors=On(t.editors.map((i,o)=>{let s,a=n.getEditorSerializer(i.id);if(a){let l=a.deserialize(this.instantiationService,i.value);l instanceof vi&&(s=l,this.registerEditorListeners(s))}return!s&&typeof t.sticky=="number"&&o<=t.sticky&&t.sticky--,s})),this.mru=On(t.mru.map(i=>this.editors[i])),this.selection=this.mru.length>0?[this.mru[0]]:[],typeof t.preview=="number"&&(this.preview=this.editors[t.preview]),typeof t.sticky=="number"&&(this.sticky=t.sticky),this._id}dispose(){ft(Array.from(this.editorListeners)),this.editorListeners.clear(),this.transient.clear(),super.dispose()}};oo=T([S(1,Ct),S(2,Xe)],oo);var yS={WIDTH:400,WIDTH_WITH_VERTICAL_PANEL:600,HEIGHT:270};var xS=class r{_coreKeybindings;_extensionKeybindings;_cachedMergedKeybindings;constructor(){this._coreKeybindings=new an,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Br===1){if(e&&e.win)return e.win}else if(Br===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){let t=r.bindToCurrentPlatform(e),n=new le;if(t&&t.primary){let i=Tv(t.primary,Br);i&&n.add(this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let i=0,o=t.secondary.length;i<o;i++){let s=t.secondary[i],a=Tv(s,Br);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-i-1,e.when))}return n}setExtensionKeybindings(e){let t=[],n=0;for(let i of e)i.keybinding&&(t[n++]={keybinding:i.keybinding,command:i.id,commandArgs:i.args,when:i.when,weight1:i.weight,weight2:0,extensionId:i.extensionId||null,isBuiltinExtension:i.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return ir(this.registerKeybindingRule(e),Tn.registerCommand(e))}_registerDefaultKeybinding(e,t,n,i,o,s){let a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:s,weight1:i,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,j(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(gM)),this._cachedMergedKeybindings.slice(0)}},K1=new xS,mM={EditorModes:"platform.keybindingsRegistry"};De.add(mM.EditorModes,K1);function gM(r,e){if(r.weight1!==e.weight1)return r.weight1-e.weight1;if(r.command&&e.command){if(r.command<e.command)return-1;if(r.command>e.command)return 1}return r.weight2-e.weight2}function fM(r){return r.command!==void 0}var ep=class r{static _instances=new Map;static CommandPalette=new r("CommandPalette");static DebugBreakpointsContext=new r("DebugBreakpointsContext");static DebugCallStackContext=new r("DebugCallStackContext");static DebugConsoleContext=new r("DebugConsoleContext");static DebugVariablesContext=new r("DebugVariablesContext");static NotebookVariablesContext=new r("NotebookVariablesContext");static DebugHoverContext=new r("DebugHoverContext");static DebugWatchContext=new r("DebugWatchContext");static DebugToolBar=new r("DebugToolBar");static DebugToolBarStop=new r("DebugToolBarStop");static DebugCallStackToolbar=new r("DebugCallStackToolbar");static DebugCreateConfiguration=new r("DebugCreateConfiguration");static EditorContext=new r("EditorContext");static SimpleEditorContext=new r("SimpleEditorContext");static EditorContent=new r("EditorContent");static EditorLineNumberContext=new r("EditorLineNumberContext");static EditorContextCopy=new r("EditorContextCopy");static EditorContextPeek=new r("EditorContextPeek");static EditorContextShare=new r("EditorContextShare");static EditorTitle=new r("EditorTitle");static EditorTitleRun=new r("EditorTitleRun");static EditorTitleContext=new r("EditorTitleContext");static EditorTitleContextShare=new r("EditorTitleContextShare");static EmptyEditorGroup=new r("EmptyEditorGroup");static EmptyEditorGroupContext=new r("EmptyEditorGroupContext");static EditorTabsBarContext=new r("EditorTabsBarContext");static EditorTabsBarShowTabsSubmenu=new r("EditorTabsBarShowTabsSubmenu");static EditorTabsBarShowTabsZenModeSubmenu=new r("EditorTabsBarShowTabsZenModeSubmenu");static EditorActionsPositionSubmenu=new r("EditorActionsPositionSubmenu");static ExplorerContext=new r("ExplorerContext");static ExplorerContextShare=new r("ExplorerContextShare");static ExtensionContext=new r("ExtensionContext");static ExtensionEditorContextMenu=new r("ExtensionEditorContextMenu");static GlobalActivity=new r("GlobalActivity");static CommandCenter=new r("CommandCenter");static CommandCenterCenter=new r("CommandCenterCenter");static LayoutControlMenuSubmenu=new r("LayoutControlMenuSubmenu");static LayoutControlMenu=new r("LayoutControlMenu");static MenubarMainMenu=new r("MenubarMainMenu");static MenubarAppearanceMenu=new r("MenubarAppearanceMenu");static MenubarDebugMenu=new r("MenubarDebugMenu");static MenubarEditMenu=new r("MenubarEditMenu");static MenubarCopy=new r("MenubarCopy");static MenubarFileMenu=new r("MenubarFileMenu");static MenubarGoMenu=new r("MenubarGoMenu");static MenubarHelpMenu=new r("MenubarHelpMenu");static MenubarLayoutMenu=new r("MenubarLayoutMenu");static MenubarNewBreakpointMenu=new r("MenubarNewBreakpointMenu");static PanelAlignmentMenu=new r("PanelAlignmentMenu");static PanelPositionMenu=new r("PanelPositionMenu");static ActivityBarPositionMenu=new r("ActivityBarPositionMenu");static MenubarPreferencesMenu=new r("MenubarPreferencesMenu");static MenubarRecentMenu=new r("MenubarRecentMenu");static MenubarSelectionMenu=new r("MenubarSelectionMenu");static MenubarShare=new r("MenubarShare");static MenubarSwitchEditorMenu=new r("MenubarSwitchEditorMenu");static MenubarSwitchGroupMenu=new r("MenubarSwitchGroupMenu");static MenubarTerminalMenu=new r("MenubarTerminalMenu");static MenubarViewMenu=new r("MenubarViewMenu");static MenubarHomeMenu=new r("MenubarHomeMenu");static OpenEditorsContext=new r("OpenEditorsContext");static OpenEditorsContextShare=new r("OpenEditorsContextShare");static ProblemsPanelContext=new r("ProblemsPanelContext");static SCMInputBox=new r("SCMInputBox");static SCMChangesContext=new r("SCMChangesContext");static SCMChangeContext=new r("SCMChangeContext");static SCMResourceContext=new r("SCMResourceContext");static SCMResourceContextShare=new r("SCMResourceContextShare");static SCMResourceFolderContext=new r("SCMResourceFolderContext");static SCMResourceGroupContext=new r("SCMResourceGroupContext");static SCMSourceControl=new r("SCMSourceControl");static SCMSourceControlInline=new r("SCMSourceControlInline");static SCMSourceControlTitle=new r("SCMSourceControlTitle");static SCMHistoryTitle=new r("SCMHistoryTitle");static SCMTitle=new r("SCMTitle");static SearchContext=new r("SearchContext");static SearchActionMenu=new r("SearchActionContext");static StatusBarWindowIndicatorMenu=new r("StatusBarWindowIndicatorMenu");static StatusBarRemoteIndicatorMenu=new r("StatusBarRemoteIndicatorMenu");static StickyScrollContext=new r("StickyScrollContext");static TestItem=new r("TestItem");static TestItemGutter=new r("TestItemGutter");static TestProfilesContext=new r("TestProfilesContext");static TestMessageContext=new r("TestMessageContext");static TestMessageContent=new r("TestMessageContent");static TestPeekElement=new r("TestPeekElement");static TestPeekTitle=new r("TestPeekTitle");static TestCallStack=new r("TestCallStack");static TouchBarContext=new r("TouchBarContext");static TitleBarContext=new r("TitleBarContext");static TitleBarTitleContext=new r("TitleBarTitleContext");static TunnelContext=new r("TunnelContext");static TunnelPrivacy=new r("TunnelPrivacy");static TunnelProtocol=new r("TunnelProtocol");static TunnelPortInline=new r("TunnelInline");static TunnelTitle=new r("TunnelTitle");static TunnelLocalAddressInline=new r("TunnelLocalAddressInline");static TunnelOriginInline=new r("TunnelOriginInline");static ViewItemContext=new r("ViewItemContext");static ViewContainerTitle=new r("ViewContainerTitle");static ViewContainerTitleContext=new r("ViewContainerTitleContext");static ViewTitle=new r("ViewTitle");static ViewTitleContext=new r("ViewTitleContext");static CommentEditorActions=new r("CommentEditorActions");static CommentThreadTitle=new r("CommentThreadTitle");static CommentThreadActions=new r("CommentThreadActions");static CommentThreadAdditionalActions=new r("CommentThreadAdditionalActions");static CommentThreadTitleContext=new r("CommentThreadTitleContext");static CommentThreadCommentContext=new r("CommentThreadCommentContext");static CommentTitle=new r("CommentTitle");static CommentActions=new r("CommentActions");static CommentsViewThreadActions=new r("CommentsViewThreadActions");static InteractiveToolbar=new r("InteractiveToolbar");static InteractiveCellTitle=new r("InteractiveCellTitle");static InteractiveCellDelete=new r("InteractiveCellDelete");static InteractiveCellExecute=new r("InteractiveCellExecute");static InteractiveInputExecute=new r("InteractiveInputExecute");static InteractiveInputConfig=new r("InteractiveInputConfig");static ReplInputExecute=new r("ReplInputExecute");static IssueReporter=new r("IssueReporter");static NotebookToolbar=new r("NotebookToolbar");static NotebookStickyScrollContext=new r("NotebookStickyScrollContext");static NotebookCellTitle=new r("NotebookCellTitle");static NotebookCellDelete=new r("NotebookCellDelete");static NotebookCellInsert=new r("NotebookCellInsert");static NotebookCellBetween=new r("NotebookCellBetween");static NotebookCellListTop=new r("NotebookCellTop");static NotebookCellExecute=new r("NotebookCellExecute");static NotebookCellExecuteGoTo=new r("NotebookCellExecuteGoTo");static NotebookCellExecutePrimary=new r("NotebookCellExecutePrimary");static NotebookDiffCellInputTitle=new r("NotebookDiffCellInputTitle");static NotebookDiffCellMetadataTitle=new r("NotebookDiffCellMetadataTitle");static NotebookDiffCellOutputsTitle=new r("NotebookDiffCellOutputsTitle");static NotebookOutputToolbar=new r("NotebookOutputToolbar");static NotebookOutlineFilter=new r("NotebookOutlineFilter");static NotebookOutlineActionMenu=new r("NotebookOutlineActionMenu");static NotebookEditorLayoutConfigure=new r("NotebookEditorLayoutConfigure");static NotebookKernelSource=new r("NotebookKernelSource");static BulkEditTitle=new r("BulkEditTitle");static BulkEditContext=new r("BulkEditContext");static TimelineItemContext=new r("TimelineItemContext");static TimelineTitle=new r("TimelineTitle");static TimelineTitleContext=new r("TimelineTitleContext");static TimelineFilterSubMenu=new r("TimelineFilterSubMenu");static AccountsContext=new r("AccountsContext");static SidebarTitle=new r("SidebarTitle");static PanelTitle=new r("PanelTitle");static AuxiliaryBarTitle=new r("AuxiliaryBarTitle");static AuxiliaryBarHeader=new r("AuxiliaryBarHeader");static TerminalInstanceContext=new r("TerminalInstanceContext");static TerminalEditorInstanceContext=new r("TerminalEditorInstanceContext");static TerminalNewDropdownContext=new r("TerminalNewDropdownContext");static TerminalTabContext=new r("TerminalTabContext");static TerminalTabEmptyAreaContext=new r("TerminalTabEmptyAreaContext");static TerminalStickyScrollContext=new r("TerminalStickyScrollContext");static WebviewContext=new r("WebviewContext");static InlineCompletionsActions=new r("InlineCompletionsActions");static InlineEditsActions=new r("InlineEditsActions");static InlineEditActions=new r("InlineEditActions");static NewFile=new r("NewFile");static MergeInput1Toolbar=new r("MergeToolbar1Toolbar");static MergeInput2Toolbar=new r("MergeToolbar2Toolbar");static MergeBaseToolbar=new r("MergeBaseToolbar");static MergeInputResultToolbar=new r("MergeToolbarResultToolbar");static InlineSuggestionToolbar=new r("InlineSuggestionToolbar");static InlineEditToolbar=new r("InlineEditToolbar");static ChatContext=new r("ChatContext");static ChatCodeBlock=new r("ChatCodeblock");static ChatCompareBlock=new r("ChatCompareBlock");static ChatMessageTitle=new r("ChatMessageTitle");static ChatExecute=new r("ChatExecute");static ChatExecuteSecondary=new r("ChatExecuteSecondary");static ChatInputSide=new r("ChatInputSide");static AccessibleView=new r("AccessibleView");static MultiDiffEditorFileToolbar=new r("MultiDiffEditorFileToolbar");static DiffEditorHunkToolbar=new r("DiffEditorHunkToolbar");static DiffEditorSelectionToolbar=new r("DiffEditorSelectionToolbar");static for(e){return r._instances.get(e)??new r(e)}id;constructor(e){if(r._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);r._instances.set(e,this),this.id=e}},vwe=k("menuService"),Va=class r{constructor(e){this.id=e;this.has=t=>t===e}static _all=new Map;static for(e){let t=this._all.get(e);return t||(t=new r(e),this._all.set(e,t)),t}static merge(e){let t=new Set;for(let n of e)n instanceof r&&t.add(n.id);return t}has},Iwe=new class{_commands=new Map;_menuItems=new Map;_onDidChangeMenu=new gh({merge:Va.merge});onDidChangeMenu=this._onDidChangeMenu.event;addCommand(r){return this._commands.set(r.id,r),this._onDidChangeMenu.fire(Va.for(ep.CommandPalette)),j(()=>{this._commands.delete(r.id)&&this._onDidChangeMenu.fire(Va.for(ep.CommandPalette))})}getCommand(r){return this._commands.get(r)}getCommands(){let r=new Map;return this._commands.forEach((e,t)=>r.set(t,e)),r}appendMenuItem(r,e){let t=this._menuItems.get(r);t||(t=new an,this._menuItems.set(r,t));let n=t.push(e);return this._onDidChangeMenu.fire(Va.for(r)),j(()=>{n(),this._onDidChangeMenu.fire(Va.for(r))})}appendMenuItems(r){let e=new le;for(let{id:t,item:n}of r)e.add(this.appendMenuItem(t,n));return e}getMenuItems(r){let e;return this._menuItems.has(r)?e=[...this._menuItems.get(r)]:e=[],r===ep.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(r){let e=new Set;for(let t of r)fM(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||r.push({command:t})})}};var za=class{constructor(e,t,n,i,o,s,a){this.hideActions=i;this.menuKeybinding=o;this._commandService=a;this.id=e.id,this.label=za.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){let d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&Dt.isThemeIcon(d.icon)&&(l=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}l||(l=Dt.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new za(t,void 0,n,i,void 0,s,a):void 0,this._options=n,this.class=l&&Dt.asClassName(l)}static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}item;alt;_options;id;label;tooltip;class;enabled;checked;run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};za=T([S(5,ui),S(6,NI)],za);var Ji=k("editorGroupsService");function SS(r){return r.getValue("workbench.editor.openSideBySideDirection")==="down"?1:3}var Ht=k("editorService"),Ld=-1,tp=-2;var CS=class{constructor(e,t,n){this.id=e;this.dependencies=t;this.callback=n}};var $1=class r{static INSTANCE=new r;_isWebWorker=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope";_isRenderer=typeof document=="object";_defineCalls=[];_state=1;_amdPolicy;constructor(){}_initialize(){if(this._state===1){if(globalThis.define){console.log("[amdX] AMD loader already present externally"),this._state=3;return}}else return;this._state=2,globalThis.define=(e,t,n)=>{typeof e!="string"&&(n=t,t=e,e=null),(typeof t!="object"||!Array.isArray(t))&&(n=t,t=null),this._defineCalls.push(new CS(e,t,n))},globalThis.define.amd=!0,this._isRenderer?this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){if(e.startsWith(window.location.origin)||e.startsWith(`${q.vscodeFileResource}://${zv}`))return e;throw new Error(`[trusted_script_src] Invalid script url: ${e}`)}}):this._isWebWorker&&(this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){return e}}))}async load(e){if(this._initialize(),this._state===3)return new Promise(s=>{let a=dt();console.log(`[amdX] Using external define("${a}", ["${e}"])`),globalThis.define(a,[e],function(l){console.log(`[amdX] Got a result for ${a}: ${!!l}`),s(l)})});let t=await(this._isWebWorker?this._workerLoadScript(e):this._isRenderer?this._rendererLoadScript(e):this._nodeJSLoadScript(e));if(!t){console.warn(`Did not receive a define call from script ${e}`);return}let n={},i=[],o=[];if(Array.isArray(t.dependencies))for(let s of t.dependencies)s==="exports"?i.push(n):o.push(s);if(o.length>0)throw new Error(`Cannot resolve dependencies for script ${e}. The dependencies are: ${o.join(", ")}`);return typeof t.callback=="function"?t.callback(...i)??n:t.callback}_rendererLoadScript(e){return new Promise((t,n)=>{let i=document.createElement("script");i.setAttribute("async","async"),i.setAttribute("type","text/javascript");let o=()=>{i.removeEventListener("load",s),i.removeEventListener("error",a)},s=l=>{o(),t(this._defineCalls.pop())},a=l=>{o(),n(l)};i.addEventListener("load",s),i.addEventListener("error",a),this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),i.setAttribute("src",e),window.document.getElementsByTagName("head")[0].appendChild(i)})}async _workerLoadScript(e){return this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),await import(e),this._defineCalls.pop()}async _nodeJSLoadScript(e){try{let t=(await import("fs")).default,n=(await import("vm")).default,i=(await import("module")).default,o=L.parse(e).fsPath,s=t.readFileSync(o).toString(),a=i.wrap(s.replace(/^#!.*/,""));return new n.Script(a).runInThisContext().apply(),this._defineCalls.pop()}catch(t){throw t}}};var TS="utf8";var TDe=512*8,wDe=512*128;var ES={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},kDe=(()=>{let r={};for(let e in ES)ES[e].guessableName&&(r[e]=ES[e]);return r})();var Tr=class extends yr{constructor(t,n,i,o,s,a,l,d,u,p,h,g,b,f,v){super(l,a,f,v);this.resource=t;this.hasAssociatedFilePath=n;this.initialValue=i;this.preferredLanguageId=o;this.preferredEncoding=s;this.workingCopyBackupService=d;this.textResourceConfigurationService=u;this.workingCopyService=p;this.textFileService=h;this.labelService=g;this.editorService=b;this._register(this.workingCopyService.registerWorkingCopy(this)),o&&this.setLanguageId(o),this.onConfigurationChange(void 0,!1),this.registerListeners()}static FIRST_LINE_NAME_MAX_LENGTH=40;static FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=this.FIRST_LINE_NAME_MAX_LENGTH*10;static ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}";_onDidChangeContent=this._register(new E);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeName=this._register(new E);onDidChangeName=this._onDidChangeName.event;_onDidChangeDirty=this._register(new E);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new E);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidSave=this._register(new E);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new E);onDidRevert=this._onDidRevert.event;typeId=wg;capabilities=2;configuredLabelFormat="content";cachedModelFirstLineWords=void 0;get name(){return this.configuredLabelFormat==="content"&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration(t=>this.onConfigurationChange(t,!0)))}onConfigurationChange(t,n){if(!t||t.affectsConfiguration(this.resource,"files.encoding")){let i=this.textResourceConfigurationService.getValue(this.resource,"files.encoding");this.configuredEncoding!==i&&typeof i=="string"&&(this.configuredEncoding=i,n&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!t||t.affectsConfiguration(this.resource,"workbench.editor.untitled.labelFormat")){let i=this.textResourceConfigurationService.getValue(this.resource,"workbench.editor.untitled.labelFormat");this.configuredLabelFormat!==i&&(i==="content"||i==="name")&&(this.configuredLabelFormat=i,n&&this._onDidChangeName.fire())}}setLanguageId(t,n){let i=t===Tr.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:t;this.preferredLanguageId=i,i&&super.setLanguageId(i,n)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}configuredEncoding;getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(t){let n=this.getEncoding();this.preferredEncoding=t,n!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}dirty=this.hasAssociatedFilePath||!!this.initialValue;isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(t){this.dirty!==t&&(this.dirty=t,this._onDidChangeDirty.fire())}async save(t){let n=await this.textFileService.save(this.resource,t);return n&&this._onDidSave.fire({reason:t?.reason,source:t?.source}),!!n}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(fS(""))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(t){let n;return this.isResolved()?n=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:TS}):typeof this.initialValue=="string"&&(n=Nw(Ne.fromString(this.initialValue))),{content:n}}ignoreDirtyOnModelContentChange=!1;async resolve(){let t=!1,n=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let o,s=await this.workingCopyBackupService.resolve(this);s?(o=s.value,n=!0):o=Bw(Ne.fromString(this.initialValue||""));let a=await V1(await this.textFileService.getDecodedStream(this.resource,o,{encoding:TS}));this.createTextEditorModel(a,this.resource,this.preferredLanguageId),t=!0}let i=In(this.textEditorModel);return this.installModelListeners(i),t&&((n||this.initialValue)&&this.updateNameFromFirstLine(i),this.setDirty(this.hasAssociatedFilePath||!!n||!!this.initialValue),(n||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n))),this._register(t.onDidChangeLanguage(()=>this.onConfigurationChange(void 0,!0))),super.installModelListeners(t)}onModelContentChanged(t,n){this.ignoreDirtyOnModelContentChange||(!this.hasAssociatedFilePath&&t.getLineCount()===1&&t.getLineLength(1)===0?this.setDirty(!1):this.setDirty(!0)),n.changes.some(i=>(i.range.startLineNumber===1||i.range.endLineNumber===1)&&i.range.startColumn<=Tr.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH)&&this.updateNameFromFirstLine(t),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(t){if(this.hasAssociatedFilePath)return;let n,i=t.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:Tr.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g," ").replace(/\u202E/g,"");i=i.substr(0,wT(i,Tr.FIRST_LINE_NAME_MAX_LENGTH)[0]),i&&bu().exec(i)&&(n=i),n!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=n,this._onDidChangeName.fire())}isReadonly(){return!1}};Tr=T([S(5,Xi),S(6,Qr),S(7,gd),S(8,Rs),S(9,ro),S(10,Us),S(11,$i),S(12,Ht),S(13,md),S(14,Pm)],Tr);var wS=k("untitledTextEditorService"),Ha=class extends O{constructor(t,n){super();this.instantiationService=t;this.configurationService=n}static UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX=/Untitled-\d+/;_onDidChangeDirty=this._register(new E);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new E);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidCreate=this._register(new E);onDidCreate=this._onDidCreate.event;_onWillDispose=this._register(new E);onWillDispose=this._onWillDispose.event;_onDidChangeLabel=this._register(new E);onDidChangeLabel=this._onDidChangeLabel.event;mapResourceToModel=new Ft;get(t){return this.mapResourceToModel.get(t)}getValue(t){return this.get(t)?.textEditorModel?.getValue()}async resolve(t){let n=this.doCreateOrGet(t);return await n.resolve(),n}create(t){return this.doCreateOrGet(t)}doCreateOrGet(t=Object.create(null)){let n=this.massageOptions(t);return n.untitledResource&&this.mapResourceToModel.has(n.untitledResource)?this.mapResourceToModel.get(n.untitledResource):this.doCreate(n)}massageOptions(t){let n=Object.create(null);if(t.associatedResource?(n.untitledResource=L.from({scheme:q.untitled,authority:t.associatedResource.authority,fragment:t.associatedResource.fragment,path:t.associatedResource.path,query:t.associatedResource.query}),n.associatedResource=t.associatedResource):t.untitledResource?.scheme===q.untitled&&(n.untitledResource=t.untitledResource),t.languageId)n.languageId=t.languageId;else if(!n.associatedResource){let i=this.configurationService.getValue();i.files?.defaultLanguage&&(n.languageId=i.files.defaultLanguage)}return n.encoding=t.encoding,n.initialValue=t.initialValue,n}doCreate(t){let n=t.untitledResource;if(!n){let o=1;do n=L.from({scheme:q.untitled,path:`Untitled-${o}`}),o++;while(this.mapResourceToModel.has(n))}let i=this._register(this.instantiationService.createInstance(Tr,n,!!t.associatedResource,t.initialValue,t.languageId,t.encoding));return this.registerModel(i),i}registerModel(t){let n=new le;n.add(t.onDidChangeDirty(()=>this._onDidChangeDirty.fire(t))),n.add(t.onDidChangeName(()=>this._onDidChangeLabel.fire(t))),n.add(t.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(t))),n.add(t.onWillDispose(()=>this._onWillDispose.fire(t))),Q.once(t.onWillDispose)(()=>{this.mapResourceToModel.delete(t.resource),n.dispose()}),this.mapResourceToModel.set(t.resource,t),this._onDidCreate.fire(t),t.isDirty()&&this._onDidChangeDirty.fire(t)}isUntitledWithAssociatedResource(t){return t.scheme===q.untitled&&t.path.length>1&&!Ha.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX.test(t.path)}canDispose(t){return t.isDisposed()?!0:this.doCanDispose(t)}async doCanDispose(t){return t.isDirty()?(await Q.toPromise(t.onDidChangeDirty),this.canDispose(t)):!0}};Ha=T([S(0,Ct),S(1,Xe)],Ha);At(wS,Ha,1);var Od=class extends O{constructor(t,n){super();this.logService=t;this.configurationService=n}participants=new an;addFileOperationParticipant(t){let n=this.participants.push(t);return j(()=>n())}async participate(t,n,i,o){let s=this.configurationService.getValue("files.participants.timeout");if(!(typeof s!="number"||s<=0))for(let a of this.participants)try{await a.participate(t,n,i,s,o)}catch(l){this.logService.warn(l)}}dispose(){this.participants.clear(),super.dispose()}};Od=T([S(0,je),S(1,Xe)],Od);var Zn=class extends O{constructor(t,n,i,o){super();this.getExpression=t;this.shouldUpdate=n;this.contextService=i;this.configurationService=o;this.updateExpressions(!1),this.registerListeners()}static NO_FOLDER=null;_onExpressionChange=this._register(new E);onExpressionChange=this._onExpressionChange.event;mapFolderToParsedExpression=new Map;mapFolderToConfiguredExpression=new Map;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{this.shouldUpdate(t)&&this.updateExpressions(!0)})),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.updateExpressions(!0)))}updateExpressions(t){let n=!1;for(let a of this.contextService.getWorkspace().folders){let l=a.uri.toString(),d=this.doGetExpression(a.uri),u=this.mapFolderToConfiguredExpression.get(l);d?(!u||!Cn(u.expression,d.expression))&&(n=!0,this.mapFolderToParsedExpression.set(l,hs(d.expression)),this.mapFolderToConfiguredExpression.set(l,d)):u&&(n=!0,this.mapFolderToParsedExpression.delete(l),this.mapFolderToConfiguredExpression.delete(l))}let i=new rh(this.contextService.getWorkspace().folders.map(a=>a.uri));for(let[a]of this.mapFolderToConfiguredExpression)a!==Zn.NO_FOLDER&&(i.has(L.parse(a))||(this.mapFolderToParsedExpression.delete(a),this.mapFolderToConfiguredExpression.delete(a),n=!0));let o=this.doGetExpression(void 0),s=this.mapFolderToConfiguredExpression.get(Zn.NO_FOLDER);o?(!s||!Cn(s.expression,o.expression))&&(n=!0,this.mapFolderToParsedExpression.set(Zn.NO_FOLDER,hs(o.expression)),this.mapFolderToConfiguredExpression.set(Zn.NO_FOLDER,o)):s&&(n=!0,this.mapFolderToParsedExpression.delete(Zn.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(Zn.NO_FOLDER)),t&&n&&this._onExpressionChange.fire()}doGetExpression(t){let n=this.getExpression(t);if(!n)return;let i=Object.keys(n);if(i.length===0)return;let o=!1,s=Object.create(null);for(let a of i){o||(o=wi(a));let l=a,d=BT(l,!0);if(d){let u=d.toLowerCase();d!==d.toLowerCase()&&(l=`${u}${l.substring(1)}`)}s[l]=n[a]}return{expression:s,hasAbsolutePath:o}}matches(t,n){if(this.mapFolderToParsedExpression.size===0)return!1;let i=this.contextService.getWorkspaceFolder(t),o,s;if(i&&this.mapFolderToParsedExpression.has(i.uri.toString())?(o=this.mapFolderToParsedExpression.get(i.uri.toString()),s=this.mapFolderToConfiguredExpression.get(i.uri.toString())):(o=this.mapFolderToParsedExpression.get(Zn.NO_FOLDER),s=this.mapFolderToConfiguredExpression.get(Zn.NO_FOLDER)),!o)return!1;let a;return i?a=ma(i.uri,t):a=this.uriToPath(t),typeof a=="string"&&o(a,void 0,n)?!0:a!==this.uriToPath(t)&&s?.hasAbsolutePath?!!o(this.uriToPath(t),void 0,n):!1}uriToPath(t){return t.scheme===q.file?t.fsPath:t.path}};Zn=T([S(2,Qn),S(3,Xe)],Zn);var bM=new V("autoSaveAfterShortDelayContext",!1,!0);var Vo=k("filesConfigurationService"),ei=class extends O{constructor(t,n,i,o,s,a,l,d){super();this.contextKeyService=t;this.configurationService=n;this.contextService=i;this.environmentService=o;this.uriIdentityService=s;this.fileService=a;this.markerService=l;this.textResourceConfigurationService=d;let u=n.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,u.files),this.currentFilesAssociationConfiguration=u?.files?.associations,this.currentHotExitConfiguration=u?.files?.hotExit||zl.ON_EXIT,this.onFilesConfigurationChange(u,!1),this.registerListeners()}static DEFAULT_AUTO_SAVE_MODE=Yt?pr.AFTER_DELAY:pr.OFF;static DEFAULT_AUTO_SAVE_DELAY=1e3;static READONLY_MESSAGES={providerReadonly:{value:c("providerReadonly","Editor is read-only because the file system of the file is read-only."),isTrusted:!0},sessionReadonly:{value:c({key:"sessionReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},configuredReadonly:{value:c({key:"configuredReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure or [toggle for this session](command:{1}).",`workbench.action.openSettings?${encodeURIComponent('["files.readonly"]')}`,"workbench.action.files.toggleActiveEditorReadonlyInSession"),isTrusted:!0},fileLocked:{value:c({key:"fileLocked",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},fileReadonly:{value:c("fileReadonly","Editor is read-only because the file is read-only."),isTrusted:!0}};_onDidChangeAutoSaveConfiguration=this._register(new E);onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event;_onDidChangeAutoSaveDisabled=this._register(new E);onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event;_onDidChangeFilesAssociation=this._register(new E);onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event;_onDidChangeReadonly=this._register(new E);onDidChangeReadonly=this._onDidChangeReadonly.event;currentGlobalAutoSaveConfiguration;currentFilesAssociationConfiguration;currentHotExitConfiguration;autoSaveConfigurationCache=new Ui(1e3);autoSaveDisabledOverrides=new Ft;autoSaveAfterShortDelayContext=bM.bindTo(this.contextKeyService);readonlyIncludeMatcher=this._register(new Nc(()=>this.createReadonlyMatcher(vk)));readonlyExcludeMatcher=this._register(new Nc(()=>this.createReadonlyMatcher(Ik)));configuredReadonlyFromPermissions;sessionReadonlyOverrides=new Ft(t=>this.uriIdentityService.extUri.getComparisonKey(t));createReadonlyMatcher(t){let n=this._register(new Zn(i=>this.configurationService.getValue(t,{resource:i}),i=>i.affectsConfiguration(t),this.contextService,this.configurationService));return this._register(n.onExpressionChange(()=>this._onDidChangeReadonly.fire())),n}isReadonly(t,n){let i=this.fileService.getProvider(t.scheme);if(i&&fk(i))return i.readOnlyMessage??ei.READONLY_MESSAGES.providerReadonly;let o=this.sessionReadonlyOverrides.get(t);return typeof o=="boolean"?o===!0?ei.READONLY_MESSAGES.sessionReadonly:!1:this.uriIdentityService.extUri.isEqualOrParent(t,this.environmentService.userRoamingDataHome)||this.uriIdentityService.extUri.isEqual(t,this.contextService.getWorkspace().configuration??void 0)?!1:this.readonlyIncludeMatcher.value.matches(t)?this.readonlyExcludeMatcher.value.matches(t)?!1:ei.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&n?.locked?ei.READONLY_MESSAGES.fileLocked:n?.readonly?ei.READONLY_MESSAGES.fileReadonly:!1}async updateReadonly(t,n){if(n==="toggle"){let i;try{i=await this.fileService.resolve(t,{resolveMetadata:!0})}catch{}n=!this.isReadonly(t,i)}n==="reset"?this.sessionReadonlyOverrides.delete(t):this.sessionReadonlyOverrides.set(t,n),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration("files")&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)}))}onFilesConfigurationChange(t,n){this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,t.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(this.getAutoSaveMode(void 0).mode===1),n&&this._onDidChangeAutoSaveConfiguration.fire();let i=t?.files?.associations;Cn(this.currentFilesAssociationConfiguration,i)||(this.currentFilesAssociationConfiguration=i,n&&this._onDidChangeFilesAssociation.fire());let o=t?.files?.hotExit;o===zl.OFF||o===zl.ON_EXIT_AND_WINDOW_CLOSE?this.currentHotExitConfiguration=o:this.currentHotExitConfiguration=zl.ON_EXIT;let s=!!t?.files?.readonlyFromPermissions;s!==!!this.configuredReadonlyFromPermissions&&(this.configuredReadonlyFromPermissions=s,n&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(t){let n=this.toResource(t);if(n){let i=this.autoSaveConfigurationCache.get(n);return i||(i=this.computeAutoSaveConfiguration(n,this.textResourceConfigurationService.getValue(n,"files")),this.autoSaveConfigurationCache.set(n,i)),i}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(t,n){let i,o,s,a,l,d;switch(n?.autoSave??ei.DEFAULT_AUTO_SAVE_MODE){case pr.AFTER_DELAY:{i="afterDelay",o=typeof n?.autoSaveDelay=="number"&&n.autoSaveDelay>=0?n.autoSaveDelay:ei.DEFAULT_AUTO_SAVE_DELAY,d=o<=ei.DEFAULT_AUTO_SAVE_DELAY;break}case pr.ON_FOCUS_CHANGE:i="onFocusChange";break;case pr.ON_WINDOW_CHANGE:i="onWindowChange";break}return n?.autoSaveWorkspaceFilesOnly===!0&&(s=!0,t&&!this.contextService.isInsideWorkspace(t)&&(l=!0,d=void 0)),n?.autoSaveWhenNoErrors===!0&&(a=!0,d=void 0),{autoSave:i,autoSaveDelay:o,autoSaveWorkspaceFilesOnly:s,autoSaveWhenNoErrors:a,isOutOfWorkspace:l,isShortAutoSaveDelay:d}}toResource(t){return t instanceof vi?Wa.getOriginalUri(t,{supportSideBySide:1}):t}hasShortAutoSaveDelay(t){let n=this.toResource(t);return this.getAutoSaveConfiguration(n).isShortAutoSaveDelay?!n||!this.autoSaveDisabledOverrides.has(n):!1}getAutoSaveMode(t,n){let i=this.toResource(t);if(i&&this.autoSaveDisabledOverrides.has(i))return{mode:0,reason:4};let o=this.getAutoSaveConfiguration(i);if(typeof o.autoSave>"u")return{mode:0,reason:1};if(typeof n=="number"&&(o.autoSave==="afterDelay"&&n!==2||o.autoSave==="onFocusChange"&&n!==3&&n!==4||o.autoSave==="onWindowChange"&&n!==4))return{mode:0,reason:1};if(i){if(o.autoSaveWorkspaceFilesOnly&&o.isOutOfWorkspace)return{mode:0,reason:2};if(o.autoSaveWhenNoErrors&&this.markerService.read({resource:i,take:1,severities:8}).length>0)return{mode:0,reason:3}}switch(o.autoSave){case"afterDelay":return typeof o.autoSaveDelay=="number"&&o.autoSaveDelay<=ei.DEFAULT_AUTO_SAVE_DELAY?{mode:o.autoSaveWhenNoErrors?2:1}:{mode:2};case"onFocusChange":return{mode:3};case"onWindowChange":return{mode:4}}}async toggleAutoSave(){let t=this.configurationService.getValue("files.autoSave"),n;return[pr.AFTER_DELAY,pr.ON_FOCUS_CHANGE,pr.ON_WINDOW_CHANGE].some(i=>i===t)?n=pr.OFF:n=pr.AFTER_DELAY,this.configurationService.updateValue("files.autoSave",n)}disableAutoSave(t){let n=this.toResource(t);if(!n)return O.None;let i=this.autoSaveDisabledOverrides.get(n)??0;return this.autoSaveDisabledOverrides.set(n,i+1),i===0&&this._onDidChangeAutoSaveDisabled.fire(n),j(()=>{let o=this.autoSaveDisabledOverrides.get(n)??0;o<=1?(this.autoSaveDisabledOverrides.delete(n),this._onDidChangeAutoSaveDisabled.fire(n)):this.autoSaveDisabledOverrides.set(n,o-1)})}get isHotExitEnabled(){return this.contextService.getWorkspace().transient?!1:this.currentHotExitConfiguration!==zl.OFF}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(t,n){return this.configurationService.getValue("files.saveConflictResolution",{resource:t,overrideIdentifier:n})!=="overwriteFileOnDisk"}};ei=T([S(0,ui),S(1,Xe),S(2,Qn),S(3,Ri),S(4,Gi),S(5,Ut),S(6,Jk),S(7,Rs)],ei);At(Vo,ei,0);var ip=k("workingCopyEditorService"),np=class extends O{constructor(t){super();this.editorService=t}_onDidRegisterHandler=this._register(new E);onDidRegisterHandler=this._onDidRegisterHandler.event;handlers=new Set;registerHandler(t){return this.handlers.add(t),this._onDidRegisterHandler.fire(t),j(()=>this.handlers.delete(t))}findEditor(t){for(let n of this.editorService.getEditors(0))if(this.isOpen(t,n.editor))return n}isOpen(t,n){for(let i of this.handlers)if(i.isOpen(t,n))return!0;return!1}};np=T([S(0,Ht)],np);At(ip,np,1);var j1=k("elevatedFileService");var Ws=class extends O{constructor(t,n){super();this.resource=t;this.fileService=n;this._register(this.fileService.onDidFilesChange(i=>this.onDidFilesChange(i)))}_onDidChangeOrphaned=this._register(new E);onDidChangeOrphaned=this._onDidChangeOrphaned.event;orphaned=!1;isOrphaned(){return this.orphaned}async onDidFilesChange(t){let n=!1,i;if(this.orphaned?t.contains(this.resource,1)&&(i=!1,n=!0):t.contains(this.resource,2)&&(i=!0,n=!0),n&&this.orphaned!==i){let o=!1;i&&(await jn(100,We.None),this.isDisposed()?o=!0:o=!await this.fileService.exists(this.resource)),this.orphaned!==o&&!this.isDisposed()&&this.setOrphaned(o)}}setOrphaned(t){this.orphaned!==t&&(this.orphaned=t,this._onDidChangeOrphaned.fire())}_onWillDispose=this._register(new E);onWillDispose=this._onWillDispose.event;isDisposed(){return this._store.isDisposed}dispose(){this.orphaned=!1,this._onWillDispose.fire(),super.dispose()}isModified(){return this.isDirty()}};Ws=T([S(1,Ut)],Ws);var Ka=class extends Ws{constructor(t,n,i,o,s,a,l,d,u,p,h,g,b,f,v,D){super(n,a);this.typeId=t;this.name=i;this.modelFactory=o;this.externalResolver=s;this.logService=l;this.workingCopyFileService=d;this.filesConfigurationService=u;this.workingCopyBackupService=p;this.notificationService=g;this.workingCopyEditorService=b;this.editorService=f;this.elevatedFileService=v;this.progressService=D;this._register(h.registerWorkingCopy(this)),this.registerListeners()}capabilities=0;_model=void 0;get model(){return this._model}_onDidChangeContent=this._register(new E);onDidChangeContent=this._onDidChangeContent.event;_onDidResolve=this._register(new E);onDidResolve=this._onDidResolve.event;_onDidChangeDirty=this._register(new E);onDidChangeDirty=this._onDidChangeDirty.event;_onDidSaveError=this._register(new E);onDidSaveError=this._onDidSaveError.event;_onDidSave=this._register(new E);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new E);onDidRevert=this._onDidRevert.event;_onDidChangeReadonly=this._register(new E);onDidChangeReadonly=this._onDidChangeReadonly.event;registerListeners(){this._register(this.filesConfigurationService.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))}dirty=!1;savedVersionId;isDirty(){return this.dirty}markModified(){this.setDirty(!0)}setDirty(t){if(!this.isResolved())return;let n=this.dirty;this.doSetDirty(t),t!==n&&this._onDidChangeDirty.fire()}doSetDirty(t){let n=this.dirty,i=this.inConflictMode,o=this.inErrorMode,s=this.savedVersionId;return t?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.isResolved()&&(this.savedVersionId=this.model.versionId)),()=>{this.dirty=n,this.inConflictMode=i,this.inErrorMode=o,this.savedVersionId=s}}lastResolvedFileStat;isResolved(){return!!this.model}async resolve(t){if(this.trace("resolve() - enter"),this.isDisposed()){this.trace("resolve() - exit - without resolving because file working copy is disposed");return}if(!t?.contents&&(this.dirty||this.saveSequentializer.isRunning())){this.trace("resolve() - exit - without resolving because file working copy is dirty or being saved");return}return this.doResolve(t)}async doResolve(t){if(t?.contents)return this.resolveFromBuffer(t.contents);if(!(!this.isResolved()&&await this.resolveFromBackup()))return this.resolveFromFile(t)}async resolveFromBuffer(t){this.trace("resolveFromBuffer()");let n,i,o,s;try{let a=await this.fileService.stat(this.resource);n=a.mtime,i=a.ctime,o=a.size,s=a.etag,this.setOrphaned(!1)}catch(a){n=Date.now(),i=Date.now(),o=0,s=ou,this.setOrphaned(a.fileOperationResult===1)}return this.resolveFromContent({resource:this.resource,name:this.name,mtime:n,ctime:i,size:o,etag:s,value:t,readonly:!1,locked:!1},!0)}async resolveFromBackup(){let t=await this.workingCopyBackupService.resolve(this);return this.isResolved()?(this.trace("resolveFromBackup() - exit - withoutresolving because previously new file working copy got created meanwhile"),!0):t?(await this.doResolveFromBackup(t),!0):!1}async doResolveFromBackup(t){this.trace("doResolveFromBackup()"),await this.resolveFromContent({resource:this.resource,name:this.name,mtime:t.meta?t.meta.mtime:Date.now(),ctime:t.meta?t.meta.ctime:Date.now(),size:t.meta?t.meta.size:0,etag:t.meta?t.meta.etag:ou,value:t.value,readonly:!1,locked:!1},!0),t.meta&&t.meta.orphaned&&this.setOrphaned(!0)}async resolveFromFile(t){this.trace("resolveFromFile()");let n=t?.forceReadFromFile,i;n?i=ou:this.lastResolvedFileStat&&(i=this.lastResolvedFileStat.etag);let o=this.versionId;try{let s=await this.fileService.readFileStream(this.resource,{etag:i,limits:t?.limits});if(this.setOrphaned(!1),o!==this.versionId){this.trace("resolveFromFile() - exit - without resolving because file working copy content changed");return}await this.resolveFromContent(s,!1)}catch(s){let a=s.fileOperationResult;if(this.setOrphaned(a===1),this.isResolved()&&a===2){s instanceof hm&&this.updateLastResolvedFileStat(s.stat);return}if(this.isResolved()&&a===1&&!n)return;throw s}}async resolveFromContent(t,n){if(this.trace("resolveFromContent() - enter"),this.isDisposed()){this.trace("resolveFromContent() - exit - because working copy is disposed");return}this.updateLastResolvedFileStat({resource:this.resource,name:t.name,mtime:t.mtime,ctime:t.ctime,size:t.size,etag:t.etag,readonly:t.readonly,locked:t.locked,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0}),this.isResolved()?await this.doUpdateModel(t.value):await this.doCreateModel(t.value),this.setDirty(!!n),this._onDidResolve.fire()}async doCreateModel(t){this.trace("doCreateModel()"),this._model=this._register(await this.modelFactory.createModel(this.resource,t,We.None)),this.installModelListeners(this._model)}ignoreDirtyOnModelContentChange=!1;async doUpdateModel(t){this.trace("doUpdateModel()"),this.ignoreDirtyOnModelContentChange=!0;try{await this.model?.update(t,We.None)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n.isUndoing||n.isRedoing))),this._register(t.onWillDispose(()=>this.dispose()))}onModelContentChanged(t,n){if(this.trace("onModelContentChanged() - enter"),this.versionId++,this.trace(`onModelContentChanged() - new versionId ${this.versionId}`),n&&(this.lastContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(t.versionId===this.savedVersionId){this.trace("onModelContentChanged() - model content changed back to last saved version");let i=this.dirty;this.setDirty(!1),i&&this._onDidRevert.fire()}else this.trace("onModelContentChanged() - model content changed and marked as dirty"),this.setDirty(!0);this._onDidChangeContent.fire()}async forceResolveFromFile(){this.isDisposed()||await this.externalResolver({forceReadFromFile:!0})}get backupDelay(){return this.model?.configuration?.backupDelay}async backup(t){let n;this.lastResolvedFileStat&&(n={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.isOrphaned()});let i;return this.isResolved()&&(i=await Bc(this.model.snapshot(2,t),t)),{meta:n,content:i}}versionId=0;static UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500;lastContentChangeFromUndoRedo=void 0;saveSequentializer=new Fh;ignoreSaveFromSaveParticipants=!1;async save(t=Object.create(null)){return this.isResolved()?this.isReadonly()?(this.trace("save() - ignoring request for readonly resource"),!1):(this.hasState(3)||this.hasState(5))&&(t.reason===2||t.reason===3||t.reason===4)?(this.trace("save() - ignoring auto save request for file working copy that is in conflict or error"),!1):(this.trace("save() - enter"),await this.doSave(t),this.trace("save() - exit"),this.hasState(0)):!1}async doSave(t){typeof t.reason!="number"&&(t.reason=1);let n=this.versionId;if(this.trace(`doSave(${n}) - enter with versionId ${n}`),this.ignoreSaveFromSaveParticipants){this.trace(`doSave(${n}) - exit - refusing to save() recursively from save participant`);return}if(this.saveSequentializer.isRunning(n))return this.trace(`doSave(${n}) - exit - found a running save for versionId ${n}`),this.saveSequentializer.running;if(!t.force&&!this.dirty){this.trace(`doSave(${n}) - exit - because not dirty and/or versionId is different (this.isDirty: ${this.dirty}, this.versionId: ${this.versionId})`);return}if(this.saveSequentializer.isRunning())return this.trace(`doSave(${n}) - exit - because busy saving`),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue(()=>this.doSave(t));this.isResolved()&&this.model.pushStackElement();let i=new Nn;return this.progressService.withProgress({title:c("saveParticipants","Saving '{0}'",this.name),location:10,cancellable:!0,delay:this.isDirty()?3e3:5e3},o=>this.doSaveSequential(n,t,o,i),()=>{i.cancel()}).finally(()=>{i.dispose()})}doSaveSequential(t,n,i,o){return this.saveSequentializer.run(t,(async()=>{if(this.isResolved()&&!n.skipSaveParticipants&&this.workingCopyFileService.hasSaveParticipants)try{if(n.reason===2&&typeof this.lastContentChangeFromUndoRedo=="number"){let l=Date.now()-this.lastContentChangeFromUndoRedo;l<Ka.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await jn(Ka.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-l)}if(!o.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{await this.workingCopyFileService.runSaveParticipants(this,{reason:n.reason??1,savedFrom:n.from},i,o.token)}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(l){this.logService.error(`[stored file working copy] runSaveParticipants(${t}) - resulted in an error: ${l.toString()}`,this.resource.toString(),this.typeId)}if(o.token.isCancellationRequested||this.isDisposed()||!this.isResolved())return;t=this.versionId,this.inErrorMode=!1,i.report({message:c("saveTextFile","Writing into file...")}),this.trace(`doSave(${t}) - before write()`);let s=In(this.lastResolvedFileStat),a=this;return this.saveSequentializer.run(t,(async()=>{try{let l={mtime:s.mtime,etag:n.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(s.resource)?ou:s.etag,unlock:n.writeUnlock},d;if(typeof a.model.save=="function")try{d=await a.model.save(l,o.token)}catch(u){if(o.token.isCancellationRequested)return;throw u}else{let u=await Bc(a.model.snapshot(1,o.token),o.token);if(o.token.isCancellationRequested)return;o.dispose(),n?.writeElevated&&this.elevatedFileService.isSupported(s.resource)?d=await this.elevatedFileService.writeFileElevated(s.resource,In(u),l):d=await this.fileService.writeFile(s.resource,In(u),l)}this.handleSaveSuccess(d,t,n)}catch(l){this.handleSaveError(l,t,n)}})(),()=>o.cancel())})(),()=>o.cancel())}handleSaveSuccess(t,n,i){this.updateLastResolvedFileStat(t),n===this.versionId?(this.trace(`handleSaveSuccess(${n}) - setting dirty to false because versionId did not change`),this.setDirty(!1)):this.trace(`handleSaveSuccess(${n}) - not setting dirty to false because versionId did change meanwhile`),this.setOrphaned(!1),this._onDidSave.fire({reason:i.reason,stat:t,source:i.source})}handleSaveError(t,n,i){if((i.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,[`[stored file working copy] handleSaveError(${n}) - exit - resulted in a save error: ${t.toString()}`,this.resource.toString(),this.typeId]),i.ignoreErrorHandler)throw t;this.setDirty(!0),this.inErrorMode=!0,t.fileOperationResult===3&&(this.inConflictMode=!0),this.doHandleSaveError(t,i),this._onDidSaveError.fire()}doHandleSaveError(t,n){let i=t,o=[],s;if(i.fileOperationResult===3)s=c("staleSaveError","Failed to save '{0}': The content of the file is newer. Do you want to overwrite the file with your changes?",this.name),o.push(hr({id:"fileWorkingCopy.overwrite",label:c("overwrite","Overwrite"),run:()=>this.save({...n,ignoreModifiedSince:!0,reason:1})})),o.push(hr({id:"fileWorkingCopy.revert",label:c("revert","Revert"),run:()=>this.revert()}));else{let d=i.fileOperationResult===5,u=d&&i.options?.unlock,p=i.fileOperationResult===6,h=this.elevatedFileService.isSupported(this.resource);LI(t)&&o.push(...t.actions),h&&(p||u)?o.push(hr({id:"fileWorkingCopy.saveElevated",label:u?lt?c("overwriteElevated","Overwrite as Admin..."):c("overwriteElevatedSudo","Overwrite as Sudo..."):lt?c("saveElevated","Retry as Admin..."):c("saveElevatedSudo","Retry as Sudo..."),run:()=>{this.save({...n,writeElevated:!0,writeUnlock:u,reason:1})}})):d?o.push(hr({id:"fileWorkingCopy.unlock",label:c("overwrite","Overwrite"),run:()=>this.save({...n,writeUnlock:!0,reason:1})})):o.push(hr({id:"fileWorkingCopy.retry",label:c("retry","Retry"),run:()=>this.save({...n,reason:1})})),o.push(hr({id:"fileWorkingCopy.saveAs",label:c("saveAs","Save As..."),run:async()=>{let g=this.workingCopyEditorService.findEditor(this);g&&((await this.editorService.save(g,{saveAs:!0,reason:1})).success||this.doHandleSaveError(t,n))}})),o.push(hr({id:"fileWorkingCopy.revert",label:c("revert","Revert"),run:()=>this.revert()})),d?u&&h?s=lt?c("readonlySaveErrorAdmin","Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",this.name):c("readonlySaveErrorSudo","Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",this.name):s=c("readonlySaveError","Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",this.name):h&&p?s=lt?c("permissionDeniedSaveError","Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",this.name):c("permissionDeniedSaveErrorSudo","Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",this.name):s=c({key:"genericSaveError",comment:["{0} is the resource that failed to save and {1} the error message"]},"Failed to save '{0}': {1}",this.name,bm(t,!1))}let a=this.notificationService.notify({id:`${xn(this.resource.toString())}`,severity:bD.Error,message:s,actions:{primary:o}}),l=this._register(Q.once(Q.any(this.onDidSave,this.onDidRevert))(()=>a.close()));this._register(Q.once(a.onDidClose)(()=>l.dispose()))}updateLastResolvedFileStat(t){let n=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=t.mtime?this.lastResolvedFileStat=t:this.lastResolvedFileStat={...this.lastResolvedFileStat,readonly:t.readonly,locked:t.locked}:this.lastResolvedFileStat=t,this.isReadonly()!==n&&this._onDidChangeReadonly.fire()}async revert(t){if(!this.isResolved()||!this.dirty&&!t?.force)return;this.trace("revert()");let n=this.dirty,i=this.doSetDirty(!1);if(!t?.soft)try{await this.forceResolveFromFile()}catch(s){if(s.fileOperationResult!==1)throw i(),s}this._onDidRevert.fire(),n&&this._onDidChangeDirty.fire()}inConflictMode=!1;inErrorMode=!1;hasState(t){switch(t){case 3:return this.inConflictMode;case 1:return this.dirty;case 5:return this.inErrorMode;case 4:return this.isOrphaned();case 2:return this.saveSequentializer.isRunning();case 0:return!this.dirty}}async joinState(t){return this.saveSequentializer.running}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}trace(t){this.logService.trace(`[stored file working copy] ${t}`,this.resource.toString(),this.typeId)}dispose(){this.trace("dispose()"),this.inConflictMode=!1,this.inErrorMode=!1,this._model=void 0,super.dispose()}};Ka=T([S(5,Ut),S(6,je),S(7,rp),S(8,Vo),S(9,gd),S(10,ro),S(11,vD),S(12,ip),S(13,Ht),S(14,j1),S(15,sx)],Ka);var Ad=class extends O{constructor(t){super();this.logService=t}saveParticipants=[];get length(){return this.saveParticipants.length}addSaveParticipant(t){let n=Xp(this.saveParticipants,t);return j(()=>n())}async participate(t,n,i,o){t.model?.pushStackElement();for(let s of this.saveParticipants){if(o.isCancellationRequested||t.isDisposed())break;try{let a=s.participate(t,n,i,o);await Bc(a,o)}catch(a){this.logService.warn(a)}}t.model?.pushStackElement()}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length),super.dispose()}};Ad=T([S(0,je)],Ad);var rp=k("workingCopyFileService"),op=class extends O{constructor(t,n,i,o){super();this.fileService=t;this.workingCopyService=n;this.instantiationService=i;this.uriIdentityService=o;this._register(this.registerWorkingCopyProvider(s=>this.workingCopyService.workingCopies.filter(a=>this.fileService.hasProvider(s)?this.uriIdentityService.extUri.isEqualOrParent(a.resource,s):this.uriIdentityService.extUri.isEqual(a.resource,s))))}_onWillRunWorkingCopyFileOperation=this._register(new Cl);onWillRunWorkingCopyFileOperation=this._onWillRunWorkingCopyFileOperation.event;_onDidFailWorkingCopyFileOperation=this._register(new Cl);onDidFailWorkingCopyFileOperation=this._onDidFailWorkingCopyFileOperation.event;_onDidRunWorkingCopyFileOperation=this._register(new Cl);onDidRunWorkingCopyFileOperation=this._onDidRunWorkingCopyFileOperation.event;correlationIds=0;create(t,n,i){return this.doCreateFileOrFolder(t,!0,n,i)}createFolder(t,n,i){return this.doCreateFileOrFolder(t,!1,n,i)}async doCreateFileOrFolder(t,n,i,o){if(t.length===0)return[];if(n){let u=(await zi.settled(t.map(p=>this.fileService.canCreateFile(p.resource,{overwrite:p.overwrite})))).find(p=>p instanceof Error);if(u instanceof Error)throw u}let s=t.map(d=>({target:d.resource}));await this.runFileOperationParticipants(s,0,o,i);let a={correlationId:this.correlationIds++,operation:0,files:s};await this._onWillRunWorkingCopyFileOperation.fireAsync(a,We.None);let l;try{n?l=await zi.settled(t.map(d=>this.fileService.createFile(d.resource,d.contents,{overwrite:d.overwrite}))):l=await zi.settled(t.map(d=>this.fileService.createFolder(d.resource)))}catch(d){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(a,We.None),d}return await this._onDidRunWorkingCopyFileOperation.fireAsync(a,We.None),l}async move(t,n,i){return this.doMoveOrCopy(t,!0,n,i)}async copy(t,n,i){return this.doMoveOrCopy(t,!1,n,i)}async doMoveOrCopy(t,n,i,o){let s=[];for(let{file:{source:d,target:u},overwrite:p}of t){let h=await(n?this.fileService.canMove(d,u,p):this.fileService.canCopy(d,u,p));if(h instanceof Error)throw h}let a=t.map(d=>d.file);await this.runFileOperationParticipants(a,n?2:3,o,i);let l={correlationId:this.correlationIds++,operation:n?2:3,files:a};await this._onWillRunWorkingCopyFileOperation.fireAsync(l,We.None);try{for(let{file:{source:d,target:u},overwrite:p}of t){if(!this.uriIdentityService.extUri.isEqual(d,u)){let h=n?[...this.getDirty(d),...this.getDirty(u)]:this.getDirty(u);await zi.settled(h.map(g=>g.revert({soft:!0})))}n?s.push(await this.fileService.move(d,u,p)):s.push(await this.fileService.copy(d,u,p))}}catch(d){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(l,We.None),d}return await this._onDidRunWorkingCopyFileOperation.fireAsync(l,We.None),s}async delete(t,n,i){for(let a of t){let l=await this.fileService.canDelete(a.resource,{recursive:a.recursive,useTrash:a.useTrash});if(l instanceof Error)throw l}let o=t.map(a=>({target:a.resource}));await this.runFileOperationParticipants(o,1,i,n);let s={correlationId:this.correlationIds++,operation:1,files:o};await this._onWillRunWorkingCopyFileOperation.fireAsync(s,We.None);for(let a of t){let l=this.getDirty(a.resource);await zi.settled(l.map(d=>d.revert({soft:!0})))}try{for(let a of t)await this.fileService.del(a.resource,{recursive:a.recursive,useTrash:a.useTrash})}catch(a){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(s,We.None),a}await this._onDidRunWorkingCopyFileOperation.fireAsync(s,We.None)}fileOperationParticipants=this._register(this.instantiationService.createInstance(Od));addFileOperationParticipant(t){return this.fileOperationParticipants.addFileOperationParticipant(t)}runFileOperationParticipants(t,n,i,o){return this.fileOperationParticipants.participate(t,n,i,o)}saveParticipants=this._register(this.instantiationService.createInstance(Ad));get hasSaveParticipants(){return this.saveParticipants.length>0}addSaveParticipant(t){return this.saveParticipants.addSaveParticipant(t)}runSaveParticipants(t,n,i,o){return this.saveParticipants.participate(t,n,i,o)}workingCopyProviders=[];registerWorkingCopyProvider(t){let n=Xp(this.workingCopyProviders,t);return j(n)}getDirty(t){let n=new Set;for(let i of this.workingCopyProviders)for(let o of i(t))o.isDirty()&&n.add(o);return Array.from(n)}};op=T([S(0,Ut),S(1,ro),S(2,Ct),S(3,Gi)],op);At(rp,op,1);var Us=k("textFileService");var yM;(e=>e.DEFAULT={allowTrailingComma:!0})(yM||={});var X1=k("keybindingService");var kS=".vscode",xM="settings",_Oe=`${kS}/${xM}.json`;var ROe=[1],POe=[2,3,4,5,6],SM=[3,4,5],LOe=[1,...SM],OOe=[2,3,4,5,6],CM=[3,4,5,6],EM=[4,5,6],cf="tasks",Q1="launch",Y1=Object.create(null);Y1[cf]=`${kS}/${cf}.json`;Y1[Q1]=`${kS}/${Q1}.json`;var TM=Object.create(null);TM[cf]=`${cf}.json`;var AOe=Xe;var DS=class extends _s{_currentResultGroups=new Map;updateResultGroup(e,t){return t?this._currentResultGroups.set(e,t):this._currentResultGroups.delete(e),this.removeDuplicateResults(),this.update()}removeDuplicateResults(){let e=new Set;[...this._currentResultGroups.keys()].sort((t,n)=>this._currentResultGroups.get(t).order-this._currentResultGroups.get(n).order).forEach(t=>{let n=this._currentResultGroups.get(t);n.result.filterMatches=n.result.filterMatches.filter(i=>!e.has(i.setting.key)),n.result.filterMatches.forEach(i=>e.add(i.setting.key))})}filterSettings(e,t,n){let i=this.filterGroups,o=[];for(let s of i){let a=t(s);for(let l of s.sections)for(let d of l.settings){let u=n(d,s);(a||u)&&o.push({setting:d,matches:u&&u.matches,matchType:u?.matchType??0,score:u?.score??0})}}return o}getPreference(e){for(let t of this.settingsGroups)for(let n of t.sections)for(let i of n.settings)if(e===i.key)return i}collectMetadata(e){let t=Object.create(null),n=!1;return e.forEach(i=>{i.result.metadata&&(t[i.id]=i.result.metadata,n=!0)}),n?t:null}get filterGroups(){return this.settingsGroups}};var uf=class extends DS{constructor(t,n){super();this._defaultSettings=t;this._register(n.onDidChangeConfiguration(i=>{i.source===7&&(this.dirty=!0,this._onDidChangeGroups.fire())})),this._register(De.as(qi.Configuration).onDidSchemaChange(i=>{this.dirty=!0,this._onDidChangeGroups.fire()}))}_onDidChangeGroups=this._register(new E);onDidChangeGroups=this._onDidChangeGroups.event;additionalGroups=[];dirty=!1;get filterGroups(){return this.settingsGroups.slice(1)}get settingsGroups(){let t=this._defaultSettings.getSettingsGroups(this.dirty);return this.dirty=!1,[...t,...this.additionalGroups]}setAdditionalGroups(t){this.additionalGroups=t}findValueMatches(t,n){return[]}update(){throw new Error("Not supported")}};uf=T([S(1,Xe)],uf);function wM(r){return"// "+c("defaultKeybindingsHeader","Override key bindings by placing them into your key bindings file.")+`
`+r.getDefaultKeybindingsContent()}var pf=class{constructor(e,t){this._uri=e;this.keybindingService=t}_content;get uri(){return this._uri}get content(){return this._content||(this._content=wM(this.keybindingService)),this._content}getPreference(){return null}dispose(){}};pf=T([S(1,X1)],pf);var yMe=k("preferencesService");var Zu={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},kM={id:"default",displayName:c("promptOpenWith.defaultEditor.displayName","Text Editor"),providerDisplayName:c("builtinProviderDisplayName","Built-in")};var Z1="workbench.editors.textDiffEditor",e_="workbench.editors.binaryResourceDiffEditor";function df(r,e,t){for(let n of t.visibleEditorPanes)if(n.group.id===e&&r.matches(n.input))return n.getViewState()}function z1(r){if(pn(r))return!1;let e=r;return L.isUri(e?.resource)}function Er(r){if(pn(r))return!1;let e=r;return e?.original!==void 0&&e.modified!==void 0}function Pd(r){if(pn(r))return!1;let e=r;return!e||e.resources&&!Array.isArray(e.resources)?!1:!!e.resources||!!e.multiDiffSource}function Fs(r){if(pn(r)||Er(r))return!1;let e=r;return e?.primary!==void 0&&e.secondary!==void 0}function Bs(r){if(pn(r))return!1;let e=r;return L.isUri(e?.base?.resource)&&L.isUri(e?.input1?.resource)&&L.isUri(e?.input2?.resource)&&L.isUri(e?.result?.resource)}var _S=class{mapIdToSaveSource=new Map;registerSource(e,t){let n=this.mapIdToSaveSource.get(e);return n||(n={source:e,label:t},this.mapIdToSaveSource.set(e,n)),n.source}getSourceLabel(e){return this.mapIdToSaveSource.get(e)?.label??e}},TNe=new _S;var Ju=class extends O{};function pn(r){return r instanceof Ju}function _M(r){let e=r;return L.isUri(e?.preferredResource)}function RM(r){let e=r;return pn(e?.primary)&&pn(e?.secondary)}function vS(r){let e=r;return pn(e?.modified)&&pn(e?.original)}var RS=class{getOriginalUri(e,t){if(!e)return;if(Bs(e))return Wa.getOriginalUri(e.result,t);if(t?.supportSideBySide){let{primary:i,secondary:o}=this.getSideEditors(e);if(i&&o){if(t?.supportSideBySide===3)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(o,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(o,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?i:o}}if(Er(e)||Pd(e)||Fs(e)||Bs(e))return;let n=_M(e)?e.preferredResource:e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}getSideEditors(e){return RM(e)||Fs(e)?{primary:e.primary,secondary:e.secondary}:vS(e)||Er(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(Bs(e))return Wa.getCanonicalUri(e.result,t);if(t?.supportSideBySide){let{primary:i,secondary:o}=this.getSideEditors(e);if(i&&o){if(t?.supportSideBySide===3)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(o,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(o,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?i:o}}if(Er(e)||Pd(e)||Fs(e)||Bs(e))return;let n=e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}filterUri(e,t){if(Array.isArray(t)){if(t.some(n=>e.scheme===n))return e}else if(t===e.scheme)return e}};var Wa=new RS;var PS=class{instantiationService;fileEditorFactory;editorSerializerConstructors=new Map;editorSerializerInstances=new Map;start(e){let t=this.instantiationService=e.get(Ct);for(let[n,i]of this.editorSerializerConstructors)this.createEditorSerializer(n,i,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,n){let i=n.createInstance(t);this.editorSerializerInstances.set(e,i)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return In(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),j(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get(typeof e=="string"?e:e.typeId)}};De.add(Zu.EditorFactory,new PS);function t_(r,e,t){let n=Ek(r,e);return n.forceMessage=t?.forceMessage,n.forceSeverity=t?.forceSeverity,n.allowDialog=t?.allowDialog,n}var mFe=c("views log","Views"),gFe=No("default-view-icon",ee.window,c("defaultViewIcon","Default view icon.")),AS;(t=>(t.ViewContainersRegistry="workbench.registry.view.containers",t.ViewsRegistry="workbench.registry.view"))(AS||={});var LS=class extends O{_onDidRegister=this._register(new E);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new E);onDidDeregister=this._onDidDeregister.event;viewContainers=new Map;defaultViewContainers=[];get all(){return[...this.viewContainers.values()].flat()}registerViewContainer(e,t,n){let i=this.get(e.id);if(i)return i;let o=e;return o.openCommandActionDescriptor=n?.doNotRegisterOpenCommand?void 0:o.openCommandActionDescriptor??{id:o.id},Ic(this.viewContainers,t,[]).push(o),n?.isDefault&&this.defaultViewContainers.push(o),this._onDidRegister.fire({viewContainer:o,viewContainerLocation:t}),o}deregisterViewContainer(e){for(let t of this.viewContainers.keys()){let n=this.viewContainers.get(t),i=n?.indexOf(e);if(i!==-1){n?.splice(i,1),n.length===0&&this.viewContainers.delete(t),this._onDidDeregister.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.viewContainers.get(e)||[]]}getViewContainerLocation(e){return[...this.viewContainers.keys()].filter(t=>this.getViewContainers(t).filter(n=>n?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.defaultViewContainers.find(t=>this.getViewContainerLocation(t)===e)}};De.add(AS.ViewContainersRegistry,new LS);function PM(r,e){let t=r.group??"9_more",n=e.group??"9_more";return t!==n?t.localeCompare(n):(r.order??5)-(e.order??5)}var OS=class extends O{_onViewsRegistered=this._register(new E);onViewsRegistered=this._onViewsRegistered.event;_onViewsDeregistered=this._register(new E);onViewsDeregistered=this._onViewsDeregistered.event;_onDidChangeContainer=this._register(new E);onDidChangeContainer=this._onDidChangeContainer.event;_onDidChangeViewWelcomeContent=this._register(new E);onDidChangeViewWelcomeContent=this._onDidChangeViewWelcomeContent.event;_viewContainers=[];_views=new Map;_viewWelcomeContents=new vc;registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:n})=>this.addViews(t,n)),this._onViewsRegistered.fire(e)}deregisterViews(e,t){let n=this.removeViews(e,t);n.length&&this._onViewsDeregistered.fire({views:n,viewContainer:t})}moveViews(e,t){for(let n of this._views.keys())if(n!==t){let i=this.removeViews(e,n);i.length&&(this.addViews(i,t),this._onDidChangeContainer.fire({views:i,from:n,to:t}))}}getViews(e){return this._views.get(e)||[]}getView(e){for(let t of this._viewContainers){let n=(this._views.get(t)||[]).filter(i=>i.id===e)[0];if(n)return n}return null}getViewContainer(e){for(let t of this._viewContainers)if((this._views.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this._viewWelcomeContents.add(e,t),this._onDidChangeViewWelcomeContent.fire(e),j(()=>{this._viewWelcomeContents.delete(e,t),this._onDidChangeViewWelcomeContent.fire(e)})}registerViewWelcomeContent2(e,t){let n=new Map;for(let[i,o]of t)this._viewWelcomeContents.add(e,o),n.set(i,j(()=>{this._viewWelcomeContents.delete(e,o),this._onDidChangeViewWelcomeContent.fire(e)}));return this._onDidChangeViewWelcomeContent.fire(e),n}getViewWelcomeContent(e){let t=[];return this._viewWelcomeContents.forEach(e,n=>t.push(n)),t.sort(PM)}addViews(e,t){let n=this._views.get(t);n||(n=[],this._views.set(t,n),this._viewContainers.push(t));for(let i of e){if(this.getView(i.id)!==null)throw new Error(c("duplicateId","A view with id '{0}' is already registered",i.id));n.push(i)}}removeViews(e,t){let n=this._views.get(t);if(!n)return[];let i=[],o=[];for(let s of n)e.includes(s)?i.push(s):o.push(s);return i.length&&(o.length?this._views.set(t,o):(this._views.delete(t),this._viewContainers.splice(this._viewContainers.indexOf(t),1))),i}};De.add(AS.ViewsRegistry,new OS);var fFe=k("viewDescriptorService");function n_(r){return typeof r=="string"?!1:Array.isArray(r)?r.every(n_):!!r.exclusive}var hf=class{constructor(e,t,n,i,o){this.uri=e;this.languageId=t;this.notebookUri=n;this.notebookType=i;this.recursive=o}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()&&this.recursive===e.recursive}},Vs=class r{constructor(e){this._notebookInfoResolver=e}_clock=0;_entries=[];_onDidChange=new E;onDidChange=this._onDidChange.event;register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),j(()=>{if(n){let i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);let t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}allNoModel(){return this._entries.map(e=>e.provider)}ordered(e,t=!1){let n=[];return this._orderedForEach(e,t,i=>n.push(i.provider)),n}orderedGroups(e){let t=[],n,i;return this._orderedForEach(e,!1,o=>{n&&i===o._score?n.push(o.provider):(i=o._score,n=[o.provider],t.push(n))}),t}_orderedForEach(e,t,n){this._updateScores(e,t);for(let i of this._entries)i._score>0&&n(i)}_lastCandidate;_updateScores(e,t){let n=this._notebookInfoResolver?.(e.uri),i=n?new hf(e.uri,e.getLanguageId(),n.uri,n.type,t):new hf(e.uri,e.getLanguageId(),void 0,void 0,t);if(!this._lastCandidate?.equals(i)){this._lastCandidate=i;for(let o of this._entries)if(o._score=Fy(o.selector,i.uri,i.languageId,pD(e),i.notebookUri,i.notebookType),n_(o.selector)&&o._score>0)if(t)o._score=0;else{for(let s of this._entries)s._score=0;o._score=1e3;break}this._entries.sort(r._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:sp(e.selector)&&!sp(t.selector)?1:!sp(e.selector)&&sp(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}};function sp(r){return typeof r=="string"?!1:Array.isArray(r)?r.some(sp):!!r.isBuiltin}var LM=new Vs,MS=class r{constructor(e,t,n,i){this.id=e;this.provider=t;this.roots=n;this.ref=i;this.root=n[0]}static async create(e,t,n){let[i]=LM.ordered(e);if(!i)return;let o=await i.prepareCallHierarchy(e,t,n);if(o)return new r(o.roots.reduce((s,a)=>s+a._sessionId,""),i,o.roots,new vl(o))}root;dispose(){this.ref.release()}fork(e){let t=this;return new class extends r{constructor(){super(t.id,t.provider,[e],t.ref.acquire())}}}async resolveIncomingCalls(e,t){try{let n=await this.provider.provideIncomingCalls(e,t);if(ul(n))return n}catch(n){Zs(n)}return[]}async resolveOutgoingCalls(e,t){try{let n=await this.provider.provideOutgoingCalls(e,t);if(ul(n))return n}catch(n){Zs(n)}return[]}},ap=new Map;Tn.registerCommand("_executePrepareCallHierarchy",async(r,...e)=>{let[t,n]=e;Vi(L.isUri(t)),Vi(Se.isIPosition(n));let o=r.get(Qr).getModel(t),s;if(!o){let l=await r.get(hd).createModelReference(t);o=l.object.textEditorModel,s=l}try{let a=await MS.create(o,n,We.None);return a?(ap.set(a.id,a),ap.forEach((l,d,u)=>{u.size>10&&(l.dispose(),ap.delete(d))}),[a.root]):[]}finally{s?.dispose()}});function i_(r){return!0}Tn.registerCommand("_executeProvideIncomingCalls",async(r,...e)=>{let[t]=e;Vi(i_(t));let n=ap.get(t._sessionId);if(n)return n.resolveIncomingCalls(t,We.None)});Tn.registerCommand("_executeProvideOutgoingCalls",async(r,...e)=>{let[t]=e;Vi(i_(t));let n=ap.get(t._sessionId);if(n)return n.resolveOutgoingCalls(t,We.None)});var n2e=new V("chatSessionResponseVote","",{type:"string",description:c("interactiveSessionResponseVote","When the response has been voted up, is set to 'up'. When voted down, is set to 'down'. Otherwise an empty string.")}),i2e=new V("chatVoteUpEnabled",!1,{type:"boolean",description:c("chatVoteUpEnabled","True when the chat vote up action is enabled.")}),r2e=new V("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:c("chatSessionResponseDetectedAgentOrCommand","When the agent or command was automatically detected")}),o2e=new V("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:c("chatResponseSupportsIssueReporting","True when the current chat response supports issue reporting.")}),s2e=new V("chatSessionResponseFiltered",!1,{type:"boolean",description:c("chatResponseFiltered","True when the chat response was filtered out by the server.")}),a2e=new V("chatSessionResponseError",!1,{type:"boolean",description:c("chatResponseErrored","True when the chat response resulted in an error.")}),l2e=new V("chatSessionRequestInProgress",!1,{type:"boolean",description:c("interactiveSessionRequestInProgress","True when the current request is still in progress.")}),d2e=new V("chatResponse",!1,{type:"boolean",description:c("chatResponse","The chat item is a response.")}),c2e=new V("chatRequest",!1,{type:"boolean",description:c("chatRequest","The chat item is a request")}),u2e=new V("chatEditApplied",!1,{type:"boolean",description:c("chatEditApplied","True when the chat text edits have been applied.")}),p2e=new V("chatInputHasText",!1,{type:"boolean",description:c("interactiveInputHasText","True when the chat input has text.")}),h2e=new V("chatInputHasFocus",!1,{type:"boolean",description:c("interactiveInputHasFocus","True when the chat input has focus.")}),m2e=new V("inChatInput",!1,{type:"boolean",description:c("inInteractiveInput","True when focus is in the chat input, false otherwise.")}),g2e=new V("inChat",!1,{type:"boolean",description:c("inChat","True when focus is in the chat widget, false otherwise.")}),r_=new V("chatIsEnabled",!1,{type:"boolean",description:c("chatIsEnabled","True when chat is enabled because a default chat participant is activated with an implementation.")}),o_=new V("chatPanelParticipantRegistered",!1,{type:"boolean",description:c("chatParticipantRegistered","True when a default chat participant is registered for the panel.")}),f2e=new V("chatExtensionInvalid",!1,{type:"boolean",description:c("chatExtensionInvalid","True when the installed chat extension is invalid and needs to be updated.")}),b2e=new V("chatCursorAtTop",!1),v2e=new V("chatInputHasAgent",!1),I2e=new V("chatLocation",void 0),y2e=new V("quickChatHasFocus",!1,{type:"boolean",description:c("inQuickChat","True when the quick chat UI has focus, false otherwise.")});var NS=class{_generators=new Map;_cache=new WeakMap;register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){let t=Object.create(null);for(let n of e){let i=this.readActivationEvents(n);i.length>0&&(t[Rt.toKey(n.identifier)]=i)}return t}_readActivationEvents(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];let t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let n=0;n<t.length;n++)t[n]==="onUri"&&(t[n]=`onUri:${Rt.toKey(e.identifier)}`);if(!e.contributes)return t;for(let n in e.contributes){let i=this._generators.get(n);if(!i)continue;let o=e.contributes[n],s=Array.isArray(o)?o:[o];try{i(s,t)}catch(a){Ae(a)}}return t}},FS=new NS;var OM={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:6},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},lp=Object.freeze(OM);var _2e=k("IV8InspectProfilingService"),AM;(t=>{function r(n){return!!(n.samples&&n.timeDeltas)}t.isValidProfile=r;function e(n,i="noAbsolutePaths"){for(let o of n.nodes)o.callFrame&&o.callFrame.url&&(wi(o.callFrame.url)||/^\w[\w\d+.-]*:\/\/\/?/.test(o.callFrame.url))&&(o.callFrame.url=An(i,tr(o.callFrame.url)));return n}t.rewriteAbsolutePaths=e})(AM||={});var zS=De.as(Lo.JSONContribution);var BS=class r{constructor(e,t){this.added=e;this.removed=t}static _toSet(e){let t=new fu;for(let n=0,i=e.length;n<i;n++)t.add(e[n].description.identifier);return t}static compute(e,t){if(!e||!e.length)return new r(t,[]);if(!t||!t.length)return new r([],e);let n=this._toSet(e),i=this._toSet(t),o=t.filter(a=>!n.has(a.description.identifier)),s=e.filter(a=>!i.has(a.description.identifier));return new r(o,s)}},US=class{name;defaultExtensionKind;_handler;_users;_delta;constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");return this._handler=e,this._handle(),{dispose:()=>{this._handler=null}}}acceptUsers(e){this._delta=BS.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){Ae(e)}}},MM={type:"string",enum:["ui","workspace"],enumDescriptions:[c("ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),c("workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},s_="vscode://schemas/vscode-extensions",WS={properties:{engines:{type:"object",description:c("vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:c("vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:c("vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:c("vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:c("vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:Uk},{type:"string",const:"Languages",deprecationMessage:c("vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:c("vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:c("vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:c("vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:c("vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:c("vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:c("vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:c("vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(lp).map(r=>r),markdownEnumDescriptions:Object.values(lp).map(r=>r.proposal)}},api:{markdownDescription:c("vscode.extension.api","Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[c("vscode.extension.api.none","Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:c("vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:c("vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:c("vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:c("vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:c("vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:c("vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:c("vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:c("vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:c("vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:c("vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:c("vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:c("vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:c("vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:c("vscode.extension.activationEvents.onEditSession","An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:c("vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:c("vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:c("vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:c("vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:c("vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:c("vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:c("vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:c("vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:c("vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:c("vscode.extension.activationEvents.onTerminalQuickFixRequest","An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:c("vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:c("vscode.extension.activationEvents.onIssueReporterOpened","An activation event emitted when the issue reporter is opened.")},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:c("vscode.extension.activationEvents.onChatParticipant","An activation event emitted when the specified chat participant is invoked.")},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:c("vscode.extension.activationEvents.onLanguageModelTool","An activation event emitted when the specified language model tool is invoked.")},{label:"*",description:c("vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:c("vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:c("vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:c("vscode.extension.badges.href","Badge link.")},description:{type:"string",description:c("vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:c("vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:c("vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:c("vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:Cg}},extensionPack:{description:c("vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:Cg}},extensionKind:{description:c("extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:MM,default:["workspace"],defaultSnippets:[{body:["ui"],description:c("extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:c("extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:c("extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:c("extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:c("extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:c("vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:c("vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:c("vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[c("vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),c("vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),c("vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:c("vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:c("vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:c("vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[c("vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),c("vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),c("vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:c("vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:c("vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:c("vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:c("vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:c("vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:c("vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:c("vscode.extension.icon","The path to a 128x128 pixel icon.")},l10n:{type:"string",description:c({key:"vscode.extension.l10n",comment:['{Locked="bundle.l10n._locale_.json"}','{Locked="vscode.l10n API"}']},"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:c("vscode.extension.pricing","The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}},VS=class{_extensionPoints=new Map;registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);let t=new US(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&FS.register(e.extensionPoint,e.activationEventsGenerator),WS.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,zS.registerSchema(s_,WS),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}},a_={ExtensionsRegistry:"ExtensionsRegistry"};De.add(a_.ExtensionsRegistry,new VS);var zo=De.as(a_.ExtensionsRegistry);zS.registerSchema(s_,WS);zS.registerSchema(sk,{properties:{extensionEnabledApiProposals:{description:c("product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(lp),markdownEnumDescriptions:Object.values(lp).map(r=>r.proposal)}}]}}}});var XBe=Object.freeze({identifier:new Rt("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:L.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1});var _n=k("extensionService");function l_(r,e){return r.enabledApiProposals?r.enabledApiProposals.includes(e):!1}var hUe=k("ILanguageModelsService"),d_={type:"object",properties:{vendor:{type:"string",description:c("vscode.extension.contributes.languageModels.vendor","A globally unique vendor of language models.")}}},NM=zo.registerExtensionPoint({extensionPoint:"languageModels",jsonSchema:{description:c("vscode.extension.contributes.languageModels","Contribute language models of a specific vendor."),oneOf:[d_,{type:"array",items:d_}]},activationEventsGenerator:(r,e)=>{for(let t of r)e.push(`onLanguageModelChat:${t.vendor}`)}}),mf=class{constructor(e,t){this._extensionService=e;this._logService=t;this._store.add(NM.setHandler(n=>{this._vendors.clear();for(let o of n){if(!l_(o.description,"chatProvider")){o.collector.error(c("vscode.extension.contributes.languageModels.chatProviderRequired","This contribution point requires the 'chatProvider' proposal."));continue}for(let s of yt.wrap(o.value)){if(this._vendors.has(s.vendor)){o.collector.error(c("vscode.extension.contributes.languageModels.vendorAlreadyRegistered","The vendor '{0}' is already registered and cannot be registered twice",s.vendor));continue}if(Th(s.vendor)){o.collector.error(c("vscode.extension.contributes.languageModels.emptyVendor","The vendor field cannot be empty."));continue}if(s.vendor.trim()!==s.vendor){o.collector.error(c("vscode.extension.contributes.languageModels.whitespaceVendor","The vendor field cannot start or end with whitespace."));continue}this._vendors.add(s.vendor)}}let i=[];for(let[o,s]of this._providers)this._vendors.has(s.metadata.vendor)||(this._providers.delete(o),i.push(o));i.length>0&&this._onDidChangeProviders.fire({removed:i})}))}_serviceBrand;_store=new le;_providers=new Map;_vendors=new Set;_onDidChangeProviders=this._store.add(new E);onDidChangeLanguageModels=this._onDidChangeProviders.event;dispose(){this._store.dispose(),this._providers.clear()}getLanguageModelIds(){return Array.from(this._providers.keys())}lookupLanguageModel(e){return this._providers.get(e)?.metadata}async selectLanguageModels(e){if(e.vendor)await this._extensionService.activateByEvent(`onLanguageModelChat:${e.vendor}}`);else{let n=Array.from(this._vendors).map(i=>this._extensionService.activateByEvent(`onLanguageModelChat:${i}`));await Promise.all(n)}let t=[];for(let[n,i]of this._providers)(e.vendor===void 0||i.metadata.vendor===e.vendor)&&(e.family===void 0||i.metadata.family===e.family)&&(e.version===void 0||i.metadata.version===e.version)&&(e.identifier===void 0||i.metadata.id===e.identifier)&&(!i.metadata.targetExtensions||i.metadata.targetExtensions.some(o=>Rt.equals(o,e.extension)))&&t.push(n);return this._logService.trace("[LM] selected language models",e,t),t}registerLanguageModelChat(e,t){if(this._logService.trace("[LM] registering language model chat",e,t.metadata),!this._vendors.has(t.metadata.vendor))throw new Error(`Chat response provider uses UNKNOWN vendor ${t.metadata.vendor}.`);if(this._providers.has(e))throw new Error(`Chat response provider with identifier ${e} is already registered.`);return this._providers.set(e,t),this._onDidChangeProviders.fire({added:[{identifier:e,metadata:t.metadata}]}),j(()=>{this._providers.delete(e)&&(this._onDidChangeProviders.fire({removed:[e]}),this._logService.trace("[LM] UNregistered language model chat",e,t.metadata))})}async sendChatRequest(e,t,n,i,o){let s=this._providers.get(e);if(!s)throw new Error(`Chat response provider with identifier ${e} is not registered.`);return s.sendChatRequest(n,t,i,o)}computeTokenLength(e,t,n){let i=this._providers.get(e);if(!i)throw new Error(`Chat response provider with identifier ${e} is not registered.`);return i.provideTokenCount(t,n)}};mf=T([S(0,_n),S(1,je)],mf);var c_=k("IChatVariablesService");var u_=k("ILanguageModelToolsService"),gf=class extends O{constructor(t,n){super();this._extensionService=t;this._contextKeyService=n;this._register(this._contextKeyService.onDidChangeContext(i=>{i.affectsSome(this._toolContextKeys)&&this._onDidChangeToolsScheduler.schedule()}))}_serviceBrand;_onDidChangeTools=new E;onDidChangeTools=this._onDidChangeTools.event;_onDidChangeToolsScheduler=new li(()=>this._onDidChangeTools.fire(),750);_tools=new Map;_toolContextKeys=new Set;registerToolData(t){if(this._tools.has(t.id))throw new Error(`Tool "${t.id}" is already registered.`);return this._tools.set(t.id,{data:t}),this._onDidChangeToolsScheduler.schedule(),t.when?.keys().forEach(n=>this._toolContextKeys.add(n)),j(()=>{this._tools.delete(t.id),this._refreshAllToolContextKeys(),this._onDidChangeToolsScheduler.schedule()})}_refreshAllToolContextKeys(){this._toolContextKeys.clear();for(let t of this._tools.values())t.data.when?.keys().forEach(n=>this._toolContextKeys.add(n))}registerToolImplementation(t,n){let i=this._tools.get(t);if(!i)throw new Error(`Tool "${t}" was not contributed.`);if(i.impl)throw new Error(`Tool "${t}" already has an implementation.`);return i.impl=n,j(()=>{i.impl=void 0})}getTools(){let t=yt.map(this._tools.values(),n=>n.data);return yt.filter(t,n=>!n.when||this._contextKeyService.contextMatchesRules(n.when))}getTool(t){return this._getToolEntry(t)?.data}_getToolEntry(t){let n=this._tools.get(t);if(n&&(!n.data.when||this._contextKeyService.contextMatchesRules(n.data.when)))return n}getToolByName(t){for(let n of this.getTools())if(n.name===t)return n}async invokeTool(t,n,i){let o=this._tools.get(t.toolId);if(!o)throw new Error(`Tool ${t.toolId} was not contributed`);if(!o.impl&&(await this._extensionService.activateByEvent(`onLanguageModelTool:${t.toolId}`),o=this._tools.get(t.toolId),!o?.impl))throw new Error(`Tool ${t.toolId} does not have an implementation registered.`);return o.impl.invoke(t,n,i)}};gf=T([S(0,_n),S(1,ui)],gf);var FM=/^@([\w_\-\.]+)(?=(\s|$|\b))/i,BM=/^#([\w_\-]+)(:\d+)?(?=(\s|$|\b))/i,UM=/\/([\w_\-]+)(?=(\s|$|\b))/i,ff=class{constructor(e,t,n,i){this.agentService=e;this.variableService=t;this.slashCommandService=n;this.toolsService=i}parseChatRequest(e,t,n="panel",i){let o=[],s=this.variableService.getDynamicVariables(e),a=1,l=1;for(let p=0;p<t.length;p++){let h=t.charAt(p-1),g=t.charAt(p),b;if((h.match(/\s/)||p===0)&&(g===dp?b=this.tryToParseVariable(t.slice(p),p,new Se(a,l),o):g===HS?b=this.tryToParseAgent(t.slice(p),t,p,new Se(a,l),o,n,i):g===cp&&(b=this.tryToParseSlashCommand(t.slice(p),t,p,new Se(a,l),o,n)),b||(b=this.tryToParseDynamicVariable(t.slice(p),p,new Se(a,l),s))),b){if(p!==0){let f=o.at(-1),v=f?.range.endExclusive??0,D=f?.editorRange.endLineNumber??1,R=f?.editorRange.endColumn??1;o.push(new Zi(new Re(v,p),new $(D,R,a,l),t.slice(v,p)))}o.push(b)}g===`
`?(a++,l=1):l++}let d=o.at(-1),u=d?.range.endExclusive??0;return u<t.length&&o.push(new Zi(new Re(u,t.length),new $(d?.editorRange.endLineNumber??1,d?.editorRange.endColumn??1,a,l),t.slice(u,t.length))),{parts:o,text:t}}tryToParseAgent(e,t,n,i,o,s,a){let l=e.match(FM);if(!l)return;let[d,u]=l,p=new Re(n,n+d.length),h=new $(i.lineNumber,i.column,i.lineNumber,i.column+d.length),g=this.agentService.getAgentsByName(u);if(!g.length){let R=this.agentService.getAgentByFullyQualifiedId(u);R&&(g=[R])}let b=g.length>1&&a?.selectedAgent?a.selectedAgent:g.find(R=>R.locations.includes(s));if(!b||o.some(R=>R instanceof wr)||o.some(R=>R instanceof Zi&&R.text.trim()!==""||!(R instanceof wr)))return;let v=o.at(-1)?.range.endExclusive??0;if(t.slice(v,n).trim()==="")return new wr(p,h,b)}tryToParseVariable(e,t,n,i){let o=e.match(BM);if(!o)return;let[s,a]=o,l=o[2]??"",d=new Re(t,t+s.length),u=new $(n.lineNumber,n.column,n.lineNumber,n.column+s.length),p=i.find(f=>f instanceof wr),h=!p||p.agent.metadata.supportsSlowVariables,g=this.variableService.getVariable(a);if(g&&(!g.isSlow||h))return new Md(d,u,a,l,g.id);let b=this.toolsService.getToolByName(a);if(b&&b.canBeInvokedManually&&(!p||p.agent.supportsToolReferences))return new Nd(d,u,a,b.id)}tryToParseSlashCommand(e,t,n,i,o,s){let a=e.match(UM);if(!a||o.some(g=>g instanceof Ga))return;let[l,d]=a,u=new Re(n,n+l.length),p=new $(i.lineNumber,i.column,i.lineNumber,i.column+l.length),h=o.find(g=>g instanceof wr);if(h){if(o.some(D=>D instanceof Zi&&D.text.trim()!==""||!(D instanceof wr)&&!(D instanceof Zi)))return;let b=o.at(-1)?.range.endExclusive??0;if(t.slice(b,n).trim()!=="")return;let v=h.agent.slashCommands.find(D=>D.name===d);if(v)return new $a(u,p,v)}else{let b=this.slashCommandService.getCommands(s).find(f=>f.command===d);if(b)return new Ga(u,p,b);{let v=this.agentService.getDefaultAgent(s)?.slashCommands.find(D=>D.name===d);if(v)return new $a(u,p,v)}}}tryToParseDynamicVariable(e,t,n,i){let o=i.find(s=>s.range.startLineNumber===n.lineNumber&&s.range.startColumn===n.column);if(o){let s=o.range.endColumn-o.range.startColumn,a=e.substring(0,s),l=new Re(t,t+s);return new Fd(l,o.range,a,o.id,o.modelDescription,o.data)}}};ff=T([S(0,pp),S(1,c_),S(2,p_),S(3,u_)],ff);function WM(r){return!!r&&typeof r=="object"&&"uri"in r&&r.uri instanceof L&&"version"in r&&typeof r.version=="number"&&"ranges"in r&&Array.isArray(r.ranges)&&r.ranges.every($.isIRange)}function h_(r){return!!r&&typeof r=="object"&&"documents"in r&&Array.isArray(r.documents)&&r.documents.every(WM)}var c4e=k("IChatService");var p_=k("chatSlashCommandService"),bf=class extends O{constructor(t){super();this._extensionService=t}_commands=new Map;_onDidChangeCommands=this._register(new E);onDidChangeCommands=this._onDidChangeCommands.event;dispose(){super.dispose(),this._commands.clear()}registerSlashCommand(t,n){if(this._commands.has(t.command))throw new Error(`Already registered a command with id ${t.command}}`);return this._commands.set(t.command,{data:t,command:n}),this._onDidChangeCommands.fire(),j(()=>{this._commands.delete(t.command)&&this._onDidChangeCommands.fire()})}getCommands(t){return Array.from(this._commands.values(),n=>n.data).filter(n=>n.locations.includes(t))}hasCommand(t){return this._commands.has(t)}async executeCommand(t,n,i,o,s,a){let l=this._commands.get(t);if(!l)throw new Error("No command with id ${id} NOT registered");if(l.command||await this._extensionService.activateByEvent(`onSlash:${t}`),!l.command)throw new Error(`No command with id ${t} NOT resolved`);return await l.command(n,i,o,s,a)}};bf=T([S(0,_n)],bf);var Zi=class r{constructor(e,t,n){this.range=e;this.editorRange=t;this.text=n}static Kind="text";kind=r.Kind;get promptText(){return this.text}},dp="#",HS="@",cp="/",Md=class r{constructor(e,t,n,i,o){this.range=e;this.editorRange=t;this.variableName=n;this.variableArg=i;this.variableId=o}static Kind="var";kind=r.Kind;get text(){let e=this.variableArg?`:${this.variableArg}`:"";return`${dp}${this.variableName}${e}`}get promptText(){return this.text}},Nd=class r{constructor(e,t,n,i){this.range=e;this.editorRange=t;this.toolName=n;this.toolId=i}static Kind="tool";kind=r.Kind;get text(){return`${dp}${this.toolName}`}get promptText(){return this.text}},wr=class r{constructor(e,t,n){this.range=e;this.editorRange=t;this.agent=n}static Kind="agent";kind=r.Kind;get text(){return`${HS}${this.agent.name}`}get promptText(){return""}},$a=class r{constructor(e,t,n){this.range=e;this.editorRange=t;this.command=n}static Kind="subcommand";kind=r.Kind;get text(){return`${cp}${this.command.name}`}get promptText(){return""}},Ga=class r{constructor(e,t,n){this.range=e;this.editorRange=t;this.slashCommand=n}static Kind="slash";kind=r.Kind;get text(){return`${cp}${this.slashCommand.command}`}get promptText(){return`${cp}${this.slashCommand.command}`}},Fd=class r{constructor(e,t,n,i,o,s){this.range=e;this.editorRange=t;this.text=n;this.id=i;this.modelDescription=o;this.data=s}static Kind="dynamic";kind=r.Kind;get referenceText(){return this.text.replace(dp,"")}get promptText(){return this.text}};function m_(r){return{text:r.text,parts:r.parts.map(e=>{if(e.kind===Zi.Kind)return new Zi(new Re(e.range.start,e.range.endExclusive),e.editorRange,e.text);if(e.kind===Md.Kind)return new Md(new Re(e.range.start,e.range.endExclusive),e.editorRange,e.variableName,e.variableArg,e.variableId||"");if(e.kind===Nd.Kind)return new Nd(new Re(e.range.start,e.range.endExclusive),e.editorRange,e.toolName,e.toolId);if(e.kind===wr.Kind){let t=e.agent;return t=vf(t),new wr(new Re(e.range.start,e.range.endExclusive),e.editorRange,t)}else{if(e.kind===$a.Kind)return new $a(new Re(e.range.start,e.range.endExclusive),e.editorRange,e.command);if(e.kind===Ga.Kind)return new Ga(new Re(e.range.start,e.range.endExclusive),e.editorRange,e.slashCommand);if(e.kind===Fd.Kind)return new Fd(new Re(e.range.start,e.range.endExclusive),e.editorRange,e.text,e.id,e.modelDescription,Pi(e.data));throw new Error(`Unknown chat request part: ${e.kind}`)}})}}var yf=class r{constructor(e,t,n,i=0,o,s,a){this._session=e;this.message=t;this._variableData=n;this._attempt=i;this._confirmation=o;this._locationData=s;this._attachedContext=a;this.id="request_"+r.nextId++}static nextId=0;response;id;get session(){return this._session}get username(){return this.session.requesterUsername}get avatarIconUri(){return this.session.requesterAvatarIconUri}get attempt(){return this._attempt}get variableData(){return this._variableData}set variableData(e){this._variableData=e}get confirmation(){return this._confirmation}get locationData(){return this._locationData}get attachedContext(){return this._attachedContext}adoptTo(e){this._session=e}},KS=class extends O{_onDidChangeValue=this._register(new E);get onDidChangeValue(){return this._onDidChangeValue.event}_responseParts;_responseRepr="";_markdownContent="";_citations=[];get value(){return this._responseParts}constructor(e){super(),this._responseParts=jb(e).map(t=>TI(t)?{content:t,kind:"markdownContent"}:"kind"in t?t:{kind:"treeData",treeData:t}),this._updateRepr(!0)}toString(){return this._responseRepr}toMarkdown(){return this._markdownContent}clear(){this._responseParts=[],this._updateRepr(!0)}updateContent(e,t){if(e.kind==="markdownContent"){let n=this._responseParts.length-1,i=this._responseParts[n];!i||i.kind!=="markdownContent"||!zM(i.content,e.content)?this._responseParts.push(e):i.content=HM(i.content,e.content),this._updateRepr(t)}else if(e.kind==="textEdit"){if(e.edits.length>0){let n=!1;for(let i=0;!n&&i<this._responseParts.length;i++){let o=this._responseParts[i];o.kind==="textEditGroup"&&bt(o.uri,e.uri)&&(o.edits.push(e.edits),n=!0)}n||this._responseParts.push({kind:"textEditGroup",uri:e.uri,edits:[e.edits]}),this._updateRepr(t)}}else if(e.kind==="progressTask"){let n=this._responseParts.push(e)-1;this._updateRepr(t);let i=e.onDidAddProgress(()=>{this._updateRepr(!1)});e.task?.().then(o=>{i.dispose(),typeof o=="string"&&(this._responseParts[n].content=new Ia(o)),this._updateRepr(!1)})}else this._responseParts.push(e),this._updateRepr(t)}addCitation(e){this._citations.push(e),this._updateRepr()}_updateRepr(e){this._responseRepr=this._responseParts.map(t=>t.kind==="treeData"?"":t.kind==="inlineReference"?qn("uri"in t.inlineReference?t.inlineReference.uri:t.inlineReference):t.kind==="command"?t.command.title:t.kind==="textEditGroup"?c("editsSummary","Made changes."):t.kind==="progressMessage"?"":t.kind==="confirmation"?`${t.title}
${t.message}`:t.content.value).filter(t=>t.length>0).join(`

`),this._responseRepr+=this._citations.length?`

`+KM(this._citations):"",this._markdownContent=this._responseParts.map(t=>t.kind==="inlineReference"?qn("uri"in t.inlineReference?t.inlineReference.uri:t.inlineReference):t.kind==="markdownContent"||t.kind==="markdownVuln"?t.content.value:"").filter(t=>t.length>0).join(`

`),e||this._onDidChangeValue.fire()}},Bd=class r extends O{constructor(t,n,i,o,s,a=!1,l=!1,d,u,p,h){super();this._session=n;this._agent=i;this._slashCommand=o;this.requestId=s;this._isComplete=a;this._isCanceled=l;this._vote=d;this._voteDownReason=u;this._result=p;this._isStale=Array.isArray(t)&&(t.length!==0||TI(t)&&t.value.length!==0),this._followups=h?[...h]:void 0,this._response=this._register(new KS(t)),this._register(this._response.onDidChangeValue(()=>this._onDidChange.fire())),this.id="response_"+r.nextId++}_onDidChange=this._register(new E);onDidChange=this._onDidChange.event;static nextId=0;id;get session(){return this._session}get isComplete(){return this._isComplete}get isCanceled(){return this._isCanceled}get vote(){return this._vote}get voteDownReason(){return this._voteDownReason}get followups(){return this._followups}_response;get response(){return this._response}get result(){return this._result}get username(){return this.session.responderUsername}get avatarIcon(){return this.session.responderAvatarIcon}_followups;get agent(){return this._agent}get slashCommand(){return this._slashCommand}_agentOrSlashCommandDetected;get agentOrSlashCommandDetected(){return this._agentOrSlashCommandDetected??!1}_usedContext;get usedContext(){return this._usedContext}_contentReferences=[];get contentReferences(){return this._contentReferences}_codeCitations=[];get codeCitations(){return this._codeCitations}_progressMessages=[];get progressMessages(){return this._progressMessages}_isStale=!1;get isStale(){return this._isStale}updateContent(t,n){this._response.updateContent(t,n)}applyReference(t){t.kind==="usedContext"?this._usedContext=t:t.kind==="reference"&&(this._contentReferences.push(t),this._onDidChange.fire())}applyCodeCitation(t){this._codeCitations.push(t),this._response.addCitation(t),this._onDidChange.fire()}setAgent(t,n){this._agent=t,this._slashCommand=n,this._agentOrSlashCommandDetected=!0,this._onDidChange.fire()}setResult(t){this._result=t,this._onDidChange.fire()}complete(){this._result?.errorDetails?.responseIsRedacted&&this._response.clear(),this._isComplete=!0,this._onDidChange.fire()}cancel(){this._isComplete=!0,this._isCanceled=!0,this._onDidChange.fire()}setFollowups(t){this._followups=t,this._onDidChange.fire()}setVote(t){this._vote=t,this._onDidChange.fire()}setVoteDownReason(t){this._voteDownReason=t,this._onDidChange.fire()}setEditApplied(t,n){return!this.response.value.includes(t)||!t.state?!1:(t.state.applied=n,this._onDidChange.fire(),!0)}adoptTo(t){this._session=t,this._onDidChange.fire()}};function VM(r){let e=r;return typeof e=="object"&&typeof e.requesterUsername=="string"}function hp(r){let e=r;return VM(r)&&typeof e.creationDate=="number"&&typeof e.sessionId=="string"&&r.requests.every(t=>!t.usedContext||h_(t.usedContext))}var If=(n=>(n[n.Created=0]="Created",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized",n))(If||{}),Ud=class extends O{constructor(t,n,i,o,s){super();this.initialData=t;this._initialLocation=n;this.logService=i;this.chatAgentService=o;this.instantiationService=s;this._isImported=!!t&&!hp(t)||(t?.isImported??!1),this._sessionId=hp(t)&&t.sessionId||dt(),this._requests=t?this._deserialize(t):[],this._creationDate=hp(t)&&t.creationDate||Date.now(),this._lastMessageDate=hp(t)&&t.lastMessageDate||this._creationDate,this._customTitle=hp(t)?t.customTitle:void 0,this._initialRequesterAvatarIconUri=t?.requesterAvatarIconUri&&L.revive(t.requesterAvatarIconUri),this._initialResponderAvatarIconUri=VE(t?.responderAvatarIconUri)?L.revive(t.responderAvatarIconUri):t?.responderAvatarIconUri}static getDefaultTitle(t){let n=t.at(0)?.message??"";return(typeof n=="string"?n:n.text).split(`
`)[0].substring(0,50)}_onDidDispose=this._register(new E);onDidDispose=this._onDidDispose.event;_onDidChange=this._register(new E);onDidChange=this._onDidChange.event;_requests;_initState=0;_isInitializedDeferred=new yn;_welcomeMessage;get welcomeMessage(){return this._welcomeMessage}_sessionId;get sessionId(){return this._sessionId}get requestInProgress(){let t=this.lastRequest;return!!t?.response&&!t.response.isComplete}get hasRequests(){return this._requests.length>0}get lastRequest(){return this._requests.at(-1)}_creationDate;get creationDate(){return this._creationDate}_lastMessageDate;get lastMessageDate(){return this._lastMessageDate}get _defaultAgent(){return this.chatAgentService.getDefaultAgent("panel")}get requesterUsername(){return(this._defaultAgent?this._defaultAgent.metadata.requester?.name:this.initialData?.requesterUsername)??""}get responderUsername(){return(this._defaultAgent?this._defaultAgent.fullName:this.initialData?.responderUsername)??""}_initialRequesterAvatarIconUri;get requesterAvatarIconUri(){return this._defaultAgent?this._defaultAgent.metadata.requester?.icon:this._initialRequesterAvatarIconUri}_initialResponderAvatarIconUri;get responderAvatarIcon(){return this._defaultAgent?this._defaultAgent?.metadata.themeIcon:this._initialResponderAvatarIconUri}get initState(){return this._initState}_isImported=!1;get isImported(){return this._isImported}_customTitle;get customTitle(){return this._customTitle}get title(){return this._customTitle||Ud.getDefaultTitle(this._requests)}get initialLocation(){return this._initialLocation}_deserialize(t){let n=t.requests;if(!Array.isArray(n))return this.logService.error(`Ignoring malformed session data: ${JSON.stringify(t)}`),[];if(t.welcomeMessage){let i=t.welcomeMessage.map(o=>typeof o=="string"?new Ia(o):o);this._welcomeMessage=this.instantiationService.createInstance(qa,i,[])}try{return n.map(i=>{let o=typeof i.message=="string"?this.getParsedRequestFromString(i.message):m_(i.message),s=this.reviveVariableData(i.variableData),a=new yf(this,o,s);if(i.response||i.result||i.responseErrorDetails){let l=i.agent&&"metadata"in i.agent?vf(i.agent):void 0,d="responseErrorDetails"in i?{errorDetails:i.responseErrorDetails}:i.result;a.response=new Bd(i.response??[new Ia(i.response)],this,l,i.slashCommand,a.id,!0,i.isCanceled,i.vote,i.voteDownReason,d,i.followups),i.usedContext&&a.response.applyReference(Pi(i.usedContext)),i.contentReferences?.forEach(u=>a.response.applyReference(Pi(u))),i.codeCitations?.forEach(u=>a.response.applyCodeCitation(Pi(u)))}return a})}catch(i){return this.logService.error("Failed to parse chat data",i),[]}}reviveVariableData(t){let n=t&&Array.isArray(t.variables)?t:{variables:[]};return n.variables=n.variables.map(i=>i&&"values"in i&&Array.isArray(i.values)?{id:i.id??"",name:i.name,value:i.values[0]?.value,range:i.range,modelDescription:i.modelDescription,references:i.references}:i),n}getParsedRequestFromString(t){let n=[new Zi(new Re(0,t.length),{startColumn:1,startLineNumber:1,endColumn:1,endLineNumber:1},t)];return{text:t,parts:n}}startInitialize(){if(this.initState!==0)throw new Error(`ChatModel is in the wrong state for startInitialize: ${If[this.initState]}`);this._initState=1}deinitialize(){this._initState=0,this._isInitializedDeferred=new yn}initialize(t){if(this.initState!==1)throw new Error(`ChatModel is in the wrong state for initialize: ${If[this.initState]}`);this._initState=2,this._welcomeMessage||(this._welcomeMessage=t),this._isInitializedDeferred.complete(),this._onDidChange.fire({kind:"initialize"})}setInitializationError(t){if(this.initState!==1)throw new Error(`ChatModel is in the wrong state for setInitializationError: ${If[this.initState]}`);this._isInitializedDeferred.isSettled||this._isInitializedDeferred.error(t)}waitForInitialization(){return this._isInitializedDeferred.p}getRequests(){return this._requests}addRequest(t,n,i,o,s,a,l,d){let u=new yf(this,t,n,i,a,l,d);return u.response=new Bd([],this,o,s,u.id),this._requests.push(u),this._lastMessageDate=Date.now(),this._onDidChange.fire({kind:"addRequest",request:u}),u}setCustomTitle(t){this._customTitle=t}updateRequest(t,n){t.variableData=n,this._onDidChange.fire({kind:"changedRequest",request:t})}adoptRequest(t){let n=t.session,i=n._requests.findIndex(o=>o.id===t.id);i!==-1&&(n._requests.splice(i,1),t.adoptTo(this),t.response?.adoptTo(this),this._requests.push(t),n._onDidChange.fire({kind:"removeRequest",requestId:t.id,responseId:t.response?.id,reason:2}),this._onDidChange.fire({kind:"addRequest",request:t}))}acceptResponseProgress(t,n,i){if(t.response||(t.response=new Bd([],this,void 0,void 0,t.id)),t.response.isComplete)throw new Error("acceptResponseProgress: Adding progress to a completed response");if(n.kind==="markdownContent"||n.kind==="treeData"||n.kind==="inlineReference"||n.kind==="markdownVuln"||n.kind==="progressMessage"||n.kind==="command"||n.kind==="textEdit"||n.kind==="warning"||n.kind==="progressTask"||n.kind==="confirmation")t.response.updateContent(n,i);else if(n.kind==="usedContext"||n.kind==="reference")t.response.applyReference(n);else if(n.kind==="agentDetection"){let o=this.chatAgentService.getAgent(n.agentId);o&&(t.response.setAgent(o,n.command),this._onDidChange.fire({kind:"setAgent",agent:o,command:n.command}))}else n.kind==="codeCitation"?t.response.applyCodeCitation(n):n.kind==="move"?this._onDidChange.fire({kind:"move",target:n.uri,range:n.range}):this.logService.error(`Couldn't handle progress: ${JSON.stringify(n)}`)}removeRequest(t,n=0){let i=this._requests.findIndex(s=>s.id===t),o=this._requests[i];i!==-1&&(this._onDidChange.fire({kind:"removeRequest",requestId:o.id,responseId:o.response?.id,reason:n}),this._requests.splice(i,1),o.response?.dispose())}cancelRequest(t){t.response&&t.response.cancel()}setResponse(t,n){t.response||(t.response=new Bd([],this,void 0,void 0,t.id)),t.response.setResult(n)}completeResponse(t){if(!t.response)throw new Error("Call setResponse before completeResponse");t.response.complete()}setFollowups(t,n){t.response&&t.response.setFollowups(n)}setResponseModel(t,n){t.response=n,this._onDidChange.fire({kind:"addResponse",response:n})}toExport(){return{requesterUsername:this.requesterUsername,requesterAvatarIconUri:this.requesterAvatarIconUri,responderUsername:this.responderUsername,responderAvatarIconUri:this.responderAvatarIcon,initialLocation:this.initialLocation,welcomeMessage:this._welcomeMessage?.content.map(t=>Array.isArray(t)?t:t.value),requests:this._requests.map(t=>{let n={...t.message,parts:t.message.parts.map(s=>s&&"toJSON"in s?s.toJSON():s)},i=t.response?.agent,o=i&&"toJSON"in i?i.toJSON():i?{...i}:void 0;return{message:n,variableData:t.variableData,response:t.response?t.response.response.value.map(s=>s.kind==="treeData"?s.treeData:s.kind==="markdownContent"?s.content:s):void 0,result:t.response?.result,followups:t.response?.followups,isCanceled:t.response?.isCanceled,vote:t.response?.vote,voteDownReason:t.response?.voteDownReason,agent:o,slashCommand:t.response?.slashCommand,usedContext:t.response?.usedContext,contentReferences:t.response?.contentReferences,codeCitations:t.response?.codeCitations}})}}toJSON(){return{version:3,...this.toExport(),sessionId:this.sessionId,creationDate:this._creationDate,isImported:this._isImported,lastMessageDate:this._lastMessageDate,customTitle:this._customTitle}}dispose(){this._requests.forEach(t=>t.response?.dispose()),this._onDidDispose.fire(),super.dispose()}};Ud=T([S(2,je),S(3,pp),S(4,Ct)],Ud);var qa=class{constructor(e,t,n){this.content=e;this.sampleQuestions=t;this.chatAgentService=n;this._id="welcome_"+qa.nextId++}static nextId=0;_id;get id(){return this._id}get username(){return this.chatAgentService.getContributedDefaultAgent("panel")?.fullName??""}get avatarIcon(){return this.chatAgentService.getDefaultAgent("panel")?.metadata.themeIcon}};qa=T([S(2,pp)],qa);function zM(r,e){if(r.baseUri&&e.baseUri){if(!(r.baseUri.scheme===e.baseUri.scheme&&r.baseUri.authority===e.baseUri.authority&&r.baseUri.path===e.baseUri.path&&r.baseUri.query===e.baseUri.query&&r.baseUri.fragment===e.baseUri.fragment))return!1}else if(r.baseUri||e.baseUri)return!1;return Cn(r.isTrusted,e.isTrusted)&&r.supportHtml===e.supportHtml&&r.supportThemeIcons===e.supportThemeIcons}function HM(r,e){let t=typeof e=="string"?e:e.value;return{value:r.value+t,isTrusted:r.isTrusted,supportThemeIcons:r.supportThemeIcons,supportHtml:r.supportHtml,baseUri:r.baseUri}}function KM(r){if(r.length===0)return"";let e=r.reduce((n,i)=>n.add(i.license),new Set);return e.size===1?c("codeCitation","Similar code found with 1 license type",e.size):c("codeCitations","Similar code found with {0} license types",e.size)}var up=(i=>(i.Panel="panel",i.Terminal="terminal",i.Notebook="notebook",i.Editor="editor",i))(up||{});(e=>{function r(t){switch(t){case"panel":return"panel";case"terminal":return"terminal";case"notebook":return"notebook";case"editor":return"editor"}return"panel"}e.fromRaw=r})(up||={});var pp=k("chatAgentService"),xf=class{constructor(e){this.contextKeyService=e;this._hasDefaultAgent=r_.bindTo(this.contextKeyService),this._defaultAgentRegistered=o_.bindTo(this.contextKeyService)}static AGENT_LEADER="@";_agents=new Map;_onDidChangeAgents=new E;onDidChangeAgents=this._onDidChangeAgents.event;_hasDefaultAgent;_defaultAgentRegistered;registerAgent(e,t){if(this.getAgent(e))throw new Error(`Agent already registered: ${JSON.stringify(e)}`);t.isDefault&&this._defaultAgentRegistered.set(!0);let i=this,o=t.slashCommands;t={...t,get slashCommands(){return o.filter(a=>!a.when||i.contextKeyService.contextMatchesRules(vt.deserialize(a.when)))}};let s={data:t};return this._agents.set(e,s),this._onDidChangeAgents.fire(void 0),j(()=>{this._agents.delete(e),t.isDefault&&this._defaultAgentRegistered.set(!1),this._onDidChangeAgents.fire(void 0)})}registerAgentImplementation(e,t){let n=this._agents.get(e);if(!n)throw new Error(`Unknown agent: ${JSON.stringify(e)}`);if(n.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(e)}`);return n.data.isDefault&&this._hasDefaultAgent.set(!0),n.impl=t,this._onDidChangeAgents.fire(new Wd(n.data,t)),j(()=>{n.impl=void 0,this._onDidChangeAgents.fire(void 0),n.data.isDefault&&this._hasDefaultAgent.set(!1)})}registerDynamicAgent(e,t){e.isDynamic=!0;let n={data:e,impl:t};return this._agents.set(e.id,n),this._onDidChangeAgents.fire(new Wd(e,t)),j(()=>{this._agents.delete(e.id),this._onDidChangeAgents.fire(void 0)})}_agentCompletionProviders=new Map;registerAgentCompletionProvider(e,t){return this._agentCompletionProviders.set(e,t),{dispose:()=>{this._agentCompletionProviders.delete(e)}}}async getAgentCompletionItems(e,t,n){return await this._agentCompletionProviders.get(e)?.(t,n)??[]}updateAgent(e,t){let n=this._agents.get(e);if(!n?.impl)throw new Error(`No activated agent with id ${JSON.stringify(e)} registered`);n.data.metadata={...n.data.metadata,...t},this._onDidChangeAgents.fire(new Wd(n.data,n.impl))}getDefaultAgent(e){return Gp(this.getActivatedAgents(),t=>!!t.isDefault&&t.locations.includes(e))}getContributedDefaultAgent(e){return this.getAgents().find(t=>!!t.isDefault&&t.locations.includes(e))}getSecondaryAgent(){return yt.find(this._agents.values(),e=>!!e.data.metadata.isSecondary)?.data}getAgent(e){if(this._agentIsEnabled(e))return this._agents.get(e)?.data}_agentIsEnabled(e){let t=this._agents.get(e);return!t?.data.when||this.contextKeyService.contextMatchesRules(vt.deserialize(t.data.when))}getAgentByFullyQualifiedId(e){let t=yt.find(this._agents.values(),n=>$M(n.data)===e)?.data;if(!(t&&!this._agentIsEnabled(t.id)))return t}getAgents(){return Array.from(this._agents.values()).map(e=>e.data).filter(e=>this._agentIsEnabled(e.id))}getActivatedAgents(){return Array.from(this._agents.values()).filter(e=>!!e.impl).filter(e=>this._agentIsEnabled(e.data.id)).map(e=>new Wd(e.data,e.impl))}getAgentsByName(e){return this.getAgents().filter(t=>t.name===e)}agentHasDupeName(e){let t=this.getAgent(e);return t?this.getAgentsByName(t.name).filter(n=>n.extensionId.value!==t.extensionId.value).length>0:!1}async invokeAgent(e,t,n,i,o){let s=this._agents.get(e);if(!s?.impl)throw new Error(`No activated agent with id "${e}"`);return await s.impl.invoke(t,n,i,o)}async getFollowups(e,t,n,i,o){let s=this._agents.get(e);if(!s?.impl)throw new Error(`No activated agent with id "${e}"`);return s.impl?.provideFollowups?s.impl.provideFollowups(t,n,i,o):[]}async getChatTitle(e,t,n){let i=this._agents.get(e);if(!i?.impl)throw new Error(`No activated agent with id "${e}"`);if(i.impl?.provideChatTitle)return i.impl.provideChatTitle(t,n)}_chatParticipantDetectionProviders=new Map;registerChatParticipantDetectionProvider(e,t){return this._chatParticipantDetectionProviders.set(e,t),j(()=>{this._chatParticipantDetectionProviders.delete(e)})}hasChatParticipantDetectionProviders(){return this._chatParticipantDetectionProviders.size>0}async detectAgentOrCommand(e,t,n,i){let o=yt.first(this._chatParticipantDetectionProviders.values());if(!o)return;let s=this.getAgents().reduce((u,p)=>{u.push({participant:p.id,disambiguation:p.disambiguation??[]});for(let h of p.slashCommands)u.push({participant:p.id,command:h.name,disambiguation:h.disambiguation??[]});return u},[]),a=await o.provideParticipantDetection(e,t,{...n,participants:s},i);if(!a)return;let l=this.getAgent(a.participant);if(!l)return;if(!a.command)return{agent:l};let d=l?.slashCommands.find(u=>u.name===a.command);if(d)return{agent:l,command:d}}};xf=T([S(0,ui)],xf);var Wd=class{constructor(e,t){this.data=e;this.impl=t}when;publisherDisplayName;isDynamic;get id(){return this.data.id}get name(){return this.data.name??""}get fullName(){return this.data.fullName??""}get description(){return this.data.description??""}get extensionId(){return this.data.extensionId}get extensionPublisherId(){return this.data.extensionPublisherId}get extensionPublisherDisplayName(){return this.data.publisherDisplayName}get extensionDisplayName(){return this.data.extensionDisplayName}get isDefault(){return this.data.isDefault}get metadata(){return this.data.metadata}get slashCommands(){return this.data.slashCommands}get locations(){return this.data.locations}get disambiguation(){return this.data.disambiguation}async invoke(e,t,n,i){return this.impl.invoke(e,t,n,i)}async provideFollowups(e,t,n,i){return this.impl.provideFollowups?this.impl.provideFollowups(e,t,n,i):[]}provideWelcomeMessage(e,t){if(this.impl.provideWelcomeMessage)return this.impl.provideWelcomeMessage(e,t)}provideSampleQuestions(e,t){if(this.impl.provideSampleQuestions)return this.impl.provideSampleQuestions(e,t)}toJSON(){return this.data}},UVe=k("chatAgentNameService"),zs=class{constructor(e,t,n,i){this.requestService=t;this.logService=n;this.storageService=i;if(!e.chatParticipantRegistry)return;this.url=e.chatParticipantRegistry;let o=i.get(zs.StorageKey,-1);try{this.registry.set(JSON.parse(o??"{}"),void 0)}catch{i.remove(zs.StorageKey,-1)}this.refresh()}static StorageKey="chat.participantNameRegistry";url;registry=Di(this,Object.create(null));disposed=!1;refresh(){this.disposed||this.update().catch(e=>this.logService.warn("Failed to fetch chat participant registry",e)).then(()=>jn(5*60*1e3)).then(()=>this.refresh())}async update(){let e=await this.requestService.request({type:"GET",url:this.url},We.None);if(e.res.statusCode!==200)throw new Error("Could not get extensions report.");let t=await SD(e);if(!t||t.version!==1)throw new Error("Unexpected chat participant registry response.");let n=t.restrictedChatParticipants;this.registry.set(n,void 0),this.storageService.store(zs.StorageKey,JSON.stringify(n),-1,1)}getAgentNameRestriction(e){let t=this.checkAgentNameRestriction(e.name,e).get(),n=!e.fullName||this.checkAgentNameRestriction(e.fullName.replace(/\s/g,""),e).get();return t&&n}checkAgentNameRestriction(e,t){return this.registry.map(i=>i[e.toLowerCase()]).map(i=>i?i.some(o=>vn(o,o.includes(".")?t.extensionId.value:t.extensionPublisherId)):!0)}dispose(){this.disposed=!0}};zs=T([S(0,ps),S(1,xD),S(2,je),S(3,Vt)],zs);function $M(r){return`${r.extensionId.value}.${r.id}`}function vf(r){let e="name"in r?r:{...r,name:r.id};return"extensionPublisherId"in e||(e.extensionPublisherId=e.extensionPublisher??""),"extensionDisplayName"in e||(e.extensionDisplayName=""),"extensionId"in e||(e.extensionId=new Rt("")),Pi(e)}var Dze=k("ILanguageFeaturesService");var GM=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function g_(r){return!!(r&&r.match(GM))}var qM=c("unknownSource","Unknown Source");function f_(r,e,t,n,i){let o=s=>typeof r.sourceReference=="number"&&r.sourceReference>0?L.from({scheme:$S,path:s?.replace(/^\/+/g,"/"),query:`session=${t}&ref=${r.sourceReference}`}):s&&g_(s)?n.asCanonicalUri(L.parse(s)):s&&wi(s)?n.asCanonicalUri(L.file(s)):n.asCanonicalUri(L.from({scheme:$S,path:s,query:`session=${t}`}));try{return o(e)}catch{return i.error("Invalid path from debug adapter: "+e),o("/invalidDebugSource")}}var Sf="debug.breakpoint",Cf="debug.functionbreakpoint",Ef="debug.databreakpoint",Tf="debug.exceptionbreakpoint",wf="debug.watchexpressions",b_="debug.chosenenvironment",v_="debug.uxstate",kf=class extends O{constructor(t,n,i,o){super();this.storageService=t;this.textFileService=n;this.uriIdentityService=i;this.logService=o;this._register(t.onDidChangeValue(1,void 0,this._store)(s=>{if(s.external)switch(s.key){case Sf:return this.breakpoints.set(this.loadBreakpoints(),void 0);case Cf:return this.functionBreakpoints.set(this.loadFunctionBreakpoints(),void 0);case Tf:return this.exceptionBreakpoints.set(this.loadExceptionBreakpoints(),void 0);case Ef:return this.dataBreakpoints.set(this.loadDataBreakpoints(),void 0);case wf:return this.watchExpressions.set(this.loadWatchExpressions(),void 0)}}))}breakpoints=Di(this,this.loadBreakpoints());functionBreakpoints=Di(this,this.loadFunctionBreakpoints());exceptionBreakpoints=Di(this,this.loadExceptionBreakpoints());dataBreakpoints=Di(this,this.loadDataBreakpoints());watchExpressions=Di(this,this.loadWatchExpressions());loadDebugUxState(){return this.storageService.get(v_,1,"default")}storeDebugUxState(t){this.storageService.store(v_,t,1,1)}loadBreakpoints(){let t;try{t=JSON.parse(this.storageService.get(Sf,1,"[]")).map(n=>(n.uri=L.revive(n.uri),new Xa(n,this.textFileService,this.uriIdentityService,this.logService,n.id)))}catch{}return t||[]}loadFunctionBreakpoints(){let t;try{t=JSON.parse(this.storageService.get(Cf,1,"[]")).map(n=>new Qa(n,n.id))}catch{}return t||[]}loadExceptionBreakpoints(){let t;try{t=JSON.parse(this.storageService.get(Tf,1,"[]")).map(n=>new Vd(n,n.id))}catch{}return t||[]}loadDataBreakpoints(){let t;try{t=JSON.parse(this.storageService.get(Ef,1,"[]")).map(n=>new Ya(n,n.id))}catch{}return t||[]}loadWatchExpressions(){let t;try{t=JSON.parse(this.storageService.get(wf,1,"[]")).map(n=>new ja(n.name,n.id))}catch{}return t||[]}loadChosenEnvironments(){return JSON.parse(this.storageService.get(b_,1,"{}"))}storeChosenEnvironments(t){this.storageService.store(b_,JSON.stringify(t),1,1)}storeWatchExpressions(t){t.length?this.storageService.store(wf,JSON.stringify(t.map(n=>({name:n.name,id:n.getId()}))),1,1):this.storageService.remove(wf,1)}storeBreakpoints(t){let n=t.getBreakpoints();n.length?this.storageService.store(Sf,JSON.stringify(n),1,1):this.storageService.remove(Sf,1);let i=t.getFunctionBreakpoints();i.length?this.storageService.store(Cf,JSON.stringify(i),1,1):this.storageService.remove(Cf,1);let o=t.getDataBreakpoints().filter(a=>a.canPersist);o.length?this.storageService.store(Ef,JSON.stringify(o),1,1):this.storageService.remove(Ef,1);let s=t.getExceptionBreakpoints();s.length?this.storageService.store(Tf,JSON.stringify(s),1,1):this.storageService.remove(Tf,1)}};kf=T([S(0,Vt),S(1,Us),S(2,Gi),S(3,je)],kf);function I_(r,e,t=[]){let n=e.getSession(),i=[[S_.key,e.variableMenuContext||""],[C_.key,!!e.evaluateName],[x_.key,!!n?.capabilities.supportsReadMemoryRequest&&e.memoryReference!==void 0],[E_.key,!!e.presentationHint?.attributes?.includes("readOnly")||e.presentationHint?.lazy],[y_.key,n?.configuration.type],...t];return r.createOverlay(i)}var a7e=k("debugVisualizerService"),GS=class{constructor(e,t){this.handle=e;this.viz=t}get name(){return this.viz.name}get iconPath(){return this.viz.iconPath}get iconClass(){return this.viz.iconClass}async resolve(e){return this.viz.visualization??=await this.handle.resolveDebugVisualizer(this.viz,e)}async execute(){await this.handle.executeDebugVisualizerCommand(this.viz.id)}},T_={object:[],dispose:()=>{}},Df=class{constructor(e,t,n){this.contextKeyService=e;this.extensionService=t;this.logService=n;jM.setHandler((i,{added:o,removed:s})=>{this.registrations=this.registrations.filter(a=>!s.some(l=>Rt.equals(l.description.identifier,a.extensionId))),o.forEach(a=>this.processExtensionRegistration(a.description))})}handles=new Map;trees=new Map;didActivate=new Map;registrations=[];async getApplicableFor(e,t){if(!(e instanceof kr))return T_;let n=e.getThreadId();if(n===void 0)return T_;let i=this.getVariableContext(n,e),o=I_(this.contextKeyService,e,[[__.key,e.name],[k_.key,e.value],[D_.key,e.type]]),s=await Promise.all(this.registrations.map(async l=>{if(!o.contextMatchesRules(l.expr))return;let d=this.didActivate.get(l.id);if(d||(d=this.extensionService.activateByEvent(`onDebugVisualizer:${l.id}`),this.didActivate.set(l.id,d)),await d,t.isCancellationRequested)return;let u=this.handles.get(w_(l.extensionId,l.id));return u&&{handle:u,result:await u.provideDebugVisualizers(i,t)}})),a={object:s.filter(Ll).flatMap(l=>l.result.map(d=>new GS(l.handle,d))),dispose:()=>{for(let l of s)l?.handle.disposeDebugVisualizers(l.result.map(d=>d.id))}};return t.isCancellationRequested&&a.dispose(),a}register(e){let t=w_(e.extensionId,e.id);return this.handles.set(t,e),j(()=>this.handles.delete(t))}registerTree(e,t){return this.trees.set(e,t),j(()=>this.trees.delete(e))}async getVisualizedNodeFor(e,t){if(!(t instanceof kr))return;let n=t.getThreadId();if(n===void 0)return;let i=this.trees.get(e);if(i)try{let o=await i.getTreeItem(this.getVariableContext(n,t));return o?new mp(this,e,o,t):void 0}catch(o){this.logService.warn("Failed to get visualized node",o);return}}async getVisualizedChildren(e,t){return(await this.trees.get(e)?.getChildren(t)||[]).map(i=>new mp(this,e,i,void 0))}async editTreeItem(e,t,n){let i=await this.trees.get(e)?.editItem?.(t.id,n);i&&Object.assign(t,i)}getVariableContext(e,t){let n={sessionId:t.getSession()?.getId()||"",containerId:t.parent instanceof kr?t.reference:void 0,threadId:e,variable:{name:t.name,value:t.value,type:t.type,evaluateName:t.evaluateName,variablesReference:t.reference||0,indexedVariables:t.indexedVariables,memoryReference:t.memoryReference,namedVariables:t.namedVariables,presentationHint:t.presentationHint}};for(let i=t;i instanceof kr;i=i.parent)i.parent instanceof _f&&(n.frameId=i.parent.stackFrame.frameId);return n}processExtensionRegistration(e){let t=e.contributes?.debugVisualizers;if(t instanceof Array)for(let{when:n,id:i}of t)try{let o=vt.deserialize(n);o&&this.registrations.push({expr:o,id:i,extensionId:e.identifier})}catch(o){this.logService.error(`Error processing debug visualizer registration from extension '${e.identifier.value}'`,o)}}};Df=T([S(0,ui),S(1,_n),S(2,je)],Df);var w_=(r,e)=>`${Rt.toKey(r)}\0${e}`,jM=zo.registerExtensionPoint({extensionPoint:"debugVisualizers",jsonSchema:{type:"array",items:{type:"object",properties:{id:{type:"string",description:"Name of the debug visualizer"},when:{type:"string",description:"Condition when the debug visualizer is applicable"}},required:["id","when"]}},activationEventsGenerator:(r,e)=>{for(let t of r)t.id&&e.push(`onDebugVisualizer:${t.id}`)}});var f7e=No("disassembly-editor-label-icon",ee.debug,c("disassemblyEditorLabelIcon","Icon of the disassembly editor label."));var bp=class r{constructor(e,t,n,i,o=0,s=0,a=void 0,l=0,d=void 0,u=void 0){this.session=e;this.threadId=t;this._reference=n;this.id=i;this.namedVariables=o;this.indexedVariables=s;this.memoryReference=a;this.startOfVariables=l;this.presentationHint=d;this.valueLocationReference=u}static allValues=new Map;static BASE_CHUNK_SIZE=100;type;valueChanged=!1;_value="";children;get reference(){return this._reference}set reference(e){this._reference=e,this.children=void 0}async evaluateLazy(){if(typeof this.reference>"u")return;let e=await this.session.variables(this.reference,this.threadId,void 0,void 0,void 0);if(!e||!e.body||!e.body.variables||e.body.variables.length!==1)return;let t=e.body.variables[0];this.reference=t.variablesReference,this._value=t.value,this.namedVariables=t.namedVariables,this.indexedVariables=t.indexedVariables,this.memoryReference=t.memoryReference,this.presentationHint=t.presentationHint,this.valueLocationReference=t.valueLocationReference,this.adoptLazyResponse(t)}adoptLazyResponse(e){}getChildren(){return this.children||(this.children=this.doGetChildren()),this.children}async doGetChildren(){if(!this.hasChildren)return[];if(!this.getChildrenInChunks)return this.fetchVariables(void 0,void 0,void 0);let e=this.namedVariables?await this.fetchVariables(void 0,void 0,"named"):[],t=r.BASE_CHUNK_SIZE;for(;this.indexedVariables&&this.indexedVariables>t*r.BASE_CHUNK_SIZE;)t*=r.BASE_CHUNK_SIZE;if(this.indexedVariables&&this.indexedVariables>t){let i=Math.ceil(this.indexedVariables/t);for(let o=0;o<i;o++){let s=(this.startOfVariables||0)+o*t,a=Math.min(t,this.indexedVariables-o*t);e.push(new kr(this.session,this.threadId,this,this.reference,`[${s}..${s+a-1}]`,"","",void 0,a,void 0,{kind:"virtual"},void 0,void 0,!0,s))}return e}let n=await this.fetchVariables(this.startOfVariables,this.indexedVariables,"indexed");return e.concat(n)}getId(){return this.id}getSession(){return this.session}get value(){return this._value}get hasChildren(){return!!this.reference&&this.reference>0&&!this.presentationHint?.lazy}async fetchVariables(e,t,n){try{let i=await this.session.variables(this.reference||0,this.threadId,n,e,t);if(!i||!i.body||!i.body.variables)return[];let o=new Map,s=i.body.variables.filter(a=>!!a).map(a=>{if(Oe(a.value)&&Oe(a.name)&&typeof a.variablesReference=="number"){let l=o.get(a.name)||0,d=l>0?l.toString():"";return o.set(a.name,l+1),new kr(this.session,this.threadId,this,a.variablesReference,a.name,a.evaluateName,a.value,a.namedVariables,a.indexedVariables,a.memoryReference,a.presentationHint,a.type,a.__vscodeVariableMenuContext,!0,0,d,a.declarationLocationReference,a.valueLocationReference)}return new kr(this.session,this.threadId,this,0,"",void 0,c("invalidVariableAttributes","Invalid variable attributes"),0,0,void 0,{kind:"virtual"},void 0,void 0,!1)});return this.session.autoExpandLazyVariables&&await Promise.all(s.map(a=>a.presentationHint?.lazy&&a.evaluateLazy())),s}catch(i){return[new kr(this.session,this.threadId,this,0,"",void 0,i.message,0,0,void 0,{kind:"virtual"},void 0,void 0,!1)]}}get getChildrenInChunks(){return!!this.indexedVariables}set value(e){this._value=e,this.valueChanged=!!r.allValues.get(this.getId())&&r.allValues.get(this.getId())!==ja.DEFAULT_VALUE&&r.allValues.get(this.getId())!==e,r.allValues.set(this.getId(),e)}toString(){return this.value}async evaluateExpression(e,t,n,i,o=!1,s){if(!t||!n&&i!=="repl")return this.value=i==="repl"?c("startDebugFirst","Please start a debug session to evaluate expressions"):ja.DEFAULT_VALUE,this.reference=0,!1;this.session=t;try{let a=await t.evaluate(e,n?n.frameId:void 0,i,s);return a&&a.body?(this.value=a.body.result||"",this.reference=a.body.variablesReference,this.namedVariables=a.body.namedVariables,this.indexedVariables=a.body.indexedVariables,this.memoryReference=a.body.memoryReference,this.type=a.body.type||this.type,this.presentationHint=a.body.presentationHint,this.valueLocationReference=a.body.valueLocationReference,!o&&a.body.presentationHint?.lazy&&await this.evaluateLazy(),!0):!1}catch(a){return this.value=a.message||"",this.reference=0,!1}}};function qS(r,e){e&&e.body&&(r.value=e.body.value||"",r.type=e.body.type||r.type,r.reference=e.body.variablesReference,r.namedVariables=e.body.namedVariables,r.indexedVariables=e.body.indexedVariables)}var mp=class{constructor(e,t,n,i){this.visualizer=e;this.treeId=t;this.treeItem=n;this.original=i}errorMessage;id=dt();evaluateLazy(){return Promise.resolve()}getChildren(){return this.visualizer.getVisualizedChildren(this.treeId,this.treeItem.id)}getId(){return this.id}get name(){return this.treeItem.label}get value(){return this.treeItem.description||""}get hasChildren(){return this.treeItem.collapsibleState!==0}async edit(e){try{return await this.visualizer.editTreeItem(this.treeId,this.treeItem,e),!0}catch(t){return this.errorMessage=t.message,!1}}},ja=class r extends bp{constructor(t,n=dt()){super(void 0,void 0,0,n);this.name=t;this.available=!1,t&&(this.value=r.DEFAULT_VALUE)}static DEFAULT_VALUE=c("notAvailable","not available");available;_onDidChangeValue=new E;onDidChangeValue=this._onDidChangeValue.event;async evaluate(t,n,i,o,s){let a=this.value===r.DEFAULT_VALUE;this.available=await this.evaluateExpression(this.name,t,n,i,o,s),(a||this.valueChanged)&&this._onDidChangeValue.fire(this)}toString(){return`${this.name}
${this.value}`}async setExpression(t,n){if(!this.session)return;let i=await this.session.setExpression(n.frameId,this.name,t);qS(this,i)}},kr=class extends bp{constructor(t,n,i,o,s,a,l,d,u,p,h,g=void 0,b=void 0,f=!0,v=0,D="",R=void 0,A=void 0){super(t,n,o,`variable:${i.getId()}:${s}:${D}`,d,u,p,v,h,A);this.parent=i;this.name=s;this.evaluateName=a;this.variableMenuContext=b;this.available=f;this.declarationLocationReference=R;this.value=l||"",this.type=g}errorMessage;getThreadId(){return this.threadId}async setVariable(t,n){if(this.session)try{if(this.session.capabilities.supportsSetExpression&&!this.session.capabilities.supportsSetVariable&&this.evaluateName)return this.setExpression(t,n);let i=await this.session.setVariable(this.parent.reference,this.name,t);qS(this,i)}catch(i){this.errorMessage=i.message}}async setExpression(t,n){if(!this.session||!this.evaluateName)return;let i=await this.session.setExpression(n.frameId,this.evaluateName,t);qS(this,i)}toString(){return this.name?`${this.name}: ${this.value}`:this.value}adoptLazyResponse(t){this.evaluateName=t.evaluateName}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,memoryReference:this.memoryReference,value:this.value,evaluateName:this.evaluateName}}},_f=class extends bp{constructor(t,n,i,o,s,a,l,d){super(t.thread.session,t.thread.threadId,o,`scope:${i}:${n}`,a,l);this.stackFrame=t;this.name=i;this.expensive=s;this.range=d}toString(){return this.name}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,expensive:this.expensive}}};var jS=class{constructor(e,t){this.enabled=e;this.id=t}getId(){return this.id}};function gp(r,e){return Hr({supportsConditionalBreakpoints:!!e.supportsConditionalBreakpoints,supportsHitConditionalBreakpoints:!!e.supportsHitConditionalBreakpoints,supportsLogPoints:!!e.supportsLogPoints,supportsFunctionBreakpoints:!!e.supportsFunctionBreakpoints,supportsDataBreakpoints:!!e.supportsDataBreakpoints,supportsInstructionBreakpoints:!!e.supportsInstructionBreakpoints},r)}var Ja=class extends jS{sessionData=new Map;data;hitCondition;condition;logMessage;mode;modeLabel;constructor(e,t){super(t.enabled??!0,e),this.condition=t.condition,this.hitCondition=t.hitCondition,this.logMessage=t.logMessage,this.mode=t.mode,this.modeLabel=t.modeLabel}setSessionData(e,t){t?(t.sessionId=e,this.sessionData.set(e,t)):this.sessionData.delete(e);let n=Array.from(this.sessionData.values()),i=Hn(n.filter(o=>o.verified),o=>`${o.line}:${o.column}`);i.length?this.data=i.length===1?i[0]:void 0:this.data=n.length?n[0]:void 0}get message(){if(this.data)return this.data.message}get verified(){return this.data?this.data.verified:!0}get sessionsThatVerified(){let e=[];for(let[t,n]of this.sessionData)n.verified&&e.push(t);return e}getIdFromAdapter(e){let t=this.sessionData.get(e);return t?t.id:void 0}getDebugProtocolBreakpoint(e){let t=this.sessionData.get(e);if(t)return{id:t.id,verified:t.verified,message:t.message,source:t.source,line:t.line,column:t.column,endLine:t.endLine,endColumn:t.endColumn,instructionReference:t.instructionReference,offset:t.offset}}toJSON(){return{id:this.getId(),enabled:this.enabled,condition:this.condition,hitCondition:this.hitCondition,logMessage:this.logMessage,mode:this.mode,modeLabel:this.modeLabel}}},Xa=class extends Ja{constructor(t,n,i,o,s=dt()){super(s,t);this.textFileService=n;this.uriIdentityService=i;this.logService=o;this._uri=t.uri,this._lineNumber=t.lineNumber,this._column=t.column,this._adapterData=t.adapterData,this.triggeredBy=t.triggeredBy}sessionsDidTrigger;_uri;_adapterData;_lineNumber;_column;triggeredBy;toDAP(){return{line:this.sessionAgnosticData.lineNumber,column:this.sessionAgnosticData.column,condition:this.condition,hitCondition:this.hitCondition,logMessage:this.logMessage,mode:this.mode}}get originalUri(){return this._uri}get lineNumber(){return this.verified&&this.data&&typeof this.data.line=="number"?this.data.line:this._lineNumber}get verified(){return this.data?this.data.verified&&!this.textFileService.isDirty(this._uri):!0}get pending(){return this.data?!1:this.triggeredBy!==void 0}get uri(){return this.verified&&this.data&&this.data.source?f_(this.data.source,this.data.source.path,this.data.sessionId,this.uriIdentityService,this.logService):this._uri}get column(){return this.verified&&this.data&&typeof this.data.column=="number"?this.data.column:this._column}get message(){return this.textFileService.isDirty(this.uri)?c("breakpointDirtydHover","Unverified breakpoint. File is modified, please restart debug session."):super.message}get adapterData(){return this.data&&this.data.source&&this.data.source.adapterData?this.data.source.adapterData:this._adapterData}get endLineNumber(){return this.verified&&this.data?this.data.endLine:void 0}get endColumn(){return this.verified&&this.data?this.data.endColumn:void 0}get sessionAgnosticData(){return{lineNumber:this._lineNumber,column:this._column}}get supported(){return this.data?!(this.logMessage&&!this.data.supportsLogPoints||this.condition&&!this.data.supportsConditionalBreakpoints||this.hitCondition&&!this.data.supportsHitConditionalBreakpoints):!0}setSessionData(t,n){super.setSessionData(t,n),this._adapterData||(this._adapterData=this.adapterData)}toJSON(){return{...super.toJSON(),uri:this._uri,lineNumber:this._lineNumber,column:this._column,adapterData:this.adapterData,triggeredBy:this.triggeredBy}}toString(){return`${ha(this.uri)} ${this.lineNumber}`}setSessionDidTrigger(t){this.sessionsDidTrigger??=new Set,this.sessionsDidTrigger.add(t)}getSessionDidTrigger(t){return!!this.sessionsDidTrigger?.has(t)}update(t){t.hasOwnProperty("lineNumber")&&!Bt(t.lineNumber)&&(this._lineNumber=t.lineNumber),t.hasOwnProperty("column")&&(this._column=t.column),t.hasOwnProperty("condition")&&(this.condition=t.condition),t.hasOwnProperty("hitCondition")&&(this.hitCondition=t.hitCondition),t.hasOwnProperty("logMessage")&&(this.logMessage=t.logMessage),t.hasOwnProperty("mode")&&(this.mode=t.mode,this.modeLabel=t.modeLabel),t.hasOwnProperty("triggeredBy")&&(this.triggeredBy=t.triggeredBy,this.sessionsDidTrigger=void 0)}},Qa=class extends Ja{name;constructor(e,t=dt()){super(t,e),this.name=e.name}toDAP(){return{name:this.name,condition:this.condition,hitCondition:this.hitCondition}}toJSON(){return{...super.toJSON(),name:this.name}}get supported(){return this.data?this.data.supportsFunctionBreakpoints:!0}toString(){return this.name}},Ya=class extends Ja{sessionDataIdForAddr=new WeakMap;description;src;canPersist;accessTypes;accessType;constructor(e,t=dt()){super(t,e),this.description=e.description,"dataId"in e&&(e.src={type:0,dataId:e.dataId}),this.src=e.src,this.canPersist=e.canPersist,this.accessTypes=e.accessTypes,this.accessType=e.accessType,e.initialSessionData&&this.sessionDataIdForAddr.set(e.initialSessionData.session,e.initialSessionData.dataId)}async toDAP(e){let t;if(this.src.type===0)t=this.src.dataId;else{let n=this.sessionDataIdForAddr.get(e);if(!n){if(n=(await e.dataBytesBreakpointInfo(this.src.address,this.src.bytes))?.dataId,!n)return;this.sessionDataIdForAddr.set(e,n)}t=n}return{dataId:t,accessType:this.accessType,condition:this.condition,hitCondition:this.hitCondition}}toJSON(){return{...super.toJSON(),description:this.description,src:this.src,accessTypes:this.accessTypes,accessType:this.accessType,canPersist:this.canPersist}}get supported(){return this.data?this.data.supportsDataBreakpoints:!0}toString(){return this.description}},Vd=class extends Ja{supportedSessions=new Set;filter;label;supportsCondition;description;conditionDescription;fallback=!1;constructor(e,t=dt()){super(t,e),this.filter=e.filter,this.label=e.label,this.supportsCondition=e.supportsCondition,this.description=e.description,this.conditionDescription=e.conditionDescription,this.fallback=e.fallback||!1}toJSON(){return{...super.toJSON(),filter:this.filter,label:this.label,enabled:this.enabled,supportsCondition:this.supportsCondition,conditionDescription:this.conditionDescription,condition:this.condition,fallback:this.fallback,description:this.description}}setSupportedSession(e,t){t?this.supportedSessions.add(e):this.supportedSessions.delete(e)}setFallback(e){this.fallback=e}get supported(){return!0}isSupportedSession(e){return e?this.supportedSessions.has(e):this.fallback}matches(e){return this.filter===e.filter&&this.label===e.label&&this.supportsCondition===!!e.supportsCondition&&this.conditionDescription===e.conditionDescription&&this.description===e.description}toString(){return this.label}},fp=class extends Ja{instructionReference;offset;canPersist;address;constructor(e,t=dt()){super(t,e),this.instructionReference=e.instructionReference,this.offset=e.offset,this.canPersist=e.canPersist,this.address=e.address}toDAP(){return{instructionReference:this.instructionReference,condition:this.condition,hitCondition:this.hitCondition,mode:this.mode,offset:this.offset}}toJSON(){return{...super.toJSON(),instructionReference:this.instructionReference,offset:this.offset,canPersist:this.canPersist,address:this.address}}get supported(){return this.data?this.data.supportsInstructionBreakpoints:!0}toString(){return this.instructionReference}};var Rf=class extends O{constructor(t,n,i,o){super();this.textFileService=n;this.uriIdentityService=i;this.logService=o;this._register(Ur(s=>{this.breakpoints=t.breakpoints.read(s),this.functionBreakpoints=t.functionBreakpoints.read(s),this.exceptionBreakpoints=t.exceptionBreakpoints.read(s),this.dataBreakpoints=t.dataBreakpoints.read(s),this._onDidChangeBreakpoints.fire(void 0)})),this._register(Ur(s=>{this.watchExpressions=t.watchExpressions.read(s),this._onDidChangeWatchExpressions.fire(void 0)})),this.instructionBreakpoints=[],this.sessions=[];for(let s of this.watchExpressions)this.watchExpressionChangeListeners.set(s.getId(),s.onDidChangeValue(a=>this._onDidChangeWatchExpressionValue.fire(a)))}sessions;schedulers=new Map;breakpointsActivated=!0;_onDidChangeBreakpoints=this._register(new E);_onDidChangeCallStack=this._register(new E);_onDidChangeWatchExpressions=this._register(new E);_onDidChangeWatchExpressionValue=this._register(new E);_breakpointModes=new Map;breakpoints;functionBreakpoints;exceptionBreakpoints;dataBreakpoints;watchExpressions;watchExpressionChangeListeners=this._register(new $n);instructionBreakpoints;getId(){return"root"}getSession(t,n=!1){if(t)return this.getSessions(n).find(i=>i.getId()===t)}getSessions(t=!1){return this.sessions.filter(n=>t||n.state!==0)}addSession(t){this.sessions=this.sessions.filter(o=>!(o.getId()===t.getId()||o.state===0&&o.configuration.name===t.configuration.name));let n=1;for(;this.sessions.some(o=>o.getLabel()===t.getLabel());)t.setName(`${t.configuration.name} ${++n}`);let i=-1;t.parentSession&&(i=zb(this.sessions,o=>o.parentSession===t.parentSession||o===t.parentSession)),i>=0?this.sessions.splice(i+1,0,t):this.sessions.push(t),this._onDidChangeCallStack.fire(void 0)}get onDidChangeBreakpoints(){return this._onDidChangeBreakpoints.event}get onDidChangeCallStack(){return this._onDidChangeCallStack.event}get onDidChangeWatchExpressions(){return this._onDidChangeWatchExpressions.event}get onDidChangeWatchExpressionValue(){return this._onDidChangeWatchExpressionValue.event}rawUpdate(t){let n=this.sessions.find(i=>i.getId()===t.sessionId);n&&(n.rawUpdate(t),this._onDidChangeCallStack.fire(void 0))}clearThreads(t,n,i=void 0){let o=this.sessions.find(s=>s.getId()===t);this.schedulers.forEach(s=>{s.scheduler.dispose(),s.completeDeferred.complete()}),this.schedulers.clear(),o&&(o.clearThreads(n,i),this._onDidChangeCallStack.fire(void 0))}async fetchCallstack(t,n){if(t.reachedEndOfCallStack)return;let i=t.stoppedDetails?.totalFrames,o=typeof i=="number"?i-t.getCallStack().length:void 0;(!n||o&&n>o)&&(n=o),n&&n>0&&(await t.fetchCallStack(n),this._onDidChangeCallStack.fire())}refreshTopOfCallstack(t,n=!0){if(t.session.capabilities.supportsDelayedStackTraceLoading){let o=Promise.resolve(),s=new Promise((a,l)=>{o=t.fetchCallStack(1).then(()=>{if(!n){a(),this._onDidChangeCallStack.fire();return}if(!this.schedulers.has(t.getId())){let u=new yn;this.schedulers.set(t.getId(),{completeDeferred:u,scheduler:new li(()=>{t.fetchCallStack(19).then(()=>{let p=t.getStaleCallStack(),h=t.getCallStack(),g=p.length!==h.length;for(let b=1;b<p.length&&!g;b++)g=!p[b].equals(h[b]);g&&this._onDidChangeCallStack.fire()}).finally(()=>{u.complete(),this.schedulers.delete(t.getId())})},420)})}let d=this.schedulers.get(t.getId());d.scheduler.schedule(),d.completeDeferred.p.then(a,l),this._onDidChangeCallStack.fire()})});return{topCallStack:o,wholeCallStack:s}}let i=t.fetchCallStack();return{wholeCallStack:i,topCallStack:i}}getBreakpoints(t){if(t){let n=t.uri?.toString(),i=t.originalUri?.toString();return this.breakpoints.filter(o=>!(n&&o.uri.toString()!==n||i&&o.originalUri.toString()!==i||t.lineNumber&&o.lineNumber!==t.lineNumber||t.column&&o.column!==t.column||t.enabledOnly&&(!this.breakpointsActivated||!o.enabled)||t.triggeredOnly&&o.triggeredBy===void 0))}return this.breakpoints}getFunctionBreakpoints(){return this.functionBreakpoints}getDataBreakpoints(){return this.dataBreakpoints}getExceptionBreakpoints(){return this.exceptionBreakpoints}getExceptionBreakpointsForSession(t){return this.exceptionBreakpoints.filter(n=>n.isSupportedSession(t))}getInstructionBreakpoints(){return this.instructionBreakpoints}setExceptionBreakpointsForSession(t,n){if(!n)return;let i=!1;n.forEach(o=>{let s=this.exceptionBreakpoints.filter(a=>a.matches(o)).pop();s||(i=!0,s=new Vd({filter:o.filter,label:o.label,enabled:!!o.default,supportsCondition:!!o.supportsCondition,description:o.description,conditionDescription:o.conditionDescription}),this.exceptionBreakpoints.push(s)),s.setSupportedSession(t,!0)}),i&&this._onDidChangeBreakpoints.fire(void 0)}removeExceptionBreakpointsForSession(t){this.exceptionBreakpoints.forEach(n=>n.setSupportedSession(t,!1))}setExceptionBreakpointFallbackSession(t){this.exceptionBreakpoints.forEach(n=>n.setFallback(n.isSupportedSession(t)))}setExceptionBreakpointCondition(t,n){t.condition=n,this._onDidChangeBreakpoints.fire(void 0)}areBreakpointsActivated(){return this.breakpointsActivated}setBreakpointsActivated(t){this.breakpointsActivated=t,this._onDidChangeBreakpoints.fire(void 0)}addBreakpoints(t,n,i=!0){let o=n.map(s=>new Xa({uri:t,lineNumber:s.lineNumber,column:s.column,enabled:s.enabled??!0,condition:s.condition,hitCondition:s.hitCondition,logMessage:s.logMessage,triggeredBy:s.triggeredBy,adapterData:void 0,mode:s.mode,modeLabel:s.modeLabel},this.textFileService,this.uriIdentityService,this.logService,s.id));return this.breakpoints=this.breakpoints.concat(o),this.breakpointsActivated=!0,this.sortAndDeDup(),i&&this._onDidChangeBreakpoints.fire({added:o,sessionOnly:!1}),o}removeBreakpoints(t){this.breakpoints=this.breakpoints.filter(n=>!t.some(i=>i.getId()===n.getId())),this._onDidChangeBreakpoints.fire({removed:t,sessionOnly:!1})}updateBreakpoints(t){let n=[];this.breakpoints.forEach(i=>{let o=t.get(i.getId());o&&(i.update(o),n.push(i))}),this.sortAndDeDup(),this._onDidChangeBreakpoints.fire({changed:n,sessionOnly:!1})}setBreakpointSessionData(t,n,i){this.breakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,gp(s,n))}}),this.functionBreakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,gp(s,n))}}),this.dataBreakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,gp(s,n))}}),this.exceptionBreakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,gp(s,n))}}),this.instructionBreakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,gp(s,n))}}),this._onDidChangeBreakpoints.fire({sessionOnly:!0})}getDebugProtocolBreakpoint(t,n){let i=this.breakpoints.find(o=>o.getId()===t);if(i)return i.getDebugProtocolBreakpoint(n)}getBreakpointModes(t){return[...this._breakpointModes.values()].filter(n=>n.appliesTo.includes(t))}registerBreakpointModes(t,n){for(let i of n){let o=`${i.mode}/${i.label}`,s=this._breakpointModes.get(o);if(s)for(let a of i.appliesTo)s.appliesTo.includes(a)||s.appliesTo.push(a);else{let a=[...this._breakpointModes.values()].find(l=>l!==s&&l.label===i.label);a&&(a.label=`${a.label} (${a.firstFromDebugType})`),this._breakpointModes.set(o,{mode:i.mode,label:a?`${i.label} (${t})`:i.label,firstFromDebugType:t,description:i.description,appliesTo:i.appliesTo.slice()})}}}sortAndDeDup(){this.breakpoints=this.breakpoints.sort((t,n)=>t.uri.toString()!==n.uri.toString()?ha(t.uri).localeCompare(ha(n.uri)):t.lineNumber===n.lineNumber?t.column&&n.column?t.column-n.column:1:t.lineNumber-n.lineNumber),this.breakpoints=Hn(this.breakpoints,t=>`${t.uri.toString()}:${t.lineNumber}:${t.column}`)}setEnablement(t,n){if(t instanceof Xa||t instanceof Qa||t instanceof Vd||t instanceof Ya||t instanceof fp){let i=[];t.enabled!==n&&(t instanceof Xa||t instanceof Qa||t instanceof Ya||t instanceof fp)&&i.push(t),t.enabled=n,n&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:i,sessionOnly:!1})}}enableOrDisableAllBreakpoints(t){let n=[];this.breakpoints.forEach(i=>{i.enabled!==t&&n.push(i),i.enabled=t}),this.functionBreakpoints.forEach(i=>{i.enabled!==t&&n.push(i),i.enabled=t}),this.dataBreakpoints.forEach(i=>{i.enabled!==t&&n.push(i),i.enabled=t}),this.instructionBreakpoints.forEach(i=>{i.enabled!==t&&n.push(i),i.enabled=t}),t&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:n,sessionOnly:!1})}addFunctionBreakpoint(t,n){let i=new Qa(t,n);return this.functionBreakpoints.push(i),this._onDidChangeBreakpoints.fire({added:[i],sessionOnly:!1}),i}updateFunctionBreakpoint(t,n){let i=this.functionBreakpoints.find(o=>o.getId()===t);i&&(typeof n.name=="string"&&(i.name=n.name),typeof n.condition=="string"&&(i.condition=n.condition),typeof n.hitCondition=="string"&&(i.hitCondition=n.hitCondition),this._onDidChangeBreakpoints.fire({changed:[i],sessionOnly:!1}))}removeFunctionBreakpoints(t){let n;t?(n=this.functionBreakpoints.filter(i=>i.getId()===t),this.functionBreakpoints=this.functionBreakpoints.filter(i=>i.getId()!==t)):(n=this.functionBreakpoints,this.functionBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:n,sessionOnly:!1})}addDataBreakpoint(t,n){let i=new Ya(t,n);this.dataBreakpoints.push(i),this._onDidChangeBreakpoints.fire({added:[i],sessionOnly:!1})}updateDataBreakpoint(t,n){let i=this.dataBreakpoints.find(o=>o.getId()===t);i&&(typeof n.condition=="string"&&(i.condition=n.condition),typeof n.hitCondition=="string"&&(i.hitCondition=n.hitCondition),this._onDidChangeBreakpoints.fire({changed:[i],sessionOnly:!1}))}removeDataBreakpoints(t){let n;t?(n=this.dataBreakpoints.filter(i=>i.getId()===t),this.dataBreakpoints=this.dataBreakpoints.filter(i=>i.getId()!==t)):(n=this.dataBreakpoints,this.dataBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:n,sessionOnly:!1})}addInstructionBreakpoint(t){let n=new fp(t);this.instructionBreakpoints.push(n),this._onDidChangeBreakpoints.fire({added:[n],sessionOnly:!0})}removeInstructionBreakpoints(t,n){let i=[];if(t)for(let o=0;o<this.instructionBreakpoints.length;o++){let s=this.instructionBreakpoints[o];s.instructionReference===t&&(n===void 0||s.offset===n)&&(i.push(s),this.instructionBreakpoints.splice(o--,1))}else i=this.instructionBreakpoints,this.instructionBreakpoints=[];this._onDidChangeBreakpoints.fire({removed:i,sessionOnly:!1})}getWatchExpressions(){return this.watchExpressions}addWatchExpression(t){let n=new ja(t||"");return this.watchExpressionChangeListeners.set(n.getId(),n.onDidChangeValue(i=>this._onDidChangeWatchExpressionValue.fire(i))),this.watchExpressions.push(n),this._onDidChangeWatchExpressions.fire(n),n}renameWatchExpression(t,n){let i=this.watchExpressions.filter(o=>o.getId()===t);i.length===1&&(i[0].name=n,this._onDidChangeWatchExpressions.fire(i[0]))}removeWatchExpressions(t=null){if(this.watchExpressions=t?this.watchExpressions.filter(n=>n.getId()!==t):[],this._onDidChangeWatchExpressions.fire(void 0),!t){this.watchExpressionChangeListeners.clearAndDisposeAll();return}this.watchExpressionChangeListeners.deleteAndDispose(t)}moveWatchExpression(t,n){let i=this.watchExpressions.find(o=>o.getId()===t);i&&(this.watchExpressions=this.watchExpressions.filter(o=>o.getId()!==t),this.watchExpressions=this.watchExpressions.slice(0,n).concat(i,this.watchExpressions.slice(n)),this._onDidChangeWatchExpressions.fire(void 0))}sourceIsNotAvailable(t){this.sessions.forEach(n=>{let i=n.getSourceForUri(t);i&&(i.available=!1)}),this._onDidChangeCallStack.fire(void 0)}};Rf=T([S(1,Us),S(2,Gi),S(3,je)],Rf);var Pf=class{_state;constructor(){this._state=0}get state(){return this._state}set state(e){e>this._state&&(this._state=e)}isOK(){return this._state===0}isFatal(){return this._state===4}},vp=class{_problemReporter;constructor(e){this._problemReporter=e}reset(){this._problemReporter.status.state=0}get problemReporter(){return this._problemReporter}info(e){this._problemReporter.info(e)}warn(e){this._problemReporter.warn(e)}error(e){this._problemReporter.error(e)}fatal(e){this._problemReporter.fatal(e)}};var zd=(o=>(o[o.Default=0]="Default",o[o.Relative=1]="Relative",o[o.Absolute=2]="Absolute",o[o.AutoDetect=3]="AutoDetect",o[o.Search=4]="Search",o))(zd||{});(e=>{function r(t){return t=t.toLowerCase(),t==="absolute"?2:t==="relative"?1:t==="autodetect"?3:t==="search"?4:void 0}e.fromString=r})(zd||={});var Mf=(t=>(t[t.File=0]="File",t[t.Location=1]="Location",t))(Mf||{});(e=>{function r(t){return t=t.toLowerCase(),t==="file"?0:t==="location"?1:void 0}e.fromString=r})(Mf||={});var Nf=(n=>(n[n.allDocuments=0]="allDocuments",n[n.openDocuments=1]="openDocuments",n[n.closedDocuments=2]="closedDocuments",n))(Nf||{});(e=>{function r(t){return t=t.toLowerCase(),t==="alldocuments"?0:t==="opendocuments"?1:t==="closeddocuments"?2:void 0}e.fromString=r})(Nf||={});function XM(r){return!!(r&&Oe(r.name))}var r8e=Br===1?`\r
`:`
`;var Hs;(a=>{let r;(d=>{function l(u){let p=u;return p&&Oe(p.regexp)}d.is=l})(r=a.CheckedProblemPattern||={});let e;(d=>{function l(u){let p=u;return p&&Oe(p.name)}d.is=l})(e=a.NamedProblemPattern||={});let t;(d=>{function l(u){let p=u;return p&&e.is(p)&&Oe(p.regexp)}d.is=l})(t=a.NamedCheckedProblemPattern||={});let n;(d=>{function l(u){return u&&Array.isArray(u)}d.is=l})(n=a.MultiLineProblemPattern||={});let i;(d=>{function l(u){if(!n.is(u))return!1;for(let p of u)if(!a.CheckedProblemPattern.is(p))return!1;return!0}d.is=l})(i=a.MultiLineCheckedProblemPattern||={});let o;(d=>{function l(u){let p=u;return p&&Oe(p.name)&&Array.isArray(p.patterns)&&i.is(p.patterns)}d.is=l})(o=a.NamedMultiLineCheckedProblemPattern||={});function s(l){return Oe(l.name)}a.isNamedProblemMatcher=s})(Hs||={});var Lf=class extends vp{constructor(e){super(e)}parse(e){if(Hs.NamedMultiLineCheckedProblemPattern.is(e))return this.createNamedMultiLineProblemPattern(e);if(Hs.MultiLineCheckedProblemPattern.is(e))return this.createMultiLineProblemPattern(e);if(Hs.NamedCheckedProblemPattern.is(e)){let t=this.createSingleProblemPattern(e);return t.name=e.name,t}else return Hs.CheckedProblemPattern.is(e)?this.createSingleProblemPattern(e):(this.error(c("ProblemPatternParser.problemPattern.missingRegExp","The problem pattern is missing a regular expression.")),null)}createSingleProblemPattern(e){let t=this.doCreateSingleProblemPattern(e,!0);return t===void 0?null:(t.kind===void 0&&(t.kind=1),this.validateProblemPattern([t])?t:null)}createNamedMultiLineProblemPattern(e){let t=this.createMultiLineProblemPattern(e.patterns);return t?{name:e.name,label:e.label?e.label:e.name,patterns:t}:null}createMultiLineProblemPattern(e){let t=[];for(let n=0;n<e.length;n++){let i=this.doCreateSingleProblemPattern(e[n],!1);if(i===void 0)return null;n<e.length-1&&!Zt(i.loop)&&i.loop&&(i.loop=!1,this.error(c("ProblemPatternParser.loopProperty.notLast","The loop property is only supported on the last line matcher."))),t.push(i)}return t[0].kind===void 0&&(t[0].kind=1),this.validateProblemPattern(t)?t:null}doCreateSingleProblemPattern(e,t){let n=this.createRegularExpression(e.regexp);if(n===void 0)return;let i={regexp:n};e.kind&&(i.kind=Mf.fromString(e.kind));function o(s,a,l,d){let u=a[d];typeof u=="number"&&(s[l]=u)}return o(i,e,"file","file"),o(i,e,"location","location"),o(i,e,"line","line"),o(i,e,"character","column"),o(i,e,"endLine","endLine"),o(i,e,"endCharacter","endColumn"),o(i,e,"severity","severity"),o(i,e,"code","code"),o(i,e,"message","message"),(e.loop===!0||e.loop===!1)&&(i.loop=e.loop),t&&(i.location||i.kind===0?i=Hr(i,{file:1,message:0},!1):i=Hr(i,{file:1,line:2,character:3,message:0},!1)),i}validateProblemPattern(e){let t=!1,n=!1,i=!1,o=!1,s=e[0].kind===void 0?1:e[0].kind;return e.forEach((a,l)=>{l!==0&&a.kind&&this.error(c("ProblemPatternParser.problemPattern.kindProperty.notFirst","The problem pattern is invalid. The kind property must be provided only in the first element")),t=t||!Zt(a.file),n=n||!Zt(a.message),i=i||!Zt(a.location),o=o||!Zt(a.line)}),t&&n?s===1&&!(i||o)?(this.error(c("ProblemPatternParser.problemPattern.missingLocation",'The problem pattern is invalid. It must either have kind: "file" or have a line or location match group.')),!1):!0:(this.error(c("ProblemPatternParser.problemPattern.missingProperty","The problem pattern is invalid. It must have at least have a file and a message.")),!1)}createRegularExpression(e){let t;try{t=new RegExp(e)}catch{this.error(c("ProblemPatternParser.invalidRegexp",`Error: The string {0} is not a valid regular expression.
`,e))}return t}},Of=class{constructor(e,t=new Pf){this._collector=e;this._validationStatus=t}info(e){this._validationStatus.state=1,this._collector.info(e)}warn(e){this._validationStatus.state=2,this._collector.warn(e)}error(e){this._validationStatus.state=3,this._collector.error(e)}fatal(e){this._validationStatus.state=4,this._collector.error(e)}get status(){return this._validationStatus}},Af;(d=>(d.ProblemPattern={default:{regexp:"^([^\\\\s].*)\\\\((\\\\d+,\\\\d+)\\\\):\\\\s*(.*)$",file:1,location:2,message:3},type:"object",additionalProperties:!1,properties:{regexp:{type:"string",description:c("ProblemPatternSchema.regexp","The regular expression to find an error, warning or info in the output.")},kind:{type:"string",description:c("ProblemPatternSchema.kind","whether the pattern matches a location (file and line) or only a file.")},file:{type:"integer",description:c("ProblemPatternSchema.file","The match group index of the filename. If omitted 1 is used.")},location:{type:"integer",description:c("ProblemPatternSchema.location","The match group index of the problem's location. Valid location patterns are: (line), (line,column) and (startLine,startColumn,endLine,endColumn). If omitted (line,column) is assumed.")},line:{type:"integer",description:c("ProblemPatternSchema.line","The match group index of the problem's line. Defaults to 2")},column:{type:"integer",description:c("ProblemPatternSchema.column","The match group index of the problem's line character. Defaults to 3")},endLine:{type:"integer",description:c("ProblemPatternSchema.endLine","The match group index of the problem's end line. Defaults to undefined")},endColumn:{type:"integer",description:c("ProblemPatternSchema.endColumn","The match group index of the problem's end line character. Defaults to undefined")},severity:{type:"integer",description:c("ProblemPatternSchema.severity","The match group index of the problem's severity. Defaults to undefined")},code:{type:"integer",description:c("ProblemPatternSchema.code","The match group index of the problem's code. Defaults to undefined")},message:{type:"integer",description:c("ProblemPatternSchema.message","The match group index of the message. If omitted it defaults to 4 if location is specified. Otherwise it defaults to 5.")},loop:{type:"boolean",description:c("ProblemPatternSchema.loop","In a multi line matcher loop indicated whether this pattern is executed in a loop as long as it matches. Can only specified on a last pattern in a multi line pattern.")}}},d.NamedProblemPattern=_t(d.ProblemPattern),d.NamedProblemPattern.properties=_t(d.NamedProblemPattern.properties)||{},d.NamedProblemPattern.properties.name={type:"string",description:c("NamedProblemPatternSchema.name","The name of the problem pattern.")},d.MultiLineProblemPattern={type:"array",items:d.ProblemPattern},d.NamedMultiLineProblemPattern={type:"object",additionalProperties:!1,properties:{name:{type:"string",description:c("NamedMultiLineProblemPatternSchema.name","The name of the problem multi line problem pattern.")},patterns:{type:"array",description:c("NamedMultiLineProblemPatternSchema.patterns","The actual patterns."),items:d.ProblemPattern}}},d.WatchingPattern={type:"object",additionalProperties:!1,properties:{regexp:{type:"string",description:c("WatchingPatternSchema.regexp","The regular expression to detect the begin or end of a background task.")},file:{type:"integer",description:c("WatchingPatternSchema.file","The match group index of the filename. Can be omitted.")}}},d.PatternType={anyOf:[{type:"string",description:c("PatternTypeSchema.name","The name of a contributed or predefined pattern")},d.ProblemPattern,d.MultiLineProblemPattern],description:c("PatternTypeSchema.description","A problem pattern or the name of a contributed or predefined problem pattern. Can be omitted if base is specified.")},d.ProblemMatcher={type:"object",additionalProperties:!1,properties:{base:{type:"string",description:c("ProblemMatcherSchema.base","The name of a base problem matcher to use.")},owner:{type:"string",description:c("ProblemMatcherSchema.owner","The owner of the problem inside Code. Can be omitted if base is specified. Defaults to 'external' if omitted and base is not specified.")},source:{type:"string",description:c("ProblemMatcherSchema.source","A human-readable string describing the source of this diagnostic, e.g. 'typescript' or 'super lint'.")},severity:{type:"string",enum:["error","warning","info"],description:c("ProblemMatcherSchema.severity","The default severity for captures problems. Is used if the pattern doesn't define a match group for severity.")},applyTo:{type:"string",enum:["allDocuments","openDocuments","closedDocuments"],description:c("ProblemMatcherSchema.applyTo","Controls if a problem reported on a text document is applied only to open, closed or all documents.")},pattern:d.PatternType,fileLocation:{oneOf:[{type:"string",enum:["absolute","relative","autoDetect","search"]},{type:"array",prefixItems:[{type:"string",enum:["absolute","relative","autoDetect","search"]}],minItems:1,maxItems:1,additionalItems:!1},{type:"array",prefixItems:[{type:"string",enum:["relative","autoDetect"]},{type:"string"}],minItems:2,maxItems:2,additionalItems:!1,examples:[["relative","${workspaceFolder}"],["autoDetect","${workspaceFolder}"]]},{type:"array",prefixItems:[{type:"string",enum:["search"]},{type:"object",properties:{include:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},exclude:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]}},required:["include"]}],minItems:2,maxItems:2,additionalItems:!1,examples:[["search",{include:["${workspaceFolder}"]}],["search",{include:["${workspaceFolder}"],exclude:[]}]]}],description:c("ProblemMatcherSchema.fileLocation","Defines how file names reported in a problem pattern should be interpreted. A relative fileLocation may be an array, where the second element of the array is the path of the relative file location. The search fileLocation mode, performs a deep (and, possibly, heavy) file system search within the directories specified by the include/exclude properties of the second element (or the current workspace directory if not specified).")},background:{type:"object",additionalProperties:!1,description:c("ProblemMatcherSchema.background","Patterns to track the begin and end of a matcher active on a background task."),properties:{activeOnStart:{type:"boolean",description:c("ProblemMatcherSchema.background.activeOnStart","If set to true the background monitor is in active mode when the task starts. This is equals of issuing a line that matches the beginsPattern")},beginsPattern:{oneOf:[{type:"string"},d.WatchingPattern],description:c("ProblemMatcherSchema.background.beginsPattern","If matched in the output the start of a background task is signaled.")},endsPattern:{oneOf:[{type:"string"},d.WatchingPattern],description:c("ProblemMatcherSchema.background.endsPattern","If matched in the output the end of a background task is signaled.")}}},watching:{type:"object",additionalProperties:!1,deprecationMessage:c("ProblemMatcherSchema.watching.deprecated","The watching property is deprecated. Use background instead."),description:c("ProblemMatcherSchema.watching","Patterns to track the begin and end of a watching matcher."),properties:{activeOnStart:{type:"boolean",description:c("ProblemMatcherSchema.watching.activeOnStart","If set to true the watcher is in active mode when the task starts. This is equals of issuing a line that matches the beginPattern")},beginsPattern:{oneOf:[{type:"string"},d.WatchingPattern],description:c("ProblemMatcherSchema.watching.beginsPattern","If matched in the output the start of a watching task is signaled.")},endsPattern:{oneOf:[{type:"string"},d.WatchingPattern],description:c("ProblemMatcherSchema.watching.endsPattern","If matched in the output the end of a watching task is signaled.")}}}}},d.LegacyProblemMatcher=_t(d.ProblemMatcher),d.LegacyProblemMatcher.properties=_t(d.LegacyProblemMatcher.properties)||{},d.LegacyProblemMatcher.properties.watchedTaskBeginsRegExp={type:"string",deprecationMessage:c("LegacyProblemMatcherSchema.watchedBegin.deprecated","This property is deprecated. Use the watching property instead."),description:c("LegacyProblemMatcherSchema.watchedBegin","A regular expression signaling that a watched tasks begins executing triggered through file watching.")},d.LegacyProblemMatcher.properties.watchedTaskEndsRegExp={type:"string",deprecationMessage:c("LegacyProblemMatcherSchema.watchedEnd.deprecated","This property is deprecated. Use the watching property instead."),description:c("LegacyProblemMatcherSchema.watchedEnd","A regular expression signaling that a watched tasks ends executing.")},d.NamedProblemMatcher=_t(d.ProblemMatcher),d.NamedProblemMatcher.properties=_t(d.NamedProblemMatcher.properties)||{},d.NamedProblemMatcher.properties.name={type:"string",description:c("NamedProblemMatcherSchema.name","The name of the problem matcher used to refer to it.")},d.NamedProblemMatcher.properties.label={type:"string",description:c("NamedProblemMatcherSchema.label","A human readable label of the problem matcher.")}))(Af||={});var R_=zo.registerExtensionPoint({extensionPoint:"problemPatterns",jsonSchema:{description:c("ProblemPatternExtPoint","Contributes problem patterns"),type:"array",items:{anyOf:[Af.NamedProblemPattern,Af.NamedMultiLineProblemPattern]}}}),XS=class{patterns;readyPromise;constructor(){this.patterns=Object.create(null),this.fillDefaults(),this.readyPromise=new Promise((e,t)=>{R_.setHandler((n,i)=>{try{i.removed.forEach(o=>{let s=o.value;for(let a of s)this.patterns[a.name]&&delete this.patterns[a.name]}),i.added.forEach(o=>{let s=o.value,a=new Lf(new Of(o.collector));for(let l of s){if(Hs.NamedMultiLineCheckedProblemPattern.is(l)){let d=a.parse(l);a.problemReporter.status.state<3?this.add(d.name,d.patterns):(o.collector.error(c("ProblemPatternRegistry.error","Invalid problem pattern. The pattern will be ignored.")),o.collector.error(JSON.stringify(l,void 0,4)))}else if(Hs.NamedProblemPattern.is(l)){let d=a.parse(l);a.problemReporter.status.state<3?this.add(l.name,d):(o.collector.error(c("ProblemPatternRegistry.error","Invalid problem pattern. The pattern will be ignored.")),o.collector.error(JSON.stringify(l,void 0,4)))}a.reset()}})}catch{}e(void 0)})})}onReady(){return this.readyPromise}add(e,t){this.patterns[e]=t}get(e){return this.patterns[e]}fillDefaults(){this.add("msCompile",{regexp:/^(?:\s*\d+>)?(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\)\s*:\s+((?:fatal +)?error|warning|info)\s+(\w+\d+)\s*:\s*(.*)$/,kind:1,file:1,location:2,severity:3,code:4,message:5}),this.add("gulp-tsc",{regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(\d+)\s+(.*)$/,kind:1,file:1,location:2,code:3,message:4}),this.add("cpp",{regexp:/^(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(C\d+)\s*:\s*(.*)$/,kind:1,file:1,location:2,severity:3,code:4,message:5}),this.add("csc",{regexp:/^(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(CS\d+)\s*:\s*(.*)$/,kind:1,file:1,location:2,severity:3,code:4,message:5}),this.add("vb",{regexp:/^(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(BC\d+)\s*:\s*(.*)$/,kind:1,file:1,location:2,severity:3,code:4,message:5}),this.add("lessCompile",{regexp:/^\s*(.*) in file (.*) line no. (\d+)$/,kind:1,message:1,file:2,line:3}),this.add("jshint",{regexp:/^(.*):\s+line\s+(\d+),\s+col\s+(\d+),\s(.+?)(?:\s+\((\w)(\d+)\))?$/,kind:1,file:1,line:2,character:3,message:4,severity:5,code:6}),this.add("jshint-stylish",[{regexp:/^(.+)$/,kind:1,file:1},{regexp:/^\s+line\s+(\d+)\s+col\s+(\d+)\s+(.+?)(?:\s+\((\w)(\d+)\))?$/,line:1,character:2,message:3,severity:4,code:5,loop:!0}]),this.add("eslint-compact",{regexp:/^(.+):\sline\s(\d+),\scol\s(\d+),\s(Error|Warning|Info)\s-\s(.+)\s\((.+)\)$/,file:1,kind:1,line:2,character:3,severity:4,message:5,code:6}),this.add("eslint-stylish",[{regexp:/^((?:[a-zA-Z]:)*[./\\]+.*?)$/,kind:1,file:1},{regexp:/^\s+(\d+):(\d+)\s+(error|warning|info)\s+(.+?)(?:\s\s+(.*))?$/,line:1,character:2,severity:3,message:4,code:5,loop:!0}]),this.add("go",{regexp:/^([^:]*: )?((.:)?[^:]*):(\d+)(:(\d+))?: (.*)$/,kind:1,file:2,line:4,character:6,message:7})}},so=new XS,QS=class extends vp{constructor(e){super(e)}parse(e){let t=this.createProblemMatcher(e);if(this.checkProblemMatcherValid(e,t))return this.addWatchingMatcher(e,t),t}checkProblemMatcherValid(e,t){return t?t.pattern?t.owner?Zt(t.fileLocation)?(this.error(c("ProblemMatcherParser.noFileLocation",`Error: the description doesn't define a file location:
{0}
`,JSON.stringify(e,null,4))),!1):!0:(this.error(c("ProblemMatcherParser.noOwner",`Error: the description doesn't define an owner:
{0}
`,JSON.stringify(e,null,4))),!1):(this.error(c("ProblemMatcherParser.noProblemPattern",`Error: the description doesn't define a valid problem pattern:
{0}
`,JSON.stringify(e,null,4))),!1):(this.error(c("ProblemMatcherParser.noProblemMatcher",`Error: the description can't be converted into a problem matcher:
{0}
`,JSON.stringify(e,null,4))),!1)}createProblemMatcher(e){let t=null,n=Oe(e.owner)?e.owner:dt(),i=Oe(e.source)?e.source:void 0,o=Oe(e.applyTo)?Nf.fromString(e.applyTo):0;o||(o=0);let s,a,l;if(Zt(e.fileLocation))s=1,a="${workspaceFolder}";else if(Oe(e.fileLocation))l=zd.fromString(e.fileLocation),l&&(s=l,l===1||l===3?a="${workspaceFolder}":l===4&&(a={include:["${workspaceFolder}"]}));else if(Fv(e.fileLocation)){let p=e.fileLocation;p.length>0&&(l=zd.fromString(p[0]),p.length===1&&l===2?s=l:p.length===2&&(l===1||l===3)&&p[1]&&(s=l,a=p[1]))}else Array.isArray(e.fileLocation)&&zd.fromString(e.fileLocation[0])===4&&(s=4,a=e.fileLocation[1]??{include:["${workspaceFolder}"]});let d=e.pattern?this.createProblemPattern(e.pattern):void 0,u=e.severity?St.fromValue(e.severity):void 0;if(u===St.Ignore&&(this.info(c("ProblemMatcherParser.unknownSeverity",`Info: unknown severity {0}. Valid values are error, warning and info.
`,e.severity)),u=St.Error),Oe(e.base)){let p=e.base;if(p.length>1&&p[0]==="$"){let h=YM.get(p.substring(1));h&&(t=_t(h),e.owner!==void 0&&n!==void 0&&(t.owner=n),e.source!==void 0&&i!==void 0&&(t.source=i),e.fileLocation!==void 0&&s!==void 0&&(t.fileLocation=s,t.filePrefix=a),e.pattern!==void 0&&d!==void 0&&d!==null&&(t.pattern=d),e.severity!==void 0&&u!==void 0&&(t.severity=u),e.applyTo!==void 0&&o!==void 0&&(t.applyTo=o))}}else s&&d&&(t={owner:n,applyTo:o,fileLocation:s,pattern:d},i&&(t.source=i),a&&(t.filePrefix=a),u&&(t.severity=u));return Hs.isNamedProblemMatcher(e)&&(t.name=e.name,t.label=Oe(e.label)?e.label:e.name),t}createProblemPattern(e){if(Oe(e)){let t=e;if(t.length>1&&t[0]==="$"){let n=so.get(t.substring(1));return n||this.error(c("ProblemMatcherParser.noDefinedPatter","Error: the pattern with the identifier {0} doesn't exist.",t)),n}else t.length===0?this.error(c("ProblemMatcherParser.noIdentifier","Error: the pattern property refers to an empty identifier.")):this.error(c("ProblemMatcherParser.noValidIdentifier","Error: the pattern property {0} is not a valid pattern variable name.",t))}else if(e){let t=new Lf(this.problemReporter);return Array.isArray(e),t.parse(e)}return null}addWatchingMatcher(e,t){let n=this.createRegularExpression(e.watchedTaskBeginsRegExp),i=this.createRegularExpression(e.watchedTaskEndsRegExp);if(n&&i){t.watching={activeOnStart:!1,beginsPattern:{regexp:n},endsPattern:{regexp:i}};return}let o=e.background||e.watching;if(Bt(o))return;let s=this.createWatchingPattern(o.beginsPattern),a=this.createWatchingPattern(o.endsPattern);if(s&&a){t.watching={activeOnStart:LT(o.activeOnStart)?o.activeOnStart:!1,beginsPattern:s,endsPattern:a};return}(s||a)&&this.error(c("ProblemMatcherParser.problemPattern.watchingMatcher","A problem matcher must define both a begin pattern and an end pattern for watching."))}createWatchingPattern(e){if(Bt(e))return null;let t,n;return Oe(e)?t=this.createRegularExpression(e):(t=this.createRegularExpression(e.regexp),Gn(e.file)&&(n=e.file)),t?n?{regexp:t,file:n}:{regexp:t,file:1}:null}createRegularExpression(e){let t=null;if(!e)return t;try{t=new RegExp(e)}catch{this.error(c("ProblemMatcherParser.invalidRegexp",`Error: The string {0} is not a valid regular expression.
`,e))}return t}},QM=zo.registerExtensionPoint({extensionPoint:"problemMatchers",deps:[R_],jsonSchema:{description:c("ProblemMatcherExtPoint","Contributes problem matchers"),type:"array",items:Af.NamedProblemMatcher}}),YS=class{matchers;readyPromise;_onMatchersChanged=new E;onMatcherChanged=this._onMatchersChanged.event;constructor(){this.matchers=Object.create(null),this.fillDefaults(),this.readyPromise=new Promise((e,t)=>{QM.setHandler((n,i)=>{try{i.removed.forEach(s=>{let a=s.value;for(let l of a)this.matchers[l.name]&&delete this.matchers[l.name]}),i.added.forEach(s=>{let a=s.value,l=new QS(new Of(s.collector));for(let d of a){let u=l.parse(d);u&&XM(u)&&this.add(u)}}),(i.removed.length>0||i.added.length>0)&&this._onMatchersChanged.fire()}catch{}let o=this.get("tsc-watch");o&&(o.tscWatch=!0),e(void 0)})})}onReady(){return so.onReady(),this.readyPromise}add(e){this.matchers[e.name]=e}get(e){return this.matchers[e]}keys(){return Object.keys(this.matchers)}fillDefaults(){this.add({name:"msCompile",label:c("msCompile","Microsoft compiler problems"),owner:"msCompile",source:"cpp",applyTo:0,fileLocation:2,pattern:so.get("msCompile")}),this.add({name:"lessCompile",label:c("lessCompile","Less problems"),deprecated:!0,owner:"lessCompile",source:"less",applyTo:0,fileLocation:2,pattern:so.get("lessCompile"),severity:St.Error}),this.add({name:"gulp-tsc",label:c("gulp-tsc","Gulp TSC Problems"),owner:"typescript",source:"ts",applyTo:2,fileLocation:1,filePrefix:"${workspaceFolder}",pattern:so.get("gulp-tsc")}),this.add({name:"jshint",label:c("jshint","JSHint problems"),owner:"jshint",source:"jshint",applyTo:0,fileLocation:2,pattern:so.get("jshint")}),this.add({name:"jshint-stylish",label:c("jshint-stylish","JSHint stylish problems"),owner:"jshint",source:"jshint",applyTo:0,fileLocation:2,pattern:so.get("jshint-stylish")}),this.add({name:"eslint-compact",label:c("eslint-compact","ESLint compact problems"),owner:"eslint",source:"eslint",applyTo:0,fileLocation:2,filePrefix:"${workspaceFolder}",pattern:so.get("eslint-compact")}),this.add({name:"eslint-stylish",label:c("eslint-stylish","ESLint stylish problems"),owner:"eslint",source:"eslint",applyTo:0,fileLocation:2,pattern:so.get("eslint-stylish")}),this.add({name:"go",label:c("go","Go problems"),owner:"go",source:"go",applyTo:0,fileLocation:1,filePrefix:"${workspaceFolder}",pattern:so.get("go")})}},YM=new YS;var JM={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:c("TaskDefinition.description","The actual task type. Please note that types starting with a '$' are reserved for internal usage.")},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:c("TaskDefinition.properties","Additional properties of the task type"),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:c("TaskDefinition.when","Condition which must be true to enable this type of task. Consider using `shellExecutionSupported`, `processExecutionSupported`, and `customExecutionSupported` as appropriate for this task definition. See the [API documentation](https://code.visualstudio.com/api/extension-guides/task-provider#when-clause) for more information."),default:""}}},P_;(e=>{function r(t,n,i){if(!t)return;let o=Oe(t.type)?t.type:void 0;if(!o||o.length===0){i.error(c("TaskTypeConfiguration.noType","The task type configuration is missing the required 'taskType' property"));return}let s=[];if(Array.isArray(t.required))for(let a of t.required)Oe(a)&&s.push(a);return{extensionId:n.value,taskType:o,required:s,properties:t.properties?_t(t.properties):{},when:t.when?vt.deserialize(t.when):void 0}}e.from=r})(P_||={});var ZM=zo.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(r,e)=>{for(let t of r)t.type&&e.push(`onTaskType:${t.type}`)},jsonSchema:{description:c("TaskDefinitionExtPoint","Contributes task kinds"),type:"array",items:JM}}),JS=class{taskTypes;readyPromise;_schema;_onDefinitionsChanged=new E;onDefinitionsChanged=this._onDefinitionsChanged.event;constructor(){this.taskTypes=Object.create(null),this.readyPromise=new Promise((e,t)=>{ZM.setHandler((n,i)=>{this._schema=void 0;try{for(let o of i.removed){let s=o.value;for(let a of s)this.taskTypes&&a.type&&this.taskTypes[a.type]&&delete this.taskTypes[a.type]}for(let o of i.added){let s=o.value;for(let a of s){let l=P_.from(a,o.description.identifier,o.collector);l&&(this.taskTypes[l.taskType]=l)}}(i.removed.length>0||i.added.length>0)&&this._onDefinitionsChanged.fire()}catch{}e(void 0)})})}onReady(){return this.readyPromise}get(e){return this.taskTypes[e]}all(){return Object.keys(this.taskTypes).map(e=>this.taskTypes[e])}getJsonSchema(){if(this._schema===void 0){let e=[];for(let t of this.all()){let n={type:"object",additionalProperties:!1};t.required.length>0&&(n.required=t.required.slice(0)),t.properties!==void 0?n.properties=_t(t.properties):n.properties=Object.create(null),n.properties.type={type:"string",enum:[t.taskType]},e.push(n)}this._schema={oneOf:e}}return this._schema}},L_=new JS;var B8e=new V("taskRunning",!1,c("tasks.taskRunningContext","Whether a task is currently running.")),U8e=ii("tasksCategory","Tasks"),eC=(n=>(n[n.Escape=1]="Escape",n[n.Strong=2]="Strong",n[n.Weak=3]="Weak",n))(eC||{});(e=>{function r(t){if(!t)return 2;switch(t.toLowerCase()){case"escape":return 1;case"strong":return 2;case"weak":return 3;default:return 2}}e.from=r})(eC||={});var eN;(e=>e.defaults={cwd:"${workspaceFolder}"})(eN||={});var tC=(n=>(n[n.Always=1]="Always",n[n.Silent=2]="Silent",n[n.Never=3]="Never",n))(tC||{});(e=>{function r(t){switch(t.toLowerCase()){case"always":return 1;case"silent":return 2;case"never":return 3;default:return 1}}e.fromString=r})(tC||={});var nC=(n=>(n[n.Never=1]="Never",n[n.OnProblem=2]="OnProblem",n[n.Always=3]="Always",n))(nC||{});(e=>{function r(t){switch(t.toLowerCase()){case"always":return 3;case"never":return 1;case"onproblem":return 2;default:return 2}}e.fromString=r})(nC||={});var iC=(n=>(n[n.Shared=1]="Shared",n[n.Dedicated=2]="Dedicated",n[n.New=3]="New",n))(iC||{});(e=>{function r(t){switch(t.toLowerCase()){case"shared":return 1;case"dedicated":return 2;case"new":return 3;default:return 1}}e.fromString=r})(iC||={});var tN;(e=>e.defaults={echo:!0,reveal:1,revealProblems:1,focus:!1,panel:1,showReuseMessage:!0,clear:!1})(tN||={});var rC=(n=>(n[n.Shell=1]="Shell",n[n.Process=2]="Process",n[n.CustomExecution=3]="CustomExecution",n))(rC||{});(t=>{function r(n){switch(n.toLowerCase()){case"shell":return 1;case"process":return 2;case"customExecution":return 3;default:return 2}}t.fromString=r;function e(n){switch(n){case 1:return"shell";case 2:return"process";case 3:return"customExecution";default:return"process"}}t.toString=e})(rC||={});var nN;(e=>{function r(t){return Oe(t)?t:t.value}e.value=r})(nN||={});var iN;(s=>{s.Clean={_id:"clean",isDefault:!1},s.Build={_id:"build",isDefault:!1},s.Rebuild={_id:"rebuild",isDefault:!1},s.Test={_id:"test",isDefault:!1};function i(a){return a===s.Clean._id||a===s.Build._id||a===s.Rebuild._id||a===s.Test._id}s.is=i;function o(a){if(a!==void 0)return Oe(a)?i(a)?{_id:a,isDefault:!1}:void 0:a}s.from=o})(iN||={});var rN;(s=>{s.Workspace="workspace",s.Extension="extension",s.InMemory="inMemory",s.WorkspaceFile="workspaceFile",s.User="user";function o(a){switch(a){case s.User:return 2;case s.WorkspaceFile:return 5;default:return 6}}s.toConfigurationTarget=o})(rN||={});var oN;(e=>e.defaults={reevaluateOnRerun:!0,runOn:1,instanceLimit:1})(oN||={});var oC=(t=>(t[t.Process=1]="Process",t[t.Terminal=2]="Terminal",t))(oC||{});(e=>e._default=2)(oC||={});var sN;(a=>{function r(l){return{taskId:l._id,taskName:l.configurationProperties.name,runType:l.configurationProperties.isBackground?"background":"singleRun",group:l.configurationProperties.group,__task:l}}function e(l,d,u){return{...r(l),kind:"start",terminalId:d,resolvedVariables:u}}a.start=e;function t(l,d,u){return{...r(l),kind:"processStarted",terminalId:d,processId:u}}a.processStarted=t;function n(l,d,u){return{...r(l),kind:"processEnded",terminalId:d,exitCode:u}}a.processEnded=n;function i(l,d,u){return{...r(l),kind:"terminated",exitReason:u,terminalId:d}}a.terminated=i;function o(l,d,u){return{...r(d),kind:l,terminalId:u}}a.general=o;function s(){return{kind:"changed"}}a.changed=s})(sN||={});var ZS;(t=>{function r(n){let i=Object.keys(n).sort(),o="";for(let s of i){let a=n[s];a instanceof Object?a=r(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),o+=s+","+a+","}return o}function e(n){let o={_key:r(n),type:n.taskType};return Object.assign(o,n),o}t.create=e})(ZS||={});var aN;(e=>{function r(t,n){let i=L_.get(t.type);if(i===void 0){let l=_t(t);return delete l._key,ZS.create(l)}let o=Object.create(null);o.type=i.taskType;let s=new Set;i.required.forEach(l=>s.add(l));let a=i.properties;for(let l of Object.keys(a)){let d=t[l];if(d!=null)o[l]=d;else if(s.has(l)){let u=a[l];if(u.default!==void 0)o[l]=_t(u.default);else switch(u.type){case"boolean":o[l]=!1;break;case"number":case"integer":o[l]=0;break;case"string":o[l]="";break;default:n.error(c("TaskDefinition.missingRequiredProperty","Error: the task identifier '{0}' is missing the required property '{1}'. The task identifier will be ignored.",JSON.stringify(t,void 0,0),l));return}}}return ZS.create(o)}e.createTaskIdentifier=r})(aN||={});var z8e=Symbol("unset");var Za=class r{constructor(e,t=e.length){this.path=e;this.viewEnd=t;if(e.length===0||t<1)throw new Error("cannot create test with empty path")}stringifed;static fromExtHostTestItem(e,t,n=e.parent){if(e._isRoot)return new r([t]);let i=[e.id];for(let o=n;o&&o.id!==t;o=o.parent)i.push(o.id);return i.push(t),new r(i.reverse())}static isRoot(e){return!e.includes("\0")}static root(e){let t=e.indexOf("\0");return t===-1?e:e.slice(0,t)}static fromString(e){return new r(e.split("\0"))}static join(e,t){return new r([...e.path,t])}static joinToString(e,t){return e.toString()+"\0"+t}static parentId(e){let t=e.lastIndexOf("\0");return t===-1?void 0:e.slice(0,t)}static localId(e){let t=e.lastIndexOf("\0");return t===-1?e:e.slice(t+1)}static isChild(e,t){return t[e.length]==="\0"&&t.startsWith(e)}static compare(e,t){return e===t?0:r.isChild(e,t)?2:r.isChild(t,e)?3:1}static getLengthOfCommonPrefix(e,t){if(e===0)return 0;let n=0;for(;n<e-1;){for(let i=1;i<e;i++){let o=t(i-1),s=t(i);if(o.path[n]!==s.path[n])return n}n++}return n}get rootId(){return new r(this.path,1)}get parentId(){return this.viewEnd>1?new r(this.path,this.viewEnd-1):void 0}get localId(){return this.path[this.viewEnd-1]}get controllerId(){return this.path[0]}get isRoot(){return this.viewEnd===1}*idsFromRoot(){for(let e=1;e<=this.viewEnd;e++)yield new r(this.path,e)}*idsToRoot(){for(let e=this.viewEnd;e>0;e--)yield new r(this.path,e)}compare(e){if(typeof e=="string")return r.compare(this.toString(),e);for(let t=0;t<e.viewEnd&&t<this.viewEnd;t++)if(e.path[t]!==this.path[t])return 1;return e.viewEnd>this.viewEnd?2:e.viewEnd<this.viewEnd?3:0}toJSON(){return this.toString()}toString(){if(!this.stringifed){this.stringifed=this.path[0];for(let e=1;e<this.viewEnd;e++)this.stringifed+="\0",this.stringifed+=this.path[e]}return this.stringifed}};var Ip;(t=>(t.serialize=n=>({range:n.range.toJSON(),uri:n.uri.toJSON()}),t.deserialize=(n,i)=>({range:$.lift(i.range),uri:n.asCanonicalUri(L.revive(i.uri))})))(Ip||={});var sC;(t=>(t.serialize=n=>({label:n.label,uri:n.uri?.toJSON(),position:n.position?.toJSON()}),t.deserialize=(n,i)=>({label:i.label,uri:i.uri?n.asCanonicalUri(L.revive(i.uri)):void 0,position:i.position?Se.lift(i.position):void 0})))(sC||={});var aC;(t=>(t.serialize=n=>({message:n.message,type:0,expected:n.expected,actual:n.actual,contextValue:n.contextValue,location:n.location&&Ip.serialize(n.location),stackTrace:n.stackTrace?.map(sC.serialize)}),t.deserialize=(n,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&Ip.deserialize(n,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(o=>sC.deserialize(n,o))})))(aC||={});var O_=(r,e)=>`${e?"s":"e"}${r}`,lC;(t=>(t.serialize=n=>({message:n.message,type:1,offset:n.offset,length:n.length,location:n.location&&Ip.serialize(n.location)}),t.deserialize=(n,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&Ip.deserialize(n,i.location)})))(lC||={});var dC;(n=>(n.serialize=i=>i.type===0?aC.serialize(i):lC.serialize(i),n.deserialize=(i,o)=>o.type===0?aC.deserialize(i,o):lC.deserialize(i,o),n.isDiffable=i=>i.type===0&&i.actual!==void 0&&i.expected!==void 0))(dC||={});var Ff;(n=>(n.serializeWithoutMessages=i=>({state:i.state,duration:i.duration,messages:[]}),n.serialize=i=>({state:i.state,duration:i.duration,messages:i.messages.map(dC.serialize)}),n.deserialize=(i,o)=>({state:o.state,duration:o.duration,messages:o.messages.map(s=>dC.deserialize(i,s))})))(Ff||={});var cC;(t=>(t.serialize=n=>({extId:n.extId,label:n.label,tags:n.tags,busy:n.busy,children:void 0,uri:n.uri?.toJSON(),range:n.range?.toJSON()||null,description:n.description,error:n.error,sortText:n.sortText}),t.deserialize=(n,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?n.asCanonicalUri(L.revive(i.uri)):void 0,range:i.range?$.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})))(cC||={});var Hd;(t=>(t.serialize=n=>({expand:n.expand,item:cC.serialize(n.item)}),t.deserialize=(n,i)=>({controllerId:Za.root(i.item.extId),expand:i.expand,item:cC.deserialize(n,i.item)})))(Hd||={});var uC;(t=>(t.serialize=n=>{let i;return n.item&&(i={},n.item.label!==void 0&&(i.label=n.item.label),n.item.tags!==void 0&&(i.tags=n.item.tags),n.item.busy!==void 0&&(i.busy=n.item.busy),n.item.uri!==void 0&&(i.uri=n.item.uri?.toJSON()),n.item.range!==void 0&&(i.range=n.item.range?.toJSON()),n.item.description!==void 0&&(i.description=n.item.description),n.item.error!==void 0&&(i.error=n.item.error),n.item.sortText!==void 0&&(i.sortText=n.item.sortText)),{extId:n.extId,expand:n.expand,item:i}},t.deserialize=n=>{let i;return n.item&&(i={},n.item.label!==void 0&&(i.label=n.item.label),n.item.tags!==void 0&&(i.tags=n.item.tags),n.item.busy!==void 0&&(i.busy=n.item.busy),n.item.range!==void 0&&(i.range=n.item.range?$.lift(n.item.range):null),n.item.description!==void 0&&(i.description=n.item.description),n.item.error!==void 0&&(i.error=n.item.error),n.item.sortText!==void 0&&(i.sortText=n.item.sortText)),{extId:n.extId,expand:n.expand,item:i}}))(uC||={});var Bf;(n=>(n.serializeWithoutMessages=i=>({...Hd.serialize(i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(Ff.serializeWithoutMessages)}),n.serialize=i=>({...Hd.serialize(i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(Ff.serialize)}),n.deserialize=(i,o)=>({...Hd.deserialize(i,o),ownComputedState:o.ownComputedState,computedState:o.computedState,tasks:o.tasks.map(s=>Ff.deserialize(i,s)),retired:!0})))(Bf||={});var gC;(t=>(t.empty=()=>({covered:0,total:0}),t.sum=(n,i)=>{n.covered+=i.covered,n.total+=i.total}))(gC||={});var lN;(n=>(n.serialize=i=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:i.uri.toJSON()}),n.deserialize=(i,o)=>({id:o.id,statement:o.statement,branch:o.branch,declaration:o.declaration,testIds:o.testIds,uri:i.asCanonicalUri(L.revive(o.uri))}),n.empty=(i,o)=>({id:i,uri:o,statement:gC.empty()})))(lN||={});function fC(r){return{...r,location:r.location?.toJSON()}}function bC(r){return r.location=r.location?Se.isIPosition(r.location)?Se.lift(r.location):$.lift(r.location):void 0,r}var dN;(t=>(t.serialize=n=>n.type===0?hC.serialize(n):mC.serialize(n),t.deserialize=n=>n.type===0?hC.deserialize(n):mC.deserialize(n)))(dN||={});var pC;(t=>(t.serialize=fC,t.deserialize=bC))(pC||={});var hC;(t=>(t.serialize=fC,t.deserialize=bC))(hC||={});var mC;(t=>(t.serialize=n=>({...fC(n),branches:n.branches?.map(pC.serialize)}),t.deserialize=n=>({...bC(n),branches:n.branches?.map(pC.deserialize)})))(mC||={});var cN;(t=>(t.deserialize=(n,i)=>i.op===0?{op:i.op,item:Hd.deserialize(n,i.item)}:i.op===1?{op:i.op,item:uC.deserialize(i.item)}:i.op===2?{op:i.op,uri:n.asCanonicalUri(L.revive(i.uri)),docv:i.docv}:i,t.serialize=n=>n.op===0?{op:n.op,item:Hd.serialize(n.item)}:n.op===1?{op:n.op,item:uC.serialize(n.item)}:n))(cN||={});var Ai={2:6,6:5,4:4,1:3,3:2,0:0,5:1};var o3e=ak(Ai,(r,e)=>({statusNode:!0,state:Number(e),priority:r})),uN=(r,e)=>Ai[e]-Ai[r],Uf=(...r)=>{switch(r.length){case 0:return 0;case 1:return r[0];case 2:return Ai[r[0]]>Ai[r[1]]?r[0]:r[1];default:{let e=r[0];for(let t=1;t<r.length;t++)Ai[e]<Ai[r[t]]&&(e=r[t]);return e}}},M_=Object.keys(Ai).map(r=>Number(r)).sort(uN),vC={3:0,5:1,4:2,6:3},Wf=()=>new Uint32Array(M_.length);var pN=r=>"getOwnDuration"in r,IC=(r,e,t=!1)=>{let n=r.getCurrentComputedState(e);if(n===void 0||t){n=r.getOwnState(e)??0;let i=0,o=Wf();for(let s of r.getChildren(e)){let a=IC(r,s);i++,o[a]++,n=a===5&&n===0?5:Uf(n,a)}i>hN&&F_.set(e,o),r.setComputedState(e,n)}return n},N_=(r,e,t=!1)=>{let n=r.getCurrentComputedDuration(e);if(n===void 0||t){let i=r.getOwnDuration(e);if(i!==void 0)n=i;else{n=void 0;for(let o of r.getChildren(e)){let s=N_(r,o);s!==void 0&&(n=(n||0)+s)}}r.setComputedDuration(e,n)}return n},hN=64,F_=new WeakMap,B_=(r,e,t,n=!0)=>{let i=r.getCurrentComputedState(e),o=Ai[i],s=t??IC(r,e,!0),a=Ai[s],l=new Set;if(a!==o){r.setComputedState(e,s),l.add(e);let d=i,u=s;for(let p of r.getParents(e)){let h=F_.get(p);h&&(h[d]--,h[u]++);let g=r.getCurrentComputedState(p);if(a>o){if(g!==void 0&&Ai[g]>=a||h&&h[u]>1)break;r.setComputedState(p,s),l.add(p)}else{if(g===void 0||Ai[g]>o||h&&h[d]>0)break;u=IC(r,p,!0),r.setComputedState(p,u),l.add(p)}d=g}}if(pN(r)&&n)for(let d of yt.concat(yt.single(e),r.getParents(e))){let u=r.getCurrentComputedDuration(d),p=N_(r,d,!0);if(u===p)break;r.setComputedDuration(d,p),l.add(d)}return l};var d6e={buffers:[],length:0,onDidWriteData:Q.None,endPromise:Promise.resolve(),getRange:()=>Ne.alloc(0),getRangeIter:()=>[]},yC=class{writeDataEmitter=new E;endDeferred=new yn;offset=0;onDidWriteData=this.writeDataEmitter.event;endPromise=this.endDeferred.p;buffers=[];get length(){return this.offset}getRange(e,t){let n=Ne.alloc(t),i=0;for(let o of this.getRangeIter(e,t))n.buffer.set(o.buffer,i),i+=o.byteLength;return i<t?n.slice(0,i):n}*getRangeIter(e,t){let n=0,i=0;for(let o of this.buffers){if(i+o.byteLength<=e){i+=o.byteLength;continue}let s=Math.max(0,e-i),a=Math.min(o.byteLength,s+t-n);if(yield o.slice(s,a),n+=a-s,i+=o.byteLength,n===t)break}}append(e,t){let n=this.offset,i=e.byteLength;if(t===void 0)return this.push(e),{offset:n,length:i};let o;(p=>(p[p.CR=13]="CR",p[p.LF=10]="LF"))(o||={});let s=Ne.fromString(U_(t,!0)),a=Ne.fromString(U_(t,!1));i+=s.byteLength+a.byteLength,this.push(s);let l=e.byteLength;for(;l>0;l--){let d=e.buffer[l-1];if(d!==13&&d!==10)break}return this.push(e.slice(0,l)),this.push(a),this.push(e.slice(l)),{offset:n,length:i}}push(e){e.byteLength!==0&&(this.buffers.push(e),this.writeDataEmitter.fire(e),this.offset+=e.byteLength)}end(){this.endDeferred.complete()}};var U_=(r,e)=>`\x1B]633;SetMark;Id=${O_(r,e)};Hidden\x07`,mN=(r,e,t)=>({controllerId:r,expand:0,item:{...e},children:[],tasks:[],ownComputedState:0,computedState:0});var Vf=class extends O{constructor(t,n,i,o){super();this.id=t;this.persist=n;this.request=i;this.telemetry=o}completeEmitter=this._register(new E);newTaskEmitter=this._register(new E);endTaskEmitter=this._register(new E);changeEmitter=this._register(new E);testById=new Map;testMarkerCounter=0;_completedAt;startedAt=Date.now();onChange=this.changeEmitter.event;onComplete=this.completeEmitter.event;onNewTask=this.newTaskEmitter.event;onEndTask=this.endTaskEmitter.event;tasks=[];name=c("runFinished","Test run at {0}",new Date().toLocaleString(Ei));get completedAt(){return this._completedAt}counts=Wf();get tests(){return this.testById.values()}getTestById(t){return this.testById.get(t)?.item}computedStateAccessor={getOwnState:t=>t.ownComputedState,getCurrentComputedState:t=>t.computedState,setComputedState:(t,n)=>t.computedState=n,getChildren:t=>t.children,getParents:t=>{let{testById:n}=this;return function*(){let i=Za.fromString(t.item.extId).parentId;if(i)for(let o of i.idsToRoot())yield n.get(o.toString())}()}};getStateById(t){return this.testById.get(t)}appendOutput(t,n,i,o){let s=t.byteLength>100?t.slice(0,100).toString()+"\u2026":t.toString(),a;(o||i)&&(a=this.testMarkerCounter++);let l=this.mustGetTaskIndex(n),d=this.tasks[l],{offset:u,length:p}=d.output.append(t,a),h={location:i,message:s,offset:u,length:p,marker:a,type:1},g=o&&this.testById.get(o);g?(g.tasks[l].messages.push(h),this.changeEmitter.fire({item:g,result:this,reason:2,message:h})):d.otherMessages.push(h)}addTask(t){this.tasks.push({...t,coverage:Di(this,void 0),otherMessages:[],output:new yC});for(let n of this.tests)n.tasks.push({duration:void 0,messages:[],state:0});this.newTaskEmitter.fire(this.tasks.length-1)}addTestChainToRun(t,n){let i=this.testById.get(n[0].extId);i||(i=this.addTestToRun(t,n[0],null));for(let o=1;o<n.length;o++)i=this.addTestToRun(t,n[o],i.item.extId)}updateState(t,n,i,o){let s=this.testById.get(t);if(!s)return;let a=this.mustGetTaskIndex(n),l=vC[s.tasks[a].state],d=vC[i];l!==void 0&&(d===void 0||d<l)||this.fireUpdateAndRefresh(s,a,i,o)}appendMessage(t,n,i){let o=this.testById.get(t);o&&(o.tasks[this.mustGetTaskIndex(n)].messages.push(i),this.changeEmitter.fire({item:o,result:this,reason:2,message:i}))}markTaskComplete(t){let n=this.mustGetTaskIndex(t),i=this.tasks[n];i.running=!1,i.output.end(),this.setAllToState(0,t,o=>o.state===1||o.state===2),this.endTaskEmitter.fire(n)}markComplete(){if(this._completedAt!==void 0)throw new Error("cannot complete a test result multiple times");for(let t of this.tasks)t.running&&this.markTaskComplete(t.id);this._completedAt=Date.now(),this.completeEmitter.fire(),this.telemetry.publicLog2("test.outcomes",{failures:this.counts[6]+this.counts[4],passes:this.counts[3],controller:this.request.targets.map(t=>t.controllerId).join(",")})}markRetired(t){for(let[n,i]of this.testById)!i.retired&&(!t||t.hasKeyOrParent(Za.fromString(n).path))&&(i.retired=!0,this.changeEmitter.fire({reason:0,item:i,result:this}))}toJSON(){return this.completedAt&&this.persist?this.doSerialize.value:void 0}toJSONWithMessages(){return this.completedAt&&this.persist?this.doSerializeWithMessages.value:void 0}setAllToState(t,n,i){let o=this.mustGetTaskIndex(n);for(let s of this.testById.values())i(s.tasks[o],s)&&this.fireUpdateAndRefresh(s,o,t)}fireUpdateAndRefresh(t,n,i,o){let s=t.ownComputedState,a=t.ownDuration,l={item:t,result:this,reason:1,previousState:s,previousOwnDuration:a};t.tasks[n].state=i,o!==void 0&&(t.tasks[n].duration=o,t.ownDuration=Math.max(t.ownDuration||0,o));let d=Uf(...t.tasks.map(u=>u.state));if(d===s){o!==a&&this.changeEmitter.fire(l);return}t.ownComputedState=d,this.counts[s]--,this.counts[d]++,B_(this.computedStateAccessor,t).forEach(u=>this.changeEmitter.fire(u===t?l:{item:u,result:this,reason:0}))}addTestToRun(t,n,i){let o=mN(t,n,i);if(this.testById.set(n.extId,o),this.counts[0]++,i&&this.testById.get(i)?.children.push(o),this.tasks.length)for(let s=0;s<this.tasks.length;s++)o.tasks.push({duration:void 0,messages:[],state:0});return o}mustGetTaskIndex(t){let n=this.tasks.findIndex(i=>i.id===t);if(n===-1)throw new Error(`Unknown task ${t} in updateState`);return n}doSerialize=new Ot(()=>({id:this.id,completedAt:this.completedAt,tasks:this.tasks.map(t=>({id:t.id,name:t.name,ctrlId:t.ctrlId,hasCoverage:!!t.coverage.get()})),name:this.name,request:this.request,items:[...this.testById.values()].map(Bf.serializeWithoutMessages)}));doSerializeWithMessages=new Ot(()=>({id:this.id,completedAt:this.completedAt,tasks:this.tasks.map(t=>({id:t.id,name:t.name,ctrlId:t.ctrlId,hasCoverage:!!t.coverage.get()})),name:this.name,request:this.request,items:[...this.testById.values()].map(Bf.serialize)}))};Vf=T([S(3,us)],Vf);var y_=new V("debugType",void 0,{type:"string",description:c("debugType","Debug type of the active debug session. For example 'python'.")}),dKe=new V("debugConfigurationType",void 0,{type:"string",description:c("debugConfigurationType","Debug type of the selected launch configuration. For example 'python'.")}),cKe=new V("debugState","inactive",{type:"string",description:c("debugState","State that the focused debug session is in. One of the following: 'inactive', 'initializing', 'stopped' or 'running'.")}),gN="debugUx",uKe=new V(gN,"default",{type:"string",description:c("debugUX","Debug UX state. When there are no debug configurations it is 'simple', otherwise 'default'. Used to decide when to show welcome views in the debug viewlet.")}),pKe=new V("hasDebugged",!1,{type:"boolean",description:c("hasDebugged","True when a debug session has been started at least once, false otherwise.")}),hKe=new V("inDebugMode",!1,{type:"boolean",description:c("inDebugMode","True when debugging, false otherwise.")}),mKe=new V("inDebugRepl",!1,{type:"boolean",description:c("inDebugRepl","True when focus is in the debug console, false otherwise.")}),gKe=new V("breakpointWidgetVisible",!1,{type:"boolean",description:c("breakpointWidgetVisibile","True when breakpoint editor zone widget is visible, false otherwise.")}),fKe=new V("inBreakpointWidget",!1,{type:"boolean",description:c("inBreakpointWidget","True when focus is in the breakpoint editor zone widget, false otherwise.")}),bKe=new V("breakpointsFocused",!0,{type:"boolean",description:c("breakpointsFocused","True when the BREAKPOINTS view is focused, false otherwise.")}),vKe=new V("watchExpressionsFocused",!0,{type:"boolean",description:c("watchExpressionsFocused","True when the WATCH view is focused, false otherwise.")}),IKe=new V("watchExpressionsExist",!1,{type:"boolean",description:c("watchExpressionsExist","True when at least one watch expression exists, false otherwise.")}),yKe=new V("variablesFocused",!0,{type:"boolean",description:c("variablesFocused","True when the VARIABLES views is focused, false otherwise")}),xKe=new V("expressionSelected",!1,{type:"boolean",description:c("expressionSelected","True when an expression input box is open in either the WATCH or the VARIABLES view, false otherwise.")}),SKe=new V("breakpointInputFocused",!1,{type:"boolean",description:c("breakpointInputFocused","True when the input box has focus in the BREAKPOINTS view.")}),CKe=new V("callStackItemType",void 0,{type:"string",description:c("callStackItemType","Represents the item type of the focused element in the CALL STACK view. For example: 'session', 'thread', 'stackFrame'")}),EKe=new V("callStackSessionIsAttach",!1,{type:"boolean",description:c("callStackSessionIsAttach","True when the session in the CALL STACK view is attach, false otherwise. Used internally for inline menus in the CALL STACK view.")}),TKe=new V("callStackItemStopped",!1,{type:"boolean",description:c("callStackItemStopped","True when the focused item in the CALL STACK is stopped. Used internaly for inline menus in the CALL STACK view.")}),wKe=new V("callStackSessionHasOneThread",!1,{type:"boolean",description:c("callStackSessionHasOneThread","True when the focused session in the CALL STACK view has exactly one thread. Used internally for inline menus in the CALL STACK view.")}),kKe=new V("watchItemType",void 0,{type:"string",description:c("watchItemType","Represents the item type of the focused element in the WATCH view. For example: 'expression', 'variable'")}),x_=new V("canViewMemory",void 0,{type:"boolean",description:c("canViewMemory","Indicates whether the item in the view has an associated memory refrence.")}),DKe=new V("breakpointItemType",void 0,{type:"string",description:c("breakpointItemType","Represents the item type of the focused element in the BREAKPOINTS view. For example: 'breakpoint', 'exceptionBreakppint', 'functionBreakpoint', 'dataBreakpoint'")}),_Ke=new V("breakpointItemBytes",void 0,{type:"boolean",description:c("breakpointItemIsDataBytes","Whether the breakpoint item is a data breakpoint on a byte range.")}),RKe=new V("breakpointHasModes",!1,{type:"boolean",description:c("breakpointHasModes","Whether the breakpoint has multiple modes it can switch to.")}),PKe=new V("breakpointSupportsCondition",!1,{type:"boolean",description:c("breakpointSupportsCondition","True when the focused breakpoint supports conditions.")}),LKe=new V("loadedScriptsSupported",!1,{type:"boolean",description:c("loadedScriptsSupported","True when the focused sessions supports the LOADED SCRIPTS view")}),OKe=new V("loadedScriptsItemType",void 0,{type:"string",description:c("loadedScriptsItemType","Represents the item type of the focused element in the LOADED SCRIPTS view.")}),AKe=new V("focusedSessionIsAttach",!1,{type:"boolean",description:c("focusedSessionIsAttach","True when the focused session is 'attach'.")}),MKe=new V("focusedSessionIsNoDebug",!1,{type:"boolean",description:c("focusedSessionIsNoDebug","True when the focused session is run without debugging.")}),NKe=new V("stepBackSupported",!1,{type:"boolean",description:c("stepBackSupported","True when the focused session supports 'stepBack' requests.")}),FKe=new V("restartFrameSupported",!1,{type:"boolean",description:c("restartFrameSupported","True when the focused session supports 'restartFrame' requests.")}),BKe=new V("stackFrameSupportsRestart",!1,{type:"boolean",description:c("stackFrameSupportsRestart","True when the focused stack frame supports 'restartFrame'.")}),UKe=new V("jumpToCursorSupported",!1,{type:"boolean",description:c("jumpToCursorSupported","True when the focused session supports 'jumpToCursor' request.")}),WKe=new V("stepIntoTargetsSupported",!1,{type:"boolean",description:c("stepIntoTargetsSupported","True when the focused session supports 'stepIntoTargets' request.")}),VKe=new V("breakpointsExist",!1,{type:"boolean",description:c("breakpointsExist","True when at least one breakpoint exists.")}),zKe=new V("debuggersAvailable",!1,{type:"boolean",description:c("debuggersAvailable","True when there is at least one debug extensions active.")}),HKe=new V("debugExtensionAvailable",!0,{type:"boolean",description:c("debugExtensionsAvailable","True when there is at least one debug extension installed and enabled.")}),S_=new V("debugProtocolVariableMenuContext",void 0,{type:"string",description:c("debugProtocolVariableMenuContext","Represents the context the debug adapter sets on the focused variable in the VARIABLES view.")}),KKe=new V("debugSetVariableSupported",!1,{type:"boolean",description:c("debugSetVariableSupported","True when the focused session supports 'setVariable' request.")}),$Ke=new V("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:c("debugSetDataBreakpointAddressSupported","True when the focused session supports 'getBreakpointInfo' request on an address.")}),GKe=new V("debugSetExpressionSupported",!1,{type:"boolean",description:c("debugSetExpressionSupported","True when the focused session supports 'setExpression' request.")}),qKe=new V("breakWhenValueChangesSupported",!1,{type:"boolean",description:c("breakWhenValueChangesSupported","True when the focused session supports to break when value changes.")}),jKe=new V("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:c("breakWhenValueIsAccessedSupported","True when the focused breakpoint supports to break when value is accessed.")}),XKe=new V("breakWhenValueIsReadSupported",!1,{type:"boolean",description:c("breakWhenValueIsReadSupported","True when the focused breakpoint supports to break when value is read.")}),QKe=new V("terminateDebuggeeSupported",!1,{type:"boolean",description:c("terminateDebuggeeSupported","True when the focused session supports the terminate debuggee capability.")}),YKe=new V("suspendDebuggeeSupported",!1,{type:"boolean",description:c("suspendDebuggeeSupported","True when the focused session supports the suspend debuggee capability.")}),C_=new V("variableEvaluateNamePresent",!1,{type:"boolean",description:c("variableEvaluateNamePresent","True when the focused variable has an 'evalauteName' field set.")}),E_=new V("variableIsReadonly",!1,{type:"boolean",description:c("variableIsReadonly","True when the focused variable is read-only.")}),k_=new V("variableValue",!1,{type:"string",description:c("variableValue","Value of the variable, present for debug visualization clauses.")}),D_=new V("variableType",!1,{type:"string",description:c("variableType","Type of the variable, present for debug visualization clauses.")}),JKe=new V("variableInterfaces",!1,{type:"array",description:c("variableInterfaces","Any interfaces or contracts that the variable satisfies, present for debug visualization clauses.")}),__=new V("variableName",!1,{type:"string",description:c("variableName","Name of the variable, present for debug visualization clauses.")}),ZKe=new V("variableLanguage",!1,{type:"string",description:c("variableLanguage","Language of the variable source, present for debug visualization clauses.")}),e$e=new V("variableExtensionId",!1,{type:"string",description:c("variableExtensionId","Extension ID of the variable source, present for debug visualization clauses.")}),t$e=new V("exceptionWidgetVisible",!1,{type:"boolean",description:c("exceptionWidgetVisible","True when the exception widget is visible.")}),n$e=new V("multiSessionRepl",!1,{type:"boolean",description:c("multiSessionRepl","True when there is more than 1 debug console.")}),i$e=new V("multiSessionDebug",!1,{type:"boolean",description:c("multiSessionDebug","True when there is more than 1 active debug session.")}),r$e=new V("disassembleRequestSupported",!1,{type:"boolean",description:c("disassembleRequestSupported","True when the focused sessions supports disassemble request.")}),o$e=new V("disassemblyViewFocus",!1,{type:"boolean",description:c("disassemblyViewFocus","True when the Disassembly View is focused.")}),s$e=new V("languageSupportsDisassembleRequest",!1,{type:"boolean",description:c("languageSupportsDisassembleRequest","True when the language in the current editor supports disassemble request.")}),a$e=new V("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:c("focusedStackFrameHasInstructionReference","True when the focused stack frame has instruction pointer reference.")});var $S="debug",l$e={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:c("internalConsoleOptions","Controls when the internal Debug Console should open.")};var d$e=k("debugService");var fN;(t=>(t.deserialize=n=>n,t.serialize=n=>n))(fN||={});var bN;(t=>(t.deserialize=n=>({id:n.id,name:n.name,iconPath:n.iconPath&&{light:L.revive(n.iconPath.light),dark:L.revive(n.iconPath.dark)},iconClass:n.iconClass,visualization:n.visualization}),t.serialize=n=>n))(bN||={});var Ks=class extends O{constructor(t){super();this._rawOutput=t;this._alternativeOutputId=this._rawOutput.outputId}_onDidChangeData=this._register(new E);onDidChangeData=this._onDidChangeData.event;get outputs(){return this._rawOutput.outputs||[]}get metadata(){return this._rawOutput.metadata}get outputId(){return this._rawOutput.outputId}_alternativeOutputId;get alternativeOutputId(){return this._alternativeOutputId}_versionId=0;get versionId(){return this._versionId}replaceData(t){this.versionedBufferLengths={},this._rawOutput=t,this.optimizeOutputItems(),this._versionId=this._versionId+1,this._onDidChangeData.fire()}appendData(t){this.trackBufferLengths(),this._rawOutput.outputs.push(...t),this.optimizeOutputItems(),this._versionId=this._versionId+1,this._onDidChangeData.fire()}trackBufferLengths(){this.outputs.forEach(t=>{xC(t.mime)&&(this.versionedBufferLengths[t.mime]||(this.versionedBufferLengths[t.mime]={}),this.versionedBufferLengths[t.mime][this.versionId]=t.data.byteLength)})}versionedBufferLengths={};appendedSinceVersion(t,n){let i=this.versionedBufferLengths[n]?.[t],o=this.outputs.find(s=>s.mime===n);if(i&&o)return o.data.slice(i)}optimizeOutputItems(){if(this.outputs.length>1&&this.outputs.every(t=>xC(t.mime))){let t=new Map,n=[];this.outputs.forEach(i=>{let o;t.has(i.mime)?o=t.get(i.mime):(o=[],t.set(i.mime,o),n.push(i.mime)),o.push(i.data.buffer)}),this.outputs.length=0,n.forEach(i=>{let o=W_(t.get(i));this.outputs.push({mime:i,data:o.data}),o.didCompression&&(this.versionedBufferLengths={})})}}asDto(){return{metadata:this._rawOutput.metadata,outputs:this._rawOutput.outputs,outputId:this._rawOutput.outputId}}bumpVersion(){this._versionId=this._versionId+1}};function V_(r,e){let t=JSON.stringify(r,void 0,e.insertSpaces?e.tabSize||4:"	");return e.eol!==void 0?t.replace(/\r\n|\r|\n/g,e.eol):t}var yp=class r extends O{constructor(t,n,i,o,s,a,l,d,u,p,h,g,b=void 0){super();this.uri=t;this.handle=n;this._source=i;this._language=o;this._mime=s;this.cellKind=a;this.collapseState=p;this.transientOptions=h;this._languageService=g;this._languageDetectionService=b;this._outputs=l.map(f=>new Ks(f)),this._metadata=d??{},this._internalMetadata=u??{}}_onDidChangeOutputs=this._register(new E);onDidChangeOutputs=this._onDidChangeOutputs.event;_onDidChangeOutputItems=this._register(new E);onDidChangeOutputItems=this._onDidChangeOutputItems.event;_onDidChangeContent=this._register(new E);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeMetadata=this._register(new E);onDidChangeMetadata=this._onDidChangeMetadata.event;_onDidChangeInternalMetadata=this._register(new E);onDidChangeInternalMetadata=this._onDidChangeInternalMetadata.event;_onDidChangeLanguage=this._register(new E);onDidChangeLanguage=this._onDidChangeLanguage.event;_outputs;get outputs(){return this._outputs}_metadata;get metadata(){return this._metadata}set metadata(t){this._metadata=t,this._hash=null,this._onDidChangeMetadata.fire()}_internalMetadata;get internalMetadata(){return this._internalMetadata}set internalMetadata(t){let n=this._internalMetadata.lastRunSuccess!==t.lastRunSuccess;t={...t,runStartTimeAdjustment:vN(this._internalMetadata,t)},this._internalMetadata=t,this._hash=null,this._onDidChangeInternalMetadata.fire({lastRunSuccessChanged:n})}get language(){return this._language}set language(t){this._textModel&&this._textModel.getLanguageId()===this._languageService.getLanguageIdByLanguageName(t)&&this._textModel.getLanguageId()===this._languageService.getLanguageIdByLanguageName(this.language)||(this._hasLanguageSetExplicitly=!0,this._setLanguageInternal(t))}get mime(){return this._mime}set mime(t){this._mime!==t&&(this._mime=t,this._hash=null,this._onDidChangeContent.fire("mime"))}_textBuffer;get textBuffer(){if(this._textBuffer)return this._textBuffer;let t=new Ns;t.acceptChunk(this._source);let n=t.finish(!0),{textBuffer:i,disposable:o}=n.create(1);return this._textBuffer=i,this._register(o),this._register(this._textBuffer.onDidChangeContent(()=>{this._hash=null,this._textModel||this._onDidChangeContent.fire("content"),this.autoDetectLanguage()})),this._textBuffer}_textBufferHash=null;_hash=null;_versionId=1;_alternativeId=1;get alternativeId(){return this._alternativeId}_textModelDisposables=this._register(new le);_textModel=void 0;get textModel(){return this._textModel}set textModel(t){this._textModel!==t&&(this._textModelDisposables.clear(),this._textModel=t,this._textModel&&(this.setRegisteredLanguage(this._languageService,this._textModel.getLanguageId(),this.language),this._textModelDisposables.add(this._textModel.onDidChangeLanguage(n=>this.setRegisteredLanguage(this._languageService,n.newLanguage,this.language))),this._textModelDisposables.add(this._textModel.onWillDispose(()=>this.textModel=void 0)),this._textModelDisposables.add(this._textModel.onDidChangeContent(()=>{this._textModel&&(this._versionId=this._textModel.getVersionId(),this._alternativeId=this._textModel.getAlternativeVersionId()),this._textBufferHash=null,this._onDidChangeContent.fire("content")})),this._textModel._overwriteVersionId(this._versionId),this._textModel._overwriteAlternativeVersionId(this._versionId)))}setRegisteredLanguage(t,n,i){let o=n===Ao||n==="jupyter";!t.isRegisteredLanguageId(i)&&o?this._onDidChangeLanguage.fire(i):this.language=n}static AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;autoDetectLanguageThrottler=this._register(new ga(r.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY));_autoLanguageDetectionEnabled=!1;_hasLanguageSetExplicitly=!1;get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}enableAutoLanguageDetection(){this._autoLanguageDetectionEnabled=!0,this.autoDetectLanguage()}async autoDetectLanguage(){this._autoLanguageDetectionEnabled&&this.autoDetectLanguageThrottler.trigger(()=>this._doAutoDetectLanguage())}async _doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly)return;let t=await this._languageDetectionService?.detectLanguage(this.uri);t&&(this._textModel&&this._textModel.getLanguageId()===this._languageService.getLanguageIdByLanguageName(t)&&this._textModel.getLanguageId()===this._languageService.getLanguageIdByLanguageName(this.language)||this._setLanguageInternal(t))}_setLanguageInternal(t){let n=this._languageService.getLanguageIdByLanguageName(t);if(n!==null){if(this._textModel){let i=this._languageService.createById(n);this._textModel.setLanguage(i.languageId)}this._language!==t&&(this._language=t,this._hash=null,this._onDidChangeLanguage.fire(t),this._onDidChangeContent.fire("language"))}}resetTextBuffer(t){this._textBuffer=t}getValue(){let t=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(t,1):this.textBuffer.getValueInRange(t,2)}getTextBufferHash(){if(this._textBufferHash!==null)return this._textBufferHash;let t=new Vh,n=this.textBuffer.createSnapshot(!1),i;for(;i=n.read();)t.update(i);return this._textBufferHash=t.digest(),this._textBufferHash}getHashValue(){return this._hash!==null?this._hash:(this._hash=xn([xn(this.language),this.getTextBufferHash(),this._getPersisentMetadata(),this.transientOptions.transientOutputs?[]:this._outputs.map(t=>({outputs:t.outputs.map(n=>({mime:n.mime,data:Array.from(n.data.buffer)})),metadata:t.metadata}))]),this._hash)}_getPersisentMetadata(){return IN(this.transientOptions.transientCellMetadata,this.metadata,this.language)}getTextLength(){return this.textBuffer.getLength()}getFullModelRange(){let t=this.textBuffer.getLineCount();return new $(1,1,t,this.textBuffer.getLineLength(t)+1)}spliceNotebookCellOutputs(t){if(t.deleteCount>0&&t.newOutputs.length>0){let n=Math.min(t.deleteCount,t.newOutputs.length);for(let o=0;o<n;o++){let s=this.outputs[t.start+o],a=t.newOutputs[o];this.replaceOutput(s.outputId,a)}this.outputs.splice(t.start+n,t.deleteCount-n,...t.newOutputs.slice(n)).forEach(o=>o.dispose()),this._onDidChangeOutputs.fire({start:t.start+n,deleteCount:t.deleteCount-n,newOutputs:t.newOutputs.slice(n)})}else this.outputs.splice(t.start,t.deleteCount,...t.newOutputs).forEach(i=>i.dispose()),this._onDidChangeOutputs.fire(t)}replaceOutput(t,n){let i=this.outputs.findIndex(s=>s.outputId===t);return i<0?!1:(this.outputs[i].replaceData({outputs:n.outputs,outputId:n.outputId,metadata:n.metadata}),n.dispose(),this._onDidChangeOutputItems.fire(),!0)}changeOutputItems(t,n,i){let o=this.outputs.findIndex(a=>a.outputId===t);if(o<0)return!1;let s=this.outputs[o];return n?s.appendData(i):s.replaceData({outputId:t,outputs:i,metadata:s.metadata}),this._onDidChangeOutputItems.fire(),!0}_outputNotEqualFastCheck(t,n){if(t.length!==n.length)return!1;for(let i=0;i<this.outputs.length;i++){let o=t[i],s=n[i];if(o.outputs.length!==s.outputs.length)return!1;for(let a=0;a<o.outputs.length;a++)if(o.outputs[a].mime!==s.outputs[a].mime||o.outputs[a].data.byteLength!==s.outputs[a].data.byteLength)return!1}return!0}equal(t){return this.language!==t.language||this.outputs.length!==t.outputs.length||this.getTextLength()!==t.getTextLength()||!this.transientOptions.transientOutputs&&!this._outputNotEqualFastCheck(this.outputs,t.outputs)?!1:this.getHashValue()===t.getHashValue()}fastEqual(t){return this.language!==t.language||this.mime!==t.mime||this.cellKind!==t.cellKind||this.internalMetadata?.executionOrder!==t.internalMetadata?.executionOrder||this.internalMetadata?.lastRunSuccess!==t.internalMetadata?.lastRunSuccess||this.internalMetadata?.runStartTime!==t.internalMetadata?.runStartTime||this.internalMetadata?.runStartTimeAdjustment!==t.internalMetadata?.runStartTimeAdjustment||this.internalMetadata?.runEndTime!==t.internalMetadata?.runEndTime||this._textBuffer&&this.getValue()!==t.source?!1:this._source===t.source}dispose(){ft(this._outputs);let t=new Ms([],"",`
`,!1,!1,!0,!0);t.dispose(),this._textBuffer=t,super.dispose()}};function vN(r,e){if(r.runStartTime!==e.runStartTime&&typeof e.runStartTime=="number"){let t=Date.now()-e.runStartTime;return t<0?Math.abs(t):0}else return e.runStartTimeAdjustment}function IN(r,e,t){let n={};if(r){let s=new Set([...Object.keys(e)]);for(let a of s)r[a]||(n[a]=e[a])}else n=e;let i={language:t,...n};return t&&(i.language=t),V_(i,{})}var zf=class{constructor(e,t,n,i,o,s,a){this.resource=e;this.fromIndex=t;this.length=n;this.toIndex=i;this.editingDelegate=o;this.beforedSelections=s;this.endSelections=a}type=0;get label(){return this.length===1?"Move Cell":"Move Cells"}code="undoredo.textBufferEdit";undo(){if(!this.editingDelegate.moveCell)throw new Error("Notebook Move Cell not implemented for Undo/Redo");this.editingDelegate.moveCell(this.toIndex,this.length,this.fromIndex,this.endSelections,this.beforedSelections)}redo(){if(!this.editingDelegate.moveCell)throw new Error("Notebook Move Cell not implemented for Undo/Redo");this.editingDelegate.moveCell(this.fromIndex,this.length,this.toIndex,this.beforedSelections,this.endSelections)}},Hf=class{constructor(e,t,n,i,o){this.resource=e;this.diffs=t;this.editingDelegate=n;this.beforeHandles=i;this.endHandles=o}type=0;get label(){return this.diffs.length===1&&this.diffs[0][1].length===0?this.diffs[0][2].length>1?"Insert Cells":"Insert Cell":this.diffs.length===1&&this.diffs[0][2].length===0?this.diffs[0][1].length>1?"Delete Cells":"Delete Cell":"Insert Cell"}code="undoredo.textBufferEdit";undo(){if(!this.editingDelegate.replaceCell)throw new Error("Notebook Replace Cell not implemented for Undo/Redo");this.diffs.forEach(e=>{this.editingDelegate.replaceCell(e[0],e[2].length,e[1],this.beforeHandles)})}redo(){if(!this.editingDelegate.replaceCell)throw new Error("Notebook Replace Cell not implemented for Undo/Redo");this.diffs.reverse().forEach(e=>{this.editingDelegate.replaceCell(e[0],e[1].length,e[2],this.endHandles)})}},Kf=class{constructor(e,t,n,i,o){this.resource=e;this.index=t;this.oldMetadata=n;this.newMetadata=i;this.editingDelegate=o}type=0;label="Update Cell Metadata";code="undoredo.textBufferEdit";undo(){this.editingDelegate.updateCellMetadata&&this.editingDelegate.updateCellMetadata(this.index,this.oldMetadata)}redo(){this.editingDelegate.updateCellMetadata&&this.editingDelegate.updateCellMetadata(this.index,this.newMetadata)}};var SC=class{constructor(e,t,n,i,o,s){this.textModel=e;this.undoRedoGroup=t;this._pauseableEmitter=n;this._postUndoRedo=i;this.type=1,this._beginSelectionState=o,this._beginAlternativeVersionId=s,this._resultAlternativeVersionId=s}type;get code(){return this._operations.length===1?this._operations[0].code:"undoredo.notebooks.stackOperation"}_operations=[];_beginSelectionState=void 0;_resultSelectionState=void 0;_beginAlternativeVersionId;_resultAlternativeVersionId;get label(){return this._operations.length===1?this._operations[0].label:"edit"}get resources(){return[this.textModel.uri]}get isEmpty(){return this._operations.length===0}pushEndState(e,t){this._resultAlternativeVersionId=e,this._resultSelectionState=t||this._resultSelectionState}pushEditOperation(e,t,n,i){this._operations.length===0&&(this._beginSelectionState=this._beginSelectionState??t),this._operations.push(e),this._resultSelectionState=n,this._resultAlternativeVersionId=i}async undo(){this._pauseableEmitter.pause();try{for(let e=this._operations.length-1;e>=0;e--)await this._operations[e].undo();this._postUndoRedo(this._beginAlternativeVersionId),this._pauseableEmitter.fire({rawEvents:[],synchronous:void 0,versionId:this.textModel.versionId,endSelectionState:this._beginSelectionState})}finally{this._pauseableEmitter.resume()}}async redo(){this._pauseableEmitter.pause();try{for(let e=0;e<this._operations.length;e++)await this._operations[e].redo();this._postUndoRedo(this._resultAlternativeVersionId),this._pauseableEmitter.fire({rawEvents:[],synchronous:void 0,versionId:this.textModel.versionId,endSelectionState:this._resultSelectionState})}finally{this._pauseableEmitter.resume()}}},CC=class{constructor(e,t,n,i){this._textModel=e;this._undoService=t;this._pauseableEmitter=n;this._postUndoRedo=i}_pendingStackOperation=null;isUndoStackEmpty(){return this._pendingStackOperation===null||this._pendingStackOperation.isEmpty}pushStackElement(e,t){this._pendingStackOperation&&!this._pendingStackOperation.isEmpty&&(this._pendingStackOperation.pushEndState(e,t),this._undoService.pushElement(this._pendingStackOperation,this._pendingStackOperation.undoRedoGroup)),this._pendingStackOperation=null}_getOrCreateEditStackElement(e,t,n){return this._pendingStackOperation??=new SC(this._textModel,t,this._pauseableEmitter,this._postUndoRedo,e,n||"")}pushEditOperation(e,t,n,i,o){this._getOrCreateEditStackElement(t,o,i).pushEditOperation(e,t,n,i)}},EC=class extends rs{get isEmpty(){return this._eventQueue.isEmpty()}isDirtyEvent(){for(let e of this._eventQueue)for(let t=0;t<e.rawEvents.length;t++)if(!e.rawEvents[t].transient)return!0;return!1}},Kd=class extends O{constructor(t,n,i,o,s,a,l,d,u){super();this.viewType=t;this.uri=n;this._undoService=a;this._modelService=l;this._languageService=d;this._languageDetectionService=u;this.transientOptions=s,this.metadata=o,this._initialize(i);let p=h=>{if(h.uri.scheme===q.vscodeNotebookCell&&h instanceof Oi){let g=xp.parse(h.uri);if(g&&bt(g.notebook,this.uri)){let b=this._getCellIndexByHandle(g.handle);if(b>=0){let f=this.cells[b];f&&(f.textModel=h)}}}};this._register(l.onModelAdded(h=>p(h))),this._pauseableEmitter=new EC({merge:h=>{let g=h[0],b=g.rawEvents,f=g.versionId,v=g.endSelectionState,D=g.synchronous;for(let R=1;R<h.length;R++)b.push(...h[R].rawEvents),f=h[R].versionId,v=h[R].endSelectionState!==void 0?h[R].endSelectionState:v,D=h[R].synchronous!==void 0?h[R].synchronous:D;return{rawEvents:b,versionId:f,endSelectionState:v,synchronous:D}}}),this._register(this._pauseableEmitter.event(h=>{h.rawEvents.length&&this._onDidChangeContent.fire(h)})),this._operationManager=new CC(this,this._undoService,this._pauseableEmitter,h=>{this._increaseVersionId(!0),this._overwriteAlternativeVersionId(h)})}_isDisposed=!1;_onWillDispose=this._register(new E);_onWillAddRemoveCells=this._register(new E);_onDidChangeContent=this._register(new E);onWillDispose=this._onWillDispose.event;onWillAddRemoveCells=this._onWillAddRemoveCells.event;onDidChangeContent=this._onDidChangeContent.event;_cellhandlePool=0;_cellListeners=new Map;_cells=[];_defaultCollapseConfig;metadata={};transientOptions={transientCellMetadata:{},transientDocumentMetadata:{},transientOutputs:!1,cellContentMetadata:{}};_versionId=0;_notebookSpecificAlternativeId=0;_alternativeVersionId="1";_operationManager;_pauseableEmitter;get length(){return this._cells.length}get cells(){return this._cells}get versionId(){return this._versionId}get alternativeVersionId(){return this._alternativeVersionId}get notebookType(){return this.viewType}setCellCollapseDefault(t){this._defaultCollapseConfig=t}_initialize(t,n){this._cells=[],this._versionId=0,this._notebookSpecificAlternativeId=0;let i=t.map(o=>{let s=this._cellhandlePool++,a=xp.generate(this.uri,s),l=this._getDefaultCollapseState(o);return new yp(a,s,o.source,o.language,o.mime,o.cellKind,o.outputs,o.metadata,o.internalMetadata,l,this.transientOptions,this._languageService,this._languageDetectionService)});for(let o=0;o<i.length;o++){let s=i[o].onDidChangeContent(a=>{this._bindCellContentHandler(i[o],a)});this._cellListeners.set(i[o].handle,s),this._register(i[o])}this._cells.splice(0,0,...i),this._alternativeVersionId=this._generateAlternativeId(),n&&this._pauseableEmitter.fire({rawEvents:[{kind:100,transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_bindCellContentHandler(t,n){switch(this._increaseVersionId(n==="content"),n){case"content":this._pauseableEmitter.fire({rawEvents:[{kind:10,index:this._getCellIndexByHandle(t.handle),transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0});break;case"language":this._pauseableEmitter.fire({rawEvents:[{kind:5,index:this._getCellIndexByHandle(t.handle),language:t.language,transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0});break;case"mime":this._pauseableEmitter.fire({rawEvents:[{kind:13,index:this._getCellIndexByHandle(t.handle),mime:t.mime,transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0});break}}_generateAlternativeId(){return`${this._notebookSpecificAlternativeId}_`+this.cells.map(t=>t.handle+","+t.alternativeId).join(";")}dispose(){this._isDisposed||(this._isDisposed=!0,this._onWillDispose.fire(),this._undoService.removeElements(this.uri),ft(this._cellListeners.values()),this._cellListeners.clear(),ft(this._cells),this._cells=[],super.dispose())}pushStackElement(){}_getCellIndexByHandle(t){return this.cells.findIndex(n=>n.handle===t)}_getCellIndexWithOutputIdHandleFromEdits(t,n){let i=n.find(o=>"outputs"in o&&o.outputs.some(s=>s.outputId===t));if(i){if("index"in i)return i.index;if("handle"in i){let o=this._getCellIndexByHandle(i.handle);return this._assertIndex(o),o}}return-1}_getCellIndexWithOutputIdHandle(t){return this.cells.findIndex(n=>!!n.outputs.find(i=>i.outputId===t))}reset(t,n,i){this.transientOptions=i;let o=Kd.computeEdits(this,t);this.applyEdits([...o,{editType:5,metadata:n}],!0,void 0,()=>{},void 0,!1)}static computeEdits(t,n){let i=[],o=this._commonPrefix(t.cells,t.cells.length,0,n,n.length,0);if(o>0)for(let a=0;a<o;a++)i.push({editType:3,index:a,metadata:n[a].metadata??{}},...this._computeOutputEdit(a,t.cells[a].outputs,n[a].outputs));if(t.cells.length===n.length&&o===t.cells.length)return i;let s=this._commonSuffix(t.cells,t.cells.length-o,o,n,n.length-o,o);if(s>0?i.push({editType:1,index:o,count:t.cells.length-o-s,cells:n.slice(o,n.length-s)}):o>0?i.push({editType:1,index:o,count:t.cells.length-o,cells:n.slice(o)}):i.push({editType:1,index:0,count:t.cells.length,cells:n}),s>0)for(let a=s;a>0;a--)i.push({editType:3,index:t.cells.length-a,metadata:n[n.length-a].metadata??{}},...this._computeOutputEdit(t.cells.length-a,t.cells[t.cells.length-a].outputs,n[n.length-a].outputs));return i}static _computeOutputEdit(t,n,i){return n.length!==i.length?[{editType:2,index:t,outputs:i,append:!1}]:n.length===0?[]:i.map((o,s)=>({editType:7,outputId:n[s].outputId,items:o.outputs,append:!1}))}static _commonPrefix(t,n,i,o,s,a){let l=Math.min(n,s),d=0;for(let u=0;u<l&&t[i+u].fastEqual(o[a+u]);u++)d++;return d}static _commonSuffix(t,n,i,o,s,a){let l=Math.min(n,s),d=0;for(let u=0;u<l&&t[i+n-u-1].fastEqual(o[a+s-u-1]);u++)d++;return d}applyEdits(t,n,i,o,s,a){this._pauseableEmitter.pause(),this._operationManager.pushStackElement(this._alternativeVersionId,void 0);try{return this._doApplyEdits(t,n,a,i,s),!0}finally{if(!this._pauseableEmitter.isEmpty){let l=o();this._increaseVersionId(this._operationManager.isUndoStackEmpty()&&!this._pauseableEmitter.isDirtyEvent()),this._operationManager.pushStackElement(this._alternativeVersionId,l),this._pauseableEmitter.fire({rawEvents:[],versionId:this.versionId,synchronous:n,endSelectionState:l})}this._pauseableEmitter.resume()}}_doApplyEdits(t,n,i,o,s){let a=t.map((u,p)=>{let h=-1;if("index"in u)h=u.index;else if("handle"in u)h=this._getCellIndexByHandle(u.handle),this._assertIndex(h);else if("outputId"in u){if(h=this._getCellIndexWithOutputIdHandle(u.outputId),this._indexIsInvalid(h)&&(h=this._getCellIndexWithOutputIdHandleFromEdits(u.outputId,t.slice(0,p))),this._indexIsInvalid(h))return null}else if(u.editType!==5)throw new Error("Invalid cell edit");return{edit:u,cellIndex:h,end:u.editType===5?void 0:u.editType===1?u.index+u.count:h,originalIndex:p}}).filter(Ll),d=this._mergeCellEdits(a).sort((u,p)=>u.end===void 0||p.end===void 0?-1:p.end-u.end||p.originalIndex-u.originalIndex).reduce((u,p)=>{if(!u.length)u.push([p]);else{let h=u[u.length-1],g=h[0].cellIndex;p.cellIndex===g?h.push(p):u.push([p])}return u},[]).map(u=>{let p=[],h=[];return u.forEach(g=>{g.edit.editType===1?p.push(g):h.push(g)}),[...h.reverse(),...p]}).flat();for(let{edit:u,cellIndex:p}of d)switch(u.editType){case 1:this._replaceCells(u.index,u.count,u.cells,n,i,o,s);break;case 2:{this._assertIndex(p);let h=this._cells[p];u.append?this._spliceNotebookCellOutputs(h,{start:h.outputs.length,deleteCount:0,newOutputs:u.outputs.map(g=>new Ks(g))},!0,i):this._spliceNotebookCellOutputs2(h,u.outputs,i);break}case 7:{this._assertIndex(p);let h=this._cells[p];u.append?this._appendNotebookCellOutputItems(h,u.outputId,u.items):this._replaceNotebookCellOutputItems(h,u.outputId,u.items)}break;case 3:this._assertIndex(u.index),this._changeCellMetadata(this._cells[u.index],u.metadata,i,o,s);break;case 8:this._assertIndex(p),this._changeCellMetadataPartial(this._cells[p],u.metadata,i,o,s);break;case 9:this._assertIndex(p),this._changeCellInternalMetadataPartial(this._cells[p],u.internalMetadata);break;case 4:this._assertIndex(u.index),this._changeCellLanguage(this._cells[u.index],u.language,i,o,s);break;case 5:this._updateNotebookCellMetadata(u.metadata,i,o,s);break;case 6:this._moveCellToIdx(u.index,u.length,u.newIdx,n,i,o,void 0,s);break}}_mergeCellEdits(t){let n=[];return t.forEach(i=>{if(n.length){let o=n[n.length-1];o.edit.editType===2&&o.edit.append&&i.edit.editType===2&&i.edit.append&&o.cellIndex===i.cellIndex?o.edit.outputs=[...o.edit.outputs,...i.edit.outputs]:o.edit.editType===2&&!o.edit.append&&o.edit.outputs.length===0&&i.edit.editType===2&&i.edit.append&&o.cellIndex===i.cellIndex?(o.edit.append=!1,o.edit.outputs=i.edit.outputs):n.push(i)}else n.push(i)}),n}_getDefaultCollapseState(t){let n=t.cellKind===2?this._defaultCollapseConfig?.codeCell:this._defaultCollapseConfig?.markupCell;return t.collapseState??n??void 0}_replaceCells(t,n,i,o,s,a,l){if(n===0&&i.length===0)return;let d=this._cells.slice(0),u=new Set;d.forEach(f=>{u.add(f.handle)});for(let f=t;f<Math.min(t+n,this._cells.length);f++){let v=this._cells[f];this._cellListeners.get(v.handle)?.dispose(),this._cellListeners.delete(v.handle)}let p=i.map(f=>{let v=this._cellhandlePool++,D=xp.generate(this.uri,v),R=this._getDefaultCollapseState(f),A=new yp(D,v,f.source,f.language,f.mime,f.cellKind,f.outputs||[],f.metadata,f.internalMetadata,R,this.transientOptions,this._languageService,this._languageDetectionService),B=this._modelService.getModel(D);B&&B instanceof Oi&&(A.textModel=B,A.language=f.language,A.textModel.setValue(f.source),A.resetTextBuffer(A.textModel.getTextBuffer()));let W=A.onDidChangeContent(H=>{this._bindCellContentHandler(A,H)});return this._cellListeners.set(A.handle,W),this._register(A),A}),h=this._cells.slice(0);h.splice(t,n,...p);let g=z_(this._cells,h,f=>u.has(f.handle)).map(f=>[f.start,f.deleteCount,f.toInsert]);this._onWillAddRemoveCells.fire({rawEvent:{kind:1,changes:g}}),this._cells=h;let b=g.map(f=>{let v=d.slice(f[0],f[0]+f[1]);return[f[0],v,f[2]]});s&&this._operationManager.pushEditOperation(new Hf(this.uri,b,{insertCell:(f,v,D)=>{this._insertNewCell(f,[v],!0,D)},deleteCell:(f,v)=>{this._removeCell(f,1,!0,v)},replaceCell:(f,v,D,R)=>{this._replaceNewCells(f,v,D,!0,R)}},void 0,void 0),a,void 0,this._alternativeVersionId,l),this._pauseableEmitter.fire({rawEvents:[{kind:1,changes:g,transient:!1}],versionId:this.versionId,synchronous:o,endSelectionState:void 0})}_increaseVersionId(t){this._versionId=this._versionId+1,t||(this._notebookSpecificAlternativeId=this._versionId),this._alternativeVersionId=this._generateAlternativeId()}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t,this._notebookSpecificAlternativeId=Number(t.substring(0,t.indexOf("_")))}_updateNotebookCellMetadata(t,n,i,o){let s=this.metadata,a=this._isDocumentMetadataChanged(this.metadata,t);if(a&&n){let l=this;this._operationManager.pushEditOperation(new class{type=0;get resource(){return l.uri}label="Update Cell Metadata";code="undoredo.textBufferEdit";undo(){l._updateNotebookCellMetadata(s,!1,i,o)}redo(){l._updateNotebookCellMetadata(t,!1,i,o)}},i,void 0,this._alternativeVersionId,o)}this.metadata=t,this._pauseableEmitter.fire({rawEvents:[{kind:11,metadata:this.metadata,transient:!a}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_insertNewCell(t,n,i,o){for(let a=0;a<n.length;a++){let l=n[a].onDidChangeContent(d=>{this._bindCellContentHandler(n[a],d)});this._cellListeners.set(n[a].handle,l)}let s=[[t,0,n]];this._onWillAddRemoveCells.fire({rawEvent:{kind:1,changes:s}}),this._cells.splice(t,0,...n),this._pauseableEmitter.fire({rawEvents:[{kind:1,changes:s,transient:!1}],versionId:this.versionId,synchronous:i,endSelectionState:o})}_removeCell(t,n,i,o){for(let a=t;a<t+n;a++){let l=this._cells[a];this._cellListeners.get(l.handle)?.dispose(),this._cellListeners.delete(l.handle)}let s=[[t,n,[]]];this._onWillAddRemoveCells.fire({rawEvent:{kind:1,changes:s}}),this._cells.splice(t,n),this._pauseableEmitter.fire({rawEvents:[{kind:1,changes:s,transient:!1}],versionId:this.versionId,synchronous:i,endSelectionState:o})}_replaceNewCells(t,n,i,o,s){for(let l=t;l<t+n;l++){let d=this._cells[l];this._cellListeners.get(d.handle)?.dispose(),this._cellListeners.delete(d.handle)}for(let l=0;l<i.length;l++){let d=i[l].onDidChangeContent(u=>{this._bindCellContentHandler(i[l],u)});this._cellListeners.set(i[l].handle,d)}let a=[[t,n,i]];this._onWillAddRemoveCells.fire({rawEvent:{kind:1,changes:a}}),this._cells.splice(t,n,...i),this._pauseableEmitter.fire({rawEvents:[{kind:1,changes:a,transient:!1}],versionId:this.versionId,synchronous:o,endSelectionState:s})}_isDocumentMetadataChanged(t,n){let i=new Set([...Object.keys(t||{}),...Object.keys(n||{})]);for(let o of i)if(o==="custom"){if(!this._customMetadataEqual(t[o],n[o])&&!this.transientOptions.transientDocumentMetadata[o])return!0}else if(t[o]!==n[o]&&!this.transientOptions.transientDocumentMetadata[o])return!0;return!1}_isCellMetadataChanged(t,n){let i=new Set([...Object.keys(t||{}),...Object.keys(n||{})]);for(let o of i)if(t[o]!==n[o]&&!this.transientOptions.transientCellMetadata[o])return!0;return!1}_customMetadataEqual(t,n){if(!t&&!n)return!0;if(!t||!n)return!1;let i=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(n);if(i.length!==o.length)return!1;for(let s=0;s<i.length;s++){let a=i[s];if(t[a]!==n[a])return!1}return!0}_changeCellMetadataPartial(t,n,i,o,s){let a={...t.metadata},l;for(l in n){let d=n[l]??void 0;a[l]=d}return this._changeCellMetadata(t,a,i,o,s)}_changeCellMetadata(t,n,i,o,s){let a=this._isCellMetadataChanged(t.metadata,n);if(a&&i){let l=this._cells.indexOf(t);this._operationManager.pushEditOperation(new Kf(this.uri,l,Object.freeze(t.metadata),Object.freeze(n),{updateCellMetadata:(d,u)=>{let p=this._cells[d];p&&this._changeCellMetadata(p,u,!1,o,s)}}),o,void 0,this._alternativeVersionId,s)}t.metadata=n,this._pauseableEmitter.fire({rawEvents:[{kind:7,index:this._cells.indexOf(t),metadata:t.metadata,transient:!a}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_changeCellInternalMetadataPartial(t,n){let i={...t.internalMetadata},o;for(o in n){let s=n[o]??void 0;i[o]=s}t.internalMetadata=i,this._pauseableEmitter.fire({rawEvents:[{kind:12,index:this._cells.indexOf(t),internalMetadata:t.internalMetadata,transient:!0}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_changeCellLanguage(t,n,i,o,s){if(t.language===n)return;let a=t.language;if(t.language=n,i){let l=this;this._operationManager.pushEditOperation(new class{type=0;get resource(){return l.uri}label="Update Cell Language";code="undoredo.textBufferEdit";undo(){l._changeCellLanguage(t,a,!1,o,s)}redo(){l._changeCellLanguage(t,n,!1,o,s)}},o,void 0,this._alternativeVersionId,s)}this._pauseableEmitter.fire({rawEvents:[{kind:5,index:this._cells.indexOf(t),language:n,transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_spliceNotebookCellOutputs2(t,n,i){if(n.length===0&&t.outputs.length===0)return;if(n.length<=1){this._spliceNotebookCellOutputs(t,{start:0,deleteCount:t.outputs.length,newOutputs:n.map(l=>new Ks(l))},!1,i);return}new Iu(new $f(t.outputs),new $f(n)).ComputeDiff(!1).changes.map(l=>({start:l.originalStart,deleteCount:l.originalLength,newOutputs:n.slice(l.modifiedStart,l.modifiedStart+l.modifiedLength).map(d=>new Ks(d))})).reverse().forEach(l=>{this._spliceNotebookCellOutputs(t,l,!1,i)})}_spliceNotebookCellOutputs(t,n,i,o){t.spliceNotebookCellOutputs(n),this._pauseableEmitter.fire({rawEvents:[{kind:8,index:this._cells.indexOf(t),outputs:t.outputs.map(s=>s.asDto())??[],append:i,transient:this.transientOptions.transientOutputs}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_appendNotebookCellOutputItems(t,n,i){t.changeOutputItems(n,!0,i)&&this._pauseableEmitter.fire({rawEvents:[{kind:9,index:this._cells.indexOf(t),outputId:n,outputItems:i,append:!0,transient:this.transientOptions.transientOutputs}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_replaceNotebookCellOutputItems(t,n,i){t.changeOutputItems(n,!1,i)&&this._pauseableEmitter.fire({rawEvents:[{kind:9,index:this._cells.indexOf(t),outputId:n,outputItems:i,append:!1,transient:this.transientOptions.transientOutputs}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_moveCellToIdx(t,n,i,o,s,a,l,d){s&&this._operationManager.pushEditOperation(new zf(this.uri,t,n,i,{moveCell:(p,h,g,b,f)=>{this._moveCellToIdx(p,h,g,!0,!1,b,f,d)}},a,l),a,l,this._alternativeVersionId,d),this._assertIndex(t),this._assertIndex(i);let u=this._cells.splice(t,n);return this._cells.splice(i,0,...u),this._pauseableEmitter.fire({rawEvents:[{kind:2,index:t,length:n,newIdx:i,cells:u,transient:!1}],versionId:this.versionId,synchronous:o,endSelectionState:l}),!0}_assertIndex(t){if(this._indexIsInvalid(t))throw new Error(`model index out of range ${t}`)}_indexIsInvalid(t){return t<0||t>=this._cells.length}findNextMatch(t,n,i,o,s){this._assertIndex(n.cellIndex);let l=new Cr(t,i,o,s).parseSearchRequest();if(!l)return null;let d=n.cellIndex,u=n.position;for(;d<this._cells.length;){let p=this._cells[d],h=new $(u.lineNumber,u.column,p.textBuffer.getLineCount(),p.textBuffer.getLineMaxColumn(p.textBuffer.getLineCount())),g=p.textBuffer.findMatchesLineByLine(h,l,!1,1);if(g.length>0)return{cell:p,match:g[0]};d++,u={lineNumber:1,column:1}}return null}};Kd=T([S(5,fs),S(6,Qr),S(7,Xi),S(8,md)],Kd);var $f=class{constructor(e){this.outputs=e}getElements(){return this.outputs.map(e=>xn(e.outputs.map(t=>({mime:t.mime,data:t.data}))))}};var Lqe=k("INotebookExecutionService");var Yqe=k("INotebookExecutionStateService");var vje=k("INotebookKernelService"),Ije=k("INotebookKernelHistoryService");var ao=k("lifecycleService");function H_(r){switch(r){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}}var K_=k("editorPaneService");var Gf;(e=>e.Workbench="workbench.contributions.kind")(Gf||={});var el=(i=>(i[i.BlockStartup=1]="BlockStartup",i[i.BlockRestore=2]="BlockRestore",i[i.AfterRestored=3]="AfterRestored",i[i.Eventually=4]="Eventually",i))(el||{});function $_(r){let e=r;return!!e&&typeof e.editorTypeId=="string"}function xN(r){switch(r){case 3:return el.AfterRestored;case 4:return el.Eventually}}function G_(r){switch(r){case el.BlockStartup:return 1;case el.BlockRestore:return 2;case el.AfterRestored:return 3;case el.Eventually:return 4}}var tl=class r extends O{static INSTANCE=new r;static BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20;static BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100;instantiationService;lifecycleService;logService;environmentService;editorPaneService;contributionsByPhase=new Map;contributionsByEditor=new Map;contributionsById=new Map;instancesById=new Map;instanceDisposables=this._register(new le);timingsByPhase=new Map;get timings(){return this.timingsByPhase}pendingRestoredContributions=new yn;whenRestored=this.pendingRestoredContributions.p;registerWorkbenchContribution2(e,t,n){let i={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&(typeof n=="number"&&this.lifecycleService.phase>=n||typeof e=="string"&&$_(n)&&this.editorPaneService.didInstantiateEditorPane(n.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,i,typeof n=="number"?G_(n):this.lifecycleService.phase):(typeof n=="number"&&Ic(this.contributionsByPhase,G_(n),[]).push(i),typeof e=="string"&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,i),$_(n)&&Ic(this.contributionsByEditor,n.editorTypeId,[]).push(i)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,xN(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);let t=this.instantiationService,n=this.lifecycleService,i=this.logService,o=this.environmentService;if(!t||!n||!i||!o)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);let s=this.contributionsById.get(e);if(!s)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);n.phase<3&&i.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,i,o,s,n.phase);let a=this.instancesById.get(e);if(!a)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return a}start(e){let t=this.instantiationService=e.get(Ct),n=this.lifecycleService=e.get(ao),i=this.logService=e.get(je),o=this.environmentService=e.get(Ri),s=this.editorPaneService=e.get(K_);this._register(n.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(let a of[1,2,3,4])this.instantiateByPhase(t,n,i,o,a);for(let a of this.contributionsByEditor.keys())s.didInstantiateEditorPane(a)&&this.onEditor(a,t,n,i,o);this._register(s.onWillInstantiateEditorPane(a=>this.onEditor(a.typeId,t,n,i,o)))}onEditor(e,t,n,i,o){let s=this.contributionsByEditor.get(e);if(s){this.contributionsByEditor.delete(e);for(let a of s)this.safeCreateContribution(t,i,o,a,n.phase)}}instantiateByPhase(e,t,n,i,o){t.phase>=o?this.doInstantiateByPhase(e,n,i,o):t.when(o).then(()=>this.doInstantiateByPhase(e,n,i,o))}async doInstantiateByPhase(e,t,n,i){let o=this.contributionsByPhase.get(i);if(o)switch(this.contributionsByPhase.delete(i),i){case 1:case 2:{Wt(`code/willCreateWorkbenchContributions/${i}`);for(let s of o)this.safeCreateContribution(e,t,n,s,i);Wt(`code/didCreateWorkbenchContributions/${i}`);break}case 3:case 4:{i===4&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(o,e,t,n,i);break}}}doInstantiateWhenIdle(e,t,n,i,o){Wt(`code/willCreateWorkbenchContributions/${o}`);let s=0,a=o===4?3e3:500,l=d=>{for(;s<e.length;){let u=e[s++];if(this.safeCreateContribution(t,n,i,u,o),d.timeRemaining()<1){as(l,a);break}}s===e.length&&(Wt(`code/didCreateWorkbenchContributions/${o}`),o===3&&this.pendingRestoredContributions.complete())};as(l,a)}safeCreateContribution(e,t,n,i,o){if(typeof i.id=="string"&&this.instancesById.has(i.id))return;let s=Date.now();try{typeof i.id=="string"&&Wt(`code/willCreateWorkbenchContribution/${o}/${i.id}`);let a=e.createInstance(i.ctor);typeof i.id=="string"&&(this.instancesById.set(i.id,a),this.contributionsById.delete(i.id)),$E(a)&&this.instanceDisposables.add(a)}catch(a){t.error(`Unable to create workbench contribution '${i.id??i.ctor.name}'.`,a)}finally{typeof i.id=="string"&&Wt(`code/didCreateWorkbenchContribution/${o}/${i.id}`)}if(typeof i.id=="string"||!n.isBuilt){let a=Date.now()-s;if(a>(o<3?r.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:r.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&t.warn(`Creation of workbench contribution '${i.id??i.ctor.name}' took ${a}ms.`),typeof i.id=="string"){let l=this.timingsByPhase.get(o);l||(l=[],this.timingsByPhase.set(o,l)),l.push([i.id,a])}}}},jje=tl.INSTANCE.registerWorkbenchContribution2.bind(tl.INSTANCE),Xje=tl.INSTANCE.getWorkbenchContribution.bind(tl.INSTANCE);De.add(Gf.Workbench,tl.INSTANCE);var SN="diagnosticsService",dXe=k(SN);var qf=k("remoteAgentService"),_Xe=new class{maxSampleCount=5;sampleDelay=2e3;initial=[];maxInitialCount=3;average=[];maxAverageCount=100;highLatencyMultiple=2;highLatencyMinThreshold=500;highLatencyMaxThreshold=1500;lastMeasurement=void 0;get latency(){return this.lastMeasurement}async measure(r){let e=1/0;for(let n=0;n<this.maxSampleCount;n++){let i=await r.getRoundTripTime();if(i===void 0)return;e=Math.min(e,i/2),await jn(this.sampleDelay)}this.average.push(e),this.average.length>this.maxAverageCount&&this.average.shift();let t;return this.initial.length<this.maxInitialCount?this.initial.push(e):t=this.initial.reduce((n,i)=>n+i,0)/this.initial.length,this.lastMeasurement={initial:t,current:e,average:this.average.reduce((n,i)=>n+i,0)/this.average.length,high:typeof t>"u"?!1:e>this.highLatencyMaxThreshold||e>this.highLatencyMinThreshold&&e>t*this.highLatencyMultiple},this.lastMeasurement}};var eQe=Object.freeze({id:"application",order:100,title:c("applicationConfigurationTitle","Application"),type:"object"}),q_=Object.freeze({id:"workbench",order:7,title:c("workbenchConfigurationTitle","Workbench"),type:"object"}),EN=Object.freeze({id:"security",scope:1,title:c("securityConfigurationTitle","Security"),type:"object",order:7}),tQe=Object.freeze({id:"problems",title:c("problemsConfigurationTitle","Problems"),type:"object",order:101}),TN=Object.freeze({id:"window",order:8,title:c("windowConfigurationTitle","Window"),type:"object"}),wN={ConfigurationMigration:"base.contributions.configuration.migration"},wC=class{migrations=[];_onDidRegisterConfigurationMigrations=new E;onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event;registerConfigurationMigrations(e){this.migrations.push(...e)}},Yf=new wC;De.add(wN.ConfigurationMigration,Yf);var jf=class extends O{constructor(t,n){super();this.configurationService=t;this.workspaceService=n;this._register(this.workspaceService.onDidChangeWorkspaceFolders(async i=>{for(let o of i.added)await this.migrateConfigurationsForFolder(o,Yf.migrations)})),this.migrateConfigurations(Yf.migrations),this._register(Yf.onDidRegisterConfigurationMigration(i=>this.migrateConfigurations(i)))}static ID="workbench.contrib.configurationMigration";async migrateConfigurations(t){await this.migrateConfigurationsForFolder(void 0,t);for(let n of this.workspaceService.getWorkspace().folders)await this.migrateConfigurationsForFolder(n,t)}async migrateConfigurationsForFolder(t,n){await Promise.all([n.map(i=>this.migrateConfigurationsForFolderAndOverride(i,t?.uri))])}async migrateConfigurationsForFolderAndOverride(t,n){let i=this.configurationService.inspect(t.key,{resource:n}),o=this.workspaceService.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(let[s,a]of o){let l=i[s];if(!l)continue;let d=[];if(l.value!==void 0){let u=await this.runMigration(t,s,l.value,n,void 0);for(let p of u??[])d.push([p,[]])}for(let{identifiers:u,value:p}of l.overrides??[])if(p!==void 0){let h=await this.runMigration(t,s,p,n,u);for(let g of h??[])d.push([g,u])}d.length&&await Promise.allSettled(d.map(async([[u,p],h])=>this.configurationService.updateValue(u,p.value,{resource:n,overrideIdentifiers:h},a)))}}async runMigration(t,n,i,o,s){let a=d=>{let p=this.configurationService.inspect(d,{resource:o})[n];if(p)return s?p.overrides?.find(({identifiers:h})=>Cn(h,s))?.value:p.value},l=await t.migrateFn(i,a);return Array.isArray(l)?l:[[t.key,l]]}};jf=T([S(0,Xe),S(1,Qn)],jf);var Xf=class extends O{constructor(t){super();this.remoteAgentService=t;this.create()}static ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration";_ready=new yn;ready=this._ready.p;async create(){try{await this.doCreate()}finally{this._ready.complete()}}async doCreate(){if(!lt&&(await this.remoteAgentService.getEnvironment())?.os!==1)return;De.as(qi.Configuration).registerConfiguration({...EN,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:c("security.allowedUNCHosts.patternErrorMessage","UNC host names must not contain backslashes.")},default:[],markdownDescription:c("security.allowedUNCHosts","A set of UNC host names (without leading or trailing backslash, for example `192.168.0.1` or `my-server`) to allow without user confirmation. If a UNC host is being accessed that is not allowed via this setting or has not been acknowledged via user confirmation, an error will occur and the operation stopped. A restart is required when changing this setting. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:c("security.restrictUNCAccess","If enabled, only allows access to UNC host names that are allowed by the `#security.allowedUNCHosts#` setting or after user confirmation. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2}}})}};Xf=T([S(0,qf)],Xf);var Sp="window.newWindowProfile",Qf=class extends O{constructor(t,n){super();this.userDataProfilesService=t;this.configurationService=n;this.registerNewWindowProfileConfiguration(),this._register(this.userDataProfilesService.onDidChangeProfiles(i=>this.registerNewWindowProfileConfiguration())),this.setNewWindowProfile(),this.checkAndResetNewWindowProfileConfig(),this._register(n.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(Sp)&&this.setNewWindowProfile()})),this._register(this.userDataProfilesService.onDidChangeProfiles(()=>this.checkAndResetNewWindowProfileConfig()))}static ID="workbench.contrib.dynamicWindowConfiguration";configurationNode;newWindowProfile;registerNewWindowProfileConfiguration(){let t=De.as(qi.Configuration),n={...TN,properties:{[Sp]:{type:["string","null"],default:null,enum:[...this.userDataProfilesService.profiles.map(i=>i.name),null],enumItemLabels:[...this.userDataProfilesService.profiles.map(i=>""),c("active window","Active Window")],description:c("newWindowProfile","Specifies the profile to use when opening a new window. If a profile name is provided, the new window will use that profile. If no profile name is provided, the new window will use the profile of the active window or the Default profile if no active window exists."),scope:1}}};this.configurationNode?t.updateConfigurations({add:[n],remove:[this.configurationNode]}):t.registerConfiguration(n),this.configurationNode=n}setNewWindowProfile(){let t=this.configurationService.getValue(Sp);this.newWindowProfile=t?this.userDataProfilesService.profiles.find(n=>n.name===t):void 0}checkAndResetNewWindowProfileConfig(){let t=this.configurationService.getValue(Sp);if(!t)return;let n=this.newWindowProfile?this.userDataProfilesService.profiles.find(i=>i.id===this.newWindowProfile.id):void 0;t!==n?.name&&this.configurationService.updateValue(Sp,n?.name)}};Qf=T([S(0,Lk),S(1,Xe)],Qf);var FQe=k("editorResolverService");var kN=De.as(qi.Configuration),DN={...q_,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:c("editor.editorAssociations",'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),additionalProperties:{type:"string"}}}};kN.registerConfiguration(DN);var _N=k("notebookDocumentService"),kC=["W","X","Y","Z","a","b","c","d","e","f"],RN=new RegExp(`^[${kC.join("")}]+`),j_=7;function _C(r){if(r.scheme!==q.vscodeNotebookCell)return;let e=r.fragment.indexOf("s");if(e<0)return;let t=parseInt(r.fragment.substring(0,e).replace(RN,""),j_),n=im(r.fragment.substring(e+1)).toString();if(!isNaN(t))return{handle:t,notebook:r.with({scheme:n,fragment:null})}}function X_(r,e){let t=e.toString(j_),i=`${t.length<kC.length?kC[t.length-1]:"z"}${t}s${rm(Ne.fromString(r.scheme),!0,!0)}`;return r.with({scheme:q.vscodeNotebookCell,fragment:i})}function Q_(r){if(r.scheme!==q.vscodeNotebookMetadata)return;let e=im(r.fragment).toString();return r.with({scheme:e,fragment:null})}function Y_(r){let e=`${rm(Ne.fromString(r.scheme),!0,!0)}`;return r.with({scheme:q.vscodeNotebookMetadata,fragment:e})}var DC=class{_documents=new Ft;getNotebook(e){if(e.scheme===q.vscodeNotebookCell){let t=_C(e);if(t){let n=this._documents.get(t.notebook);if(n)return n}}return this._documents.get(e)}addNotebookDocument(e){this._documents.set(e.uri,e)}removeNotebookDocument(e){this._documents.delete(e.uri)}};At(_N,DC,1);var ZYe=["application/json","application/javascript","text/html","image/svg+xml",fr.latex,fr.markdown,"image/png","image/jpeg",fr.text],eJe=[fr.latex,fr.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",fr.text];var PN;(n=>{n.scheme=q.vscodeNotebookMetadata;function e(i){return Y_(i)}n.generate=e;function t(i){return Q_(i)}n.parse=t})(PN||={});var xp;(a=>{a.scheme=q.vscodeNotebookCell;function e(l,d){return X_(l,d)}a.generate=e;function t(l){return _C(l)}a.parse=t;function n(l,d){return l.with({scheme:q.vscodeNotebookCellOutput,fragment:`op${d??""},${l.scheme!==q.file?l.scheme:""}`})}a.generateCellOutputUri=n;function i(l){if(l.scheme!==q.vscodeNotebookCellOutput)return;let d=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(l.fragment);if(!d)return;let u=d[1]&&d[1]!==""?d[1]:void 0,p=d[2];return{outputId:u,notebook:l.with({scheme:p||q.file,fragment:null})}}a.parseCellOutputUri=i;function o(l,d,u){return a.generate(l,d).with({scheme:u})}a.generateCellPropertyUri=o;function s(l,d){if(l.scheme===d)return a.parse(l.with({scheme:a.scheme}))}a.parseCellPropertyUri=s})(xp||={});function z_(r,e,t,n=(i,o)=>i===o){let i=[];function o(l,d,u){if(d===0&&u.length===0)return;let p=i[i.length-1];p&&p.start+p.deleteCount===l?(p.deleteCount+=d,p.toInsert.push(...u)):i.push({start:l,deleteCount:d,toInsert:u})}let s=0,a=0;for(;;){if(s===r.length){o(s,0,e.slice(a));break}if(a===e.length){o(s,r.length-s,[]);break}let l=r[s],d=e[a];if(n(l,d)){s+=1,a+=1;continue}t(d)?(o(s,1,[]),s+=1):(o(s,0,[d]),a+=1)}return i}var tJe=new V("notebookEditorCursorAtBoundary","none"),nJe=new V("notebookEditorCursorAtLineBoundary","none");function xC(r){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(r)}var LN=new TextDecoder;function W_(r){let e=[],t=!1;for(let s of r)(e.length===0||t)&&(e.push(s),t=!0);let n=AN(e),i=Ne.concat(e.map(s=>Ne.wrap(s))),o=UN(i);return n=n||o.byteLength!==i.byteLength,{data:o,didCompression:n}}var Jf="\x1B[A",RC=Jf.split("").map(r=>r.charCodeAt(0)),ON=10;function AN(r){let e=!1;return r.forEach((t,n)=>{if(n===0||t.length<Jf.length)return;let i=r[n-1],o=t.subarray(0,Jf.length);if(o[0]===RC[0]&&o[1]===RC[1]&&o[2]===RC[2]){let s=i.lastIndexOf(ON);if(s===-1)return;e=!0,r[n-1]=i.subarray(0,s),r[n]=t.subarray(Jf.length)}}),e}function MN(r){let e=r;do r=e,e=r.replace(/[^\n]\x08/gm,"");while(e.length<r.length);return r}function NN(r){for(r=r.replace(/\r+\n/gm,`
`);r.search(/\r[^$]/g)>-1;){let e=r.match(/^(.*)\r+/m)[1],t=r.match(/\r+(.*)$/m)[1];t=t+e.slice(t.length,e.length),r=r.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,t)}return r}var FN=8,BN=13;function UN(r){return!r.buffer.includes(FN)&&!r.buffer.includes(BN)?r:Ne.fromString(NN(MN(LN.decode(r.buffer))))}var PC=class{constructor(e,t,n,i=void 0,o=void 0){this.uri=e;this.relativePath=t;this.context=n;this.element=i;this.parent=o}_children=new Map;get childrenCount(){return this._children.size}get children(){return this._children.values()}get name(){return Pe.basename(this.relativePath)}get(e){return this._children.get(e)}set(e,t){this._children.set(e,t)}delete(e){this._children.delete(e)}clear(){this._children.clear()}};T([K],PC.prototype,"name",1);var XJe=k("scm");var QJe=k("scmView");var WN="\u27EA ",VN=" characters skipped \u27EB",PZe=(WN.length+VN.length+5)*2,LZe=k("searchService");function J_(r,e=!0){let t=r&&r.files&&r.files.exclude,n=e&&r&&r.search&&r.search.exclude;if(!t&&!n)return;if(!t||!n)return t||n||void 0;let i=Object.create(null);return i=Hr(i,_t(t)),i=Hr(i,_t(n),!0),i}function LC(r,e){return r.excludePattern&&Po(r.excludePattern,e)?!1:r.includePattern||r.usingSearchPaths?r.includePattern&&Po(r.includePattern,e)?!0:r.usingSearchPaths?!!r.folderQueries&&r.folderQueries.some(t=>{let n=t.folder.fsPath;if(ua(e,n)){let i=gl(n,e);return!t.includePattern||!!Po(t.includePattern,i)}else return!1}):!1:!0}var zN;(n=>{let r=[];function e(i){let o=i;return o&&r.push(o),{dispose(){if(o){let s=r.indexOf(o);s>=0&&(r.splice(s,1),o=void 0)}}}}n.register=e;function t(){return r.slice(0)}n.all=t})(zN||={});var aet=new V("searchState",0);var Met=k("speechService"),Net=new V("hasSpeechProvider",!1,{type:"boolean",description:c("hasSpeechProvider","A speech provider is registered to the speech service.")}),Fet=new V("speechToTextInProgress",!1,{type:"boolean",description:c("speechToTextInProgress","A speech-to-text session is in progress.")}),Bet=new V("textToSpeechInProgress",!1,{type:"boolean",description:c("textToSpeechInProgress","A text-to-speech session is in progress.")});var Uet={"da-DK":{name:c("speechLanguage.da-DK","Danish (Denmark)")},"de-DE":{name:c("speechLanguage.de-DE","German (Germany)")},"en-AU":{name:c("speechLanguage.en-AU","English (Australia)")},"en-CA":{name:c("speechLanguage.en-CA","English (Canada)")},"en-GB":{name:c("speechLanguage.en-GB","English (United Kingdom)")},"en-IE":{name:c("speechLanguage.en-IE","English (Ireland)")},"en-IN":{name:c("speechLanguage.en-IN","English (India)")},"en-NZ":{name:c("speechLanguage.en-NZ","English (New Zealand)")},"en-US":{name:c("speechLanguage.en-US","English (United States)")},"es-ES":{name:c("speechLanguage.es-ES","Spanish (Spain)")},"es-MX":{name:c("speechLanguage.es-MX","Spanish (Mexico)")},"fr-CA":{name:c("speechLanguage.fr-CA","French (Canada)")},"fr-FR":{name:c("speechLanguage.fr-FR","French (France)")},"hi-IN":{name:c("speechLanguage.hi-IN","Hindi (India)")},"it-IT":{name:c("speechLanguage.it-IT","Italian (Italy)")},"ja-JP":{name:c("speechLanguage.ja-JP","Japanese (Japan)")},"ko-KR":{name:c("speechLanguage.ko-KR","Korean (South Korea)")},"nl-NL":{name:c("speechLanguage.nl-NL","Dutch (Netherlands)")},"pt-PT":{name:c("speechLanguage.pt-PT","Portuguese (Portugal)")},"pt-BR":{name:c("speechLanguage.pt-BR","Portuguese (Brazil)")},"ru-RU":{name:c("speechLanguage.ru-RU","Russian (Russia)")},"sv-SE":{name:c("speechLanguage.sv-SE","Swedish (Sweden)")},"tr-TR":{name:c("speechLanguage.tr-TR","Turkish (T\xFCrkiye)")},"zh-CN":{name:c("speechLanguage.zh-CN","Chinese (Simplified, China)")},"zh-HK":{name:c("speechLanguage.zh-HK","Chinese (Traditional, Hong Kong)")},"zh-TW":{name:c("speechLanguage.zh-TW","Chinese (Traditional, Taiwan)")}};var HN="timeline",stt=k(HN);var KN=new Vs,OC=class r{constructor(e,t,n,i){this.id=e;this.provider=t;this.roots=n;this.ref=i;this.root=n[0]}static async create(e,t,n){let[i]=KN.ordered(e);if(!i)return;let o=await i.prepareTypeHierarchy(e,t,n);if(o)return new r(o.roots.reduce((s,a)=>s+a._sessionId,""),i,o.roots,new vl(o))}root;dispose(){this.ref.release()}fork(e){let t=this;return new class extends r{constructor(){super(t.id,t.provider,[e],t.ref.acquire())}}}async provideSupertypes(e,t){try{let n=await this.provider.provideSupertypes(e,t);if(ul(n))return n}catch(n){Zs(n)}return[]}async provideSubtypes(e,t){try{let n=await this.provider.provideSubtypes(e,t);if(ul(n))return n}catch(n){Zs(n)}return[]}},Cp=new Map;Tn.registerCommand("_executePrepareTypeHierarchy",async(r,...e)=>{let[t,n]=e;Vi(L.isUri(t)),Vi(Se.isIPosition(n));let o=r.get(Qr).getModel(t),s;if(!o){let l=await r.get(hd).createModelReference(t);o=l.object.textEditorModel,s=l}try{let a=await OC.create(o,n,We.None);return a?(Cp.set(a.id,a),Cp.forEach((l,d,u)=>{u.size>10&&(l.dispose(),Cp.delete(d))}),[a.root]):[]}finally{s?.dispose()}});function Z_(r){let e=r;return typeof r=="object"&&typeof e.name=="string"&&typeof e.kind=="number"&&L.isUri(e.uri)&&$.isIRange(e.range)&&$.isIRange(e.selectionRange)}Tn.registerCommand("_executeProvideSupertypes",async(r,...e)=>{let[t]=e;Vi(Z_(t));let n=Cp.get(t._sessionId);if(n)return n.provideSupertypes(t,We.None)});Tn.registerCommand("_executeProvideSubtypes",async(r,...e)=>{let[t]=e;Vi(Z_(t));let n=Cp.get(t._sessionId);if(n)return n.provideSubtypes(t,We.None)});var Ntt=k("IAiRelatedInformationService");var Vtt=k("IAuthenticationService"),ztt=k("IAuthenticationExtensionsService");function Ep(r,e){let t=typeof e=="number"?r.getGroup(e):e;return r.getGroups(2).indexOf(t??r.activeGroup)}var AC=class r{static count=0;_proxyIdentifierBrand=void 0;sid;nid;constructor(e){this.sid=e,this.nid=++r.count}},GN=[];function U(r){let e=new AC(r);return GN[e.nid]=e,e}var Zf=class{constructor(e){this.value=e}};var qN=k("ILanguageStatusService"),MC=class{_provider=new Vs;onDidChange=this._provider.onDidChange;addStatus(e){return this._provider.register(e.selector,e)}getLanguageStatus(e){return this._provider.ordered(e).sort((t,n)=>{let i=n.severity-t.severity;return i===0&&(i=da(t.source,n.source)),i===0&&(i=da(t.id,n.id)),i})}};At(qN,MC,1);var $nt=new V("inOutput",!1),Gnt=new V("activeLogOutput",!1),qnt=new V("activeLogOutput.levelSettable",!1),jnt=new V("activeLogOutput.level",""),Xnt=new V("activeLogOutput.levelIsDefault",!1),Qnt=new V("outputView.scrollLock",!1),Ynt=k("outputService");var jN={OutputChannels:"workbench.contributions.outputChannels"},NC=class{channels=new Map;_onDidRegisterChannel=new E;onDidRegisterChannel=this._onDidRegisterChannel.event;_onDidRemoveChannel=new E;onDidRemoveChannel=this._onDidRemoveChannel.event;registerChannel(e){this.channels.has(e.id)||(this.channels.set(e.id,e),this._onDidRegisterChannel.fire(e.id))}getChannels(){let e=[];return this.channels.forEach(t=>e.push(t)),e}getChannel(e){return this.channels.get(e)}removeChannel(e){this.channels.delete(e),this._onDidRemoveChannel.fire(e)}};De.add(jN.OutputChannels,new NC);var Jnt=new V("activeOutputChannel","");var Dr=Ri;var XN=10*1e3,eb="remote.tunnels.toRestore",FC="remote.tunnels.toRestoreExpiration",QN=1e3*60*60*24*14,eR="onTunnel",YN=new V("forwardedPortsViewEnabled",!1,c("tunnel.forwardedPortsViewEnabled","Whether the Ports view is enabled."));function JN(r){let e=r.match(/^([a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);if(e)return{host:e[1]?.substring(0,e[1].length-1)||"localhost",port:Number(e[2])}}var BC={source:0,description:c("tunnel.source.user","User Forwarded")},Mit={source:1,description:c("tunnel.source.auto","Auto Forwarded")};function tR(r,e,t){let n=r.get(Ii(e,t));if(n)return n;if(ud(e))for(let i of cd){let o=Ii(i,t);if(r.has(o))return r.get(o)}else if(pd(e))for(let i of Nu){let o=Ii(i,t);if(r.has(o))return r.get(o)}}function ti(r,e,t){let n=tR(r,e,t);if(n)return n;let i=pd(e)?"localhost":ud(e)?"0.0.0.0":void 0;if(i)return tR(r,i,t)}function Ii(r,e){return r+":"+e}function ZN(r){return r&&"host"in r&&typeof r.host=="string"&&"port"in r&&typeof r.port=="number"&&(!("detail"in r)||typeof r.detail=="string")&&(!("pid"in r)||typeof r.pid=="string")}var tb=class r extends O{constructor(t){super();this.configurationService=t;this._register(t.onDidChangeConfiguration(n=>{(n.affectsConfiguration(r.SETTING)||n.affectsConfiguration(r.DEFAULTS))&&this.updateAttributes()})),this.updateAttributes()}static SETTING="remote.portsAttributes";static DEFAULTS="remote.otherPortsAttributes";static RANGE=/^(\d+)\-(\d+)$/;static HOST_AND_PORT=/^([a-z0-9\-]+):(\d{1,5})$/;portsAttributes=[];defaultPortAttributes;_onDidChangeAttributes=new E;onDidChangeAttributes=this._onDidChangeAttributes.event;updateAttributes(){this.portsAttributes=this.readSetting(),this._onDidChangeAttributes.fire()}getAttributes(t,n,i){let o=this.findNextIndex(t,n,i,this.portsAttributes,0),s={label:void 0,onAutoForward:void 0,elevateIfNeeded:void 0,requireLocalPort:void 0,protocol:void 0};for(;o>=0;){let a=this.portsAttributes[o];a.key===t?(s.onAutoForward=a.onAutoForward??s.onAutoForward,s.elevateIfNeeded=a.elevateIfNeeded!==void 0?a.elevateIfNeeded:s.elevateIfNeeded,s.label=a.label??s.label,s.requireLocalPort=a.requireLocalPort,s.protocol=a.protocol):(s.onAutoForward=s.onAutoForward??a.onAutoForward,s.elevateIfNeeded=s.elevateIfNeeded!==void 0?s.elevateIfNeeded:a.elevateIfNeeded,s.label=s.label??a.label,s.requireLocalPort=s.requireLocalPort!==void 0?s.requireLocalPort:void 0,s.protocol=s.protocol??a.protocol),o=this.findNextIndex(t,n,i,this.portsAttributes,o+1)}return s.onAutoForward!==void 0||s.elevateIfNeeded!==void 0||s.label!==void 0||s.requireLocalPort!==void 0||s.protocol!==void 0?s:this.getOtherAttributes()}hasStartEnd(t){return t.start!==void 0&&t.end!==void 0}hasHostAndPort(t){return t.host!==void 0&&t.port!==void 0&&Oe(t.host)&&Gn(t.port)}findNextIndex(t,n,i,o,s){if(s>=o.length)return-1;let a=!ud(n)&&!pd(n),d=o.slice(s).findIndex(u=>Gn(u.key)?a?!1:u.key===t:this.hasStartEnd(u.key)?a?!1:t>=u.key.start&&t<=u.key.end:this.hasHostAndPort(u.key)?t===u.key.port&&n===u.key.host:i?u.key.test(i):!1);return d>=0?d+s:-1}readSetting(){let t=this.configurationService.getValue(r.SETTING);if(!t||!kt(t))return[];let n=[];for(let o in t){if(o===void 0)continue;let s=t[o],a;if(Number(o))a=Number(o);else if(Oe(o))if(r.RANGE.test(o)){let l=o.match(r.RANGE);a={start:Number(l[1]),end:Number(l[2])}}else if(r.HOST_AND_PORT.test(o)){let l=o.match(r.HOST_AND_PORT);a={host:l[1],port:Number(l[2])}}else{let l;try{l=RegExp(o)}catch{}l&&(a=l)}a&&n.push({key:a,elevateIfNeeded:s.elevateIfNeeded,onAutoForward:s.onAutoForward,label:s.label,requireLocalPort:s.requireLocalPort,protocol:s.protocol})}let i=this.configurationService.getValue(r.DEFAULTS);return i&&(this.defaultPortAttributes={elevateIfNeeded:i.elevateIfNeeded,label:i.label,onAutoForward:i.onAutoForward,requireLocalPort:i.requireLocalPort,protocol:i.protocol}),this.sortAttributes(n)}sortAttributes(t){function n(i,o){return Gn(i.key)?i.key:o.hasStartEnd(i.key)?i.key.start:o.hasHostAndPort(i.key)?i.key.port:Number.MAX_VALUE}return t.sort((i,o)=>n(i,this)-n(o,this))}getOtherAttributes(){return this.defaultPortAttributes}static providedActionToAction(t){switch(t){case 1:return"notify";case 2:return"openBrowser";case 6:return"openBrowserOnce";case 3:return"openPreview";case 4:return"silent";case 5:return"ignore";default:return}}async addAttributes(t,n,i){let s=this.configurationService.inspect(r.SETTING).userRemoteValue,a;!s||!kt(s)?a={}:a=_t(s),a[`${t}`]||(a[`${t}`]={});for(let l in n)a[`${t}`][l]=n[l];return this.configurationService.updateValue(r.SETTING,a,i)}},Tp=class extends O{constructor(t,n,i,o,s,a,l,d,u,p){super();this.tunnelService=t;this.storageService=n;this.configurationService=i;this.environmentService=o;this.remoteAuthorityResolverService=s;this.workspaceContextService=a;this.logService=l;this.dialogService=d;this.extensionService=u;this.contextKeyService=p;this.configPortsAttributes=new tb(i),this.tunnelRestoreValue=this.getTunnelRestoreValue(),this._register(this.configPortsAttributes.onDidChangeAttributes(this.updateAttributes,this)),this.forwarded=new Map,this.remoteTunnels=new Map,this.tunnelService.tunnels.then(async h=>{let g=await this.getAttributes(h.map(b=>({port:b.tunnelRemotePort,host:b.tunnelRemoteHost})));for(let b of h)if(b.localAddress){let f=Ii(b.tunnelRemoteHost,b.tunnelRemotePort),v=ti(this._candidates??new Map,b.tunnelRemoteHost,b.tunnelRemotePort);this.forwarded.set(f,{remotePort:b.tunnelRemotePort,remoteHost:b.tunnelRemoteHost,localAddress:b.localAddress,protocol:g?.get(b.tunnelRemotePort)?.protocol??"http",localUri:await this.makeLocalUri(b.localAddress,g?.get(b.tunnelRemotePort)),localPort:b.tunnelLocalPort,name:g?.get(b.tunnelRemotePort)?.label,runningProcess:v?.detail,hasRunningProcess:!!v,pid:v?.pid,privacy:b.privacy,source:BC}),this.remoteTunnels.set(f,b)}}),this.detected=new Map,this._register(this.tunnelService.onTunnelOpened(async h=>{let g=Ii(h.tunnelRemoteHost,h.tunnelRemotePort);if(!ti(this.forwarded,h.tunnelRemoteHost,h.tunnelRemotePort)&&!ti(this.detected,h.tunnelRemoteHost,h.tunnelRemotePort)&&!ti(this.inProgress,h.tunnelRemoteHost,h.tunnelRemotePort)&&h.localAddress){let b=ti(this._candidates??new Map,h.tunnelRemoteHost,h.tunnelRemotePort),f=(await this.getAttributes([{port:h.tunnelRemotePort,host:h.tunnelRemoteHost}]))?.get(h.tunnelRemotePort);this.forwarded.set(g,{remoteHost:h.tunnelRemoteHost,remotePort:h.tunnelRemotePort,localAddress:h.localAddress,protocol:f?.protocol??"http",localUri:await this.makeLocalUri(h.localAddress,f),localPort:h.tunnelLocalPort,name:f?.label,closeable:!0,runningProcess:b?.detail,hasRunningProcess:!!b,pid:b?.pid,privacy:h.privacy,source:BC})}await this.storeForwarded(),this.checkExtensionActivationEvents(),this.remoteTunnels.set(g,h),this._onForwardPort.fire(this.forwarded.get(g))})),this._register(this.tunnelService.onTunnelClosed(h=>this.onTunnelClosed(h,"Other")))}forwarded;inProgress=new Map;detected;remoteTunnels;_onForwardPort=new E;onForwardPort=this._onForwardPort.event;_onClosePort=new E;onClosePort=this._onClosePort.event;_onPortName=new E;onPortName=this._onPortName.event;_candidates;_onCandidatesChanged=new E;onCandidatesChanged=this._onCandidatesChanged.event;_candidateFilter;tunnelRestoreValue;_onEnvironmentTunnelsSet=new E;onEnvironmentTunnelsSet=this._onEnvironmentTunnelsSet.event;_environmentTunnelsSet=!1;configPortsAttributes;restoreListener=void 0;knownPortsRestoreValue;restoreComplete=!1;onRestoreComplete=new E;unrestoredExtensionTunnels=new Map;sessionCachedProperties=new Map;portAttributesProviders=[];extensionHasActivationEvent(){return this.extensionService.extensions.find(t=>t.activationEvents?.includes(eR))?(this.contextKeyService.createKey(YN.key,!0),!0):!1}checkExtensionActivationEvents(){if(this.extensionHasActivationEvent())return;let t=this._register(this.extensionService.onDidRegisterExtensions(()=>{this.extensionHasActivationEvent()&&t.dispose()}))}async onTunnelClosed(t,n){let i=Ii(t.host,t.port);this.forwarded.has(i)&&(this.forwarded.delete(i),await this.storeForwarded(),this._onClosePort.fire(t))}makeLocalUri(t,n){if(t.startsWith("http"))return L.parse(t);let i=n?.protocol??"http";return L.parse(`${i}://${t}`)}async addStorageKeyPostfix(t){let n=this.workspaceContextService.getWorkspace(),i=n.configuration?xn(n.configuration.path):n.folders.length>0?xn(n.folders[0].uri.path):void 0;if(i===void 0){this.logService.debug("Could not get workspace hash for forwarded ports storage key.");return}return`${t}.${this.environmentService.remoteAuthority}.${i}`}async getTunnelRestoreStorageKey(){return this.addStorageKeyPostfix(eb)}async getRestoreExpirationStorageKey(){return this.addStorageKeyPostfix(FC)}async getTunnelRestoreValue(){let t=this.storageService.get(eb,1);if(t)return this.storageService.remove(eb,1),await this.storeForwarded(),t;let n=await this.getTunnelRestoreStorageKey();if(n)return this.storageService.get(n,0)}async restoreForwarded(){if(this.cleanupExpiredTunnelsForRestore(),this.configurationService.getValue("remote.restoreForwardedPorts")){let t=await this.tunnelRestoreValue;if(t&&t!==this.knownPortsRestoreValue){let n=JSON.parse(t)??[];this.logService.trace(`ForwardedPorts: (TunnelModel) restoring ports ${n.map(i=>i.remotePort).join(", ")}`);for(let i of n){let o=ti(this.detected,i.remoteHost,i.remotePort);i.source.source!==2&&!o||i.source.source===2&&o?await this.doForward({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,elevateIfNeeded:!0,source:i.source}):i.source.source===2&&!o&&this.unrestoredExtensionTunnels.set(Ii(i.remoteHost,i.remotePort),i)}}}if(this.restoreComplete=!0,this.onRestoreComplete.fire(),!this.restoreListener){let t=await this.getTunnelRestoreStorageKey();this.restoreListener=this._register(new le),this.restoreListener.add(this.storageService.onDidChangeValue(0,void 0,this.restoreListener)(async n=>{n.key===t&&(this.tunnelRestoreValue=Promise.resolve(this.storageService.get(t,0)),await this.restoreForwarded())}))}}cleanupExpiredTunnelsForRestore(){let t=this.storageService.keys(0,0).filter(n=>n.startsWith(FC));for(let n of t){let i=this.storageService.getNumber(n,0);if(i&&i<Date.now()){this.tunnelRestoreValue=Promise.resolve(void 0);let o=n.replace(FC,eb);this.storageService.remove(n,0),this.storageService.remove(o,0)}}}async storeForwarded(){if(this.configurationService.getValue("remote.restoreForwardedPorts")){let t=Array.from(this.forwarded.values()),n=t.map(a=>({remoteHost:a.remoteHost,remotePort:a.remotePort,localPort:a.localPort,name:a.name,localAddress:a.localAddress,localUri:a.localUri,protocol:a.protocol,source:a.source})),i;t.length>0&&(i=JSON.stringify(n));let o=await this.getTunnelRestoreStorageKey(),s=await this.getRestoreExpirationStorageKey();!i&&o&&s?(this.storageService.remove(o,0),this.storageService.remove(s,0)):i!==this.knownPortsRestoreValue&&o&&s&&(this.storageService.store(o,i,0,0),this.storageService.store(s,Date.now()+QN,0,0)),this.knownPortsRestoreValue=i}}mismatchCooldown=new Date;async showPortMismatchModalIfNeeded(t,n,i){if(!t.tunnelLocalPort||!i?.requireLocalPort||t.tunnelLocalPort===n)return;let o=new Date;if(this.mismatchCooldown.getTime()+XN>o.getTime())return;this.mismatchCooldown=o;let s=c("remote.localPortMismatch.single",`Local port {0} could not be used for forwarding to remote port {1}.

This usually happens when there is already another process using local port {0}.

Port number {2} has been used instead.`,n,t.tunnelRemotePort,t.tunnelLocalPort);return this.dialogService.info(s)}async forward(t,n){return!this.restoreComplete&&this.environmentService.remoteAuthority&&await Q.toPromise(this.onRestoreComplete.event),this.doForward(t,n)}async doForward(t,n){await this.extensionService.activateByEvent(eR);let i=ti(this.forwarded,t.remote.host,t.remote.port);n=n??(n!==null?(await this.getAttributes([t.remote]))?.get(t.remote.port):void 0);let o=t.local!==void 0?t.local:t.remote.port,s;if(i)return this.mergeAttributesIntoExistingTunnel(i,t,n);{let a=this.environmentService.remoteAuthority,l=a?{getAddress:async()=>(await this.remoteAuthorityResolverService.resolveAuthority(a)).authority}:void 0,d=Ii(t.remote.host,t.remote.port);this.inProgress.set(d,!0),t=this.mergeCachedAndUnrestoredProperties(d,t);let u=await this.tunnelService.openTunnel(l,t.remote.host,t.remote.port,void 0,o,t.elevateIfNeeded?t.elevateIfNeeded:n?.elevateIfNeeded,t.privacy,n?.protocol);if(typeof u=="string")s=u;else if(u&&u.localAddress){let p=ti(this._candidates??new Map,t.remote.host,t.remote.port),h=u.protocol?u.protocol==="https"?"https":"http":n?.protocol??"http",g={remoteHost:u.tunnelRemoteHost,remotePort:u.tunnelRemotePort,localPort:u.tunnelLocalPort,name:n?.label??t.name,closeable:!0,localAddress:u.localAddress,protocol:h,localUri:await this.makeLocalUri(u.localAddress,n),runningProcess:p?.detail,hasRunningProcess:!!p,pid:p?.pid,source:t.source??BC,privacy:u.privacy};return this.forwarded.set(d,g),this.remoteTunnels.set(d,u),this.inProgress.delete(d),await this.storeForwarded(),await this.showPortMismatchModalIfNeeded(u,o,n),this._onForwardPort.fire(g),u}this.inProgress.delete(d)}return s}mergeCachedAndUnrestoredProperties(t,n){let i=this.unrestoredExtensionTunnels.has(t)?this.unrestoredExtensionTunnels:this.sessionCachedProperties.has(t)?this.sessionCachedProperties:void 0;if(i){let o=i.get(t);i.delete(t),o&&(n.name=o.name??n.name,n.local=("local"in o?o.local:"localPort"in o?o.localPort:void 0)??n.local,n.privacy=n.privacy)}return n}async mergeAttributesIntoExistingTunnel(t,n,i){let o=i?.label??n.name,s;(p=>(p[p.None=0]="None",p[p.Fire=1]="Fire",p[p.Reopen=2]="Reopen"))(s||={});let a=0;switch(o!==t.name&&(t.name=o,a=1),(i?.protocol||t.protocol!=="http")&&i?.protocol!==t.protocol&&(n.source=t.source,a=2),n.privacy&&t.privacy!==n.privacy&&(a=2),a){case 1:{this._onForwardPort.fire();break}case 2:await this.close(t.remoteHost,t.remotePort,"User"),await this.doForward(n,i)}return ti(this.remoteTunnels,n.remote.host,n.remote.port)}async name(t,n,i){let o=ti(this.forwarded,t,n),s=Ii(t,n);if(o){o.name=i,await this.storeForwarded(),this._onPortName.fire({host:t,port:n});return}else this.detected.has(s)&&(this.detected.get(s).name=i,this._onPortName.fire({host:t,port:n}))}async close(t,n,i){let o=Ii(t,n),s=this.forwarded.get(o);return i==="AutoForwardEnd"&&s&&s.source.source===1&&this.sessionCachedProperties.set(o,{local:s.localPort,name:s.name,privacy:s.privacy}),await this.tunnelService.closeTunnel(t,n),this.onTunnelClosed({host:t,port:n},i)}address(t,n){let i=Ii(t,n);return(this.forwarded.get(i)||this.detected.get(i))?.localAddress}get environmentTunnelsSet(){return this._environmentTunnelsSet}addEnvironmentTunnels(t){if(t)for(let n of t){let i=ti(this._candidates??new Map,n.remoteAddress.host,n.remoteAddress.port),o=typeof n.localAddress=="string"?n.localAddress:Ii(n.localAddress.host,n.localAddress.port);this.detected.set(Ii(n.remoteAddress.host,n.remoteAddress.port),{remoteHost:n.remoteAddress.host,remotePort:n.remoteAddress.port,localAddress:o,protocol:"http",localUri:this.makeLocalUri(o),closeable:!1,runningProcess:i?.detail,hasRunningProcess:!!i,pid:i?.pid,privacy:"constantPrivate",source:{source:2,description:c("tunnel.staticallyForwarded","Statically Forwarded")}}),this.tunnelService.setEnvironmentTunnel(n.remoteAddress.host,n.remoteAddress.port,o,"constantPrivate","http")}this._environmentTunnelsSet=!0,this._onEnvironmentTunnelsSet.fire(),this._onForwardPort.fire()}setCandidateFilter(t){this._candidateFilter=t}async setCandidates(t){let n=t;this._candidateFilter&&(n=await this._candidateFilter(t));let i=this.updateInResponseToCandidates(n);this.logService.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(i.values()).map(o=>o.port).join(", ")}`),this._onCandidatesChanged.fire(i)}updateInResponseToCandidates(t){let n=this._candidates??new Map,i=new Map;return this._candidates=i,t.forEach(o=>{let s=Ii(o.host,o.port);i.set(s,{host:o.host,port:o.port,detail:o.detail,pid:o.pid}),n.has(s)&&n.delete(s);let a=ti(this.forwarded,o.host,o.port);a&&(a.runningProcess=o.detail,a.hasRunningProcess=!0,a.pid=o.pid)}),n.forEach((o,s)=>{let a=JN(s);if(!a)return;let l=ti(this.forwarded,a.host,a.port);l&&(l.runningProcess=void 0,l.hasRunningProcess=!1,l.pid=void 0);let d=ti(this.detected,a.host,a.port);d&&(d.runningProcess=void 0,d.hasRunningProcess=!1,d.pid=void 0)}),n}get candidates(){return this._candidates?Array.from(this._candidates.values()):[]}get candidatesOrUndefined(){return this._candidates?this.candidates:void 0}async updateAttributes(){let t=Array.from(this.forwarded.values()),n=await this.getAttributes(t.map(i=>({port:i.remotePort,host:i.remoteHost})),!1);if(n)for(let i of t){let o=n.get(i.remotePort);(o?.protocol||i.protocol!=="http")&&o?.protocol!==i.protocol&&await this.doForward({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,source:i.source},o),o&&o.label&&o.label!==i.name&&await this.name(i.remoteHost,i.remotePort,o.label)}}async getAttributes(t,n=!0){let i=new Map,o=new Map;t.forEach(u=>{let p=ti(this._candidates??new Map,cd[0],u.port)??u;if(p){i.set(u.port,p);let h=ZN(p)?p.pid:void 0;o.has(h)||o.set(h,[]),o.get(h)?.push(u.port)}});let s=new Map;if(t.forEach(u=>{let p=this.configPortsAttributes.getAttributes(u.port,u.host,i.get(u.port)?.detail);p&&s.set(u.port,p)}),this.portAttributesProviders.length===0||!n)return s.size>0?s:void 0;let a=await Promise.all(this.portAttributesProviders.flatMap(u=>Array.from(o.entries()).map(p=>{let h=p[1],g=i.get(h[0]);return u.providePortAttributes(h,g?.pid,g?.detail,We.None)}))),l=new Map;if(a.forEach(u=>u.forEach(p=>{p&&l.set(p.port,p)})),!s&&!l)return;let d=new Map;return t.forEach(u=>{let p=s.get(u.port),h=l.get(u.port);d.set(u.port,{elevateIfNeeded:p?.elevateIfNeeded,label:p?.label,onAutoForward:p?.onAutoForward??tb.providedActionToAction(h?.autoForwardAction),requireLocalPort:p?.requireLocalPort,protocol:p?.protocol})}),d}addAttributesProvider(t){this.portAttributesProviders.push(t)}};T([CD(1e3)],Tp.prototype,"storeForwarded",1),Tp=T([S(0,wD),S(1,Vt),S(2,Xe),S(3,Dr),S(4,yD),S(5,Qn),S(6,je),S(7,ya),S(8,_n),S(9,ui)],Tp);function nR(r){return r.scheme!==q.file&&r.scheme!==q.vscodeRemote}function eF(r){if(r.folders.length)return r.folders.every(e=>nR(e.uri))?r.folders[0].uri:void 0;if(r.configuration&&nR(r.configuration))return r.configuration}function iR(r){return eF(r)?.scheme}var nb=k("pathService"),$d=class{constructor(e,t,n,i){this.localUserHome=e;this.remoteAgentService=t;this.environmentService=n;this.contextService=i;this.resolveOS=(async()=>(await this.remoteAgentService.getEnvironment())?.os||Br)(),this.resolveUserHome=(async()=>{let o=await this.remoteAgentService.getEnvironment();return this.maybeUnresolvedUserHome=o?.userHome??e})()}resolveOS;resolveUserHome;maybeUnresolvedUserHome;hasValidBasename(e,t,n){return typeof t=="string"||typeof t>"u"?this.resolveOS.then(i=>this.doHasValidBasename(e,i,t)):this.doHasValidBasename(e,t,n)}doHasValidBasename(e,t,n){return e.scheme===q.file||e.scheme===q.vscodeRemote?MT(n??qn(e),t===1):!0}get defaultUriScheme(){return $d.findDefaultUriScheme(this.environmentService,this.contextService)}static findDefaultUriScheme(e,t){if(e.remoteAuthority)return q.vscodeRemote;let n=iR(t.getWorkspace());if(n)return n;let i=t.getWorkspace().folders[0];if(i)return i.uri.scheme;let o=t.getWorkspace().configuration;return o?o.scheme:q.file}userHome(e){return e?.preferLocal?this.localUserHome:this.resolveUserHome}get resolvedUserHome(){return this.maybeUnresolvedUserHome}get path(){return this.resolveOS.then(e=>e===1?It:Pe)}async fileURI(e){let t="";if(await this.resolveOS===1&&(e=e.replace(/\\/g,"/")),e[0]==="/"&&e[1]==="/"){let i=e.indexOf("/",2);i===-1?(t=e.substring(2),e="/"):(t=e.substring(2,i),e=e.substring(i)||"/")}return L.from({scheme:q.file,authority:t,path:e,query:"",fragment:""})}};$d=T([S(1,qf),S(2,Dr),S(3,Qn)],$d);function tF(r){return typeof r=="object"&&"uri"in r&&"pattern"in r}var ib=class{constructor(e,t,n,i,o,s){this.configurationService=e;this.workspaceContextService=t;this.editorGroupsService=n;this.logService=i;this.pathService=o;this.uriIdentityService=s}text(e,t,n={}){e=this.getContentPattern(e,n);let i=this.configurationService.getValue(),o=t&&t.some(a=>!this.configurationService.getValue({resource:a}).search.useRipgrep);return{...this.commonQuery(t?.map(RI),n),type:2,contentPattern:e,previewOptions:n.previewOptions,maxFileSize:n.maxFileSize,usePCRE2:i.search.usePCRE2||o||!1,surroundingContext:n.surroundingContext,userDisabledExcludesAndIgnoreFiles:n.disregardExcludeSettings&&n.disregardIgnoreFiles}}getContentPattern(e,t){let n=this.configurationService.getValue();e.isRegExp&&(e.pattern=e.pattern.replace(/\r?\n/g,"\\n"));let i={...e,wordSeparators:n.editor.wordSeparators};return this.isCaseSensitive(e,t)&&(i.isCaseSensitive=!0),this.isMultiline(e)&&(i.isMultiline=!0),t.notebookSearchConfig?.includeMarkupInput&&(i.notebookInfo||(i.notebookInfo={}),i.notebookInfo.isInNotebookMarkdownInput=t.notebookSearchConfig.includeMarkupInput),t.notebookSearchConfig?.includeMarkupPreview&&(i.notebookInfo||(i.notebookInfo={}),i.notebookInfo.isInNotebookMarkdownPreview=t.notebookSearchConfig.includeMarkupPreview),t.notebookSearchConfig?.includeCodeInput&&(i.notebookInfo||(i.notebookInfo={}),i.notebookInfo.isInNotebookCellInput=t.notebookSearchConfig.includeCodeInput),t.notebookSearchConfig?.includeOutput&&(i.notebookInfo||(i.notebookInfo={}),i.notebookInfo.isInNotebookCellOutput=t.notebookSearchConfig.includeOutput),i}file(e,t={}){return{...this.commonQuery(e,t),type:1,filePattern:t.filePattern?t.filePattern.trim():t.filePattern,exists:t.exists,sortByScore:t.sortByScore,cacheKey:t.cacheKey,shouldGlobMatchFilePattern:t.shouldGlobSearch}}handleIncludeExclude(e,t){if(!e)return{};if(Array.isArray(e)){if(e=e.filter(n=>n.length>0).map(rb),!e.length)return{}}else e=rb(e);return t?this.parseSearchPaths(e):{pattern:UC(...Array.isArray(e)?e:[e])}}commonQuery(e=[],t={}){let n=Array.isArray(t.excludePattern)?t.excludePattern.map(u=>u.pattern).flat():t.excludePattern;n=n?.length===1?n[0]:n;let i=this.handleIncludeExclude(t.includePattern,t.expandPatterns),o=this.handleIncludeExclude(n,t.expandPatterns),s=e.length>1,a=(i.searchPaths&&i.searchPaths.length?i.searchPaths.map(u=>this.getFolderQueryForSearchPath(u,t,o)):e.map(u=>this.getFolderQueryForRoot(u,t,o,s))).filter(u=>!!u),l={_reason:t._reason,folderQueries:a,usingSearchPaths:!!(i.searchPaths&&i.searchPaths.length),extraFileResources:t.extraFileResources,excludePattern:o.pattern,includePattern:i.pattern,onlyOpenEditors:t.onlyOpenEditors,maxResults:t.maxResults,onlyFileScheme:t.onlyFileScheme};if(t.onlyOpenEditors){let u=On(this.editorGroupsService.groups.flatMap(g=>g.editors.map(b=>b.resource)));this.logService.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));let p=u.filter(g=>LC(l,g.fsPath)),h=this.commonQueryFromFileList(p);return this.logService.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(h)),{...l,...h}}let d=t.extraFileResources&&t.extraFileResources.filter(u=>LC(l,u.fsPath));return l.extraFileResources=d&&d.length?d:void 0,l}commonQueryFromFileList(e){let t=[],n=new Ft,i={},o=!1;return e.forEach(s=>{if(s.scheme===q.walkThrough)return;if($T(s)){let l=this.workspaceContextService.getWorkspaceFolder(s)?.uri??this.uriIdentityService.extUri.dirname(s),d=n.get(l);d||(o=!0,d={folder:l,includePattern:{}},t.push(d),n.set(l,d));let u=gl(l.fsPath,s.fsPath);In(d.includePattern)[u.replace(/\\/g,"/")]=!0}else s.fsPath&&(o=!0,i[s.fsPath]=!0)}),{folderQueries:t,includePattern:i,usingSearchPaths:!0,excludePattern:o?void 0:{"**/*":!0}}}isCaseSensitive(e,t){if(t.isSmartCase){if(e.isRegExp){if(Nv(e.pattern,!0))return!0}else if(Nv(e.pattern))return!0}return!!e.isCaseSensitive}isMultiline(e){return e.isMultiline||e.isRegExp&&eS(e.pattern)||e.pattern.indexOf(`
`)>=0?!0:!!e.isMultiline}parseSearchPaths(e){let t=p=>wi(p)||/^\.\.?([\/\\]|$)/.test(p),i=(Array.isArray(e)?e:iF(e)).map(p=>{let h=this.pathService.resolvedUserHome;return h?rk(p,h.scheme===q.file?h.fsPath:h.path):p}),o=Qb(i,p=>t(p)?"searchPaths":"exprSegments"),s=(o.exprSegments||[]).map(p=>Oc(p,"/")).map(p=>Oc(p,"\\")).map(p=>(p[0]==="."&&(p="*"+p),rF(p))),a={},l=this.expandSearchPathPatterns(o.searchPaths||[]);l&&l.length&&(a.searchPaths=l);let d=s.flat(),u=UC(...d);return u&&(a.pattern=u),a}getExcludesForFolder(e,t){return t.disregardExcludeSettings?void 0:J_(e,!t.disregardSearchExcludeSettings)}expandSearchPathPatterns(e){if(!e||!e.length)return[];let t=e.flatMap(i=>{let{pathPortion:o,globPortion:s}=nF(i);return s&&(s=WC(s)),this.expandOneSearchPath(o).flatMap(l=>this.resolveOneSearchPathPattern(l,s))}),n=new Map;return t.forEach(i=>{let o=i.searchPath.toString(),s=n.get(o);s?i.pattern&&(s.pattern=s.pattern||{},s.pattern[i.pattern]=!0):n.set(o,{searchPath:i.searchPath,pattern:i.pattern?UC(i.pattern):void 0})}),Array.from(n.values())}expandOneSearchPath(e){if(wi(e)){let t=this.workspaceContextService.getWorkspace().folders;return t[0]&&t[0].uri.scheme!==q.file?[{searchPath:t[0].uri.with({path:e})}]:[{searchPath:L.file(Ti(e))}]}if(this.workspaceContextService.getWorkbenchState()===2){let t=this.workspaceContextService.getWorkspace().folders[0].uri;if(e=rb(e),e.startsWith("../")||e===".."){let i=Pe.resolve(t.path,e);return[{searchPath:t.with({path:i})}]}let n=WC(e);return[{searchPath:t,pattern:n}]}else{if(e==="./"||e===".\\")return[];{let t=e.replace(/^\.[\/\\]/,""),i=this.workspaceContextService.getWorkspace().folders.map(o=>{let s=t.match(new RegExp(`^${bn(o.name)}(?:/(.*)|$)`));return s?{match:s,folder:o}:null}).filter(Ll);if(i.length)return i.map(o=>{let s=o.match[1];return{searchPath:o.folder.uri,pattern:s&&WC(s)}});{let o=e.match(/\.[\/\\](.+)[\/\\]?/),s=o?o[1]:e,a=c("search.noWorkspaceWithName","Workspace folder does not exist: {0}",s);throw new Error(a)}}}}resolveOneSearchPathPattern(e,t){let n=e.pattern&&t?`${e.pattern}/${t}`:e.pattern||t,i=[{searchPath:e.searchPath,pattern:n}];return n&&!n.endsWith("**")&&i.push({searchPath:e.searchPath,pattern:n+"/**"}),i}getFolderQueryForSearchPath(e,t,n){let i=this.getFolderQueryForRoot(RI(e.searchPath),t,n,!1);return i?{...i,includePattern:e.pattern}:null}getFolderQueryForRoot(e,t,n,i){let o,s=L.isUri(e)?e:e.uri,a=t.excludePattern?.map(g=>{let b=t.excludePattern&&tF(g)?g.uri:void 0;return!b||!(L.isUri(e)&&this.uriIdentityService.extUri.isEqual(e,b))?b:void 0});if(a?.length||(a=[void 0]),n.searchPaths){let g=n.searchPaths.filter(b=>bt(b.searchPath,s))[0];if(g&&!g.pattern)return null;g&&(o=g.pattern)}let l=this.configurationService.getValue({resource:s}),u={...this.getExcludesForFolder(l,t)||{},...o||{}},p=L.isUri(e)?qn(e):e.name,h=a.map(g=>Object.keys(u).length>0?{folder:g,pattern:u}:void 0).filter(g=>g);return{folder:s,folderName:i?p:void 0,excludePattern:h,fileEncoding:l.files&&l.files.encoding,disregardIgnoreFiles:typeof t.disregardIgnoreFiles=="boolean"?t.disregardIgnoreFiles:!l.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof t.disregardGlobalIgnoreFiles=="boolean"?t.disregardGlobalIgnoreFiles:!l.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof t.disregardParentIgnoreFiles=="boolean"?t.disregardParentIgnoreFiles:!l.search.useParentIgnoreFiles,ignoreSymlinks:typeof t.ignoreSymlinks=="boolean"?t.ignoreSymlinks:!l.search.followSymlinks}}};ib=T([S(0,Xe),S(1,Qn),S(2,Ji),S(3,je),S(4,nb),S(5,Gi)],ib);function nF(r){let e=r.match(/[\*\{\}\(\)\[\]\?]/);if(e){let t=e.index,n=r.substr(0,t).match(/[/|\\][^/\\]*$/);if(n){let i=r.substr(0,n.index);return i.match(/[/\\]/)||(i+="/"),{pathPortion:i,globPortion:r.substr((n.index||0)+1)}}}return{pathPortion:r}}function UC(...r){return r.length?r.reduce((e,t)=>(e[t]=!0,e),Object.create(null)):void 0}function iF(r){return pm(r,",").map(e=>e.trim()).filter(e=>!!e.length)}function rF(r){return[`**/${r}/**`,`**/${r}`].map(t=>t.replace(/\*\*\/\*\*/g,"**"))}function rb(r){return r.replace(/\\/g,"/")}function WC(r){return rb(r).replace(/^\.\//,"").replace(/\/+$/g,"")}var iot=k("IUserDataProfileService"),rot=k("IUserDataProfileManagementService");var oot=k("IUserDataProfileImportExportService"),sot=No("defaultProfile-icon",ee.settings,c("defaultProfileIcon","Icon for Default Profile.")),oF=ii("profiles","Profiles"),aot={...oF},sF="code-profile",lot=[{name:c("profile","Profile"),extensions:[sF]}],dot=new V("profiles.enabled",!0),cot=new V("currentProfile",""),uot=new V("isCurrentProfileTransient",!1),pot=new V("hasProfiles",!1);var Bdt={MainThreadAuthentication:U("MainThreadAuthentication"),MainThreadBulkEdits:U("MainThreadBulkEdits"),MainThreadLanguageModels:U("MainThreadLanguageModels"),MainThreadEmbeddings:U("MainThreadEmbeddings"),MainThreadChatAgents2:U("MainThreadChatAgents2"),MainThreadChatVariables:U("MainThreadChatVariables"),MainThreadLanguageModelTools:U("MainThreadChatSkills"),MainThreadClipboard:U("MainThreadClipboard"),MainThreadCommands:U("MainThreadCommands"),MainThreadComments:U("MainThreadComments"),MainThreadConfiguration:U("MainThreadConfiguration"),MainThreadConsole:U("MainThreadConsole"),MainThreadDebugService:U("MainThreadDebugService"),MainThreadDecorations:U("MainThreadDecorations"),MainThreadDiagnostics:U("MainThreadDiagnostics"),MainThreadDialogs:U("MainThreadDiaglogs"),MainThreadDocuments:U("MainThreadDocuments"),MainThreadDocumentContentProviders:U("MainThreadDocumentContentProviders"),MainThreadTextEditors:U("MainThreadTextEditors"),MainThreadEditorInsets:U("MainThreadEditorInsets"),MainThreadEditorTabs:U("MainThreadEditorTabs"),MainThreadErrors:U("MainThreadErrors"),MainThreadTreeViews:U("MainThreadTreeViews"),MainThreadDownloadService:U("MainThreadDownloadService"),MainThreadLanguageFeatures:U("MainThreadLanguageFeatures"),MainThreadLanguages:U("MainThreadLanguages"),MainThreadLogger:U("MainThreadLogger"),MainThreadMessageService:U("MainThreadMessageService"),MainThreadOutputService:U("MainThreadOutputService"),MainThreadProgress:U("MainThreadProgress"),MainThreadQuickDiff:U("MainThreadQuickDiff"),MainThreadQuickOpen:U("MainThreadQuickOpen"),MainThreadStatusBar:U("MainThreadStatusBar"),MainThreadSecretState:U("MainThreadSecretState"),MainThreadStorage:U("MainThreadStorage"),MainThreadSpeech:U("MainThreadSpeechProvider"),MainThreadTelemetry:U("MainThreadTelemetry"),MainThreadTerminalService:U("MainThreadTerminalService"),MainThreadTerminalShellIntegration:U("MainThreadTerminalShellIntegration"),MainThreadWebviews:U("MainThreadWebviews"),MainThreadWebviewPanels:U("MainThreadWebviewPanels"),MainThreadWebviewViews:U("MainThreadWebviewViews"),MainThreadCustomEditors:U("MainThreadCustomEditors"),MainThreadUrls:U("MainThreadUrls"),MainThreadUriOpeners:U("MainThreadUriOpeners"),MainThreadProfileContentHandlers:U("MainThreadProfileContentHandlers"),MainThreadWorkspace:U("MainThreadWorkspace"),MainThreadFileSystem:U("MainThreadFileSystem"),MainThreadFileSystemEventService:U("MainThreadFileSystemEventService"),MainThreadExtensionService:U("MainThreadExtensionService"),MainThreadSCM:U("MainThreadSCM"),MainThreadSearch:U("MainThreadSearch"),MainThreadShare:U("MainThreadShare"),MainThreadTask:U("MainThreadTask"),MainThreadWindow:U("MainThreadWindow"),MainThreadLabelService:U("MainThreadLabelService"),MainThreadNotebook:U("MainThreadNotebook"),MainThreadNotebookDocuments:U("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:U("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:U("MainThreadNotebookKernels"),MainThreadNotebookRenderers:U("MainThreadNotebookRenderers"),MainThreadInteractive:U("MainThreadInteractive"),MainThreadTheming:U("MainThreadTheming"),MainThreadTunnelService:U("MainThreadTunnelService"),MainThreadManagedSockets:U("MainThreadManagedSockets"),MainThreadTimeline:U("MainThreadTimeline"),MainThreadTesting:U("MainThreadTesting"),MainThreadLocalization:U("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:U("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:U("MainThreadAiEmbeddingVector")},Gd={ExtHostCommands:U("ExtHostCommands"),ExtHostConfiguration:U("ExtHostConfiguration"),ExtHostDiagnostics:U("ExtHostDiagnostics"),ExtHostDebugService:U("ExtHostDebugService"),ExtHostDecorations:U("ExtHostDecorations"),ExtHostDocumentsAndEditors:U("ExtHostDocumentsAndEditors"),ExtHostDocuments:U("ExtHostDocuments"),ExtHostDocumentContentProviders:U("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:U("ExtHostDocumentSaveParticipant"),ExtHostEditors:U("ExtHostEditors"),ExtHostTreeViews:U("ExtHostTreeViews"),ExtHostFileSystem:U("ExtHostFileSystem"),ExtHostFileSystemInfo:U("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:U("ExtHostFileSystemEventService"),ExtHostLanguages:U("ExtHostLanguages"),ExtHostLanguageFeatures:U("ExtHostLanguageFeatures"),ExtHostQuickOpen:U("ExtHostQuickOpen"),ExtHostQuickDiff:U("ExtHostQuickDiff"),ExtHostStatusBar:U("ExtHostStatusBar"),ExtHostShare:U("ExtHostShare"),ExtHostExtensionService:U("ExtHostExtensionService"),ExtHostLogLevelServiceShape:U("ExtHostLogLevelServiceShape"),ExtHostTerminalService:U("ExtHostTerminalService"),ExtHostTerminalShellIntegration:U("ExtHostTerminalShellIntegration"),ExtHostSCM:U("ExtHostSCM"),ExtHostSearch:U("ExtHostSearch"),ExtHostTask:U("ExtHostTask"),ExtHostWorkspace:U("ExtHostWorkspace"),ExtHostWindow:U("ExtHostWindow"),ExtHostWebviews:U("ExtHostWebviews"),ExtHostWebviewPanels:U("ExtHostWebviewPanels"),ExtHostCustomEditors:U("ExtHostCustomEditors"),ExtHostWebviewViews:U("ExtHostWebviewViews"),ExtHostEditorInsets:U("ExtHostEditorInsets"),ExtHostEditorTabs:U("ExtHostEditorTabs"),ExtHostProgress:U("ExtHostProgress"),ExtHostComments:U("ExtHostComments"),ExtHostSecretState:U("ExtHostSecretState"),ExtHostStorage:U("ExtHostStorage"),ExtHostUrls:U("ExtHostUrls"),ExtHostUriOpeners:U("ExtHostUriOpeners"),ExtHostProfileContentHandlers:U("ExtHostProfileContentHandlers"),ExtHostOutputService:U("ExtHostOutputService"),ExtHostLabelService:U("ExtHostLabelService"),ExtHostNotebook:U("ExtHostNotebook"),ExtHostNotebookDocuments:U("ExtHostNotebookDocuments"),ExtHostNotebookEditors:U("ExtHostNotebookEditors"),ExtHostNotebookKernels:U("ExtHostNotebookKernels"),ExtHostNotebookRenderers:U("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:U("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:U("ExtHostInteractive"),ExtHostChatAgents2:U("ExtHostChatAgents"),ExtHostChatVariables:U("ExtHostChatVariables"),ExtHostLanguageModelTools:U("ExtHostChatSkills"),ExtHostChatProvider:U("ExtHostChatProvider"),ExtHostSpeech:U("ExtHostSpeech"),ExtHostEmbeddings:U("ExtHostEmbeddings"),ExtHostAiRelatedInformation:U("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:U("ExtHostAiEmbeddingVector"),ExtHostTheming:U("ExtHostTheming"),ExtHostTunnelService:U("ExtHostTunnelService"),ExtHostManagedSockets:U("ExtHostManagedSockets"),ExtHostAuthentication:U("ExtHostAuthentication"),ExtHostTimeline:U("ExtHostTimeline"),ExtHostTesting:U("ExtHostTesting"),ExtHostTelemetry:U("ExtHostTelemetry"),ExtHostLocalization:U("ExtHostLocalization")};var VC=class{buffers=[];add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function rR(r,e){if(e.serializeBuffersForPostMessage){let t=new VC,i=JSON.stringify(r,(s,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:t.add(a)};if(ArrayBuffer.isView(a)){let l=aF(a);if(l)return{$$vscode_array_buffer_reference$$:!0,index:t.add(a.buffer),view:{type:l,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),o=t.buffers.map(s=>{let a=new Uint8Array(s);return Ne.wrap(a)});return{message:i,buffers:o}}else return{message:JSON.stringify(r),buffers:[]}}function aF(r){switch(r.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function oR(r,e){let t=e.map(o=>{let s=new ArrayBuffer(o.byteLength);return new Uint8Array(s).set(o.buffer),s}),n=e.length?(o,s)=>{if(s&&typeof s=="object"&&s.$$vscode_array_buffer_reference$$){let a=s,{index:l}=a,d=t[l];if(a.view)switch(a.view.type){case 1:return new Int8Array(d,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(d,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(d,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(d,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(d,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(d,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(d,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(d,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(d,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(d,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(d,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return d}return s}:void 0;return{message:JSON.parse(r,n),arrayBuffers:t}}var qd=class r{constructor(e,t){this.storageService=t;this.id=r.COMMON_PREFIX+e}static applicationMementos=new Map;static profileMementos=new Map;static workspaceMementos=new Map;static COMMON_PREFIX="memento/";id;getMemento(e,t){switch(e){case 1:{let n=r.workspaceMementos.get(this.id);return n||(n=new wp(this.id,e,t,this.storageService),r.workspaceMementos.set(this.id,n)),n.getMemento()}case 0:{let n=r.profileMementos.get(this.id);return n||(n=new wp(this.id,e,t,this.storageService),r.profileMementos.set(this.id,n)),n.getMemento()}case-1:{let n=r.applicationMementos.get(this.id);return n||(n=new wp(this.id,e,t,this.storageService),r.applicationMementos.set(this.id,n)),n.getMemento()}}}onDidChangeValue(e,t){return this.storageService.onDidChangeValue(e,this.id,t)}saveMemento(){r.workspaceMementos.get(this.id)?.save(),r.profileMementos.get(this.id)?.save(),r.applicationMementos.get(this.id)?.save()}reloadMemento(e){let t;switch(e){case-1:t=r.applicationMementos.get(this.id);break;case 0:t=r.profileMementos.get(this.id);break;case 1:t=r.workspaceMementos.get(this.id);break}t?.reload()}static clear(e){switch(e){case 1:r.workspaceMementos.clear();break;case 0:r.profileMementos.clear();break;case-1:r.applicationMementos.clear();break}}},wp=class{constructor(e,t,n,i){this.id=e;this.scope=t;this.target=n;this.storageService=i;this.mementoObj=this.doLoad()}mementoObj;doLoad(){try{return this.storageService.getObject(this.id,this.scope,{})}catch(e){Ae(`[memento]: failed to parse contents: ${e} (id: ${this.id}, scope: ${this.scope}, contents: ${this.storageService.get(this.id,this.scope)})`)}return{}}getMemento(){return this.mementoObj}reload(){for(let e of Object.getOwnPropertyNames(this.mementoObj))delete this.mementoObj[e];Object.assign(this.mementoObj,this.doLoad())}save(){ca(this.mementoObj)?this.storageService.remove(this.id,this.scope):this.storageService.store(this.id,this.mementoObj,this.scope,this.target)}};var Act=new V("webviewFindWidgetVisible",!1),Mct=new V("webviewFindWidgetFocused",!1),Nct=new V("webviewFindWidgetEnabled",!1),nl=k("webviewService");var kp=class{_memento;_state;constructor(e,t){this._memento=new qd(e,t),this._state=this._memento.getMemento(-1,1)}getOrigin(e,t){let n=this._getKey(e,t),i=this._state[n];if(i&&typeof i=="string")return i;let o=dt();return this._state[n]=o,this._memento.saveMemento(),o}_getKey(e,t){return JSON.stringify({viewType:e,key:t})}};kp=T([S(1,Vt)],kp);var $s=class{_store;constructor(e,t){this._store=new kp(e,t)}getOrigin(e,t){return this._store.getOrigin(e,t.value)}};$s=T([S(1,Vt)],$s);var lF;(t=>{function r(){return sb.INSTANCE.getNamedCustomers()}t.getNamedCustomers=r;function e(){return sb.INSTANCE.getCustomers()}t.getCustomers=e})(lF||={});var sb=class r{static INSTANCE=new r;_namedCustomers;_customers;constructor(){this._namedCustomers=[],this._customers=[]}registerNamedCustomer(e,t){let n=[e,t];this._namedCustomers.push(n)}getNamedCustomers(){return this._namedCustomers}registerCustomer(e){this._customers.push(e)}getCustomers(){return this._customers}};var jd=class extends O{constructor(t,n,i){super();this._openerService=n;this._productService=i;this._proxy=t.getProxy(Gd.ExtHostWebviews)}static standardSupportedLinkSchemes=new Set([q.http,q.https,q.mailto,q.vscode,"vscode-insider"]);_proxy;_webviews=new Map;addWebview(t,n,i){if(this._webviews.has(t))throw new Error("Webview already registered");this._webviews.set(t,n),this.hookupWebviewEventDelegate(t,n,i)}$setHtml(t,n){this.tryGetWebview(t)?.setHtml(n)}$setOptions(t,n){let i=this.tryGetWebview(t);i&&(i.contentOptions=zC(n))}async $postMessage(t,n,...i){let o=this.tryGetWebview(t);if(!o)return!1;let{message:s,arrayBuffers:a}=oR(n,i);return o.postMessage(s,a)}hookupWebviewEventDelegate(t,n,i){let o=new le;o.add(n.onDidClickLink(s=>this.onDidClickLink(t,s))),o.add(n.onMessage(s=>{let a=rR(s.message,i);this._proxy.$onMessage(t,a.message,new Zf(a.buffers))})),o.add(n.onMissingCsp(s=>this._proxy.$onMissingCsp(t,s.value))),o.add(n.onDidDispose(()=>{o.dispose(),this._webviews.delete(t)}))}onDidClickLink(t,n){let i=this.getWebview(t);this.isSupportedLink(i,L.parse(n))&&this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:Array.isArray(i.contentOptions.enableCommandUris)||i.contentOptions.enableCommandUris===!0,fromWorkspace:!0})}isSupportedLink(t,n){return jd.standardSupportedLinkSchemes.has(n.scheme)||!Yt&&this._productService.urlProtocol===n.scheme?!0:n.scheme===q.command?Array.isArray(t.contentOptions.enableCommandUris)?t.contentOptions.enableCommandUris.includes(n.path):t.contentOptions.enableCommandUris===!0:!1}tryGetWebview(t){return this._webviews.get(t)}getWebview(t){let n=this.tryGetWebview(t);if(!n)throw new Error(`Unknown webview handle:${t}`);return n}getWebviewResolvedFailedContent(t){return`<!DOCTYPE html>
		<html>
			<head>
				<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
				<meta http-equiv="Content-Security-Policy" content="default-src 'none';">
			</head>
			<body>${c("errorMessage","An error occurred while loading view: {0}",_v(t))}</body>
		</html>`}};jd=T([S(1,wm),S(2,ps)],jd);function Dp(r){return{id:r.id,location:L.revive(r.location)}}function zC(r){return{allowScripts:r.enableScripts,allowForms:r.enableForms,enableCommandUris:r.enableCommandUris,localResourceRoots:Array.isArray(r.localResourceRoots)?r.localResourceRoots.map(e=>L.revive(e)):void 0,portMapping:r.portMapping}}var Xd=class extends _s{_originalModel;get originalModel(){return this._originalModel}_modifiedModel;get modifiedModel(){return this._modifiedModel}constructor(e,t){super(),this._originalModel=e,this._modifiedModel=t}async resolve(){await Promise.all([this._originalModel?.resolve(),this._modifiedModel?.resolve()])}isResolved(){return!!(this._originalModel?.isResolved()&&this._modifiedModel?.isResolved())}dispose(){super.dispose()}};var ab=class extends Xd{_originalModel;get originalModel(){return this._originalModel}_modifiedModel;get modifiedModel(){return this._modifiedModel}_textDiffEditorModel=void 0;get textDiffEditorModel(){return this._textDiffEditorModel}constructor(e,t){super(e,t),this._originalModel=e,this._modifiedModel=t,this.updateTextDiffEditorModel()}async resolve(){await super.resolve(),this.updateTextDiffEditorModel()}updateTextDiffEditorModel(){this.originalModel?.isResolved()&&this.modifiedModel?.isResolved()&&(this._textDiffEditorModel?(this._textDiffEditorModel.original=this.originalModel.textEditorModel,this._textDiffEditorModel.modified=this.modifiedModel.textEditorModel):this._textDiffEditorModel={original:this.originalModel.textEditorModel,modified:this.modifiedModel.textEditorModel})}isResolved(){return!!this._textDiffEditorModel}isReadonly(){return!!this.modifiedModel&&this.modifiedModel.isReadonly()}dispose(){this._textDiffEditorModel=void 0,super.dispose()}};var Mi=class extends Wn{constructor(t,n,i,o,s,a){super(t,n,i,o,a);this.original=i;this.modified=o;this.forceOpenAsBinary=s}static ID="workbench.editors.diffEditorInput";get typeId(){return Mi.ID}get editorId(){return this.modified.editorId===this.original.editorId?this.modified.editorId:void 0}get capabilities(){let t=super.capabilities;return this.labels.forceDescription&&(t|=64),t}cachedModel=void 0;labels=this.computeLabels();computeLabels(){let t,n=!1;if(this.preferredName)t=this.preferredName;else{let p=this.original.getName(),h=this.modified.getName();t=c("sideBySideLabels","{0} \u2194 {1}",p,h),n=p===h}let i,o,s;if(this.preferredDescription)i=this.preferredDescription,o=this.preferredDescription,s=this.preferredDescription;else{i=this.computeLabel(this.original.getDescription(0),this.modified.getDescription(0)),s=this.computeLabel(this.original.getDescription(2),this.modified.getDescription(2));let p=this.original.getDescription(1),h=this.modified.getDescription(1);if(typeof p=="string"&&typeof h=="string"&&(p||h)){let[g,b]=ok([p,h]);o=this.computeLabel(g,b)}}let a=this.computeLabel(this.original.getTitle(0)??this.original.getName(),this.modified.getTitle(0)??this.modified.getName()," \u2194 "),l=this.computeLabel(this.original.getTitle(1)??this.original.getName(),this.modified.getTitle(1)??this.modified.getName()," \u2194 "),d=this.computeLabel(this.original.getTitle(2)??this.original.getName(),this.modified.getTitle(2)??this.modified.getName()," \u2194 "),u=this.getPreferredTitle();return u&&(a=`${u} (${a})`,l=`${u} (${l})`,d=`${u} (${d})`),{name:t,shortDescription:i,mediumDescription:o,longDescription:s,forceDescription:n,shortTitle:a,mediumTitle:l,longTitle:d}}computeLabel(t,n,i=" - "){if(!(!t||!n))return t===n?n:`${t}${i}${n}`}getName(){return this.labels.name}getDescription(t=1){switch(t){case 0:return this.labels.shortDescription;case 2:return this.labels.longDescription;case 1:default:return this.labels.mediumDescription}}getTitle(t){switch(t){case 0:return this.labels.shortTitle;case 2:return this.labels.longTitle;default:case 1:return this.labels.mediumTitle}}async resolve(){let t=await this.createModel();return this.cachedModel?.dispose(),this.cachedModel=t,this.cachedModel}prefersEditorPane(t){return this.forceOpenAsBinary?t.find(n=>n.typeId===e_):t.find(n=>n.typeId===Z1)}async createModel(){let[t,n]=await Promise.all([this.original.resolve(),this.modified.resolve()]);return n instanceof yr&&t instanceof yr?new ab(t,n):new Xd(FI(t)?t:void 0,FI(n)?n:void 0)}toUntyped(t){let n=super.toUntyped(t);if(n)return{...n,modified:n.primary,original:n.secondary}}matches(t){return this===t?!0:t instanceof Mi?this.modified.matches(t.modified)&&this.original.matches(t.original)&&t.forceOpenAsBinary===this.forceOpenAsBinary:Er(t)?this.modified.matches(t.modified)&&this.original.matches(t.original):!1}dispose(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=void 0),super.dispose()}};Mi=T([S(5,Ht)],Mi);var Qd=class extends O{constructor(t,n){super();this._lifecycleService=t;this._configService=n;this._register(this._configService.onDidChangeConfiguration(i=>{i.affectsConfiguration("workbench.iconTheme")&&this.updateStyleSheet()}))}_icons=new Map;_styleElement;dispose(){super.dispose(),this._styleElement=void 0}get styleElement(){return this._styleElement||(this._styleElement=Fl(void 0,void 0,this._store),this._styleElement.className="webview-icons"),this._styleElement}setIcons(t,n){n?this._icons.set(t,n):this._icons.delete(t),this.updateStyleSheet()}async updateStyleSheet(){await this._lifecycleService.when(1);let t=[];if(this._configService.getValue("workbench.iconTheme")!==null)for(let[n,i]of this._icons){let o=`.show-file-icons .webview-${n}-name-file-icon::before`;try{t.push(`.monaco-workbench.vs ${o}, .monaco-workbench.hc-light ${o} { content: ""; background-image: ${dI(i.light)}; }`,`.monaco-workbench.vs-dark ${o}, .monaco-workbench.hc-black ${o} { content: ""; background-image: ${dI(i.dark)}; }`)}catch{}}this.styleElement.textContent=t.join(`
`)}};Qd=T([S(0,ao),S(1,Xe)],Qd);var Xt=class r extends vi{constructor(t,n,i){super();this._iconManager=i;this.viewType=t.viewType,this.providedId=t.providedId,this._name=t.name,this._webview=n}static typeId="workbench.editors.webviewInput";get typeId(){return r.typeId}get editorId(){return this.viewType}get capabilities(){return 138}_resourceId=dt();_name;_iconPath;_group;_webview;_hasTransfered=!1;get resource(){return L.from({scheme:q.webviewPanel,path:`webview-panel/webview-${this._resourceId}`})}viewType;providedId;dispose(){this.isDisposed()||this._hasTransfered||this._webview?.dispose(),super.dispose()}getName(){return this._name}getTitle(t){return this.getName()}getDescription(){}setName(t){this._name=t,this.webview.setTitle(t),this._onDidChangeLabel.fire()}get webview(){return this._webview}get extension(){return this.webview.extension}get iconPath(){return this._iconPath}set iconPath(t){this._iconPath=t,this._iconManager.setIcons(this._resourceId,t)}matches(t){return super.matches(t)||t===this}get group(){return this._group}updateGroup(t){this._group=t}transfer(t){if(!this._hasTransfered)return this._hasTransfered=!0,t._webview=this._webview,t}claim(t,n,i){return this._webview.claim(t,n,i)}};var _p=class extends Lg{constructor(t,n,i){super(n);this.id=t;this.memento=new qd(this.id,i),this._register(i.onWillSaveState(()=>{this.saveState(),this.memento.saveMemento()}))}memento;getId(){return this.id}getMemento(t,n){return this.memento.getMemento(t,n)}reloadMemento(t){return this.memento.reloadMemento(t)}onDidChangeMementoValue(t,n){return this.memento.onDidChangeValue(t,n)}saveState(){}};var HC={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:fr.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};var nn;(o=>(o.Tap="-monaco-gesturetap",o.Change="-monaco-gesturechange",o.Start="-monaco-gesturestart",o.End="-monaco-gesturesend",o.Contextmenu="-monaco-gesturecontextmenu"))(nn||={});var hn=class hn extends O{static SCROLL_FRICTION=-.005;static INSTANCE;static HOLD_DELAY=700;dispatched=!1;targets=new an;ignoreTargets=new an;handle;activeTouches;_lastSetTapCountTime;static CLEAR_TAP_COUNT_TIME=400;constructor(){super(),this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Q.runAndSubscribe(iI,({window:e,disposables:t})=>{t.add(ie(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(ie(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(ie(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:pe,disposables:this._store}))}static addTarget(e){if(!hn.isTouchDevice())return O.None;hn.INSTANCE||(hn.INSTANCE=lv(new hn));let t=hn.INSTANCE.targets.push(e);return j(t)}static ignoreTarget(e){if(!hn.isTouchDevice())return O.None;hn.INSTANCE||(hn.INSTANCE=lv(new hn));let t=hn.INSTANCE.ignoreTargets.push(e);return j(t)}static isTouchDevice(){return"ontouchstart"in pe||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){let o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};let s=this.newGestureEvent(nn.Start,o.target);s.pageX=o.pageX,s.pageY=o.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){let n=Date.now(),i=Object.keys(this.activeTouches).length;for(let o=0,s=t.changedTouches.length;o<s;o++){let a=t.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}let l=this.activeTouches[a.identifier],d=Date.now()-l.initialTimeStamp;if(d<hn.HOLD_DELAY&&Math.abs(l.initialPageX-zn(l.rollingPageX))<30&&Math.abs(l.initialPageY-zn(l.rollingPageY))<30){let u=this.newGestureEvent(nn.Tap,l.initialTarget);u.pageX=zn(l.rollingPageX),u.pageY=zn(l.rollingPageY),this.dispatchEvent(u)}else if(d>=hn.HOLD_DELAY&&Math.abs(l.initialPageX-zn(l.rollingPageX))<30&&Math.abs(l.initialPageY-zn(l.rollingPageY))<30){let u=this.newGestureEvent(nn.Contextmenu,l.initialTarget);u.pageX=zn(l.rollingPageX),u.pageY=zn(l.rollingPageY),this.dispatchEvent(u)}else if(i===1){let u=zn(l.rollingPageX),p=zn(l.rollingPageY),h=zn(l.rollingTimestamps)-l.rollingTimestamps[0],g=u-l.rollingPageX[0],b=p-l.rollingPageY[0],f=[...this.targets].filter(v=>l.initialTarget instanceof Node&&v.contains(l.initialTarget));this.inertia(e,f,n,Math.abs(g)/h,g>0?1:-1,u,Math.abs(b)/h,b>0?1:-1,p)}this.dispatchEvent(this.newGestureEvent(nn.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===nn.Tap){let t=new Date().getTime(),n=0;t-this._lastSetTapCountTime>hn.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===nn.Change||e.type===nn.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(e.initialTarget))return;let t=[];for(let n of this.targets)if(n.contains(e.initialTarget)){let i=0,o=e.initialTarget;for(;o&&o!==n;)i++,o=o.parentElement;t.push([i,n])}t.sort((n,i)=>n[0]-i[0]);for(let[n,i]of t)i.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,i,o,s,a,l,d){this.handle=ur(e,()=>{let u=Date.now(),p=u-n,h=0,g=0,b=!0;i+=hn.SCROLL_FRICTION*p,a+=hn.SCROLL_FRICTION*p,i>0&&(b=!1,h=o*i*p),a>0&&(b=!1,g=l*a*p);let f=this.newGestureEvent(nn.Change);f.translationX=h,f.translationY=g,t.forEach(v=>v.dispatchEvent(f)),b||this.inertia(e,t,u,i,o,s+h,a,l,d+g)})}onTouchMove(e){let t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){let o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}let s=this.activeTouches[o.identifier],a=this.newGestureEvent(nn.Change,s.initialTarget);a.translationX=o.pageX-zn(s.rollingPageX),a.translationY=o.pageY-zn(s.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(o.pageX),s.rollingPageY.push(o.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};T([K],hn,"isTouchDevice",1);var _r=hn;var Rn;(i=>{function r(o,s){if(o.start>=s.end||s.start>=o.end)return{start:0,end:0};let a=Math.max(o.start,s.start),l=Math.min(o.end,s.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=r;function e(o){return o.end-o.start<=0}i.isEmpty=e;function t(o,s){return!e(r(o,s))}i.intersects=t;function n(o,s){let a=[],l={start:o.start,end:Math.min(s.start,o.end)},d={start:Math.max(s.end,o.start),end:o.end};return e(l)||a.push(l),e(d)||a.push(d),a}i.relativeComplement=n})(Rn||={});var KC=class{constructor(e){this.domNode=e}_maxWidth="";_width="";_height="";_top="";_left="";_bottom="";_right="";_paddingTop="";_paddingLeft="";_paddingBottom="";_paddingRight="";_fontFamily="";_fontWeight="";_fontSize="";_fontStyle="";_fontFeatureSettings="";_fontVariationSettings="";_textDecoration="";_lineHeight="";_letterSpacing="";_className="";_display="";_position="";_visibility="";_color="";_backgroundColor="";_layerHint=!1;_contain="none";_boxShadow="";setMaxWidth(e){let t=yi(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=yi(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=yi(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=yi(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=yi(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=yi(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=yi(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=yi(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=yi(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=yi(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=yi(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=yi(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=yi(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=yi(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function yi(r){return typeof r=="number"?`${r}px`:r}function il(r){return new KC(r)}var Yd=class{_hooks=new le;_pointerMoveCallback=null;_onStopCallback=null;dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=o;let s=e;try{e.setPointerCapture(t),this._hooks.add(j(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{s=Be(e)}this._hooks.add(ie(s,Ie.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(ie(s,Ie.POINTER_UP,a=>this.stopMonitoring(!0)))}};var lo=class extends O{onclick(e,t){this._register(ie(e,Ie.CLICK,n=>t(new Wi(Be(e),n))))}onmousedown(e,t){this._register(ie(e,Ie.MOUSE_DOWN,n=>t(new Wi(Be(e),n))))}onmouseover(e,t){this._register(ie(e,Ie.MOUSE_OVER,n=>t(new Wi(Be(e),n))))}onmouseleave(e,t){this._register(ie(e,Ie.MOUSE_LEAVE,n=>t(new Wi(Be(e),n))))}onkeydown(e,t){this._register(ie(e,Ie.KEY_DOWN,n=>t(new ln(n))))}onkeyup(e,t){this._register(ie(e,Ie.KEY_UP,n=>t(new ln(n))))}oninput(e,t){this._register(ie(e,Ie.INPUT,t))}onblur(e,t){this._register(ie(e,Ie.BLUR,t))}onfocus(e,t){this._register(ie(e,Ie.FOCUS,t))}onchange(e,t){this._register(ie(e,Ie.CHANGE,t))}ignoreGesture(e){return _r.ignoreTarget(e)}};var Gs=11,lb=class extends lo{_onActivate;bgDomNode;domNode;_pointerdownRepeatTimer;_pointerdownScheduleRepeatTimer;_pointerMoveMonitor;constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Dt.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=Gs+"px",this.domNode.style.height=Gs+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Yd),this._register(ba(this.bgDomNode,Ie.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(ba(this.domNode,Ie.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Hh),this._pointerdownScheduleRepeatTimer=this._register(new _o)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Be(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}};var Jd=class r{_scrollbarSize;_oppositeScrollbarSize;_arrowSize;_visibleSize;_scrollSize;_scrollPosition;_computedAvailableSize;_computedIsNeeded;_computedSliderSize;_computedSliderRatio;_computedSliderPosition;constructor(e,t,n,i,o,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=o,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new r(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,o){let s=Math.max(0,n-e),a=Math.max(0,s-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*a/i))),u=(a-d)/(i-n),p=o*u;return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(d),computedSliderRatio:u,computedSliderPosition:Math.round(p)}}_refreshComputedValues(){let e=r._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}};var db=class extends O{_visibility;_visibleClassName;_invisibleClassName;_domNode;_rawShouldBeVisible;_shouldBeVisible;_isNeeded;_isVisible;_revealTimer;constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new _o)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}};var cF=140,Zd=class extends lo{_host;_scrollable;_scrollByPage;_lazyRender;_scrollbarState;_visibilityController;_pointerMoveMonitor;domNode;slider;_shouldRender;constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new db(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Yd),this._shouldRender=!0,this.domNode=il(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ie(this.domNode.domNode,Ie.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new lb(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=il(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ie(this.slider.domNode,Ie.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);n<=o&&o<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{let o=qh(this.domNode.domNode);t=e.pageX-o.left,n=e.pageY-o.top}let i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let s=this._sliderOrthogonalPointerPosition(o),a=Math.abs(s-n);if(lt&&a>cF){this._setDesiredScrollPositionNow(i.getScrollPosition());return}let d=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(d))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}};var cb=class extends Zd{constructor(e,t,n){let i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Jd(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let s=(t.arrowSize-Gs)/2,a=(t.horizontalScrollbarSize-Gs)/2;this._createArrow({className:"scra",icon:ee.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new or(null,1,0))}),this._createArrow({className:"scra",icon:ee.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new or(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}};var ub=class extends Zd{constructor(e,t,n){let i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Jd(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let s=(t.arrowSize-Gs)/2,a=(t.verticalScrollbarSize-Gs)/2;this._createArrow({className:"scra",icon:ee.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new or(null,0,1))}),this._createArrow({className:"scra",icon:ee.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new or(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};var uF=500,sR=50,aR=!0,$C=class{timestamp;deltaX;deltaY;score;constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}},GC=class r{static INSTANCE=new r;_capacity;_memory;_front;_rear;constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{let o=i===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[i].score*o,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(Dc){let t=Be(e.browserEvent),n=mT(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let i=null,o=new $C(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=o,this._front=0,this._rear=0):(i=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=o),o.score=this._computeScore(o,i)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){let i=Math.abs(e.deltaX),o=Math.abs(e.deltaY),s=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(i,s),1),d=Math.max(Math.min(o,a),1),u=Math.max(i,s),p=Math.max(o,a);u%l===0&&p%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}},qC=class extends lo{_options;_scrollable;_verticalScrollbar;_horizontalScrollbar;_domNode;_leftShadowDomNode;_topShadowDomNode;_topLeftShadowDomNode;_listenOnDomNode;_mouseWheelToDispose;_isDragging;_mouseIsOver;_hideTimeout;_shouldRender;_revealOnScroll;_onScroll=this._register(new E);onScroll=this._onScroll.event;_onWillScroll=this._register(new E);onWillScroll=this._onWillScroll.event;get options(){return this._options}constructor(e,t,n){super(),e.style.overflow="hidden",this._options=pF(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let i={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new ub(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new cb(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=il(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=il(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=il(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new _o),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ft(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Fe&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new or(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ft(this._mouseWheelToDispose),e)){let n=i=>{this._onMouseWheel(new or(i))};this._mouseWheelToDispose.push(ie(this._listenOnDomNode,Ie.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=GC.INSTANCE;aR&&t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+o===0?s=o=0:Math.abs(o)>=Math.abs(s)?s=0:o=0),this._options.flipAxes&&([o,s]=[s,o]);let a=!Fe&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),d={};if(o){let u=sR*o,p=l.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,p)}if(s){let u=sR*s,p=l.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,p)}d=this._scrollable.validateScrollPosition(d),(l.scrollLeft!==d.scrollLeft||l.scrollTop!==d.scrollTop)&&(aR&&this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",o=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${o}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),uF)}};var Rp=class extends qC{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function pF(r){let e={lazyRender:typeof r.lazyRender<"u"?r.lazyRender:!1,className:typeof r.className<"u"?r.className:"",useShadows:typeof r.useShadows<"u"?r.useShadows:!0,handleMouseWheel:typeof r.handleMouseWheel<"u"?r.handleMouseWheel:!0,flipAxes:typeof r.flipAxes<"u"?r.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof r.consumeMouseWheelIfScrollbarIsNeeded<"u"?r.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof r.alwaysConsumeMouseWheel<"u"?r.alwaysConsumeMouseWheel:!1,scrollYToX:typeof r.scrollYToX<"u"?r.scrollYToX:!1,mouseWheelScrollSensitivity:typeof r.mouseWheelScrollSensitivity<"u"?r.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof r.fastScrollSensitivity<"u"?r.fastScrollSensitivity:5,scrollPredominantAxis:typeof r.scrollPredominantAxis<"u"?r.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof r.mouseWheelSmoothScroll<"u"?r.mouseWheelSmoothScroll:!0,arrowSize:typeof r.arrowSize<"u"?r.arrowSize:11,listenOnDomNode:typeof r.listenOnDomNode<"u"?r.listenOnDomNode:null,horizontal:typeof r.horizontal<"u"?r.horizontal:1,horizontalScrollbarSize:typeof r.horizontalScrollbarSize<"u"?r.horizontalScrollbarSize:10,horizontalSliderSize:typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:0,horizontalHasArrows:typeof r.horizontalHasArrows<"u"?r.horizontalHasArrows:!1,vertical:typeof r.vertical<"u"?r.vertical:1,verticalScrollbarSize:typeof r.verticalScrollbarSize<"u"?r.verticalScrollbarSize:10,verticalHasArrows:typeof r.verticalHasArrows<"u"?r.verticalHasArrows:!1,verticalSliderSize:typeof r.verticalSliderSize<"u"?r.verticalSliderSize:0,scrollByPage:typeof r.scrollByPage<"u"?r.scrollByPage:!1};return e.horizontalSliderSize=typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof r.verticalSliderSize<"u"?r.verticalSliderSize:e.verticalScrollbarSize,Fe&&(e.className+=" mac"),e}var hF=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}}),lR=hF,Lgt=new Ot(()=>lR("mouse",!1)),Ogt=new Ot(()=>lR("element",!1));var qe=class{emitter;get event(){return this.emitter.event}constructor(e,t,n){let i=o=>this.emitter.fire(o);this.emitter=new E({onWillAddFirstListener:()=>e.addEventListener(t,i,n),onDidRemoveLastListener:()=>e.removeEventListener(t,i,n)})}dispose(){this.emitter.dispose()}};var dR=2e4,mF,XC,cR;function QC(r){mF&&(XC.textContent!==r?(Nl(cR),uR(XC,r)):(Nl(XC),uR(cR,r)))}function uR(r,e){Nl(r),e.length>dR&&(e=e.substr(0,dR)),r.textContent=e,r.style.visibility="hidden",r.style.visibility="visible"}var pb=class{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}};function pR(r,e){let t=[];for(let n of e){if(r.start>=n.range.end)continue;if(r.end<n.range.start)break;let i=Rn.intersect(r,n.range);Rn.isEmpty(i)||t.push({range:i,size:n.size})}return t}function mb({start:r,end:e},t){return{start:r+t,end:e+t}}function gF(r){let e=[],t=null;for(let n of r){let i=n.range.start,o=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=o;continue}t={range:{start:i,end:o},size:s},e.push(t)}return e}function fF(...r){return gF(r.reduce((e,t)=>e.concat(t),[]))}var hb=class{groups=[];_size=0;_paddingTop=0;get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){let i=n.length-t,o=pR({start:0,end:e},this.groups),s=pR({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:mb(l.range,i),size:l.size})),a=n.map((l,d)=>({range:{start:e+d,end:e+d+1},size:l.size}));this.groups=fF(o,a,s),this._size=this._paddingTop+this.groups.reduce((l,d)=>l+d.size*(d.range.end-d.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(let i of this.groups){let o=i.range.end-i.range.start,s=n+o*i.size;if(e<s)return t+Math.floor((e-n)/i.size);t+=o,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){let o=i.range.end-i.range.start,s=n+o;if(e<s)return this._paddingTop+t+(e-n)*i.size;t+=o*i.size,n=s}return-1}};var gb=class{constructor(e){this.renderers=e}cache=new Map;transactionNodesPendingRemoval=new Set;inTransaction=!1;alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{let i=ci(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:s}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(let t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){let{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}};var rl={CurrentDragAndDropData:void 0};var co={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(r){return[r]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},YC=class{elements;_context;get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}},JC=class{elements;constructor(e){this.elements=e}update(){}getData(){return this.elements}},ZC=class{types;files;constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};function bF(r,e){return Array.isArray(r)&&Array.isArray(e)?Si(r,e):r===e}var eE=class{getSetSize;getPosInSet;getRole;isChecked;constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}},xi=class xi{constructor(e,t,n,i=co){this.virtualDelegate=t;if(i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(i.paddingTop??0);for(let s of n)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new gb(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=i.horizontalScrolling??co.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof i.paddingBottom>"u"?0:i.paddingBottom,this.accessibilityProvider=new eE(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(i.transformOptimization??co.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(_r.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new $l({forceIntegerValues:!0,smoothScrollDuration:i.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:s=>ur(Be(this.domNode),s)})),this.scrollableElement=this.disposables.add(new Rp(this.rowsContainer,{alwaysConsumeMouseWheel:i.alwaysConsumeMouseWheel??co.alwaysConsumeMouseWheel,horizontal:1,vertical:i.verticalScrollMode??co.verticalScrollMode,useShadows:i.useShadows??co.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ie(this.rowsContainer,nn.Change,s=>this.onTouchChange(s))),this.disposables.add(ie(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(ie(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(ie(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(ie(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(ie(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=i.setRowLineHeight??co.setRowLineHeight,this.setRowHeight=i.setRowHeight??co.setRowHeight,this.supportDynamicHeights=i.supportDynamicHeights??co.supportDynamicHeights,this.dnd=i.dnd??this.disposables.add(co.dnd),this.layout(i.initialSize?.height,i.initialSize?.width)}static InstanceCount=0;domId=`list_id_${++xi.InstanceCount}`;domNode;items;itemId;rangeMap;cache;renderers=new Map;lastRenderTop;lastRenderHeight;renderWidth=0;rowsContainer;scrollable;scrollableElement;_scrollHeight=0;scrollableElementUpdateDisposable=null;scrollableElementWidthDelayer=new Ol(50);splicing=!1;dragOverAnimationDisposable;dragOverAnimationStopDisposable=O.None;dragOverMouseY=0;setRowLineHeight;setRowHeight;supportDynamicHeights;paddingBottom;accessibilityProvider;scrollWidth;dnd;canDrop=!1;currentDragData;currentDragFeedback;currentDragFeedbackPosition;currentDragFeedbackDisposable=O.None;onDragLeaveTimeout=O.None;disposables=new le;_onDidChangeContentHeight=new E;_onDidChangeContentWidth=new E;onDidChangeContentHeight=Q.latch(this._onDidChangeContentHeight.event,void 0,this.disposables);onDidChangeContentWidth=Q.latch(this._onDidChangeContentWidth.event,void 0,this.disposables);get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}_horizontalScrolling=!1;get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:jh(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){let n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,n){if(e<0||e>=this.items.length)return;let i=this.items[e].size;if(typeof t>"u"){if(!this.supportDynamicHeights){console.warn("Dynamic heights not supported",new Error().stack);return}this.items[e].lastDynamicHeightWidth=void 0,t=i+this.probeDynamicHeight(e)}if(i===t)return;let o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=0;e<o.start||n!==null&&n>e&&n<o.end?s=t-i:s=0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(o,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}createRangeMap(e){return new hb(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){let i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},s=Rn.intersect(i,o),a=new Map;for(let W=s.end-1;W>=s.start;W--){let H=this.items[W];if(H.dragStartDisposable.dispose(),H.checkedDisposable.dispose(),H.row){let ue=a.get(H.templateId);ue||(ue=[],a.set(H.templateId,ue));let Y=this.renderers.get(H.templateId);Y&&Y.disposeElement&&Y.disposeElement(H.element,W,H.row.templateData,H.size),ue.unshift(H.row)}H.row=null,H.stale=!0}let l={start:e+t,end:this.items.length},d=Rn.intersect(l,i),u=Rn.relativeComplement(l,i),p=n.map(W=>({id:String(this.itemId++),element:W,templateId:this.virtualDelegate.getTemplateId(W),size:this.virtualDelegate.getHeight(W),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(W),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:O.None,checkedDisposable:O.None,stale:!1})),h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,p),h=this.items,this.items=p):(this.rangeMap.splice(e,t,p),h=this.items.splice(e,t,...p));let g=n.length-t,b=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),f=mb(d,g),v=Rn.intersect(b,f);for(let W=v.start;W<v.end;W++)this.updateItemInDOM(this.items[W],W);let D=Rn.relativeComplement(f,b);for(let W of D)for(let H=W.start;H<W.end;H++)this.removeItemFromDOM(H);let R=u.map(W=>mb(W,g)),B=[{start:e,end:e+n.length},...R].map(W=>Rn.intersect(b,W)).reverse();for(let W of B)for(let H=W.end-1;H>=W.start;H--){let ue=this.items[H],oe=a.get(ue.templateId)?.pop();this.insertItemInDOM(H,oe)}for(let W of a.values())for(let H of W)this.cache.release(H);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(W=>W.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=ur(Be(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||typeof this.scrollWidth>"u")return;let t=this.items[e];this.measureItemWidth(t),typeof t.width<"u"&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){let e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),n=this.rangeMap.positionAt(e+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:fw(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:jh(this.domNode)})}render(e,t,n,i,o,s=!1){let a=this.getRenderRange(t,n),l=Rn.relativeComplement(a,e).reverse(),d=Rn.relativeComplement(e,a);if(s){let u=Rn.intersect(e,a);for(let p=u.start;p<u.end;p++)this.updateItemInDOM(this.items[p],p)}this.cache.transact(()=>{for(let u of d)for(let p=u.start;p<u.end;p++)this.removeItemFromDOM(p);for(let u of l)for(let p=u.end-1;p>=u.start;p--)this.insertItemInDOM(p)}),i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){let n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{let l=this.cache.alloc(n.templateId);n.row=l.row,n.stale||=l.isReusingConnectedDomNode}let i=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",i);let o=this.accessibilityProvider.isChecked(n.element);if(typeof o=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){let l=d=>n.row.domNode.setAttribute("aria-checked",String(!!d));l(o.value),n.checkedDisposable=o.onDidChange(()=>l(o.value))}if(n.stale||!n.row.domNode.parentElement){let l=this.items.at(e+1)?.row?.domNode??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(n.row.domNode,l),n.stale=!1}this.updateItemInDOM(n,e);let s=this.renderers.get(n.templateId);if(!s)throw new Error(`No renderer found for template id ${n.templateId}`);s?.renderElement(n.element,e,n.row.templateData,n.size);let a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=ie(n.row.domNode,"dragstart",l=>this.onDragStart(n.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=jh(e.row.domNode);let t=Be(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Q.map(this.disposables.add(new qe(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Q.map(this.disposables.add(new qe(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Q.filter(Q.map(this.disposables.add(new qe(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseUp(){return Q.map(this.disposables.add(new qe(this.domNode,"mouseup")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return Q.map(this.disposables.add(new qe(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Q.map(this.disposables.add(new qe(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return Q.map(this.disposables.add(new qe(this.domNode,"mousemove")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Q.map(this.disposables.add(new qe(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Q.any(Q.map(this.disposables.add(new qe(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Q.map(this.disposables.add(new qe(this.domNode,nn.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Q.map(this.disposables.add(new qe(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Q.map(this.disposables.add(new qe(this.rowsContainer,nn.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element,o=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:i,sector:o}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;let i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(HC.TEXT,t),n.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(i,n)),typeof o>"u"&&(o=String(i.length));let s=ci(".monaco-drag-image");s.textContent=o,(d=>{for(;d&&!d.classList.contains("monaco-workbench");)d=d.parentElement;return d||this.domNode.ownerDocument})(this.domNode).appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>s.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new YC(i),rl.CurrentDragAndDropData=new JC(i),this.dnd.onDragStart?.(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),rl.CurrentDragAndDropData&&rl.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(rl.CurrentDragAndDropData)this.currentDragData=rl.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new ZC}let t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===0?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Hn(n).filter(o=>o>=-1&&o<this.length).sort((o,s)=>o-s),n=n[0]===-1?[-1]:n;let i=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(bF(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===i)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=i,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(i),this.rowsContainer.classList.add(i),this.currentDragFeedbackDisposable=j(()=>{this.domNode.classList.remove(i),this.rowsContainer.classList.remove(i)});else{if(n.length>1&&i!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");i==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,i="drop-target-before");for(let o of n){let s=this.items[o];s.dropTarget=!0,s.row?.domNode.classList.add(i)}this.currentDragFeedbackDisposable=j(()=>{for(let o of n){let s=this.items[o];s.dropTarget=!1,s.row?.domNode.classList.remove(i)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=$v(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,rl.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,rl.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=O.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let t=qc(this.domNode).top;this.dragOverAnimationDisposable=_w(Be(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=$v(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;let n=e.offsetY/this.items[t].size,i=Math.floor(n/.25);return Hc(i,0,3)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),n=e;for(;(di(n)||Tw(n))&&n!==this.rowsContainer&&t.contains(n);){let i=n.getAttribute("data-index");if(i){let o=Number(i);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){let i=this.getRenderRange(e,t),o,s;e===this.elementTop(i.start)?(o=i.start,s=0):i.end-i.start>1&&(o=i.start+1,s=this.elementTop(o)-e);let a=0;for(;;){let l=this.getRenderRange(e,t),d=!1;for(let u=l.start;u<l.end;u++){let p=this.probeDynamicHeight(u);p!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=p,d=d||p!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();let u=Rn.relativeComplement(i,l);for(let h of u)for(let g=h.start;g<h.end;g++)this.items[g].row&&this.removeItemFromDOM(g);let p=Rn.relativeComplement(l,i).reverse();for(let h of p)for(let g=h.end-1;g>=h.start;g--)this.insertItemInDOM(g);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof o=="number"){let h=this.scrollable.getFutureScrollPosition().scrollTop-e,g=this.elementTop(o)-s+h;this.setScrollTop(g,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){let t=this.items[e];if(this.virtualDelegate.getDynamicHeight){let s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){let a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;let n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!fa(t.row.domNode,Be(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;let{row:i}=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);let o=this.renderers.get(t.templateId);if(!o)throw new He("Missing renderer for templateId: "+t.templateId);return o.renderElement(t.element,e,i.templateData,void 0),t.size=i.domNode.offsetHeight,o.disposeElement?.(t.element,e,i.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,i.domNode.remove(),this.cache.release(i),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(let e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};T([K],xi.prototype,"onMouseClick",1),T([K],xi.prototype,"onMouseDblClick",1),T([K],xi.prototype,"onMouseMiddleClick",1),T([K],xi.prototype,"onMouseUp",1),T([K],xi.prototype,"onMouseDown",1),T([K],xi.prototype,"onMouseOver",1),T([K],xi.prototype,"onMouseMove",1),T([K],xi.prototype,"onMouseOut",1),T([K],xi.prototype,"onContextMenu",1),T([K],xi.prototype,"onTouchStart",1),T([K],xi.prototype,"onTap",1);var fb=xi;var uo=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}};var tE=class{constructor(e){this.trait=e}renderedElements=[];get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){let i=this.renderedElements.findIndex(o=>o.templateData===n);if(i>=0){let o=this.renderedElements[i];this.trait.unrender(n),o.index=t}else{let o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){let i=[];for(let o of this.renderedElements)o.index<e?i.push(o):o.index>=e+t&&i.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=i}renderIndexes(e){for(let{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){let t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}},ec=class{constructor(e){this._trait=e}indexes=[];sortedIndexes=[];_onChange=new E;onChange=this._onChange.event;get name(){return this._trait}get renderer(){return new tE(this)}splice(e,t,n){let i=n.length-t,o=e+t,s=[],a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)s.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&s.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=o;)s.push(this.sortedIndexes[a++]+i);this.renderer.splice(e,t,n.length),this._set(s,s)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(mR),t)}_set(e,t,n){let i=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let s=aE(o,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return EE(this.sortedIndexes,e,mR)>=0}dispose(){ft(this._onChange)}};T([K],ec.prototype,"renderer",1);var nE=class extends ec{constructor(t){super("selected");this.setAriaSelected=t}renderIndex(t,n){super.renderIndex(t,n),this.setAriaSelected&&(this.contains(t)?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false"))}},Pp=class{constructor(e,t,n){this.trait=e;this.view=t;this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));let i=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(i.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));let o=new Set(i),s=n.map(a=>o.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,s)}};function gR(r,e){return r.classList.contains(e)?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:gR(r.parentElement,e)}function bb(r){return gR(r,"monaco-editor")}var vb=class{constructor(e,t,n){this.list=e;this.view=t;this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(i=>{switch(i.keyCode){case 3:return this.onEnter(i);case 16:return this.onUpArrow(i);case 18:return this.onDownArrow(i);case 11:return this.onPageUpArrow(i);case 12:return this.onPageDownArrow(i);case 9:return this.onEscape(i);case 31:this.multipleSelectionSupport&&(Fe?i.metaKey:i.ctrlKey)&&this.onCtrlA(i)}}))}disposables=new le;multipleSelectionDisposables=new le;multipleSelectionSupport;get onKeyDown(){return Q.chain(this.disposables.add(new qe(this.view.domNode,"keydown")).event,e=>e.filter(t=>!va(t.target)).map(t=>new ln(t)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(cc(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};T([K],vb.prototype,"onKeyDown",1);var vF=new class{mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey||r.altKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30||r.keyCode>=98&&r.keyCode<=107||r.keyCode>=85&&r.keyCode<=95}},iE=class{constructor(e,t,n,i,o){this.list=e;this.view=t;this.keyboardNavigationLabelProvider=n;this.keyboardNavigationEventFilter=i;this.delegate=o;this.updateOptions(e.options)}enabled=!1;state=0;mode=0;triggered=!1;previouslyFocused=-1;enabledDisposables=new le;disposables=new le;updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??0}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1,t=Q.chain(this.enabledDisposables.add(new qe(this.view.domNode,"keydown")).event,o=>o.filter(s=>!va(s.target)).filter(()=>this.mode===0||this.triggered).map(s=>new ln(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>Sn.stop(s,!0)).map(s=>s.browserEvent.key)),n=Q.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Q.reduce(Q.any(t,n),(o,s)=>s===null?null:(o||"")+s,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){let t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?QC(t):t&&QC(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=0,this.triggered=!1;return}let t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===0?1:0;this.state=1;for(let o=0;o<this.list.length;o++){let s=(n+o+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(Ul(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}let d=Qw(e,l);if(d&&d[0].end-d[0].start>1&&d.length===1){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}else if(typeof l>"u"||Ul(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},rE=class{constructor(e,t){this.list=e;this.view=t;let n=Q.chain(this.disposables.add(new qe(t.domNode,"keydown")).event,o=>o.filter(s=>!va(s.target)).map(s=>new ln(s)));Q.chain(n,o=>o.filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey))(this.onTab,this,this.disposables)}disposables=new le;onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let n=this.view.domElement(t[0]);if(!n)return;let i=n.querySelector("[tabIndex]");if(!i||!di(i)||i.tabIndex===-1)return;let o=Be(i).getComputedStyle(i);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}};function IF(r){return Fe?r.browserEvent.metaKey:r.browserEvent.ctrlKey}function yF(r){return r.browserEvent.shiftKey}function xF(r){return ww(r)&&r.button===2}var hR={isSelectionSingleChangeEvent:IF,isSelectionRangeChangeEvent:yF},oE=class{constructor(e){this.list=e;e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||hR),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(_r.addTarget(e.getHTMLElement()))),Q.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}multipleSelectionController;mouseSupport;disposables=new le;_onPointer=new E;onPointer=this._onPointer.event;updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||hR))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){bb(e.browserEvent.target)||Xh()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(va(e.browserEvent.target)||bb(e.browserEvent.target))return;let t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||va(e.browserEvent.target)||bb(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),xF(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(va(e.browserEvent.target)||bb(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));let i=Math.min(n,t),o=Math.max(n,t),s=cc(i,o+1),a=this.list.getSelection(),l=CF(aE(a,[n]),n);if(l.length===0)return;let d=aE(s,EF(a,l));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let i=this.list.getSelection(),o=i.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}},sE=class{constructor(e,t){this.styleElement=e;this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);let i=Bl(e.listFocusAndSelectionOutline,Bl(e.listSelectionOutline,e.listFocusOutline??""));i&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${i}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);let o=Bl(e.listSelectionOutline,e.listInactiveFocusOutline??"");o&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${o}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}},fR={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:F.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:F.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:F.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},SF={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function CF(r,e){let t=r.indexOf(e);if(t===-1)return[];let n=[],i=t-1;for(;i>=0&&r[i]===e-(t-i);)n.push(r[i--]);for(n.reverse(),i=t;i<r.length&&r[i]===e+(i-t);)n.push(r[i++]);return n}function aE(r,e){let t=[],n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){t.push(r[n]),n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):t.push(e[i++]);return t}function EF(r,e){let t=[],n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):i++;return t}var mR=(r,e)=>r-e,lE=class{constructor(e,t){this._templateId=e;this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let o=0;for(let s of this.renderers)s.renderElement(e,t,n[o++],i)}disposeElement(e,t,n,i){let o=0;for(let s of this.renderers)s.disposeElement?.(e,t,n[o],i),o+=1}disposeTemplate(e){let t=0;for(let n of this.renderers)n.disposeTemplate(e[t++])}},dE=class{constructor(e){this.accessibilityProvider=e}templateId="a18n";renderTemplate(e){return{container:e,disposables:new le}}renderElement(e,t,n){let i=this.accessibilityProvider.getAriaLabel(e),o=i&&typeof i!="string"?i:pv(i);n.disposables.add(Ur(a=>{this.setAriaLabel(a.readObservable(o),n.container)}));let s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.container.setAttribute("aria-level",`${s}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,i){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}},cE=class{constructor(e,t){this.list=e;this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,i,o){return this.dnd.onDragOver(e,t,n,i,o)}onDragLeave(e,t,n,i){this.dnd.onDragLeave?.(e,t,n,i)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,i,o){this.dnd.drop(e,t,n,i,o)}dispose(){this.dnd.dispose()}},Rr=class{constructor(e,t,n,i,o=SF){this.user=e;this._options=o;let s=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new nE(s!=="listbox");let a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(a.push(new dE(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(d=>new lE(d.templateId,[...a,d]));let l={...o,dnd:o.dnd&&new cE(this,o.dnd)};if(this.view=this.createListView(t,n,i,l),this.view.domNode.setAttribute("role",s),o.styleController)this.styleController=o.styleController(this.view.domId);else{let d=Fl(this.view.domNode);this.styleController=new sE(d,this.view.domId)}if(this.spliceable=new pb([new Pp(this.focus,this.view,o.identityProvider),new Pp(this.selection,this.view,o.identityProvider),new Pp(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new rE(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new vb(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){let d=o.keyboardNavigationDelegate||vF;this.typeNavigationController=new iE(this,this.view,o.keyboardNavigationLabelProvider,o.keyboardNavigationEventFilter??(()=>!0),d),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}focus=new ec("focused");selection;anchor=new ec("anchor");eventBufferer=new fh;view;spliceable;styleController;typeNavigationController;accessibilityProvider;keyboardController;mouseController;_ariaLabel="";disposables=new le;get onDidChangeFocus(){return Q.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Q.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=Q.chain(this.disposables.add(new qe(this.view.domNode,"keydown")).event,o=>o.map(s=>new ln(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Sn.stop(s,!0)).filter(()=>!1)),n=Q.chain(this.disposables.add(new qe(this.view.domNode,"keyup")).event,o=>o.forEach(()=>e=!1).map(s=>new ln(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Sn.stop(s,!0)).map(({browserEvent:s})=>{let a=this.getFocus(),l=a.length?a[0]:void 0,d=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:d,anchor:u,browserEvent:s}})),i=Q.chain(this.view.onContextMenu,o=>o.filter(s=>!e).map(({element:s,index:a,browserEvent:l})=>({element:s,index:a,anchor:new Wi(Be(this.view.domNode),l),browserEvent:l})));return Q.any(t,n,i)}get onKeyDown(){return this.disposables.add(new qe(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new qe(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new qe(this.view.domNode,"keypress")).event}get onDidFocus(){return Q.signal(this.disposables.add(new qe(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Q.signal(this.disposables.add(new qe(this.view.domNode,"blur",!0)).event)}_onDidDispose=new E;onDidDispose=this._onDidDispose.event;createListView(e,t,n,i){return new fb(e,t,n,i)}createMouseController(e){return new oE(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new uo(this.user,`Invalid start index: ${e}`);if(t<0)throw new uo(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(let n of e)if(n<0||n>=this.length)throw new uo(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new uo(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){let e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(let n of e)if(n<0||n>=this.length)throw new uo(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;let o=this.focus.get(),s=this.findNextIndex(o.length>0?o[0]+e:0,t,i);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;let o=this.focus.get(),s=this.findPreviousIndex(o.length>0?o[0]-e:0,t,i);s>-1&&this.setFocus([s],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;let i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){let o=this.findPreviousIndex(n,!1,t);o>-1&&i!==o?this.setFocus([o],e):this.setFocus([n],e)}else{let o=this.view.getScrollTop(),s=o+this.view.renderHeight;n>i&&(s-=this.view.elementHeight(n)),this.view.setScrollTop(s),this.view.getScrollTop()!==o&&(this.setFocus([]),await jn(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let i,o=n(),s=this.view.getScrollTop()+o;s===0?i=this.view.indexAt(s):i=this.view.indexAfter(s-1);let a=this.getFocus()[0];if(a!==i&&(a===void 0||a>=i)){let l=this.findNextIndex(i,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([i],e)}else{let l=s;this.view.setScrollTop(s-this.view.renderHeight-o),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await jn(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;let n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;let i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new uo(this.user,`Invalid index ${e}`);let i=this.view.getScrollTop(),o=this.view.elementTop(e),s=this.view.elementHeight(e);if(Gn(t)){let a=s-this.view.renderHeight+n;this.view.setScrollTop(a*Hc(t,0,1)+o-n)}else{let a=o+s,l=i+this.view.renderHeight;o<i+n&&a>=l||(o<i+n||a>=l&&s>=this.view.renderHeight?this.view.setScrollTop(o-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new uo(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),i=this.view.elementTop(e),o=this.view.elementHeight(e);if(i<n+t||i+o>n+this.view.renderHeight)return null;let s=o-this.view.renderHeight+t;return Math.abs((n+t-i)/s)}isDOMFocused(){return rI(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){let e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};T([K],Rr.prototype,"onDidChangeFocus",1),T([K],Rr.prototype,"onDidChangeSelection",1),T([K],Rr.prototype,"onContextMenu",1),T([K],Rr.prototype,"onKeyDown",1),T([K],Rr.prototype,"onKeyUp",1),T([K],Rr.prototype,"onKeyPress",1),T([K],Rr.prototype,"onDidFocus",1),T([K],Rr.prototype,"onDidBlur",1);var xvt=new RegExp(`(\\\\)?\\$\\((${Dt.iconNameExpression}(?:${Dt.iconModifierExpression})?)\\)`,"g");var uE=class{_prefix;_lastId;constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},TF=new uE("id#");var rn={};(function(){function r(e,t){t(rn)}r.amd=!0,function(e,t){typeof r=="function"&&r.amd?r(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){"use strict";function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function n(we){e.defaults=we}let i=/[&<>"']/,o=new RegExp(i.source,"g"),s=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(s.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d=we=>l[we];function u(we,I){if(I){if(i.test(we))return we.replace(o,d)}else if(s.test(we))return we.replace(a,d);return we}let p=/(^|[^\[])\^/g;function h(we,I){let x=typeof we=="string"?we:we.source;I=I||"";let C={replace:(w,_)=>{let N=typeof _=="string"?_:_.source;return N=N.replace(p,"$1"),x=x.replace(w,N),C},getRegex:()=>new RegExp(x,I)};return C}function g(we){try{we=encodeURI(we).replace(/%25/g,"%")}catch{return null}return we}let b={exec:()=>null};function f(we,I){let x=we.replace(/\|/g,(_,N,z)=>{let Z=!1,ae=N;for(;--ae>=0&&z[ae]==="\\";)Z=!Z;return Z?"|":" |"}),C=x.split(/ \|/),w=0;if(C[0].trim()||C.shift(),C.length>0&&!C[C.length-1].trim()&&C.pop(),I)if(C.length>I)C.splice(I);else for(;C.length<I;)C.push("");for(;w<C.length;w++)C[w]=C[w].trim().replace(/\\\|/g,"|");return C}function v(we,I,x){let C=we.length;if(C===0)return"";let w=0;for(;w<C;){let _=we.charAt(C-w-1);if(_===I&&!x)w++;else if(_!==I&&x)w++;else break}return we.slice(0,C-w)}function D(we,I){if(we.indexOf(I[1])===-1)return-1;let x=0;for(let C=0;C<we.length;C++)if(we[C]==="\\")C++;else if(we[C]===I[0])x++;else if(we[C]===I[1]&&(x--,x<0))return C;return-1}function R(we,I,x,C){let w=I.href,_=I.title?u(I.title):null,N=we[1].replace(/\\([\[\]])/g,"$1");if(we[0].charAt(0)!=="!"){C.state.inLink=!0;let z={type:"link",raw:x,href:w,title:_,text:N,tokens:C.inlineTokens(N)};return C.state.inLink=!1,z}return{type:"image",raw:x,href:w,title:_,text:u(N)}}function A(we,I){let x=we.match(/^(\s+)(?:```)/);if(x===null)return I;let C=x[1];return I.split(`
`).map(w=>{let _=w.match(/^\s+/);if(_===null)return w;let[N]=_;return N.length>=C.length?w.slice(C.length):w}).join(`
`)}class B{options;rules;lexer;constructor(I){this.options=I||e.defaults}space(I){let x=this.rules.block.newline.exec(I);if(x&&x[0].length>0)return{type:"space",raw:x[0]}}code(I){let x=this.rules.block.code.exec(I);if(x){let C=x[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:x[0],codeBlockStyle:"indented",text:this.options.pedantic?C:v(C,`
`)}}}fences(I){let x=this.rules.block.fences.exec(I);if(x){let C=x[0],w=A(C,x[3]||"");return{type:"code",raw:C,lang:x[2]?x[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):x[2],text:w}}}heading(I){let x=this.rules.block.heading.exec(I);if(x){let C=x[2].trim();if(/#$/.test(C)){let w=v(C,"#");(this.options.pedantic||!w||/ $/.test(w))&&(C=w.trim())}return{type:"heading",raw:x[0],depth:x[1].length,text:C,tokens:this.lexer.inline(C)}}}hr(I){let x=this.rules.block.hr.exec(I);if(x)return{type:"hr",raw:v(x[0],`
`)}}blockquote(I){let x=this.rules.block.blockquote.exec(I);if(x){let C=v(x[0],`
`).split(`
`),w="",_="",N=[];for(;C.length>0;){let z=!1,Z=[],ae;for(ae=0;ae<C.length;ae++)if(/^ {0,3}>/.test(C[ae]))Z.push(C[ae]),z=!0;else if(!z)Z.push(C[ae]);else break;C=C.slice(ae);let ke=Z.join(`
`),$e=ke.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");w=w?`${w}
${ke}`:ke,_=_?`${_}
${$e}`:$e;let pt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens($e,N,!0),this.lexer.state.top=pt,C.length===0)break;let Pt=N[N.length-1];if(Pt?.type==="code")break;if(Pt?.type==="blockquote"){let mt=Pt,he=mt.raw+`
`+C.join(`
`),P=this.blockquote(he);N[N.length-1]=P,w=w.substring(0,w.length-mt.raw.length)+P.raw,_=_.substring(0,_.length-mt.text.length)+P.text;break}else if(Pt?.type==="list"){let mt=Pt,he=mt.raw+`
`+C.join(`
`),P=this.list(he);N[N.length-1]=P,w=w.substring(0,w.length-Pt.raw.length)+P.raw,_=_.substring(0,_.length-mt.raw.length)+P.raw,C=he.substring(N[N.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:w,tokens:N,text:_}}}list(I){let x=this.rules.block.list.exec(I);if(x){let C=x[1].trim(),w=C.length>1,_={type:"list",raw:"",ordered:w,start:w?+C.slice(0,-1):"",loose:!1,items:[]};C=w?`\\d{1,9}\\${C.slice(-1)}`:`\\${C}`,this.options.pedantic&&(C=w?C:"[*+-]");let N=new RegExp(`^( {0,3}${C})((?:[	 ][^\\n]*)?(?:\\n|$))`),z=!1;for(;I;){let Z=!1,ae="",ke="";if(!(x=N.exec(I))||this.rules.block.hr.test(I))break;ae=x[0],I=I.substring(ae.length);let $e=x[2].split(`
`,1)[0].replace(/^\t+/,X=>" ".repeat(3*X.length)),pt=I.split(`
`,1)[0],Pt=!$e.trim(),mt=0;if(this.options.pedantic?(mt=2,ke=$e.trimStart()):Pt?mt=x[1].length+1:(mt=x[2].search(/[^ ]/),mt=mt>4?1:mt,ke=$e.slice(mt),mt+=x[1].length),Pt&&/^ *$/.test(pt)&&(ae+=pt+`
`,I=I.substring(pt.length+1),Z=!0),!Z){let X=new RegExp(`^ {0,${Math.min(3,mt-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),ce=new RegExp(`^ {0,${Math.min(3,mt-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),at=new RegExp(`^ {0,${Math.min(3,mt-1)}}(?:\`\`\`|~~~)`),Nt=new RegExp(`^ {0,${Math.min(3,mt-1)}}#`);for(;I;){let Pn=I.split(`
`,1)[0];if(pt=Pn,this.options.pedantic&&(pt=pt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),at.test(pt)||Nt.test(pt)||X.test(pt)||ce.test(I))break;if(pt.search(/[^ ]/)>=mt||!pt.trim())ke+=`
`+pt.slice(mt);else{if(Pt||$e.search(/[^ ]/)>=4||at.test($e)||Nt.test($e)||ce.test($e))break;ke+=`
`+pt}!Pt&&!pt.trim()&&(Pt=!0),ae+=Pn+`
`,I=I.substring(Pn.length+1),$e=pt.slice(mt)}}_.loose||(z?_.loose=!0:/\n *\n *$/.test(ae)&&(z=!0));let he=null,P;this.options.gfm&&(he=/^\[[ xX]\] /.exec(ke),he&&(P=he[0]!=="[ ] ",ke=ke.replace(/^\[[ xX]\] +/,""))),_.items.push({type:"list_item",raw:ae,task:!!he,checked:P,loose:!1,text:ke,tokens:[]}),_.raw+=ae}_.items[_.items.length-1].raw=_.items[_.items.length-1].raw.trimEnd(),_.items[_.items.length-1].text=_.items[_.items.length-1].text.trimEnd(),_.raw=_.raw.trimEnd();for(let Z=0;Z<_.items.length;Z++)if(this.lexer.state.top=!1,_.items[Z].tokens=this.lexer.blockTokens(_.items[Z].text,[]),!_.loose){let ae=_.items[Z].tokens.filter($e=>$e.type==="space"),ke=ae.length>0&&ae.some($e=>/\n.*\n/.test($e.raw));_.loose=ke}if(_.loose)for(let Z=0;Z<_.items.length;Z++)_.items[Z].loose=!0;return _}}html(I){let x=this.rules.block.html.exec(I);if(x)return{type:"html",block:!0,raw:x[0],pre:x[1]==="pre"||x[1]==="script"||x[1]==="style",text:x[0]}}def(I){let x=this.rules.block.def.exec(I);if(x){let C=x[1].toLowerCase().replace(/\s+/g," "),w=x[2]?x[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",_=x[3]?x[3].substring(1,x[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):x[3];return{type:"def",tag:C,raw:x[0],href:w,title:_}}}table(I){let x=this.rules.block.table.exec(I);if(!x||!/[:|]/.test(x[2]))return;let C=f(x[1]),w=x[2].replace(/^\||\| *$/g,"").split("|"),_=x[3]&&x[3].trim()?x[3].replace(/\n[ \t]*$/,"").split(`
`):[],N={type:"table",raw:x[0],header:[],align:[],rows:[]};if(C.length===w.length){for(let z of w)/^ *-+: *$/.test(z)?N.align.push("right"):/^ *:-+: *$/.test(z)?N.align.push("center"):/^ *:-+ *$/.test(z)?N.align.push("left"):N.align.push(null);for(let z=0;z<C.length;z++)N.header.push({text:C[z],tokens:this.lexer.inline(C[z]),header:!0,align:N.align[z]});for(let z of _)N.rows.push(f(z,N.header.length).map((Z,ae)=>({text:Z,tokens:this.lexer.inline(Z),header:!1,align:N.align[ae]})));return N}}lheading(I){let x=this.rules.block.lheading.exec(I);if(x)return{type:"heading",raw:x[0],depth:x[2].charAt(0)==="="?1:2,text:x[1],tokens:this.lexer.inline(x[1])}}paragraph(I){let x=this.rules.block.paragraph.exec(I);if(x){let C=x[1].charAt(x[1].length-1)===`
`?x[1].slice(0,-1):x[1];return{type:"paragraph",raw:x[0],text:C,tokens:this.lexer.inline(C)}}}text(I){let x=this.rules.block.text.exec(I);if(x)return{type:"text",raw:x[0],text:x[0],tokens:this.lexer.inline(x[0])}}escape(I){let x=this.rules.inline.escape.exec(I);if(x)return{type:"escape",raw:x[0],text:u(x[1])}}tag(I){let x=this.rules.inline.tag.exec(I);if(x)return!this.lexer.state.inLink&&/^<a /i.test(x[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(x[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(x[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(x[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:x[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:x[0]}}link(I){let x=this.rules.inline.link.exec(I);if(x){let C=x[2].trim();if(!this.options.pedantic&&/^</.test(C)){if(!/>$/.test(C))return;let N=v(C.slice(0,-1),"\\");if((C.length-N.length)%2===0)return}else{let N=D(x[2],"()");if(N>-1){let Z=(x[0].indexOf("!")===0?5:4)+x[1].length+N;x[2]=x[2].substring(0,N),x[0]=x[0].substring(0,Z).trim(),x[3]=""}}let w=x[2],_="";if(this.options.pedantic){let N=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(w);N&&(w=N[1],_=N[3])}else _=x[3]?x[3].slice(1,-1):"";return w=w.trim(),/^</.test(w)&&(this.options.pedantic&&!/>$/.test(C)?w=w.slice(1):w=w.slice(1,-1)),R(x,{href:w&&w.replace(this.rules.inline.anyPunctuation,"$1"),title:_&&_.replace(this.rules.inline.anyPunctuation,"$1")},x[0],this.lexer)}}reflink(I,x){let C;if((C=this.rules.inline.reflink.exec(I))||(C=this.rules.inline.nolink.exec(I))){let w=(C[2]||C[1]).replace(/\s+/g," "),_=x[w.toLowerCase()];if(!_){let N=C[0].charAt(0);return{type:"text",raw:N,text:N}}return R(C,_,C[0],this.lexer)}}emStrong(I,x,C=""){let w=this.rules.inline.emStrongLDelim.exec(I);if(!w||w[3]&&C.match(/[\p{L}\p{N}]/u))return;if(!(w[1]||w[2]||"")||!C||this.rules.inline.punctuation.exec(C)){let N=[...w[0]].length-1,z,Z,ae=N,ke=0,$e=w[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for($e.lastIndex=0,x=x.slice(-1*I.length+N);(w=$e.exec(x))!=null;){if(z=w[1]||w[2]||w[3]||w[4]||w[5]||w[6],!z)continue;if(Z=[...z].length,w[3]||w[4]){ae+=Z;continue}else if((w[5]||w[6])&&N%3&&!((N+Z)%3)){ke+=Z;continue}if(ae-=Z,ae>0)continue;Z=Math.min(Z,Z+ae+ke);let pt=[...w[0]][0].length,Pt=I.slice(0,N+w.index+pt+Z);if(Math.min(N,Z)%2){let he=Pt.slice(1,-1);return{type:"em",raw:Pt,text:he,tokens:this.lexer.inlineTokens(he)}}let mt=Pt.slice(2,-2);return{type:"strong",raw:Pt,text:mt,tokens:this.lexer.inlineTokens(mt)}}}}codespan(I){let x=this.rules.inline.code.exec(I);if(x){let C=x[2].replace(/\n/g," "),w=/[^ ]/.test(C),_=/^ /.test(C)&&/ $/.test(C);return w&&_&&(C=C.substring(1,C.length-1)),C=u(C,!0),{type:"codespan",raw:x[0],text:C}}}br(I){let x=this.rules.inline.br.exec(I);if(x)return{type:"br",raw:x[0]}}del(I){let x=this.rules.inline.del.exec(I);if(x)return{type:"del",raw:x[0],text:x[2],tokens:this.lexer.inlineTokens(x[2])}}autolink(I){let x=this.rules.inline.autolink.exec(I);if(x){let C,w;return x[2]==="@"?(C=u(x[1]),w="mailto:"+C):(C=u(x[1]),w=C),{type:"link",raw:x[0],text:C,href:w,tokens:[{type:"text",raw:C,text:C}]}}}url(I){let x;if(x=this.rules.inline.url.exec(I)){let C,w;if(x[2]==="@")C=u(x[0]),w="mailto:"+C;else{let _;do _=x[0],x[0]=this.rules.inline._backpedal.exec(x[0])?.[0]??"";while(_!==x[0]);C=u(x[0]),x[1]==="www."?w="http://"+x[0]:w=x[0]}return{type:"link",raw:x[0],text:C,href:w,tokens:[{type:"text",raw:C,text:C}]}}}inlineText(I){let x=this.rules.inline.text.exec(I);if(x){let C;return this.lexer.state.inRawBlock?C=x[0]:C=u(x[0]),{type:"text",raw:x[0],text:C}}}}let W=/^(?: *(?:\n|$))+/,H=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,ue=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Y=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,oe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,de=/(?:[*+-]|\d{1,9}[.)])/,be=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,de).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ge=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ye=/^[^\n]+/,ut=/(?!\s*\])(?:\\.|[^\[\]\\])+/,se=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ut).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),G=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,de).getRegex(),te="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",J=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ne=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",J).replace("tag",te).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ee=h(ge).replace("hr",Y).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te).getRegex(),et={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ee).getRegex(),code:H,def:se,fences:ue,heading:oe,hr:Y,html:ne,lheading:be,list:G,newline:W,paragraph:Ee,table:b,text:Ye},_e=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Y).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te).getRegex(),fe={...et,table:_e,paragraph:h(ge).replace("hr",Y).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",_e).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te).getRegex()},gn={...et,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",J).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:b,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(ge).replace("hr",Y).replace("heading",` *#{1,6} *[^
]`).replace("lheading",be).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Qt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,er=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Fi=/^( {2,}|\\)\n(?!\s*$)/,sl=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ni="\\p{P}\\p{S}",go=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ni).getRegex(),sc=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,ac=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ni).getRegex(),$o=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ni).getRegex(),al=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ni).getRegex(),ll=h(/\\([punct])/,"gu").replace(/punct/g,ni).getRegex(),Fp=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Bp=h(J).replace("(?:-->|$)","-->").getRegex(),Fb=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Bp).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Go=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Qs=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Go).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),fo=h(/^!?\[(label)\]\[(ref)\]/).replace("label",Go).replace("ref",ut).getRegex(),bo=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",ut).getRegex(),Up=h("reflink|nolink(?!\\()","g").replace("reflink",fo).replace("nolink",bo).getRegex(),dl={_backpedal:b,anyPunctuation:ll,autolink:Fp,blockSkip:sc,br:Fi,code:er,del:b,emStrongLDelim:ac,emStrongRDelimAst:$o,emStrongRDelimUnd:al,escape:Qt,link:Qs,nolink:bo,punctuation:go,reflink:fo,reflinkSearch:Up,tag:Fb,text:sl,url:b},Wp={...dl,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",Go).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Go).getRegex()},Ys={...dl,escape:h(Qt).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Vp={...Ys,br:h(Fi).replace("{2,}","*").getRegex(),text:h(Ys.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},vo={normal:et,gfm:fe,pedantic:gn},Or={normal:dl,gfm:Ys,breaks:Vp,pedantic:Wp};class Mt{tokens;options;state;tokenizer;inlineQueue;constructor(I){this.tokens=[],this.tokens.links=Object.create(null),this.options=I||e.defaults,this.options.tokenizer=this.options.tokenizer||new B,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let x={block:vo.normal,inline:Or.normal};this.options.pedantic?(x.block=vo.pedantic,x.inline=Or.pedantic):this.options.gfm&&(x.block=vo.gfm,this.options.breaks?x.inline=Or.breaks:x.inline=Or.gfm),this.tokenizer.rules=x}static get rules(){return{block:vo,inline:Or}}static lex(I,x){return new Mt(x).lex(I)}static lexInline(I,x){return new Mt(x).inlineTokens(I)}lex(I){I=I.replace(/\r\n|\r/g,`
`),this.blockTokens(I,this.tokens);for(let x=0;x<this.inlineQueue.length;x++){let C=this.inlineQueue[x];this.inlineTokens(C.src,C.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(I,x=[],C=!1){this.options.pedantic?I=I.replace(/\t/g,"    ").replace(/^ +$/gm,""):I=I.replace(/^( *)(\t+)/gm,(z,Z,ae)=>Z+"    ".repeat(ae.length));let w,_,N;for(;I;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(z=>(w=z.call({lexer:this},I,x))?(I=I.substring(w.raw.length),x.push(w),!0):!1))){if(w=this.tokenizer.space(I)){I=I.substring(w.raw.length),w.raw.length===1&&x.length>0?x[x.length-1].raw+=`
`:x.push(w);continue}if(w=this.tokenizer.code(I)){I=I.substring(w.raw.length),_=x[x.length-1],_&&(_.type==="paragraph"||_.type==="text")?(_.raw+=`
`+w.raw,_.text+=`
`+w.text,this.inlineQueue[this.inlineQueue.length-1].src=_.text):x.push(w);continue}if(w=this.tokenizer.fences(I)){I=I.substring(w.raw.length),x.push(w);continue}if(w=this.tokenizer.heading(I)){I=I.substring(w.raw.length),x.push(w);continue}if(w=this.tokenizer.hr(I)){I=I.substring(w.raw.length),x.push(w);continue}if(w=this.tokenizer.blockquote(I)){I=I.substring(w.raw.length),x.push(w);continue}if(w=this.tokenizer.list(I)){I=I.substring(w.raw.length),x.push(w);continue}if(w=this.tokenizer.html(I)){I=I.substring(w.raw.length),x.push(w);continue}if(w=this.tokenizer.def(I)){I=I.substring(w.raw.length),_=x[x.length-1],_&&(_.type==="paragraph"||_.type==="text")?(_.raw+=`
`+w.raw,_.text+=`
`+w.raw,this.inlineQueue[this.inlineQueue.length-1].src=_.text):this.tokens.links[w.tag]||(this.tokens.links[w.tag]={href:w.href,title:w.title});continue}if(w=this.tokenizer.table(I)){I=I.substring(w.raw.length),x.push(w);continue}if(w=this.tokenizer.lheading(I)){I=I.substring(w.raw.length),x.push(w);continue}if(N=I,this.options.extensions&&this.options.extensions.startBlock){let z=1/0,Z=I.slice(1),ae;this.options.extensions.startBlock.forEach(ke=>{ae=ke.call({lexer:this},Z),typeof ae=="number"&&ae>=0&&(z=Math.min(z,ae))}),z<1/0&&z>=0&&(N=I.substring(0,z+1))}if(this.state.top&&(w=this.tokenizer.paragraph(N))){_=x[x.length-1],C&&_?.type==="paragraph"?(_.raw+=`
`+w.raw,_.text+=`
`+w.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=_.text):x.push(w),C=N.length!==I.length,I=I.substring(w.raw.length);continue}if(w=this.tokenizer.text(I)){I=I.substring(w.raw.length),_=x[x.length-1],_&&_.type==="text"?(_.raw+=`
`+w.raw,_.text+=`
`+w.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=_.text):x.push(w);continue}if(I){let z="Infinite loop on byte: "+I.charCodeAt(0);if(this.options.silent){console.error(z);break}else throw new Error(z)}}return this.state.top=!0,x}inline(I,x=[]){return this.inlineQueue.push({src:I,tokens:x}),x}inlineTokens(I,x=[]){let C,w,_,N=I,z,Z,ae;if(this.tokens.links){let ke=Object.keys(this.tokens.links);if(ke.length>0)for(;(z=this.tokenizer.rules.inline.reflinkSearch.exec(N))!=null;)ke.includes(z[0].slice(z[0].lastIndexOf("[")+1,-1))&&(N=N.slice(0,z.index)+"["+"a".repeat(z[0].length-2)+"]"+N.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(z=this.tokenizer.rules.inline.blockSkip.exec(N))!=null;)N=N.slice(0,z.index)+"["+"a".repeat(z[0].length-2)+"]"+N.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(z=this.tokenizer.rules.inline.anyPunctuation.exec(N))!=null;)N=N.slice(0,z.index)+"++"+N.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;I;)if(Z||(ae=""),Z=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(ke=>(C=ke.call({lexer:this},I,x))?(I=I.substring(C.raw.length),x.push(C),!0):!1))){if(C=this.tokenizer.escape(I)){I=I.substring(C.raw.length),x.push(C);continue}if(C=this.tokenizer.tag(I)){I=I.substring(C.raw.length),w=x[x.length-1],w&&C.type==="text"&&w.type==="text"?(w.raw+=C.raw,w.text+=C.text):x.push(C);continue}if(C=this.tokenizer.link(I)){I=I.substring(C.raw.length),x.push(C);continue}if(C=this.tokenizer.reflink(I,this.tokens.links)){I=I.substring(C.raw.length),w=x[x.length-1],w&&C.type==="text"&&w.type==="text"?(w.raw+=C.raw,w.text+=C.text):x.push(C);continue}if(C=this.tokenizer.emStrong(I,N,ae)){I=I.substring(C.raw.length),x.push(C);continue}if(C=this.tokenizer.codespan(I)){I=I.substring(C.raw.length),x.push(C);continue}if(C=this.tokenizer.br(I)){I=I.substring(C.raw.length),x.push(C);continue}if(C=this.tokenizer.del(I)){I=I.substring(C.raw.length),x.push(C);continue}if(C=this.tokenizer.autolink(I)){I=I.substring(C.raw.length),x.push(C);continue}if(!this.state.inLink&&(C=this.tokenizer.url(I))){I=I.substring(C.raw.length),x.push(C);continue}if(_=I,this.options.extensions&&this.options.extensions.startInline){let ke=1/0,$e=I.slice(1),pt;this.options.extensions.startInline.forEach(Pt=>{pt=Pt.call({lexer:this},$e),typeof pt=="number"&&pt>=0&&(ke=Math.min(ke,pt))}),ke<1/0&&ke>=0&&(_=I.substring(0,ke+1))}if(C=this.tokenizer.inlineText(_)){I=I.substring(C.raw.length),C.raw.slice(-1)!=="_"&&(ae=C.raw.slice(-1)),Z=!0,w=x[x.length-1],w&&w.type==="text"?(w.raw+=C.raw,w.text+=C.text):x.push(C);continue}if(I){let ke="Infinite loop on byte: "+I.charCodeAt(0);if(this.options.silent){console.error(ke);break}else throw new Error(ke)}}return x}}class Bi{options;parser;constructor(I){this.options=I||e.defaults}space(I){return""}code({text:I,lang:x,escaped:C}){let w=(x||"").match(/^\S*/)?.[0],_=I.replace(/\n$/,"")+`
`;return w?'<pre><code class="language-'+u(w)+'">'+(C?_:u(_,!0))+`</code></pre>
`:"<pre><code>"+(C?_:u(_,!0))+`</code></pre>
`}blockquote({tokens:I}){return`<blockquote>
${this.parser.parse(I)}</blockquote>
`}html({text:I}){return I}heading({tokens:I,depth:x}){return`<h${x}>${this.parser.parseInline(I)}</h${x}>
`}hr(I){return`<hr>
`}list(I){let x=I.ordered,C=I.start,w="";for(let z=0;z<I.items.length;z++){let Z=I.items[z];w+=this.listitem(Z)}let _=x?"ol":"ul",N=x&&C!==1?' start="'+C+'"':"";return"<"+_+N+`>
`+w+"</"+_+`>
`}listitem(I){let x="";if(I.task){let C=this.checkbox({checked:!!I.checked});I.loose?I.tokens.length>0&&I.tokens[0].type==="paragraph"?(I.tokens[0].text=C+" "+I.tokens[0].text,I.tokens[0].tokens&&I.tokens[0].tokens.length>0&&I.tokens[0].tokens[0].type==="text"&&(I.tokens[0].tokens[0].text=C+" "+I.tokens[0].tokens[0].text)):I.tokens.unshift({type:"text",raw:C+" ",text:C+" "}):x+=C+" "}return x+=this.parser.parse(I.tokens,!!I.loose),`<li>${x}</li>
`}checkbox({checked:I}){return"<input "+(I?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:I}){return`<p>${this.parser.parseInline(I)}</p>
`}table(I){let x="",C="";for(let _=0;_<I.header.length;_++)C+=this.tablecell(I.header[_]);x+=this.tablerow({text:C});let w="";for(let _=0;_<I.rows.length;_++){let N=I.rows[_];C="";for(let z=0;z<N.length;z++)C+=this.tablecell(N[z]);w+=this.tablerow({text:C})}return w&&(w=`<tbody>${w}</tbody>`),`<table>
<thead>
`+x+`</thead>
`+w+`</table>
`}tablerow({text:I}){return`<tr>
${I}</tr>
`}tablecell(I){let x=this.parser.parseInline(I.tokens),C=I.header?"th":"td";return(I.align?`<${C} align="${I.align}">`:`<${C}>`)+x+`</${C}>
`}strong({tokens:I}){return`<strong>${this.parser.parseInline(I)}</strong>`}em({tokens:I}){return`<em>${this.parser.parseInline(I)}</em>`}codespan({text:I}){return`<code>${I}</code>`}br(I){return"<br>"}del({tokens:I}){return`<del>${this.parser.parseInline(I)}</del>`}link({href:I,title:x,tokens:C}){let w=this.parser.parseInline(C),_=g(I);if(_===null)return w;I=_;let N='<a href="'+I+'"';return x&&(N+=' title="'+x+'"'),N+=">"+w+"</a>",N}image({href:I,title:x,text:C}){let w=g(I);if(w===null)return C;I=w;let _=`<img src="${I}" alt="${C}"`;return x&&(_+=` title="${x}"`),_+=">",_}text(I){return"tokens"in I&&I.tokens?this.parser.parseInline(I.tokens):I.text}}class qo{strong({text:I}){return I}em({text:I}){return I}codespan({text:I}){return I}del({text:I}){return I}html({text:I}){return I}text({text:I}){return I}link({text:I}){return""+I}image({text:I}){return""+I}br(){return""}}class Vn{options;renderer;textRenderer;constructor(I){this.options=I||e.defaults,this.options.renderer=this.options.renderer||new Bi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new qo}static parse(I,x){return new Vn(x).parse(I)}static parseInline(I,x){return new Vn(x).parseInline(I)}parse(I,x=!0){let C="";for(let w=0;w<I.length;w++){let _=I[w];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]){let z=_,Z=this.options.extensions.renderers[z.type].call({parser:this},z);if(Z!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(z.type)){C+=Z||"";continue}}let N=_;switch(N.type){case"space":{C+=this.renderer.space(N);continue}case"hr":{C+=this.renderer.hr(N);continue}case"heading":{C+=this.renderer.heading(N);continue}case"code":{C+=this.renderer.code(N);continue}case"table":{C+=this.renderer.table(N);continue}case"blockquote":{C+=this.renderer.blockquote(N);continue}case"list":{C+=this.renderer.list(N);continue}case"html":{C+=this.renderer.html(N);continue}case"paragraph":{C+=this.renderer.paragraph(N);continue}case"text":{let z=N,Z=this.renderer.text(z);for(;w+1<I.length&&I[w+1].type==="text";)z=I[++w],Z+=`
`+this.renderer.text(z);x?C+=this.renderer.paragraph({type:"paragraph",raw:Z,text:Z,tokens:[{type:"text",raw:Z,text:Z}]}):C+=Z;continue}default:{let z='Token with "'+N.type+'" type was not found.';if(this.options.silent)return console.error(z),"";throw new Error(z)}}}return C}parseInline(I,x){x=x||this.renderer;let C="";for(let w=0;w<I.length;w++){let _=I[w];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]){let z=this.options.extensions.renderers[_.type].call({parser:this},_);if(z!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(_.type)){C+=z||"";continue}}let N=_;switch(N.type){case"escape":{C+=x.text(N);break}case"html":{C+=x.html(N);break}case"link":{C+=x.link(N);break}case"image":{C+=x.image(N);break}case"strong":{C+=x.strong(N);break}case"em":{C+=x.em(N);break}case"codespan":{C+=x.codespan(N);break}case"br":{C+=x.br(N);break}case"del":{C+=x.del(N);break}case"text":{C+=x.text(N);break}default:{let z='Token with "'+N.type+'" type was not found.';if(this.options.silent)return console.error(z),"";throw new Error(z)}}}return C}}class Js{options;constructor(I){this.options=I||e.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(I){return I}postprocess(I){return I}processAllTokens(I){return I}}class Ar{defaults=t();options=this.setOptions;parse=this.parseMarkdown(Mt.lex,Vn.parse);parseInline=this.parseMarkdown(Mt.lexInline,Vn.parseInline);Parser=Vn;Renderer=Bi;TextRenderer=qo;Lexer=Mt;Tokenizer=B;Hooks=Js;constructor(...I){this.use(...I)}walkTokens(I,x){let C=[];for(let w of I)switch(C=C.concat(x.call(this,w)),w.type){case"table":{let _=w;for(let N of _.header)C=C.concat(this.walkTokens(N.tokens,x));for(let N of _.rows)for(let z of N)C=C.concat(this.walkTokens(z.tokens,x));break}case"list":{let _=w;C=C.concat(this.walkTokens(_.items,x));break}default:{let _=w;this.defaults.extensions?.childTokens?.[_.type]?this.defaults.extensions.childTokens[_.type].forEach(N=>{let z=_[N].flat(1/0);C=C.concat(this.walkTokens(z,x))}):_.tokens&&(C=C.concat(this.walkTokens(_.tokens,x)))}}return C}use(...I){let x=this.defaults.extensions||{renderers:{},childTokens:{}};return I.forEach(C=>{let w={...C};if(w.async=this.defaults.async||w.async||!1,C.extensions&&(C.extensions.forEach(_=>{if(!_.name)throw new Error("extension name required");if("renderer"in _){let N=x.renderers[_.name];N?x.renderers[_.name]=function(...z){let Z=_.renderer.apply(this,z);return Z===!1&&(Z=N.apply(this,z)),Z}:x.renderers[_.name]=_.renderer}if("tokenizer"in _){if(!_.level||_.level!=="block"&&_.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let N=x[_.level];N?N.unshift(_.tokenizer):x[_.level]=[_.tokenizer],_.start&&(_.level==="block"?x.startBlock?x.startBlock.push(_.start):x.startBlock=[_.start]:_.level==="inline"&&(x.startInline?x.startInline.push(_.start):x.startInline=[_.start]))}"childTokens"in _&&_.childTokens&&(x.childTokens[_.name]=_.childTokens)}),w.extensions=x),C.renderer){let _=this.defaults.renderer||new Bi(this.defaults);for(let N in C.renderer){if(!(N in _))throw new Error(`renderer '${N}' does not exist`);if(["options","parser"].includes(N))continue;let z=N,Z=C.renderer[z],ae=_[z];_[z]=(...ke)=>{let $e=Z.apply(_,ke);return $e===!1&&($e=ae.apply(_,ke)),$e||""}}w.renderer=_}if(C.tokenizer){let _=this.defaults.tokenizer||new B(this.defaults);for(let N in C.tokenizer){if(!(N in _))throw new Error(`tokenizer '${N}' does not exist`);if(["options","rules","lexer"].includes(N))continue;let z=N,Z=C.tokenizer[z],ae=_[z];_[z]=(...ke)=>{let $e=Z.apply(_,ke);return $e===!1&&($e=ae.apply(_,ke)),$e}}w.tokenizer=_}if(C.hooks){let _=this.defaults.hooks||new Js;for(let N in C.hooks){if(!(N in _))throw new Error(`hook '${N}' does not exist`);if(N==="options")continue;let z=N,Z=C.hooks[z],ae=_[z];Js.passThroughHooks.has(N)?_[z]=ke=>{if(this.defaults.async)return Promise.resolve(Z.call(_,ke)).then(pt=>ae.call(_,pt));let $e=Z.call(_,ke);return ae.call(_,$e)}:_[z]=(...ke)=>{let $e=Z.apply(_,ke);return $e===!1&&($e=ae.apply(_,ke)),$e}}w.hooks=_}if(C.walkTokens){let _=this.defaults.walkTokens,N=C.walkTokens;w.walkTokens=function(z){let Z=[];return Z.push(N.call(this,z)),_&&(Z=Z.concat(_.call(this,z))),Z}}this.defaults={...this.defaults,...w}}),this}setOptions(I){return this.defaults={...this.defaults,...I},this}lexer(I,x){return Mt.lex(I,x??this.defaults)}parser(I,x){return Vn.parse(I,x??this.defaults)}parseMarkdown(I,x){return(w,_)=>{let N={..._},z={...this.defaults,...N},Z=this.onError(!!z.silent,!!z.async);if(this.defaults.async===!0&&N.async===!1)return Z(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof w>"u"||w===null)return Z(new Error("marked(): input parameter is undefined or null"));if(typeof w!="string")return Z(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(w)+", string expected"));if(z.hooks&&(z.hooks.options=z),z.async)return Promise.resolve(z.hooks?z.hooks.preprocess(w):w).then(ae=>I(ae,z)).then(ae=>z.hooks?z.hooks.processAllTokens(ae):ae).then(ae=>z.walkTokens?Promise.all(this.walkTokens(ae,z.walkTokens)).then(()=>ae):ae).then(ae=>x(ae,z)).then(ae=>z.hooks?z.hooks.postprocess(ae):ae).catch(Z);try{z.hooks&&(w=z.hooks.preprocess(w));let ae=I(w,z);z.hooks&&(ae=z.hooks.processAllTokens(ae)),z.walkTokens&&this.walkTokens(ae,z.walkTokens);let ke=x(ae,z);return z.hooks&&(ke=z.hooks.postprocess(ke)),ke}catch(ae){return Z(ae)}}}onError(I,x){return C=>{if(C.message+=`
Please report this to https://github.com/markedjs/marked.`,I){let w="<p>An error occurred:</p><pre>"+u(C.message+"",!0)+"</pre>";return x?Promise.resolve(w):w}if(x)return Promise.reject(C);throw C}}}let Io=new Ar;function it(we,I){return Io.parse(we,I)}it.options=it.setOptions=function(we){return Io.setOptions(we),it.defaults=Io.defaults,n(it.defaults),it},it.getDefaults=t,it.defaults=e.defaults,it.use=function(...we){return Io.use(...we),it.defaults=Io.defaults,n(it.defaults),it},it.walkTokens=function(we,I){return Io.walkTokens(we,I)},it.parseInline=Io.parseInline,it.Parser=Vn,it.parser=Vn.parse,it.Renderer=Bi,it.TextRenderer=qo,it.Lexer=Mt,it.lexer=Mt.lex,it.Tokenizer=B,it.Hooks=Js,it.parse=it;let Kt=it.options,jo=it.setOptions,Bb=it.use,zp=it.walkTokens,lc=it.parseInline,Hp=it,Kp=Vn.parse,Ub=Mt.lex;e.Hooks=Js,e.Lexer=Mt,e.Marked=Ar,e.Parser=Vn,e.Renderer=Bi,e.TextRenderer=qo,e.Tokenizer=B,e.getDefaults=t,e.lexer=Ub,e.marked=it,e.options=Kt,e.parse=Hp,e.parseInline=lc,e.parser=Kp,e.setOptions=jo,e.use=Bb,e.walkTokens=zp})})();var Evt=rn.Hooks||exports.Hooks,Tvt=rn.Lexer||exports.Lexer,wvt=rn.Marked||exports.Marked,kvt=rn.Parser||exports.Parser,bR=rn.Renderer||exports.Renderer,Dvt=rn.TextRenderer||exports.TextRenderer,_vt=rn.Tokenizer||exports.Tokenizer,wF=rn.defaults||exports.defaults,Rvt=rn.getDefaults||exports.getDefaults,kF=rn.lexer||exports.lexer,Pvt=rn.marked||exports.marked,Lvt=rn.options||exports.options,DF=rn.parse||exports.parse,Ovt=rn.parseInline||exports.parseInline,_F=rn.parser||exports.parser,Avt=rn.setOptions||exports.setOptions,Mvt=rn.use||exports.use,Nvt=rn.walkTokens||exports.walkTokens;var uIt=Object.freeze({image:({href:r,title:e,text:t})=>{let n=[],i=[];return r&&({href:r,dimensions:n}=nk(r),i.push(`src="${Jc(r)}"`)),t&&i.push(`alt="${Jc(t)}"`),e&&i.push(`title="${Jc(e)}"`),n.length&&(i=i.concat(n)),"<img "+i.join(" ")+">"},paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>`},link({href:r,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof r!="string"?"":(r===n&&(n=am(n)),e=typeof e=="string"?Jc(am(e)):"",r=am(r),r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${r}" title="${e||r}" draggable="false">${n}</a>`)}});function vR(){let r=new bR;return r.code=({text:e})=>e,r.blockquote=({text:e})=>e+`
`,r.html=e=>"",r.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},r.hr=()=>"",r.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},r.listitem=({text:e})=>e+`
`,r.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},r.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(i=>this.tablecell(i)).join(" ")).join(`
`)+`
`},r.tablerow=({text:e})=>e,r.tablecell=function({tokens:e}){return this.parser.parseInline(e)},r.strong=({text:e})=>e,r.em=({text:e})=>e,r.codespan=({text:e})=>e,r.br=e=>`
`,r.del=({text:e})=>e,r.image=e=>"",r.text=({text:e})=>e,r.link=({text:e})=>e,r}var pIt=new Ot(r=>vR()),hIt=new Ot(()=>{let r=vR();return r.code=({text:e})=>`
\`\`\`
${e}
\`\`\`
`,r});var kyt={...fR,selectBackground:"#3C3C3C",selectForeground:"#F0F0F0",selectBorder:"#3C3C3C",decoratorRightForeground:void 0,selectListBackground:void 0,selectListBorder:void 0,focusBorder:void 0};var iSt=new E;var rSt=new E;var Ib=class{constructor(e){this.el=e}disposables=new le;get onPointerMove(){return this.disposables.add(new qe(Be(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new qe(Be(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}};T([K],Ib.prototype,"onPointerMove",1),T([K],Ib.prototype,"onPointerUp",1);var yb=class{constructor(e){this.el=e}disposables=new le;get onPointerMove(){return this.disposables.add(new qe(this.el,nn.Change)).event}get onPointerUp(){return this.disposables.add(new qe(this.el,nn.End)).event}dispose(){this.disposables.dispose()}};T([K],yb.prototype,"onPointerMove",1),T([K],yb.prototype,"onPointerUp",1);var xb=class{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}};T([K],xb.prototype,"onPointerMove",1),T([K],xb.prototype,"onPointerUp",1);var Sb=class extends _p{constructor(t,n,i,o){super(t,i,o);this.telemetryService=n}_onTitleAreaUpdate=this._register(new E);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidFocus;get onDidFocus(){return this._onDidFocus||(this._onDidFocus=this.registerFocusTrackEvents().onDidFocus),this._onDidFocus.event}_onDidBlur;get onDidBlur(){return this._onDidBlur||(this._onDidBlur=this.registerFocusTrackEvents().onDidBlur),this._onDidBlur.event}_hasFocus=!1;hasFocus(){return this._hasFocus}registerFocusTrackEvents(){let t=In(this.getContainer()),n=this._register(Xc(t)),i=this._onDidFocus=this._register(new E);this._register(n.onDidFocus(()=>{this._hasFocus=!0,i.fire()}));let o=this._onDidBlur=this._register(new E);return this._register(n.onDidBlur(()=>{this._hasFocus=!1,o.fire()})),{onDidFocus:i,onDidBlur:o}}actionRunner;visible=!1;parent;getTitle(){}create(t){this.parent=t}getContainer(){return this.parent}setVisible(t){this.visible!==!!t&&(this.visible=t)}focus(){}getMenuIds(){return[]}getActions(){return[]}getSecondaryActions(){return[]}getContextMenuActions(){return[]}getActionViewItem(t,n){}getActionsContext(){return null}getActionRunner(){return this.actionRunner||(this.actionRunner=this._register(new Hl)),this.actionRunner}updateTitleArea(){this._onTitleAreaUpdate.fire()}isVisible(){return this.visible}getControl(){}};var aCt={separatorBorder:F.transparent};var Cb;(i=>{i.Distribute={type:"distribute"};function e(o){return{type:"split",index:o}}i.Split=e;function t(o){return{type:"auto",index:o}}i.Auto=t;function n(o){return{type:"invisible",cachedVisibleSize:o}}i.Invisible=n})(Cb||={});var _Ct={separatorBorder:F.transparent};var MF;(i=>{i.Distribute={type:"distribute"},i.Split={type:"split"},i.Auto={type:"auto"};function n(o){return{type:"invisible",cachedVisibleSize:o}}i.Invisible=n})(MF||={});async function SR(r){let e=navigator.usb;if(!e)return;let t=await e.requestDevice({filters:r?.filters??[]});if(t)return{deviceClass:t.deviceClass,deviceProtocol:t.deviceProtocol,deviceSubclass:t.deviceSubclass,deviceVersionMajor:t.deviceVersionMajor,deviceVersionMinor:t.deviceVersionMinor,deviceVersionSubminor:t.deviceVersionSubminor,manufacturerName:t.manufacturerName,productId:t.productId,productName:t.productName,serialNumber:t.serialNumber,usbVersionMajor:t.usbVersionMajor,usbVersionMinor:t.usbVersionMinor,usbVersionSubminor:t.usbVersionSubminor,vendorId:t.vendorId}}async function CR(r){let e=navigator.serial;if(!e)return;let t=await e.requestPort({filters:r?.filters??[]});if(!t)return;let n=t.getInfo();return{usbVendorId:n.usbVendorId,usbProductId:n.usbProductId}}async function ER(r){let e=navigator.hid;if(!e)return;let t=await e.requestDevice({filters:r?.filters??[]});if(!t.length)return;let n=t[0];return{opened:n.opened,vendorId:n.vendorId,productId:n.productId,productName:n.productName,collections:n.collections}}var NF=60,FF=NF*60,pE=FF*24,tEt=pE*7,nEt=pE*30,iEt=pE*365;function TR(r){return r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0")+"T"+String(r.getHours()).padStart(2,"0")+":"+String(r.getMinutes()).padStart(2,"0")+":"+String(r.getSeconds()).padStart(2,"0")+"."+(r.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var Op=/^([^.]+\..+)[:=](.+)$/,st=class{constructor(e,t,n){this._args=e;this.paths=t;this.productService=n}get appRoot(){return fl(pa.asFileUri("").fsPath)}get userHome(){return L.file(this.paths.homeDir)}get userDataPath(){return this.paths.userDataDir}get appSettingsHome(){return L.file(An(this.userDataPath,"User"))}get tmpDir(){return L.file(this.paths.tmpDir)}get cacheHome(){return L.file(this.userDataPath)}get stateResource(){return Me(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome.with({scheme:q.vscodeUserData})}get userDataSyncHome(){return Me(this.appSettingsHome,"sync")}get logsHome(){if(!this.args.logsPath){let e=TR(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=An(this.userDataPath,"logs",e)}return L.file(this.args.logsPath)}get sync(){return this.args.sync}get machineSettingsResource(){return Me(L.file(An(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return Me(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return Me(this.appSettingsHome,"History")}get keyboardLayoutResource(){return Me(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){let e=To.VSCODE_PORTABLE;return e?L.file(An(e,"argv.json")):Me(this.userHome,this.productService.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return L.file(An(this.userDataPath,"Workspaces"))}get builtinExtensionsPath(){let e=this.args["builtin-extensions-dir"];return e?ml(e):Ti(An(pa.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){let e=this.args["extensions-download-dir"];return e?L.file(ml(e)):L.file(An(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){let e=this.args["extensions-dir"];if(e)return ml(e);let t=To.VSCODE_EXTENSIONS;if(t)return t;let n=To.VSCODE_PORTABLE;return n?An(n,"extensions"):Me(this.userHome,this.productService.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){let e=this.args.extensionDevelopmentPath;if(Array.isArray(e))return e.map(t=>/^[^:/?#]+?:\/\//.test(t)?L.parse(t):L.file(Ti(t)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(e=>e==="ui"||e==="workspace"||e==="web"?e:"workspace")}get extensionTestsLocationURI(){let e=this.args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?L.parse(e):L.file(Ti(e))}get disableExtensions(){if(this.args["disable-extensions"])return!0;let e=this.args["disable-extension"];if(e){if(typeof e=="string")return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get debugExtensionHost(){return BF(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!To.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(e=>!Op.test(e))}get extensionLogLevel(){let e=[];for(let t of this.args.log||[]){let n=Op.exec(t);n&&n[1]&&n[2]&&e.push([n[1],n[2]])}return e.length?e:void 0}get serviceMachineIdResource(){return Me(L.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get useInMemorySecretStorage(){return!!this.args["use-inmemory-secretstorage"]}get policyFile(){if(this.args["__enable-file-policy"]){let e=To.VSCODE_PORTABLE;return e?L.file(An(e,"policy.json")):Me(this.userHome,this.productService.dataFolderName,"policy.json")}}editSessionId=this.args.editSessionId;get continueOn(){return this.args.continueOn}set continueOn(e){this.args.continueOn=e}get args(){return this._args}};T([K],st.prototype,"appRoot",1),T([K],st.prototype,"userHome",1),T([K],st.prototype,"userDataPath",1),T([K],st.prototype,"appSettingsHome",1),T([K],st.prototype,"tmpDir",1),T([K],st.prototype,"cacheHome",1),T([K],st.prototype,"stateResource",1),T([K],st.prototype,"userRoamingDataHome",1),T([K],st.prototype,"userDataSyncHome",1),T([K],st.prototype,"sync",1),T([K],st.prototype,"machineSettingsResource",1),T([K],st.prototype,"workspaceStorageHome",1),T([K],st.prototype,"localHistoryHome",1),T([K],st.prototype,"keyboardLayoutResource",1),T([K],st.prototype,"argvResource",1),T([K],st.prototype,"isExtensionDevelopment",1),T([K],st.prototype,"untitledWorkspacesHome",1),T([K],st.prototype,"builtinExtensionsPath",1),T([K],st.prototype,"extensionsPath",1),T([K],st.prototype,"extensionDevelopmentLocationURI",1),T([K],st.prototype,"extensionDevelopmentKind",1),T([K],st.prototype,"extensionTestsLocationURI",1),T([K],st.prototype,"debugExtensionHost",1),T([K],st.prototype,"logLevel",1),T([K],st.prototype,"extensionLogLevel",1),T([K],st.prototype,"serviceMachineIdResource",1),T([K],st.prototype,"disableTelemetry",1),T([K],st.prototype,"disableWorkspaceTrust",1),T([K],st.prototype,"useInMemorySecretStorage",1),T([K],st.prototype,"policyFile",1);function BF(r,e){return UF(r["inspect-extensions"],r["inspect-brk-extensions"],5870,e,r.debugId,r.extensionEnvironment)}function UF(r,e,t,n,i,o){let a=Number(e||r)||(n?null:t),l=a?!!e:!1,d;if(o)try{d=JSON.parse(o)}catch{}return{port:a,break:l,debugId:i,env:d}}var wR=Ri,Ue=class{constructor(e,t,n,i){this.workspaceId=e;this.logsHome=t;this.options=n;this.productService=i;if(n.workspaceProvider&&Array.isArray(n.workspaceProvider.payload))try{this.payload=new Map(n.workspaceProvider.payload)}catch(o){Ae(o)}}get remoteAuthority(){return this.options.remoteAuthority}get expectsResolverExtension(){return!!this.options.remoteAuthority?.includes("+")&&!this.options.webSocketFactory}get isBuilt(){return!!this.productService.commit}get logLevel(){let e=this.payload?.get("logLevel");return e?e.split(",").find(t=>!Op.test(t)):this.options.developmentOptions?.logLevel!==void 0?Sm(this.options.developmentOptions?.logLevel):void 0}get extensionLogLevel(){let e=this.payload?.get("logLevel");if(e){let t=[];for(let n of e.split(",")){let i=Op.exec(n);i&&i[1]&&i[2]&&t.push([i[1],i[2]])}return t.length?t:void 0}return this.options.developmentOptions?.extensionLogLevel!==void 0?this.options.developmentOptions?.extensionLogLevel.map(([t,n])=>[t,Sm(n)]):void 0}get profDurationMarkers(){let e=this.payload?.get("profDurationMarkers");if(e){let t=[];for(let n of e.split(","))t.push(n);return t.length===2?t:void 0}}get windowLogsPath(){return this.logsHome}get logFile(){return Me(this.windowLogsPath,"window.log")}get userRoamingDataHome(){return L.file("/User").with({scheme:q.vscodeUserData})}get argvResource(){return Me(this.userRoamingDataHome,"argv.json")}get cacheHome(){return Me(this.userRoamingDataHome,"caches")}get workspaceStorageHome(){return Me(this.userRoamingDataHome,"workspaceStorage")}get localHistoryHome(){return Me(this.userRoamingDataHome,"History")}get stateResource(){return Me(this.userRoamingDataHome,"State","storage.json")}get userDataSyncHome(){return Me(this.userRoamingDataHome,"sync",this.workspaceId)}get sync(){}get keyboardLayoutResource(){return Me(this.userRoamingDataHome,"keyboardLayout.json")}get untitledWorkspacesHome(){return Me(this.userRoamingDataHome,"Workspaces")}get serviceMachineIdResource(){return Me(this.userRoamingDataHome,"machineid")}get extHostLogsPath(){return Me(this.logsHome,"exthost")}get extHostTelemetryLogFile(){return Me(this.extHostLogsPath,"extensionTelemetry.log")}extensionHostDebugEnvironment=void 0;get debugExtensionHost(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.params}get isExtensionDevelopment(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.isExtensionDevelopment}get extensionDevelopmentLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentLocationURI}get extensionDevelopmentLocationKind(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentKind}get extensionTestsLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionTestsLocationURI}get extensionEnabledProposedApi(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionEnabledProposedApi}get debugRenderer(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.debugRenderer}get enableSmokeTestDriver(){return this.options.developmentOptions?.enableSmokeTestDriver}get disableExtensions(){return this.payload?.get("disableExtensions")==="true"}get enableExtensions(){return this.options.enabledExtensions}get webviewExternalEndpoint(){let e=this.options.webviewEndpoint||this.productService.webviewContentExternalBaseUrlTemplate||"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",t=this.payload?.get("webviewExternalEndpointCommit");return e.replace("{{commit}}",t??this.productService.commit??"ef65ac1ba57f57f2a3961bfe94aa20481caca4c6").replace("{{quality}}",(t?"insider":this.productService.quality)??"insider")}get extensionTelemetryLogResource(){return Me(this.logsHome,"extensionTelemetry.log")}get disableTelemetry(){return!1}get verbose(){return this.payload?.get("verbose")==="true"}get logExtensionHostCommunication(){return this.payload?.get("logExtensionHostCommunication")==="true"}get skipReleaseNotes(){return this.payload?.get("skipReleaseNotes")==="true"}get skipWelcome(){return this.payload?.get("skipWelcome")==="true"}get disableWorkspaceTrust(){return!this.options.enableWorkspaceTrust}get profile(){return this.payload?.get("profile")}editSessionId=this.options.editSessionId;payload;resolveExtensionHostDebugEnvironment(){let e={params:{port:null,break:!1},debugRenderer:!1,isExtensionDevelopment:!1,extensionDevelopmentLocationURI:void 0,extensionDevelopmentKind:void 0};if(this.payload)for(let[n,i]of this.payload)switch(n){case"extensionDevelopmentPath":e.extensionDevelopmentLocationURI||(e.extensionDevelopmentLocationURI=[]),e.extensionDevelopmentLocationURI.push(L.parse(i)),e.isExtensionDevelopment=!0;break;case"extensionDevelopmentKind":e.extensionDevelopmentKind=[i];break;case"extensionTestsPath":e.extensionTestsLocationURI=L.parse(i);break;case"debugRenderer":e.debugRenderer=i==="true";break;case"debugId":e.params.debugId=i;break;case"inspect-brk-extensions":e.params.port=parseInt(i),e.params.break=!0;break;case"inspect-extensions":e.params.port=parseInt(i);break;case"enableProposedApi":e.extensionEnabledProposedApi=[];break}let t=this.options.developmentOptions;return t&&!e.isExtensionDevelopment&&(t.extensions?.length&&(e.extensionDevelopmentLocationURI=t.extensions.map(n=>L.revive(n)),e.isExtensionDevelopment=!0),t.extensionTestsPath&&(e.extensionTestsLocationURI=L.revive(t.extensionTestsPath))),e}get filesToOpenOrCreate(){if(this.payload){let e=this.payload.get("openFile");if(e){let t=L.parse(e);if(this.payload.has("gotoLineMode")){let n=WT(t.path);return[{fileUri:t.with({path:n.path}),options:{selection:Zt(n.line)?void 0:{startLineNumber:n.line,startColumn:n.column||1}}}]}return[{fileUri:t}]}}}get filesToDiff(){if(this.payload){let e=this.payload.get("diffFilePrimary"),t=this.payload.get("diffFileSecondary");if(e&&t)return[{fileUri:L.parse(t)},{fileUri:L.parse(e)}]}}get filesToMerge(){if(this.payload){let e=this.payload.get("mergeFile1"),t=this.payload.get("mergeFile2"),n=this.payload.get("mergeFileBase"),i=this.payload.get("mergeFileResult");if(e&&t&&n&&i)return[{fileUri:L.parse(e)},{fileUri:L.parse(t)},{fileUri:L.parse(n)},{fileUri:L.parse(i)}]}}};T([K],Ue.prototype,"remoteAuthority",1),T([K],Ue.prototype,"expectsResolverExtension",1),T([K],Ue.prototype,"isBuilt",1),T([K],Ue.prototype,"logLevel",1),T([K],Ue.prototype,"windowLogsPath",1),T([K],Ue.prototype,"logFile",1),T([K],Ue.prototype,"userRoamingDataHome",1),T([K],Ue.prototype,"argvResource",1),T([K],Ue.prototype,"cacheHome",1),T([K],Ue.prototype,"workspaceStorageHome",1),T([K],Ue.prototype,"localHistoryHome",1),T([K],Ue.prototype,"stateResource",1),T([K],Ue.prototype,"userDataSyncHome",1),T([K],Ue.prototype,"sync",1),T([K],Ue.prototype,"keyboardLayoutResource",1),T([K],Ue.prototype,"untitledWorkspacesHome",1),T([K],Ue.prototype,"serviceMachineIdResource",1),T([K],Ue.prototype,"extHostLogsPath",1),T([K],Ue.prototype,"extHostTelemetryLogFile",1),T([K],Ue.prototype,"debugExtensionHost",1),T([K],Ue.prototype,"isExtensionDevelopment",1),T([K],Ue.prototype,"extensionDevelopmentLocationURI",1),T([K],Ue.prototype,"extensionDevelopmentLocationKind",1),T([K],Ue.prototype,"extensionTestsLocationURI",1),T([K],Ue.prototype,"extensionEnabledProposedApi",1),T([K],Ue.prototype,"debugRenderer",1),T([K],Ue.prototype,"enableSmokeTestDriver",1),T([K],Ue.prototype,"disableExtensions",1),T([K],Ue.prototype,"enableExtensions",1),T([K],Ue.prototype,"webviewExternalEndpoint",1),T([K],Ue.prototype,"extensionTelemetryLogResource",1),T([K],Ue.prototype,"disableTelemetry",1),T([K],Ue.prototype,"verbose",1),T([K],Ue.prototype,"logExtensionHostCommunication",1),T([K],Ue.prototype,"skipReleaseNotes",1),T([K],Ue.prototype,"skipWelcome",1),T([K],Ue.prototype,"disableWorkspaceTrust",1),T([K],Ue.prototype,"profile",1),T([K],Ue.prototype,"filesToOpenOrCreate",1),T([K],Ue.prototype,"filesToDiff",1),T([K],Ue.prototype,"filesToMerge",1);var kR=k("layoutService");var qs=kR;function Eb(r){switch(r){case 0:return"left";case 1:return"right";case 2:return"bottom";case 3:return"top";default:return"bottom"}}var XTt={[Eb(0)]:0,[Eb(1)]:1,[Eb(2)]:2,[Eb(3)]:3};function hE(r){switch(r){case 0:return"always";case 1:return"never";case 2:return"preserve";default:return"preserve"}}var QTt={[hE(0)]:0,[hE(1)]:1,[hE(2)]:2};var po=class extends O{constructor(t,n){super();this.logService=t;this.storageService=n;this._startupKind=this.resolveStartupKind(),this._register(this.storageService.onWillSaveState(i=>{i.reason===1&&this.storageService.store(po.LAST_SHUTDOWN_REASON_KEY,this.shutdownReason,1,1)}))}static LAST_SHUTDOWN_REASON_KEY="lifecyle.lastShutdownReason";_onBeforeShutdown=this._register(new E);onBeforeShutdown=this._onBeforeShutdown.event;_onWillShutdown=this._register(new E);onWillShutdown=this._onWillShutdown.event;_onDidShutdown=this._register(new E);onDidShutdown=this._onDidShutdown.event;_onBeforeShutdownError=this._register(new E);onBeforeShutdownError=this._onBeforeShutdownError.event;_onShutdownVeto=this._register(new E);onShutdownVeto=this._onShutdownVeto.event;_startupKind;get startupKind(){return this._startupKind}_phase=1;get phase(){return this._phase}phaseWhen=new Map;shutdownReason;resolveStartupKind(){let t=this.doResolveStartupKind()??1;return this.logService.trace(`[lifecycle] starting up (startup kind: ${t})`),t}doResolveStartupKind(){let t=this.storageService.getNumber(po.LAST_SHUTDOWN_REASON_KEY,1);this.storageService.remove(po.LAST_SHUTDOWN_REASON_KEY,1);let n;switch(t){case 3:n=3;break;case 4:n=4;break}return n}set phase(t){if(t<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===t)return;this.logService.trace(`lifecycle: phase changed (value: ${t})`),this._phase=t,Wt(`code/LifecyclePhase/${H_(t)}`);let n=this.phaseWhen.get(this._phase);n&&(n.open(),this.phaseWhen.delete(this._phase))}async when(t){if(t<=this._phase)return;let n=this.phaseWhen.get(t);n||(n=new Al,this.phaseWhen.set(t,n)),await n.wait()}};po=T([S(0,je),S(1,Vt)],po);var Ap=class extends po{beforeUnloadListener=void 0;unloadListener=void 0;ignoreBeforeUnload=!1;didUnload=!1;constructor(e,t){super(e,t),this.registerListeners()}registerListeners(){this.beforeUnloadListener=ie(pe,Ie.BEFORE_UNLOAD,e=>this.onBeforeUnload(e)),this.unloadListener=ie(pe,Ie.PAGE_HIDE,()=>this.onUnload())}onBeforeUnload(e){this.ignoreBeforeUnload?(this.logService.info("[lifecycle] onBeforeUnload triggered but ignored once"),this.ignoreBeforeUnload=!1):(this.logService.info("[lifecycle] onBeforeUnload triggered and handled with veto support"),this.doShutdown(()=>this.vetoBeforeUnload(e)))}vetoBeforeUnload(e){e.preventDefault(),e.returnValue=c("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}withExpectedShutdown(e,t){if(typeof e=="number")return this.shutdownReason=e,this.storageService.flush(1);this.ignoreBeforeUnload=!0;try{t?.()}finally{this.ignoreBeforeUnload=!1}}async shutdown(){this.logService.info("[lifecycle] shutdown triggered"),this.beforeUnloadListener?.dispose(),this.unloadListener?.dispose(),await this.storageService.flush(1),this.doShutdown()}doShutdown(e){let t=this.logService;this.storageService.flush(1);let n=!1;function i(o,s){typeof e=="function"&&(o instanceof Promise&&(t.error(`[lifecycle] Long running operations before shutdown are unsupported in the web (id: ${s})`),n=!0),o===!0&&(t.info(`[lifecycle]: Unload was prevented (id: ${s})`),n=!0))}return this._onBeforeShutdown.fire({reason:2,veto(o,s){i(o,s)},finalVeto(o,s){i(o(),s)}}),n&&typeof e=="function"?e():this.onUnload()}onUnload(){if(this.didUnload)return;this.didUnload=!0,this._register(ie(pe,Ie.PAGE_SHOW,t=>this.onLoadAfterUnload(t)));let e=this.logService;this._onWillShutdown.fire({reason:2,joiners:()=>[],token:We.None,join(t,n){e.error(`[lifecycle] Long running operations during shutdown are unsupported in the web (id: ${n.id})`)},force:()=>{}}),this._onDidShutdown.fire()}onLoadAfterUnload(e){e.persisted&&this.withExpectedShutdown({disableShutdownHandling:!0},()=>pe.location.reload())}doResolveStartupKind(){let e=super.doResolveStartupKind();return typeof e!="number"&&performance.getEntriesByType("navigation").at(0)?.type==="reload"&&(e=3),e}};Ap=T([S(0,je),S(1,Vt)],Ap);At(ao,Ap,0);var js=k("hostService");var zF=c("open","open"),HF=c("close","close"),KF=c("find","find"),Tb={open:zF,close:HF,find:KF};async function _R(r,e){let t=[];return await RR(r,t,e.logsHome,e.logsHome),t}async function RR(r,e,t,n){let i=await r.resolve(t);for(let{resource:o,isDirectory:s}of i.children||[])if(s)await RR(r,e,o,n);else{let a=(await r.readFile(o)).value.toString();if(a){let l=ma(n,o);l&&e.push({relativePath:l,contents:a})}}}var Mp=class{constructor(e,t,n,i){this.fileService=e;this.environmentService=t;this.lifecycleService=n;this.logService=i}async getLogs(){return _R(this.fileService,this.environmentService)}async whenWorkbenchRestored(){this.logService.info("[driver] Waiting for restored lifecycle phase..."),await this.lifecycleService.when(3),this.logService.info("[driver] Restored lifecycle phase reached. Waiting for contributions..."),await De.as(Gf.Workbench).whenRestored,this.logService.info("[driver] Workbench contributions created.")}async setValue(e,t){let n=pe.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let i=n;i.value=t;let o=new Event("input",{bubbles:!0,cancelable:!0});i.dispatchEvent(o)}async isActiveElement(e){if(pe.document.querySelector(e)!==pe.document.activeElement){let n=[],i=pe.document.activeElement;for(;i;){let o=i.tagName,s=i.id?`#${i.id}`:"",a=On(i.className.split(/\s+/g).map(l=>l.trim())).map(l=>`.${l}`).join("");n.unshift(`${o}${s}${a}`),i=i.parentElement}throw new Error(`Active element not found. Current active element is '${n.join(" > ")}'. Looking for ${e}`)}return!0}async getElements(e,t){let n=pe.document.querySelectorAll(e),i=[];for(let o=0;o<n.length;o++){let s=n.item(o);i.push(this.serializeElement(s,t))}return i}serializeElement(e,t){let n=Object.create(null);for(let a=0;a<e.attributes.length;a++){let l=e.attributes.item(a);l&&(n[l.name]=l.value)}let i=[];if(t)for(let a=0;a<e.children.length;a++){let l=e.children.item(a);l&&i.push(this.serializeElement(l,!0))}let{left:o,top:s}=qc(e);return{tagName:e.tagName,className:e.className,textContent:e.textContent||"",attributes:n,children:i,left:o,top:s}}async getElementXY(e,t,n){let i=typeof t=="number"&&typeof n=="number"?{x:t,y:n}:void 0;return this._getElementXY(e,i)}async typeInEditor(e,t){let n=pe.document.querySelector(e);if(!n)throw new Error(`Editor not found: ${e}`);let i=n,o=i.selectionStart,s=o+t.length,a=i.value,l=a.substr(0,o)+t+a.substr(o);i.value=l,i.setSelectionRange(s,s);let d=new Event("input",{bubbles:!0,cancelable:!0});i.dispatchEvent(d)}async getTerminalBuffer(e){let t=pe.document.querySelector(e);if(!t)throw new Error(`Terminal not found: ${e}`);let n=t.xterm;if(!n)throw new Error(`Xterm not found: ${e}`);let i=[];for(let o=0;o<n.buffer.active.length;o++)i.push(n.buffer.active.getLine(o).translateToString(!0));return i}async writeInTerminal(e,t){let n=pe.document.querySelector(e);if(!n)throw new Error(`Element not found: ${e}`);let i=n.xterm;if(!i)throw new Error(`Xterm not found: ${e}`);i.input(t)}getLocaleInfo(){return Promise.resolve({language:Ei,locale:OE})}getLocalizedStrings(){return Promise.resolve({open:Tb.open,close:Tb.close,find:Tb.find})}async _getElementXY(e,t){let n=pe.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let{left:i,top:o}=qc(n),{width:s,height:a}=Gc(n),l,d;return t?(l=i+t.x,d=o+t.y):(l=i+s/2,d=o+a/2),l=Math.round(l),d=Math.round(d),{x:l,y:d}}async exitApplication(){}};Mp=T([S(0,Ut),S(1,Ri),S(2,ao),S(3,je)],Mp);function PR(r){Object.assign(pe,{driver:r.createInstance(Mp)})}var Ni=class extends O{constructor(t,n={getWindowsCount:$h,getWindows:$c},i,o){super();this.hostService=i;this.environmentService=o;this.enableWindowFocusOnElementFocus(t),this.enableMultiWindowAwareTimeout(t,n),this.registerFullScreenListeners(t.vscodeWindowId)}static TIMEOUT_HANDLES=Number.MIN_SAFE_INTEGER;static TIMEOUT_DISPOSABLES=new Map;enableWindowFocusOnElementFocus(t){let n=t.HTMLElement.prototype.focus,i=this;t.HTMLElement.prototype.focus=function(o){i.onElementFocus(Be(this)),n.apply(this,[o])}}onElementFocus(t){let n=jc();n!==t&&n.document.hasFocus()&&(t.focus(),!this.environmentService.extensionTestsLocationURI&&!t.document.hasFocus()&&this.hostService.focus(t))}enableMultiWindowAwareTimeout(t,n={getWindowsCount:$h,getWindows:$c}){let i=t.setTimeout;Object.defineProperty(t,"vscodeOriginalSetTimeout",{get:()=>i});let o=t.clearTimeout;Object.defineProperty(t,"vscodeOriginalClearTimeout",{get:()=>o}),t.setTimeout=function(s,a=0,...l){if(n.getWindowsCount()===1||typeof s=="string"||a===0)return i.apply(this,[s,a,...l]);let d=new Set,u=Ni.TIMEOUT_HANDLES++;Ni.TIMEOUT_DISPOSABLES.set(u,d);let p=yc(s,()=>{ft(d),Ni.TIMEOUT_DISPOSABLES.delete(u)});for(let{window:h,disposables:g}of n.getWindows()){if(Vb(h)&&h.document.visibilityState==="hidden")continue;let b=!1,f=h.vscodeOriginalSetTimeout.apply(this,[(...D)=>{b||p(...D)},a,...l]),v=j(()=>{b=!0,h.vscodeOriginalClearTimeout(f),d.delete(v)});g.add(v),d.add(v)}return u},t.clearTimeout=function(s){let a=typeof s=="number"?Ni.TIMEOUT_DISPOSABLES.get(s):void 0;a?(ft(a),Ni.TIMEOUT_DISPOSABLES.delete(s)):o.apply(this,[s])}}registerFullScreenListeners(t){this._register(this.hostService.onDidChangeFullScreen(({windowId:n,fullscreen:i})=>{if(n===t){let o=Gh(t);o&&gT(i,o.window)}}))}static async confirmOnShutdown(t,n){let i=t.get(ya),o=t.get(Xe),s=n===2?Fe?c("quitMessageMac","Are you sure you want to quit?"):c("quitMessage","Are you sure you want to exit?"):c("closeWindowMessage","Are you sure you want to close the window?"),a=n===2?Fe?c({key:"quitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Quit"):c({key:"exitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Exit"):c({key:"closeWindowButtonLabel",comment:["&& denotes a mnemonic"]},"&&Close Window"),l=await i.confirm({message:s,primaryButton:a,checkbox:{label:c("doNotAskAgain","Do not ask me again")}});return l.confirmed&&l.checkboxChecked&&await o.updateValue("window.confirmBeforeClose","never"),l.confirmed}};Ni=T([S(2,js),S(3,Dr)],Ni);var wb=class extends Ni{constructor(t,n,i,o,s,a,l,d,u){super(pe,void 0,u,a);this.openerService=t;this.lifecycleService=n;this.dialogService=i;this.labelService=o;this.productService=s;this.browserEnvironmentService=a;this.layoutService=l;this.instantiationService=d;this.registerListeners(),this.create()}registerListeners(){this._register(this.lifecycleService.onWillShutdown(()=>this.onWillShutdown()));let t=hl&&pe.visualViewport?pe.visualViewport:pe;this._register(ie(t,Ie.RESIZE,()=>{this.layoutService.layout(),hl&&pe.scrollTo(0,0)})),this._register(ie(this.layoutService.mainContainer,Ie.WHEEL,n=>n.preventDefault(),{passive:!1})),this._register(ie(this.layoutService.mainContainer,Ie.CONTEXT_MENU,n=>Sn.stop(n,!0))),this._register(ie(this.layoutService.mainContainer,Ie.DROP,n=>Sn.stop(n,!0)))}onWillShutdown(){Q.toPromise(Q.any(Q.once(new qe(pe.document.body,Ie.KEY_DOWN,!0).event),Q.once(new qe(pe.document.body,Ie.MOUSE_DOWN,!0).event))).then(async()=>{await jn(3e3),await this.dialogService.prompt({type:St.Error,message:c("shutdownError","An unexpected error occurred that requires a reload of this page."),detail:c("shutdownErrorDetail","The workbench was unexpectedly disposed while running."),buttons:[{label:c({key:"reload",comment:["&& denotes a mnemonic"]},"&&Reload"),run:()=>pe.location.reload()}]})})}create(){this.setupOpenHandlers(),this.registerLabelFormatters(),this.registerCommands(),this.setupDriver()}setupDriver(){this.environmentService.enableSmokeTestDriver&&PR(this.instantiationService)}setupOpenHandlers(){this.openerService.setDefaultExternalOpener({openExternal:async t=>{let n=!1;if(this.browserEnvironmentService.options?.openerAllowedExternalUrlPrefixes){for(let i of this.browserEnvironmentService.options.openerAllowedExternalUrlPrefixes)if(t.startsWith(i)){n=!0;break}}if(Oh(t,q.http)||Oh(t,q.https))kl?Dw(t,!n)||await this.dialogService.prompt({type:St.Warning,message:c("unableToOpenExternal","The browser interrupted the opening of a new tab or window. Press 'Open' to open it anyway."),detail:t,buttons:[{label:c({key:"open",comment:["&& denotes a mnemonic"]},"&&Open"),run:()=>n?lI(t):aI(t)},{label:c({key:"learnMore",comment:["&& denotes a mnemonic"]},"&&Learn More"),run:()=>this.openerService.open(L.parse("https://aka.ms/allow-vscode-popup"))}],cancelButton:!0}):n?lI(t):aI(t);else{let i=()=>{this.lifecycleService.withExpectedShutdown({disableShutdownHandling:!0},()=>pe.location.href=t)};i();let o=async()=>{let{downloadUrl:s}=this.productService,a,l=[{label:c({key:"openExternalDialogButtonRetry.v2",comment:["&& denotes a mnemonic"]},"&&Try Again"),run:()=>i()}];s!==void 0?(a=c("openExternalDialogDetail.v2",`We launched {0} on your computer.

If {1} did not launch, try again or install it below.`,this.productService.nameLong,this.productService.nameLong),l.push({label:c({key:"openExternalDialogButtonInstall.v3",comment:["&& denotes a mnemonic"]},"&&Install"),run:async()=>{await this.openerService.open(L.parse(s)),o()}})):a=c("openExternalDialogDetailNoInstall",`We launched {0} on your computer.

If {1} did not launch, try again below.`,this.productService.nameLong,this.productService.nameLong),await this.hostService.withExpectedShutdown(()=>this.dialogService.prompt({type:St.Info,message:c("openExternalDialogTitle","All done. You can close this tab now."),detail:a,buttons:l,cancelButton:!0}))};Oh(t,this.productService.urlProtocol)&&await o()}return!0}})}registerLabelFormatters(){this._register(this.labelService.registerFormatter({scheme:q.vscodeUserData,priority:!0,formatting:{label:"(Settings) ${path}",separator:"/"}}))}registerCommands(){Tn.registerCommand("workbench.experimental.requestUsbDevice",async(t,n)=>SR(n)),Tn.registerCommand("workbench.experimental.requestSerialPort",async(t,n)=>CR(n)),Tn.registerCommand("workbench.experimental.requestHidDevice",async(t,n)=>ER(n))}};wb=T([S(0,wm),S(1,ao),S(2,ya),S(3,$i),S(4,ps),S(5,wR),S(6,qs),S(7,Ct),S(8,js)],wb);var $F=k("auxiliaryWindowService");var Np=class extends Ni{constructor(t,n,i,o,s,a){super(t,void 0,s,a);this.window=t;this.container=n;this.configurationService=o;this.whenStylesHaveLoaded=i.wait().then(()=>{}),this.registerListeners()}_onWillLayout=this._register(new E);onWillLayout=this._onWillLayout.event;_onDidLayout=this._register(new E);onDidLayout=this._onDidLayout.event;_onBeforeUnload=this._register(new E);onBeforeUnload=this._onBeforeUnload.event;_onUnload=this._register(new E);onUnload=this._onUnload.event;_onWillDispose=this._register(new E);onWillDispose=this._onWillDispose.event;whenStylesHaveLoaded;registerListeners(){this._register(ie(this.window,Ie.BEFORE_UNLOAD,t=>this.handleBeforeUnload(t))),this._register(ie(this.window,Ie.UNLOAD,()=>this.handleUnload())),this._register(ie(this.window,"unhandledrejection",t=>{Ae(t.reason),t.preventDefault()})),this._register(ie(this.window,Ie.RESIZE,()=>this.layout())),this._register(ie(this.container,Ie.SCROLL,()=>this.container.scrollTop=0)),Yt?(this._register(ie(this.container,Ie.DROP,t=>Sn.stop(t,!0))),this._register(ie(this.container,Ie.WHEEL,t=>t.preventDefault(),{passive:!1})),this._register(ie(this.container,Ie.CONTEXT_MENU,t=>Sn.stop(t,!0)))):(this._register(ie(this.window.document.body,Ie.DRAG_OVER,t=>Sn.stop(t))),this._register(ie(this.window.document.body,Ie.DROP,t=>Sn.stop(t))))}handleBeforeUnload(t){let n;if(this._onBeforeUnload.fire({veto(s){s&&(n=s)}}),n){this.handleVetoBeforeClose(t,n);return}let i=this.configurationService.getValue("window.confirmBeforeClose");(i==="always"||i==="keyboardOnly"&&Kh.getInstance().isModifierPressed)&&this.confirmBeforeClose(t)}handleVetoBeforeClose(t,n){this.preventUnload(t)}preventUnload(t){t.preventDefault(),t.returnValue=c("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}confirmBeforeClose(t){this.preventUnload(t)}handleUnload(){this._onUnload.fire()}layout(){let t=Gc(this.window.document.body,this.container);this._onWillLayout.fire(t),this._onDidLayout.fire(t)}createState(){return{bounds:{x:this.window.screenX,y:this.window.screenY,width:this.window.outerWidth,height:this.window.outerHeight},zoomLevel:hT(this.window)}}dispose(){this._store.isDisposed||(this._onWillDispose.fire(),super.dispose())}};Np=T([S(3,Xe),S(4,js),S(5,Dr)],Np);var Ho=class extends O{constructor(t,n,i,o,s,a){super();this.layoutService=t;this.dialogService=n;this.configurationService=i;this.telemetryService=o;this.hostService=s;this.environmentService=a}static DEFAULT_SIZE={width:800,height:600};static WINDOW_IDS=zh(pe)+1;_onDidOpenAuxiliaryWindow=this._register(new E);onDidOpenAuxiliaryWindow=this._onDidOpenAuxiliaryWindow.event;windows=new Map;async open(t){Wt("code/auxiliaryWindow/willOpen");let n=await this.openWindow(t);if(!n)throw new Error(c("unableToOpenWindowError","Unable to open a new window."));let i=await this.resolveWindowId(n);$p(n,i);let o=new le,{container:s,stylesLoaded:a}=this.createContainer(n,o,t),l=this.createAuxiliaryWindow(n,s,a),d=new le;this.windows.set(n.vscodeWindowId,l),d.add(j(()=>this.windows.delete(n.vscodeWindowId)));let u=new le;return Q.once(l.onWillDispose)(()=>{n.close(),o.dispose(),d.dispose(),u.dispose()}),d.add(hw(n)),this._onDidOpenAuxiliaryWindow.fire({window:l,disposables:u}),Wt("code/auxiliaryWindow/didOpen"),this.telemetryService.publicLog2("auxiliaryWindowOpen",{bounds:!!t?.bounds}),l}createAuxiliaryWindow(t,n,i){return new Np(t,n,i,this.configurationService,this.hostService,this.environmentService)}async openWindow(t){let n=jc(),i={x:n.screenX,y:n.screenY,width:n.outerWidth,height:n.outerHeight},o=Math.max(t?.bounds?.width??Ho.DEFAULT_SIZE.width,yS.WIDTH),s=Math.max(t?.bounds?.height??Ho.DEFAULT_SIZE.height,yS.HEIGHT),a={x:t?.bounds?.x??Math.max(i.x+i.width/2-o/2,0),y:t?.bounds?.y??Math.max(i.y+i.height/2-s/2,0),width:o,height:s};!t?.bounds&&a.x===i.x&&a.y===i.y&&(a={...a,x:a.x+30,y:a.y+30});let l=On(["popup=yes",`left=${a.x}`,`top=${a.y}`,`width=${a.width}`,`height=${a.height}`,t?.nativeTitlebar?"window-native-titlebar=yes":void 0,t?.disableFullscreen?"window-disable-fullscreen=yes":void 0,t?.mode===0?"window-maximized=yes":void 0,t?.mode===2?"window-fullscreen=yes":void 0]),d=pe.open(Zp?"":"about:blank",void 0,l.join(","));return!d&&Yt?(await this.dialogService.prompt({type:St.Warning,message:c("unableToOpenWindow","The browser interrupted the opening of a new window. Press 'Retry' to try again."),detail:c("unableToOpenWindowDetail","To avoid this problem in the future, please ensure to allow popups for this website."),buttons:[{label:c({key:"retry",comment:["&& denotes a mnemonic"]},"&&Retry"),run:()=>this.openWindow(t)}],cancelButton:!0})).result:d?.window}async resolveWindowId(t){return Ho.WINDOW_IDS++}createContainer(t,n,i){t.document.createElement=function(){throw new Error('Not allowed to create elements in child window JavaScript context. Always use the main window so that "xyz instanceof HTMLElement" continues to work.')},this.applyMeta(t);let{stylesLoaded:o}=this.applyCSS(t,n),s=this.applyHTML(t,n);return{stylesLoaded:o,container:s}}applyMeta(t){for(let i of['meta[charset="utf-8"]','meta[http-equiv="Content-Security-Policy"]','meta[name="viewport"]','meta[name="theme-color"]']){let o=pe.document.querySelector(i);if(o){let s=Sw(t.document.head);if(Yh(o,s),i==='meta[http-equiv="Content-Security-Policy"]'){let a=s.getAttribute("content");a&&s.setAttribute("content",a.replace(/(script-src[^\;]*)/,"script-src 'none'"))}}}let n=pe.document.querySelector('link[rel="icon"]');if(n){let i=Cw(t.document.head);Yh(n,i)}}applyCSS(t,n){Wt("code/auxiliaryWindow/willApplyCSS");let i=new Map,o=new Al;o.wait().then(()=>Wt("code/auxiliaryWindow/didLoadCSSStyles"));let s=n.add(new le),a=0;function l(){--a===0&&(s.dispose(),o.open())}function d(u){if(Iw(u))return;let p=t.document.head.appendChild(u.cloneNode(!0));u.tagName.toLowerCase()==="link"&&(a++,s.add(ie(p,"load",l)),s.add(ie(p,"error",l))),i.set(u,p)}a++;try{for(let u of pe.document.head.querySelectorAll('link[rel="stylesheet"], style'))d(u)}finally{l()}return n.add(yw(t)),n.add(Qh.observe(pe.document.head,n,{childList:!0,subtree:!0})(u=>{for(let p of u)if(!(p.type!=="childList"||p.target.nodeName.toLowerCase()==="title"||p.target.nodeName.toLowerCase()==="script"||p.target.nodeName.toLowerCase()==="meta")){for(let h of p.addedNodes)if(di(h)&&(h.tagName.toLowerCase()==="style"||h.tagName.toLowerCase()==="link"))d(h);else if(h.nodeType===Node.TEXT_NODE&&h.parentNode){let g=i.get(h.parentNode);g&&(g.textContent=h.textContent)}for(let h of p.removedNodes){let g=i.get(h);g&&(g.parentNode?.removeChild(g),i.delete(h))}}})),Wt("code/auxiliaryWindow/didApplyCSS"),{stylesLoaded:o}}applyHTML(t,n){Wt("code/auxiliaryWindow/willApplyHTML");let i=document.createElement("div");return i.setAttribute("role","application"),gw(i,0,0,0,0,"relative"),i.style.display="flex",i.style.height="100%",i.style.flexDirection="column",t.document.body.append(i),n.add(Jh(pe.document.documentElement,t.document.documentElement)),n.add(Jh(pe.document.body,t.document.body)),n.add(Jh(this.layoutService.mainContainer,i,["class"])),Wt("code/auxiliaryWindow/didApplyHTML"),i}getWindow(t){return this.windows.get(t)}};Ho=T([S(0,qs),S(1,ya),S(2,Xe),S(3,us),S(4,js),S(5,Dr)],Ho);At($F,Ho,1);var mE=new cr(220,70),gE=new cr(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);var kb=class r extends Sb{constructor(t,n,i,o,s){super(t,i,o,s);this.group=n}onDidChangeSizeConstraints=Q.None;_onDidChangeControl=this._register(new E);onDidChangeControl=this._onDidChangeControl.event;static EDITOR_MEMENTOS=new Map;get minimumWidth(){return mE.width}get maximumWidth(){return gE.width}get minimumHeight(){return mE.height}get maximumHeight(){return gE.height}_input;get input(){return this._input}_options;get options(){return this._options}get window(){return Gh(this.group.windowId,!0).window}get scopedContextKeyService(){}create(t){super.create(t),this.createEditor(t)}async setInput(t,n,i,o){this._input=t,this._options=n}clearInput(){this._input=void 0,this._options=void 0}setOptions(t){this._options=t}setVisible(t){super.setVisible(t),this.setEditorVisible(t)}setEditorVisible(t){}setBoundarySashes(t){}getEditorMemento(t,n,i,o=10){let s=`${this.getId()}${i}`,a=r.EDITOR_MEMENTOS.get(s);return a||(a=this._register(new fE(this.getId(),i,this.getMemento(1,1),o,t,n)),r.EDITOR_MEMENTOS.set(s,a)),a}getViewState(){}saveState(){for(let[,t]of r.EDITOR_MEMENTOS)t.id===this.getId()&&t.saveState();super.saveState()}dispose(){this._input=void 0,this._options=void 0,super.dispose()}},fE=class r extends O{constructor(t,n,i,o,s,a){super();this.id=t;this.key=n;this.memento=i;this.limit=o;this.editorGroupService=s;this.configurationService=a;this.updateConfiguration(void 0),this.registerListeners()}static SHARED_EDITOR_STATE=-1;cache;cleanedUp=!1;editorDisposables;shareEditorState=!1;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.updateConfiguration(t)))}updateConfiguration(t){(!t||t.affectsConfiguration(void 0,"workbench.editor.sharedViewState"))&&(this.shareEditorState=this.configurationService.getValue(void 0,"workbench.editor.sharedViewState")===!0)}saveEditorState(t,n,i){let o=this.doGetResource(n);if(!o||!t)return;let s=this.doLoad(),a=s.get(o.toString());a||(a=Object.create(null),s.set(o.toString(),a)),a[t.id]=i,this.shareEditorState&&(a[r.SHARED_EDITOR_STATE]=i),pn(n)&&this.clearEditorStateOnDispose(o,n)}loadEditorState(t,n){let i=this.doGetResource(n);if(!i||!t)return;let s=this.doLoad().get(i.toString());if(s){let a=s[t.id];if(a)return a;if(this.shareEditorState)return s[r.SHARED_EDITOR_STATE]}}clearEditorState(t,n){pn(t)&&this.editorDisposables?.delete(t);let i=this.doGetResource(t);if(i){let o=this.doLoad();if(n){let s=o.get(i.toString());s&&(delete s[n.id],ca(s)&&o.delete(i.toString()))}else o.delete(i.toString())}}clearEditorStateOnDispose(t,n){this.editorDisposables||(this.editorDisposables=new Map),this.editorDisposables.has(n)||this.editorDisposables.set(n,Q.once(n.onWillDispose)(()=>{this.clearEditorState(t),this.editorDisposables?.delete(n)}))}moveEditorState(t,n,i){let o=this.doLoad(),s=[...o.keys()];for(let a of s){let l=L.parse(a);if(!i.isEqualOrParent(l,t))continue;let d;if(bt(t,l))d=n;else{let p=UT(l.path,t.path);d=Me(n,l.path.substr(p+t.path.length+1))}let u=o.get(a,0);u&&(o.delete(a),o.set(d.toString(),u))}}doGetResource(t){return pn(t)?t.resource:t}doLoad(){if(!this.cache){this.cache=new Ui(this.limit);let t=this.memento[this.key];Array.isArray(t)&&this.cache.fromJSON(t)}return this.cache}saveState(){let t=this.doLoad();this.cleanedUp||(this.cleanUp(),this.cleanedUp=!0),this.memento[this.key]=t.toJSON()}cleanUp(){let t=this.doLoad(),n=[...t.entries()];for(let[i,o]of n)for(let s of Object.keys(o)){let a=Number(s);a===r.SHARED_EDITOR_STATE&&this.shareEditorState||this.editorGroupService.getGroup(a)||(delete o[a],ca(o)&&t.delete(i))}}};var Db=class extends O{constructor(e,t){super();let n=()=>{t()?.windowDidDragStart()},i=()=>{t()?.windowDidDragEnd()};this._register(ie(e,Ie.DRAG_START,()=>{n()})),this._register(ie(e,Ie.DRAG_END,i)),this._register(ie(e,Ie.MOUSE_MOVE,o=>{o.buttons===0&&i()})),this._register(ie(e,Ie.DRAG,o=>{o.shiftKey?i():n()})),this._register(ie(e,Ie.DRAG_OVER,o=>{o.shiftKey?i():n()}))}};var LR=new V("activeWebviewPanelId","",{type:"string",description:c("context.activeWebviewId","The viewType of the currently active webview panel.")}),tc=class extends kb{constructor(t,n,i,o,s,a,l,d,u){super(tc.ID,t,n,i,o);this._editorGroupsService=s;this._editorService=a;this._workbenchLayoutService=l;this._hostService=d;this._contextKeyService=u;let p=s.getPart(t);this._register(Q.any(p.onDidScroll,p.onDidAddGroup,p.onDidRemoveGroup,p.onDidMoveGroup)(()=>{this.webview&&this._visible&&this.synchronizeWebviewContainerDimensions(this.webview)}))}static ID="WebviewEditor";_element;_dimension;_visible=!1;_isDisposed=!1;_webviewVisibleDisposables=this._register(new le);_onFocusWindowHandler=this._register(new fn);_onDidFocusWebview=this._register(new E);get onDidFocus(){return this._onDidFocusWebview.event}_scopedContextKeyService=this._register(new fn);get webview(){return this.input instanceof Xt?this.input.webview:void 0}get scopedContextKeyService(){return this._scopedContextKeyService.value}createEditor(t){let n=document.createElement("div");this._element=n,this._element.id=`webview-editor-element-${dt()}`,t.appendChild(n),this._scopedContextKeyService.value=this._register(this._contextKeyService.createScoped(n))}dispose(){this._isDisposed=!0,this._element?.remove(),this._element=void 0,super.dispose()}layout(t){this._dimension=t,this.webview&&this._visible&&this.synchronizeWebviewContainerDimensions(this.webview,t)}focus(){super.focus(),!this._onFocusWindowHandler.value&&!Yt&&(this._onFocusWindowHandler.value=this._hostService.onDidChangeFocus(t=>{t&&this._editorService.activeEditorPane===this&&this._workbenchLayoutService.hasFocus("workbench.parts.editor")&&this.focus()})),this.webview?.focus()}setEditorVisible(t){this._visible=t,this.input instanceof Xt&&this.webview&&(t?this.claimWebview(this.input):this.webview.release(this)),super.setEditorVisible(t)}clearInput(){this.webview&&(this.webview.release(this),this._webviewVisibleDisposables.clear()),super.clearInput()}async setInput(t,n,i,o){if(this.input&&t.matches(this.input))return;let s=t instanceof Xt&&t.webview===this.webview;this.webview&&!s&&this.webview.release(this),await super.setInput(t,n,i,o),await t.resolve(),!(o.isCancellationRequested||this._isDisposed)&&t instanceof Xt&&(t.updateGroup(this.group.id),s||this.claimWebview(t),this._dimension&&this.layout(this._dimension))}claimWebview(t){t.claim(this,this.window,this.scopedContextKeyService),this._element&&(this._element.setAttribute("aria-flowto",t.webview.container.id),bw(t.webview.container,this._element)),this._webviewVisibleDisposables.clear(),this._webviewVisibleDisposables.add(this._editorGroupsService.createEditorDropTarget(t.webview.container,{containsGroup:n=>this.group.id===n.id})),this._webviewVisibleDisposables.add(new Db(this.window,()=>this.webview)),this.synchronizeWebviewContainerDimensions(t.webview),this._webviewVisibleDisposables.add(this.trackFocus(t.webview))}synchronizeWebviewContainerDimensions(t,n){if(!this._element?.isConnected)return;let i=this._workbenchLayoutService.getContainer(this.window,"workbench.parts.editor");t.layoutWebviewOverElement(this._element.parentElement,n,i)}trackFocus(t){let n=new le,i=Xc(t.container);return n.add(i),n.add(i.onDidFocus(()=>this._onDidFocusWebview.fire())),n.add(t.onDidFocus(()=>this._onDidFocusWebview.fire())),n}};tc=T([S(1,us),S(2,UD),S(3,Vt),S(4,Ji),S(5,Ht),S(6,qs),S(7,js),S(8,ui)],tc);var Pr=k("webviewEditorService");function Rb(r,e){return r.canResolve(e)}var Ko=class extends Xt{constructor(t,n,i){super(t,n,i.iconManager);this._webviewWorkbenchService=i}_resolved=!1;_resolvePromise;dispose(){super.dispose(),this._resolvePromise?.cancel(),this._resolvePromise=void 0}async resolve(){if(!this._resolved){this._resolved=!0,this._resolvePromise=ar(t=>this._webviewWorkbenchService.resolveWebview(this,t));try{await this._resolvePromise}catch(t){if(!Xo(t))throw t}}return super.resolve()}transfer(t){if(super.transfer(t))return t._resolved=this._resolved,t}};T([K],Ko.prototype,"resolve",1),Ko=T([S(2,Pr)],Ko);var bE=class{_awaitingRevival=[];enqueueForRestoration(e,t){let n=new yn,i=()=>{let s=this._awaitingRevival.findIndex(a=>e===a.input);s>=0&&this._awaitingRevival.splice(s,1)},o=ir(e.webview.onDidDispose(i),t.onCancellationRequested(()=>{i(),n.cancel()}));return this._awaitingRevival.push({input:e,promise:n,disposable:o}),n.p}reviveFor(e,t){let n=this._awaitingRevival.filter(({input:i})=>Rb(e,i));this._awaitingRevival=this._awaitingRevival.filter(({input:i})=>!Rb(e,i));for(let{input:i,promise:o,disposable:s}of n)e.resolveWebview(i,t).then(a=>o.complete(a),a=>o.error(a)).finally(()=>{s.dispose()})}},_b=class extends O{constructor(t,n,i,o){super();this._editorService=n;this._instantiationService=i;this._webviewService=o;this._iconManager=this._register(this._instantiationService.createInstance(Qd)),this._register(t.registerContextKeyProvider({contextKey:LR,getGroupContextKeyValue:s=>this.getWebviewId(s.activeEditor)})),this._register(n.onDidActiveEditorChange(()=>{this.updateActiveWebview()})),this._register(o.onDidChangeActiveWebview(()=>{this.updateActiveWebview()})),this.updateActiveWebview()}_revivers=new Set;_revivalPool=new bE;_iconManager;get iconManager(){return this._iconManager}_activeWebview;_onDidChangeActiveWebviewEditor=this._register(new E);onDidChangeActiveWebviewEditor=this._onDidChangeActiveWebviewEditor.event;getWebviewId(t){let n;return t instanceof Xt?n=t:t instanceof Mi&&(t.primary instanceof Xt?n=t.primary:t.secondary instanceof Xt&&(n=t.secondary)),n?.webview.providedViewType??""}updateActiveWebview(){let t=this._editorService.activeEditor,n;t instanceof Xt?n=t:t instanceof Mi&&(t.primary instanceof Xt&&t.primary.webview===this._webviewService.activeWebview?n=t.primary:t.secondary instanceof Xt&&t.secondary.webview===this._webviewService.activeWebview&&(n=t.secondary)),n!==this._activeWebview&&(this._activeWebview=n,this._onDidChangeActiveWebviewEditor.fire(n))}openWebview(t,n,i,o){let s=this._webviewService.createWebviewOverlay(t),a=this._instantiationService.createInstance(Xt,{viewType:n,name:i,providedId:t.providedViewType},s,this.iconManager);return this._editorService.openEditor(a,{pinned:!0,preserveFocus:o.preserveFocus,activation:o.preserveFocus?2:void 0},o.group),a}revealWebview(t,n,i){let o=this.findTopLevelEditorForWebview(t);this._editorService.openEditor(o,{preserveFocus:i,activation:i?2:void 0},n)}findTopLevelEditorForWebview(t){for(let n of this._editorService.editors)if(n===t||n instanceof Mi&&(t===n.primary||t===n.secondary))return n;return t}openRevivedWebview(t){let n=this._webviewService.createWebviewOverlay(t.webviewInitInfo);n.state=t.state;let i=this._instantiationService.createInstance(Ko,{viewType:t.viewType,providedId:t.webviewInitInfo.providedViewType,name:t.title},n);return i.iconPath=t.iconPath,typeof t.group=="number"&&i.updateGroup(t.group),i}registerResolver(t){this._revivers.add(t);let n=new Nn;return this._revivalPool.reviveFor(t,n.token),j(()=>{this._revivers.delete(t),n.dispose(!0)})}shouldPersist(t){return t instanceof Ko?!0:yt.some(this._revivers.values(),n=>Rb(n,t))}async tryRevive(t,n){for(let i of this._revivers.values())if(Rb(i,t))return await i.resolveWebview(t,n),!0;return!1}async resolveWebview(t,n){if(!await this.tryRevive(t,n)&&!n.isCancellationRequested)return this._revivalPool.enqueueForRestoration(t,n)}setIcons(t,n){this._iconManager.setIcons(t,n)}};_b=T([S(0,Ji),S(1,Ht),S(2,Ct),S(3,nl)],_b);var vE=class{_handlesToInputs=new Map;_inputsToHandles=new Map;add(e,t){this._handlesToInputs.set(e,t),this._inputsToHandles.set(t,e)}getHandleForInput(e){return this._inputsToHandles.get(e)}getInputForHandle(e){return this._handlesToInputs.get(e)}delete(e){let t=this.getInputForHandle(e);this._handlesToInputs.delete(e),t&&this._inputsToHandles.delete(t)}get size(){return this._handlesToInputs.size}[Symbol.iterator](){return this._handlesToInputs.values()}},IE=class{constructor(e){this.prefix=e}fromExternal(e){return this.prefix+e}toExternal(e){return e.startsWith(this.prefix)?e.substr(this.prefix.length):void 0}},Pb=class extends O{constructor(t,n,i,o,s,a,l,d,u){super();this._mainThreadWebviews=n;this._configurationService=i;this._editorGroupService=o;this._editorService=s;this._telemetryService=d;this._webviewWorkbenchService=u;this.webviewOriginStore=new $s("mainThreadWebviewPanel.origins",l),this._proxy=t.getProxy(Gd.ExtHostWebviewPanels),this._register(Q.any(s.onDidActiveEditorChange,s.onDidVisibleEditorsChange,o.onDidAddGroup,o.onDidRemoveGroup,o.onDidMoveGroup)(()=>{this.updateWebviewViewStates(this._editorService.activeEditor)})),this._register(u.onDidChangeActiveWebviewEditor(p=>{this.updateWebviewViewStates(p)})),this._register(u.registerResolver({canResolve:p=>{let h=this.webviewPanelViewType.toExternal(p.viewType);return typeof h=="string"&&a.activateByEvent(`onWebviewPanel:${h}`),!1},resolveWebview:()=>{throw new Error("not implemented")}}))}webviewPanelViewType=new IE("mainThreadWebview-");_proxy;_webviewInputs=new vE;_revivers=this._register(new $n);webviewOriginStore;get webviewInputs(){return this._webviewInputs}addWebviewInput(t,n,i){this._webviewInputs.add(t,n),this._mainThreadWebviews.addWebview(t,n.webview,i),n.webview.onDidDispose(()=>{this._proxy.$onDidDisposeWebviewPanel(t).finally(()=>{this._webviewInputs.delete(t)})})}$createWebviewPanel(t,n,i,o,s){let a=this.getTargetGroupFromShowOptions(s),l=s?{preserveFocus:!!s.preserveFocus,group:a}:{},d=Dp(t),u=this.webviewOriginStore.getOrigin(i,d.id),p=this._webviewWorkbenchService.openWebview({origin:u,providedViewType:i,title:o.title,options:qF(o.panelOptions),contentOptions:zC(o.webviewOptions),extension:d},this.webviewPanelViewType.fromExternal(i),o.title,l);this.addWebviewInput(n,p,{serializeBuffersForPostMessage:o.serializeBuffersForPostMessage});let h={extensionId:d.id.value,viewType:i};this._telemetryService.publicLog2("webviews:createWebviewPanel",h)}$disposeWebview(t){let n=this.tryGetWebviewInput(t);n&&n.dispose()}$setTitle(t,n){this.tryGetWebviewInput(t)?.setName(n)}$setIconPath(t,n){let i=this.tryGetWebviewInput(t);i&&(i.iconPath=GF(n))}$reveal(t,n){let i=this.tryGetWebviewInput(t);if(!i||i.isDisposed())return;let o=this.getTargetGroupFromShowOptions(n);this._webviewWorkbenchService.revealWebview(i,o,!!n.preserveFocus)}getTargetGroupFromShowOptions(t){if(typeof t.viewColumn>"u"||t.viewColumn===Ld||this._editorGroupService.count===1&&this._editorGroupService.activeGroup.isEmpty)return Ld;if(t.viewColumn===tp)return tp;if(t.viewColumn>=0){let n=this._editorGroupService.getGroups(2)[t.viewColumn];if(n)return n.id;let i=this._editorGroupService.findGroup({location:1});if(i){let o=SS(this._configurationService);return this._editorGroupService.addGroup(i,o)}}return Ld}$registerSerializer(t,n){if(this._revivers.has(t))throw new Error(`Reviver for ${t} already registered`);this._revivers.set(t,this._webviewWorkbenchService.registerResolver({canResolve:i=>i.viewType===this.webviewPanelViewType.fromExternal(t),resolveWebview:async i=>{let o=this.webviewPanelViewType.toExternal(i.viewType);if(!o){i.webview.setHtml(this._mainThreadWebviews.getWebviewResolvedFailedContent(i.viewType));return}let s=dt();this.addWebviewInput(s,i,n);let a;if(i.webview.state)try{a=JSON.parse(i.webview.state)}catch(l){console.error("Could not load webview state",l,i.webview.state)}try{await this._proxy.$deserializeWebviewPanel(s,o,{title:i.getTitle(),state:a,panelOptions:i.webview.options,webviewOptions:i.webview.contentOptions,active:i===this._editorService.activeEditor},Ep(this._editorGroupService,i.group||0))}catch(l){Ae(l),i.webview.setHtml(this._mainThreadWebviews.getWebviewResolvedFailedContent(o))}}}))}$unregisterSerializer(t){if(!this._revivers.has(t))throw new Error(`No reviver for ${t} registered`);this._revivers.deleteAndDispose(t)}updateWebviewViewStates(t){if(!this._webviewInputs.size)return;let n={},i=(o,s,a)=>{if(!(a instanceof Xt))return;a.updateGroup(o.id);let l=this._webviewInputs.getHandleForInput(a);l&&(n[l]={visible:s===o.activeEditor,active:a===t,position:Ep(this._editorGroupService,o.id)})};for(let o of this._editorGroupService.groups)for(let s of o.editors)s instanceof Mi?(i(o,s,s.primary),i(o,s,s.secondary)):i(o,s,s);Object.keys(n).length&&this._proxy.$onDidChangeWebviewPanelViewStates(n)}tryGetWebviewInput(t){return this._webviewInputs.getInputForHandle(t)}};Pb=T([S(2,Xe),S(3,Ji),S(4,Ht),S(5,_n),S(6,Vt),S(7,us),S(8,Pr)],Pb);function GF(r){if(r)return{light:L.revive(r.light),dark:L.revive(r.dark)}}function qF(r){return{enableFindWidget:r.enableFindWidget,retainContextWhenHidden:r.retainContextWhenHidden}}var ho=class extends O{constructor(t,n){super();this.configurationService=t;this.workspaceContextService=n;this.storeEnablementState(),this.storeCustomPatterns(),this.registerListeners()}_serviceBrand;static SETTING_ID_PATTERNS="workbench.editor.customLabels.patterns";static SETTING_ID_ENABLED="workbench.editor.customLabels.enabled";_onDidChange=this._register(new E);onDidChange=this._onDidChange.event;patterns=[];enabled=!0;cache=new sh(1e3);registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration(ho.SETTING_ID_ENABLED)){let n=this.enabled;this.storeEnablementState(),n!==this.enabled&&this.patterns.length>0&&this._onDidChange.fire()}else t.affectsConfiguration(ho.SETTING_ID_PATTERNS)&&(this.cache.clear(),this.storeCustomPatterns(),this._onDidChange.fire())}))}storeEnablementState(){this.enabled=this.configurationService.getValue(ho.SETTING_ID_ENABLED)}_templateRegexValidation=/[a-zA-Z0-9]/;storeCustomPatterns(){this.patterns=[];let t=this.configurationService.getValue(ho.SETTING_ID_PATTERNS);for(let n in t){let i=t[n];if(!this._templateRegexValidation.test(i))continue;let o=wi(n),s=hs(n);this.patterns.push({pattern:n,template:i,isAbsolutePath:o,parsedPattern:s})}this.patterns.sort((n,i)=>this.patternWeight(i.pattern)-this.patternWeight(n.pattern))}patternWeight(t){let n=0;for(let i of t.split("/"))i==="**"?n+=1:i==="*"?n+=10:i.includes("*")||i.includes("?")?n+=50:i!==""&&(n+=100);return n}getName(t){if(!this.enabled||this.patterns.length===0)return;let n=t.toString(),i=this.cache.get(n);if(i!==void 0)return i??void 0;let o=this.applyPatterns(t);return this.cache.set(n,o??null),o}applyPatterns(t){let n=this.workspaceContextService.getWorkspaceFolder(t),i;for(let o of this.patterns){let s;if(n&&!o.isAbsolutePath?(i||(i=ma(sr(n.uri),t)??t.path),s=i):s=t.path,o.parsedPattern(s))return this.applyTemplate(o.template,t,s)}}_parsedTemplateExpression=/\$\{(dirname|filename|extname|extname\((?<extnameN>[-+]?\d+)\)|dirname\((?<dirnameN>[-+]?\d+)\))\}/g;_filenameCaptureExpression=/(?<filename>^\.*[^.]*)/;applyTemplate(t,n,i){let o;return t.replace(this._parsedTemplateExpression,(s,a,...l)=>{o=o??BE(n.path);let{dirnameN:d="0",extnameN:u="0"}=l.pop();if(a==="filename"){let{filename:p}=this._filenameCaptureExpression.exec(o.base)?.groups??{};if(p)return p}else if(a==="extname"){let p=this.getExtnames(o.base);if(p)return p}else if(a.startsWith("extname")){let p=parseInt(u),h=this.getNthExtname(o.base,p);if(h)return h}else if(a.startsWith("dirname")){let p=parseInt(d),h=this.getNthDirname(fl(i),p);if(h)return h}return s})}removeLeadingDot(t){let n=t;for(;n.startsWith(".");)n=n.slice(1);return n}getNthDirname(t,n){t=t.startsWith("/")?t.slice(1):t;let i=t.split("/");return this.getNthFragment(i,n)}getExtnames(t){return this.removeLeadingDot(t).split(".").slice(1).join(".")}getNthExtname(t,n){let i=this.removeLeadingDot(t).split(".");return i.shift(),this.getNthFragment(i,n)}getNthFragment(t,n){let i=t.length,o;n<0?o=Math.abs(n)-1:o=i-n-1;let s=t[o];if(!(s===void 0||s===""))return s}};ho=T([S(0,Xe),S(1,Qn)],ho);var ol=k("ICustomEditorLabelService");At(ol,ho,1);var nc=k("customEditorService"),G0t=new V("activeCustomEditorId","",{type:"string",description:c("context.customEditor","The viewType of the currently active custom editor.")}),q0t=new V("focusedCustomEditorIsEditable",!1);var mn=class extends Ko{constructor(t,n,i,o,s,a,l,d,u,p,h,g,b,f){super({providedId:t.viewType,viewType:t.viewType,name:""},n,o);this.instantiationService=s;this.labelService=a;this.customEditorService=l;this.fileDialogService=d;this.undoRedoService=u;this.fileService=p;this.filesConfigurationService=h;this.editorGroupsService=g;this.layoutService=b;this.customEditorLabelService=f;this._editorResource=t.resource,this.oldResource=i.oldResource,this._defaultDirtyState=i.startsDirty,this._backupId=i.backupId,this._untitledDocumentData=i.untitledDocumentData,this.registerListeners()}static create(t,n,i,o,s){return t.invokeFunction(a=>{let l=a.get(wS).getValue(n),d=l?Ne.fromString(l):void 0,u=a.get(nl).createWebviewOverlay({providedViewType:i,title:void 0,options:{customClasses:s?.customClasses},contentOptions:{},extension:void 0}),p=t.createInstance(mn,{resource:n,viewType:i},u,{untitledDocumentData:d,oldResource:s?.oldResource});return typeof o<"u"&&p.updateGroup(o),p})}static typeId="workbench.editors.webviewEditor";_editorResource;oldResource;_defaultDirtyState;_backupId;_untitledDocumentData;get resource(){return this._editorResource}_modelRef;registerListeners(){this._register(this.labelService.onDidChangeFormatters(t=>this.onLabelEvent(t.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations(t=>this.onLabelEvent(t.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderCapabilities(t=>this.onLabelEvent(t.scheme))),this._register(this.customEditorLabelService.onDidChange(()=>this.updateLabel()))}onLabelEvent(t){t===this.resource.scheme&&this.updateLabel()}updateLabel(){this._editorName=void 0,this._shortDescription=void 0,this._mediumDescription=void 0,this._longDescription=void 0,this._shortTitle=void 0,this._mediumTitle=void 0,this._longTitle=void 0,this._onDidChangeLabel.fire()}get typeId(){return mn.typeId}get editorId(){return this.viewType}get capabilities(){let t=0;return t|=128,this.customEditorService.getCustomEditorCapabilities(this.viewType)?.supportsMultipleEditorsPerDocument||(t|=8),this._modelRef?this._modelRef.object.isReadonly()&&(t|=2):this.filesConfigurationService.isReadonly(this.resource)&&(t|=2),this.resource.scheme===q.untitled&&(t|=4),t}_editorName=void 0;getName(){return typeof this._editorName!="string"&&(this._editorName=this.customEditorLabelService.getName(this.resource)??tr(this.labelService.getUriLabel(this.resource))),this._editorName}getDescription(t=1){switch(t){case 0:return this.shortDescription;case 2:return this.longDescription;case 1:default:return this.mediumDescription}}_shortDescription=void 0;get shortDescription(){return typeof this._shortDescription!="string"&&(this._shortDescription=this.labelService.getUriBasenameLabel(sr(this.resource))),this._shortDescription}_mediumDescription=void 0;get mediumDescription(){return typeof this._mediumDescription!="string"&&(this._mediumDescription=this.labelService.getUriLabel(sr(this.resource),{relative:!0})),this._mediumDescription}_longDescription=void 0;get longDescription(){return typeof this._longDescription!="string"&&(this._longDescription=this.labelService.getUriLabel(sr(this.resource))),this._longDescription}_shortTitle=void 0;get shortTitle(){return typeof this._shortTitle!="string"&&(this._shortTitle=this.getName()),this._shortTitle}_mediumTitle=void 0;get mediumTitle(){return typeof this._mediumTitle!="string"&&(this._mediumTitle=this.labelService.getUriLabel(this.resource,{relative:!0})),this._mediumTitle}_longTitle=void 0;get longTitle(){return typeof this._longTitle!="string"&&(this._longTitle=this.labelService.getUriLabel(this.resource)),this._longTitle}getTitle(t){switch(t){case 0:return this.shortTitle;case 2:return this.longTitle;default:case 1:return this.mediumTitle}}matches(t){return super.matches(t)?!0:this===t||t instanceof mn&&this.viewType===t.viewType&&bt(this.resource,t.resource)}copy(){return mn.create(this.instantiationService,this.resource,this.viewType,this.group,this.webview.options)}isReadonly(){return this._modelRef?this._modelRef.object.isReadonly():this.filesConfigurationService.isReadonly(this.resource)}isDirty(){return this._modelRef?this._modelRef.object.isDirty():!!this._defaultDirtyState}async save(t,n){if(!this._modelRef)return;let i=await this._modelRef.object.saveCustomEditor(n);if(i)return bt(i,this.resource)?this:{resource:i}}async saveAs(t,n){if(!this._modelRef)return;let i=this._editorResource,o=await this.fileDialogService.pickFileToSave(i,n?.availableFileSystems);if(o&&await this._modelRef.object.saveCustomEditorAs(this._editorResource,o,n))return(await this.rename(t,o))?.editor}async revert(t,n){if(this._modelRef)return this._modelRef.object.revert(n);this._defaultDirtyState=!1,this._onDidChangeDirty.fire()}async resolve(){if(await super.resolve(),this.isDisposed())return null;if(!this._modelRef){let t=this.capabilities;this._modelRef=this._register(In(await this.customEditorService.models.tryRetain(this.resource,this.viewType))),this._register(this._modelRef.object.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this._modelRef.object.onDidChangeReadonly(()=>this._onDidChangeCapabilities.fire())),this._untitledDocumentData&&(this._defaultDirtyState=!0),this.isDirty()&&this._onDidChangeDirty.fire(),this.capabilities!==t&&this._onDidChangeCapabilities.fire()}return null}async rename(t,n){return{editor:{resource:n}}}undo(){return In(this._modelRef),this.undoRedoService.undo(this.resource)}redo(){return In(this._modelRef),this.undoRedoService.redo(this.resource)}_moveHandler;onMove(t){this._moveHandler=t}transfer(t){if(super.transfer(t))return t._moveHandler=this._moveHandler,this._moveHandler=void 0,t}get backupId(){return this._modelRef?this._modelRef.object.backupId:this._backupId}get untitledDocumentData(){return this._untitledDocumentData}toUntyped(){return{resource:this.resource,options:{override:this.viewType}}}claim(t,n,i){if(this.doCanMove(n.vscodeWindowId)!==!0)throw t_(c("editorUnsupportedInWindow","Unable to open the editor in this window, it contains modifications that can only be saved in the original window."),[hr({id:"openInOriginalWindow",label:c("reopenInOriginalWindow","Open in Original Window"),run:async()=>{let o=this.editorGroupsService.getPart(this.layoutService.getContainer(Be(this.webview.container).window));this.editorGroupsService.getPart(this.layoutService.getContainer(n.window)).activeGroup.moveEditor(this,o.activeGroup)}})],{forceMessage:!0});return super.claim(t,n,i)}canMove(t,n){let i=this.editorGroupsService.getGroup(n);if(i){let o=this.doCanMove(i.windowId);if(typeof o=="string")return o}return super.canMove(t,n)}doCanMove(t){return this.isModified()&&this._modelRef?.object.canHotExit===!1&&Be(this.webview.container).vscodeWindowId!==t?c("editorCannotMove","Unable to move '{0}': The editor contains changes that can only be saved in its current window.",this.getName()):!0}};mn=T([S(3,Pr),S(4,Ct),S(5,$i),S(6,nc),S(7,Wl),S(8,fs),S(9,Ut),S(10,Vo),S(11,Ji),S(12,qs),S(13,ol)],mn);var OR=k("notebookService"),Lb=class{constructor(e,t,n){this.viewType=e;this.serializer=t;this.extensionData=n}};var AR=k("INotebookModelResolverService");var ic=class extends vi{constructor(t,n,i,o,s,a,l){super();this.resource=t;this.labelService=i;this.fileService=o;this.filesConfigurationService=s;this.textResourceConfigurationService=a;this.customEditorLabelService=l;this._preferredResource=n||t,this.registerListeners()}get capabilities(){let t=32;return this.fileService.hasProvider(this.resource)?this.filesConfigurationService.isReadonly(this.resource)&&(t|=2):t|=4,t&2||(t|=128),t}_preferredResource;get preferredResource(){return this._preferredResource}registerListeners(){this._register(this.labelService.onDidChangeFormatters(t=>this.onLabelEvent(t.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations(t=>this.onLabelEvent(t.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderCapabilities(t=>this.onLabelEvent(t.scheme))),this._register(this.customEditorLabelService.onDidChange(()=>this.updateLabel()))}onLabelEvent(t){t===this._preferredResource.scheme&&this.updateLabel()}updateLabel(){this._name=void 0,this._shortDescription=void 0,this._mediumDescription=void 0,this._longDescription=void 0,this._shortTitle=void 0,this._mediumTitle=void 0,this._longTitle=void 0,this._onDidChangeLabel.fire()}setPreferredResource(t){bt(t,this._preferredResource)||(this._preferredResource=t,this.updateLabel())}_name=void 0;getName(){return typeof this._name!="string"&&(this._name=this.customEditorLabelService.getName(this._preferredResource)??this.labelService.getUriBasenameLabel(this._preferredResource)),this._name}getDescription(t=1){switch(t){case 0:return this.shortDescription;case 2:return this.longDescription;case 1:default:return this.mediumDescription}}_shortDescription=void 0;get shortDescription(){return typeof this._shortDescription!="string"&&(this._shortDescription=this.labelService.getUriBasenameLabel(sr(this._preferredResource))),this._shortDescription}_mediumDescription=void 0;get mediumDescription(){return typeof this._mediumDescription!="string"&&(this._mediumDescription=this.labelService.getUriLabel(sr(this._preferredResource),{relative:!0})),this._mediumDescription}_longDescription=void 0;get longDescription(){return typeof this._longDescription!="string"&&(this._longDescription=this.labelService.getUriLabel(sr(this._preferredResource))),this._longDescription}_shortTitle=void 0;get shortTitle(){return typeof this._shortTitle!="string"&&(this._shortTitle=this.getName()),this._shortTitle}_mediumTitle=void 0;get mediumTitle(){return typeof this._mediumTitle!="string"&&(this._mediumTitle=this.labelService.getUriLabel(this._preferredResource,{relative:!0})),this._mediumTitle}_longTitle=void 0;get longTitle(){return typeof this._longTitle!="string"&&(this._longTitle=this.labelService.getUriLabel(this._preferredResource)),this._longTitle}getTitle(t){switch(t){case 0:return this.shortTitle;case 2:return this.longTitle;default:case 1:return this.mediumTitle}}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource)}ensureLimits(t){if(t?.limits)return t.limits;let n=yk(this.resource),i,o=this.textResourceConfigurationService.inspect(this.resource,null,"workbench.editorLargeFileConfirmation");return Fk(o)&&(i=o.value*ms.MB),{size:i??n}}};ic=T([S(2,$i),S(3,Ut),S(4,Vo),S(5,Rs),S(6,ol)],ic);var mo=class extends ic{constructor(t,n,i,o,s,a,l,d,u,p,h,g,b,f){super(t,n,d,u,p,b,f);this.viewType=i;this.options=o;this._notebookService=s;this._notebookModelResolverService=a;this._fileDialogService=l;this._defaultDirtyState=!!o.startDirty,this._sideLoadedListener=s.onDidAddNotebookDocument(v=>{v.viewType===this.viewType&&v.uri.toString()===this.resource.toString()&&this.resolve().catch(Ae)}),this._register(h.onWillStop(v=>{if(!v.auto&&!this.isDirty())return;let D=v.auto?c("vetoAutoExtHostRestart","One of the opened editors is a notebook editor."):c("vetoExtHostRestart","Notebook '{0}' could not be saved.",this.resource.path);v.veto((async()=>{let R=g.findEditors(this);return v.auto?!0:!(R.length>0&&(await g.save(R[0])).success)})(),D)}))}static getOrCreate(t,n,i,o,s={}){let a=t.createInstance(mo,n,i,o,s);return i&&a.setPreferredResource(i),a}static ID="workbench.input.notebook";editorModelReference=null;_sideLoadedListener;_defaultDirtyState=!1;dispose(){this._sideLoadedListener.dispose(),this.editorModelReference?.dispose(),this.editorModelReference=null,super.dispose()}get typeId(){return mo.ID}get editorId(){return this.viewType}get capabilities(){let t=0;return this.resource.scheme===q.untitled&&(t|=4),this.editorModelReference?this.editorModelReference.object.isReadonly()&&(t|=2):this.filesConfigurationService.isReadonly(this.resource)&&(t|=2),t&2||(t|=128),t}getDescription(t=1){if(!this.hasCapability(4)||this.editorModelReference?.object.hasAssociatedFilePath())return super.getDescription(t)}isReadonly(){return this.editorModelReference?this.editorModelReference.object.isReadonly():this.filesConfigurationService.isReadonly(this.resource)}isDirty(){return this.editorModelReference?this.editorModelReference.object.isDirty():this._defaultDirtyState}isSaving(){let t=this.editorModelReference?.object;return!t||!t.isDirty()||t.hasErrorState||this.hasCapability(4)?!1:this.filesConfigurationService.hasShortAutoSaveDelay(this)}async save(t,n){if(this.editorModelReference)return this.hasCapability(4)?this.saveAs(t,n):(await this.editorModelReference.object.save(n),this)}async saveAs(t,n){if(!this.editorModelReference)return;let i=this._notebookService.getContributedNotebookType(this.viewType);if(!i)return;let o=this.hasCapability(4)?await this._suggestName(i,this.labelService.getUriBasenameLabel(this.resource)):this.editorModelReference.object.resource,s;if(this.editorModelReference.object.hasAssociatedFilePath())s=o;else if(s=await this._fileDialogService.pickFileToSave(o,n?.availableFileSystems),!s)return;if(!i.matches(s)){let a=i.selectors.map(l=>typeof l=="string"?l:iu(l)?`${l} (base ${l.base})`:l.exclude?`${l.include} (exclude: ${l.exclude})`:`${l.include}`).join(", ");throw new Error(`File name ${s} is not supported by ${i.providerDisplayName}.

Please make sure the file name matches following patterns:
${a}`)}return await this.editorModelReference.object.saveAs(s)}async _suggestName(t,n){let i=t.selectors[0],o=i&&typeof i=="string"?i:void 0;if(!o&&i){let s=i.include;typeof s=="string"&&(o=s)}if(o){let s=/^\*\.([A-Za-z_-]*)$/.exec(o);if(s&&s.length>1){let a=s[1];if(!n.endsWith(a))return Me(await this._fileDialogService.defaultFilePath(),n+"."+a)}}return Me(await this._fileDialogService.defaultFilePath(),n)}async rename(t,n){if(this.editorModelReference)return{editor:{resource:n},options:{override:this.viewType}}}async revert(t,n){this.editorModelReference&&this.editorModelReference.object.isDirty()&&await this.editorModelReference.object.revert(n)}async resolve(t,n){if(!await this._notebookService.canResolve(this.viewType))return null;if(n?.mark("extensionActivated"),this._sideLoadedListener.dispose(),this.editorModelReference)this.editorModelReference.object.load({limits:this.ensureLimits(t)});else{let i=!!(this.capabilities&512),o=await this._notebookModelResolverService.resolve(this.resource,this.viewType,{limits:this.ensureLimits(t),scratchpad:i});if(this.editorModelReference)return o.dispose(),this.editorModelReference.object;if(this.editorModelReference=o,this.isDisposed())return this.editorModelReference.dispose(),this.editorModelReference=null,null;this._register(this.editorModelReference.object.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.editorModelReference.object.onDidChangeReadonly(()=>this._onDidChangeCapabilities.fire())),this._register(this.editorModelReference.object.onDidRevertUntitled(()=>this.dispose())),this.editorModelReference.object.isDirty()&&this._onDidChangeDirty.fire()}if(this.options._backupId){let i=await this._notebookService.withNotebookDataProvider(this.editorModelReference.object.notebook.viewType);if(!(i instanceof Lb))throw new Error("CANNOT open file notebook with this provider");let o=await i.serializer.dataToNotebook(Ne.fromString(JSON.stringify({__webview_backup:this.options._backupId})));this.editorModelReference.object.notebook.applyEdits([{editType:1,index:0,count:this.editorModelReference.object.notebook.length,cells:o.cells}],!0,void 0,()=>{},void 0,!1),this.options._workingCopy&&(this.options._backupId=void 0,this.options._workingCopy=void 0,this.options.startDirty=void 0)}return this.editorModelReference.object}toUntyped(){return{resource:this.resource,options:{override:this.viewType}}}matches(t){return super.matches(t)?!0:t instanceof mo?this.editorId===t.editorId&&bt(this.resource,t.resource):!1}};mo=T([S(4,OR),S(5,AR),S(6,Wl),S(7,$i),S(8,Ut),S(9,Vo),S(10,_n),S(11,Ht),S(12,Rs),S(13,ol)],mo);var rc=class{constructor(e){this._webviewWorkbenchService=e}static ID=Xt.typeId;canSerialize(e){return this._webviewWorkbenchService.shouldPersist(e)}serialize(e){if(!this.canSerialize(e))return;let t=this.toJson(e);try{return JSON.stringify(t)}catch{return}}deserialize(e,t){let n=this.fromJson(JSON.parse(t));return this._webviewWorkbenchService.openRevivedWebview({webviewInitInfo:{providedViewType:n.providedId,origin:n.origin,title:n.title,options:n.webviewOptions,contentOptions:n.contentOptions,extension:n.extension},viewType:n.viewType,title:n.title,iconPath:n.iconPath,state:n.state,group:n.group})}fromJson(e){return{...e,extension:yE(e.extensionId,e.extensionLocation),iconPath:jF(e.iconPath),state:XF(e.state),webviewOptions:e.options,contentOptions:xE(e.options)}}toJson(e){return{origin:e.webview.origin,viewType:e.viewType,providedId:e.providedId,title:e.getName(),options:{...e.webview.options,...e.webview.contentOptions},extensionLocation:e.extension?.location,extensionId:e.extension?.id.value,state:e.webview.state,iconPath:e.iconPath?{light:e.iconPath.light,dark:e.iconPath.dark}:void 0,group:e.group}}};rc=T([S(0,Pr)],rc);function yE(r,e){if(!r)return;let t=Ob(e);if(t)return{id:new Rt(r),location:t}}function jF(r){if(!r)return;let e=Ob(r.light),t=Ob(r.dark);return e&&t?{light:e,dark:t}:void 0}function Ob(r){if(r)try{return typeof r=="string"?L.parse(r):L.from(r)}catch{return}}function XF(r){return typeof r=="string"?r:void 0}function xE(r){return{...r,localResourceRoots:r.localResourceRoots?.map(e=>Ob(e))}}var Ab=class extends rc{constructor(t,n,i){super(t);this._instantiationService=n;this._webviewService=i}static ID=mn.typeId;serialize(t){let n=t.isDirty(),i={...this.toJson(t),editorResource:t.resource.toJSON(),dirty:n,backupId:n?t.backupId:void 0};try{return JSON.stringify(i)}catch{return}}fromJson(t){return{...super.fromJson(t),editorResource:L.from(t.editorResource),dirty:t.dirty}}deserialize(t,n){let i=this.fromJson(JSON.parse(n)),o=MR(this._webviewService,i),s=this._instantiationService.createInstance(mn,{resource:i.editorResource,viewType:i.viewType},o,{startsDirty:i.dirty,backupId:i.backupId});return typeof i.group=="number"&&s.updateGroup(i.group),s}};Ab=T([S(0,Pr),S(1,Ct),S(2,nl)],Ab);function MR(r,e){let t=r.createWebviewOverlay({providedViewType:e.viewType,origin:e.origin,title:void 0,options:{purpose:"customEditor",enableFindWidget:e.webviewOptions.enableFindWidget,retainContextWhenHidden:e.webviewOptions.retainContextWhenHidden},contentOptions:e.contentOptions,extension:e.extension});return t.state=e.state,t}var Mb=class extends O{constructor(t,n,i,o,s){super();this._instantiationService=t;this._workingCopyBackupService=i;this._webviewService=o;this._register(n.registerHandler(this))}static ID="workbench.contrib.complexCustomWorkingCopyEditorHandler";handles(t){return t.resource.scheme===q.vscodeCustomEditor}isOpen(t,n){if(!this.handles(t))return!1;if(t.resource.authority==="jupyter-notebook-ipynb"&&n instanceof mo)try{let i=JSON.parse(t.resource.query),o=L.from(i);return bt(o,n.resource)}catch{return!1}if(!(n instanceof mn)||t.resource.authority!==n.viewType.replace(/[^a-z0-9\-_]/gi,"-").toLowerCase())return!1;try{let i=JSON.parse(t.resource.query),o=L.from(i);return bt(o,n.resource)}catch{return!1}}async createEditor(t){let n=await this._workingCopyBackupService.resolve(t);if(!n?.meta)throw new Error(`No backup found for custom editor: ${t.resource}`);let i=n.meta,o=yE(i.extension?.id,i.extension?.location),s=MR(this._webviewService,{viewType:i.viewType,origin:i.webview.origin,webviewOptions:i.webview.options,contentOptions:xE(i.webview.options),state:i.webview.state,extension:o}),a=this._instantiationService.createInstance(mn,{resource:L.revive(i.editorResource),viewType:i.viewType},s,{backupId:i.backupId});return a.updateGroup(0),a}};Mb=T([S(0,Ct),S(1,ip),S(2,gd),S(3,nl),S(4,nc)],Mb);var Xs=class extends O{constructor(t,n,i,o){super();this.viewType=t;this._resource=n;this._model=i;this.textFileService=o;this._register(i),this._textFileModel=this.textFileService.files.get(n),this._textFileModel&&(this._register(this._textFileModel.onDidChangeOrphaned(()=>this._onDidChangeOrphaned.fire())),this._register(this._textFileModel.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))),this._register(this.textFileService.files.onDidChangeDirty(s=>{bt(this.resource,s.resource)&&(this._onDidChangeDirty.fire(),this._onDidChangeContent.fire())}))}static async create(t,n,i){return t.invokeFunction(async o=>{let a=await o.get(hd).createModelReference(i);return t.createInstance(Xs,n,i,a)})}_textFileModel;_onDidChangeOrphaned=this._register(new E);onDidChangeOrphaned=this._onDidChangeOrphaned.event;_onDidChangeReadonly=this._register(new E);onDidChangeReadonly=this._onDidChangeReadonly.event;get resource(){return this._resource}isReadonly(){return this._model.object.isReadonly()}get backupId(){}get canHotExit(){return!0}isDirty(){return this.textFileService.isDirty(this.resource)}isOrphaned(){return!!this._textFileModel?.hasState(4)}_onDidChangeDirty=this._register(new E);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new E);onDidChangeContent=this._onDidChangeContent.event;async revert(t){return this.textFileService.revert(this.resource,t)}saveCustomEditor(t){return this.textFileService.save(this.resource,t)}async saveCustomEditorAs(t,n,i){return!!await this.textFileService.saveAs(t,n,i)}};Xs=T([S(3,Us)],Xs);var Nb=class extends O{constructor(t,n,i,o,s,a,l,d,u,p,h,g){super();this.mainThreadWebview=n;this.mainThreadWebviewPanels=i;this._customEditorService=d;this._editorGroupService=u;this._editorService=p;this._instantiationService=h;this._webviewWorkbenchService=g;this._webviewOriginStore=new $s("mainThreadCustomEditors.origins",s),this._proxyCustomEditors=t.getProxy(Gd.ExtHostCustomEditors),this._register(l.registerWorkingCopyProvider(b=>{let f=[];for(let v of a.workingCopies)v instanceof Lr&&KT(b,v.editorResource)&&f.push(v);return f})),this._register(g.registerResolver({canResolve:b=>(b instanceof mn&&o.activateByEvent(`onCustomEditor:${b.viewType}`),!1),resolveWebview:()=>{throw new Error("not implemented")}})),this._register(l.onWillRunWorkingCopyFileOperation(async b=>this.onWillRunWorkingCopyFileOperation(b)))}_proxyCustomEditors;_editorProviders=this._register(new $n);_editorRenameBackups=new Map;_webviewOriginStore;$registerTextEditorProvider(t,n,i,o,s){this.registerEditorProvider(1,Dp(t),n,i,o,!0,s)}$registerCustomEditorProvider(t,n,i,o,s){this.registerEditorProvider(0,Dp(t),n,i,{},o,s)}registerEditorProvider(t,n,i,o,s,a,l){if(this._editorProviders.has(i))throw new Error(`Provider for ${i} already registered`);let d=new le;d.add(this._customEditorService.registerCustomEditorCapabilities(i,{supportsMultipleEditorsPerDocument:a})),d.add(this._webviewWorkbenchService.registerResolver({canResolve:u=>u instanceof mn&&u.viewType===i,resolveWebview:async(u,p)=>{let h=dt(),g=u.resource;u.webview.origin=this._webviewOriginStore.getOrigin(i,n.id),this.mainThreadWebviewPanels.addWebviewInput(h,u,{serializeBuffersForPostMessage:l}),u.webview.options=o,u.webview.extension=n;let b=u.backupId;u.oldResource&&!u.backupId&&(b=this._editorRenameBackups.get(u.oldResource.toString())?.backupId,this._editorRenameBackups.delete(u.oldResource.toString()));let f;try{f=await this.getOrCreateCustomEditorModel(t,g,i,{backupId:b},p)}catch(v){Ae(v),u.webview.setHtml(this.mainThreadWebview.getWebviewResolvedFailedContent(i));return}if(p.isCancellationRequested){f.dispose();return}u.webview.onDidDispose(()=>{if(f.object.isDirty()){let v=f.object.onDidChangeDirty(()=>{f.object.isDirty()||(v.dispose(),f.dispose())});return}f.dispose()}),s.supportsMove&&u.onMove(async v=>{let D=f;f=await this.getOrCreateCustomEditorModel(t,v,i,{},We.None),this._proxyCustomEditors.$onMoveCustomEditor(h,v,i),D.dispose()});try{await this._proxyCustomEditors.$resolveCustomEditor(g,h,i,{title:u.getTitle(),contentOptions:u.webview.contentOptions,options:u.webview.options,active:u===this._editorService.activeEditor},Ep(this._editorGroupService,u.group||0),p)}catch(v){Ae(v),u.webview.setHtml(this.mainThreadWebview.getWebviewResolvedFailedContent(i)),f.dispose();return}}})),this._editorProviders.set(i,d)}$unregisterEditorProvider(t){if(!this._editorProviders.has(t))throw new Error(`No provider for ${t} registered`);this._editorProviders.deleteAndDispose(t),this._customEditorService.models.disposeAllModelsForView(t)}async getOrCreateCustomEditorModel(t,n,i,o,s){let a=this._customEditorService.models.tryRetain(n,i);if(a)return a;switch(t){case 1:{let l=Xs.create(this._instantiationService,i,n);return this._customEditorService.models.add(n,i,l)}case 0:{let l=Lr.create(this._instantiationService,this._proxyCustomEditors,i,n,o,()=>Array.from(this.mainThreadWebviewPanels.webviewInputs).filter(d=>d instanceof mn&&bt(d.resource,n)),s);return this._customEditorService.models.add(n,i,l)}}}async $onDidEdit(t,n,i,o){(await this.getCustomEditorModel(t,n)).pushEdit(i,o)}async $onContentChange(t,n){(await this.getCustomEditorModel(t,n)).changeContent()}async getCustomEditorModel(t,n){let i=L.revive(t),o=await this._customEditorService.models.get(i,n);if(!o||!(o instanceof Lr))throw new Error("Could not find model for webview editor");return o}async onWillRunWorkingCopyFileOperation(t){t.operation===2&&t.waitUntil((async()=>{let n=[];for(let i of t.files)i.source&&n.push(...await this._customEditorService.models.getAllModels(i.source));for(let i of n)if(i instanceof Lr&&i.isDirty()){let o=await i.backup(We.None);o.meta&&this._editorRenameBackups.set(i.editorResource.toString(),o.meta)}})())}};Nb=T([S(3,_n),S(4,Vt),S(5,ro),S(6,rp),S(7,nc),S(8,Ji),S(9,Ht),S(10,Ct),S(11,Pr)],Nb);var oc;(i=>{let r;(l=>(l[l.Allowed=0]="Allowed",l[l.NotAllowed=1]="NotAllowed",l[l.Pending=2]="Pending"))(r=i.Type||={}),i.Allowed=Object.freeze({type:0}),i.NotAllowed=Object.freeze({type:1});class n{constructor(s){this.operation=s}type=2}i.Pending=n})(oc||={});var Lr=class extends Ws{constructor(t,n,i,o,s,a,l,d,u,p,h,g,b,f,v){super(Lr.toWorkingCopyResource(n,i),u);this._proxy=t;this._viewType=n;this._editorResource=i;this._editable=s;this._getEditors=l;this._fileDialogService=d;this._labelService=p;this._undoService=h;this._environmentService=g;this._pathService=f;this._fromBackup=o,s&&(this._register(b.registerWorkingCopy(this)),this._register(v.onWillStop(D=>{this.isDirty()&&D.veto((async()=>!await this.save())(),c("vetoExtHostRestart","Custom editor '{0}' could not be saved.",this.name))}))),a&&(this._isDirtyFromContentChange=!0)}_fromBackup=!1;_hotExitState=oc.Allowed;_backupId;_currentEditIndex=-1;_savePoint=-1;_edits=[];_isDirtyFromContentChange=!1;_ongoingSave;typeId=wg;static async create(t,n,i,o,s,a,l){let d=a(),u;d.length!==0&&(u=d[0].untitledDocumentData);let{editable:p}=await n.$createCustomDocument(o,i,s.backupId,u,l);return t.createInstance(Lr,n,i,o,!!s.backupId,p,!!u,a)}get editorResource(){return this._editorResource}dispose(){this._editable&&this._undoService.removeElements(this._editorResource),this._proxy.$disposeCustomDocument(this._editorResource,this._viewType),super.dispose()}static toWorkingCopyResource(t,n){let i=t.replace(/[^a-z0-9\-_]/gi,"-"),o=`/${Rw(n.with({query:null,fragment:null}).toString(!0))}`;return L.from({scheme:q.vscodeCustomEditor,authority:i,path:o,query:JSON.stringify(n.toJSON())})}get name(){return tr(this._labelService.getUriLabel(this._editorResource))}get capabilities(){return this.isUntitled()?2:0}isDirty(){return this._isDirtyFromContentChange?!0:this._edits.length>0?this._savePoint!==this._currentEditIndex:this._fromBackup}isUntitled(){return this._editorResource.scheme===q.untitled}_onDidChangeDirty=this._register(new E);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new E);onDidChangeContent=this._onDidChangeContent.event;_onDidSave=this._register(new E);onDidSave=this._onDidSave.event;onDidChangeReadonly=Q.None;isReadonly(){return!this._editable}get viewType(){return this._viewType}get backupId(){return this._backupId}pushEdit(t,n){if(!this._editable)throw new Error("Document is not editable");this.change(()=>{this.spliceEdits(t),this._currentEditIndex=this._edits.length-1}),this._undoService.pushElement({type:0,resource:this._editorResource,label:n??c("defaultEditLabel","Edit"),code:"undoredo.customEditorEdit",undo:()=>this.undo(),redo:()=>this.redo()})}changeContent(){this.change(()=>{this._isDirtyFromContentChange=!0})}async undo(){if(!this._editable||this._currentEditIndex<0)return;let t=this._edits[this._currentEditIndex];this.change(()=>{--this._currentEditIndex}),await this._proxy.$undo(this._editorResource,this.viewType,t,this.isDirty())}async redo(){if(!this._editable||this._currentEditIndex>=this._edits.length-1)return;let t=this._edits[this._currentEditIndex+1];this.change(()=>{++this._currentEditIndex}),await this._proxy.$redo(this._editorResource,this.viewType,t,this.isDirty())}spliceEdits(t){let n=this._currentEditIndex+1,i=this._edits.length-this._currentEditIndex,o=typeof t=="number"?this._edits.splice(n,i,t):this._edits.splice(n,i);o.length&&this._proxy.$disposeEdits(this._editorResource,this._viewType,o)}change(t){let n=this.isDirty();t(),this._onDidChangeContent.fire(),this.isDirty()!==n&&this._onDidChangeDirty.fire()}async revert(t){this._editable&&(this._currentEditIndex===this._savePoint&&!this._isDirtyFromContentChange&&!this._fromBackup||(t?.soft||this._proxy.$revert(this._editorResource,this.viewType,We.None),this.change(()=>{this._isDirtyFromContentChange=!1,this._fromBackup=!1,this._currentEditIndex=this._savePoint,this.spliceEdits()})))}async save(t){let n=!!await this.saveCustomEditor(t);return n&&this._onDidSave.fire({reason:t?.reason,source:t?.source}),n}async saveCustomEditor(t){if(!this._editable)return;if(this.isUntitled()){let i=await this.suggestUntitledSavePath(t);return i?(await this.saveCustomEditorAs(this._editorResource,i,t),i):void 0}let n=ar(i=>this._proxy.$onSave(this._editorResource,this.viewType,i));this._ongoingSave?.cancel(),this._ongoingSave=n;try{await n,this._ongoingSave===n&&this.change(()=>{this._isDirtyFromContentChange=!1,this._savePoint=this._currentEditIndex,this._fromBackup=!1})}finally{this._ongoingSave===n&&(this._ongoingSave=void 0)}return this._editorResource}suggestUntitledSavePath(t){if(!this.isUntitled())throw new Error("Resource is not untitled");let n=this._environmentService.remoteAuthority,i=GT(this._editorResource,n,this._pathService.defaultUriScheme);return this._fileDialogService.pickFileToSave(i,t?.availableFileSystems)}async saveCustomEditorAs(t,n,i){return this._editable?(await ar(o=>this._proxy.$onSaveAs(this._editorResource,this.viewType,n,o)),this.change(()=>{this._savePoint=this._currentEditIndex}),!0):(await this.fileService.copy(t,n,!1),!0)}get canHotExit(){return typeof this._backupId=="string"&&this._hotExitState.type===0}async backup(t){let n=this._getEditors();if(!n.length)throw new Error("No editors found for resource, cannot back up");let i=n[0],s={meta:{viewType:this.viewType,editorResource:this._editorResource,backupId:"",extension:i.extension?{id:i.extension.id.value,location:i.extension.location}:void 0,webview:{origin:i.webview.origin,options:i.webview.options,state:i.webview.state}}};if(!this._editable)return s;this._hotExitState.type===2&&this._hotExitState.operation.cancel();let a=new oc.Pending(ar(d=>this._proxy.$backup(this._editorResource.toJSON(),this.viewType,d)));this._hotExitState=a,t.onCancellationRequested(()=>{a.operation.cancel()});let l="";try{let d=await a.operation;this._hotExitState===a&&(this._hotExitState=oc.Allowed,s.meta.backupId=d,this._backupId=d)}catch(d){if(Xo(d))throw d;this._hotExitState===a&&(this._hotExitState=oc.NotAllowed),d.message&&(l=d.message)}if(this._hotExitState===oc.Allowed)return s;throw new Error(`Cannot backup in this state: ${l}`)}};Lr=T([S(7,Wl),S(8,Ut),S(9,$i),S(10,fs),S(11,Dr),S(12,ro),S(13,nb),S(14,_n)],Lr);export{Nb as MainThreadCustomEditors};
