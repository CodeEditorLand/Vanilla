var l=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var d=(o,r,t,n)=>{for(var e=n>1?void 0:n?c(r,t):r,s=o.length-1,a;s>=0;s--)(a=o[s])&&(e=(n?a(r,t,e):a(e))||e);return n&&e&&l(r,t,e),e},p=(o,r)=>(t,n)=>r(t,n,o);import{first as u}from"../../../base/common/async.js";import{Disposable as m,toDisposable as f}from"../../../base/common/lifecycle.js";import{URI as h}from"../../../base/common/uri.js";import{IProductService as I}from"../../product/common/productService.js";class U extends m{handlers=new Set;open(r,t){const n=[...this.handlers.values()];return u(n.map(e=>()=>e.handleURL(r,t)),void 0,!1).then(e=>e||!1)}registerHandler(r){return this.handlers.add(r),f(()=>this.handlers.delete(r))}}let i=class extends U{constructor(t){super();this.productService=t}create(t){let{authority:n,path:e,query:s,fragment:a}=t||{authority:void 0,path:void 0,query:void 0,fragment:void 0};return n&&e&&e.indexOf("/")!==0&&(e=`/${e}`),h.from({scheme:this.productService.urlProtocol,authority:n,path:e,query:s,fragment:a})}};i=d([p(0,I)],i);export{U as AbstractURLService,i as NativeURLService};
