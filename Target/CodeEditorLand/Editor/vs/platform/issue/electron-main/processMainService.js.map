{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/issue/electron-main/processMainService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\tBrowserWindow,\n\ttype BrowserWindowConstructorOptions,\n\ttype Display,\n\ttype IpcMainEvent,\n\tcontentTracing,\n\tscreen,\n} from \"electron\";\nimport { isESM } from \"../../../base/common/amd.js\";\nimport { randomPath } from \"../../../base/common/extpath.js\";\nimport { DisposableStore } from \"../../../base/common/lifecycle.js\";\nimport { FileAccess } from \"../../../base/common/network.js\";\nimport {\n\ttype IProcessEnvironment,\n\tisMacintosh,\n} from \"../../../base/common/platform.js\";\nimport { listProcesses } from \"../../../base/node/ps.js\";\nimport { validatedIpcMain } from \"../../../base/parts/ipc/electron-main/ipcMain.js\";\nimport { getNLSLanguage, getNLSMessages, localize } from \"../../../nls.js\";\nimport { ICSSDevelopmentService } from \"../../cssDev/node/cssDevService.js\";\nimport {\n\tIDiagnosticsService,\n\ttype PerformanceInfo,\n\ttype SystemInfo,\n\tisRemoteDiagnosticError,\n} from \"../../diagnostics/common/diagnostics.js\";\nimport { IDiagnosticsMainService } from \"../../diagnostics/electron-main/diagnosticsMainService.js\";\nimport { IDialogMainService } from \"../../dialogs/electron-main/dialogMainService.js\";\nimport { IEnvironmentMainService } from \"../../environment/electron-main/environmentMainService.js\";\nimport { ILogService } from \"../../log/common/log.js\";\nimport { INativeHostMainService } from \"../../native/electron-main/nativeHostMainService.js\";\nimport product from \"../../product/common/product.js\";\nimport { IProductService } from \"../../product/common/productService.js\";\nimport {\n\ttype IIPCObjectUrl,\n\tIProtocolMainService,\n} from \"../../protocol/electron-main/protocol.js\";\nimport { IStateService } from \"../../state/node/state.js\";\nimport { UtilityProcess } from \"../../utilityProcess/electron-main/utilityProcess.js\";\nimport { zoomLevelToZoomFactor } from \"../../window/common/window.js\";\nimport type { IWindowState } from \"../../window/electron-main/window.js\";\nimport type {\n\tIProcessMainService,\n\tProcessExplorerData,\n\tProcessExplorerWindowConfiguration,\n} from \"../common/issue.js\";\n\nconst processExplorerWindowState = \"issue.processExplorerWindowState\";\n\ninterface IBrowserWindowOptions {\n\tbackgroundColor: string | undefined;\n\ttitle: string;\n\tzoomLevel: number;\n\talwaysOnTop: boolean;\n}\n\ntype IStrictWindowState = Required<\n\tPick<IWindowState, \"x\" | \"y\" | \"width\" | \"height\">\n>;\n\nexport class ProcessMainService implements IProcessMainService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate static readonly DEFAULT_BACKGROUND_COLOR = \"#1E1E1E\";\n\n\tprivate processExplorerWindow: BrowserWindow | null = null;\n\tprivate processExplorerParentWindow: BrowserWindow | null = null;\n\n\tconstructor(\n\t\tprivate userEnv: IProcessEnvironment,\n\t\t@IEnvironmentMainService private readonly environmentMainService: IEnvironmentMainService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IDiagnosticsService private readonly diagnosticsService: IDiagnosticsService,\n\t\t@IDiagnosticsMainService private readonly diagnosticsMainService: IDiagnosticsMainService,\n\t\t@IDialogMainService private readonly dialogMainService: IDialogMainService,\n\t\t@INativeHostMainService private readonly nativeHostMainService: INativeHostMainService,\n\t\t@IProtocolMainService private readonly protocolMainService: IProtocolMainService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IStateService private readonly stateService: IStateService,\n\t\t@ICSSDevelopmentService private readonly cssDevelopmentService: ICSSDevelopmentService\n\t) {\n\t\tthis.registerListeners();\n\t}\n\n\t//#region Register Listeners\n\n\tprivate registerListeners(): void {\n\t\tvalidatedIpcMain.on(\"vscode:listProcesses\", async (event) => {\n\t\t\tconst processes = [];\n\n\t\t\ttry {\n\t\t\t\tprocesses.push({\n\t\t\t\t\tname: localize(\"local\", \"Local\"),\n\t\t\t\t\trootProcess: await listProcesses(process.pid),\n\t\t\t\t});\n\n\t\t\t\tconst remoteDiagnostics =\n\t\t\t\t\tawait this.diagnosticsMainService.getRemoteDiagnostics({\n\t\t\t\t\t\tincludeProcesses: true,\n\t\t\t\t\t});\n\t\t\t\tremoteDiagnostics.forEach((data) => {\n\t\t\t\t\tif (isRemoteDiagnosticError(data)) {\n\t\t\t\t\t\tprocesses.push({\n\t\t\t\t\t\t\tname: data.hostName,\n\t\t\t\t\t\t\trootProcess: data,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (data.processes) {\n\t\t\t\t\t\tprocesses.push({\n\t\t\t\t\t\t\tname: data.hostName,\n\t\t\t\t\t\t\trootProcess: data.processes,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tthis.logService.error(`Listing processes failed: ${e}`);\n\t\t\t}\n\n\t\t\tthis.safeSend(event, \"vscode:listProcessesResponse\", processes);\n\t\t});\n\n\t\tvalidatedIpcMain.on(\n\t\t\t\"vscode:workbenchCommand\",\n\t\t\t(_: unknown, commandInfo: { id: any; from: any; args: any }) => {\n\t\t\t\tconst { id, from, args } = commandInfo;\n\n\t\t\t\tlet parentWindow: BrowserWindow | null;\n\t\t\t\tswitch (from) {\n\t\t\t\t\tcase \"processExplorer\":\n\t\t\t\t\t\tparentWindow = this.processExplorerParentWindow;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// The issue reporter does not use this anymore.\n\t\t\t\t\t\tthrow new Error(`Unexpected command source: ${from}`);\n\t\t\t\t}\n\n\t\t\t\tparentWindow?.webContents.send(\"vscode:runAction\", {\n\t\t\t\t\tid,\n\t\t\t\t\tfrom,\n\t\t\t\t\targs,\n\t\t\t\t});\n\t\t\t},\n\t\t);\n\n\t\tvalidatedIpcMain.on(\"vscode:closeProcessExplorer\", (event) => {\n\t\t\tthis.processExplorerWindow?.close();\n\t\t});\n\n\t\tvalidatedIpcMain.on(\"vscode:pidToNameRequest\", async (event) => {\n\t\t\tconst mainProcessInfo =\n\t\t\t\tawait this.diagnosticsMainService.getMainDiagnostics();\n\n\t\t\tconst pidToNames: [number, string][] = [];\n\t\t\tfor (const window of mainProcessInfo.windows) {\n\t\t\t\tpidToNames.push([\n\t\t\t\t\twindow.pid,\n\t\t\t\t\t`window [${window.id}] (${window.title})`,\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tfor (const { pid, name } of UtilityProcess.getAll()) {\n\t\t\t\tpidToNames.push([pid, name]);\n\t\t\t}\n\n\t\t\tthis.safeSend(event, \"vscode:pidToNameResponse\", pidToNames);\n\t\t});\n\t}\n\n\tasync openProcessExplorer(data: ProcessExplorerData): Promise<void> {\n\t\tif (!this.processExplorerWindow) {\n\t\t\tthis.processExplorerParentWindow = BrowserWindow.getFocusedWindow();\n\t\t\tif (this.processExplorerParentWindow) {\n\t\t\t\tconst processExplorerDisposables = new DisposableStore();\n\n\t\t\t\tconst processExplorerWindowConfigUrl =\n\t\t\t\t\tprocessExplorerDisposables.add(\n\t\t\t\t\t\tthis.protocolMainService.createIPCObjectUrl<ProcessExplorerWindowConfiguration>(),\n\t\t\t\t\t);\n\n\t\t\t\tconst savedPosition = this.stateService.getItem<IWindowState>(\n\t\t\t\t\tprocessExplorerWindowState,\n\t\t\t\t\tundefined,\n\t\t\t\t);\n\t\t\t\tconst position = isStrictWindowState(savedPosition)\n\t\t\t\t\t? savedPosition\n\t\t\t\t\t: this.getWindowPosition(\n\t\t\t\t\t\t\tthis.processExplorerParentWindow,\n\t\t\t\t\t\t\t800,\n\t\t\t\t\t\t\t500,\n\t\t\t\t\t\t);\n\n\t\t\t\tthis.processExplorerWindow = this.createBrowserWindow(\n\t\t\t\t\tposition,\n\t\t\t\t\tprocessExplorerWindowConfigUrl,\n\t\t\t\t\t{\n\t\t\t\t\t\tbackgroundColor: data.styles.backgroundColor,\n\t\t\t\t\t\ttitle: localize(\"processExplorer\", \"Process Explorer\"),\n\t\t\t\t\t\tzoomLevel: data.zoomLevel,\n\t\t\t\t\t\talwaysOnTop: true,\n\t\t\t\t\t},\n\t\t\t\t\t\"process-explorer\",\n\t\t\t\t);\n\n\t\t\t\t// Store into config object URL\n\t\t\t\tprocessExplorerWindowConfigUrl.update({\n\t\t\t\t\tappRoot: this.environmentMainService.appRoot,\n\t\t\t\t\twindowId: this.processExplorerWindow.id,\n\t\t\t\t\tuserEnv: this.userEnv,\n\t\t\t\t\tdata,\n\t\t\t\t\tproduct,\n\t\t\t\t\tnls: {\n\t\t\t\t\t\tmessages: getNLSMessages(),\n\t\t\t\t\t\tlanguage: getNLSLanguage(),\n\t\t\t\t\t},\n\t\t\t\t\tcssModules: this.cssDevelopmentService.isEnabled\n\t\t\t\t\t\t? await this.cssDevelopmentService.getCssModules()\n\t\t\t\t\t\t: undefined,\n\t\t\t\t});\n\n\t\t\t\tthis.processExplorerWindow.loadURL(\n\t\t\t\t\tFileAccess.asBrowserUri(\n\t\t\t\t\t\t`vs/code/electron-sandbox/processExplorer/processExplorer${this.environmentMainService.isBuilt ? \"\" : \"-dev\"}.${isESM ? \"esm.\" : \"\"}html`,\n\t\t\t\t\t).toString(true),\n\t\t\t\t);\n\n\t\t\t\tthis.processExplorerWindow.on(\"close\", () => {\n\t\t\t\t\tthis.processExplorerWindow = null;\n\t\t\t\t\tprocessExplorerDisposables.dispose();\n\t\t\t\t});\n\n\t\t\t\tthis.processExplorerParentWindow.on(\"close\", () => {\n\t\t\t\t\tif (this.processExplorerWindow) {\n\t\t\t\t\t\tthis.processExplorerWindow.close();\n\t\t\t\t\t\tthis.processExplorerWindow = null;\n\n\t\t\t\t\t\tprocessExplorerDisposables.dispose();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst storeState = () => {\n\t\t\t\t\tif (!this.processExplorerWindow) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst size = this.processExplorerWindow.getSize();\n\t\t\t\t\tconst position = this.processExplorerWindow.getPosition();\n\t\t\t\t\tif (!size || !position) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst state: IWindowState = {\n\t\t\t\t\t\twidth: size[0],\n\t\t\t\t\t\theight: size[1],\n\t\t\t\t\t\tx: position[0],\n\t\t\t\t\t\ty: position[1],\n\t\t\t\t\t};\n\t\t\t\t\tthis.stateService.setItem(\n\t\t\t\t\t\tprocessExplorerWindowState,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tthis.processExplorerWindow.on(\"moved\", storeState);\n\t\t\t\tthis.processExplorerWindow.on(\"resized\", storeState);\n\t\t\t}\n\t\t}\n\n\t\tif (this.processExplorerWindow) {\n\t\t\tthis.focusWindow(this.processExplorerWindow);\n\t\t}\n\t}\n\n\tprivate focusWindow(window: BrowserWindow): void {\n\t\tif (window.isMinimized()) {\n\t\t\twindow.restore();\n\t\t}\n\n\t\twindow.focus();\n\t}\n\n\tprivate getWindowPosition(\n\t\tparentWindow: BrowserWindow,\n\t\tdefaultWidth: number,\n\t\tdefaultHeight: number,\n\t): IStrictWindowState {\n\t\t// We want the new window to open on the same display that the parent is in\n\t\tlet displayToUse: Display | undefined;\n\t\tconst displays = screen.getAllDisplays();\n\n\t\t// Single Display\n\t\tif (displays.length === 1) {\n\t\t\tdisplayToUse = displays[0];\n\t\t}\n\n\t\t// Multi Display\n\t\telse {\n\t\t\t// on mac there is 1 menu per window so we need to use the monitor where the cursor currently is\n\t\t\tif (isMacintosh) {\n\t\t\t\tconst cursorPoint = screen.getCursorScreenPoint();\n\t\t\t\tdisplayToUse = screen.getDisplayNearestPoint(cursorPoint);\n\t\t\t}\n\n\t\t\t// if we have a last active window, use that display for the new window\n\t\t\tif (!displayToUse && parentWindow) {\n\t\t\t\tdisplayToUse = screen.getDisplayMatching(\n\t\t\t\t\tparentWindow.getBounds(),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// fallback to primary display or first display\n\t\t\tif (!displayToUse) {\n\t\t\t\tdisplayToUse = screen.getPrimaryDisplay() || displays[0];\n\t\t\t}\n\t\t}\n\n\t\tconst displayBounds = displayToUse.bounds;\n\n\t\tconst state: IStrictWindowState = {\n\t\t\twidth: defaultWidth,\n\t\t\theight: defaultHeight,\n\t\t\tx: displayBounds.x + displayBounds.width / 2 - defaultWidth / 2,\n\t\t\ty: displayBounds.y + displayBounds.height / 2 - defaultHeight / 2,\n\t\t};\n\n\t\tif (\n\t\t\tdisplayBounds.width > 0 &&\n\t\t\tdisplayBounds.height >\n\t\t\t\t0 /* Linux X11 sessions sometimes report wrong display bounds */\n\t\t) {\n\t\t\tif (state.x < displayBounds.x) {\n\t\t\t\tstate.x = displayBounds.x; // prevent window from falling out of the screen to the left\n\t\t\t}\n\n\t\t\tif (state.y < displayBounds.y) {\n\t\t\t\tstate.y = displayBounds.y; // prevent window from falling out of the screen to the top\n\t\t\t}\n\n\t\t\tif (state.x > displayBounds.x + displayBounds.width) {\n\t\t\t\tstate.x = displayBounds.x; // prevent window from falling out of the screen to the right\n\t\t\t}\n\n\t\t\tif (state.y > displayBounds.y + displayBounds.height) {\n\t\t\t\tstate.y = displayBounds.y; // prevent window from falling out of the screen to the bottom\n\t\t\t}\n\n\t\t\tif (state.width > displayBounds.width) {\n\t\t\t\tstate.width = displayBounds.width; // prevent window from exceeding display bounds width\n\t\t\t}\n\n\t\t\tif (state.height > displayBounds.height) {\n\t\t\t\tstate.height = displayBounds.height; // prevent window from exceeding display bounds height\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tasync stopTracing(): Promise<void> {\n\t\tif (!this.environmentMainService.args.trace) {\n\t\t\treturn; // requires tracing to be on\n\t\t}\n\n\t\tconst path = await contentTracing.stopRecording(\n\t\t\t`${randomPath(this.environmentMainService.userHome.fsPath, this.productService.applicationName)}.trace.txt`,\n\t\t);\n\n\t\t// Inform user to report an issue\n\t\tawait this.dialogMainService.showMessageBox(\n\t\t\t{\n\t\t\t\ttype: \"info\",\n\t\t\t\tmessage: localize(\n\t\t\t\t\t\"trace.message\",\n\t\t\t\t\t\"Successfully created the trace file\",\n\t\t\t\t),\n\t\t\t\tdetail: localize(\n\t\t\t\t\t\"trace.detail\",\n\t\t\t\t\t\"Please create an issue and manually attach the following file:\\n{0}\",\n\t\t\t\t\tpath,\n\t\t\t\t),\n\t\t\t\tbuttons: [\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t{ key: \"trace.ok\", comment: [\"&& denotes a mnemonic\"] },\n\t\t\t\t\t\t\"&&OK\",\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t},\n\t\t\tBrowserWindow.getFocusedWindow() ?? undefined,\n\t\t);\n\n\t\t// Show item in explorer\n\t\tthis.nativeHostMainService.showItemInFolder(undefined, path);\n\t}\n\n\tasync getSystemStatus(): Promise<string> {\n\t\tconst [info, remoteData] = await Promise.all([\n\t\t\tthis.diagnosticsMainService.getMainDiagnostics(),\n\t\t\tthis.diagnosticsMainService.getRemoteDiagnostics({\n\t\t\t\tincludeProcesses: false,\n\t\t\t\tincludeWorkspaceMetadata: false,\n\t\t\t}),\n\t\t]);\n\t\treturn this.diagnosticsService.getDiagnostics(info, remoteData);\n\t}\n\n\tasync $getSystemInfo(): Promise<SystemInfo> {\n\t\tconst [info, remoteData] = await Promise.all([\n\t\t\tthis.diagnosticsMainService.getMainDiagnostics(),\n\t\t\tthis.diagnosticsMainService.getRemoteDiagnostics({\n\t\t\t\tincludeProcesses: false,\n\t\t\t\tincludeWorkspaceMetadata: false,\n\t\t\t}),\n\t\t]);\n\t\tconst msg = await this.diagnosticsService.getSystemInfo(\n\t\t\tinfo,\n\t\t\tremoteData,\n\t\t);\n\t\treturn msg;\n\t}\n\n\tasync $getPerformanceInfo(): Promise<PerformanceInfo> {\n\t\ttry {\n\t\t\tconst [info, remoteData] = await Promise.all([\n\t\t\t\tthis.diagnosticsMainService.getMainDiagnostics(),\n\t\t\t\tthis.diagnosticsMainService.getRemoteDiagnostics({\n\t\t\t\t\tincludeProcesses: true,\n\t\t\t\t\tincludeWorkspaceMetadata: true,\n\t\t\t\t}),\n\t\t\t]);\n\t\t\treturn await this.diagnosticsService.getPerformanceInfo(\n\t\t\t\tinfo,\n\t\t\t\tremoteData,\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tthis.logService.warn(\n\t\t\t\t\"issueService#getPerformanceInfo \",\n\t\t\t\terror.message,\n\t\t\t);\n\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tprivate createBrowserWindow<T>(\n\t\tposition: IWindowState,\n\t\tipcObjectUrl: IIPCObjectUrl<T>,\n\t\toptions: IBrowserWindowOptions,\n\t\twindowKind: string,\n\t): BrowserWindow {\n\t\tconst window = new BrowserWindow({\n\t\t\tfullscreen: false,\n\t\t\tskipTaskbar: false,\n\t\t\tresizable: true,\n\t\t\twidth: position.width,\n\t\t\theight: position.height,\n\t\t\tminWidth: 300,\n\t\t\tminHeight: 200,\n\t\t\tx: position.x,\n\t\t\ty: position.y,\n\t\t\ttitle: options.title,\n\t\t\tbackgroundColor:\n\t\t\t\toptions.backgroundColor ||\n\t\t\t\tProcessMainService.DEFAULT_BACKGROUND_COLOR,\n\t\t\twebPreferences: {\n\t\t\t\tpreload: FileAccess.asFileUri(\n\t\t\t\t\t\"vs/base/parts/sandbox/electron-sandbox/preload.js\",\n\t\t\t\t).fsPath,\n\t\t\t\tadditionalArguments: [\n\t\t\t\t\t`--vscode-window-config=${ipcObjectUrl.resource.toString()}`,\n\t\t\t\t],\n\t\t\t\tv8CacheOptions: this.environmentMainService.useCodeCache\n\t\t\t\t\t? \"bypassHeatCheck\"\n\t\t\t\t\t: \"none\",\n\t\t\t\tenableWebSQL: false,\n\t\t\t\tspellcheck: false,\n\t\t\t\tzoomFactor: zoomLevelToZoomFactor(options.zoomLevel),\n\t\t\t\tsandbox: true,\n\t\t\t},\n\t\t\talwaysOnTop: options.alwaysOnTop,\n\t\t\texperimentalDarkMode: true,\n\t\t} as BrowserWindowConstructorOptions & {\n\t\t\texperimentalDarkMode: boolean;\n\t\t});\n\n\t\twindow.setMenuBarVisibility(false);\n\n\t\treturn window;\n\t}\n\n\tprivate safeSend(\n\t\tevent: IpcMainEvent,\n\t\tchannel: string,\n\t\t...args: unknown[]\n\t): void {\n\t\tif (!event.sender.isDestroyed()) {\n\t\t\tevent.sender.send(channel, ...args);\n\t\t}\n\t}\n\n\tasync closeProcessExplorer(): Promise<void> {\n\t\tthis.processExplorerWindow?.close();\n\t}\n}\n\nfunction isStrictWindowState(obj: unknown): obj is IStrictWindowState {\n\tif (typeof obj !== \"object\" || obj === null) {\n\t\treturn false;\n\t}\n\treturn \"x\" in obj && \"y\" in obj && \"width\" in obj && \"height\" in obj;\n}\n"],
  "mappings": "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",
  "names": ["position"]
}
