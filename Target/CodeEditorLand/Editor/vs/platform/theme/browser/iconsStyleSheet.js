import{asCSSPropertyValue as p,asCSSUrl as l}from"../../../base/browser/dom.js";import{Emitter as g}from"../../../base/common/event.js";import{DisposableStore as $}from"../../../base/common/lifecycle.js";import{ThemeIcon as y}from"../../../base/common/themables.js";import{getIconRegistry as I}from"../common/iconRegistry.js";function w(c){const i=new $,r=i.add(new g),n=I();return i.add(n.onDidChange(()=>r.fire())),c&&i.add(c.onDidProductIconThemeChange(()=>r.fire())),{dispose:()=>i.dispose(),onDidChange:r.event,getCSS(){const d=c?c.getProductIconTheme():new C,m={},s=[],h=[];for(const t of n.getIcons()){const o=d.getIcon(t);if(!o)continue;const e=o.font,f=`--vscode-icon-${t.id}-font-family`,a=`--vscode-icon-${t.id}-content`;e?(m[e.id]=e.definition,h.push(`${f}: ${p(e.id)};`,`${a}: '${o.fontCharacter}';`),s.push(`.codicon-${t.id}:before { content: '${o.fontCharacter}'; font-family: ${p(e.id)}; }`)):(h.push(`${a}: '${o.fontCharacter}'; ${f}: 'codicon';`),s.push(`.codicon-${t.id}:before { content: '${o.fontCharacter}'; }`))}for(const t in m){const o=m[t],e=o.weight?`font-weight: ${o.weight};`:"",f=o.style?`font-style: ${o.style};`:"",a=o.src.map(u=>`${l(u.location)} format('${u.format}')`).join(", ");s.push(`@font-face { src: ${a}; font-family: ${p(t)};${e}${f} font-display: block; }`)}return s.push(`:root { ${h.join(" ")} }`),s.join(`
`)}}}class C{getIcon(i){const r=I();let n=i.defaults;for(;y.isThemeIcon(n);){const d=r.getIcon(n.id);if(!d)return;n=d.defaults}return n}}export{C as UnthemedProductIconTheme,w as getIconsStyleSheet};
