{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/workspaces/test/electron-main/workspaces.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport * as path from '../../../../base/common/path.js';\nimport { isWindows } from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as pfs from '../../../../base/node/pfs.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { flakySuite, getRandomTestPath } from '../../../../base/test/node/testUtils.js';\nimport { getSingleFolderWorkspaceIdentifier, getWorkspaceIdentifier } from '../../node/workspaces.js';\n\nflakySuite('Workspaces', () => {\n\n\tlet testDir: string;\n\n\tconst tmpDir = os.tmpdir();\n\n\tsetup(async () => {\n\t\ttestDir = getRandomTestPath(tmpDir, 'vsctests', 'workspacesmanagementmainservice');\n\n\t\treturn fs.promises.mkdir(testDir, { recursive: true });\n\t});\n\n\tteardown(() => {\n\t\treturn pfs.Promises.rm(testDir);\n\t});\n\n\ttest('getSingleWorkspaceIdentifier', async function () {\n\t\tconst nonLocalUri = URI.parse('myscheme://server/work/p/f1');\n\t\tconst nonLocalUriId = getSingleFolderWorkspaceIdentifier(nonLocalUri);\n\t\tassert.ok(nonLocalUriId?.id);\n\n\t\tconst localNonExistingUri = URI.file(path.join(testDir, 'f1'));\n\t\tconst localNonExistingUriId = getSingleFolderWorkspaceIdentifier(localNonExistingUri);\n\t\tassert.ok(!localNonExistingUriId);\n\n\t\tfs.mkdirSync(path.join(testDir, 'f1'));\n\n\t\tconst localExistingUri = URI.file(path.join(testDir, 'f1'));\n\t\tconst localExistingUriId = getSingleFolderWorkspaceIdentifier(localExistingUri, fs.statSync(localExistingUri.fsPath));\n\t\tassert.ok(localExistingUriId?.id);\n\t});\n\n\ttest('workspace identifiers are stable', function () {\n\n\t\t// workspace identifier (local)\n\t\tassert.strictEqual(getWorkspaceIdentifier(URI.file('/hello/test')).id, isWindows  /* slash vs backslash */ ? '9f3efb614e2cd7924e4b8076e6c72233' : 'e36736311be12ff6d695feefe415b3e8');\n\n\t\t// single folder identifier (local)\n\t\tconst fakeStat = {\n\t\t\tino: 1611312115129,\n\t\t\tbirthtimeMs: 1611312115129,\n\t\t\tbirthtime: new Date(1611312115129)\n\t\t};\n\t\tassert.strictEqual(getSingleFolderWorkspaceIdentifier(URI.file('/hello/test'), fakeStat as fs.Stats)?.id, isWindows /* slash vs backslash */ ? '9a8441e897e5174fa388bc7ef8f7a710' : '1d726b3d516dc2a6d343abf4797eaaef');\n\n\t\t// workspace identifier (remote)\n\t\tassert.strictEqual(getWorkspaceIdentifier(URI.parse('vscode-remote:/hello/test')).id, '786de4f224d57691f218dc7f31ee2ee3');\n\n\t\t// single folder identifier (remote)\n\t\tassert.strictEqual(getSingleFolderWorkspaceIdentifier(URI.parse('vscode-remote:/hello/test'))?.id, '786de4f224d57691f218dc7f31ee2ee3');\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"],
  "mappings": "AAKA,OAAO,YAAY;AACnB,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,YAAY,UAAU;AACtB,SAAS,iBAAiB;AAC1B,SAAS,WAAW;AACpB,YAAY,SAAS;AACrB,SAAS,+CAA+C;AACxD,SAAS,YAAY,yBAAyB;AAC9C,SAAS,oCAAoC,8BAA8B;AAE3E,WAAW,cAAc,MAAM;AAE9B,MAAI;AAEJ,QAAM,SAAS,GAAG,OAAO;AAEzB,QAAM,YAAY;AACjB,cAAU,kBAAkB,QAAQ,YAAY,iCAAiC;AAEjF,WAAO,GAAG,SAAS,MAAM,SAAS,EAAE,WAAW,KAAK,CAAC;AAAA,EACtD,CAAC;AAED,WAAS,MAAM;AACd,WAAO,IAAI,SAAS,GAAG,OAAO;AAAA,EAC/B,CAAC;AAED,OAAK,gCAAgC,iBAAkB;AACtD,UAAM,cAAc,IAAI,MAAM,6BAA6B;AAC3D,UAAM,gBAAgB,mCAAmC,WAAW;AACpE,WAAO,GAAG,eAAe,EAAE;AAE3B,UAAM,sBAAsB,IAAI,KAAK,KAAK,KAAK,SAAS,IAAI,CAAC;AAC7D,UAAM,wBAAwB,mCAAmC,mBAAmB;AACpF,WAAO,GAAG,CAAC,qBAAqB;AAEhC,OAAG,UAAU,KAAK,KAAK,SAAS,IAAI,CAAC;AAErC,UAAM,mBAAmB,IAAI,KAAK,KAAK,KAAK,SAAS,IAAI,CAAC;AAC1D,UAAM,qBAAqB,mCAAmC,kBAAkB,GAAG,SAAS,iBAAiB,MAAM,CAAC;AACpH,WAAO,GAAG,oBAAoB,EAAE;AAAA,EACjC,CAAC;AAED,OAAK,oCAAoC,WAAY;AAGpD,WAAO,YAAY,uBAAuB,IAAI,KAAK,aAAa,CAAC,EAAE,IAAI,YAAsC,qCAAqC,kCAAkC;AAGpL,UAAM,WAAW;AAAA,MAChB,KAAK;AAAA,MACL,aAAa;AAAA,MACb,WAAW,oBAAI,KAAK,aAAa;AAAA,IAClC;AACA,WAAO,YAAY,mCAAmC,IAAI,KAAK,aAAa,GAAG,QAAoB,GAAG,IAAI,YAAqC,qCAAqC,kCAAkC;AAGtN,WAAO,YAAY,uBAAuB,IAAI,MAAM,2BAA2B,CAAC,EAAE,IAAI,kCAAkC;AAGxH,WAAO,YAAY,mCAAmC,IAAI,MAAM,2BAA2B,CAAC,GAAG,IAAI,kCAAkC;AAAA,EACtI,CAAC;AAED,0CAAwC;AACzC,CAAC;",
  "names": []
}
