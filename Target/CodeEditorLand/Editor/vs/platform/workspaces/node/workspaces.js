import{createHash as n}from"crypto";import"fs";import{Schemas as d}from"../../../base/common/network.js";import{isLinux as f,isMacintosh as s,isWindows as p}from"../../../base/common/platform.js";import{originalFSPath as m}from"../../../base/common/resources.js";import"../../../base/common/uri.js";import"../../workspace/common/workspace.js";const M=128/4;function b(e){function i(){let r=e.scheme===d.file?m(e):e.toString();return f||(r=r.toLowerCase()),n("md5").update(r).digest("hex")}return{id:i(),configPath:e}}function E(e,i){function r(){if(e.scheme!==d.file)return n("md5").update(e.toString()).digest("hex");if(!i)return;let t;return f?t=i.ino:s?t=i.birthtime.getTime():p&&(typeof i.birthtimeMs=="number"?t=Math.floor(i.birthtimeMs):t=i.birthtime.getTime()),n("md5").update(e.fsPath).update(t?String(t):"").digest("hex")}const o=r();if(typeof o=="string")return{id:o,uri:e}}function R(){return{id:(Date.now()+Math.round(Math.random()*1e3)).toString()}}export{M as NON_EMPTY_WORKSPACE_ID_LENGTH,R as createEmptyWorkspaceIdentifier,E as getSingleFolderWorkspaceIdentifier,b as getWorkspaceIdentifier};
