import*as o from"fs";import*as i from"os";import*as a from"child_process";import*as u from"path";var s;async function p(e=!1){return(s===void 0||e)&&(s=d()),s}async function d(){let e=l();if(e===void 0)return!1;if(e>=22e3){let n=c();if(n)return new Promise(t=>{try{a.execFile(n,["--status"],r=>t(!r))}catch{t(!1)}})}else{let n=m();if(n)try{if((await o.promises.stat(n)).isFile())return!0}catch{}}return!1}function l(){let e=/(\d+)\.(\d+)\.(\d+)/g.exec(i.release());if(e)return parseInt(e[3])}function f(e){let n=process.env.SystemRoot;if(n){let t=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");return u.join(n,t?"Sysnative":"System32",e)}}function c(){return f("wsl.exe")}function m(){return f("lxss\\LxssManager.dll")}export{p as hasWSLFeatureInstalled};
