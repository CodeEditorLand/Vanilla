{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/auxiliaryWindow/electron-main/auxiliaryWindow.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\tBrowserWindow,\n\ttype BrowserWindowConstructorOptions,\n\ttype WebContents,\n} from \"electron\";\nimport { isLinux, isWindows } from \"../../../base/common/platform.js\";\nimport { IConfigurationService } from \"../../configuration/common/configuration.js\";\nimport { IEnvironmentMainService } from \"../../environment/electron-main/environmentMainService.js\";\nimport { ILifecycleMainService } from \"../../lifecycle/electron-main/lifecycleMainService.js\";\nimport { ILogService } from \"../../log/common/log.js\";\nimport { IStateService } from \"../../state/node/state.js\";\nimport {\n\tTitlebarStyle,\n\thasNativeTitlebar,\n} from \"../../window/common/window.js\";\nimport {\n\ttype IBaseWindow,\n\tWindowMode,\n} from \"../../window/electron-main/window.js\";\nimport { BaseWindow } from \"../../windows/electron-main/windowImpl.js\";\n\nexport interface IAuxiliaryWindow extends IBaseWindow {\n\treadonly parentId: number;\n}\n\nexport class AuxiliaryWindow extends BaseWindow implements IAuxiliaryWindow {\n\treadonly id = this.webContents.id;\n\tparentId = -1;\n\n\toverride get win() {\n\t\tif (!super.win) {\n\t\t\tthis.tryClaimWindow();\n\t\t}\n\n\t\treturn super.win;\n\t}\n\n\tprivate stateApplied = false;\n\n\tconstructor(\n\t\tprivate readonly webContents: WebContents,\n\t\t@IEnvironmentMainService\n\t\tenvironmentMainService: IEnvironmentMainService,\n\t\t@ILogService logService: ILogService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStateService stateService: IStateService,\n\t\t@ILifecycleMainService\n\t\tprivate readonly lifecycleMainService: ILifecycleMainService,\n\t) {\n\t\tsuper(\n\t\t\tconfigurationService,\n\t\t\tstateService,\n\t\t\tenvironmentMainService,\n\t\t\tlogService,\n\t\t);\n\n\t\t// Try to claim window\n\t\tthis.tryClaimWindow();\n\t}\n\n\ttryClaimWindow(options?: BrowserWindowConstructorOptions): void {\n\t\tif (this._store.isDisposed || this.webContents.isDestroyed()) {\n\t\t\treturn; // already disposed\n\t\t}\n\n\t\tthis.doTryClaimWindow(options);\n\n\t\tif (options && !this.stateApplied) {\n\t\t\tthis.stateApplied = true;\n\n\t\t\tthis.applyState({\n\t\t\t\tx: options.x,\n\t\t\t\ty: options.y,\n\t\t\t\twidth: options.width,\n\t\t\t\theight: options.height,\n\t\t\t\t// TODO@bpasero We currently do not support restoring fullscreen state for\n\t\t\t\t// auxiliary windows because we do not get hold of the original `features`\n\t\t\t\t// string that contains that info in `window-fullscreen`. However, we can\n\t\t\t\t// probe the `options.show` value for whether the window should be maximized\n\t\t\t\t// or not because we never show maximized windows initially to reduce flicker.\n\t\t\t\tmode:\n\t\t\t\t\toptions.show === false\n\t\t\t\t\t\t? WindowMode.Maximized\n\t\t\t\t\t\t: WindowMode.Normal,\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate doTryClaimWindow(options?: BrowserWindowConstructorOptions): void {\n\t\tif (this._win) {\n\t\t\treturn; // already claimed\n\t\t}\n\n\t\tconst window = BrowserWindow.fromWebContents(this.webContents);\n\t\tif (window) {\n\t\t\tthis.logService.trace(\n\t\t\t\t\"[aux window] Claimed browser window instance\",\n\t\t\t);\n\n\t\t\t// Remember\n\t\t\tthis.setWin(window, options);\n\n\t\t\t// Disable Menu\n\t\t\twindow.setMenu(null);\n\t\t\tif (\n\t\t\t\t(isWindows || isLinux) &&\n\t\t\t\thasNativeTitlebar(\n\t\t\t\t\tthis.configurationService,\n\t\t\t\t\toptions?.titleBarStyle === \"hidden\"\n\t\t\t\t\t\t? TitlebarStyle.CUSTOM\n\t\t\t\t\t\t: undefined /* unknown */,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\twindow.setAutoHideMenuBar(true); // Fix for https://github.com/microsoft/vscode/issues/200615\n\t\t\t}\n\n\t\t\t// Lifecycle\n\t\t\tthis.lifecycleMainService.registerAuxWindow(this);\n\t\t}\n\t}\n\n\tmatches(webContents: WebContents): boolean {\n\t\treturn this.webContents.id === webContents.id;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA;AAAA,EACC;AAAA,OAGM;AACP,SAAS,SAAS,iBAAiB;AACnC,SAAS,6BAA6B;AACtC,SAAS,+BAA+B;AACxC,SAAS,6BAA6B;AACtC,SAAS,mBAAmB;AAC5B,SAAS,qBAAqB;AAC9B;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP;AAAA,EAEC;AAAA,OACM;AACP,SAAS,kBAAkB;AAMpB,IAAM,kBAAN,cAA8B,WAAuC;AAAA,EAc3E,YACkB,aAEjB,wBACa,YACU,sBACR,cAEE,sBAChB;AACD;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAdiB;AAOA;AAUjB,SAAK,eAAe;AAAA,EACrB;AAAA,EA/DD,OA8B4E;AAAA;AAAA;AAAA,EAClE,KAAK,KAAK,YAAY;AAAA,EAC/B,WAAW;AAAA,EAEX,IAAa,MAAM;AAClB,QAAI,CAAC,MAAM,KAAK;AACf,WAAK,eAAe;AAAA,IACrB;AAEA,WAAO,MAAM;AAAA,EACd;AAAA,EAEQ,eAAe;AAAA,EAuBvB,eAAe,SAAiD;AAC/D,QAAI,KAAK,OAAO,cAAc,KAAK,YAAY,YAAY,GAAG;AAC7D;AAAA,IACD;AAEA,SAAK,iBAAiB,OAAO;AAE7B,QAAI,WAAW,CAAC,KAAK,cAAc;AAClC,WAAK,eAAe;AAEpB,WAAK,WAAW;AAAA,QACf,GAAG,QAAQ;AAAA,QACX,GAAG,QAAQ;AAAA,QACX,OAAO,QAAQ;AAAA,QACf,QAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMhB,MACC,QAAQ,SAAS,QACd,WAAW,YACX,WAAW;AAAA,MAChB,CAAC;AAAA,IACF;AAAA,EACD;AAAA,EAEQ,iBAAiB,SAAiD;AACzE,QAAI,KAAK,MAAM;AACd;AAAA,IACD;AAEA,UAAM,SAAS,cAAc,gBAAgB,KAAK,WAAW;AAC7D,QAAI,QAAQ;AACX,WAAK,WAAW;AAAA,QACf;AAAA,MACD;AAGA,WAAK,OAAO,QAAQ,OAAO;AAG3B,aAAO,QAAQ,IAAI;AACnB,WACE,aAAa,YACd;AAAA,QACC,KAAK;AAAA,QACL,SAAS,kBAAkB,WACxB,cAAc,SACd;AAAA,MACJ,GACC;AACD,eAAO,mBAAmB,IAAI;AAAA,MAC/B;AAGA,WAAK,qBAAqB,kBAAkB,IAAI;AAAA,IACjD;AAAA,EACD;AAAA,EAEA,QAAQ,aAAmC;AAC1C,WAAO,KAAK,YAAY,OAAO,YAAY;AAAA,EAC5C;AACD;AAnGa,kBAAN;AAAA,EAgBJ;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GArBU;",
  "names": []
}
