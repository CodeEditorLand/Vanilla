var v=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var l=(i,t,e,r)=>{for(var o=r>1?void 0:r?d(t,e):t,n=i.length-1,a;n>=0;n--)(a=i[n])&&(o=(r?a(t,e,o):a(o))||o);return r&&o&&v(t,e,o),o},g=(i,t)=>(e,r)=>t(e,r,i);import{Disposable as m}from"../../../base/common/lifecycle.js";import{Event as h}from"../../../base/common/event.js";import{localize as _}from"../../../nls.js";import{ILoggerService as c,LogLevel as f}from"../../log/common/log.js";import"./terminal.js";import{IWorkspaceContextService as p}from"../../workspace/common/workspace.js";import{IEnvironmentService as L}from"../../environment/common/environment.js";import{joinPath as u}from"../../../base/common/resources.js";let s=class extends m{constructor(e,r,o){super();this._loggerService=e;this._logger=this._loggerService.createLogger(u(o.logsHome,"terminal.log"),{id:"terminal",name:_("terminalLoggerName","Terminal")}),this._register(h.runAndSubscribe(r.onDidChangeWorkspaceFolders,()=>{this._workspaceId=r.getWorkspace().id.substring(0,7)}))}_logger;_workspaceId;get onDidChangeLogLevel(){return this._logger.onDidChangeLogLevel}getLevel(){return this._logger.getLevel()}setLevel(e){this._logger.setLevel(e)}flush(){this._logger.flush()}trace(e,...r){this._logger.trace(this._formatMessage(e),r)}debug(e,...r){this._logger.debug(this._formatMessage(e),r)}info(e,...r){this._logger.info(this._formatMessage(e),r)}warn(e,...r){this._logger.warn(this._formatMessage(e),r)}error(e,...r){if(e instanceof Error){this._logger.error(this._formatMessage(""),e,r);return}this._logger.error(this._formatMessage(e),r)}_formatMessage(e){return this._logger.getLevel()===f.Trace?`[${this._workspaceId}] ${e}`:e}};s=l([g(0,c),g(1,p),g(2,L)],s);export{s as TerminalLogService};
