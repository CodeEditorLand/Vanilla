var v=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var l=(i,t,e,r)=>{for(var o=r>1?void 0:r?m(t,e):t,n=i.length-1,a;n>=0;n--)(a=i[n])&&(o=(r?a(t,e,o):a(o))||o);return r&&o&&v(t,e,o),o},g=(i,t)=>(e,r)=>t(e,r,i);import{Event as d}from"../../../base/common/event.js";import{Disposable as h}from"../../../base/common/lifecycle.js";import{joinPath as _}from"../../../base/common/resources.js";import{localize as c}from"../../../nls.js";import{IEnvironmentService as f}from"../../environment/common/environment.js";import{ILoggerService as p,LogLevel as L}from"../../log/common/log.js";import{IWorkspaceContextService as u}from"../../workspace/common/workspace.js";let s=class extends h{constructor(e,r,o){super();this._loggerService=e;this._logger=this._loggerService.createLogger(_(o.logsHome,"terminal.log"),{id:"terminal",name:c("terminalLoggerName","Terminal")}),this._register(d.runAndSubscribe(r.onDidChangeWorkspaceFolders,()=>{this._workspaceId=r.getWorkspace().id.substring(0,7)}))}_logger;_workspaceId;get onDidChangeLogLevel(){return this._logger.onDidChangeLogLevel}getLevel(){return this._logger.getLevel()}setLevel(e){this._logger.setLevel(e)}flush(){this._logger.flush()}trace(e,...r){this._logger.trace(this._formatMessage(e),r)}debug(e,...r){this._logger.debug(this._formatMessage(e),r)}info(e,...r){this._logger.info(this._formatMessage(e),r)}warn(e,...r){this._logger.warn(this._formatMessage(e),r)}error(e,...r){if(e instanceof Error){this._logger.error(this._formatMessage(""),e,r);return}this._logger.error(this._formatMessage(e),r)}_formatMessage(e){return this._logger.getLevel()===L.Trace?`[${this._workspaceId}] ${e}`:e}};s=l([g(0,p),g(1,u),g(2,f)],s);export{s as TerminalLogService};
