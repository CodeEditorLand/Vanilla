{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/terminal/common/capabilities/terminalCapabilityStore.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from \"../../../../base/common/event.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport type {\n\tITerminalCapabilityImplMap,\n\tITerminalCapabilityStore,\n\tTerminalCapability,\n\tTerminalCapabilityChangeEvent,\n} from \"./capabilities.js\";\n\nexport class TerminalCapabilityStore\n\textends Disposable\n\timplements ITerminalCapabilityStore\n{\n\tprivate _map: Map<TerminalCapability, { type: TerminalCapability }> =\n\t\tnew Map();\n\n\tprivate readonly _onDidRemoveCapabilityType = this._register(\n\t\tnew Emitter<TerminalCapability>(),\n\t);\n\treadonly onDidRemoveCapabilityType = this._onDidRemoveCapabilityType.event;\n\tprivate readonly _onDidAddCapabilityType = this._register(\n\t\tnew Emitter<TerminalCapability>(),\n\t);\n\treadonly onDidAddCapabilityType = this._onDidAddCapabilityType.event;\n\n\tprivate readonly _onDidRemoveCapability = this._register(\n\t\tnew Emitter<TerminalCapabilityChangeEvent<any>>(),\n\t);\n\treadonly onDidRemoveCapability = this._onDidRemoveCapability.event;\n\tprivate readonly _onDidAddCapability = this._register(\n\t\tnew Emitter<TerminalCapabilityChangeEvent<any>>(),\n\t);\n\treadonly onDidAddCapability = this._onDidAddCapability.event;\n\n\tget items(): IterableIterator<TerminalCapability> {\n\t\treturn this._map.keys();\n\t}\n\n\tadd<T extends TerminalCapability>(\n\t\tcapability: T,\n\t\timpl: ITerminalCapabilityImplMap[T],\n\t) {\n\t\tthis._map.set(capability, impl);\n\t\tthis._onDidAddCapabilityType.fire(capability);\n\t\tthis._onDidAddCapability.fire({ id: capability, capability: impl });\n\t}\n\n\tget<T extends TerminalCapability>(\n\t\tcapability: T,\n\t): ITerminalCapabilityImplMap[T] | undefined {\n\t\t// HACK: This isn't totally safe since the Map key and value are not connected\n\t\treturn this._map.get(capability) as\n\t\t\t| ITerminalCapabilityImplMap[T]\n\t\t\t| undefined;\n\t}\n\n\tremove(capability: TerminalCapability) {\n\t\tconst impl = this._map.get(capability);\n\t\tif (!impl) {\n\t\t\treturn;\n\t\t}\n\t\tthis._map.delete(capability);\n\t\tthis._onDidRemoveCapabilityType.fire(capability);\n\t\tthis._onDidAddCapability.fire({ id: capability, capability: impl });\n\t}\n\n\thas(capability: TerminalCapability) {\n\t\treturn this._map.has(capability);\n\t}\n}\n\nexport class TerminalCapabilityStoreMultiplexer\n\textends Disposable\n\timplements ITerminalCapabilityStore\n{\n\treadonly _stores: ITerminalCapabilityStore[] = [];\n\n\tprivate readonly _onDidRemoveCapabilityType = this._register(\n\t\tnew Emitter<TerminalCapability>(),\n\t);\n\treadonly onDidRemoveCapabilityType = this._onDidRemoveCapabilityType.event;\n\tprivate readonly _onDidAddCapabilityType = this._register(\n\t\tnew Emitter<TerminalCapability>(),\n\t);\n\treadonly onDidAddCapabilityType = this._onDidAddCapabilityType.event;\n\n\tprivate readonly _onDidRemoveCapability = this._register(\n\t\tnew Emitter<TerminalCapabilityChangeEvent<any>>(),\n\t);\n\treadonly onDidRemoveCapability = this._onDidRemoveCapability.event;\n\tprivate readonly _onDidAddCapability = this._register(\n\t\tnew Emitter<TerminalCapabilityChangeEvent<any>>(),\n\t);\n\treadonly onDidAddCapability = this._onDidAddCapability.event;\n\n\tget items(): IterableIterator<TerminalCapability> {\n\t\treturn this._items();\n\t}\n\n\tprivate *_items(): IterableIterator<TerminalCapability> {\n\t\tfor (const store of this._stores) {\n\t\t\tfor (const c of store.items) {\n\t\t\t\tyield c;\n\t\t\t}\n\t\t}\n\t}\n\n\thas(capability: TerminalCapability): boolean {\n\t\tfor (const store of this._stores) {\n\t\t\tfor (const c of store.items) {\n\t\t\t\tif (c === capability) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tget<T extends TerminalCapability>(\n\t\tcapability: T,\n\t): ITerminalCapabilityImplMap[T] | undefined {\n\t\tfor (const store of this._stores) {\n\t\t\tconst c = store.get(capability);\n\t\t\tif (c) {\n\t\t\t\treturn c;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tadd(store: ITerminalCapabilityStore) {\n\t\tthis._stores.push(store);\n\t\tfor (const capability of store.items) {\n\t\t\tthis._onDidAddCapabilityType.fire(capability);\n\t\t\tthis._onDidAddCapability.fire({\n\t\t\t\tid: capability,\n\t\t\t\tcapability: store.get(capability)!,\n\t\t\t});\n\t\t}\n\t\tthis._register(\n\t\t\tstore.onDidAddCapabilityType((e) =>\n\t\t\t\tthis._onDidAddCapabilityType.fire(e),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tstore.onDidAddCapability((e) => this._onDidAddCapability.fire(e)),\n\t\t);\n\t\tthis._register(\n\t\t\tstore.onDidRemoveCapabilityType((e) =>\n\t\t\t\tthis._onDidRemoveCapabilityType.fire(e),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tstore.onDidRemoveCapability((e) =>\n\t\t\t\tthis._onDidRemoveCapability.fire(e),\n\t\t\t),\n\t\t);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
