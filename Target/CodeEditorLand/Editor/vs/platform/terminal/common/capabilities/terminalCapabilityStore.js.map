{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/terminal/common/capabilities/terminalCapabilityStore.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ITerminalCapabilityImplMap, ITerminalCapabilityStore, TerminalCapability, TerminalCapabilityChangeEvent } from './capabilities.js';\n\nexport class TerminalCapabilityStore extends Disposable implements ITerminalCapabilityStore {\n\tprivate _map: Map<TerminalCapability, { type: TerminalCapability }> = new Map();\n\n\tprivate readonly _onDidRemoveCapabilityType = this._register(new Emitter<TerminalCapability>());\n\treadonly onDidRemoveCapabilityType = this._onDidRemoveCapabilityType.event;\n\tprivate readonly _onDidAddCapabilityType = this._register(new Emitter<TerminalCapability>());\n\treadonly onDidAddCapabilityType = this._onDidAddCapabilityType.event;\n\n\tprivate readonly _onDidRemoveCapability = this._register(new Emitter<TerminalCapabilityChangeEvent<any>>());\n\treadonly onDidRemoveCapability = this._onDidRemoveCapability.event;\n\tprivate readonly _onDidAddCapability = this._register(new Emitter<TerminalCapabilityChangeEvent<any>>());\n\treadonly onDidAddCapability = this._onDidAddCapability.event;\n\n\tget items(): IterableIterator<TerminalCapability> {\n\t\treturn this._map.keys();\n\t}\n\n\tadd<T extends TerminalCapability>(capability: T, impl: ITerminalCapabilityImplMap[T]) {\n\t\tthis._map.set(capability, impl);\n\t\tthis._onDidAddCapabilityType.fire(capability);\n\t\tthis._onDidAddCapability.fire({ id: capability, capability: impl });\n\t}\n\n\tget<T extends TerminalCapability>(capability: T): ITerminalCapabilityImplMap[T] | undefined {\n\t\t// HACK: This isn't totally safe since the Map key and value are not connected\n\t\treturn this._map.get(capability) as ITerminalCapabilityImplMap[T] | undefined;\n\t}\n\n\tremove(capability: TerminalCapability) {\n\t\tconst impl = this._map.get(capability);\n\t\tif (!impl) {\n\t\t\treturn;\n\t\t}\n\t\tthis._map.delete(capability);\n\t\tthis._onDidRemoveCapabilityType.fire(capability);\n\t\tthis._onDidAddCapability.fire({ id: capability, capability: impl });\n\t}\n\n\thas(capability: TerminalCapability) {\n\t\treturn this._map.has(capability);\n\t}\n}\n\nexport class TerminalCapabilityStoreMultiplexer extends Disposable implements ITerminalCapabilityStore {\n\treadonly _stores: ITerminalCapabilityStore[] = [];\n\n\tprivate readonly _onDidRemoveCapabilityType = this._register(new Emitter<TerminalCapability>());\n\treadonly onDidRemoveCapabilityType = this._onDidRemoveCapabilityType.event;\n\tprivate readonly _onDidAddCapabilityType = this._register(new Emitter<TerminalCapability>());\n\treadonly onDidAddCapabilityType = this._onDidAddCapabilityType.event;\n\n\tprivate readonly _onDidRemoveCapability = this._register(new Emitter<TerminalCapabilityChangeEvent<any>>());\n\treadonly onDidRemoveCapability = this._onDidRemoveCapability.event;\n\tprivate readonly _onDidAddCapability = this._register(new Emitter<TerminalCapabilityChangeEvent<any>>());\n\treadonly onDidAddCapability = this._onDidAddCapability.event;\n\n\tget items(): IterableIterator<TerminalCapability> {\n\t\treturn this._items();\n\t}\n\n\tprivate *_items(): IterableIterator<TerminalCapability> {\n\t\tfor (const store of this._stores) {\n\t\t\tfor (const c of store.items) {\n\t\t\t\tyield c;\n\t\t\t}\n\t\t}\n\t}\n\n\thas(capability: TerminalCapability): boolean {\n\t\tfor (const store of this._stores) {\n\t\t\tfor (const c of store.items) {\n\t\t\t\tif (c === capability) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tget<T extends TerminalCapability>(capability: T): ITerminalCapabilityImplMap[T] | undefined {\n\t\tfor (const store of this._stores) {\n\t\t\tconst c = store.get(capability);\n\t\t\tif (c) {\n\t\t\t\treturn c;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tadd(store: ITerminalCapabilityStore) {\n\t\tthis._stores.push(store);\n\t\tfor (const capability of store.items) {\n\t\t\tthis._onDidAddCapabilityType.fire(capability);\n\t\t\tthis._onDidAddCapability.fire({ id: capability, capability: store.get(capability)! });\n\t\t}\n\t\tthis._register(store.onDidAddCapabilityType(e => this._onDidAddCapabilityType.fire(e)));\n\t\tthis._register(store.onDidAddCapability(e => this._onDidAddCapability.fire(e)));\n\t\tthis._register(store.onDidRemoveCapabilityType(e => this._onDidRemoveCapabilityType.fire(e)));\n\t\tthis._register(store.onDidRemoveCapability(e => this._onDidRemoveCapability.fire(e)));\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
