import{timeout as p}from"../../../base/common/async.js";import{Disposable as a}from"../../../base/common/lifecycle.js";import{isWindows as l}from"../../../base/common/platform.js";class f extends a{_pointer=0;_paused=!1;_throttled=!1;constructor(s,t,r,n){super(),this._register(s.onProcessData(e=>{if(this._paused||this._throttled)return;const o=typeof e=="string"?e:e.data;for(let i=0;i<o.length;i++)o[i]===t[this._pointer]?this._pointer++:this._reset(),this._pointer===t.length&&(n.debug(`Auto reply match: "${t}", response: "${r}"`),s.input(r),this._throttled=!0,p(1e3).then(()=>this._throttled=!1),this._reset())}))}_reset(){this._pointer=0}handleResize(){l&&(this._paused=!0)}handleInput(){this._paused=!1}}export{f as TerminalAutoResponder};
