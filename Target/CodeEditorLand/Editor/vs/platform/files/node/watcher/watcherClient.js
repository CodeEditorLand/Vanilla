import{FileAccess as i}from"../../../../base/common/network.js";import{getNextTickChannel as o,ProxyChannel as s}from"../../../../base/parts/ipc/common/ipc.js";import{Client as n}from"../../../../base/parts/ipc/node/ipc.cp.js";import{AbstractUniversalWatcherClient as c}from"../../common/watcher.js";class W extends c{constructor(e,r,t){super(e,r,t),this.init()}createWatcher(e){const r=e.add(new n(i.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_AMD_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return e.add(r.onDidProcessExit(({code:t,signal:a})=>this.onError(`terminated by itself with code ${t}, signal: ${a} (ETERM)`))),s.toService(o(r.getChannel("watcher")))}}export{W as UniversalWatcherClient};
