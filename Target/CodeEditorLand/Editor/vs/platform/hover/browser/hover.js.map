{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/hover/browser/hover.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\taddStandardDisposableListener,\n\tisHTMLElement,\n} from \"../../../base/browser/dom.js\";\nimport type {\n\tIHoverDelegate2,\n\tIHoverOptions,\n\tIHoverWidget,\n} from \"../../../base/browser/ui/hover/hover.js\";\nimport type {\n\tIHoverDelegate,\n\tIHoverDelegateOptions,\n} from \"../../../base/browser/ui/hover/hoverDelegate.js\";\nimport { KeyCode } from \"../../../base/common/keyCodes.js\";\nimport { Disposable, DisposableStore } from \"../../../base/common/lifecycle.js\";\nimport { IConfigurationService } from \"../../configuration/common/configuration.js\";\nimport { createDecorator } from \"../../instantiation/common/instantiation.js\";\n\nexport const IHoverService = createDecorator<IHoverService>(\"hoverService\");\n\nexport interface IHoverService extends IHoverDelegate2 {\n\treadonly _serviceBrand: undefined;\n}\n\nexport class WorkbenchHoverDelegate\n\textends Disposable\n\timplements IHoverDelegate\n{\n\tprivate lastHoverHideTime = 0;\n\tprivate timeLimit = 200;\n\n\tprivate _delay: number;\n\tget delay(): number {\n\t\tif (this.isInstantlyHovering()) {\n\t\t\treturn 0; // show instantly when a hover was recently shown\n\t\t}\n\t\treturn this._delay;\n\t}\n\n\tprivate readonly hoverDisposables = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tpublic readonly placement: 'mouse' | 'element',\n\t\tprivate readonly instantHover: boolean,\n\t\tprivate overrideOptions: Partial<IHoverOptions> | ((options: IHoverDelegateOptions, focus?: boolean) => Partial<IHoverOptions>) = {},\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t) {\n\t\tsuper();\n\n\t\tthis._delay = this.configurationService.getValue<number>('workbench.hover.delay');\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('workbench.hover.delay')) {\n\t\t\t\tthis._delay = this.configurationService.getValue<number>('workbench.hover.delay');\n\t\t\t}\n\t\t}));\n\t}\n\n\tshowHover(\n\t\toptions: IHoverDelegateOptions,\n\t\tfocus?: boolean,\n\t): IHoverWidget | undefined {\n\t\tconst overrideOptions =\n\t\t\ttypeof this.overrideOptions === \"function\"\n\t\t\t\t? this.overrideOptions(options, focus)\n\t\t\t\t: this.overrideOptions;\n\n\t\t// close hover on escape\n\t\tthis.hoverDisposables.clear();\n\t\tconst targets = isHTMLElement(options.target)\n\t\t\t? [options.target]\n\t\t\t: options.target.targetElements;\n\t\tfor (const target of targets) {\n\t\t\tthis.hoverDisposables.add(\n\t\t\t\taddStandardDisposableListener(target, \"keydown\", (e) => {\n\t\t\t\t\tif (e.equals(KeyCode.Escape)) {\n\t\t\t\t\t\tthis.hoverService.hideHover();\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tconst id = isHTMLElement(options.content)\n\t\t\t? undefined\n\t\t\t: options.content.toString();\n\n\t\treturn this.hoverService.showHover(\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t\t...overrideOptions,\n\t\t\t\tpersistence: {\n\t\t\t\t\thideOnKeyDown: true,\n\t\t\t\t\t...overrideOptions.persistence,\n\t\t\t\t},\n\t\t\t\tid,\n\t\t\t\tappearance: {\n\t\t\t\t\t...options.appearance,\n\t\t\t\t\tcompact: true,\n\t\t\t\t\tskipFadeInAnimation: this.isInstantlyHovering(),\n\t\t\t\t\t...overrideOptions.appearance,\n\t\t\t\t},\n\t\t\t},\n\t\t\tfocus,\n\t\t);\n\t}\n\n\tprivate isInstantlyHovering(): boolean {\n\t\treturn (\n\t\t\tthis.instantHover &&\n\t\t\tDate.now() - this.lastHoverHideTime < this.timeLimit\n\t\t);\n\t}\n\n\tsetInstantHoverTimeLimit(timeLimit: number): void {\n\t\tif (!this.instantHover) {\n\t\t\tthrow new Error(\"Instant hover is not enabled\");\n\t\t}\n\t\tthis.timeLimit = timeLimit;\n\t}\n\n\tonDidHideHover(): void {\n\t\tthis.hoverDisposables.clear();\n\t\tif (this.instantHover) {\n\t\t\tthis.lastHoverHideTime = Date.now();\n\t\t}\n\t}\n}\n\n// TODO@benibenj remove this, only temp fix for contextviews\nexport const nativeHoverDelegate: IHoverDelegate = {\n\tshowHover: (): IHoverWidget | undefined => {\n\t\tthrow new Error(\"Native hover function not implemented.\");\n\t},\n\tdelay: 0,\n\tshowNativeHover: true,\n};\n"],
  "mappings": ";;;;;;;;;;;;AAKA;AAAA,EACC;AAAA,EACA;AAAA,OACM;AAUP,SAAS,eAAe;AACxB,SAAS,YAAY,uBAAuB;AAC5C,SAAS,6BAA6B;AACtC,SAAS,uBAAuB;AAEzB,MAAM,gBAAgB,gBAA+B,cAAc;AAMnE,IAAM,yBAAN,cACE,WAET;AAAA,EAcC,YACiB,WACC,cACT,kBAA0H,CAAC,GAC3F,sBACR,cAC/B;AACD,UAAM;AANU;AACC;AACT;AACgC;AACR;AAIhC,SAAK,SAAS,KAAK,qBAAqB,SAAiB,uBAAuB;AAChF,SAAK,UAAU,KAAK,qBAAqB,yBAAyB,OAAK;AACtE,UAAI,EAAE,qBAAqB,uBAAuB,GAAG;AACpD,aAAK,SAAS,KAAK,qBAAqB,SAAiB,uBAAuB;AAAA,MACjF;AAAA,IACD,CAAC,CAAC;AAAA,EACH;AAAA,EA7DD,OAgCA;AAAA;AAAA;AAAA,EACS,oBAAoB;AAAA,EACpB,YAAY;AAAA,EAEZ;AAAA,EACR,IAAI,QAAgB;AACnB,QAAI,KAAK,oBAAoB,GAAG;AAC/B,aAAO;AAAA,IACR;AACA,WAAO,KAAK;AAAA,EACb;AAAA,EAEiB,mBAAmB,KAAK,UAAU,IAAI,gBAAgB,CAAC;AAAA,EAmBxE,UACC,SACA,OAC2B;AAC3B,UAAM,kBACL,OAAO,KAAK,oBAAoB,aAC7B,KAAK,gBAAgB,SAAS,KAAK,IACnC,KAAK;AAGT,SAAK,iBAAiB,MAAM;AAC5B,UAAM,UAAU,cAAc,QAAQ,MAAM,IACzC,CAAC,QAAQ,MAAM,IACf,QAAQ,OAAO;AAClB,eAAW,UAAU,SAAS;AAC7B,WAAK,iBAAiB;AAAA,QACrB,8BAA8B,QAAQ,WAAW,CAAC,MAAM;AACvD,cAAI,EAAE,OAAO,QAAQ,MAAM,GAAG;AAC7B,iBAAK,aAAa,UAAU;AAAA,UAC7B;AAAA,QACD,CAAC;AAAA,MACF;AAAA,IACD;AAEA,UAAM,KAAK,cAAc,QAAQ,OAAO,IACrC,SACA,QAAQ,QAAQ,SAAS;AAE5B,WAAO,KAAK,aAAa;AAAA,MACxB;AAAA,QACC,GAAG;AAAA,QACH,GAAG;AAAA,QACH,aAAa;AAAA,UACZ,eAAe;AAAA,UACf,GAAG,gBAAgB;AAAA,QACpB;AAAA,QACA;AAAA,QACA,YAAY;AAAA,UACX,GAAG,QAAQ;AAAA,UACX,SAAS;AAAA,UACT,qBAAqB,KAAK,oBAAoB;AAAA,UAC9C,GAAG,gBAAgB;AAAA,QACpB;AAAA,MACD;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAAA,EAEQ,sBAA+B;AACtC,WACC,KAAK,gBACL,KAAK,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAAA,EAE7C;AAAA,EAEA,yBAAyB,WAAyB;AACjD,QAAI,CAAC,KAAK,cAAc;AACvB,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAC/C;AACA,SAAK,YAAY;AAAA,EAClB;AAAA,EAEA,iBAAuB;AACtB,SAAK,iBAAiB,MAAM;AAC5B,QAAI,KAAK,cAAc;AACtB,WAAK,oBAAoB,KAAK,IAAI;AAAA,IACnC;AAAA,EACD;AACD;AAtGa,yBAAN;AAAA,EAqBJ;AAAA,EACA;AAAA,GAtBU;AAyGN,MAAM,sBAAsC;AAAA,EAClD,WAAW,6BAAgC;AAC1C,UAAM,IAAI,MAAM,wCAAwC;AAAA,EACzD,GAFW;AAAA,EAGX,OAAO;AAAA,EACP,iBAAiB;AAClB;",
  "names": []
}
