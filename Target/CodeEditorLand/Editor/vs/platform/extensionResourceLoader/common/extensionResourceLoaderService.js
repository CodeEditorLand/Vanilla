var u=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var m=(s,i,e,t)=>{for(var r=t>1?void 0:t?S(i,e):i,o=s.length-1,a;o>=0;o--)(a=s[o])&&(r=(t?a(i,e,r):a(r))||r);return t&&r&&u(i,e,r),r},n=(s,i)=>(e,t)=>i(e,t,s);import{CancellationToken as l}from"../../../base/common/cancellation.js";import{IConfigurationService as v}from"../../configuration/common/configuration.js";import{IEnvironmentService as I}from"../../environment/common/environment.js";import{IFileService as p}from"../../files/common/files.js";import{InstantiationType as f,registerSingleton as g}from"../../instantiation/common/extensions.js";import{IProductService as d}from"../../product/common/productService.js";import{IRequestService as q,asTextOrError as y}from"../../request/common/request.js";import{IStorageService as x}from"../../storage/common/storage.js";import{AbstractExtensionResourceLoaderService as R,IExtensionResourceLoaderService as h}from"./extensionResourceLoader.js";let c=class extends R{constructor(e,t,r,o,a,E){super(e,t,r,o,a);this._requestService=E}async readExtensionResource(e){if(this.isExtensionGalleryResource(e)){const r=await this.getExtensionGalleryRequestHeaders(),o=await this._requestService.request({url:e.toString(),headers:r},l.None);return await y(o)||""}return(await this._fileService.readFile(e)).value.toString()}};c=m([n(0,p),n(1,x),n(2,d),n(3,I),n(4,v),n(5,q)],c),g(h,c,f.Delayed);export{c as ExtensionResourceLoaderService};
