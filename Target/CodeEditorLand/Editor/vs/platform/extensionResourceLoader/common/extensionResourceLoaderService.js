var S=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var m=(s,i,e,t)=>{for(var r=t>1?void 0:t?l(i,e):i,o=s.length-1,a;o>=0;o--)(a=s[o])&&(r=(t?a(i,e,r):a(r))||r);return t&&r&&S(i,e,r),r},n=(s,i)=>(e,t)=>i(e,t,s);import{InstantiationType as u,registerSingleton as v}from"../../instantiation/common/extensions.js";import{IFileService as I}from"../../files/common/files.js";import{IProductService as f}from"../../product/common/productService.js";import{asTextOrError as p,IRequestService as g}from"../../request/common/request.js";import{IStorageService as d}from"../../storage/common/storage.js";import{IEnvironmentService as q}from"../../environment/common/environment.js";import{IConfigurationService as x}from"../../configuration/common/configuration.js";import{CancellationToken as y}from"../../../base/common/cancellation.js";import{AbstractExtensionResourceLoaderService as R,IExtensionResourceLoaderService as h}from"./extensionResourceLoader.js";let c=class extends R{constructor(e,t,r,o,a,E){super(e,t,r,o,a);this._requestService=E}async readExtensionResource(e){if(this.isExtensionGalleryResource(e)){const r=await this.getExtensionGalleryRequestHeaders(),o=await this._requestService.request({url:e.toString(),headers:r},y.None);return await p(o)||""}return(await this._fileService.readFile(e)).value.toString()}};c=m([n(0,I),n(1,d),n(2,f),n(3,q),n(4,x),n(5,g)],c),v(h,c,u.Delayed);export{c as ExtensionResourceLoaderService};
