var S=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var m=(s,i,e,t)=>{for(var r=t>1?void 0:t?l(i,e):i,o=s.length-1,a;o>=0;o--)(a=s[o])&&(r=(t?a(i,e,r):a(r))||r);return t&&r&&S(i,e,r),r},n=(s,i)=>(e,t)=>i(e,t,s);import{CancellationToken as u}from"../../../../vs/base/common/cancellation.js";import"../../../../vs/base/common/uri.js";import{IConfigurationService as v}from"../../../../vs/platform/configuration/common/configuration.js";import{IEnvironmentService as I}from"../../../../vs/platform/environment/common/environment.js";import{AbstractExtensionResourceLoaderService as f,IExtensionResourceLoaderService as p}from"../../../../vs/platform/extensionResourceLoader/common/extensionResourceLoader.js";import{IFileService as g}from"../../../../vs/platform/files/common/files.js";import{InstantiationType as d,registerSingleton as q}from"../../../../vs/platform/instantiation/common/extensions.js";import{IProductService as x}from"../../../../vs/platform/product/common/productService.js";import{asTextOrError as y,IRequestService as R}from"../../../../vs/platform/request/common/request.js";import{IStorageService as h}from"../../../../vs/platform/storage/common/storage.js";let c=class extends f{constructor(e,t,r,o,a,E){super(e,t,r,o,a);this._requestService=E}async readExtensionResource(e){if(this.isExtensionGalleryResource(e)){const r=await this.getExtensionGalleryRequestHeaders(),o=await this._requestService.request({url:e.toString(),headers:r},u.None);return await y(o)||""}return(await this._fileService.readFile(e)).value.toString()}};c=m([n(0,g),n(1,h),n(2,x),n(3,I),n(4,v),n(5,R)],c),q(p,c,d.Delayed);export{c as ExtensionResourceLoaderService};
