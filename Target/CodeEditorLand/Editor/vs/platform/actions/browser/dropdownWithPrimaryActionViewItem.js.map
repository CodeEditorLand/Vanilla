{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/actions/browser/dropdownWithPrimaryActionViewItem.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from \"../../../base/browser/dom.js\";\nimport { StandardKeyboardEvent } from \"../../../base/browser/keyboardEvent.js\";\nimport {\n\ttype ActionViewItem,\n\tBaseActionViewItem,\n} from \"../../../base/browser/ui/actionbar/actionViewItems.js\";\nimport { DropdownMenuActionViewItem } from \"../../../base/browser/ui/dropdown/dropdownActionViewItem.js\";\nimport type { IHoverDelegate } from \"../../../base/browser/ui/hover/hoverDelegate.js\";\nimport type { IAction, IActionRunner } from \"../../../base/common/actions.js\";\nimport type { Event } from \"../../../base/common/event.js\";\nimport { KeyCode } from \"../../../base/common/keyCodes.js\";\nimport type { ResolvedKeybinding } from \"../../../base/common/keybindings.js\";\nimport { IAccessibilityService } from \"../../accessibility/common/accessibility.js\";\nimport { IContextKeyService } from \"../../contextkey/common/contextkey.js\";\nimport type { IContextMenuService } from \"../../contextview/browser/contextView.js\";\nimport { IKeybindingService } from \"../../keybinding/common/keybinding.js\";\nimport { INotificationService } from \"../../notification/common/notification.js\";\nimport { IThemeService } from \"../../theme/common/themeService.js\";\nimport type { MenuItemAction } from \"../common/actions.js\";\nimport { MenuEntryActionViewItem } from \"./menuEntryActionViewItem.js\";\n\nexport interface IDropdownWithPrimaryActionViewItemOptions {\n\tactionRunner?: IActionRunner;\n\tgetKeyBinding?: (action: IAction) => ResolvedKeybinding | undefined;\n\thoverDelegate?: IHoverDelegate;\n\tmenuAsChild?: boolean;\n}\n\nexport class DropdownWithPrimaryActionViewItem extends BaseActionViewItem {\n\tprivate _primaryAction: ActionViewItem;\n\tprivate _dropdown: DropdownMenuActionViewItem;\n\tprivate _container: HTMLElement | null = null;\n\tprivate _dropdownContainer: HTMLElement | null = null;\n\n\tget onDidChangeDropdownVisibility(): Event<boolean> {\n\t\treturn this._dropdown.onDidChangeVisibility;\n\t}\n\n\tconstructor(\n\t\tprimaryAction: MenuItemAction,\n\t\tdropdownAction: IAction,\n\t\tdropdownMenuActions: IAction[],\n\t\tclassName: string,\n\t\tprivate readonly _contextMenuProvider: IContextMenuService,\n\t\tprivate readonly _options:\n\t\t\t| IDropdownWithPrimaryActionViewItemOptions\n\t\t\t| undefined,\n\t\t@IKeybindingService _keybindingService: IKeybindingService,\n\t\t@INotificationService _notificationService: INotificationService,\n\t\t@IContextKeyService _contextKeyService: IContextKeyService,\n\t\t@IThemeService _themeService: IThemeService,\n\t\t@IAccessibilityService _accessibilityService: IAccessibilityService,\n\t) {\n\t\tsuper(null, primaryAction, { hoverDelegate: _options?.hoverDelegate });\n\t\tthis._primaryAction = new MenuEntryActionViewItem(\n\t\t\tprimaryAction,\n\t\t\t{ hoverDelegate: _options?.hoverDelegate },\n\t\t\t_keybindingService,\n\t\t\t_notificationService,\n\t\t\t_contextKeyService,\n\t\t\t_themeService,\n\t\t\t_contextMenuProvider,\n\t\t\t_accessibilityService,\n\t\t);\n\t\tif (_options?.actionRunner) {\n\t\t\tthis._primaryAction.actionRunner = _options.actionRunner;\n\t\t}\n\n\t\tthis._dropdown = new DropdownMenuActionViewItem(\n\t\t\tdropdownAction,\n\t\t\tdropdownMenuActions,\n\t\t\tthis._contextMenuProvider,\n\t\t\t{\n\t\t\t\tmenuAsChild: _options?.menuAsChild ?? true,\n\t\t\t\tclassNames: className\n\t\t\t\t\t? [\"codicon\", \"codicon-chevron-down\", className]\n\t\t\t\t\t: [\"codicon\", \"codicon-chevron-down\"],\n\t\t\t\tactionRunner: this._options?.actionRunner,\n\t\t\t\tkeybindingProvider: this._options?.getKeyBinding,\n\t\t\t\thoverDelegate: _options?.hoverDelegate,\n\t\t\t},\n\t\t);\n\t}\n\n\toverride setActionContext(newContext: unknown): void {\n\t\tsuper.setActionContext(newContext);\n\t\tthis._primaryAction.setActionContext(newContext);\n\t\tthis._dropdown.setActionContext(newContext);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tthis._container = container;\n\t\tsuper.render(this._container);\n\t\tthis._container.classList.add(\"monaco-dropdown-with-primary\");\n\t\tconst primaryContainer = DOM.$(\".action-container\");\n\t\tthis._primaryAction.render(\n\t\t\tDOM.append(this._container, primaryContainer),\n\t\t);\n\t\tthis._dropdownContainer = DOM.$(\".dropdown-action-container\");\n\t\tthis._dropdown.render(\n\t\t\tDOM.append(this._container, this._dropdownContainer),\n\t\t);\n\t\tthis._register(\n\t\t\tDOM.addDisposableListener(\n\t\t\t\tprimaryContainer,\n\t\t\t\tDOM.EventType.KEY_DOWN,\n\t\t\t\t(e: KeyboardEvent) => {\n\t\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\t\tif (event.equals(KeyCode.RightArrow)) {\n\t\t\t\t\t\tthis._primaryAction.element!.tabIndex = -1;\n\t\t\t\t\t\tthis._dropdown.focus();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tDOM.addDisposableListener(\n\t\t\t\tthis._dropdownContainer,\n\t\t\t\tDOM.EventType.KEY_DOWN,\n\t\t\t\t(e: KeyboardEvent) => {\n\t\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\t\tif (event.equals(KeyCode.LeftArrow)) {\n\t\t\t\t\t\tthis._primaryAction.element!.tabIndex = 0;\n\t\t\t\t\t\tthis._dropdown.setFocusable(false);\n\t\t\t\t\t\tthis._primaryAction.element?.focus();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis.updateEnabled();\n\t}\n\n\toverride focus(fromRight?: boolean): void {\n\t\tif (fromRight) {\n\t\t\tthis._dropdown.focus();\n\t\t} else {\n\t\t\tthis._primaryAction.element!.tabIndex = 0;\n\t\t\tthis._primaryAction.element!.focus();\n\t\t}\n\t}\n\n\toverride blur(): void {\n\t\tthis._primaryAction.element!.tabIndex = -1;\n\t\tthis._dropdown.blur();\n\t\tthis._container!.blur();\n\t}\n\n\toverride setFocusable(focusable: boolean): void {\n\t\tif (focusable) {\n\t\t\tthis._primaryAction.element!.tabIndex = 0;\n\t\t} else {\n\t\t\tthis._primaryAction.element!.tabIndex = -1;\n\t\t\tthis._dropdown.setFocusable(false);\n\t\t}\n\t}\n\n\tprotected override updateEnabled(): void {\n\t\tconst disabled = !this.action.enabled;\n\t\tthis.element?.classList.toggle(\"disabled\", disabled);\n\t}\n\n\tupdate(\n\t\tdropdownAction: IAction,\n\t\tdropdownMenuActions: IAction[],\n\t\tdropdownIcon?: string,\n\t): void {\n\t\tthis._dropdown.dispose();\n\t\tthis._dropdown = new DropdownMenuActionViewItem(\n\t\t\tdropdownAction,\n\t\t\tdropdownMenuActions,\n\t\t\tthis._contextMenuProvider,\n\t\t\t{\n\t\t\t\tmenuAsChild: true,\n\t\t\t\tclassNames: [\"codicon\", dropdownIcon || \"codicon-chevron-down\"],\n\t\t\t\tactionRunner: this._options?.actionRunner,\n\t\t\t\thoverDelegate: this._options?.hoverDelegate,\n\t\t\t\tkeybindingProvider: this._options?.getKeyBinding,\n\t\t\t},\n\t\t);\n\t\tif (this._dropdownContainer) {\n\t\t\tthis._dropdown.render(this._dropdownContainer);\n\t\t}\n\t}\n\n\toverride dispose() {\n\t\tthis._primaryAction.dispose();\n\t\tthis._dropdown.dispose();\n\t\tsuper.dispose();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
