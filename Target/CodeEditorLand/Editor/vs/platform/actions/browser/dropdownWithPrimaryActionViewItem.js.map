{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/actions/browser/dropdownWithPrimaryActionViewItem.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from '../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { DropdownMenuActionViewItem } from '../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { IAction, IActionRunner } from '../../../base/common/actions.js';\nimport { Event } from '../../../base/common/event.js';\nimport { KeyCode } from '../../../base/common/keyCodes.js';\nimport { ResolvedKeybinding } from '../../../base/common/keybindings.js';\nimport { MenuEntryActionViewItem } from './menuEntryActionViewItem.js';\nimport { MenuItemAction } from '../common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { IThemeService } from '../../theme/common/themeService.js';\nimport { IContextMenuService } from '../../contextview/browser/contextView.js';\nimport { IAccessibilityService } from '../../accessibility/common/accessibility.js';\nimport { IHoverDelegate } from '../../../base/browser/ui/hover/hoverDelegate.js';\n\nexport interface IDropdownWithPrimaryActionViewItemOptions {\n\tactionRunner?: IActionRunner;\n\tgetKeyBinding?: (action: IAction) => ResolvedKeybinding | undefined;\n\thoverDelegate?: IHoverDelegate;\n\tmenuAsChild?: boolean;\n}\n\nexport class DropdownWithPrimaryActionViewItem extends BaseActionViewItem {\n\tprivate _primaryAction: ActionViewItem;\n\tprivate _dropdown: DropdownMenuActionViewItem;\n\tprivate _container: HTMLElement | null = null;\n\tprivate _dropdownContainer: HTMLElement | null = null;\n\n\tget onDidChangeDropdownVisibility(): Event<boolean> {\n\t\treturn this._dropdown.onDidChangeVisibility;\n\t}\n\n\tconstructor(\n\t\tprimaryAction: MenuItemAction,\n\t\tdropdownAction: IAction,\n\t\tdropdownMenuActions: IAction[],\n\t\tclassName: string,\n\t\tprivate readonly _contextMenuProvider: IContextMenuService,\n\t\tprivate readonly _options: IDropdownWithPrimaryActionViewItemOptions | undefined,\n\t\t@IKeybindingService _keybindingService: IKeybindingService,\n\t\t@INotificationService _notificationService: INotificationService,\n\t\t@IContextKeyService _contextKeyService: IContextKeyService,\n\t\t@IThemeService _themeService: IThemeService,\n\t\t@IAccessibilityService _accessibilityService: IAccessibilityService\n\t) {\n\t\tsuper(null, primaryAction, { hoverDelegate: _options?.hoverDelegate });\n\t\tthis._primaryAction = new MenuEntryActionViewItem(primaryAction, { hoverDelegate: _options?.hoverDelegate }, _keybindingService, _notificationService, _contextKeyService, _themeService, _contextMenuProvider, _accessibilityService);\n\t\tif (_options?.actionRunner) {\n\t\t\tthis._primaryAction.actionRunner = _options.actionRunner;\n\t\t}\n\n\t\tthis._dropdown = new DropdownMenuActionViewItem(dropdownAction, dropdownMenuActions, this._contextMenuProvider, {\n\t\t\tmenuAsChild: _options?.menuAsChild ?? true,\n\t\t\tclassNames: className ? ['codicon', 'codicon-chevron-down', className] : ['codicon', 'codicon-chevron-down'],\n\t\t\tactionRunner: this._options?.actionRunner,\n\t\t\tkeybindingProvider: this._options?.getKeyBinding,\n\t\t\thoverDelegate: _options?.hoverDelegate\n\t\t});\n\t}\n\n\toverride setActionContext(newContext: unknown): void {\n\t\tsuper.setActionContext(newContext);\n\t\tthis._primaryAction.setActionContext(newContext);\n\t\tthis._dropdown.setActionContext(newContext);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tthis._container = container;\n\t\tsuper.render(this._container);\n\t\tthis._container.classList.add('monaco-dropdown-with-primary');\n\t\tconst primaryContainer = DOM.$('.action-container');\n\t\tthis._primaryAction.render(DOM.append(this._container, primaryContainer));\n\t\tthis._dropdownContainer = DOM.$('.dropdown-action-container');\n\t\tthis._dropdown.render(DOM.append(this._container, this._dropdownContainer));\n\t\tthis._register(DOM.addDisposableListener(primaryContainer, DOM.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.RightArrow)) {\n\t\t\t\tthis._primaryAction.element!.tabIndex = -1;\n\t\t\t\tthis._dropdown.focus();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t}));\n\t\tthis._register(DOM.addDisposableListener(this._dropdownContainer, DOM.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.LeftArrow)) {\n\t\t\t\tthis._primaryAction.element!.tabIndex = 0;\n\t\t\t\tthis._dropdown.setFocusable(false);\n\t\t\t\tthis._primaryAction.element?.focus();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t}));\n\n\t\tthis.updateEnabled();\n\t}\n\n\toverride focus(fromRight?: boolean): void {\n\t\tif (fromRight) {\n\t\t\tthis._dropdown.focus();\n\t\t} else {\n\t\t\tthis._primaryAction.element!.tabIndex = 0;\n\t\t\tthis._primaryAction.element!.focus();\n\t\t}\n\t}\n\n\toverride blur(): void {\n\t\tthis._primaryAction.element!.tabIndex = -1;\n\t\tthis._dropdown.blur();\n\t\tthis._container!.blur();\n\t}\n\n\toverride setFocusable(focusable: boolean): void {\n\t\tif (focusable) {\n\t\t\tthis._primaryAction.element!.tabIndex = 0;\n\t\t} else {\n\t\t\tthis._primaryAction.element!.tabIndex = -1;\n\t\t\tthis._dropdown.setFocusable(false);\n\t\t}\n\t}\n\n\tprotected override updateEnabled(): void {\n\t\tconst disabled = !this.action.enabled;\n\t\tthis.element?.classList.toggle('disabled', disabled);\n\t}\n\n\tupdate(dropdownAction: IAction, dropdownMenuActions: IAction[], dropdownIcon?: string): void {\n\t\tthis._dropdown.dispose();\n\t\tthis._dropdown = new DropdownMenuActionViewItem(dropdownAction, dropdownMenuActions, this._contextMenuProvider, {\n\t\t\tmenuAsChild: true,\n\t\t\tclassNames: ['codicon', dropdownIcon || 'codicon-chevron-down'],\n\t\t\tactionRunner: this._options?.actionRunner,\n\t\t\thoverDelegate: this._options?.hoverDelegate,\n\t\t\tkeybindingProvider: this._options?.getKeyBinding\n\t\t});\n\t\tif (this._dropdownContainer) {\n\t\t\tthis._dropdown.render(this._dropdownContainer);\n\t\t}\n\t}\n\n\toverride dispose() {\n\t\tthis._primaryAction.dispose();\n\t\tthis._dropdown.dispose();\n\t\tsuper.dispose();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
