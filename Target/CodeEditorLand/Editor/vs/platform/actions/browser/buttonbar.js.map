{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/actions/browser/buttonbar.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\tButtonBar,\n\ttype IButton,\n} from \"../../../base/browser/ui/button/button.js\";\nimport { createInstantHoverDelegate } from \"../../../base/browser/ui/hover/hoverDelegateFactory.js\";\nimport {\n\tActionRunner,\n\ttype IAction,\n\ttype IActionRunner,\n\tSubmenuAction,\n\ttype WorkbenchActionExecutedClassification,\n\ttype WorkbenchActionExecutedEvent,\n} from \"../../../base/common/actions.js\";\nimport { Codicon } from \"../../../base/common/codicons.js\";\nimport { Emitter, type Event } from \"../../../base/common/event.js\";\nimport { DisposableStore } from \"../../../base/common/lifecycle.js\";\nimport { ThemeIcon } from \"../../../base/common/themables.js\";\nimport { localize } from \"../../../nls.js\";\nimport { IContextKeyService } from \"../../contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../contextview/browser/contextView.js\";\nimport { IHoverService } from \"../../hover/browser/hover.js\";\nimport { IKeybindingService } from \"../../keybinding/common/keybinding.js\";\nimport { ITelemetryService } from \"../../telemetry/common/telemetry.js\";\nimport {\n\ttype IMenuActionOptions,\n\tIMenuService,\n\ttype MenuId,\n\tMenuItemAction,\n} from \"../common/actions.js\";\nimport { createAndFillInActionBarActions } from \"./menuEntryActionViewItem.js\";\nimport type { IToolBarRenderOptions } from \"./toolbar.js\";\n\nexport type IButtonConfigProvider = (\n\taction: IAction,\n\tindex: number,\n) =>\n\t| {\n\t\t\tshowIcon?: boolean;\n\t\t\tshowLabel?: boolean;\n\t\t\tisSecondary?: boolean;\n\t  }\n\t| undefined;\n\nexport interface IWorkbenchButtonBarOptions {\n\ttelemetrySource?: string;\n\tbuttonConfigProvider?: IButtonConfigProvider;\n}\n\nexport class WorkbenchButtonBar extends ButtonBar {\n\tprotected readonly _store = new DisposableStore();\n\tprotected readonly _updateStore = new DisposableStore();\n\n\tprivate readonly _actionRunner: IActionRunner;\n\tprivate readonly _onDidChange = new Emitter<this>();\n\treadonly onDidChange: Event<this> = this._onDidChange.event;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate readonly _options: IWorkbenchButtonBarOptions | undefined,\n\t\t@IContextMenuService\n\t\tprivate readonly _contextMenuService: IContextMenuService,\n\t\t@IKeybindingService\n\t\tprivate readonly _keybindingService: IKeybindingService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService private readonly _hoverService: IHoverService,\n\t) {\n\t\tsuper(container);\n\n\t\tthis._actionRunner = this._store.add(new ActionRunner());\n\t\tif (_options?.telemetrySource) {\n\t\t\tthis._actionRunner.onDidRun(\n\t\t\t\t(e) => {\n\t\t\t\t\ttelemetryService.publicLog2<\n\t\t\t\t\t\tWorkbenchActionExecutedEvent,\n\t\t\t\t\t\tWorkbenchActionExecutedClassification\n\t\t\t\t\t>(\"workbenchActionExecuted\", {\n\t\t\t\t\t\tid: e.action.id,\n\t\t\t\t\t\tfrom: _options.telemetrySource!,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tundefined,\n\t\t\t\tthis._store,\n\t\t\t);\n\t\t}\n\t}\n\n\toverride dispose() {\n\t\tthis._onDidChange.dispose();\n\t\tthis._updateStore.dispose();\n\t\tthis._store.dispose();\n\t\tsuper.dispose();\n\t}\n\n\tupdate(actions: IAction[], secondary: IAction[]): void {\n\t\tconst conifgProvider: IButtonConfigProvider =\n\t\t\tthis._options?.buttonConfigProvider ??\n\t\t\t(() => ({ showLabel: true }));\n\n\t\tthis._updateStore.clear();\n\t\tthis.clear();\n\n\t\t// Support instamt hover between buttons\n\t\tconst hoverDelegate = this._updateStore.add(\n\t\t\tcreateInstantHoverDelegate(),\n\t\t);\n\n\t\tfor (let i = 0; i < actions.length; i++) {\n\t\t\tconst secondary = i > 0;\n\t\t\tconst actionOrSubmenu = actions[i];\n\t\t\tlet action: IAction;\n\t\t\tlet btn: IButton;\n\n\t\t\tif (\n\t\t\t\tactionOrSubmenu instanceof SubmenuAction &&\n\t\t\t\tactionOrSubmenu.actions.length > 0\n\t\t\t) {\n\t\t\t\tconst [first, ...rest] = actionOrSubmenu.actions;\n\t\t\t\taction = <MenuItemAction>first;\n\t\t\t\tbtn = this.addButtonWithDropdown({\n\t\t\t\t\tsecondary:\n\t\t\t\t\t\tconifgProvider(action, i)?.isSecondary ?? secondary,\n\t\t\t\t\tactionRunner: this._actionRunner,\n\t\t\t\t\tactions: rest,\n\t\t\t\t\tcontextMenuProvider: this._contextMenuService,\n\t\t\t\t\tariaLabel: action.label,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\taction = actionOrSubmenu;\n\t\t\t\tbtn = this.addButton({\n\t\t\t\t\tsecondary:\n\t\t\t\t\t\tconifgProvider(action, i)?.isSecondary ?? secondary,\n\t\t\t\t\tariaLabel: action.label,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tbtn.enabled = action.enabled;\n\t\t\tbtn.checked = action.checked ?? false;\n\t\t\tbtn.element.classList.add(\"default-colors\");\n\t\t\tif (conifgProvider(action, i)?.showLabel ?? true) {\n\t\t\t\tbtn.label = action.label;\n\t\t\t} else {\n\t\t\t\tbtn.element.classList.add(\"monaco-text-button\");\n\t\t\t}\n\t\t\tif (conifgProvider(action, i)?.showIcon) {\n\t\t\t\tif (\n\t\t\t\t\taction instanceof MenuItemAction &&\n\t\t\t\t\tThemeIcon.isThemeIcon(action.item.icon)\n\t\t\t\t) {\n\t\t\t\t\tbtn.icon = action.item.icon;\n\t\t\t\t} else if (action.class) {\n\t\t\t\t\tbtn.element.classList.add(...action.class.split(\" \"));\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst kb = this._keybindingService.lookupKeybinding(action.id);\n\t\t\tlet tooltip: string;\n\t\t\tif (kb) {\n\t\t\t\ttooltip = localize(\n\t\t\t\t\t\"labelWithKeybinding\",\n\t\t\t\t\t\"{0} ({1})\",\n\t\t\t\t\taction.label,\n\t\t\t\t\tkb.getLabel(),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\ttooltip = action.label;\n\t\t\t}\n\t\t\tthis._updateStore.add(\n\t\t\t\tthis._hoverService.setupManagedHover(\n\t\t\t\t\thoverDelegate,\n\t\t\t\t\tbtn.element,\n\t\t\t\t\ttooltip,\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis._updateStore.add(\n\t\t\t\tbtn.onDidClick(async () => {\n\t\t\t\t\tthis._actionRunner.run(action);\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (secondary.length > 0) {\n\t\t\tconst btn = this.addButton({\n\t\t\t\tsecondary: true,\n\t\t\t\tariaLabel: localize(\"moreActions\", \"More Actions\"),\n\t\t\t});\n\n\t\t\tbtn.icon = Codicon.dropDownButton;\n\t\t\tbtn.element.classList.add(\"default-colors\", \"monaco-text-button\");\n\n\t\t\tbtn.enabled = true;\n\t\t\tthis._updateStore.add(\n\t\t\t\tthis._hoverService.setupManagedHover(\n\t\t\t\t\thoverDelegate,\n\t\t\t\t\tbtn.element,\n\t\t\t\t\tlocalize(\"moreActions\", \"More Actions\"),\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis._updateStore.add(\n\t\t\t\tbtn.onDidClick(async () => {\n\t\t\t\t\tthis._contextMenuService.showContextMenu({\n\t\t\t\t\t\tgetAnchor: () => btn.element,\n\t\t\t\t\t\tgetActions: () => secondary,\n\t\t\t\t\t\tactionRunner: this._actionRunner,\n\t\t\t\t\t\tonHide: () =>\n\t\t\t\t\t\t\tbtn.element.setAttribute(\"aria-expanded\", \"false\"),\n\t\t\t\t\t});\n\t\t\t\t\tbtn.element.setAttribute(\"aria-expanded\", \"true\");\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t\tthis._onDidChange.fire(this);\n\t}\n}\n\nexport interface IMenuWorkbenchButtonBarOptions\n\textends IWorkbenchButtonBarOptions {\n\tmenuOptions?: IMenuActionOptions;\n\n\ttoolbarOptions?: IToolBarRenderOptions;\n}\n\nexport class MenuWorkbenchButtonBar extends WorkbenchButtonBar {\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tmenuId: MenuId,\n\t\toptions: IMenuWorkbenchButtonBarOptions | undefined,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t) {\n\t\tsuper(\n\t\t\tcontainer,\n\t\t\toptions,\n\t\t\tcontextMenuService,\n\t\t\tkeybindingService,\n\t\t\ttelemetryService,\n\t\t\thoverService,\n\t\t);\n\n\t\tconst menu = menuService.createMenu(menuId, contextKeyService);\n\t\tthis._store.add(menu);\n\n\t\tconst update = () => {\n\t\t\tthis.clear();\n\n\t\t\tconst primary: IAction[] = [];\n\t\t\tconst secondary: IAction[] = [];\n\t\t\tcreateAndFillInActionBarActions(\n\t\t\t\tmenu,\n\t\t\t\toptions?.menuOptions,\n\t\t\t\t{ primary, secondary },\n\t\t\t\toptions?.toolbarOptions?.primaryGroup,\n\t\t\t);\n\n\t\t\tsuper.update(primary, secondary);\n\t\t};\n\t\tthis._store.add(menu.onDidChange(update));\n\t\tupdate();\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t}\n\n\toverride update(_actions: IAction[]): void {\n\t\tthrow new Error(\"Use Menu or WorkbenchButtonBar\");\n\t}\n}\n"],
  "mappings": "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",
  "names": ["secondary"]
}
