{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/actions/test/common/menuService.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { isIMenuItem, MenuId, MenuRegistry } from '../../common/actions.js';\nimport { MenuService } from '../../common/menuService.js';\nimport { NullCommandService } from '../../../commands/test/common/nullCommandService.js';\nimport { MockContextKeyService, MockKeybindingService } from '../../../keybinding/test/common/mockKeybindingService.js';\nimport { InMemoryStorageService } from '../../../storage/common/storage.js';\n\n// --- service instances\n\nconst contextKeyService = new class extends MockContextKeyService {\n\toverride contextMatchesRules() {\n\t\treturn true;\n\t}\n};\n\n// --- tests\n\nsuite('MenuService', function () {\n\n\tlet menuService: MenuService;\n\tconst disposables = new DisposableStore();\n\tlet testMenuId: MenuId;\n\n\tsetup(function () {\n\t\tmenuService = new MenuService(NullCommandService, new MockKeybindingService(), new InMemoryStorageService());\n\t\ttestMenuId = new MenuId(`testo/${generateUuid()}`);\n\t\tdisposables.clear();\n\t});\n\n\tteardown(function () {\n\t\tdisposables.clear();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('group sorting', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'one', title: 'FOO' },\n\t\t\tgroup: '0_hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'two', title: 'FOO' },\n\t\t\tgroup: 'hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'three', title: 'FOO' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'four', title: 'FOO' },\n\t\t\tgroup: ''\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'five', title: 'FOO' },\n\t\t\tgroup: 'navigation'\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 5);\n\t\tconst [one, two, three, four, five] = groups;\n\n\t\tassert.strictEqual(one[0], 'navigation');\n\t\tassert.strictEqual(two[0], '0_hello');\n\t\tassert.strictEqual(three[0], 'hello');\n\t\tassert.strictEqual(four[0], 'Hello');\n\t\tassert.strictEqual(five[0], '');\n\t});\n\n\ttest('in group sorting, by title', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [, actions] = groups[0];\n\n\t\tassert.strictEqual(actions.length, 3);\n\t\tconst [one, two, three] = actions;\n\t\tassert.strictEqual(one.id, 'a');\n\t\tassert.strictEqual(two.id, 'b');\n\t\tassert.strictEqual(three.id, 'c');\n\t});\n\n\ttest('in group sorting, by title and order', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: 10\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: -1\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'd', title: 'yyy' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: -1\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [, actions] = groups[0];\n\n\t\tassert.strictEqual(actions.length, 4);\n\t\tconst [one, two, three, four] = actions;\n\t\tassert.strictEqual(one.id, 'd');\n\t\tassert.strictEqual(two.id, 'c');\n\t\tassert.strictEqual(three.id, 'b');\n\t\tassert.strictEqual(four.id, 'a');\n\t});\n\n\n\ttest('in group sorting, special: navigation', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.3\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.2\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.1\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [[, actions]] = groups;\n\n\t\tassert.strictEqual(actions.length, 3);\n\t\tconst [one, two, three] = actions;\n\t\tassert.strictEqual(one.id, 'c');\n\t\tassert.strictEqual(two.id, 'b');\n\t\tassert.strictEqual(three.id, 'a');\n\t});\n\n\ttest('special MenuId palette', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n\t\t\tcommand: { id: 'a', title: 'Explicit' }\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.addCommand({ id: 'b', title: 'Implicit' }));\n\n\t\tlet foundA = false;\n\t\tlet foundB = false;\n\t\tfor (const item of MenuRegistry.getMenuItems(MenuId.CommandPalette)) {\n\t\t\tif (isIMenuItem(item)) {\n\t\t\t\tif (item.command.id === 'a') {\n\t\t\t\t\tassert.strictEqual(item.command.title, 'Explicit');\n\t\t\t\t\tfoundA = true;\n\t\t\t\t}\n\t\t\t\tif (item.command.id === 'b') {\n\t\t\t\t\tassert.strictEqual(item.command.title, 'Implicit');\n\t\t\t\t\tfoundB = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tassert.strictEqual(foundA, true);\n\t\tassert.strictEqual(foundB, true);\n\t});\n\n\ttest('Extension contributed submenus missing with errors in output #155030', function () {\n\n\t\tconst id = generateUuid();\n\t\tconst menu = new MenuId(id);\n\n\t\tassert.throws(() => new MenuId(id));\n\t\tassert.ok(menu === MenuId.for(id));\n\t});\n});\n"],
  "mappings": "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",
  "names": []
}
