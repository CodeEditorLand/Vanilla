import{MutableDisposable as i}from"../../../base/common/lifecycle.js";import{AbstractMessageLogger as t,DEFAULT_LOG_LEVEL as g,log as o}from"./log.js";class h extends t{buffer=[];_logger=void 0;_logLevelDisposable=this._register(new i);constructor(e=g){super(),this.setLevel(e)}set logger(e){this._logger=e,this.setLevel(e.getLevel()),this._logLevelDisposable.value=e.onDidChangeLogLevel(this.setLevel,this);for(const{level:s,message:r}of this.buffer)o(e,s,r);this.buffer=[]}log(e,s){this._logger?o(this._logger,e,s):this.getLevel()<=e&&this.buffer.push({level:e,message:s})}dispose(){this._logger?.dispose(),super.dispose()}flush(){this._logger?.flush()}}export{h as BufferLogger};
