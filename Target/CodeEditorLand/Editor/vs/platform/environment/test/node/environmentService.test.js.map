{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/environment/test/node/environmentService.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { parseExtensionHostDebugPort } from '../../common/environmentService.js';\nimport { OPTIONS, parseArgs } from '../../node/argv.js';\nimport { NativeEnvironmentService } from '../../node/environmentService.js';\nimport product from '../../../product/common/product.js';\n\nsuite('EnvironmentService', () => {\n\n\ttest('parseExtensionHostPort when built', () => {\n\t\tconst parse = (a: string[]) => parseExtensionHostDebugPort(parseArgs(a, OPTIONS), true);\n\n\t\tassert.deepStrictEqual(parse([]), { port: null, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugPluginHost']), { port: null, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugPluginHost=1234']), { port: 1234, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugBrkPluginHost']), { port: null, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugBrkPluginHost=5678']), { port: 5678, break: true, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugPluginHost=1234', '--debugBrkPluginHost=5678', '--debugId=7']), { port: 5678, break: true, env: undefined, debugId: '7' });\n\n\t\tassert.deepStrictEqual(parse(['--inspect-extensions']), { port: null, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--inspect-extensions=1234']), { port: 1234, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--inspect-brk-extensions']), { port: null, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--inspect-brk-extensions=5678']), { port: 5678, break: true, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--inspect-extensions=1234', '--inspect-brk-extensions=5678', '--debugId=7']), { port: 5678, break: true, env: undefined, debugId: '7' });\n\t\tassert.deepStrictEqual(parse(['--inspect-extensions=1234', '--inspect-brk-extensions=5678', '--extensionEnvironment={\"COOL\":\"1\"}']), { port: 5678, break: true, env: { COOL: '1' }, debugId: undefined });\n\t});\n\n\ttest('parseExtensionHostPort when unbuilt', () => {\n\t\tconst parse = (a: string[]) => parseExtensionHostDebugPort(parseArgs(a, OPTIONS), false);\n\n\t\tassert.deepStrictEqual(parse([]), { port: 5870, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugPluginHost']), { port: 5870, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugPluginHost=1234']), { port: 1234, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugBrkPluginHost']), { port: 5870, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugBrkPluginHost=5678']), { port: 5678, break: true, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--debugPluginHost=1234', '--debugBrkPluginHost=5678', '--debugId=7']), { port: 5678, break: true, env: undefined, debugId: '7' });\n\n\t\tassert.deepStrictEqual(parse(['--inspect-extensions']), { port: 5870, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--inspect-extensions=1234']), { port: 1234, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--inspect-brk-extensions']), { port: 5870, break: false, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--inspect-brk-extensions=5678']), { port: 5678, break: true, env: undefined, debugId: undefined });\n\t\tassert.deepStrictEqual(parse(['--inspect-extensions=1234', '--inspect-brk-extensions=5678', '--debugId=7']), { port: 5678, break: true, env: undefined, debugId: '7' });\n\t});\n\n\t// https://github.com/microsoft/vscode/issues/78440\n\ttest('careful with boolean file names', function () {\n\t\tlet actual = parseArgs(['-r', 'arg.txt'], OPTIONS);\n\t\tassert(actual['reuse-window']);\n\t\tassert.deepStrictEqual(actual._, ['arg.txt']);\n\n\t\tactual = parseArgs(['-r', 'true.txt'], OPTIONS);\n\t\tassert(actual['reuse-window']);\n\t\tassert.deepStrictEqual(actual._, ['true.txt']);\n\t});\n\n\ttest('userDataDir', () => {\n\t\tconst service1 = new NativeEnvironmentService(parseArgs(process.argv, OPTIONS), { _serviceBrand: undefined, ...product });\n\t\tassert.ok(service1.userDataPath.length > 0);\n\n\t\tconst args = parseArgs(process.argv, OPTIONS);\n\t\targs['user-data-dir'] = '/userDataDir/folder';\n\n\t\tconst service2 = new NativeEnvironmentService(args, { _serviceBrand: undefined, ...product });\n\t\tassert.notStrictEqual(service1.userDataPath, service2.userDataPath);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"],
  "mappings": "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",
  "names": []
}
