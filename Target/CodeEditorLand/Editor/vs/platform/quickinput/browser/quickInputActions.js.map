{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/quickinput/browser/quickInputActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from \"../../../base/common/keyCodes.js\";\nimport { isMacintosh } from \"../../../base/common/platform.js\";\nimport type { PartialExcept } from \"../../../base/common/types.js\";\nimport { localize } from \"../../../nls.js\";\nimport type { ICommandHandler } from \"../../commands/common/commands.js\";\nimport { ContextKeyExpr } from \"../../contextkey/common/contextkey.js\";\nimport { InputFocusedContext } from \"../../contextkey/common/contextkeys.js\";\nimport {\n\ttype ICommandAndKeybindingRule,\n\tKeybindingWeight,\n\tKeybindingsRegistry,\n} from \"../../keybinding/common/keybindingsRegistry.js\";\nimport {\n\tIQuickInputService,\n\ttype IQuickPick,\n\tQuickInputType,\n\tQuickPickFocus,\n} from \"../common/quickInput.js\";\nimport {\n\tendOfQuickInputBoxContext,\n\tinQuickInputContext,\n\tquickInputTypeContextKeyValue,\n} from \"./quickInput.js\";\n\nconst defaultCommandAndKeybindingRule = {\n\tweight: KeybindingWeight.WorkbenchContrib,\n\twhen: ContextKeyExpr.and(\n\t\tContextKeyExpr.equals(\n\t\t\tquickInputTypeContextKeyValue,\n\t\t\tQuickInputType.QuickPick,\n\t\t),\n\t\tinQuickInputContext,\n\t),\n\tmetadata: {\n\t\tdescription: localize(\n\t\t\t\"quickPick\",\n\t\t\t\"Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.\",\n\t\t),\n\t},\n};\nfunction registerQuickPickCommandAndKeybindingRule(\n\trule: PartialExcept<ICommandAndKeybindingRule, \"id\" | \"handler\">,\n\toptions: {\n\t\twithAltMod?: boolean;\n\t\twithCtrlMod?: boolean;\n\t\twithCmdMod?: boolean;\n\t} = {},\n) {\n\tKeybindingsRegistry.registerCommandAndKeybindingRule({\n\t\t...defaultCommandAndKeybindingRule,\n\t\t...rule,\n\t\tsecondary: getSecondary(rule.primary!, rule.secondary ?? [], options),\n\t});\n}\n\nconst ctrlKeyMod = isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd;\n\n// This function will generate all the combinations of keybindings for the given primary keybinding\nfunction getSecondary(\n\tprimary: number,\n\tsecondary: number[],\n\toptions: {\n\t\twithAltMod?: boolean;\n\t\twithCtrlMod?: boolean;\n\t\twithCmdMod?: boolean;\n\t} = {},\n): number[] {\n\tif (options.withAltMod) {\n\t\tsecondary.push(KeyMod.Alt + primary);\n\t}\n\tif (options.withCtrlMod) {\n\t\tsecondary.push(ctrlKeyMod + primary);\n\t\tif (options.withAltMod) {\n\t\t\tsecondary.push(KeyMod.Alt + ctrlKeyMod + primary);\n\t\t}\n\t}\n\n\tif (options.withCmdMod && isMacintosh) {\n\t\tsecondary.push(KeyMod.CtrlCmd + primary);\n\t\tif (options.withCtrlMod) {\n\t\t\tsecondary.push(KeyMod.CtrlCmd + KeyMod.WinCtrl + primary);\n\t\t}\n\t\tif (options.withAltMod) {\n\t\t\tsecondary.push(KeyMod.CtrlCmd + KeyMod.Alt + primary);\n\t\t\tif (options.withCtrlMod) {\n\t\t\t\tsecondary.push(\n\t\t\t\t\tKeyMod.CtrlCmd + KeyMod.Alt + KeyMod.WinCtrl + primary,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn secondary;\n}\n\n//#region Navigation\n\nfunction focusHandler(\n\tfocus: QuickPickFocus,\n\tfocusOnQuickNatigate?: QuickPickFocus,\n): ICommandHandler {\n\treturn (accessor) => {\n\t\t// Assuming this is a quick pick due to above when clause\n\t\tconst currentQuickPick = accessor.get(IQuickInputService)\n\t\t\t.currentQuickInput as IQuickPick<any> | undefined;\n\t\tif (!currentQuickPick) {\n\t\t\treturn;\n\t\t}\n\t\tif (focusOnQuickNatigate && currentQuickPick.quickNavigate) {\n\t\t\treturn currentQuickPick.focus(focusOnQuickNatigate);\n\t\t}\n\t\treturn currentQuickPick.focus(focus);\n\t};\n}\n\nregisterQuickPickCommandAndKeybindingRule(\n\t{\n\t\tid: \"quickInput.pageNext\",\n\t\tprimary: KeyCode.PageDown,\n\t\thandler: focusHandler(QuickPickFocus.NextPage),\n\t},\n\t{ withAltMod: true, withCtrlMod: true, withCmdMod: true },\n);\nregisterQuickPickCommandAndKeybindingRule(\n\t{\n\t\tid: \"quickInput.pagePrevious\",\n\t\tprimary: KeyCode.PageUp,\n\t\thandler: focusHandler(QuickPickFocus.PreviousPage),\n\t},\n\t{ withAltMod: true, withCtrlMod: true, withCmdMod: true },\n);\nregisterQuickPickCommandAndKeybindingRule(\n\t{\n\t\tid: \"quickInput.first\",\n\t\tprimary: ctrlKeyMod + KeyCode.Home,\n\t\thandler: focusHandler(QuickPickFocus.First),\n\t},\n\t{ withAltMod: true, withCmdMod: true },\n);\nregisterQuickPickCommandAndKeybindingRule(\n\t{\n\t\tid: \"quickInput.last\",\n\t\tprimary: ctrlKeyMod + KeyCode.End,\n\t\thandler: focusHandler(QuickPickFocus.Last),\n\t},\n\t{ withAltMod: true, withCmdMod: true },\n);\nregisterQuickPickCommandAndKeybindingRule(\n\t{\n\t\tid: \"quickInput.next\",\n\t\tprimary: KeyCode.DownArrow,\n\t\thandler: focusHandler(QuickPickFocus.Next),\n\t},\n\t{ withCtrlMod: true },\n);\nregisterQuickPickCommandAndKeybindingRule(\n\t{\n\t\tid: \"quickInput.previous\",\n\t\tprimary: KeyCode.UpArrow,\n\t\thandler: focusHandler(QuickPickFocus.Previous),\n\t},\n\t{ withCtrlMod: true },\n);\n\n// The next & previous separator commands are interesting because if we are in quick access mode, we are already holding a modifier key down.\n// In this case, we want that modifier key+up/down to navigate to the next/previous item, not the next/previous separator.\n// To handle this, we have a separate command for navigating to the next/previous separator when we are not in quick access mode.\n// If, however, we are in quick access mode, and you hold down an additional modifier key, we will navigate to the next/previous separator.\n\nconst nextSeparatorFallbackDesc = localize(\n\t\"quickInput.nextSeparatorWithQuickAccessFallback\",\n\t\"If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator.\",\n);\nconst prevSeparatorFallbackDesc = localize(\n\t\"quickInput.previousSeparatorWithQuickAccessFallback\",\n\t\"If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.\",\n);\nif (isMacintosh) {\n\tregisterQuickPickCommandAndKeybindingRule({\n\t\tid: \"quickInput.nextSeparatorWithQuickAccessFallback\",\n\t\tprimary: KeyMod.CtrlCmd + KeyCode.DownArrow,\n\t\thandler: focusHandler(\n\t\t\tQuickPickFocus.NextSeparator,\n\t\t\tQuickPickFocus.Next,\n\t\t),\n\t\tmetadata: { description: nextSeparatorFallbackDesc },\n\t});\n\tregisterQuickPickCommandAndKeybindingRule(\n\t\t{\n\t\t\tid: \"quickInput.nextSeparator\",\n\t\t\tprimary: KeyMod.CtrlCmd + KeyMod.Alt + KeyCode.DownArrow,\n\t\t\t// Since macOS has the cmd key as the primary modifier, we need to add this additional\n\t\t\t// keybinding to capture cmd+ctrl+upArrow\n\t\t\tsecondary: [KeyMod.CtrlCmd + KeyMod.WinCtrl + KeyCode.DownArrow],\n\t\t\thandler: focusHandler(QuickPickFocus.NextSeparator),\n\t\t},\n\t\t{ withCtrlMod: true },\n\t);\n\n\tregisterQuickPickCommandAndKeybindingRule({\n\t\tid: \"quickInput.previousSeparatorWithQuickAccessFallback\",\n\t\tprimary: KeyMod.CtrlCmd + KeyCode.UpArrow,\n\t\thandler: focusHandler(\n\t\t\tQuickPickFocus.PreviousSeparator,\n\t\t\tQuickPickFocus.Previous,\n\t\t),\n\t\tmetadata: { description: prevSeparatorFallbackDesc },\n\t});\n\tregisterQuickPickCommandAndKeybindingRule(\n\t\t{\n\t\t\tid: \"quickInput.previousSeparator\",\n\t\t\tprimary: KeyMod.CtrlCmd + KeyMod.Alt + KeyCode.UpArrow,\n\t\t\t// Since macOS has the cmd key as the primary modifier, we need to add this additional\n\t\t\t// keybinding to capture cmd+ctrl+upArrow\n\t\t\tsecondary: [KeyMod.CtrlCmd + KeyMod.WinCtrl + KeyCode.UpArrow],\n\t\t\thandler: focusHandler(QuickPickFocus.PreviousSeparator),\n\t\t},\n\t\t{ withCtrlMod: true },\n\t);\n} else {\n\tregisterQuickPickCommandAndKeybindingRule({\n\t\tid: \"quickInput.nextSeparatorWithQuickAccessFallback\",\n\t\tprimary: KeyMod.Alt + KeyCode.DownArrow,\n\t\thandler: focusHandler(\n\t\t\tQuickPickFocus.NextSeparator,\n\t\t\tQuickPickFocus.Next,\n\t\t),\n\t\tmetadata: { description: nextSeparatorFallbackDesc },\n\t});\n\tregisterQuickPickCommandAndKeybindingRule({\n\t\tid: \"quickInput.nextSeparator\",\n\t\tprimary: KeyMod.CtrlCmd + KeyMod.Alt + KeyCode.DownArrow,\n\t\thandler: focusHandler(QuickPickFocus.NextSeparator),\n\t});\n\n\tregisterQuickPickCommandAndKeybindingRule({\n\t\tid: \"quickInput.previousSeparatorWithQuickAccessFallback\",\n\t\tprimary: KeyMod.Alt + KeyCode.UpArrow,\n\t\thandler: focusHandler(\n\t\t\tQuickPickFocus.PreviousSeparator,\n\t\t\tQuickPickFocus.Previous,\n\t\t),\n\t\tmetadata: { description: prevSeparatorFallbackDesc },\n\t});\n\tregisterQuickPickCommandAndKeybindingRule({\n\t\tid: \"quickInput.previousSeparator\",\n\t\tprimary: KeyMod.CtrlCmd + KeyMod.Alt + KeyCode.UpArrow,\n\t\thandler: focusHandler(QuickPickFocus.PreviousSeparator),\n\t});\n}\n\n//#endregion\n\n//#region Accept\n\nregisterQuickPickCommandAndKeybindingRule(\n\t{\n\t\tid: \"quickInput.acceptInBackground\",\n\t\t// If we are in the quick pick but the input box is not focused or our cursor is at the end of the input box\n\t\twhen: ContextKeyExpr.and(\n\t\t\tdefaultCommandAndKeybindingRule.when,\n\t\t\tContextKeyExpr.or(\n\t\t\t\tInputFocusedContext.negate(),\n\t\t\t\tendOfQuickInputBoxContext,\n\t\t\t),\n\t\t),\n\t\tprimary: KeyCode.RightArrow,\n\t\t// Need a little extra weight to ensure this keybinding is preferred over the default cmd+alt+right arrow keybinding\n\t\t// https://github.com/microsoft/vscode/blob/1451e4fbbbf074a4355cc537c35b547b80ce1c52/src/vs/workbench/browser/parts/editor/editorActions.ts#L1178-L1195\n\t\tweight: KeybindingWeight.WorkbenchContrib + 50,\n\t\thandler: (accessor) => {\n\t\t\tconst currentQuickPick = accessor.get(IQuickInputService)\n\t\t\t\t.currentQuickInput as IQuickPick<any>;\n\t\t\tcurrentQuickPick?.accept(true);\n\t\t},\n\t},\n\t{ withAltMod: true, withCtrlMod: true, withCmdMod: true },\n);\n"],
  "mappings": "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",
  "names": []
}
