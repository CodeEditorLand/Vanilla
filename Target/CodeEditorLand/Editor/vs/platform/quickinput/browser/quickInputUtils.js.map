{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/quickinput/browser/quickInputUtils.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { Event } from '../../../base/common/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Gesture, EventType as GestureEventType } from '../../../base/browser/touch.js';\nimport { renderLabelWithIcons } from '../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\nimport { KeyCode } from '../../../base/common/keyCodes.js';\nimport { parseLinkedText } from '../../../base/common/linkedText.js';\nimport { URI } from '../../../base/common/uri.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../nls.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { IQuickInputButton } from '../common/quickInput.js';\nimport { IAction } from '../../../base/common/actions.js';\n\nconst iconPathToClass: Record<string, string> = {};\nconst iconClassGenerator = new IdGenerator('quick-input-button-icon-');\n\nfunction getIconClass(iconPath: { dark: URI; light?: URI } | undefined): string | undefined {\n\tif (!iconPath) {\n\t\treturn undefined;\n\t}\n\tlet iconClass: string;\n\n\tconst key = iconPath.dark.toString();\n\tif (iconPathToClass[key]) {\n\t\ticonClass = iconPathToClass[key];\n\t} else {\n\t\ticonClass = iconClassGenerator.nextId();\n\t\tdom.createCSSRule(`.${iconClass}, .hc-light .${iconClass}`, `background-image: ${dom.asCSSUrl(iconPath.light || iconPath.dark)}`);\n\t\tdom.createCSSRule(`.vs-dark .${iconClass}, .hc-black .${iconClass}`, `background-image: ${dom.asCSSUrl(iconPath.dark)}`);\n\t\ticonPathToClass[key] = iconClass;\n\t}\n\n\treturn iconClass;\n}\n\nexport function quickInputButtonToAction(button: IQuickInputButton, id: string, run: () => unknown): IAction {\n\tlet cssClasses = button.iconClass || getIconClass(button.iconPath);\n\tif (button.alwaysVisible) {\n\t\tcssClasses = cssClasses ? `${cssClasses} always-visible` : 'always-visible';\n\t}\n\n\treturn {\n\t\tid,\n\t\tlabel: '',\n\t\ttooltip: button.tooltip || '',\n\t\tclass: cssClasses,\n\t\tenabled: true,\n\t\trun\n\t};\n}\n\nexport function renderQuickInputDescription(description: string, container: HTMLElement, actionHandler: { callback: (content: string) => void; disposables: DisposableStore }) {\n\tdom.reset(container);\n\tconst parsed = parseLinkedText(description);\n\tlet tabIndex = 0;\n\tfor (const node of parsed.nodes) {\n\t\tif (typeof node === 'string') {\n\t\t\tcontainer.append(...renderLabelWithIcons(node));\n\t\t} else {\n\t\t\tlet title = node.title;\n\n\t\t\tif (!title && node.href.startsWith('command:')) {\n\t\t\t\ttitle = localize('executeCommand', \"Click to execute command '{0}'\", node.href.substring('command:'.length));\n\t\t\t} else if (!title) {\n\t\t\t\ttitle = node.href;\n\t\t\t}\n\n\t\t\tconst anchor = dom.$('a', { href: node.href, title, tabIndex: tabIndex++ }, node.label);\n\t\t\tanchor.style.textDecoration = 'underline';\n\t\t\tconst handleOpen = (e: unknown) => {\n\t\t\t\tif (dom.isEventLike(e)) {\n\t\t\t\t\tdom.EventHelper.stop(e, true);\n\t\t\t\t}\n\n\t\t\t\tactionHandler.callback(node.href);\n\t\t\t};\n\n\t\t\tconst onClick = actionHandler.disposables.add(new DomEmitter(anchor, dom.EventType.CLICK)).event;\n\t\t\tconst onKeydown = actionHandler.disposables.add(new DomEmitter(anchor, dom.EventType.KEY_DOWN)).event;\n\t\t\tconst onSpaceOrEnter = Event.chain(onKeydown, $ => $.filter(e => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\t\treturn event.equals(KeyCode.Space) || event.equals(KeyCode.Enter);\n\t\t\t}));\n\n\t\t\tactionHandler.disposables.add(Gesture.addTarget(anchor));\n\t\t\tconst onTap = actionHandler.disposables.add(new DomEmitter(anchor, GestureEventType.Tap)).event;\n\n\t\t\tEvent.any(onClick, onTap, onSpaceOrEnter)(handleOpen, null, actionHandler.disposables);\n\t\t\tcontainer.appendChild(anchor);\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
