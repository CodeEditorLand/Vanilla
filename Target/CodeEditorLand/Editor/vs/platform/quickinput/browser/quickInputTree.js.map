{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/quickinput/browser/quickInputTree.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { Emitter, Event, EventBufferer, IValueWithChangeEvent } from '../../../base/common/event.js';\nimport { IHoverDelegate } from '../../../base/browser/ui/hover/hoverDelegate.js';\nimport { IListVirtualDelegate } from '../../../base/browser/ui/list/list.js';\nimport { IObjectTreeElement, ITreeNode, ITreeRenderer, TreeVisibility } from '../../../base/browser/ui/tree/tree.js';\nimport { localize } from '../../../nls.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { WorkbenchObjectTree } from '../../list/browser/listService.js';\nimport { IThemeService } from '../../theme/common/themeService.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { IQuickPickItem, IQuickPickItemButtonEvent, IQuickPickSeparator, IQuickPickSeparatorButtonEvent, QuickPickItem, QuickPickFocus } from '../common/quickInput.js';\nimport { IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { IMatch } from '../../../base/common/filters.js';\nimport { IListAccessibilityProvider, IListStyles } from '../../../base/browser/ui/list/listWidget.js';\nimport { AriaRole } from '../../../base/browser/ui/aria/aria.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { KeyCode } from '../../../base/common/keyCodes.js';\nimport { OS } from '../../../base/common/platform.js';\nimport { memoize } from '../../../base/common/decorators.js';\nimport { IIconLabelValueOptions, IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { isDark } from '../../theme/common/theme.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { quickInputButtonToAction } from './quickInputUtils.js';\nimport { Lazy } from '../../../base/common/lazy.js';\nimport { IParsedLabelWithIcons, getCodiconAriaLabel, matchesFuzzyIconAware, parseLabelWithIcons } from '../../../base/common/iconLabels.js';\nimport { HoverPosition } from '../../../base/browser/ui/hover/hoverWidget.js';\nimport { compareAnything } from '../../../base/common/comparers.js';\nimport { ltrim } from '../../../base/common/strings.js';\nimport { RenderIndentGuides } from '../../../base/browser/ui/tree/abstractTree.js';\nimport { ThrottledDelayer } from '../../../base/common/async.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport type { IHoverWidget, IManagedHoverTooltipMarkdownString } from '../../../base/browser/ui/hover/hover.js';\nimport { IAccessibilityService } from '../../accessibility/common/accessibility.js';\nimport { observableValue, observableValueOpts, transaction } from '../../../base/common/observable.js';\nimport { equals } from '../../../base/common/arrays.js';\n\nconst $ = dom.$;\n\ninterface IQuickInputItemLazyParts {\n\treadonly saneLabel: string;\n\treadonly saneSortLabel: string;\n\treadonly saneAriaLabel: string;\n}\n\ninterface IQuickPickElement extends IQuickInputItemLazyParts {\n\treadonly hasCheckbox: boolean;\n\treadonly index: number;\n\treadonly item?: IQuickPickItem;\n\treadonly saneDescription?: string;\n\treadonly saneDetail?: string;\n\treadonly saneTooltip?: string | IMarkdownString | HTMLElement;\n\thidden: boolean;\n\telement?: HTMLElement;\n\tlabelHighlights?: IMatch[];\n\tdescriptionHighlights?: IMatch[];\n\tdetailHighlights?: IMatch[];\n\tseparator?: IQuickPickSeparator;\n}\n\ninterface IQuickInputItemTemplateData {\n\tentry: HTMLDivElement;\n\tcheckbox: HTMLInputElement;\n\ticon: HTMLDivElement;\n\tlabel: IconLabel;\n\tkeybinding: KeybindingLabel;\n\tdetail: IconLabel;\n\tseparator: HTMLDivElement;\n\tactionBar: ActionBar;\n\telement: IQuickPickElement;\n\ttoDisposeElement: DisposableStore;\n\ttoDisposeTemplate: DisposableStore;\n}\n\nclass BaseQuickPickItemElement implements IQuickPickElement {\n\tprivate readonly _init: Lazy<IQuickInputItemLazyParts>;\n\n\tconstructor(\n\t\treadonly index: number,\n\t\treadonly hasCheckbox: boolean,\n\t\tmainItem: QuickPickItem\n\t) {\n\t\tthis._init = new Lazy(() => {\n\t\t\tconst saneLabel = mainItem.label ?? '';\n\t\t\tconst saneSortLabel = parseLabelWithIcons(saneLabel).text.trim();\n\n\t\t\tconst saneAriaLabel = mainItem.ariaLabel || [saneLabel, this.saneDescription, this.saneDetail]\n\t\t\t\t.map(s => getCodiconAriaLabel(s))\n\t\t\t\t.filter(s => !!s)\n\t\t\t\t.join(', ');\n\n\t\t\treturn {\n\t\t\t\tsaneLabel,\n\t\t\t\tsaneSortLabel,\n\t\t\t\tsaneAriaLabel\n\t\t\t};\n\t\t});\n\t\tthis._saneDescription = mainItem.description;\n\t\tthis._saneTooltip = mainItem.tooltip;\n\t}\n\n\t// #region Lazy Getters\n\n\tget saneLabel() {\n\t\treturn this._init.value.saneLabel;\n\t}\n\tget saneSortLabel() {\n\t\treturn this._init.value.saneSortLabel;\n\t}\n\tget saneAriaLabel() {\n\t\treturn this._init.value.saneAriaLabel;\n\t}\n\n\t// #endregion\n\n\t// #region Getters and Setters\n\n\tprivate _element?: HTMLElement;\n\tget element() {\n\t\treturn this._element;\n\t}\n\tset element(value: HTMLElement | undefined) {\n\t\tthis._element = value;\n\t}\n\n\tprivate _hidden = false;\n\tget hidden() {\n\t\treturn this._hidden;\n\t}\n\tset hidden(value: boolean) {\n\t\tthis._hidden = value;\n\t}\n\n\tprivate _saneDescription?: string;\n\tget saneDescription() {\n\t\treturn this._saneDescription;\n\t}\n\tset saneDescription(value: string | undefined) {\n\t\tthis._saneDescription = value;\n\t}\n\n\tprotected _saneDetail?: string;\n\tget saneDetail() {\n\t\treturn this._saneDetail;\n\t}\n\tset saneDetail(value: string | undefined) {\n\t\tthis._saneDetail = value;\n\t}\n\n\tprivate _saneTooltip?: string | IMarkdownString | HTMLElement;\n\tget saneTooltip() {\n\t\treturn this._saneTooltip;\n\t}\n\tset saneTooltip(value: string | IMarkdownString | HTMLElement | undefined) {\n\t\tthis._saneTooltip = value;\n\t}\n\n\tprotected _labelHighlights?: IMatch[];\n\tget labelHighlights() {\n\t\treturn this._labelHighlights;\n\t}\n\tset labelHighlights(value: IMatch[] | undefined) {\n\t\tthis._labelHighlights = value;\n\t}\n\n\tprotected _descriptionHighlights?: IMatch[];\n\tget descriptionHighlights() {\n\t\treturn this._descriptionHighlights;\n\t}\n\tset descriptionHighlights(value: IMatch[] | undefined) {\n\t\tthis._descriptionHighlights = value;\n\t}\n\n\tprotected _detailHighlights?: IMatch[];\n\tget detailHighlights() {\n\t\treturn this._detailHighlights;\n\t}\n\tset detailHighlights(value: IMatch[] | undefined) {\n\t\tthis._detailHighlights = value;\n\t}\n}\n\nclass QuickPickItemElement extends BaseQuickPickItemElement {\n\treadonly onChecked: Event<boolean>;\n\n\tconstructor(\n\t\tindex: number,\n\t\thasCheckbox: boolean,\n\t\treadonly fireButtonTriggered: (event: IQuickPickItemButtonEvent<IQuickPickItem>) => void,\n\t\tprivate _onChecked: Emitter<{ element: IQuickPickElement; checked: boolean }>,\n\t\treadonly item: IQuickPickItem,\n\t\tprivate _separator: IQuickPickSeparator | undefined,\n\t) {\n\t\tsuper(index, hasCheckbox, item);\n\n\t\tthis.onChecked = hasCheckbox\n\t\t\t? Event.map(Event.filter<{ element: IQuickPickElement; checked: boolean }>(this._onChecked.event, e => e.element === this), e => e.checked)\n\t\t\t: Event.None;\n\n\t\tthis._saneDetail = item.detail;\n\t\tthis._labelHighlights = item.highlights?.label;\n\t\tthis._descriptionHighlights = item.highlights?.description;\n\t\tthis._detailHighlights = item.highlights?.detail;\n\t}\n\n\tget separator() {\n\t\treturn this._separator;\n\t}\n\tset separator(value: IQuickPickSeparator | undefined) {\n\t\tthis._separator = value;\n\t}\n\n\tprivate _checked = false;\n\tget checked() {\n\t\treturn this._checked;\n\t}\n\tset checked(value: boolean) {\n\t\tif (value !== this._checked) {\n\t\t\tthis._checked = value;\n\t\t\tthis._onChecked.fire({ element: this, checked: value });\n\t\t}\n\t}\n\n\tget checkboxDisabled() {\n\t\treturn !!this.item.disabled;\n\t}\n}\n\nenum QuickPickSeparatorFocusReason {\n\t/**\n\t * No item is hovered or active\n\t */\n\tNONE = 0,\n\t/**\n\t * Some item within this section is hovered\n\t */\n\tMOUSE_HOVER = 1,\n\t/**\n\t * Some item within this section is active\n\t */\n\tACTIVE_ITEM = 2\n}\n\nclass QuickPickSeparatorElement extends BaseQuickPickItemElement {\n\tchildren = new Array<QuickPickItemElement>();\n\t/**\n\t * If this item is >0, it means that there is some item in the list that is either:\n\t * * hovered over\n\t * * active\n\t */\n\tfocusInsideSeparator = QuickPickSeparatorFocusReason.NONE;\n\n\tconstructor(\n\t\tindex: number,\n\t\treadonly fireSeparatorButtonTriggered: (event: IQuickPickSeparatorButtonEvent) => void,\n\t\treadonly separator: IQuickPickSeparator,\n\t) {\n\t\tsuper(index, false, separator);\n\t}\n}\n\nclass QuickInputItemDelegate implements IListVirtualDelegate<IQuickPickElement> {\n\tgetHeight(element: IQuickPickElement): number {\n\n\t\tif (element instanceof QuickPickSeparatorElement) {\n\t\t\treturn 30;\n\t\t}\n\t\treturn element.saneDetail ? 44 : 22;\n\t}\n\n\tgetTemplateId(element: IQuickPickElement): string {\n\t\tif (element instanceof QuickPickItemElement) {\n\t\t\treturn QuickPickItemElementRenderer.ID;\n\t\t} else {\n\t\t\treturn QuickPickSeparatorElementRenderer.ID;\n\t\t}\n\t}\n}\n\nclass QuickInputAccessibilityProvider implements IListAccessibilityProvider<IQuickPickElement> {\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('quickInput', \"Quick Input\");\n\t}\n\n\tgetAriaLabel(element: IQuickPickElement): string | null {\n\t\treturn element.separator?.label\n\t\t\t? `${element.saneAriaLabel}, ${element.separator.label}`\n\t\t\t: element.saneAriaLabel;\n\t}\n\n\tgetWidgetRole(): AriaRole {\n\t\treturn 'listbox';\n\t}\n\n\tgetRole(element: IQuickPickElement) {\n\t\treturn element.hasCheckbox ? 'checkbox' : 'option';\n\t}\n\n\tisChecked(element: IQuickPickElement): IValueWithChangeEvent<boolean> | undefined {\n\t\tif (!element.hasCheckbox || !(element instanceof QuickPickItemElement)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tget value() { return element.checked; },\n\t\t\tonDidChange: e => element.onChecked(() => e()),\n\t\t};\n\t}\n}\n\nabstract class BaseQuickInputListRenderer<T extends IQuickPickElement> implements ITreeRenderer<T, void, IQuickInputItemTemplateData> {\n\tabstract templateId: string;\n\n\tconstructor(\n\t\tprivate readonly hoverDelegate: IHoverDelegate | undefined\n\t) { }\n\n\t// TODO: only do the common stuff here and have a subclass handle their specific stuff\n\trenderTemplate(container: HTMLElement): IQuickInputItemTemplateData {\n\t\tconst data: IQuickInputItemTemplateData = Object.create(null);\n\t\tdata.toDisposeElement = new DisposableStore();\n\t\tdata.toDisposeTemplate = new DisposableStore();\n\t\tdata.entry = dom.append(container, $('.quick-input-list-entry'));\n\n\t\t// Checkbox\n\t\tconst label = dom.append(data.entry, $('label.quick-input-list-label'));\n\t\tdata.toDisposeTemplate.add(dom.addStandardDisposableListener(label, dom.EventType.CLICK, e => {\n\t\t\tif (!data.checkbox.offsetParent) { // If checkbox not visible:\n\t\t\t\te.preventDefault(); // Prevent toggle of checkbox when it is immediately shown afterwards. #91740\n\t\t\t}\n\t\t}));\n\t\tdata.checkbox = <HTMLInputElement>dom.append(label, $('input.quick-input-list-checkbox'));\n\t\tdata.checkbox.type = 'checkbox';\n\n\t\t// Rows\n\t\tconst rows = dom.append(label, $('.quick-input-list-rows'));\n\t\tconst row1 = dom.append(rows, $('.quick-input-list-row'));\n\t\tconst row2 = dom.append(rows, $('.quick-input-list-row'));\n\n\t\t// Label\n\t\tdata.label = new IconLabel(row1, { supportHighlights: true, supportDescriptionHighlights: true, supportIcons: true, hoverDelegate: this.hoverDelegate });\n\t\tdata.toDisposeTemplate.add(data.label);\n\t\tdata.icon = <HTMLInputElement>dom.prepend(data.label.element, $('.quick-input-list-icon'));\n\n\t\t// Keybinding\n\t\tconst keybindingContainer = dom.append(row1, $('.quick-input-list-entry-keybinding'));\n\t\tdata.keybinding = new KeybindingLabel(keybindingContainer, OS);\n\t\tdata.toDisposeTemplate.add(data.keybinding);\n\n\t\t// Detail\n\t\tconst detailContainer = dom.append(row2, $('.quick-input-list-label-meta'));\n\t\tdata.detail = new IconLabel(detailContainer, { supportHighlights: true, supportIcons: true, hoverDelegate: this.hoverDelegate });\n\t\tdata.toDisposeTemplate.add(data.detail);\n\n\t\t// Separator\n\t\tdata.separator = dom.append(data.entry, $('.quick-input-list-separator'));\n\n\t\t// Actions\n\t\tdata.actionBar = new ActionBar(data.entry, this.hoverDelegate ? { hoverDelegate: this.hoverDelegate } : undefined);\n\t\tdata.actionBar.domNode.classList.add('quick-input-list-entry-action-bar');\n\t\tdata.toDisposeTemplate.add(data.actionBar);\n\n\t\treturn data;\n\t}\n\n\tdisposeTemplate(data: IQuickInputItemTemplateData): void {\n\t\tdata.toDisposeElement.dispose();\n\t\tdata.toDisposeTemplate.dispose();\n\t}\n\n\tdisposeElement(_element: ITreeNode<IQuickPickElement, void>, _index: number, data: IQuickInputItemTemplateData): void {\n\t\tdata.toDisposeElement.clear();\n\t\tdata.actionBar.clear();\n\t}\n\n\t// TODO: only do the common stuff here and have a subclass handle their specific stuff\n\tabstract renderElement(node: ITreeNode<IQuickPickElement, void>, index: number, data: IQuickInputItemTemplateData): void;\n}\n\nclass QuickPickItemElementRenderer extends BaseQuickInputListRenderer<QuickPickItemElement> {\n\tstatic readonly ID = 'quickpickitem';\n\n\t// Follow what we do in the separator renderer\n\tprivate readonly _itemsWithSeparatorsFrequency = new Map<QuickPickItemElement, number>();\n\n\tconstructor(\n\t\thoverDelegate: IHoverDelegate | undefined,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t) {\n\t\tsuper(hoverDelegate);\n\t}\n\n\tget templateId() {\n\t\treturn QuickPickItemElementRenderer.ID;\n\t}\n\n\toverride renderTemplate(container: HTMLElement): IQuickInputItemTemplateData {\n\t\tconst data = super.renderTemplate(container);\n\n\t\tdata.toDisposeTemplate.add(dom.addStandardDisposableListener(data.checkbox, dom.EventType.CHANGE, e => {\n\t\t\t(data.element as QuickPickItemElement).checked = data.checkbox.checked;\n\t\t}));\n\n\t\treturn data;\n\t}\n\n\trenderElement(node: ITreeNode<QuickPickItemElement, void>, index: number, data: IQuickInputItemTemplateData): void {\n\t\tconst element = node.element;\n\t\tdata.element = element;\n\t\telement.element = data.entry ?? undefined;\n\t\tconst mainItem: IQuickPickItem = element.item;\n\n\t\tdata.checkbox.checked = element.checked;\n\t\tdata.toDisposeElement.add(element.onChecked(checked => data.checkbox.checked = checked));\n\t\tdata.checkbox.disabled = element.checkboxDisabled;\n\n\t\tconst { labelHighlights, descriptionHighlights, detailHighlights } = element;\n\n\t\t// Icon\n\t\tif (mainItem.iconPath) {\n\t\t\tconst icon = isDark(this.themeService.getColorTheme().type) ? mainItem.iconPath.dark : (mainItem.iconPath.light ?? mainItem.iconPath.dark);\n\t\t\tconst iconUrl = URI.revive(icon);\n\t\t\tdata.icon.className = 'quick-input-list-icon';\n\t\t\tdata.icon.style.backgroundImage = dom.asCSSUrl(iconUrl);\n\t\t} else {\n\t\t\tdata.icon.style.backgroundImage = '';\n\t\t\tdata.icon.className = mainItem.iconClass ? `quick-input-list-icon ${mainItem.iconClass}` : '';\n\t\t}\n\n\t\t// Label\n\t\tlet descriptionTitle: IManagedHoverTooltipMarkdownString | undefined;\n\t\t// if we have a tooltip, that will be the hover,\n\t\t// with the saneDescription as fallback if it\n\t\t// is defined\n\t\tif (!element.saneTooltip && element.saneDescription) {\n\t\t\tdescriptionTitle = {\n\t\t\t\tmarkdown: {\n\t\t\t\t\tvalue: element.saneDescription,\n\t\t\t\t\tsupportThemeIcons: true\n\t\t\t\t},\n\t\t\t\tmarkdownNotSupportedFallback: element.saneDescription\n\t\t\t};\n\t\t}\n\t\tconst options: IIconLabelValueOptions = {\n\t\t\tmatches: labelHighlights || [],\n\t\t\t// If we have a tooltip, we want that to be shown and not any other hover\n\t\t\tdescriptionTitle,\n\t\t\tdescriptionMatches: descriptionHighlights || [],\n\t\t\tlabelEscapeNewLines: true\n\t\t};\n\t\toptions.extraClasses = mainItem.iconClasses;\n\t\toptions.italic = mainItem.italic;\n\t\toptions.strikethrough = mainItem.strikethrough;\n\t\tdata.entry.classList.remove('quick-input-list-separator-as-item');\n\t\tdata.label.setLabel(element.saneLabel, element.saneDescription, options);\n\n\t\t// Keybinding\n\t\tdata.keybinding.set(mainItem.keybinding);\n\n\t\t// Detail\n\t\tif (element.saneDetail) {\n\t\t\tlet title: IManagedHoverTooltipMarkdownString | undefined;\n\t\t\t// If we have a tooltip, we want that to be shown and not any other hover\n\t\t\tif (!element.saneTooltip) {\n\t\t\t\ttitle = {\n\t\t\t\t\tmarkdown: {\n\t\t\t\t\t\tvalue: element.saneDetail,\n\t\t\t\t\t\tsupportThemeIcons: true\n\t\t\t\t\t},\n\t\t\t\t\tmarkdownNotSupportedFallback: element.saneDetail\n\t\t\t\t};\n\t\t\t}\n\t\t\tdata.detail.element.style.display = '';\n\t\t\tdata.detail.setLabel(element.saneDetail, undefined, {\n\t\t\t\tmatches: detailHighlights,\n\t\t\t\ttitle,\n\t\t\t\tlabelEscapeNewLines: true\n\t\t\t});\n\t\t} else {\n\t\t\tdata.detail.element.style.display = 'none';\n\t\t}\n\n\t\t// Separator\n\t\tif (element.separator?.label) {\n\t\t\tdata.separator.textContent = element.separator.label;\n\t\t\tdata.separator.style.display = '';\n\t\t\tthis.addItemWithSeparator(element);\n\t\t} else {\n\t\t\tdata.separator.style.display = 'none';\n\t\t}\n\t\tdata.entry.classList.toggle('quick-input-list-separator-border', !!element.separator);\n\n\t\t// Actions\n\t\tconst buttons = mainItem.buttons;\n\t\tif (buttons && buttons.length) {\n\t\t\tdata.actionBar.push(buttons.map((button, index) => quickInputButtonToAction(\n\t\t\t\tbutton,\n\t\t\t\t`id-${index}`,\n\t\t\t\t() => element.fireButtonTriggered({ button, item: element.item })\n\t\t\t)), { icon: true, label: false });\n\t\t\tdata.entry.classList.add('has-actions');\n\t\t} else {\n\t\t\tdata.entry.classList.remove('has-actions');\n\t\t}\n\t}\n\n\toverride disposeElement(element: ITreeNode<QuickPickItemElement, void>, _index: number, data: IQuickInputItemTemplateData): void {\n\t\tthis.removeItemWithSeparator(element.element);\n\t\tsuper.disposeElement(element, _index, data);\n\t}\n\n\tisItemWithSeparatorVisible(item: QuickPickItemElement): boolean {\n\t\treturn this._itemsWithSeparatorsFrequency.has(item);\n\t}\n\n\tprivate addItemWithSeparator(item: QuickPickItemElement): void {\n\t\tthis._itemsWithSeparatorsFrequency.set(item, (this._itemsWithSeparatorsFrequency.get(item) || 0) + 1);\n\t}\n\n\tprivate removeItemWithSeparator(item: QuickPickItemElement): void {\n\t\tconst frequency = this._itemsWithSeparatorsFrequency.get(item) || 0;\n\t\tif (frequency > 1) {\n\t\t\tthis._itemsWithSeparatorsFrequency.set(item, frequency - 1);\n\t\t} else {\n\t\t\tthis._itemsWithSeparatorsFrequency.delete(item);\n\t\t}\n\t}\n}\n\nclass QuickPickSeparatorElementRenderer extends BaseQuickInputListRenderer<QuickPickSeparatorElement> {\n\tstatic readonly ID = 'quickpickseparator';\n\n\t// This is a frequency map because sticky scroll re-uses the same renderer to render a second\n\t// instance of the same separator.\n\tprivate readonly _visibleSeparatorsFrequency = new Map<QuickPickSeparatorElement, number>();\n\n\tget templateId() {\n\t\treturn QuickPickSeparatorElementRenderer.ID;\n\t}\n\n\tget visibleSeparators(): QuickPickSeparatorElement[] {\n\t\treturn [...this._visibleSeparatorsFrequency.keys()];\n\t}\n\n\tisSeparatorVisible(separator: QuickPickSeparatorElement): boolean {\n\t\treturn this._visibleSeparatorsFrequency.has(separator);\n\t}\n\n\toverride renderTemplate(container: HTMLElement): IQuickInputItemTemplateData {\n\t\tconst data = super.renderTemplate(container);\n\t\tdata.checkbox.style.display = 'none';\n\t\treturn data;\n\t}\n\n\toverride renderElement(node: ITreeNode<QuickPickSeparatorElement, void>, index: number, data: IQuickInputItemTemplateData): void {\n\t\tconst element = node.element;\n\t\tdata.element = element;\n\t\telement.element = data.entry ?? undefined;\n\t\telement.element.classList.toggle('focus-inside', !!element.focusInsideSeparator);\n\t\tconst mainItem: IQuickPickSeparator = element.separator;\n\n\t\tconst { labelHighlights, descriptionHighlights, detailHighlights } = element;\n\n\t\t// Icon\n\t\tdata.icon.style.backgroundImage = '';\n\t\tdata.icon.className = '';\n\n\t\t// Label\n\t\tlet descriptionTitle: IManagedHoverTooltipMarkdownString | undefined;\n\t\t// if we have a tooltip, that will be the hover,\n\t\t// with the saneDescription as fallback if it\n\t\t// is defined\n\t\tif (!element.saneTooltip && element.saneDescription) {\n\t\t\tdescriptionTitle = {\n\t\t\t\tmarkdown: {\n\t\t\t\t\tvalue: element.saneDescription,\n\t\t\t\t\tsupportThemeIcons: true\n\t\t\t\t},\n\t\t\t\tmarkdownNotSupportedFallback: element.saneDescription\n\t\t\t};\n\t\t}\n\t\tconst options: IIconLabelValueOptions = {\n\t\t\tmatches: labelHighlights || [],\n\t\t\t// If we have a tooltip, we want that to be shown and not any other hover\n\t\t\tdescriptionTitle,\n\t\t\tdescriptionMatches: descriptionHighlights || [],\n\t\t\tlabelEscapeNewLines: true\n\t\t};\n\t\tdata.entry.classList.add('quick-input-list-separator-as-item');\n\t\tdata.label.setLabel(element.saneLabel, element.saneDescription, options);\n\n\t\t// Detail\n\t\tif (element.saneDetail) {\n\t\t\tlet title: IManagedHoverTooltipMarkdownString | undefined;\n\t\t\t// If we have a tooltip, we want that to be shown and not any other hover\n\t\t\tif (!element.saneTooltip) {\n\t\t\t\ttitle = {\n\t\t\t\t\tmarkdown: {\n\t\t\t\t\t\tvalue: element.saneDetail,\n\t\t\t\t\t\tsupportThemeIcons: true\n\t\t\t\t\t},\n\t\t\t\t\tmarkdownNotSupportedFallback: element.saneDetail\n\t\t\t\t};\n\t\t\t}\n\t\t\tdata.detail.element.style.display = '';\n\t\t\tdata.detail.setLabel(element.saneDetail, undefined, {\n\t\t\t\tmatches: detailHighlights,\n\t\t\t\ttitle,\n\t\t\t\tlabelEscapeNewLines: true\n\t\t\t});\n\t\t} else {\n\t\t\tdata.detail.element.style.display = 'none';\n\t\t}\n\n\t\t// Separator\n\t\tdata.separator.style.display = 'none';\n\t\tdata.entry.classList.add('quick-input-list-separator-border');\n\n\t\t// Actions\n\t\tconst buttons = mainItem.buttons;\n\t\tif (buttons && buttons.length) {\n\t\t\tdata.actionBar.push(buttons.map((button, index) => quickInputButtonToAction(\n\t\t\t\tbutton,\n\t\t\t\t`id-${index}`,\n\t\t\t\t() => element.fireSeparatorButtonTriggered({ button, separator: element.separator })\n\t\t\t)), { icon: true, label: false });\n\t\t\tdata.entry.classList.add('has-actions');\n\t\t} else {\n\t\t\tdata.entry.classList.remove('has-actions');\n\t\t}\n\n\t\tthis.addSeparator(element);\n\t}\n\n\toverride disposeElement(element: ITreeNode<QuickPickSeparatorElement, void>, _index: number, data: IQuickInputItemTemplateData): void {\n\t\tthis.removeSeparator(element.element);\n\t\tif (!this.isSeparatorVisible(element.element)) {\n\t\t\telement.element.element?.classList.remove('focus-inside');\n\t\t}\n\t\tsuper.disposeElement(element, _index, data);\n\t}\n\n\tprivate addSeparator(separator: QuickPickSeparatorElement): void {\n\t\tthis._visibleSeparatorsFrequency.set(separator, (this._visibleSeparatorsFrequency.get(separator) || 0) + 1);\n\t}\n\n\tprivate removeSeparator(separator: QuickPickSeparatorElement): void {\n\t\tconst frequency = this._visibleSeparatorsFrequency.get(separator) || 0;\n\t\tif (frequency > 1) {\n\t\t\tthis._visibleSeparatorsFrequency.set(separator, frequency - 1);\n\t\t} else {\n\t\t\tthis._visibleSeparatorsFrequency.delete(separator);\n\t\t}\n\t}\n}\n\nexport class QuickInputTree extends Disposable {\n\n\t//#region QuickInputTree Events\n\n\tprivate readonly _onKeyDown = new Emitter<StandardKeyboardEvent>();\n\t/**\n\t * Event that is fired when the tree receives a keydown.\n\t*/\n\treadonly onKeyDown: Event<StandardKeyboardEvent> = this._onKeyDown.event;\n\n\tprivate readonly _onLeave = new Emitter<void>();\n\t/**\n\t * Event that is fired when the tree would no longer have focus.\n\t*/\n\treadonly onLeave: Event<void> = this._onLeave.event;\n\n\tprivate readonly _visibleCountObservable = observableValue('VisibleCount', 0);\n\tonChangedVisibleCount: Event<number> = Event.fromObservable(this._visibleCountObservable, this._store);\n\n\tprivate readonly _allVisibleCheckedObservable = observableValue('AllVisibleChecked', false);\n\tonChangedAllVisibleChecked: Event<boolean> = Event.fromObservable(this._allVisibleCheckedObservable, this._store);\n\n\tprivate readonly _checkedCountObservable = observableValue('CheckedCount', 0);\n\tonChangedCheckedCount: Event<number> = Event.fromObservable(this._checkedCountObservable, this._store);\n\n\tprivate readonly _checkedElementsObservable = observableValueOpts({ equalsFn: equals }, new Array<IQuickPickItem>());\n\tonChangedCheckedElements: Event<IQuickPickItem[]> = Event.fromObservable(this._checkedElementsObservable, this._store);\n\n\tprivate readonly _onButtonTriggered = new Emitter<IQuickPickItemButtonEvent<IQuickPickItem>>();\n\tonButtonTriggered = this._onButtonTriggered.event;\n\n\tprivate readonly _onSeparatorButtonTriggered = new Emitter<IQuickPickSeparatorButtonEvent>();\n\tonSeparatorButtonTriggered = this._onSeparatorButtonTriggered.event;\n\n\tprivate readonly _elementChecked = new Emitter<{ element: IQuickPickElement; checked: boolean }>();\n\tprivate readonly _elementCheckedEventBufferer = new EventBufferer();\n\n\t//#endregion\n\n\tprivate _hasCheckboxes = false;\n\n\tprivate readonly _container: HTMLElement;\n\tprivate readonly _tree: WorkbenchObjectTree<IQuickPickElement, void>;\n\tprivate readonly _separatorRenderer: QuickPickSeparatorElementRenderer;\n\tprivate readonly _itemRenderer: QuickPickItemElementRenderer;\n\tprivate _inputElements = new Array<QuickPickItem>();\n\tprivate _elementTree = new Array<IQuickPickElement>();\n\tprivate _itemElements = new Array<QuickPickItemElement>();\n\t// Elements that apply to the current set of elements\n\tprivate readonly _elementDisposable = this._register(new DisposableStore());\n\tprivate _lastHover: IHoverWidget | undefined;\n\tprivate _lastQueryString: string | undefined;\n\n\tconstructor(\n\t\tprivate parent: HTMLElement,\n\t\tprivate hoverDelegate: IHoverDelegate,\n\t\tprivate linkOpenerDelegate: (content: string) => void,\n\t\tid: string,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService\n\t) {\n\t\tsuper();\n\t\tthis._container = dom.append(this.parent, $('.quick-input-list'));\n\t\tthis._separatorRenderer = new QuickPickSeparatorElementRenderer(hoverDelegate);\n\t\tthis._itemRenderer = instantiationService.createInstance(QuickPickItemElementRenderer, hoverDelegate);\n\t\tthis._tree = this._register(instantiationService.createInstance(\n\t\t\tWorkbenchObjectTree<IQuickPickElement, void>,\n\t\t\t'QuickInput',\n\t\t\tthis._container,\n\t\t\tnew QuickInputItemDelegate(),\n\t\t\t[this._itemRenderer, this._separatorRenderer],\n\t\t\t{\n\t\t\t\tfilter: {\n\t\t\t\t\tfilter(element) {\n\t\t\t\t\t\treturn element.hidden\n\t\t\t\t\t\t\t? TreeVisibility.Hidden\n\t\t\t\t\t\t\t: element instanceof QuickPickSeparatorElement\n\t\t\t\t\t\t\t\t? TreeVisibility.Recurse\n\t\t\t\t\t\t\t\t: TreeVisibility.Visible;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsorter: {\n\t\t\t\t\tcompare: (element, otherElement) => {\n\t\t\t\t\t\tif (!this.sortByLabel || !this._lastQueryString) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst normalizedSearchValue = this._lastQueryString.toLowerCase();\n\t\t\t\t\t\treturn compareEntries(element, otherElement, normalizedSearchValue);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: new QuickInputAccessibilityProvider(),\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\thideTwistiesOfChildlessElements: true,\n\t\t\t\trenderIndentGuides: RenderIndentGuides.None,\n\t\t\t\tfindWidgetEnabled: false,\n\t\t\t\tindent: 0,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tallowNonCollapsibleParents: true,\n\t\t\t\talwaysConsumeMouseWheel: true\n\t\t\t}\n\t\t));\n\t\tthis._tree.getHTMLElement().id = id;\n\t\tthis._registerListeners();\n\t}\n\n\t//#region public getters/setters\n\n\t@memoize\n\tget onDidChangeFocus() {\n\t\treturn Event.map(\n\t\t\tthis._tree.onDidChangeFocus,\n\t\t\te => e.elements.filter((e): e is QuickPickItemElement => e instanceof QuickPickItemElement).map(e => e.item),\n\t\t\tthis._store\n\t\t);\n\t}\n\n\t@memoize\n\tget onDidChangeSelection() {\n\t\treturn Event.map(\n\t\t\tthis._tree.onDidChangeSelection,\n\t\t\te => ({\n\t\t\t\titems: e.elements.filter((e): e is QuickPickItemElement => e instanceof QuickPickItemElement).map(e => e.item),\n\t\t\t\tevent: e.browserEvent\n\t\t\t}),\n\t\t\tthis._store\n\t\t);\n\t}\n\n\tget displayed() {\n\t\treturn this._container.style.display !== 'none';\n\t}\n\n\tset displayed(value: boolean) {\n\t\tthis._container.style.display = value ? '' : 'none';\n\t}\n\n\tget scrollTop() {\n\t\treturn this._tree.scrollTop;\n\t}\n\n\tset scrollTop(scrollTop: number) {\n\t\tthis._tree.scrollTop = scrollTop;\n\t}\n\n\tget ariaLabel() {\n\t\treturn this._tree.ariaLabel;\n\t}\n\n\tset ariaLabel(label: string | null) {\n\t\tthis._tree.ariaLabel = label ?? '';\n\t}\n\n\tset enabled(value: boolean) {\n\t\tthis._tree.getHTMLElement().style.pointerEvents = value ? '' : 'none';\n\t}\n\n\tprivate _matchOnDescription = false;\n\tget matchOnDescription() {\n\t\treturn this._matchOnDescription;\n\t}\n\tset matchOnDescription(value: boolean) {\n\t\tthis._matchOnDescription = value;\n\t}\n\n\tprivate _matchOnDetail = false;\n\tget matchOnDetail() {\n\t\treturn this._matchOnDetail;\n\t}\n\tset matchOnDetail(value: boolean) {\n\t\tthis._matchOnDetail = value;\n\t}\n\n\tprivate _matchOnLabel = true;\n\tget matchOnLabel() {\n\t\treturn this._matchOnLabel;\n\t}\n\tset matchOnLabel(value: boolean) {\n\t\tthis._matchOnLabel = value;\n\t}\n\n\tprivate _matchOnLabelMode: 'fuzzy' | 'contiguous' = 'fuzzy';\n\tget matchOnLabelMode() {\n\t\treturn this._matchOnLabelMode;\n\t}\n\tset matchOnLabelMode(value: 'fuzzy' | 'contiguous') {\n\t\tthis._matchOnLabelMode = value;\n\t}\n\n\tprivate _matchOnMeta = true;\n\tget matchOnMeta() {\n\t\treturn this._matchOnMeta;\n\t}\n\tset matchOnMeta(value: boolean) {\n\t\tthis._matchOnMeta = value;\n\t}\n\n\tprivate _sortByLabel = true;\n\tget sortByLabel() {\n\t\treturn this._sortByLabel;\n\t}\n\tset sortByLabel(value: boolean) {\n\t\tthis._sortByLabel = value;\n\t}\n\n\tprivate _shouldLoop = true;\n\tget shouldLoop() {\n\t\treturn this._shouldLoop;\n\t}\n\tset shouldLoop(value: boolean) {\n\t\tthis._shouldLoop = value;\n\t}\n\n\t//#endregion\n\n\t//#region register listeners\n\n\tprivate _registerListeners() {\n\t\tthis._registerOnKeyDown();\n\t\tthis._registerOnContainerClick();\n\t\tthis._registerOnMouseMiddleClick();\n\t\tthis._registerOnTreeModelChanged();\n\t\tthis._registerOnElementChecked();\n\t\tthis._registerOnContextMenu();\n\t\tthis._registerHoverListeners();\n\t\tthis._registerSelectionChangeListener();\n\t\tthis._registerSeparatorActionShowingListeners();\n\t}\n\n\tprivate _registerOnKeyDown() {\n\t\t// TODO: Should this be added at a higher level?\n\t\tthis._register(this._tree.onKeyDown(e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase KeyCode.Space:\n\t\t\t\t\tthis.toggleCheckbox();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis._onKeyDown.fire(event);\n\t\t}));\n\t}\n\n\tprivate _registerOnContainerClick() {\n\t\tthis._register(dom.addDisposableListener(this._container, dom.EventType.CLICK, e => {\n\t\t\tif (e.x || e.y) { // Avoid 'click' triggered by 'space' on checkbox.\n\t\t\t\tthis._onLeave.fire();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerOnMouseMiddleClick() {\n\t\tthis._register(dom.addDisposableListener(this._container, dom.EventType.AUXCLICK, e => {\n\t\t\tif (e.button === 1) {\n\t\t\t\tthis._onLeave.fire();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerOnTreeModelChanged() {\n\t\tthis._register(this._tree.onDidChangeModel(() => {\n\t\t\tconst visibleCount = this._itemElements.filter(e => !e.hidden).length;\n\t\t\tthis._visibleCountObservable.set(visibleCount, undefined);\n\t\t\tif (this._hasCheckboxes) {\n\t\t\t\tthis._updateCheckedObservables();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerOnElementChecked() {\n\t\t// Only fire the last event when buffered\n\t\tthis._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event, (_, e) => e)(_ => this._updateCheckedObservables()));\n\t}\n\n\tprivate _registerOnContextMenu() {\n\t\tthis._register(this._tree.onContextMenu(e => {\n\t\t\tif (e.element) {\n\t\t\t\te.browserEvent.preventDefault();\n\n\t\t\t\t// we want to treat a context menu event as\n\t\t\t\t// a gesture to open the item at the index\n\t\t\t\t// since we do not have any context menu\n\t\t\t\t// this enables for example macOS to Ctrl-\n\t\t\t\t// click on an item to open it.\n\t\t\t\tthis._tree.setSelection([e.element]);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerHoverListeners() {\n\t\tconst delayer = this._register(new ThrottledDelayer(this.hoverDelegate.delay));\n\t\tthis._register(this._tree.onMouseOver(async e => {\n\t\t\t// If we hover over an anchor element, we don't want to show the hover because\n\t\t\t// the anchor may have a tooltip that we want to show instead.\n\t\t\tif (dom.isHTMLAnchorElement(e.browserEvent.target)) {\n\t\t\t\tdelayer.cancel();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t// anchors are an exception as called out above so we skip them here\n\t\t\t\t!(dom.isHTMLAnchorElement(e.browserEvent.relatedTarget)) &&\n\t\t\t\t// check if the mouse is still over the same element\n\t\t\t\tdom.isAncestor(e.browserEvent.relatedTarget as Node, e.element?.element as Node)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait delayer.trigger(async () => {\n\t\t\t\t\tif (e.element instanceof QuickPickItemElement) {\n\t\t\t\t\t\tthis.showHover(e.element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore cancellation errors due to mouse out\n\t\t\t\tif (!isCancellationError(e)) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._tree.onMouseOut(e => {\n\t\t\t// onMouseOut triggers every time a new element has been moused over\n\t\t\t// even if it's on the same list item. We only want one event, so we\n\t\t\t// check if the mouse is still over the same element.\n\t\t\tif (dom.isAncestor(e.browserEvent.relatedTarget as Node, e.element?.element as Node)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdelayer.cancel();\n\t\t}));\n\t}\n\n\t/**\n\t * Register's focus change and mouse events so that we can track when items inside of a\n\t * separator's section are focused or hovered so that we can display the separator's actions\n\t */\n\tprivate _registerSeparatorActionShowingListeners() {\n\t\tthis._register(this._tree.onDidChangeFocus(e => {\n\t\t\tconst parent = e.elements[0]\n\t\t\t\t? this._tree.getParentElement(e.elements[0]) as QuickPickSeparatorElement\n\t\t\t\t// treat null as focus lost and when we have no separators\n\t\t\t\t: null;\n\t\t\tfor (const separator of this._separatorRenderer.visibleSeparators) {\n\t\t\t\tconst value = separator === parent;\n\t\t\t\t// get bitness of ACTIVE_ITEM and check if it changed\n\t\t\t\tconst currentActive = !!(separator.focusInsideSeparator & QuickPickSeparatorFocusReason.ACTIVE_ITEM);\n\t\t\t\tif (currentActive !== value) {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tseparator.focusInsideSeparator |= QuickPickSeparatorFocusReason.ACTIVE_ITEM;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseparator.focusInsideSeparator &= ~QuickPickSeparatorFocusReason.ACTIVE_ITEM;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._tree.rerender(separator);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._tree.onMouseOver(e => {\n\t\t\tconst parent = e.element\n\t\t\t\t? this._tree.getParentElement(e.element) as QuickPickSeparatorElement\n\t\t\t\t: null;\n\t\t\tfor (const separator of this._separatorRenderer.visibleSeparators) {\n\t\t\t\tif (separator !== parent) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst currentMouse = !!(separator.focusInsideSeparator & QuickPickSeparatorFocusReason.MOUSE_HOVER);\n\t\t\t\tif (!currentMouse) {\n\t\t\t\t\tseparator.focusInsideSeparator |= QuickPickSeparatorFocusReason.MOUSE_HOVER;\n\t\t\t\t\tthis._tree.rerender(separator);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._tree.onMouseOut(e => {\n\t\t\tconst parent = e.element\n\t\t\t\t? this._tree.getParentElement(e.element) as QuickPickSeparatorElement\n\t\t\t\t: null;\n\t\t\tfor (const separator of this._separatorRenderer.visibleSeparators) {\n\t\t\t\tif (separator !== parent) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst currentMouse = !!(separator.focusInsideSeparator & QuickPickSeparatorFocusReason.MOUSE_HOVER);\n\t\t\t\tif (currentMouse) {\n\t\t\t\t\tseparator.focusInsideSeparator &= ~QuickPickSeparatorFocusReason.MOUSE_HOVER;\n\t\t\t\t\tthis._tree.rerender(separator);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerSelectionChangeListener() {\n\t\t// When the user selects a separator, the separator will move to the top and focus will be\n\t\t// set to the first element after the separator.\n\t\tthis._register(this._tree.onDidChangeSelection(e => {\n\t\t\tconst elementsWithoutSeparators = e.elements.filter((e): e is QuickPickItemElement => e instanceof QuickPickItemElement);\n\t\t\tif (elementsWithoutSeparators.length !== e.elements.length) {\n\t\t\t\tif (e.elements.length === 1 && e.elements[0] instanceof QuickPickSeparatorElement) {\n\t\t\t\t\tthis._tree.setFocus([e.elements[0].children[0]]);\n\t\t\t\t\tthis._tree.reveal(e.elements[0], 0);\n\t\t\t\t}\n\t\t\t\tthis._tree.setSelection(elementsWithoutSeparators);\n\t\t\t}\n\t\t}));\n\t}\n\n\t//#endregion\n\n\t//#region public methods\n\n\tsetAllVisibleChecked(checked: boolean) {\n\t\tthis._elementCheckedEventBufferer.bufferEvents(() => {\n\t\t\tthis._itemElements.forEach(element => {\n\t\t\t\tif (!element.hidden && !element.checkboxDisabled) {\n\t\t\t\t\t// Would fire an event if we didn't beffer the events\n\t\t\t\t\telement.checked = checked;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tsetElements(inputElements: QuickPickItem[]): void {\n\t\tthis._elementDisposable.clear();\n\t\tthis._lastQueryString = undefined;\n\t\tthis._inputElements = inputElements;\n\t\tthis._hasCheckboxes = this.parent.classList.contains('show-checkboxes');\n\t\tlet currentSeparatorElement: QuickPickSeparatorElement | undefined;\n\t\tthis._itemElements = new Array<QuickPickItemElement>();\n\t\tthis._elementTree = inputElements.reduce((result, item, index) => {\n\t\t\tlet element: IQuickPickElement;\n\t\t\tif (item.type === 'separator') {\n\t\t\t\tif (!item.buttons) {\n\t\t\t\t\t// This separator will be rendered as a part of the list item\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\tcurrentSeparatorElement = new QuickPickSeparatorElement(\n\t\t\t\t\tindex,\n\t\t\t\t\te => this._onSeparatorButtonTriggered.fire(e),\n\t\t\t\t\titem\n\t\t\t\t);\n\t\t\t\telement = currentSeparatorElement;\n\t\t\t} else {\n\t\t\t\tconst previous = index > 0 ? inputElements[index - 1] : undefined;\n\t\t\t\tlet separator: IQuickPickSeparator | undefined;\n\t\t\t\tif (previous && previous.type === 'separator' && !previous.buttons) {\n\t\t\t\t\t// Found an inline separator so we clear out the current separator element\n\t\t\t\t\tcurrentSeparatorElement = undefined;\n\t\t\t\t\tseparator = previous;\n\t\t\t\t}\n\t\t\t\tconst qpi = new QuickPickItemElement(\n\t\t\t\t\tindex,\n\t\t\t\t\tthis._hasCheckboxes,\n\t\t\t\t\te => this._onButtonTriggered.fire(e),\n\t\t\t\t\tthis._elementChecked,\n\t\t\t\t\titem,\n\t\t\t\t\tseparator,\n\t\t\t\t);\n\t\t\t\tthis._itemElements.push(qpi);\n\n\t\t\t\tif (currentSeparatorElement) {\n\t\t\t\t\tcurrentSeparatorElement.children.push(qpi);\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\telement = qpi;\n\t\t\t}\n\n\t\t\tresult.push(element);\n\t\t\treturn result;\n\t\t}, new Array<IQuickPickElement>());\n\n\t\tthis._setElementsToTree(this._elementTree);\n\n\t\t// Accessibility hack, unfortunately on next tick\n\t\t// https://github.com/microsoft/vscode/issues/211976\n\t\tif (this.accessibilityService.isScreenReaderOptimized()) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst focusedElement = this._tree.getHTMLElement().querySelector(`.monaco-list-row.focused`);\n\t\t\t\tconst parent = focusedElement?.parentNode;\n\t\t\t\tif (focusedElement && parent) {\n\t\t\t\t\tconst nextSibling = focusedElement.nextSibling;\n\t\t\t\t\tfocusedElement.remove();\n\t\t\t\t\tparent.insertBefore(focusedElement, nextSibling);\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\tsetFocusedElements(items: IQuickPickItem[]) {\n\t\tconst elements = items.map(item => this._itemElements.find(e => e.item === item))\n\t\t\t.filter((e): e is QuickPickItemElement => !!e)\n\t\t\t.filter(e => !e.hidden);\n\t\tthis._tree.setFocus(elements);\n\t\tif (items.length > 0) {\n\t\t\tconst focused = this._tree.getFocus()[0];\n\t\t\tif (focused) {\n\t\t\t\tthis._tree.reveal(focused);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActiveDescendant() {\n\t\treturn this._tree.getHTMLElement().getAttribute('aria-activedescendant');\n\t}\n\n\tsetSelectedElements(items: IQuickPickItem[]) {\n\t\tconst elements = items.map(item => this._itemElements.find(e => e.item === item))\n\t\t\t.filter((e): e is QuickPickItemElement => !!e);\n\t\tthis._tree.setSelection(elements);\n\t}\n\n\tgetCheckedElements() {\n\t\treturn this._itemElements.filter(e => e.checked)\n\t\t\t.map(e => e.item);\n\t}\n\n\tsetCheckedElements(items: IQuickPickItem[]) {\n\t\tthis._elementCheckedEventBufferer.bufferEvents(() => {\n\t\t\tconst checked = new Set();\n\t\t\tfor (const item of items) {\n\t\t\t\tchecked.add(item);\n\t\t\t}\n\t\t\tfor (const element of this._itemElements) {\n\t\t\t\t// Would fire an event if we didn't beffer the events\n\t\t\t\telement.checked = checked.has(element.item);\n\t\t\t}\n\t\t});\n\t}\n\n\tfocus(what: QuickPickFocus): void {\n\t\tif (!this._itemElements.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (what === QuickPickFocus.Second && this._itemElements.length < 2) {\n\t\t\twhat = QuickPickFocus.First;\n\t\t}\n\n\t\tswitch (what) {\n\t\t\tcase QuickPickFocus.First:\n\t\t\t\tthis._tree.scrollTop = 0;\n\t\t\t\tthis._tree.focusFirst(undefined, (e) => e.element instanceof QuickPickItemElement);\n\t\t\t\tbreak;\n\t\t\tcase QuickPickFocus.Second: {\n\t\t\t\tthis._tree.scrollTop = 0;\n\t\t\t\tlet isSecondItem = false;\n\t\t\t\tthis._tree.focusFirst(undefined, (e) => {\n\t\t\t\t\tif (!(e.element instanceof QuickPickItemElement)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (isSecondItem) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tisSecondItem = !isSecondItem;\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase QuickPickFocus.Last:\n\t\t\t\tthis._tree.scrollTop = this._tree.scrollHeight;\n\t\t\t\tthis._tree.focusLast(undefined, (e) => e.element instanceof QuickPickItemElement);\n\t\t\t\tbreak;\n\t\t\tcase QuickPickFocus.Next: {\n\t\t\t\tconst prevFocus = this._tree.getFocus();\n\t\t\t\tthis._tree.focusNext(undefined, this._shouldLoop, undefined, (e) => {\n\t\t\t\t\tif (!(e.element instanceof QuickPickItemElement)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tthis._tree.reveal(e.element);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t\tconst currentFocus = this._tree.getFocus();\n\t\t\t\tif (prevFocus.length && prevFocus[0] === currentFocus[0] && prevFocus[0] === this._itemElements[this._itemElements.length - 1]) {\n\t\t\t\t\tthis._onLeave.fire();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase QuickPickFocus.Previous: {\n\t\t\t\tconst prevFocus = this._tree.getFocus();\n\t\t\t\tthis._tree.focusPrevious(undefined, this._shouldLoop, undefined, (e) => {\n\t\t\t\t\tif (!(e.element instanceof QuickPickItemElement)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tconst parent = this._tree.getParentElement(e.element);\n\t\t\t\t\tif (parent === null || (parent as QuickPickSeparatorElement).children[0] !== e.element) {\n\t\t\t\t\t\tthis._tree.reveal(e.element);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Only if we are the first child of a separator do we reveal the separator\n\t\t\t\t\t\tthis._tree.reveal(parent);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t\tconst currentFocus = this._tree.getFocus();\n\t\t\t\tif (prevFocus.length && prevFocus[0] === currentFocus[0] && prevFocus[0] === this._itemElements[0]) {\n\t\t\t\t\tthis._onLeave.fire();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase QuickPickFocus.NextPage:\n\t\t\t\tthis._tree.focusNextPage(undefined, (e) => {\n\t\t\t\t\tif (!(e.element instanceof QuickPickItemElement)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tthis._tree.reveal(e.element);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase QuickPickFocus.PreviousPage:\n\t\t\t\tthis._tree.focusPreviousPage(undefined, (e) => {\n\t\t\t\t\tif (!(e.element instanceof QuickPickItemElement)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tconst parent = this._tree.getParentElement(e.element);\n\t\t\t\t\tif (parent === null || (parent as QuickPickSeparatorElement).children[0] !== e.element) {\n\t\t\t\t\t\tthis._tree.reveal(e.element);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._tree.reveal(parent);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase QuickPickFocus.NextSeparator: {\n\t\t\t\tlet foundSeparatorAsItem = false;\n\t\t\t\tconst before = this._tree.getFocus()[0];\n\t\t\t\tthis._tree.focusNext(undefined, true, undefined, (e) => {\n\t\t\t\t\tif (foundSeparatorAsItem) {\n\t\t\t\t\t\t// This should be the index right after the separator so it\n\t\t\t\t\t\t// is the item we want to focus.\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.element instanceof QuickPickSeparatorElement) {\n\t\t\t\t\t\tfoundSeparatorAsItem = true;\n\t\t\t\t\t\t// If the separator is visible, then we should just reveal its first child so it's not as jarring.\n\t\t\t\t\t\tif (this._separatorRenderer.isSeparatorVisible(e.element)) {\n\t\t\t\t\t\t\tthis._tree.reveal(e.element.children[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If the separator is not visible, then we should\n\t\t\t\t\t\t\t// push it up to the top of the list.\n\t\t\t\t\t\t\tthis._tree.reveal(e.element, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.element instanceof QuickPickItemElement) {\n\t\t\t\t\t\tif (e.element.separator) {\n\t\t\t\t\t\t\tif (this._itemRenderer.isItemWithSeparatorVisible(e.element)) {\n\t\t\t\t\t\t\t\tthis._tree.reveal(e.element);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._tree.reveal(e.element, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (e.element === this._elementTree[0]) {\n\t\t\t\t\t\t\t// We should stop at the first item in the list if it's a regular item.\n\t\t\t\t\t\t\tthis._tree.reveal(e.element, 0);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\tconst after = this._tree.getFocus()[0];\n\t\t\t\tif (before === after) {\n\t\t\t\t\t// If we didn't move, then we should just move to the end\n\t\t\t\t\t// of the list.\n\t\t\t\t\tthis._tree.scrollTop = this._tree.scrollHeight;\n\t\t\t\t\tthis._tree.focusLast(undefined, (e) => e.element instanceof QuickPickItemElement);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase QuickPickFocus.PreviousSeparator: {\n\t\t\t\tlet focusElement: IQuickPickElement | undefined;\n\t\t\t\t// If we are already sitting on an inline separator, then we\n\t\t\t\t// have already found the _current_ separator and need to\n\t\t\t\t// move to the previous one.\n\t\t\t\tlet foundSeparator = !!this._tree.getFocus()[0]?.separator;\n\t\t\t\tthis._tree.focusPrevious(undefined, true, undefined, (e) => {\n\t\t\t\t\tif (e.element instanceof QuickPickSeparatorElement) {\n\t\t\t\t\t\tif (foundSeparator) {\n\t\t\t\t\t\t\tif (!focusElement) {\n\t\t\t\t\t\t\t\tif (this._separatorRenderer.isSeparatorVisible(e.element)) {\n\t\t\t\t\t\t\t\t\tthis._tree.reveal(e.element);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis._tree.reveal(e.element, 0);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfocusElement = e.element.children[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfoundSeparator = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.element instanceof QuickPickItemElement) {\n\t\t\t\t\t\tif (!focusElement) {\n\t\t\t\t\t\t\tif (e.element.separator) {\n\t\t\t\t\t\t\t\tif (this._itemRenderer.isItemWithSeparatorVisible(e.element)) {\n\t\t\t\t\t\t\t\t\tthis._tree.reveal(e.element);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis._tree.reveal(e.element, 0);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfocusElement = e.element;\n\t\t\t\t\t\t\t} else if (e.element === this._elementTree[0]) {\n\t\t\t\t\t\t\t\t// We should stop at the first item in the list if it's a regular item.\n\t\t\t\t\t\t\t\tthis._tree.reveal(e.element, 0);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\tif (focusElement) {\n\t\t\t\t\tthis._tree.setFocus([focusElement]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tclearFocus() {\n\t\tthis._tree.setFocus([]);\n\t}\n\n\tdomFocus() {\n\t\tthis._tree.domFocus();\n\t}\n\n\tlayout(maxHeight?: number): void {\n\t\tthis._tree.getHTMLElement().style.maxHeight = maxHeight ? `${\n\t\t\t// Make sure height aligns with list item heights\n\t\t\tMath.floor(maxHeight / 44) * 44\n\t\t\t// Add some extra height so that it's clear there's more to scroll\n\t\t\t+ 6\n\t\t\t}px` : '';\n\t\tthis._tree.layout();\n\t}\n\n\tfilter(query: string): boolean {\n\t\tthis._lastQueryString = query;\n\t\tif (!(this._sortByLabel || this._matchOnLabel || this._matchOnDescription || this._matchOnDetail)) {\n\t\t\tthis._tree.layout();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst queryWithWhitespace = query;\n\t\tquery = query.trim();\n\n\t\t// Reset filtering\n\t\tif (!query || !(this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n\t\t\tthis._itemElements.forEach(element => {\n\t\t\t\telement.labelHighlights = undefined;\n\t\t\t\telement.descriptionHighlights = undefined;\n\t\t\t\telement.detailHighlights = undefined;\n\t\t\t\telement.hidden = false;\n\t\t\t\tconst previous = element.index && this._inputElements[element.index - 1];\n\t\t\t\tif (element.item) {\n\t\t\t\t\telement.separator = previous && previous.type === 'separator' && !previous.buttons ? previous : undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Filter by value (since we support icons in labels, use $(..) aware fuzzy matching)\n\t\telse {\n\t\t\tlet currentSeparator: IQuickPickSeparator | undefined;\n\t\t\tthis._itemElements.forEach(element => {\n\t\t\t\tlet labelHighlights: IMatch[] | undefined;\n\t\t\t\tif (this.matchOnLabelMode === 'fuzzy') {\n\t\t\t\t\tlabelHighlights = this.matchOnLabel ? matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneLabel)) ?? undefined : undefined;\n\t\t\t\t} else {\n\t\t\t\t\tlabelHighlights = this.matchOnLabel ? matchesContiguousIconAware(queryWithWhitespace, parseLabelWithIcons(element.saneLabel)) ?? undefined : undefined;\n\t\t\t\t}\n\t\t\t\tconst descriptionHighlights = this.matchOnDescription ? matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDescription || '')) ?? undefined : undefined;\n\t\t\t\tconst detailHighlights = this.matchOnDetail ? matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDetail || '')) ?? undefined : undefined;\n\n\t\t\t\tif (labelHighlights || descriptionHighlights || detailHighlights) {\n\t\t\t\t\telement.labelHighlights = labelHighlights;\n\t\t\t\t\telement.descriptionHighlights = descriptionHighlights;\n\t\t\t\t\telement.detailHighlights = detailHighlights;\n\t\t\t\t\telement.hidden = false;\n\t\t\t\t} else {\n\t\t\t\t\telement.labelHighlights = undefined;\n\t\t\t\t\telement.descriptionHighlights = undefined;\n\t\t\t\t\telement.detailHighlights = undefined;\n\t\t\t\t\telement.hidden = element.item ? !element.item.alwaysShow : true;\n\t\t\t\t}\n\n\t\t\t\t// Ensure separators are filtered out first before deciding if we need to bring them back\n\t\t\t\tif (element.item) {\n\t\t\t\t\telement.separator = undefined;\n\t\t\t\t} else if (element.separator) {\n\t\t\t\t\telement.hidden = true;\n\t\t\t\t}\n\n\t\t\t\t// we can show the separator unless the list gets sorted by match\n\t\t\t\tif (!this.sortByLabel) {\n\t\t\t\t\tconst previous = element.index && this._inputElements[element.index - 1] || undefined;\n\t\t\t\t\tif (previous?.type === 'separator' && !previous.buttons) {\n\t\t\t\t\t\tcurrentSeparator = previous;\n\t\t\t\t\t}\n\t\t\t\t\tif (currentSeparator && !element.hidden) {\n\t\t\t\t\t\telement.separator = currentSeparator;\n\t\t\t\t\t\tcurrentSeparator = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis._setElementsToTree(this._sortByLabel && query\n\t\t\t// We don't render any separators if we're sorting so just render the elements\n\t\t\t? this._itemElements\n\t\t\t// Render the full tree\n\t\t\t: this._elementTree\n\t\t);\n\t\tthis._tree.layout();\n\t\treturn true;\n\t}\n\n\ttoggleCheckbox() {\n\t\tthis._elementCheckedEventBufferer.bufferEvents(() => {\n\t\t\tconst elements = this._tree.getFocus().filter((e): e is QuickPickItemElement => e instanceof QuickPickItemElement);\n\t\t\tconst allChecked = this._allVisibleChecked(elements);\n\t\t\tfor (const element of elements) {\n\t\t\t\tif (!element.checkboxDisabled) {\n\t\t\t\t\t// Would fire an event if we didn't have the flag set\n\t\t\t\t\telement.checked = !allChecked;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstyle(styles: IListStyles) {\n\t\tthis._tree.style(styles);\n\t}\n\n\ttoggleHover() {\n\t\tconst focused: IQuickPickElement | null = this._tree.getFocus()[0];\n\t\tif (!focused?.saneTooltip || !(focused instanceof QuickPickItemElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// if there's a hover already, hide it (toggle off)\n\t\tif (this._lastHover && !this._lastHover.isDisposed) {\n\t\t\tthis._lastHover.dispose();\n\t\t\treturn;\n\t\t}\n\n\t\t// If there is no hover, show it (toggle on)\n\t\tthis.showHover(focused);\n\t\tconst store = new DisposableStore();\n\t\tstore.add(this._tree.onDidChangeFocus(e => {\n\t\t\tif (e.elements[0] instanceof QuickPickItemElement) {\n\t\t\t\tthis.showHover(e.elements[0]);\n\t\t\t}\n\t\t}));\n\t\tif (this._lastHover) {\n\t\t\tstore.add(this._lastHover);\n\t\t}\n\t\tthis._elementDisposable.add(store);\n\t}\n\n\t//#endregion\n\n\t//#region private methods\n\n\tprivate _setElementsToTree(elements: IQuickPickElement[]) {\n\t\tconst treeElements = new Array<IObjectTreeElement<IQuickPickElement>>();\n\t\tfor (const element of elements) {\n\t\t\tif (element instanceof QuickPickSeparatorElement) {\n\t\t\t\ttreeElements.push({\n\t\t\t\t\telement,\n\t\t\t\t\tcollapsible: false,\n\t\t\t\t\tcollapsed: false,\n\t\t\t\t\tchildren: element.children.map(e => ({\n\t\t\t\t\t\telement: e,\n\t\t\t\t\t\tcollapsible: false,\n\t\t\t\t\t\tcollapsed: false,\n\t\t\t\t\t})),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttreeElements.push({\n\t\t\t\t\telement,\n\t\t\t\t\tcollapsible: false,\n\t\t\t\t\tcollapsed: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis._tree.setChildren(null, treeElements);\n\t}\n\n\tprivate _allVisibleChecked(elements: QuickPickItemElement[], whenNoneVisible = true) {\n\t\tfor (let i = 0, n = elements.length; i < n; i++) {\n\t\t\tconst element = elements[i];\n\t\t\tif (!element.hidden) {\n\t\t\t\tif (!element.checked) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\twhenNoneVisible = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn whenNoneVisible;\n\t}\n\n\tprivate _updateCheckedObservables() {\n\t\ttransaction((tx) => {\n\t\t\tthis._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements, false), tx);\n\t\t\tconst checkedCount = this._itemElements.filter(element => element.checked).length;\n\t\t\tthis._checkedCountObservable.set(checkedCount, tx);\n\t\t\tthis._checkedElementsObservable.set(this.getCheckedElements(), tx);\n\t\t});\n\t}\n\n\t/**\n\t * Disposes of the hover and shows a new one for the given index if it has a tooltip.\n\t * @param element The element to show the hover for\n\t */\n\tprivate showHover(element: QuickPickItemElement): void {\n\t\tif (this._lastHover && !this._lastHover.isDisposed) {\n\t\t\tthis.hoverDelegate.onDidHideHover?.();\n\t\t\tthis._lastHover?.dispose();\n\t\t}\n\n\t\tif (!element.element || !element.saneTooltip) {\n\t\t\treturn;\n\t\t}\n\t\tthis._lastHover = this.hoverDelegate.showHover({\n\t\t\tcontent: element.saneTooltip,\n\t\t\ttarget: element.element,\n\t\t\tlinkHandler: (url) => {\n\t\t\t\tthis.linkOpenerDelegate(url);\n\t\t\t},\n\t\t\tappearance: {\n\t\t\t\tshowPointer: true,\n\t\t\t},\n\t\t\tcontainer: this._container,\n\t\t\tposition: {\n\t\t\t\thoverPosition: HoverPosition.RIGHT\n\t\t\t}\n\t\t}, false);\n\t}\n}\n\nfunction matchesContiguousIconAware(query: string, target: IParsedLabelWithIcons): IMatch[] | null {\n\n\tconst { text, iconOffsets } = target;\n\n\t// Return early if there are no icon markers in the word to match against\n\tif (!iconOffsets || iconOffsets.length === 0) {\n\t\treturn matchesContiguous(query, text);\n\t}\n\n\t// Trim the word to match against because it could have leading\n\t// whitespace now if the word started with an icon\n\tconst wordToMatchAgainstWithoutIconsTrimmed = ltrim(text, ' ');\n\tconst leadingWhitespaceOffset = text.length - wordToMatchAgainstWithoutIconsTrimmed.length;\n\n\t// match on value without icon\n\tconst matches = matchesContiguous(query, wordToMatchAgainstWithoutIconsTrimmed);\n\n\t// Map matches back to offsets with icon and trimming\n\tif (matches) {\n\t\tfor (const match of matches) {\n\t\t\tconst iconOffset = iconOffsets[match.start + leadingWhitespaceOffset] /* icon offsets at index */ + leadingWhitespaceOffset /* overall leading whitespace offset */;\n\t\t\tmatch.start += iconOffset;\n\t\t\tmatch.end += iconOffset;\n\t\t}\n\t}\n\n\treturn matches;\n}\n\nfunction matchesContiguous(word: string, wordToMatchAgainst: string): IMatch[] | null {\n\tconst matchIndex = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\n\tif (matchIndex !== -1) {\n\t\treturn [{ start: matchIndex, end: matchIndex + word.length }];\n\t}\n\treturn null;\n}\n\nfunction compareEntries(elementA: IQuickPickElement, elementB: IQuickPickElement, lookFor: string): number {\n\n\tconst labelHighlightsA = elementA.labelHighlights || [];\n\tconst labelHighlightsB = elementB.labelHighlights || [];\n\tif (labelHighlightsA.length && !labelHighlightsB.length) {\n\t\treturn -1;\n\t}\n\n\tif (!labelHighlightsA.length && labelHighlightsB.length) {\n\t\treturn 1;\n\t}\n\n\tif (labelHighlightsA.length === 0 && labelHighlightsB.length === 0) {\n\t\treturn 0;\n\t}\n\n\treturn compareAnything(elementA.saneSortLabel, elementB.saneSortLabel, lookFor);\n}\n"],
  "mappings": "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",
  "names": ["QuickPickSeparatorFocusReason", "index", "e"]
}
