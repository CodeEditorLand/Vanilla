{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/userDataProfile/common/userDataProfile.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { hash } from '../../../base/common/hash.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { basename, joinPath } from '../../../base/common/resources.js';\nimport { URI, UriDto } from '../../../base/common/uri.js';\nimport { localize } from '../../../nls.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { FileOperationResult, IFileService, toFileOperationResult } from '../../files/common/files.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { IAnyWorkspaceIdentifier, isSingleFolderWorkspaceIdentifier, isWorkspaceIdentifier } from '../../workspace/common/workspace.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { IStringDictionary } from '../../../base/common/collections.js';\nimport { IUriIdentityService } from '../../uriIdentity/common/uriIdentity.js';\nimport { Promises } from '../../../base/common/async.js';\nimport { generateUuid } from '../../../base/common/uuid.js';\nimport { escapeRegExpCharacters } from '../../../base/common/strings.js';\nimport { isString } from '../../../base/common/types.js';\n\nexport const enum ProfileResourceType {\n\tSettings = 'settings',\n\tKeybindings = 'keybindings',\n\tSnippets = 'snippets',\n\tTasks = 'tasks',\n\tExtensions = 'extensions',\n\tGlobalState = 'globalState',\n}\n\n/**\n * Flags to indicate whether to use the default profile or not.\n */\nexport type UseDefaultProfileFlags = { [key in ProfileResourceType]?: boolean };\nexport type ProfileResourceTypeFlags = UseDefaultProfileFlags;\n\nexport interface IUserDataProfile {\n\treadonly id: string;\n\treadonly isDefault: boolean;\n\treadonly name: string;\n\treadonly shortName?: string;\n\treadonly icon?: string;\n\treadonly location: URI;\n\treadonly globalStorageHome: URI;\n\treadonly settingsResource: URI;\n\treadonly keybindingsResource: URI;\n\treadonly tasksResource: URI;\n\treadonly snippetsHome: URI;\n\treadonly extensionsResource: URI;\n\treadonly cacheHome: URI;\n\treadonly useDefaultFlags?: UseDefaultProfileFlags;\n\treadonly isTransient?: boolean;\n}\n\nexport function isUserDataProfile(thing: unknown): thing is IUserDataProfile {\n\tconst candidate = thing as IUserDataProfile | undefined;\n\n\treturn !!(candidate && typeof candidate === 'object'\n\t\t&& typeof candidate.id === 'string'\n\t\t&& typeof candidate.isDefault === 'boolean'\n\t\t&& typeof candidate.name === 'string'\n\t\t&& URI.isUri(candidate.location)\n\t\t&& URI.isUri(candidate.globalStorageHome)\n\t\t&& URI.isUri(candidate.settingsResource)\n\t\t&& URI.isUri(candidate.keybindingsResource)\n\t\t&& URI.isUri(candidate.tasksResource)\n\t\t&& URI.isUri(candidate.snippetsHome)\n\t\t&& URI.isUri(candidate.extensionsResource)\n\t);\n}\n\nexport type DidChangeProfilesEvent = { readonly added: readonly IUserDataProfile[]; readonly removed: readonly IUserDataProfile[]; readonly updated: readonly IUserDataProfile[]; readonly all: readonly IUserDataProfile[] };\n\nexport type WillCreateProfileEvent = {\n\tprofile: IUserDataProfile;\n\tjoin(promise: Promise<void>): void;\n};\n\nexport type WillRemoveProfileEvent = {\n\tprofile: IUserDataProfile;\n\tjoin(promise: Promise<void>): void;\n};\n\nexport interface IUserDataProfileOptions {\n\treadonly shortName?: string;\n\treadonly icon?: string;\n\treadonly useDefaultFlags?: UseDefaultProfileFlags;\n\treadonly transient?: boolean;\n}\n\nexport interface IUserDataProfileUpdateOptions extends Omit<IUserDataProfileOptions, 'icon'> {\n\treadonly name?: string;\n\treadonly icon?: string | null;\n}\n\nexport const IUserDataProfilesService = createDecorator<IUserDataProfilesService>('IUserDataProfilesService');\nexport interface IUserDataProfilesService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly profilesHome: URI;\n\treadonly defaultProfile: IUserDataProfile;\n\n\treadonly onDidChangeProfiles: Event<DidChangeProfilesEvent>;\n\treadonly profiles: readonly IUserDataProfile[];\n\n\treadonly onDidResetWorkspaces: Event<void>;\n\n\tisEnabled(): boolean;\n\tcreateNamedProfile(name: string, options?: IUserDataProfileOptions, workspaceIdentifier?: IAnyWorkspaceIdentifier): Promise<IUserDataProfile>;\n\tcreateTransientProfile(workspaceIdentifier?: IAnyWorkspaceIdentifier): Promise<IUserDataProfile>;\n\tcreateProfile(id: string, name: string, options?: IUserDataProfileOptions, workspaceIdentifier?: IAnyWorkspaceIdentifier): Promise<IUserDataProfile>;\n\tupdateProfile(profile: IUserDataProfile, options?: IUserDataProfileUpdateOptions,): Promise<IUserDataProfile>;\n\tremoveProfile(profile: IUserDataProfile): Promise<void>;\n\n\tsetProfileForWorkspace(workspaceIdentifier: IAnyWorkspaceIdentifier, profile: IUserDataProfile): Promise<void>;\n\tresetWorkspaces(): Promise<void>;\n\n\tcleanUp(): Promise<void>;\n\tcleanUpTransientProfiles(): Promise<void>;\n}\n\nexport function reviveProfile(profile: UriDto<IUserDataProfile>, scheme: string): IUserDataProfile {\n\treturn {\n\t\tid: profile.id,\n\t\tisDefault: profile.isDefault,\n\t\tname: profile.name,\n\t\tshortName: profile.shortName,\n\t\ticon: profile.icon,\n\t\tlocation: URI.revive(profile.location).with({ scheme }),\n\t\tglobalStorageHome: URI.revive(profile.globalStorageHome).with({ scheme }),\n\t\tsettingsResource: URI.revive(profile.settingsResource).with({ scheme }),\n\t\tkeybindingsResource: URI.revive(profile.keybindingsResource).with({ scheme }),\n\t\ttasksResource: URI.revive(profile.tasksResource).with({ scheme }),\n\t\tsnippetsHome: URI.revive(profile.snippetsHome).with({ scheme }),\n\t\textensionsResource: URI.revive(profile.extensionsResource).with({ scheme }),\n\t\tcacheHome: URI.revive(profile.cacheHome).with({ scheme }),\n\t\tuseDefaultFlags: profile.useDefaultFlags,\n\t\tisTransient: profile.isTransient,\n\t};\n}\n\nexport function toUserDataProfile(id: string, name: string, location: URI, profilesCacheHome: URI, options?: IUserDataProfileOptions, defaultProfile?: IUserDataProfile): IUserDataProfile {\n\treturn {\n\t\tid,\n\t\tname,\n\t\tlocation,\n\t\tisDefault: false,\n\t\tshortName: options?.shortName,\n\t\ticon: options?.icon,\n\t\tglobalStorageHome: defaultProfile && options?.useDefaultFlags?.globalState ? defaultProfile.globalStorageHome : joinPath(location, 'globalStorage'),\n\t\tsettingsResource: defaultProfile && options?.useDefaultFlags?.settings ? defaultProfile.settingsResource : joinPath(location, 'settings.json'),\n\t\tkeybindingsResource: defaultProfile && options?.useDefaultFlags?.keybindings ? defaultProfile.keybindingsResource : joinPath(location, 'keybindings.json'),\n\t\ttasksResource: defaultProfile && options?.useDefaultFlags?.tasks ? defaultProfile.tasksResource : joinPath(location, 'tasks.json'),\n\t\tsnippetsHome: defaultProfile && options?.useDefaultFlags?.snippets ? defaultProfile.snippetsHome : joinPath(location, 'snippets'),\n\t\textensionsResource: defaultProfile && options?.useDefaultFlags?.extensions ? defaultProfile.extensionsResource : joinPath(location, 'extensions.json'),\n\t\tcacheHome: joinPath(profilesCacheHome, id),\n\t\tuseDefaultFlags: options?.useDefaultFlags,\n\t\tisTransient: options?.transient\n\t};\n}\n\nexport type UserDataProfilesObject = {\n\tprofiles: IUserDataProfile[];\n\tworkspaces: ResourceMap<IUserDataProfile>;\n\temptyWindows: Map<string, IUserDataProfile>;\n};\n\ntype TransientUserDataProfilesObject = UserDataProfilesObject & {\n\tfolders: ResourceMap<IUserDataProfile>;\n};\n\nexport type StoredUserDataProfile = {\n\tname: string;\n\tlocation: URI;\n\tshortName?: string;\n\ticon?: string;\n\tuseDefaultFlags?: UseDefaultProfileFlags;\n};\n\nexport type StoredProfileAssociations = {\n\tworkspaces?: IStringDictionary<string>;\n\temptyWindows?: IStringDictionary<string>;\n};\n\nexport class UserDataProfilesService extends Disposable implements IUserDataProfilesService {\n\n\tprotected static readonly PROFILES_KEY = 'userDataProfiles';\n\tprotected static readonly PROFILE_ASSOCIATIONS_KEY = 'profileAssociations';\n\n\treadonly _serviceBrand: undefined;\n\n\tprotected enabled: boolean = true;\n\treadonly profilesHome: URI;\n\tprivate readonly profilesCacheHome: URI;\n\n\tget defaultProfile(): IUserDataProfile { return this.profiles[0]; }\n\tget profiles(): IUserDataProfile[] { return [...this.profilesObject.profiles, ...this.transientProfilesObject.profiles]; }\n\n\tprotected readonly _onDidChangeProfiles = this._register(new Emitter<DidChangeProfilesEvent>());\n\treadonly onDidChangeProfiles = this._onDidChangeProfiles.event;\n\n\tprotected readonly _onWillCreateProfile = this._register(new Emitter<WillCreateProfileEvent>());\n\treadonly onWillCreateProfile = this._onWillCreateProfile.event;\n\n\tprotected readonly _onWillRemoveProfile = this._register(new Emitter<WillRemoveProfileEvent>());\n\treadonly onWillRemoveProfile = this._onWillRemoveProfile.event;\n\n\tprivate readonly _onDidResetWorkspaces = this._register(new Emitter<void>());\n\treadonly onDidResetWorkspaces = this._onDidResetWorkspaces.event;\n\n\tprivate profileCreationPromises = new Map<string, Promise<IUserDataProfile>>();\n\n\tprotected readonly transientProfilesObject: TransientUserDataProfilesObject = {\n\t\tprofiles: [],\n\t\tfolders: new ResourceMap(),\n\t\tworkspaces: new ResourceMap(),\n\t\temptyWindows: new Map()\n\t};\n\n\tconstructor(\n\t\t@IEnvironmentService protected readonly environmentService: IEnvironmentService,\n\t\t@IFileService protected readonly fileService: IFileService,\n\t\t@IUriIdentityService protected readonly uriIdentityService: IUriIdentityService,\n\t\t@ILogService protected readonly logService: ILogService\n\t) {\n\t\tsuper();\n\t\tthis.profilesHome = joinPath(this.environmentService.userRoamingDataHome, 'profiles');\n\t\tthis.profilesCacheHome = joinPath(this.environmentService.cacheHome, 'CachedProfilesData');\n\t}\n\n\tinit(): void {\n\t\tthis._profilesObject = undefined;\n\t}\n\n\tsetEnablement(enabled: boolean): void {\n\t\tif (this.enabled !== enabled) {\n\t\t\tthis._profilesObject = undefined;\n\t\t\tthis.enabled = enabled;\n\t\t}\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n\tprotected _profilesObject: UserDataProfilesObject | undefined;\n\tprotected get profilesObject(): UserDataProfilesObject {\n\t\tif (!this._profilesObject) {\n\t\t\tconst defaultProfile = this.createDefaultProfile();\n\t\t\tconst profiles = [defaultProfile];\n\t\t\tif (this.enabled) {\n\t\t\t\ttry {\n\t\t\t\t\tfor (const storedProfile of this.getStoredProfiles()) {\n\t\t\t\t\t\tif (!storedProfile.name || !isString(storedProfile.name) || !storedProfile.location) {\n\t\t\t\t\t\t\tthis.logService.warn('Skipping the invalid stored profile', storedProfile.location || storedProfile.name);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprofiles.push(toUserDataProfile(basename(storedProfile.location), storedProfile.name, storedProfile.location, this.profilesCacheHome, { shortName: storedProfile.shortName, icon: storedProfile.icon, useDefaultFlags: storedProfile.useDefaultFlags }, defaultProfile));\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.logService.error(error);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst workspaces = new ResourceMap<IUserDataProfile>();\n\t\t\tconst emptyWindows = new Map<string, IUserDataProfile>();\n\t\t\tif (profiles.length) {\n\t\t\t\ttry {\n\t\t\t\t\tconst profileAssociaitions = this.getStoredProfileAssociations();\n\t\t\t\t\tif (profileAssociaitions.workspaces) {\n\t\t\t\t\t\tfor (const [workspacePath, profileId] of Object.entries(profileAssociaitions.workspaces)) {\n\t\t\t\t\t\t\tconst workspace = URI.parse(workspacePath);\n\t\t\t\t\t\t\tconst profile = profiles.find(p => p.id === profileId);\n\t\t\t\t\t\t\tif (profile) {\n\t\t\t\t\t\t\t\tworkspaces.set(workspace, profile);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (profileAssociaitions.emptyWindows) {\n\t\t\t\t\t\tfor (const [windowId, profileId] of Object.entries(profileAssociaitions.emptyWindows)) {\n\t\t\t\t\t\t\tconst profile = profiles.find(p => p.id === profileId);\n\t\t\t\t\t\t\tif (profile) {\n\t\t\t\t\t\t\t\temptyWindows.set(windowId, profile);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.logService.error(error);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._profilesObject = { profiles, workspaces, emptyWindows };\n\t\t}\n\t\treturn this._profilesObject;\n\t}\n\n\tprivate createDefaultProfile() {\n\t\tconst defaultProfile = toUserDataProfile('__default__profile__', localize('defaultProfile', \"Default\"), this.environmentService.userRoamingDataHome, this.profilesCacheHome);\n\t\treturn { ...defaultProfile, extensionsResource: this.getDefaultProfileExtensionsLocation() ?? defaultProfile.extensionsResource, isDefault: true };\n\t}\n\n\tasync createTransientProfile(workspaceIdentifier?: IAnyWorkspaceIdentifier): Promise<IUserDataProfile> {\n\t\tconst namePrefix = `Temp`;\n\t\tconst nameRegEx = new RegExp(`${escapeRegExpCharacters(namePrefix)}\\\\s(\\\\d+)`);\n\t\tlet nameIndex = 0;\n\t\tfor (const profile of this.profiles) {\n\t\t\tconst matches = nameRegEx.exec(profile.name);\n\t\t\tconst index = matches ? parseInt(matches[1]) : 0;\n\t\t\tnameIndex = index > nameIndex ? index : nameIndex;\n\t\t}\n\t\tconst name = `${namePrefix} ${nameIndex + 1}`;\n\t\treturn this.createProfile(hash(generateUuid()).toString(16), name, { transient: true }, workspaceIdentifier);\n\t}\n\n\tasync createNamedProfile(name: string, options?: IUserDataProfileOptions, workspaceIdentifier?: IAnyWorkspaceIdentifier): Promise<IUserDataProfile> {\n\t\treturn this.createProfile(hash(generateUuid()).toString(16), name, options, workspaceIdentifier);\n\t}\n\n\tasync createProfile(id: string, name: string, options?: IUserDataProfileOptions, workspaceIdentifier?: IAnyWorkspaceIdentifier): Promise<IUserDataProfile> {\n\t\tif (!this.enabled) {\n\t\t\tthrow new Error(`Profiles are disabled in the current environment.`);\n\t\t}\n\n\t\tconst profile = await this.doCreateProfile(id, name, options);\n\n\t\tif (workspaceIdentifier) {\n\t\t\tawait this.setProfileForWorkspace(workspaceIdentifier, profile);\n\t\t}\n\n\t\treturn profile;\n\t}\n\n\tprivate async doCreateProfile(id: string, name: string, options?: IUserDataProfileOptions): Promise<IUserDataProfile> {\n\t\tif (!isString(name) || !name) {\n\t\t\tthrow new Error('Name of the profile is mandatory and must be of type `string`');\n\t\t}\n\t\tlet profileCreationPromise = this.profileCreationPromises.get(name);\n\t\tif (!profileCreationPromise) {\n\t\t\tprofileCreationPromise = (async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst existing = this.profiles.find(p => p.name === name || p.id === id);\n\t\t\t\t\tif (existing) {\n\t\t\t\t\t\tthrow new Error(`Profile with ${name} name already exists`);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst profile = toUserDataProfile(id, name, joinPath(this.profilesHome, id), this.profilesCacheHome, options, this.defaultProfile);\n\t\t\t\t\tawait this.fileService.createFolder(profile.location);\n\n\t\t\t\t\tconst joiners: Promise<void>[] = [];\n\t\t\t\t\tthis._onWillCreateProfile.fire({\n\t\t\t\t\t\tprofile,\n\t\t\t\t\t\tjoin(promise) {\n\t\t\t\t\t\t\tjoiners.push(promise);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tawait Promises.settled(joiners);\n\n\t\t\t\t\tthis.updateProfiles([profile], [], []);\n\t\t\t\t\treturn profile;\n\t\t\t\t} finally {\n\t\t\t\t\tthis.profileCreationPromises.delete(name);\n\t\t\t\t}\n\t\t\t})();\n\t\t\tthis.profileCreationPromises.set(name, profileCreationPromise);\n\t\t}\n\t\treturn profileCreationPromise;\n\t}\n\n\tasync updateProfile(profileToUpdate: IUserDataProfile, options: IUserDataProfileUpdateOptions): Promise<IUserDataProfile> {\n\t\tif (!this.enabled) {\n\t\t\tthrow new Error(`Profiles are disabled in the current environment.`);\n\t\t}\n\n\t\tlet profile = this.profiles.find(p => p.id === profileToUpdate.id);\n\t\tif (!profile) {\n\t\t\tthrow new Error(`Profile '${profileToUpdate.name}' does not exist`);\n\t\t}\n\n\t\tprofile = toUserDataProfile(profile.id, options.name ?? profile.name, profile.location, this.profilesCacheHome, {\n\t\t\tshortName: options.shortName ?? profile.shortName,\n\t\t\ticon: options.icon === null ? undefined : options.icon ?? profile.icon,\n\t\t\ttransient: options.transient ?? profile.isTransient,\n\t\t\tuseDefaultFlags: options.useDefaultFlags ?? profile.useDefaultFlags\n\t\t}, this.defaultProfile);\n\t\tthis.updateProfiles([], [], [profile]);\n\n\t\treturn profile;\n\t}\n\n\tasync removeProfile(profileToRemove: IUserDataProfile): Promise<void> {\n\t\tif (!this.enabled) {\n\t\t\tthrow new Error(`Profiles are disabled in the current environment.`);\n\t\t}\n\t\tif (profileToRemove.isDefault) {\n\t\t\tthrow new Error('Cannot remove default profile');\n\t\t}\n\t\tconst profile = this.profiles.find(p => p.id === profileToRemove.id);\n\t\tif (!profile) {\n\t\t\tthrow new Error(`Profile '${profileToRemove.name}' does not exist`);\n\t\t}\n\n\t\tconst joiners: Promise<void>[] = [];\n\t\tthis._onWillRemoveProfile.fire({\n\t\t\tprofile,\n\t\t\tjoin(promise) {\n\t\t\t\tjoiners.push(promise);\n\t\t\t}\n\t\t});\n\n\t\ttry {\n\t\t\tawait Promise.allSettled(joiners);\n\t\t} catch (error) {\n\t\t\tthis.logService.error(error);\n\t\t}\n\n\t\tfor (const windowId of [...this.profilesObject.emptyWindows.keys()]) {\n\t\t\tif (profile.id === this.profilesObject.emptyWindows.get(windowId)?.id) {\n\t\t\t\tthis.profilesObject.emptyWindows.delete(windowId);\n\t\t\t}\n\t\t}\n\t\tfor (const workspace of [...this.profilesObject.workspaces.keys()]) {\n\t\t\tif (profile.id === this.profilesObject.workspaces.get(workspace)?.id) {\n\t\t\t\tthis.profilesObject.workspaces.delete(workspace);\n\t\t\t}\n\t\t}\n\t\tthis.updateStoredProfileAssociations();\n\n\t\tthis.updateProfiles([], [profile], []);\n\n\t\ttry {\n\t\t\tawait this.fileService.del(profile.cacheHome, { recursive: true });\n\t\t} catch (error) {\n\t\t\tif (toFileOperationResult(error) !== FileOperationResult.FILE_NOT_FOUND) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync setProfileForWorkspace(workspaceIdentifier: IAnyWorkspaceIdentifier, profileToSet: IUserDataProfile): Promise<void> {\n\t\tif (!this.enabled) {\n\t\t\tthrow new Error(`Profiles are disabled in the current environment.`);\n\t\t}\n\n\t\tconst profile = this.profiles.find(p => p.id === profileToSet.id);\n\t\tif (!profile) {\n\t\t\tthrow new Error(`Profile '${profileToSet.name}' does not exist`);\n\t\t}\n\n\t\tthis.updateWorkspaceAssociation(workspaceIdentifier, profile);\n\t}\n\n\tunsetWorkspace(workspaceIdentifier: IAnyWorkspaceIdentifier, transient?: boolean): void {\n\t\tif (!this.enabled) {\n\t\t\tthrow new Error(`Profiles are disabled in the current environment.`);\n\t\t}\n\n\t\tthis.updateWorkspaceAssociation(workspaceIdentifier, undefined, transient);\n\t}\n\n\tasync resetWorkspaces(): Promise<void> {\n\t\tthis.transientProfilesObject.folders.clear();\n\t\tthis.transientProfilesObject.workspaces.clear();\n\t\tthis.transientProfilesObject.emptyWindows.clear();\n\t\tthis.profilesObject.workspaces.clear();\n\t\tthis.profilesObject.emptyWindows.clear();\n\t\tthis.updateStoredProfileAssociations();\n\t\tthis._onDidResetWorkspaces.fire();\n\t}\n\n\tasync cleanUp(): Promise<void> {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\t\tif (await this.fileService.exists(this.profilesHome)) {\n\t\t\tconst stat = await this.fileService.resolve(this.profilesHome);\n\t\t\tawait Promise.all((stat.children || [])\n\t\t\t\t.filter(child => child.isDirectory && this.profiles.every(p => !this.uriIdentityService.extUri.isEqual(p.location, child.resource)))\n\t\t\t\t.map(child => this.fileService.del(child.resource, { recursive: true })));\n\t\t}\n\t}\n\n\tasync cleanUpTransientProfiles(): Promise<void> {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\t\tconst unAssociatedTransientProfiles = this.transientProfilesObject.profiles.filter(p => !this.isProfileAssociatedToWorkspace(p));\n\t\tawait Promise.allSettled(unAssociatedTransientProfiles.map(p => this.removeProfile(p)));\n\t}\n\n\tgetProfileForWorkspace(workspaceIdentifier: IAnyWorkspaceIdentifier): IUserDataProfile | undefined {\n\t\tconst workspace = this.getWorkspace(workspaceIdentifier);\n\t\tconst profile = URI.isUri(workspace) ? this.profilesObject.workspaces.get(workspace) : this.profilesObject.emptyWindows.get(workspace);\n\t\tif (profile) {\n\t\t\treturn profile;\n\t\t}\n\t\tif (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n\t\t\treturn this.transientProfilesObject.folders.get(workspaceIdentifier.uri);\n\t\t}\n\t\tif (isWorkspaceIdentifier(workspaceIdentifier)) {\n\t\t\treturn this.transientProfilesObject.workspaces.get(workspaceIdentifier.configPath);\n\t\t}\n\t\treturn this.transientProfilesObject.emptyWindows.get(workspaceIdentifier.id);\n\t}\n\n\tprotected getWorkspace(workspaceIdentifier: IAnyWorkspaceIdentifier): URI | string {\n\t\tif (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n\t\t\treturn workspaceIdentifier.uri;\n\t\t}\n\t\tif (isWorkspaceIdentifier(workspaceIdentifier)) {\n\t\t\treturn workspaceIdentifier.configPath;\n\t\t}\n\t\treturn workspaceIdentifier.id;\n\t}\n\n\tprivate isProfileAssociatedToWorkspace(profile: IUserDataProfile): boolean {\n\t\tif ([...this.profilesObject.emptyWindows.values()].some(windowProfile => this.uriIdentityService.extUri.isEqual(windowProfile.location, profile.location))) {\n\t\t\treturn true;\n\t\t}\n\t\tif ([...this.profilesObject.workspaces.values()].some(workspaceProfile => this.uriIdentityService.extUri.isEqual(workspaceProfile.location, profile.location))) {\n\t\t\treturn true;\n\t\t}\n\t\tif ([...this.transientProfilesObject.emptyWindows.values()].some(windowProfile => this.uriIdentityService.extUri.isEqual(windowProfile.location, profile.location))) {\n\t\t\treturn true;\n\t\t}\n\t\tif ([...this.transientProfilesObject.workspaces.values()].some(workspaceProfile => this.uriIdentityService.extUri.isEqual(workspaceProfile.location, profile.location))) {\n\t\t\treturn true;\n\t\t}\n\t\tif ([...this.transientProfilesObject.folders.values()].some(workspaceProfile => this.uriIdentityService.extUri.isEqual(workspaceProfile.location, profile.location))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate updateProfiles(added: IUserDataProfile[], removed: IUserDataProfile[], updated: IUserDataProfile[]): void {\n\t\tconst allProfiles = [...this.profiles, ...added];\n\t\tconst storedProfiles: StoredUserDataProfile[] = [];\n\t\tconst transientProfiles = this.transientProfilesObject.profiles;\n\t\tthis.transientProfilesObject.profiles = [];\n\t\tfor (let profile of allProfiles) {\n\t\t\tif (profile.isDefault) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (removed.some(p => profile.id === p.id)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tprofile = updated.find(p => profile.id === p.id) ?? profile;\n\t\t\tconst transientProfile = transientProfiles.find(p => profile.id === p.id);\n\t\t\tif (profile.isTransient) {\n\t\t\t\tthis.transientProfilesObject.profiles.push(profile);\n\t\t\t} else {\n\t\t\t\tif (transientProfile) {\n\t\t\t\t\tfor (const [windowId, p] of this.transientProfilesObject.emptyWindows.entries()) {\n\t\t\t\t\t\tif (profile.id === p.id) {\n\t\t\t\t\t\t\tthis.updateWorkspaceAssociation({ id: windowId }, profile);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (const [workspace, p] of this.transientProfilesObject.workspaces.entries()) {\n\t\t\t\t\t\tif (profile.id === p.id) {\n\t\t\t\t\t\t\tthis.updateWorkspaceAssociation({ id: '', configPath: workspace }, profile);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (const [folder, p] of this.transientProfilesObject.folders.entries()) {\n\t\t\t\t\t\tif (profile.id === p.id) {\n\t\t\t\t\t\t\tthis.updateWorkspaceAssociation({ id: '', uri: folder }, profile);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstoredProfiles.push({ location: profile.location, name: profile.name, shortName: profile.shortName, icon: profile.icon, useDefaultFlags: profile.useDefaultFlags });\n\t\t\t}\n\t\t}\n\t\tthis.saveStoredProfiles(storedProfiles);\n\t\tthis._profilesObject = undefined;\n\t\tthis.triggerProfilesChanges(added, removed, updated);\n\t}\n\n\tprotected triggerProfilesChanges(added: IUserDataProfile[], removed: IUserDataProfile[], updated: IUserDataProfile[]) {\n\t\tthis._onDidChangeProfiles.fire({ added, removed, updated, all: this.profiles });\n\t}\n\n\tprivate updateWorkspaceAssociation(workspaceIdentifier: IAnyWorkspaceIdentifier, newProfile?: IUserDataProfile, transient?: boolean): void {\n\t\t// Force transient if the new profile to associate is transient\n\t\ttransient = newProfile?.isTransient ? true : transient;\n\n\t\tif (transient) {\n\t\t\tif (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n\t\t\t\tthis.transientProfilesObject.folders.delete(workspaceIdentifier.uri);\n\t\t\t\tif (newProfile) {\n\t\t\t\t\tthis.transientProfilesObject.folders.set(workspaceIdentifier.uri, newProfile);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse if (isWorkspaceIdentifier(workspaceIdentifier)) {\n\t\t\t\tthis.transientProfilesObject.workspaces.delete(workspaceIdentifier.configPath);\n\t\t\t\tif (newProfile) {\n\t\t\t\t\tthis.transientProfilesObject.workspaces.set(workspaceIdentifier.configPath, newProfile);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tthis.transientProfilesObject.emptyWindows.delete(workspaceIdentifier.id);\n\t\t\t\tif (newProfile) {\n\t\t\t\t\tthis.transientProfilesObject.emptyWindows.set(workspaceIdentifier.id, newProfile);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telse {\n\t\t\t// Unset the transiet workspace association if any\n\t\t\tthis.updateWorkspaceAssociation(workspaceIdentifier, undefined, true);\n\t\t\tconst workspace = this.getWorkspace(workspaceIdentifier);\n\n\t\t\t// Folder or Multiroot workspace\n\t\t\tif (URI.isUri(workspace)) {\n\t\t\t\tthis.profilesObject.workspaces.delete(workspace);\n\t\t\t\tif (newProfile) {\n\t\t\t\t\tthis.profilesObject.workspaces.set(workspace, newProfile);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Empty Window\n\t\t\telse {\n\t\t\t\tthis.profilesObject.emptyWindows.delete(workspace);\n\t\t\t\tif (newProfile) {\n\t\t\t\t\tthis.profilesObject.emptyWindows.set(workspace, newProfile);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.updateStoredProfileAssociations();\n\t\t}\n\t}\n\n\tprivate updateStoredProfileAssociations() {\n\t\tconst workspaces: IStringDictionary<string> = {};\n\t\tfor (const [workspace, profile] of this.profilesObject.workspaces.entries()) {\n\t\t\tworkspaces[workspace.toString()] = profile.id;\n\t\t}\n\t\tconst emptyWindows: IStringDictionary<string> = {};\n\t\tfor (const [windowId, profile] of this.profilesObject.emptyWindows.entries()) {\n\t\t\temptyWindows[windowId.toString()] = profile.id;\n\t\t}\n\t\tthis.saveStoredProfileAssociations({ workspaces, emptyWindows });\n\t\tthis._profilesObject = undefined;\n\t}\n\n\t// TODO: @sandy081 Remove migration after couple of releases\n\tprotected migrateStoredProfileAssociations(storedProfileAssociations: StoredProfileAssociations): StoredProfileAssociations {\n\t\tconst workspaces: IStringDictionary<string> = {};\n\t\tconst defaultProfile = this.createDefaultProfile();\n\t\tif (storedProfileAssociations.workspaces) {\n\t\t\tfor (const [workspace, location] of Object.entries(storedProfileAssociations.workspaces)) {\n\t\t\t\tconst uri = URI.parse(location);\n\t\t\t\tworkspaces[workspace] = this.uriIdentityService.extUri.isEqual(uri, defaultProfile.location) ? defaultProfile.id : this.uriIdentityService.extUri.basename(uri);\n\t\t\t}\n\t\t}\n\t\tconst emptyWindows: IStringDictionary<string> = {};\n\t\tif (storedProfileAssociations.emptyWindows) {\n\t\t\tfor (const [workspace, location] of Object.entries(storedProfileAssociations.emptyWindows)) {\n\t\t\t\tconst uri = URI.parse(location);\n\t\t\t\temptyWindows[workspace] = this.uriIdentityService.extUri.isEqual(uri, defaultProfile.location) ? defaultProfile.id : this.uriIdentityService.extUri.basename(uri);\n\t\t\t}\n\t\t}\n\t\treturn { workspaces, emptyWindows };\n\t}\n\n\tprotected getStoredProfiles(): StoredUserDataProfile[] { return []; }\n\tprotected saveStoredProfiles(storedProfiles: StoredUserDataProfile[]): void { throw new Error('not implemented'); }\n\n\tprotected getStoredProfileAssociations(): StoredProfileAssociations { return {}; }\n\tprotected saveStoredProfileAssociations(storedProfileAssociations: StoredProfileAssociations): void { throw new Error('not implemented'); }\n\tprotected getDefaultProfileExtensionsLocation(): URI | undefined { return undefined; }\n}\n\nexport class InMemoryUserDataProfilesService extends UserDataProfilesService {\n\tprivate storedProfiles: StoredUserDataProfile[] = [];\n\tprotected override getStoredProfiles(): StoredUserDataProfile[] { return this.storedProfiles; }\n\tprotected override saveStoredProfiles(storedProfiles: StoredUserDataProfile[]): void { this.storedProfiles = storedProfiles; }\n\n\tprivate storedProfileAssociations: StoredProfileAssociations = {};\n\tprotected override getStoredProfileAssociations(): StoredProfileAssociations { return this.storedProfileAssociations; }\n\tprotected override saveStoredProfileAssociations(storedProfileAssociations: StoredProfileAssociations): void { this.storedProfileAssociations = storedProfileAssociations; }\n}\n"],
  "mappings": "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",
  "names": ["ProfileResourceType"]
}
