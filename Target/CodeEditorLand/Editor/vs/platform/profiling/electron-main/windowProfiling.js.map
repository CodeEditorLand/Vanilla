{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/profiling/electron-main/windowProfiling.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { BrowserWindow } from \"electron\";\nimport type { ProfileResult } from \"v8-inspect-profiler\";\nimport { timeout } from \"../../../base/common/async.js\";\nimport { ILogService } from \"../../log/common/log.js\";\nimport type { IV8Profile } from \"../common/profiling.js\";\n\nexport class WindowProfiler {\n\tconstructor(\n\t\tprivate readonly _window: BrowserWindow,\n\t\tprivate readonly _sessionId: string,\n\t\t@ILogService private readonly _logService: ILogService,\n\t) {}\n\n\tasync inspect(duration: number): Promise<IV8Profile> {\n\t\tawait this._connect();\n\n\t\tconst inspector = this._window.webContents.debugger;\n\t\tawait inspector.sendCommand(\"Profiler.start\");\n\t\tthis._logService.warn(\"[perf] profiling STARTED\", this._sessionId);\n\t\tawait timeout(duration);\n\t\tconst data: ProfileResult =\n\t\t\tawait inspector.sendCommand(\"Profiler.stop\");\n\t\tthis._logService.warn(\"[perf] profiling DONE\", this._sessionId);\n\n\t\tawait this._disconnect();\n\t\treturn data.profile;\n\t}\n\n\tprivate async _connect() {\n\t\tconst inspector = this._window.webContents.debugger;\n\t\tinspector.attach();\n\t\tawait inspector.sendCommand(\"Profiler.enable\");\n\t}\n\n\tprivate async _disconnect() {\n\t\tconst inspector = this._window.webContents.debugger;\n\t\tawait inspector.sendCommand(\"Profiler.disable\");\n\t\tinspector.detach();\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAOA,SAAS,eAAe;AACxB,SAAS,mBAAmB;AAGrB,IAAM,iBAAN,MAAqB;AAAA,EAC3B,YACkB,SACA,YACa,aAC7B;AAHgB;AACA;AACa;AAAA,EAC5B;AAAA,EAhBJ,OAW4B;AAAA;AAAA;AAAA,EAO3B,MAAM,QAAQ,UAAuC;AACpD,UAAM,KAAK,SAAS;AAEpB,UAAM,YAAY,KAAK,QAAQ,YAAY;AAC3C,UAAM,UAAU,YAAY,gBAAgB;AAC5C,SAAK,YAAY,KAAK,4BAA4B,KAAK,UAAU;AACjE,UAAM,QAAQ,QAAQ;AACtB,UAAM,OACL,MAAM,UAAU,YAAY,eAAe;AAC5C,SAAK,YAAY,KAAK,yBAAyB,KAAK,UAAU;AAE9D,UAAM,KAAK,YAAY;AACvB,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,MAAc,WAAW;AACxB,UAAM,YAAY,KAAK,QAAQ,YAAY;AAC3C,cAAU,OAAO;AACjB,UAAM,UAAU,YAAY,iBAAiB;AAAA,EAC9C;AAAA,EAEA,MAAc,cAAc;AAC3B,UAAM,YAAY,KAAK,QAAQ,YAAY;AAC3C,UAAM,UAAU,YAAY,kBAAkB;AAC9C,cAAU,OAAO;AAAA,EAClB;AACD;AAjCa,iBAAN;AAAA,EAIJ;AAAA,GAJU;",
  "names": []
}
