{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/tunnel/node/tunnelService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as net from \"net\";\nimport * as os from \"os\";\nimport {\n\tBROWSER_RESTRICTED_PORTS,\n\tfindFreePortFaster,\n} from \"../../../base/node/ports.js\";\nimport { NodeSocket } from \"../../../base/parts/ipc/node/ipc.net.js\";\n\nimport { Barrier } from \"../../../base/common/async.js\";\nimport { VSBuffer } from \"../../../base/common/buffer.js\";\nimport { Disposable } from \"../../../base/common/lifecycle.js\";\nimport { OS } from \"../../../base/common/platform.js\";\nimport type { ISocket } from \"../../../base/parts/ipc/common/ipc.net.js\";\nimport { IConfigurationService } from \"../../configuration/common/configuration.js\";\nimport { ILogService } from \"../../log/common/log.js\";\nimport { IProductService } from \"../../product/common/productService.js\";\nimport {\n\ttype IAddressProvider,\n\ttype IConnectionOptions,\n\tconnectRemoteAgentTunnel,\n} from \"../../remote/common/remoteAgentConnection.js\";\nimport { IRemoteSocketFactoryService } from \"../../remote/common/remoteSocketFactoryService.js\";\nimport { ISignService } from \"../../sign/common/sign.js\";\nimport {\n\tAbstractTunnelService,\n\ttype ISharedTunnelsService,\n\ttype ITunnelProvider,\n\ttype ITunnelService,\n\ttype RemoteTunnel,\n\tTunnelPrivacyId,\n\tisAllInterfaces,\n\tisLocalhost,\n\tisPortPrivileged,\n\tisTunnelProvider,\n} from \"../common/tunnel.js\";\n\nasync function createRemoteTunnel(\n\toptions: IConnectionOptions,\n\tdefaultTunnelHost: string,\n\ttunnelRemoteHost: string,\n\ttunnelRemotePort: number,\n\ttunnelLocalPort?: number,\n): Promise<RemoteTunnel> {\n\tlet readyTunnel: NodeRemoteTunnel | undefined;\n\tfor (let attempts = 3; attempts; attempts--) {\n\t\treadyTunnel?.dispose();\n\t\tconst tunnel = new NodeRemoteTunnel(\n\t\t\toptions,\n\t\t\tdefaultTunnelHost,\n\t\t\ttunnelRemoteHost,\n\t\t\ttunnelRemotePort,\n\t\t\ttunnelLocalPort,\n\t\t);\n\t\treadyTunnel = await tunnel.waitForReady();\n\t\tif (\n\t\t\t(tunnelLocalPort && BROWSER_RESTRICTED_PORTS[tunnelLocalPort]) ||\n\t\t\t!BROWSER_RESTRICTED_PORTS[readyTunnel.tunnelLocalPort]\n\t\t) {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn readyTunnel!;\n}\n\nexport class NodeRemoteTunnel extends Disposable implements RemoteTunnel {\n\tpublic readonly tunnelRemotePort: number;\n\tpublic tunnelLocalPort!: number;\n\tpublic tunnelRemoteHost: string;\n\tpublic localAddress!: string;\n\tpublic readonly privacy = TunnelPrivacyId.Private;\n\n\tprivate readonly _options: IConnectionOptions;\n\tprivate readonly _server: net.Server;\n\tprivate readonly _barrier: Barrier;\n\n\tprivate readonly _listeningListener: () => void;\n\tprivate readonly _connectionListener: (socket: net.Socket) => void;\n\tprivate readonly _errorListener: () => void;\n\n\tprivate readonly _socketsDispose: Map<string, () => void> = new Map();\n\n\tconstructor(\n\t\toptions: IConnectionOptions,\n\t\tprivate readonly defaultTunnelHost: string,\n\t\ttunnelRemoteHost: string,\n\t\ttunnelRemotePort: number,\n\t\tprivate readonly suggestedLocalPort?: number,\n\t) {\n\t\tsuper();\n\t\tthis._options = options;\n\t\tthis._server = net.createServer();\n\t\tthis._barrier = new Barrier();\n\n\t\tthis._listeningListener = () => this._barrier.open();\n\t\tthis._server.on(\"listening\", this._listeningListener);\n\n\t\tthis._connectionListener = (socket) => this._onConnection(socket);\n\t\tthis._server.on(\"connection\", this._connectionListener);\n\n\t\t// If there is no error listener and there is an error it will crash the whole window\n\t\tthis._errorListener = () => {};\n\t\tthis._server.on(\"error\", this._errorListener);\n\n\t\tthis.tunnelRemotePort = tunnelRemotePort;\n\t\tthis.tunnelRemoteHost = tunnelRemoteHost;\n\t}\n\n\tpublic override async dispose(): Promise<void> {\n\t\tsuper.dispose();\n\t\tthis._server.removeListener(\"listening\", this._listeningListener);\n\t\tthis._server.removeListener(\"connection\", this._connectionListener);\n\t\tthis._server.removeListener(\"error\", this._errorListener);\n\t\tthis._server.close();\n\t\tconst disposers = Array.from(this._socketsDispose.values());\n\t\tdisposers.forEach((disposer) => {\n\t\t\tdisposer();\n\t\t});\n\t}\n\n\tpublic async waitForReady(): Promise<this> {\n\t\tconst startPort = this.suggestedLocalPort ?? this.tunnelRemotePort;\n\t\tconst hostname = isAllInterfaces(this.defaultTunnelHost)\n\t\t\t? \"0.0.0.0\"\n\t\t\t: \"127.0.0.1\";\n\t\t// try to get the same port number as the remote port number...\n\t\tlet localPort = await findFreePortFaster(startPort, 2, 1000, hostname);\n\n\t\t// if that fails, the method above returns 0, which works out fine below...\n\t\tlet address: string | net.AddressInfo | null = null;\n\t\tthis._server.listen(localPort, this.defaultTunnelHost);\n\t\tawait this._barrier.wait();\n\t\taddress = <net.AddressInfo>this._server.address();\n\n\t\t// It is possible for findFreePortFaster to return a port that there is already a server listening on. This causes the previous listen call to error out.\n\t\tif (!address) {\n\t\t\tlocalPort = 0;\n\t\t\tthis._server.listen(localPort, this.defaultTunnelHost);\n\t\t\tawait this._barrier.wait();\n\t\t\taddress = <net.AddressInfo>this._server.address();\n\t\t}\n\n\t\tthis.tunnelLocalPort = address.port;\n\t\tthis.localAddress = `${this.tunnelRemoteHost === \"127.0.0.1\" ? \"127.0.0.1\" : \"localhost\"}:${address.port}`;\n\t\treturn this;\n\t}\n\n\tprivate async _onConnection(localSocket: net.Socket): Promise<void> {\n\t\t// pause reading on the socket until we have a chance to forward its data\n\t\tlocalSocket.pause();\n\n\t\tconst tunnelRemoteHost =\n\t\t\tisLocalhost(this.tunnelRemoteHost) ||\n\t\t\tisAllInterfaces(this.tunnelRemoteHost)\n\t\t\t\t? \"localhost\"\n\t\t\t\t: this.tunnelRemoteHost;\n\t\tconst protocol = await connectRemoteAgentTunnel(\n\t\t\tthis._options,\n\t\t\ttunnelRemoteHost,\n\t\t\tthis.tunnelRemotePort,\n\t\t);\n\t\tconst remoteSocket = protocol.getSocket();\n\t\tconst dataChunk = protocol.readEntireBuffer();\n\t\tprotocol.dispose();\n\n\t\tif (dataChunk.byteLength > 0) {\n\t\t\tlocalSocket.write(dataChunk.buffer);\n\t\t}\n\n\t\tlocalSocket.on(\"end\", () => {\n\t\t\tif (localSocket.localAddress) {\n\t\t\t\tthis._socketsDispose.delete(localSocket.localAddress);\n\t\t\t}\n\t\t\tremoteSocket.end();\n\t\t});\n\t\tlocalSocket.on(\"close\", () => remoteSocket.end());\n\t\tlocalSocket.on(\"error\", () => {\n\t\t\tif (localSocket.localAddress) {\n\t\t\t\tthis._socketsDispose.delete(localSocket.localAddress);\n\t\t\t}\n\t\t\tif (remoteSocket instanceof NodeSocket) {\n\t\t\t\tremoteSocket.socket.destroy();\n\t\t\t} else {\n\t\t\t\tremoteSocket.end();\n\t\t\t}\n\t\t});\n\n\t\tif (remoteSocket instanceof NodeSocket) {\n\t\t\tthis._mirrorNodeSocket(localSocket, remoteSocket);\n\t\t} else {\n\t\t\tthis._mirrorGenericSocket(localSocket, remoteSocket);\n\t\t}\n\n\t\tif (localSocket.localAddress) {\n\t\t\tthis._socketsDispose.set(localSocket.localAddress, () => {\n\t\t\t\t// Need to end instead of unpipe, otherwise whatever is connected locally could end up \"stuck\" with whatever state it had until manually exited.\n\t\t\t\tlocalSocket.end();\n\t\t\t\tremoteSocket.end();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _mirrorGenericSocket(\n\t\tlocalSocket: net.Socket,\n\t\tremoteSocket: ISocket,\n\t) {\n\t\tremoteSocket.onClose(() => localSocket.destroy());\n\t\tremoteSocket.onEnd(() => localSocket.end());\n\t\tremoteSocket.onData((d) => localSocket.write(d.buffer));\n\t\tlocalSocket.on(\"data\", (d) => remoteSocket.write(VSBuffer.wrap(d)));\n\t\tlocalSocket.resume();\n\t}\n\n\tprivate _mirrorNodeSocket(\n\t\tlocalSocket: net.Socket,\n\t\tremoteNodeSocket: NodeSocket,\n\t) {\n\t\tconst remoteSocket = remoteNodeSocket.socket;\n\t\tremoteSocket.on(\"end\", () => localSocket.end());\n\t\tremoteSocket.on(\"close\", () => localSocket.end());\n\t\tremoteSocket.on(\"error\", () => {\n\t\t\tlocalSocket.destroy();\n\t\t});\n\n\t\tremoteSocket.pipe(localSocket);\n\t\tlocalSocket.pipe(remoteSocket);\n\t}\n}\n\nexport class BaseTunnelService extends AbstractTunnelService {\n\tpublic constructor(\n\t\t@IRemoteSocketFactoryService private readonly remoteSocketFactoryService: IRemoteSocketFactoryService,\n\t\t@ILogService logService: ILogService,\n\t\t@ISignService private readonly signService: ISignService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IConfigurationService configurationService: IConfigurationService\n\t) {\n\t\tsuper(logService, configurationService);\n\t}\n\n\tpublic isPortPrivileged(port: number): boolean {\n\t\treturn isPortPrivileged(port, this.defaultTunnelHost, OS, os.release());\n\t}\n\n\tprotected retainOrCreateTunnel(\n\t\taddressOrTunnelProvider: IAddressProvider | ITunnelProvider,\n\t\tremoteHost: string,\n\t\tremotePort: number,\n\t\tlocalHost: string,\n\t\tlocalPort: number | undefined,\n\t\televateIfNeeded: boolean,\n\t\tprivacy?: string,\n\t\tprotocol?: string,\n\t): Promise<RemoteTunnel | string | undefined> | undefined {\n\t\tconst existing = this.getTunnelFromMap(remoteHost, remotePort);\n\t\tif (existing) {\n\t\t\t++existing.refcount;\n\t\t\treturn existing.value;\n\t\t}\n\n\t\tif (isTunnelProvider(addressOrTunnelProvider)) {\n\t\t\treturn this.createWithProvider(\n\t\t\t\taddressOrTunnelProvider,\n\t\t\t\tremoteHost,\n\t\t\t\tremotePort,\n\t\t\t\tlocalPort,\n\t\t\t\televateIfNeeded,\n\t\t\t\tprivacy,\n\t\t\t\tprotocol,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.logService.trace(\n\t\t\t\t`ForwardedPorts: (TunnelService) Creating tunnel without provider ${remoteHost}:${remotePort} on local port ${localPort}.`,\n\t\t\t);\n\t\t\tconst options: IConnectionOptions = {\n\t\t\t\tcommit: this.productService.commit,\n\t\t\t\tquality: this.productService.quality,\n\t\t\t\taddressProvider: addressOrTunnelProvider,\n\t\t\t\tremoteSocketFactoryService: this.remoteSocketFactoryService,\n\t\t\t\tsignService: this.signService,\n\t\t\t\tlogService: this.logService,\n\t\t\t\tipcLogger: null,\n\t\t\t};\n\n\t\t\tconst tunnel = createRemoteTunnel(\n\t\t\t\toptions,\n\t\t\t\tlocalHost,\n\t\t\t\tremoteHost,\n\t\t\t\tremotePort,\n\t\t\t\tlocalPort,\n\t\t\t);\n\t\t\tthis.logService.trace(\n\t\t\t\t\"ForwardedPorts: (TunnelService) Tunnel created without provider.\",\n\t\t\t);\n\t\t\tthis.addTunnelToMap(remoteHost, remotePort, tunnel);\n\t\t\treturn tunnel;\n\t\t}\n\t}\n}\n\nexport class TunnelService extends BaseTunnelService {\n\tpublic constructor(\n\t\t@IRemoteSocketFactoryService remoteSocketFactoryService: IRemoteSocketFactoryService,\n\t\t@ILogService logService: ILogService,\n\t\t@ISignService signService: ISignService,\n\t\t@IProductService productService: IProductService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(\n\t\t\tremoteSocketFactoryService,\n\t\t\tlogService,\n\t\t\tsignService,\n\t\t\tproductService,\n\t\t\tconfigurationService,\n\t\t);\n\t}\n}\n\nexport class SharedTunnelsService\n\textends Disposable\n\timplements ISharedTunnelsService\n{\n\tdeclare readonly _serviceBrand: undefined;\n\tprivate readonly _tunnelServices: Map<string, ITunnelService> = new Map();\n\n\tpublic constructor(\n\t\t@IRemoteSocketFactoryService protected readonly remoteSocketFactoryService: IRemoteSocketFactoryService,\n\t\t@ILogService protected readonly logService: ILogService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@ISignService private readonly signService: ISignService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t}\n\n\tasync openTunnel(\n\t\tauthority: string,\n\t\taddressProvider: IAddressProvider | undefined,\n\t\tremoteHost: string | undefined,\n\t\tremotePort: number,\n\t\tlocalHost: string,\n\t\tlocalPort?: number,\n\t\televateIfNeeded?: boolean,\n\t\tprivacy?: string,\n\t\tprotocol?: string,\n\t): Promise<RemoteTunnel | string | undefined> {\n\t\tthis.logService.trace(\n\t\t\t`ForwardedPorts: (SharedTunnelService) openTunnel request for ${remoteHost}:${remotePort} on local port ${localPort}.`,\n\t\t);\n\t\tif (!this._tunnelServices.has(authority)) {\n\t\t\tconst tunnelService = new TunnelService(\n\t\t\t\tthis.remoteSocketFactoryService,\n\t\t\t\tthis.logService,\n\t\t\t\tthis.signService,\n\t\t\t\tthis.productService,\n\t\t\t\tthis.configurationService,\n\t\t\t);\n\t\t\tthis._register(tunnelService);\n\t\t\tthis._tunnelServices.set(authority, tunnelService);\n\t\t\ttunnelService.onTunnelClosed(async () => {\n\t\t\t\tif ((await tunnelService.tunnels).length === 0) {\n\t\t\t\t\ttunnelService.dispose();\n\t\t\t\t\tthis._tunnelServices.delete(authority);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn this._tunnelServices\n\t\t\t.get(authority)!\n\t\t\t.openTunnel(\n\t\t\t\taddressProvider,\n\t\t\t\tremoteHost,\n\t\t\t\tremotePort,\n\t\t\t\tlocalHost,\n\t\t\t\tlocalPort,\n\t\t\t\televateIfNeeded,\n\t\t\t\tprivacy,\n\t\t\t\tprotocol,\n\t\t\t);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
