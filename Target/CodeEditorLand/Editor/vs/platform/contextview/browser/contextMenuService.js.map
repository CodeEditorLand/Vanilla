{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/contextview/browser/contextMenuService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IContextMenuDelegate } from '../../../base/browser/contextmenu.js';\nimport { ModifierKeyEmitter } from '../../../base/browser/dom.js';\nimport { IAction, Separator } from '../../../base/common/actions.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { createAndFillInContextMenuActions } from '../../actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../actions/common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\nimport { ContextMenuHandler, IContextMenuHandlerOptions } from './contextMenuHandler.js';\nimport { IContextMenuMenuDelegate, IContextMenuService, IContextViewService } from './contextView.js';\n\nexport class ContextMenuService extends Disposable implements IContextMenuService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _contextMenuHandler: ContextMenuHandler | undefined = undefined;\n\tprivate get contextMenuHandler(): ContextMenuHandler {\n\t\tif (!this._contextMenuHandler) {\n\t\t\tthis._contextMenuHandler = new ContextMenuHandler(this.contextViewService, this.telemetryService, this.notificationService, this.keybindingService);\n\t\t}\n\n\t\treturn this._contextMenuHandler;\n\t}\n\n\tprivate readonly _onDidShowContextMenu = this._store.add(new Emitter<void>());\n\treadonly onDidShowContextMenu = this._onDidShowContextMenu.event;\n\n\tprivate readonly _onDidHideContextMenu = this._store.add(new Emitter<void>());\n\treadonly onDidHideContextMenu = this._onDidHideContextMenu.event;\n\n\tconstructor(\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t}\n\n\tconfigure(options: IContextMenuHandlerOptions): void {\n\t\tthis.contextMenuHandler.configure(options);\n\t}\n\n\t// ContextMenu\n\n\tshowContextMenu(delegate: IContextMenuDelegate | IContextMenuMenuDelegate): void {\n\n\t\tdelegate = ContextMenuMenuDelegate.transform(delegate, this.menuService, this.contextKeyService);\n\n\t\tthis.contextMenuHandler.showContextMenu({\n\t\t\t...delegate,\n\t\t\tonHide: (didCancel) => {\n\t\t\t\tdelegate.onHide?.(didCancel);\n\n\t\t\t\tthis._onDidHideContextMenu.fire();\n\t\t\t}\n\t\t});\n\t\tModifierKeyEmitter.getInstance().resetKeyStatus();\n\t\tthis._onDidShowContextMenu.fire();\n\t}\n}\n\nexport namespace ContextMenuMenuDelegate {\n\n\tfunction is(thing: IContextMenuDelegate | IContextMenuMenuDelegate): thing is IContextMenuMenuDelegate {\n\t\treturn thing && (<IContextMenuMenuDelegate>thing).menuId instanceof MenuId;\n\t}\n\n\texport function transform(delegate: IContextMenuDelegate | IContextMenuMenuDelegate, menuService: IMenuService, globalContextKeyService: IContextKeyService): IContextMenuDelegate {\n\t\tif (!is(delegate)) {\n\t\t\treturn delegate;\n\t\t}\n\t\tconst { menuId, menuActionOptions, contextKeyService } = delegate;\n\t\treturn {\n\t\t\t...delegate,\n\t\t\tgetActions: () => {\n\t\t\t\tconst target: IAction[] = [];\n\t\t\t\tif (menuId) {\n\t\t\t\t\tconst menu = menuService.getMenuActions(menuId, contextKeyService ?? globalContextKeyService, menuActionOptions);\n\t\t\t\t\tcreateAndFillInContextMenuActions(menu, target);\n\t\t\t\t}\n\t\t\t\tif (!delegate.getActions) {\n\t\t\t\t\treturn target;\n\t\t\t\t} else {\n\t\t\t\t\treturn Separator.join(delegate.getActions(), target);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,4BAA4B;AACrC,SAAS,0BAA0B;AACnC,SAAS,SAAS,iBAAiB;AACnC,SAAS,eAAe;AACxB,SAAS,kBAAkB;AAC3B,SAAS,yCAAyC;AAClD,SAAS,cAAc,cAAc;AACrC,SAAS,0BAA0B;AACnC,SAAS,0BAA0B;AACnC,SAAS,4BAA4B;AACrC,SAAS,yBAAyB;AAClC,SAAS,oBAAoB,kCAAkC;AAC/D,SAAS,0BAA0B,qBAAqB,2BAA2B;AAE5E,IAAM,qBAAN,cAAiC,WAA0C;AAAA,EAmBjF,YACqC,kBACG,qBACD,oBACD,mBACN,aACM,mBACpC;AACD,UAAM;AAP8B;AACG;AACD;AACD;AACN;AACM;AAAA,EAGtC;AAAA,EA/CD,OAmBkF;AAAA;AAAA;AAAA,EAIzE,sBAAsD;AAAA,EAC9D,IAAY,qBAAyC;AACpD,QAAI,CAAC,KAAK,qBAAqB;AAC9B,WAAK,sBAAsB,IAAI,mBAAmB,KAAK,oBAAoB,KAAK,kBAAkB,KAAK,qBAAqB,KAAK,iBAAiB;AAAA,IACnJ;AAEA,WAAO,KAAK;AAAA,EACb;AAAA,EAEiB,wBAAwB,KAAK,OAAO,IAAI,IAAI,QAAc,CAAC;AAAA,EACnE,uBAAuB,KAAK,sBAAsB;AAAA,EAE1C,wBAAwB,KAAK,OAAO,IAAI,IAAI,QAAc,CAAC;AAAA,EACnE,uBAAuB,KAAK,sBAAsB;AAAA,EAa3D,UAAU,SAA2C;AACpD,SAAK,mBAAmB,UAAU,OAAO;AAAA,EAC1C;AAAA;AAAA,EAIA,gBAAgB,UAAiE;AAEhF,eAAW,wBAAwB,UAAU,UAAU,KAAK,aAAa,KAAK,iBAAiB;AAE/F,SAAK,mBAAmB,gBAAgB;AAAA,MACvC,GAAG;AAAA,MACH,QAAQ,wBAAC,cAAc;AACtB,iBAAS,SAAS,SAAS;AAE3B,aAAK,sBAAsB,KAAK;AAAA,MACjC,GAJQ;AAAA,IAKT,CAAC;AACD,uBAAmB,YAAY,EAAE,eAAe;AAChD,SAAK,sBAAsB,KAAK;AAAA,EACjC;AACD;AAnDa,qBAAN;AAAA,EAoBJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAzBU;AAqDN,IAAU;AAAA,CAAV,CAAUA,6BAAV;AAEN,WAAS,GAAG,OAA2F;AACtG,WAAO,SAAoC,MAAO,kBAAkB;AAAA,EACrE;AAFS;AAIF,WAAS,UAAU,UAA2D,aAA2B,yBAAmE;AAClL,QAAI,CAAC,GAAG,QAAQ,GAAG;AAClB,aAAO;AAAA,IACR;AACA,UAAM,EAAE,QAAQ,mBAAmB,kBAAkB,IAAI;AACzD,WAAO;AAAA,MACN,GAAG;AAAA,MACH,YAAY,6BAAM;AACjB,cAAM,SAAoB,CAAC;AAC3B,YAAI,QAAQ;AACX,gBAAM,OAAO,YAAY,eAAe,QAAQ,qBAAqB,yBAAyB,iBAAiB;AAC/G,4CAAkC,MAAM,MAAM;AAAA,QAC/C;AACA,YAAI,CAAC,SAAS,YAAY;AACzB,iBAAO;AAAA,QACR,OAAO;AACN,iBAAO,UAAU,KAAK,SAAS,WAAW,GAAG,MAAM;AAAA,QACpD;AAAA,MACD,GAXY;AAAA,IAYb;AAAA,EACD;AApBO,EAAAA,yBAAS;AAAA;AAAA,GANA;",
  "names": ["ContextMenuMenuDelegate"]
}
