{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/platform/contextview/browser/contextMenuService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IContextMenuDelegate } from \"../../../base/browser/contextmenu.js\";\nimport { ModifierKeyEmitter } from \"../../../base/browser/dom.js\";\nimport { type IAction, Separator } from \"../../../base/common/actions.js\";\nimport { Emitter } from \"../../../base/common/event.js\";\nimport { Disposable } from \"../../../base/common/lifecycle.js\";\nimport { createAndFillInContextMenuActions } from \"../../actions/browser/menuEntryActionViewItem.js\";\nimport { IMenuService, MenuId } from \"../../actions/common/actions.js\";\nimport { IContextKeyService } from \"../../contextkey/common/contextkey.js\";\nimport { IKeybindingService } from \"../../keybinding/common/keybinding.js\";\nimport { INotificationService } from \"../../notification/common/notification.js\";\nimport { ITelemetryService } from \"../../telemetry/common/telemetry.js\";\nimport {\n\tContextMenuHandler,\n\ttype IContextMenuHandlerOptions,\n} from \"./contextMenuHandler.js\";\nimport {\n\ttype IContextMenuMenuDelegate,\n\ttype IContextMenuService,\n\tIContextViewService,\n} from \"./contextView.js\";\n\nexport class ContextMenuService\n\textends Disposable\n\timplements IContextMenuService\n{\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _contextMenuHandler: ContextMenuHandler | undefined = undefined;\n\tprivate get contextMenuHandler(): ContextMenuHandler {\n\t\tif (!this._contextMenuHandler) {\n\t\t\tthis._contextMenuHandler = new ContextMenuHandler(\n\t\t\t\tthis.contextViewService,\n\t\t\t\tthis.telemetryService,\n\t\t\t\tthis.notificationService,\n\t\t\t\tthis.keybindingService,\n\t\t\t);\n\t\t}\n\n\t\treturn this._contextMenuHandler;\n\t}\n\n\tprivate readonly _onDidShowContextMenu = this._store.add(\n\t\tnew Emitter<void>(),\n\t);\n\treadonly onDidShowContextMenu = this._onDidShowContextMenu.event;\n\n\tprivate readonly _onDidHideContextMenu = this._store.add(\n\t\tnew Emitter<void>(),\n\t);\n\treadonly onDidHideContextMenu = this._onDidHideContextMenu.event;\n\n\tconstructor(\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@INotificationService\n\t\tprivate readonly notificationService: INotificationService,\n\t\t@IContextViewService\n\t\tprivate readonly contextViewService: IContextViewService,\n\t\t@IKeybindingService\n\t\tprivate readonly keybindingService: IKeybindingService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IContextKeyService\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t}\n\n\tconfigure(options: IContextMenuHandlerOptions): void {\n\t\tthis.contextMenuHandler.configure(options);\n\t}\n\n\t// ContextMenu\n\n\tshowContextMenu(\n\t\tdelegate: IContextMenuDelegate | IContextMenuMenuDelegate,\n\t): void {\n\t\tdelegate = ContextMenuMenuDelegate.transform(\n\t\t\tdelegate,\n\t\t\tthis.menuService,\n\t\t\tthis.contextKeyService,\n\t\t);\n\n\t\tthis.contextMenuHandler.showContextMenu({\n\t\t\t...delegate,\n\t\t\tonHide: (didCancel) => {\n\t\t\t\tdelegate.onHide?.(didCancel);\n\n\t\t\t\tthis._onDidHideContextMenu.fire();\n\t\t\t},\n\t\t});\n\t\tModifierKeyEmitter.getInstance().resetKeyStatus();\n\t\tthis._onDidShowContextMenu.fire();\n\t}\n}\n\nexport namespace ContextMenuMenuDelegate {\n\tfunction is(\n\t\tthing: IContextMenuDelegate | IContextMenuMenuDelegate,\n\t): thing is IContextMenuMenuDelegate {\n\t\treturn (\n\t\t\tthing && (<IContextMenuMenuDelegate>thing).menuId instanceof MenuId\n\t\t);\n\t}\n\n\texport function transform(\n\t\tdelegate: IContextMenuDelegate | IContextMenuMenuDelegate,\n\t\tmenuService: IMenuService,\n\t\tglobalContextKeyService: IContextKeyService,\n\t): IContextMenuDelegate {\n\t\tif (!is(delegate)) {\n\t\t\treturn delegate;\n\t\t}\n\t\tconst { menuId, menuActionOptions, contextKeyService } = delegate;\n\t\treturn {\n\t\t\t...delegate,\n\t\t\tgetActions: () => {\n\t\t\t\tconst target: IAction[] = [];\n\t\t\t\tif (menuId) {\n\t\t\t\t\tconst menu = menuService.getMenuActions(\n\t\t\t\t\t\tmenuId,\n\t\t\t\t\t\tcontextKeyService ?? globalContextKeyService,\n\t\t\t\t\t\tmenuActionOptions,\n\t\t\t\t\t);\n\t\t\t\t\tcreateAndFillInContextMenuActions(menu, target);\n\t\t\t\t}\n\t\t\t\tif (delegate.getActions) {\n\t\t\t\t\treturn Separator.join(delegate.getActions(), target);\n\t\t\t\t} else {\n\t\t\t\t\treturn target;\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAMA,SAAS,0BAA0B;AACnC,SAAuB,iBAAiB;AACxC,SAAS,eAAe;AACxB,SAAS,kBAAkB;AAC3B,SAAS,yCAAyC;AAClD,SAAS,cAAc,cAAc;AACrC,SAAS,0BAA0B;AACnC,SAAS,0BAA0B;AACnC,SAAS,4BAA4B;AACrC,SAAS,yBAAyB;AAClC;AAAA,EACC;AAAA,OAEM;AACP;AAAA,EAGC;AAAA,OACM;AAEA,IAAM,qBAAN,cACE,WAET;AAAA,EA2BC,YACqC,kBAEnB,qBAEA,oBAEA,mBACc,aAEd,mBAChB;AACD,UAAM;AAX8B;AAEnB;AAEA;AAEA;AACc;AAEd;AAAA,EAGlB;AAAA,EArED,OA6BA;AAAA;AAAA;AAAA,EAGS,sBAAsD;AAAA,EAC9D,IAAY,qBAAyC;AACpD,QAAI,CAAC,KAAK,qBAAqB;AAC9B,WAAK,sBAAsB,IAAI;AAAA,QAC9B,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,MACN;AAAA,IACD;AAEA,WAAO,KAAK;AAAA,EACb;AAAA,EAEiB,wBAAwB,KAAK,OAAO;AAAA,IACpD,IAAI,QAAc;AAAA,EACnB;AAAA,EACS,uBAAuB,KAAK,sBAAsB;AAAA,EAE1C,wBAAwB,KAAK,OAAO;AAAA,IACpD,IAAI,QAAc;AAAA,EACnB;AAAA,EACS,uBAAuB,KAAK,sBAAsB;AAAA,EAiB3D,UAAU,SAA2C;AACpD,SAAK,mBAAmB,UAAU,OAAO;AAAA,EAC1C;AAAA;AAAA,EAIA,gBACC,UACO;AACP,eAAW,wBAAwB;AAAA,MAClC;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,IACN;AAEA,SAAK,mBAAmB,gBAAgB;AAAA,MACvC,GAAG;AAAA,MACH,QAAQ,wBAAC,cAAc;AACtB,iBAAS,SAAS,SAAS;AAE3B,aAAK,sBAAsB,KAAK;AAAA,MACjC,GAJQ;AAAA,IAKT,CAAC;AACD,uBAAmB,YAAY,EAAE,eAAe;AAChD,SAAK,sBAAsB,KAAK;AAAA,EACjC;AACD;AAvEa,qBAAN;AAAA,EA+BJ;AAAA,EACA;AAAA,EAEA;AAAA,EAEA;AAAA,EAEA;AAAA,EACA;AAAA,GAvCU;AAyEN,IAAU;AAAA,CAAV,CAAUA,6BAAV;AACN,WAAS,GACR,OACoC;AACpC,WACC,SAAoC,MAAO,kBAAkB;AAAA,EAE/D;AANS;AAQF,WAAS,UACf,UACA,aACA,yBACuB;AACvB,QAAI,CAAC,GAAG,QAAQ,GAAG;AAClB,aAAO;AAAA,IACR;AACA,UAAM,EAAE,QAAQ,mBAAmB,kBAAkB,IAAI;AACzD,WAAO;AAAA,MACN,GAAG;AAAA,MACH,YAAY,6BAAM;AACjB,cAAM,SAAoB,CAAC;AAC3B,YAAI,QAAQ;AACX,gBAAM,OAAO,YAAY;AAAA,YACxB;AAAA,YACA,qBAAqB;AAAA,YACrB;AAAA,UACD;AACA,4CAAkC,MAAM,MAAM;AAAA,QAC/C;AACA,YAAI,SAAS,YAAY;AACxB,iBAAO,UAAU,KAAK,SAAS,WAAW,GAAG,MAAM;AAAA,QACpD,OAAO;AACN,iBAAO;AAAA,QACR;AAAA,MACD,GAfY;AAAA,IAgBb;AAAA,EACD;AA5BO,EAAAA,yBAAS;AAAA;AAAA,GATA;",
  "names": ["ContextMenuMenuDelegate"]
}
