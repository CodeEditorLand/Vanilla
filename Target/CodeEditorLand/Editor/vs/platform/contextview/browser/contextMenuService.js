var I=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var x=(o,i,t,e)=>{for(var n=e>1?void 0:e?f(i,t):i,u=o.length-1,r;u>=0;u--)(r=o[u])&&(n=(e?r(i,t,n):r(n))||n);return e&&n&&I(i,t,n),n},c=(o,i)=>(t,e)=>i(t,e,o);import"../../../../vs/base/browser/contextmenu.js";import{ModifierKeyEmitter as p}from"../../../../vs/base/browser/dom.js";import{Separator as S}from"../../../../vs/base/common/actions.js";import{Emitter as M}from"../../../../vs/base/common/event.js";import{Disposable as C}from"../../../../vs/base/common/lifecycle.js";import{createAndFillInContextMenuActions as y}from"../../../../vs/platform/actions/browser/menuEntryActionViewItem.js";import{IMenuService as h,MenuId as D}from"../../../../vs/platform/actions/common/actions.js";import{IContextKeyService as H}from"../../../../vs/platform/contextkey/common/contextkey.js";import{IKeybindingService as g}from"../../../../vs/platform/keybinding/common/keybinding.js";import{INotificationService as w}from"../../../../vs/platform/notification/common/notification.js";import{ITelemetryService as _}from"../../../../vs/platform/telemetry/common/telemetry.js";import{ContextMenuHandler as K}from"./contextMenuHandler.js";import{IContextViewService as A}from"./contextView.js";let a=class extends C{constructor(t,e,n,u,r,s){super();this.telemetryService=t;this.notificationService=e;this.contextViewService=n;this.keybindingService=u;this.menuService=r;this.contextKeyService=s}_contextMenuHandler=void 0;get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new K(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}_onDidShowContextMenu=this._store.add(new M);onDidShowContextMenu=this._onDidShowContextMenu.event;_onDidHideContextMenu=this._store.add(new M);onDidHideContextMenu=this._onDidHideContextMenu.event;configure(t){this.contextMenuHandler.configure(t)}showContextMenu(t){t=m.transform(t,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...t,onHide:e=>{t.onHide?.(e),this._onDidHideContextMenu.fire()}}),p.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};a=x([c(0,_),c(1,w),c(2,A),c(3,g),c(4,h),c(5,H)],a);var m;(t=>{function o(e){return e&&e.menuId instanceof D}function i(e,n,u){if(!o(e))return e;const{menuId:r,menuActionOptions:s,contextKeyService:v}=e;return{...e,getActions:()=>{const d=[];if(r){const l=n.getMenuActions(r,v??u,s);y(l,d)}return e.getActions?S.join(e.getActions(),d):d}}}t.transform=i})(m||={});export{m as ContextMenuMenuDelegate,a as ContextMenuService};
