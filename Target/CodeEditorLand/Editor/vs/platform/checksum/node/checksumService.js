var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var n=(s,e,o,i)=>{for(var r=i>1?void 0:i?p(e,o):e,a=s.length-1,t;a>=0;a--)(t=s[a])&&(r=(i?t(e,o,r):t(r))||r);return i&&r&&l(e,o,r),r},c=(s,e)=>(o,i)=>e(o,i,s);import{createHash as d}from"crypto";import{listenStream as f}from"../../../base/common/stream.js";import{IFileService as u}from"../../files/common/files.js";let m=class{constructor(e){this.fileService=e}async checksum(e){const o=(await this.fileService.readFileStream(e)).value;return new Promise((i,r)=>{const a=d("sha256");f(o,{onData:t=>a.update(t.buffer),onError:t=>r(t),onEnd:()=>i(a.digest("base64").replace(/=+$/,""))})})}};m=n([c(0,u)],m);export{m as ChecksumService};
