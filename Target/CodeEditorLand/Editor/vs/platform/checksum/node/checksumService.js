var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=(s,e,t,i)=>{for(var r=i>1?void 0:i?d(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(r=(i?a(e,t,r):a(r))||r);return i&&r&&l(e,t,r),r},c=(s,e)=>(t,i)=>e(t,i,s);import{createHash as f}from"crypto";import{listenStream as p}from"../../../base/common/stream.js";import"../../../base/common/uri.js";import"../common/checksumService.js";import{IFileService as u}from"../../files/common/files.js";let n=class{constructor(e){this.fileService=e}async checksum(e){const t=(await this.fileService.readFileStream(e)).value;return new Promise((i,r)=>{const o=f("sha256");p(t,{onData:a=>o.update(a.buffer),onError:a=>r(a),onEnd:()=>i(o.digest("base64").replace(/=+$/,""))})})}};n=m([c(0,u)],n);export{n as ChecksumService};
