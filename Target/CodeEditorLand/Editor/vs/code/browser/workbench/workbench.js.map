{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/code/browser/workbench/workbench.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isStandalone } from \"../../../base/browser/browser.js\";\nimport { mainWindow } from \"../../../base/browser/window.js\";\nimport {\n\tVSBuffer,\n\tdecodeBase64,\n\tencodeBase64,\n} from \"../../../base/common/buffer.js\";\nimport { Emitter } from \"../../../base/common/event.js\";\nimport {\n\tDisposable,\n\ttype IDisposable,\n} from \"../../../base/common/lifecycle.js\";\nimport { parse } from \"../../../base/common/marshalling.js\";\nimport { Schemas } from \"../../../base/common/network.js\";\nimport { posix } from \"../../../base/common/path.js\";\nimport { isEqual } from \"../../../base/common/resources.js\";\nimport { ltrim } from \"../../../base/common/strings.js\";\nimport { URI, type UriComponents } from \"../../../base/common/uri.js\";\nimport product from \"../../../platform/product/common/product.js\";\nimport type { ISecretStorageProvider } from \"../../../platform/secrets/common/secrets.js\";\nimport {\n\tisFolderToOpen,\n\tisWorkspaceToOpen,\n} from \"../../../platform/window/common/window.js\";\nimport type {\n\tIWorkbenchConstructionOptions,\n\tIWorkspace,\n\tIWorkspaceProvider,\n} from \"../../../workbench/browser/web.api.js\";\nimport type { AuthenticationSessionInfo } from \"../../../workbench/services/authentication/browser/authenticationService.js\";\nimport type { IURLCallbackProvider } from \"../../../workbench/services/url/browser/urlService.js\";\nimport { create } from \"../../../workbench/workbench.web.main.internal.js\";\n\ninterface ISecretStorageCrypto {\n\tseal(data: string): Promise<string>;\n\tunseal(data: string): Promise<string>;\n}\n\nclass TransparentCrypto implements ISecretStorageCrypto {\n\tasync seal(data: string): Promise<string> {\n\t\treturn data;\n\t}\n\n\tasync unseal(data: string): Promise<string> {\n\t\treturn data;\n\t}\n}\n\nenum AESConstants {\n\tALGORITHM = \"AES-GCM\",\n\tKEY_LENGTH = 256,\n\tIV_LENGTH = 12,\n}\n\nclass ServerKeyedAESCrypto implements ISecretStorageCrypto {\n\tprivate _serverKey: Uint8Array | undefined;\n\n\t/** Gets whether the algorithm is supported; requires a secure context */\n\tpublic static supported() {\n\t\treturn !!crypto.subtle;\n\t}\n\n\tconstructor(private readonly authEndpoint: string) {}\n\n\tasync seal(data: string): Promise<string> {\n\t\t// Get a new key and IV on every change, to avoid the risk of reusing the same key and IV pair with AES-GCM\n\t\t// (see also: https://developer.mozilla.org/en-US/docs/Web/API/AesGcmParams#properties)\n\t\tconst iv = mainWindow.crypto.getRandomValues(\n\t\t\tnew Uint8Array(AESConstants.IV_LENGTH),\n\t\t);\n\t\t// crypto.getRandomValues isn't a good-enough PRNG to generate crypto keys, so we need to use crypto.subtle.generateKey and export the key instead\n\t\tconst clientKeyObj = await mainWindow.crypto.subtle.generateKey(\n\t\t\t{\n\t\t\t\tname: AESConstants.ALGORITHM as const,\n\t\t\t\tlength: AESConstants.KEY_LENGTH as const,\n\t\t\t},\n\t\t\ttrue,\n\t\t\t[\"encrypt\", \"decrypt\"],\n\t\t);\n\n\t\tconst clientKey = new Uint8Array(\n\t\t\tawait mainWindow.crypto.subtle.exportKey(\"raw\", clientKeyObj),\n\t\t);\n\t\tconst key = await this.getKey(clientKey);\n\t\tconst dataUint8Array = new TextEncoder().encode(data);\n\t\tconst cipherText: ArrayBuffer = await mainWindow.crypto.subtle.encrypt(\n\t\t\t{ name: AESConstants.ALGORITHM as const, iv },\n\t\t\tkey,\n\t\t\tdataUint8Array,\n\t\t);\n\n\t\t// Base64 encode the result and store the ciphertext, the key, and the IV in localStorage\n\t\t// Note that the clientKey and IV don't need to be secret\n\t\tconst result = new Uint8Array([\n\t\t\t...clientKey,\n\t\t\t...iv,\n\t\t\t...new Uint8Array(cipherText),\n\t\t]);\n\t\treturn encodeBase64(VSBuffer.wrap(result));\n\t}\n\n\tasync unseal(data: string): Promise<string> {\n\t\t// encrypted should contain, in order: the key (32-byte), the IV for AES-GCM (12-byte) and the ciphertext (which has the GCM auth tag at the end)\n\t\t// Minimum length must be 44 (key+IV length) + 16 bytes (1 block encrypted with AES - regardless of key size)\n\t\tconst dataUint8Array = decodeBase64(data);\n\n\t\tif (dataUint8Array.byteLength < 60) {\n\t\t\tthrow Error(\"Invalid length for the value for credentials.crypto\");\n\t\t}\n\n\t\tconst keyLength = AESConstants.KEY_LENGTH / 8;\n\t\tconst clientKey = dataUint8Array.slice(0, keyLength);\n\t\tconst iv = dataUint8Array.slice(\n\t\t\tkeyLength,\n\t\t\tkeyLength + AESConstants.IV_LENGTH,\n\t\t);\n\t\tconst cipherText = dataUint8Array.slice(\n\t\t\tkeyLength + AESConstants.IV_LENGTH,\n\t\t);\n\n\t\t// Do the decryption and parse the result as JSON\n\t\tconst key = await this.getKey(clientKey.buffer);\n\t\tconst decrypted = await mainWindow.crypto.subtle.decrypt(\n\t\t\t{ name: AESConstants.ALGORITHM as const, iv: iv.buffer },\n\t\t\tkey,\n\t\t\tcipherText.buffer,\n\t\t);\n\n\t\treturn new TextDecoder().decode(new Uint8Array(decrypted));\n\t}\n\n\t/**\n\t * Given a clientKey, returns the CryptoKey object that is used to encrypt/decrypt the data.\n\t * The actual key is (clientKey XOR serverKey)\n\t */\n\tprivate async getKey(clientKey: Uint8Array): Promise<CryptoKey> {\n\t\tif (\n\t\t\t!clientKey ||\n\t\t\tclientKey.byteLength !== AESConstants.KEY_LENGTH / 8\n\t\t) {\n\t\t\tthrow Error(\"Invalid length for clientKey\");\n\t\t}\n\n\t\tconst serverKey = await this.getServerKeyPart();\n\t\tconst keyData = new Uint8Array(AESConstants.KEY_LENGTH / 8);\n\n\t\tfor (let i = 0; i < keyData.byteLength; i++) {\n\t\t\tkeyData[i] = clientKey[i]! ^ serverKey[i]!;\n\t\t}\n\n\t\treturn mainWindow.crypto.subtle.importKey(\n\t\t\t\"raw\",\n\t\t\tkeyData,\n\t\t\t{\n\t\t\t\tname: AESConstants.ALGORITHM as const,\n\t\t\t\tlength: AESConstants.KEY_LENGTH as const,\n\t\t\t},\n\t\t\ttrue,\n\t\t\t[\"encrypt\", \"decrypt\"],\n\t\t);\n\t}\n\n\tprivate async getServerKeyPart(): Promise<Uint8Array> {\n\t\tif (this._serverKey) {\n\t\t\treturn this._serverKey;\n\t\t}\n\n\t\tlet attempt = 0;\n\t\tlet lastError: unknown | undefined;\n\n\t\twhile (attempt <= 3) {\n\t\t\ttry {\n\t\t\t\tconst res = await fetch(this.authEndpoint, {\n\t\t\t\t\tcredentials: \"include\",\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t});\n\t\t\t\tif (!res.ok) {\n\t\t\t\t\tthrow new Error(res.statusText);\n\t\t\t\t}\n\t\t\t\tconst serverKey = new Uint8Array(await await res.arrayBuffer());\n\t\t\t\tif (serverKey.byteLength !== AESConstants.KEY_LENGTH / 8) {\n\t\t\t\t\tthrow Error(\n\t\t\t\t\t\t`The key retrieved by the server is not ${AESConstants.KEY_LENGTH} bit long.`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis._serverKey = serverKey;\n\t\t\t\treturn this._serverKey;\n\t\t\t} catch (e) {\n\t\t\t\tlastError = e;\n\t\t\t\tattempt++;\n\n\t\t\t\t// exponential backoff\n\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\tsetTimeout(resolve, attempt * attempt * 100),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthrow lastError;\n\t}\n}\n\nexport class LocalStorageSecretStorageProvider\n\timplements ISecretStorageProvider\n{\n\tprivate readonly _storageKey = \"secrets.provider\";\n\n\tprivate _secretsPromise: Promise<Record<string, string>> = this.load();\n\n\ttype: \"in-memory\" | \"persisted\" | \"unknown\" = \"persisted\";\n\n\tconstructor(private readonly crypto: ISecretStorageCrypto) {}\n\n\tprivate async load(): Promise<Record<string, string>> {\n\t\tconst record = this.loadAuthSessionFromElement();\n\t\t// Get the secrets from localStorage\n\t\tconst encrypted = localStorage.getItem(this._storageKey);\n\t\tif (encrypted) {\n\t\t\ttry {\n\t\t\t\tconst decrypted = JSON.parse(\n\t\t\t\t\tawait this.crypto.unseal(encrypted),\n\t\t\t\t);\n\t\t\t\treturn { ...record, ...decrypted };\n\t\t\t} catch (err) {\n\t\t\t\t// TODO: send telemetry\n\t\t\t\tconsole.error(\n\t\t\t\t\t\"Failed to decrypt secrets from localStorage\",\n\t\t\t\t\terr,\n\t\t\t\t);\n\t\t\t\tlocalStorage.removeItem(this._storageKey);\n\t\t\t}\n\t\t}\n\n\t\treturn record;\n\t}\n\n\tprivate loadAuthSessionFromElement(): Record<string, string> {\n\t\tlet authSessionInfo:\n\t\t\t| (AuthenticationSessionInfo & { scopes: string[][] })\n\t\t\t| undefined;\n\t\tconst authSessionElement = mainWindow.document.getElementById(\n\t\t\t\"vscode-workbench-auth-session\",\n\t\t);\n\t\tconst authSessionElementAttribute = authSessionElement\n\t\t\t? authSessionElement.getAttribute(\"data-settings\")\n\t\t\t: undefined;\n\t\tif (authSessionElementAttribute) {\n\t\t\ttry {\n\t\t\t\tauthSessionInfo = JSON.parse(authSessionElementAttribute);\n\t\t\t} catch (error) {\n\t\t\t\t/* Invalid session is passed. Ignore. */\n\t\t\t}\n\t\t}\n\n\t\tif (!authSessionInfo) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst record: Record<string, string> = {};\n\n\t\t// Settings Sync Entry\n\t\trecord[`${product.urlProtocol}.loginAccount`] =\n\t\t\tJSON.stringify(authSessionInfo);\n\n\t\t// Auth extension Entry\n\t\tif (authSessionInfo.providerId !== \"github\") {\n\t\t\tconsole.error(\n\t\t\t\t`Unexpected auth provider: ${authSessionInfo.providerId}. Expected 'github'.`,\n\t\t\t);\n\t\t\treturn record;\n\t\t}\n\n\t\tconst authAccount = JSON.stringify({\n\t\t\textensionId: \"vscode.github-authentication\",\n\t\t\tkey: \"github.auth\",\n\t\t});\n\t\trecord[authAccount] = JSON.stringify(\n\t\t\tauthSessionInfo.scopes.map((scopes) => ({\n\t\t\t\tid: authSessionInfo.id,\n\t\t\t\tscopes,\n\t\t\t\taccessToken: authSessionInfo.accessToken,\n\t\t\t})),\n\t\t);\n\n\t\treturn record;\n\t}\n\n\tasync get(key: string): Promise<string | undefined> {\n\t\tconst secrets = await this._secretsPromise;\n\t\treturn secrets[key];\n\t}\n\tasync set(key: string, value: string): Promise<void> {\n\t\tconst secrets = await this._secretsPromise;\n\t\tsecrets[key] = value;\n\t\tthis._secretsPromise = Promise.resolve(secrets);\n\t\tthis.save();\n\t}\n\tasync delete(key: string): Promise<void> {\n\t\tconst secrets = await this._secretsPromise;\n\t\tdelete secrets[key];\n\t\tthis._secretsPromise = Promise.resolve(secrets);\n\t\tthis.save();\n\t}\n\n\tprivate async save(): Promise<void> {\n\t\ttry {\n\t\t\tconst encrypted = await this.crypto.seal(\n\t\t\t\tJSON.stringify(await this._secretsPromise),\n\t\t\t);\n\t\t\tlocalStorage.setItem(this._storageKey, encrypted);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t}\n}\n\nclass LocalStorageURLCallbackProvider\n\textends Disposable\n\timplements IURLCallbackProvider\n{\n\tprivate static REQUEST_ID = 0;\n\n\tprivate static QUERY_KEYS: (\n\t\t| \"scheme\"\n\t\t| \"authority\"\n\t\t| \"path\"\n\t\t| \"query\"\n\t\t| \"fragment\"\n\t)[] = [\"scheme\", \"authority\", \"path\", \"query\", \"fragment\"];\n\n\tprivate readonly _onCallback = this._register(new Emitter<URI>());\n\treadonly onCallback = this._onCallback.event;\n\n\tprivate pendingCallbacks = new Set<number>();\n\tprivate lastTimeChecked = Date.now();\n\tprivate checkCallbacksTimeout: unknown | undefined = undefined;\n\tprivate onDidChangeLocalStorageDisposable: IDisposable | undefined;\n\n\tconstructor(private readonly _callbackRoute: string) {\n\t\tsuper();\n\t}\n\n\tcreate(options: Partial<UriComponents> = {}): URI {\n\t\tconst id = ++LocalStorageURLCallbackProvider.REQUEST_ID;\n\t\tconst queryParams: string[] = [`vscode-reqid=${id}`];\n\n\t\tfor (const key of LocalStorageURLCallbackProvider.QUERY_KEYS) {\n\t\t\tconst value = options[key];\n\n\t\t\tif (value) {\n\t\t\t\tqueryParams.push(`vscode-${key}=${encodeURIComponent(value)}`);\n\t\t\t}\n\t\t}\n\n\t\t// TODO@joao remove eventually\n\t\t// https://github.com/microsoft/vscode-dev/issues/62\n\t\t// https://github.com/microsoft/vscode/blob/159479eb5ae451a66b5dac3c12d564f32f454796/extensions/github-authentication/src/githubServer.ts#L50-L50\n\t\tif (\n\t\t\t!(\n\t\t\t\toptions.authority === \"vscode.github-authentication\" &&\n\t\t\t\toptions.path === \"/dummy\"\n\t\t\t)\n\t\t) {\n\t\t\tconst key = `vscode-web.url-callbacks[${id}]`;\n\t\t\tlocalStorage.removeItem(key);\n\n\t\t\tthis.pendingCallbacks.add(id);\n\t\t\tthis.startListening();\n\t\t}\n\n\t\treturn URI.parse(mainWindow.location.href).with({\n\t\t\tpath: this._callbackRoute,\n\t\t\tquery: queryParams.join(\"&\"),\n\t\t});\n\t}\n\n\tprivate startListening(): void {\n\t\tif (this.onDidChangeLocalStorageDisposable) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fn = () => this.onDidChangeLocalStorage();\n\t\tmainWindow.addEventListener(\"storage\", fn);\n\t\tthis.onDidChangeLocalStorageDisposable = {\n\t\t\tdispose: () => mainWindow.removeEventListener(\"storage\", fn),\n\t\t};\n\t}\n\n\tprivate stopListening(): void {\n\t\tthis.onDidChangeLocalStorageDisposable?.dispose();\n\t\tthis.onDidChangeLocalStorageDisposable = undefined;\n\t}\n\n\t// this fires every time local storage changes, but we\n\t// don't want to check more often than once a second\n\tprivate async onDidChangeLocalStorage(): Promise<void> {\n\t\tconst ellapsed = Date.now() - this.lastTimeChecked;\n\n\t\tif (ellapsed > 1000) {\n\t\t\tthis.checkCallbacks();\n\t\t} else if (this.checkCallbacksTimeout === undefined) {\n\t\t\tthis.checkCallbacksTimeout = setTimeout(() => {\n\t\t\t\tthis.checkCallbacksTimeout = undefined;\n\t\t\t\tthis.checkCallbacks();\n\t\t\t}, 1000 - ellapsed);\n\t\t}\n\t}\n\n\tprivate checkCallbacks(): void {\n\t\tlet pendingCallbacks: Set<number> | undefined;\n\n\t\tfor (const id of this.pendingCallbacks) {\n\t\t\tconst key = `vscode-web.url-callbacks[${id}]`;\n\t\t\tconst result = localStorage.getItem(key);\n\n\t\t\tif (result !== null) {\n\t\t\t\ttry {\n\t\t\t\t\tthis._onCallback.fire(URI.revive(JSON.parse(result)));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\n\t\t\t\tpendingCallbacks =\n\t\t\t\t\tpendingCallbacks ?? new Set(this.pendingCallbacks);\n\t\t\t\tpendingCallbacks.delete(id);\n\t\t\t\tlocalStorage.removeItem(key);\n\t\t\t}\n\t\t}\n\n\t\tif (pendingCallbacks) {\n\t\t\tthis.pendingCallbacks = pendingCallbacks;\n\n\t\t\tif (this.pendingCallbacks.size === 0) {\n\t\t\t\tthis.stopListening();\n\t\t\t}\n\t\t}\n\n\t\tthis.lastTimeChecked = Date.now();\n\t}\n}\n\nclass WorkspaceProvider implements IWorkspaceProvider {\n\tprivate static QUERY_PARAM_EMPTY_WINDOW = \"ew\";\n\tprivate static QUERY_PARAM_FOLDER = \"folder\";\n\tprivate static QUERY_PARAM_WORKSPACE = \"workspace\";\n\n\tprivate static QUERY_PARAM_PAYLOAD = \"payload\";\n\n\tstatic create(\n\t\tconfig: IWorkbenchConstructionOptions & {\n\t\t\tfolderUri?: UriComponents;\n\t\t\tworkspaceUri?: UriComponents;\n\t\t},\n\t) {\n\t\tlet foundWorkspace = false;\n\t\tlet workspace: IWorkspace;\n\t\tlet payload = Object.create(null);\n\n\t\tconst query = new URL(document.location.href).searchParams;\n\t\tquery.forEach((value, key) => {\n\t\t\tswitch (key) {\n\t\t\t\t// Folder\n\t\t\t\tcase WorkspaceProvider.QUERY_PARAM_FOLDER:\n\t\t\t\t\tif (config.remoteAuthority && value.startsWith(posix.sep)) {\n\t\t\t\t\t\t// when connected to a remote and having a value\n\t\t\t\t\t\t// that is a path (begins with a `/`), assume this\n\t\t\t\t\t\t// is a vscode-remote resource as simplified URL.\n\t\t\t\t\t\tworkspace = {\n\t\t\t\t\t\t\tfolderUri: URI.from({\n\t\t\t\t\t\t\t\tscheme: Schemas.vscodeRemote,\n\t\t\t\t\t\t\t\tpath: value,\n\t\t\t\t\t\t\t\tauthority: config.remoteAuthority,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tworkspace = { folderUri: URI.parse(value) };\n\t\t\t\t\t}\n\t\t\t\t\tfoundWorkspace = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t// Workspace\n\t\t\t\tcase WorkspaceProvider.QUERY_PARAM_WORKSPACE:\n\t\t\t\t\tif (config.remoteAuthority && value.startsWith(posix.sep)) {\n\t\t\t\t\t\t// when connected to a remote and having a value\n\t\t\t\t\t\t// that is a path (begins with a `/`), assume this\n\t\t\t\t\t\t// is a vscode-remote resource as simplified URL.\n\t\t\t\t\t\tworkspace = {\n\t\t\t\t\t\t\tworkspaceUri: URI.from({\n\t\t\t\t\t\t\t\tscheme: Schemas.vscodeRemote,\n\t\t\t\t\t\t\t\tpath: value,\n\t\t\t\t\t\t\t\tauthority: config.remoteAuthority,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tworkspace = { workspaceUri: URI.parse(value) };\n\t\t\t\t\t}\n\t\t\t\t\tfoundWorkspace = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t// Empty\n\t\t\t\tcase WorkspaceProvider.QUERY_PARAM_EMPTY_WINDOW:\n\t\t\t\t\tworkspace = undefined;\n\t\t\t\t\tfoundWorkspace = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t// Payload\n\t\t\t\tcase WorkspaceProvider.QUERY_PARAM_PAYLOAD:\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpayload = parse(value); // use marshalling#parse() to revive potential URIs\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(error); // possible invalid JSON\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\t// If no workspace is provided through the URL, check for config\n\t\t// attribute from server\n\t\tif (!foundWorkspace) {\n\t\t\tif (config.folderUri) {\n\t\t\t\tworkspace = { folderUri: URI.revive(config.folderUri) };\n\t\t\t} else if (config.workspaceUri) {\n\t\t\t\tworkspace = { workspaceUri: URI.revive(config.workspaceUri) };\n\t\t\t}\n\t\t}\n\n\t\treturn new WorkspaceProvider(workspace, payload, config);\n\t}\n\n\treadonly trusted = true;\n\n\tprivate constructor(\n\t\treadonly workspace: IWorkspace,\n\t\treadonly payload: object,\n\t\tprivate readonly config: IWorkbenchConstructionOptions,\n\t) {}\n\n\tasync open(\n\t\tworkspace: IWorkspace,\n\t\toptions?: { reuse?: boolean; payload?: object },\n\t): Promise<boolean> {\n\t\tif (\n\t\t\toptions?.reuse &&\n\t\t\t!options.payload &&\n\t\t\tthis.isSame(this.workspace, workspace)\n\t\t) {\n\t\t\treturn true; // return early if workspace and environment is not changing and we are reusing window\n\t\t}\n\n\t\tconst targetHref = this.createTargetUrl(workspace, options);\n\t\tif (targetHref) {\n\t\t\tif (options?.reuse) {\n\t\t\t\tmainWindow.location.href = targetHref;\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tlet result;\n\t\t\t\tif (isStandalone()) {\n\t\t\t\t\tresult = mainWindow.open(\n\t\t\t\t\t\ttargetHref,\n\t\t\t\t\t\t\"_blank\",\n\t\t\t\t\t\t\"toolbar=no\",\n\t\t\t\t\t); // ensures to open another 'standalone' window!\n\t\t\t\t} else {\n\t\t\t\t\tresult = mainWindow.open(targetHref);\n\t\t\t\t}\n\n\t\t\t\treturn !!result;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate createTargetUrl(\n\t\tworkspace: IWorkspace,\n\t\toptions?: { reuse?: boolean; payload?: object },\n\t): string | undefined {\n\t\t// Empty\n\t\tlet targetHref: string | undefined;\n\t\tif (!workspace) {\n\t\t\ttargetHref = `${document.location.origin}${document.location.pathname}?${WorkspaceProvider.QUERY_PARAM_EMPTY_WINDOW}=true`;\n\t\t}\n\n\t\t// Folder\n\t\telse if (isFolderToOpen(workspace)) {\n\t\t\tconst queryParamFolder = this.encodeWorkspacePath(\n\t\t\t\tworkspace.folderUri,\n\t\t\t);\n\t\t\ttargetHref = `${document.location.origin}${document.location.pathname}?${WorkspaceProvider.QUERY_PARAM_FOLDER}=${queryParamFolder}`;\n\t\t}\n\n\t\t// Workspace\n\t\telse if (isWorkspaceToOpen(workspace)) {\n\t\t\tconst queryParamWorkspace = this.encodeWorkspacePath(\n\t\t\t\tworkspace.workspaceUri,\n\t\t\t);\n\t\t\ttargetHref = `${document.location.origin}${document.location.pathname}?${WorkspaceProvider.QUERY_PARAM_WORKSPACE}=${queryParamWorkspace}`;\n\t\t}\n\n\t\t// Append payload if any\n\t\tif (options?.payload) {\n\t\t\ttargetHref += `&${WorkspaceProvider.QUERY_PARAM_PAYLOAD}=${encodeURIComponent(JSON.stringify(options.payload))}`;\n\t\t}\n\n\t\treturn targetHref;\n\t}\n\n\tprivate encodeWorkspacePath(uri: URI): string {\n\t\tif (\n\t\t\tthis.config.remoteAuthority &&\n\t\t\turi.scheme === Schemas.vscodeRemote\n\t\t) {\n\t\t\t// when connected to a remote and having a folder\n\t\t\t// or workspace for that remote, only use the path\n\t\t\t// as query value to form shorter, nicer URLs.\n\t\t\t// however, we still need to `encodeURIComponent`\n\t\t\t// to ensure to preserve special characters, such\n\t\t\t// as `+` in the path.\n\n\t\t\treturn encodeURIComponent(\n\t\t\t\t`${posix.sep}${ltrim(uri.path, posix.sep)}`,\n\t\t\t).replaceAll(\"%2F\", \"/\");\n\t\t}\n\n\t\treturn encodeURIComponent(uri.toString(true));\n\t}\n\n\tprivate isSame(workspaceA: IWorkspace, workspaceB: IWorkspace): boolean {\n\t\tif (!workspaceA || !workspaceB) {\n\t\t\treturn workspaceA === workspaceB; // both empty\n\t\t}\n\n\t\tif (isFolderToOpen(workspaceA) && isFolderToOpen(workspaceB)) {\n\t\t\treturn isEqual(workspaceA.folderUri, workspaceB.folderUri); // same workspace\n\t\t}\n\n\t\tif (isWorkspaceToOpen(workspaceA) && isWorkspaceToOpen(workspaceB)) {\n\t\t\treturn isEqual(workspaceA.workspaceUri, workspaceB.workspaceUri); // same workspace\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thasRemote(): boolean {\n\t\tif (this.workspace) {\n\t\t\tif (isFolderToOpen(this.workspace)) {\n\t\t\t\treturn this.workspace.folderUri.scheme === Schemas.vscodeRemote;\n\t\t\t}\n\n\t\t\tif (isWorkspaceToOpen(this.workspace)) {\n\t\t\t\treturn (\n\t\t\t\t\tthis.workspace.workspaceUri.scheme === Schemas.vscodeRemote\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nfunction readCookie(name: string): string | undefined {\n\tconst cookies = document.cookie.split(\"; \");\n\tfor (const cookie of cookies) {\n\t\tif (cookie.startsWith(name + \"=\")) {\n\t\t\treturn cookie.substring(name.length + 1);\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n(() => {\n\t// Find config by checking for DOM\n\tconst configElement = mainWindow.document.getElementById(\n\t\t\"vscode-workbench-web-configuration\",\n\t);\n\tconst configElementAttribute = configElement\n\t\t? configElement.getAttribute(\"data-settings\")\n\t\t: undefined;\n\tif (!configElement || !configElementAttribute) {\n\t\tthrow new Error(\"Missing web configuration element\");\n\t}\n\tconst config: IWorkbenchConstructionOptions & {\n\t\tfolderUri?: UriComponents;\n\t\tworkspaceUri?: UriComponents;\n\t\tcallbackRoute: string;\n\t} = JSON.parse(configElementAttribute);\n\tconst secretStorageKeyPath = readCookie(\"vscode-secret-key-path\");\n\tconst secretStorageCrypto =\n\t\tsecretStorageKeyPath && ServerKeyedAESCrypto.supported()\n\t\t\t? new ServerKeyedAESCrypto(secretStorageKeyPath)\n\t\t\t: new TransparentCrypto();\n\n\t// Create workbench\n\tcreate(mainWindow.document.body, {\n\t\t...config,\n\t\twindowIndicator: config.windowIndicator ?? {\n\t\t\tlabel: \"$(remote)\",\n\t\t\ttooltip: `${product.nameShort} Web`,\n\t\t},\n\t\tsettingsSyncOptions: config.settingsSyncOptions\n\t\t\t? { enabled: config.settingsSyncOptions.enabled }\n\t\t\t: undefined,\n\t\tworkspaceProvider: WorkspaceProvider.create(config),\n\t\turlCallbackProvider: new LocalStorageURLCallbackProvider(\n\t\t\tconfig.callbackRoute,\n\t\t),\n\t\tsecretStorageProvider:\n\t\t\tconfig.remoteAuthority && !secretStorageKeyPath\n\t\t\t\t? undefined /* with a remote without embedder-preferred storage, store on the remote */\n\t\t\t\t: new LocalStorageSecretStorageProvider(secretStorageCrypto),\n\t});\n})();\n"],
  "mappings": "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",
  "names": ["AESConstants", "crypto"]
}
