import{mainWindow as s}from"../../../../../vs/base/browser/window.js";import{Event as r}from"../../../../../vs/base/common/event.js";import{generateUuid as c}from"../../../../../vs/base/common/uuid.js";import{ipcMessagePort as m,ipcRenderer as g}from"../../../../../vs/base/parts/sandbox/electron-sandbox/globals.js";async function d(o,n,t=c()){m.acquire(n,t),typeof o=="string"&&g.send(o,t);const i=r.fromDOMEventEmitter(s,"message",e=>({nonce:e.data,port:e.ports[0],source:e.source})),{port:a}=await r.toPromise(r.once(r.filter(i,e=>e.nonce===t&&e.source===s)));return a}export{d as acquirePort};
