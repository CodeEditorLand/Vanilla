import{VSBuffer as t}from"../../../../../vs/base/common/buffer.js";import{Event as i}from"../../../../../vs/base/common/event.js";import"../../../../../vs/base/common/lifecycle.js";import{IPCClient as n}from"../../../../../vs/base/parts/ipc/common/ipc.js";class a{constructor(e){this.port=e;e.start()}onMessage=i.fromDOMEventEmitter(this.port,"message",e=>e.data?t.wrap(e.data):t.alloc(0));send(e){this.port.postMessage(e.buffer)}disconnect(){this.port.close()}}class m extends n{protocol;constructor(e,r){const s=new a(e);super(s,r),this.protocol=s}dispose(){this.protocol.disconnect(),super.dispose()}}export{m as Client,a as Protocol};
