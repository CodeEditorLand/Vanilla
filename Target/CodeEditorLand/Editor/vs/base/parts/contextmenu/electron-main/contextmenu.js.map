{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/parts/contextmenu/electron-main/contextmenu.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { type IpcMainEvent, Menu, MenuItem } from \"electron\";\nimport { validatedIpcMain } from \"../../ipc/electron-main/ipcMain.js\";\nimport {\n\tCONTEXT_MENU_CHANNEL,\n\tCONTEXT_MENU_CLOSE_CHANNEL,\n\ttype IPopupOptions,\n\ttype ISerializableContextMenuItem,\n} from \"../common/contextmenu.js\";\n\nexport function registerContextMenuListener(): void {\n\tvalidatedIpcMain.on(\n\t\tCONTEXT_MENU_CHANNEL,\n\t\t(\n\t\t\tevent: IpcMainEvent,\n\t\t\tcontextMenuId: number,\n\t\t\titems: ISerializableContextMenuItem[],\n\t\t\tonClickChannel: string,\n\t\t\toptions?: IPopupOptions,\n\t\t) => {\n\t\t\tconst menu = createMenu(event, onClickChannel, items);\n\n\t\t\tmenu.popup({\n\t\t\t\tx: options ? options.x : undefined,\n\t\t\t\ty: options ? options.y : undefined,\n\t\t\t\tpositioningItem: options ? options.positioningItem : undefined,\n\t\t\t\tcallback: () => {\n\t\t\t\t\t// Workaround for https://github.com/microsoft/vscode/issues/72447\n\t\t\t\t\t// It turns out that the menu gets GC'ed if not referenced anymore\n\t\t\t\t\t// As such we drag it into this scope so that it is not being GC'ed\n\t\t\t\t\tif (menu) {\n\t\t\t\t\t\tevent.sender.send(\n\t\t\t\t\t\t\tCONTEXT_MENU_CLOSE_CHANNEL,\n\t\t\t\t\t\t\tcontextMenuId,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t);\n}\n\nfunction createMenu(\n\tevent: IpcMainEvent,\n\tonClickChannel: string,\n\titems: ISerializableContextMenuItem[],\n): Menu {\n\tconst menu = new Menu();\n\n\titems.forEach((item) => {\n\t\tlet menuitem: MenuItem;\n\n\t\t// Separator\n\t\tif (item.type === \"separator\") {\n\t\t\tmenuitem = new MenuItem({\n\t\t\t\ttype: item.type,\n\t\t\t});\n\t\t}\n\n\t\t// Sub Menu\n\t\telse if (Array.isArray(item.submenu)) {\n\t\t\tmenuitem = new MenuItem({\n\t\t\t\tsubmenu: createMenu(event, onClickChannel, item.submenu),\n\t\t\t\tlabel: item.label,\n\t\t\t});\n\t\t}\n\n\t\t// Normal Menu Item\n\t\telse {\n\t\t\tmenuitem = new MenuItem({\n\t\t\t\tlabel: item.label,\n\t\t\t\ttype: item.type,\n\t\t\t\taccelerator: item.accelerator,\n\t\t\t\tchecked: item.checked,\n\t\t\t\tenabled: item.enabled,\n\t\t\t\tvisible: item.visible,\n\t\t\t\tclick: (menuItem, win, contextmenuEvent) =>\n\t\t\t\t\tevent.sender.send(\n\t\t\t\t\t\tonClickChannel,\n\t\t\t\t\t\titem.id,\n\t\t\t\t\t\tcontextmenuEvent,\n\t\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tmenu.append(menuitem);\n\t});\n\n\treturn menu;\n}\n"],
  "mappings": ";;AAKA,SAA4B,MAAM,gBAAgB;AAClD,SAAS,wBAAwB;AACjC;AAAA,EACC;AAAA,EACA;AAAA,OAGM;AAEA,SAAS,8BAAoC;AACnD,mBAAiB;AAAA,IAChB;AAAA,IACA,CACC,OACA,eACA,OACA,gBACA,YACI;AACJ,YAAM,OAAO,WAAW,OAAO,gBAAgB,KAAK;AAEpD,WAAK,MAAM;AAAA,QACV,GAAG,UAAU,QAAQ,IAAI;AAAA,QACzB,GAAG,UAAU,QAAQ,IAAI;AAAA,QACzB,iBAAiB,UAAU,QAAQ,kBAAkB;AAAA,QACrD,UAAU,6BAAM;AAIf,cAAI,MAAM;AACT,kBAAM,OAAO;AAAA,cACZ;AAAA,cACA;AAAA,YACD;AAAA,UACD;AAAA,QACD,GAVU;AAAA,MAWX,CAAC;AAAA,IACF;AAAA,EACD;AACD;AA9BgB;AAgChB,SAAS,WACR,OACA,gBACA,OACO;AACP,QAAM,OAAO,IAAI,KAAK;AAEtB,QAAM,QAAQ,CAAC,SAAS;AACvB,QAAI;AAGJ,QAAI,KAAK,SAAS,aAAa;AAC9B,iBAAW,IAAI,SAAS;AAAA,QACvB,MAAM,KAAK;AAAA,MACZ,CAAC;AAAA,IACF,WAGS,MAAM,QAAQ,KAAK,OAAO,GAAG;AACrC,iBAAW,IAAI,SAAS;AAAA,QACvB,SAAS,WAAW,OAAO,gBAAgB,KAAK,OAAO;AAAA,QACvD,OAAO,KAAK;AAAA,MACb,CAAC;AAAA,IACF,OAGK;AACJ,iBAAW,IAAI,SAAS;AAAA,QACvB,OAAO,KAAK;AAAA,QACZ,MAAM,KAAK;AAAA,QACX,aAAa,KAAK;AAAA,QAClB,SAAS,KAAK;AAAA,QACd,SAAS,KAAK;AAAA,QACd,SAAS,KAAK;AAAA,QACd,OAAO,wBAAC,UAAU,KAAK,qBACtB,MAAM,OAAO;AAAA,UACZ;AAAA,UACA,KAAK;AAAA,UACL;AAAA,QACD,GALM;AAAA,MAMR,CAAC;AAAA,IACF;AAEA,SAAK,OAAO,QAAQ;AAAA,EACrB,CAAC;AAED,SAAO;AACR;AA/CS;",
  "names": []
}
