{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/parts/contextmenu/electron-main/contextmenu.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IpcMainEvent, Menu, MenuItem } from 'electron';\nimport { validatedIpcMain } from '../../ipc/electron-main/ipcMain.js';\nimport { CONTEXT_MENU_CHANNEL, CONTEXT_MENU_CLOSE_CHANNEL, IPopupOptions, ISerializableContextMenuItem } from '../common/contextmenu.js';\n\nexport function registerContextMenuListener(): void {\n\tvalidatedIpcMain.on(CONTEXT_MENU_CHANNEL, (event: IpcMainEvent, contextMenuId: number, items: ISerializableContextMenuItem[], onClickChannel: string, options?: IPopupOptions) => {\n\t\tconst menu = createMenu(event, onClickChannel, items);\n\n\t\tmenu.popup({\n\t\t\tx: options ? options.x : undefined,\n\t\t\ty: options ? options.y : undefined,\n\t\t\tpositioningItem: options ? options.positioningItem : undefined,\n\t\t\tcallback: () => {\n\t\t\t\t// Workaround for https://github.com/microsoft/vscode/issues/72447\n\t\t\t\t// It turns out that the menu gets GC'ed if not referenced anymore\n\t\t\t\t// As such we drag it into this scope so that it is not being GC'ed\n\t\t\t\tif (menu) {\n\t\t\t\t\tevent.sender.send(CONTEXT_MENU_CLOSE_CHANNEL, contextMenuId);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction createMenu(event: IpcMainEvent, onClickChannel: string, items: ISerializableContextMenuItem[]): Menu {\n\tconst menu = new Menu();\n\n\titems.forEach(item => {\n\t\tlet menuitem: MenuItem;\n\n\t\t// Separator\n\t\tif (item.type === 'separator') {\n\t\t\tmenuitem = new MenuItem({\n\t\t\t\ttype: item.type,\n\t\t\t});\n\t\t}\n\n\t\t// Sub Menu\n\t\telse if (Array.isArray(item.submenu)) {\n\t\t\tmenuitem = new MenuItem({\n\t\t\t\tsubmenu: createMenu(event, onClickChannel, item.submenu),\n\t\t\t\tlabel: item.label\n\t\t\t});\n\t\t}\n\n\t\t// Normal Menu Item\n\t\telse {\n\t\t\tmenuitem = new MenuItem({\n\t\t\t\tlabel: item.label,\n\t\t\t\ttype: item.type,\n\t\t\t\taccelerator: item.accelerator,\n\t\t\t\tchecked: item.checked,\n\t\t\t\tenabled: item.enabled,\n\t\t\t\tvisible: item.visible,\n\t\t\t\tclick: (menuItem, win, contextmenuEvent) => event.sender.send(onClickChannel, item.id, contextmenuEvent)\n\t\t\t});\n\t\t}\n\n\t\tmenu.append(menuitem);\n\t});\n\n\treturn menu;\n}\n"],
  "mappings": ";;AAKA,SAAS,cAAc,MAAM,gBAAgB;AAC7C,SAAS,wBAAwB;AACjC,SAAS,sBAAsB,4BAA4B,eAAe,oCAAoC;AAEvG,SAAS,8BAAoC;AACnD,mBAAiB,GAAG,sBAAsB,CAAC,OAAqB,eAAuB,OAAuC,gBAAwB,YAA4B;AACjL,UAAM,OAAO,WAAW,OAAO,gBAAgB,KAAK;AAEpD,SAAK,MAAM;AAAA,MACV,GAAG,UAAU,QAAQ,IAAI;AAAA,MACzB,GAAG,UAAU,QAAQ,IAAI;AAAA,MACzB,iBAAiB,UAAU,QAAQ,kBAAkB;AAAA,MACrD,UAAU,6BAAM;AAIf,YAAI,MAAM;AACT,gBAAM,OAAO,KAAK,4BAA4B,aAAa;AAAA,QAC5D;AAAA,MACD,GAPU;AAAA,IAQX,CAAC;AAAA,EACF,CAAC;AACF;AAlBgB;AAoBhB,SAAS,WAAW,OAAqB,gBAAwB,OAA6C;AAC7G,QAAM,OAAO,IAAI,KAAK;AAEtB,QAAM,QAAQ,UAAQ;AACrB,QAAI;AAGJ,QAAI,KAAK,SAAS,aAAa;AAC9B,iBAAW,IAAI,SAAS;AAAA,QACvB,MAAM,KAAK;AAAA,MACZ,CAAC;AAAA,IACF,WAGS,MAAM,QAAQ,KAAK,OAAO,GAAG;AACrC,iBAAW,IAAI,SAAS;AAAA,QACvB,SAAS,WAAW,OAAO,gBAAgB,KAAK,OAAO;AAAA,QACvD,OAAO,KAAK;AAAA,MACb,CAAC;AAAA,IACF,OAGK;AACJ,iBAAW,IAAI,SAAS;AAAA,QACvB,OAAO,KAAK;AAAA,QACZ,MAAM,KAAK;AAAA,QACX,aAAa,KAAK;AAAA,QAClB,SAAS,KAAK;AAAA,QACd,SAAS,KAAK;AAAA,QACd,SAAS,KAAK;AAAA,QACd,OAAO,wBAAC,UAAU,KAAK,qBAAqB,MAAM,OAAO,KAAK,gBAAgB,KAAK,IAAI,gBAAgB,GAAhG;AAAA,MACR,CAAC;AAAA,IACF;AAEA,SAAK,OAAO,QAAQ;AAAA,EACrB,CAAC;AAED,SAAO;AACR;AAtCS;",
  "names": []
}
