import{Menu as c,MenuItem as i}from"electron";import{validatedIpcMain as d}from"../../ipc/electron-main/ipcMain.js";import{CONTEXT_MENU_CHANNEL as o,CONTEXT_MENU_CLOSE_CHANNEL as s}from"../common/contextmenu.js";function y(){d.on(o,(t,r,u,a,e)=>{const n=l(t,a,u);n.popup({x:e?e.x:void 0,y:e?e.y:void 0,positioningItem:e?e.positioningItem:void 0,callback:()=>{n&&t.sender.send(s,r)}})})}function l(t,r,u){const a=new c;return u.forEach(e=>{let n;e.type==="separator"?n=new i({type:e.type}):Array.isArray(e.submenu)?n=new i({submenu:l(t,r,e.submenu),label:e.label}):n=new i({label:e.label,type:e.type,accelerator:e.accelerator,checked:e.checked,enabled:e.enabled,visible:e.visible,click:(I,b,p)=>t.sender.send(r,e.id,p)}),a.append(n)}),a}export{y as registerContextMenuListener};
