import{CONTEXT_MENU_CHANNEL as b,CONTEXT_MENU_CLOSE_CHANNEL as p}from"../common/contextmenu.js";import{ipcRenderer as u}from"../../sandbox/electron-sandbox/globals.js";let s=0;function N(e,n,t){const o=[],l=s++,r=`vscode:onContextMenu${l}`,i=(a,c,C)=>{o[c].click?.(C)};u.once(r,i),u.once(p,(a,c)=>{c===l&&(u.removeListener(r,i),t?.())}),u.send(b,l,e.map(a=>I(a,o)),r,n)}function I(e,n){const t={id:n.length,label:e.label,type:e.type,accelerator:e.accelerator,checked:e.checked,enabled:typeof e.enabled=="boolean"?e.enabled:!0,visible:typeof e.visible=="boolean"?e.visible:!0};return n.push(e),Array.isArray(e.submenu)&&(t.submenu=e.submenu.map(o=>I(o,n))),t}export{N as popup};
