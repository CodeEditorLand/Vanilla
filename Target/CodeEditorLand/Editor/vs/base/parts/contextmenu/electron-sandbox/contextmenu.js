import{ipcRenderer as u}from"../../sandbox/electron-sandbox/globals.js";import{CONTEXT_MENU_CHANNEL as C,CONTEXT_MENU_CLOSE_CHANNEL as b}from"../common/contextmenu.js";let s=0;function m(e,n,t){const o=[],l=s++,r=`vscode:onContextMenu${l}`,i=(a,c,I)=>{o[c].click?.(I)};u.once(r,i),u.once(b,(a,c)=>{c===l&&(u.removeListener(r,i),t?.())}),u.send(C,l,e.map(a=>p(a,o)),r,n)}function p(e,n){const t={id:n.length,label:e.label,type:e.type,accelerator:e.accelerator,checked:e.checked,enabled:typeof e.enabled=="boolean"?e.enabled:!0,visible:typeof e.visible=="boolean"?e.visible:!0};return n.push(e),Array.isArray(e.submenu)&&(t.submenu=e.submenu.map(o=>p(o,n))),t}export{m as popup};
