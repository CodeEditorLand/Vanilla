{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/parts/contextmenu/electron-sandbox/contextmenu.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CONTEXT_MENU_CHANNEL, CONTEXT_MENU_CLOSE_CHANNEL, IContextMenuEvent, IContextMenuItem, IPopupOptions, ISerializableContextMenuItem } from '../common/contextmenu.js';\nimport { ipcRenderer } from '../../sandbox/electron-sandbox/globals.js';\n\nlet contextMenuIdPool = 0;\n\nexport function popup(items: IContextMenuItem[], options?: IPopupOptions, onHide?: () => void): void {\n\tconst processedItems: IContextMenuItem[] = [];\n\n\tconst contextMenuId = contextMenuIdPool++;\n\tconst onClickChannel = `vscode:onContextMenu${contextMenuId}`;\n\tconst onClickChannelHandler = (event: unknown, itemId: number, context: IContextMenuEvent) => {\n\t\tconst item = processedItems[itemId];\n\t\titem.click?.(context);\n\t};\n\n\tipcRenderer.once(onClickChannel, onClickChannelHandler);\n\tipcRenderer.once(CONTEXT_MENU_CLOSE_CHANNEL, (event: unknown, closedContextMenuId: number) => {\n\t\tif (closedContextMenuId !== contextMenuId) {\n\t\t\treturn;\n\t\t}\n\n\t\tipcRenderer.removeListener(onClickChannel, onClickChannelHandler);\n\n\t\tonHide?.();\n\t});\n\n\tipcRenderer.send(CONTEXT_MENU_CHANNEL, contextMenuId, items.map(item => createItem(item, processedItems)), onClickChannel, options);\n}\n\nfunction createItem(item: IContextMenuItem, processedItems: IContextMenuItem[]): ISerializableContextMenuItem {\n\tconst serializableItem: ISerializableContextMenuItem = {\n\t\tid: processedItems.length,\n\t\tlabel: item.label,\n\t\ttype: item.type,\n\t\taccelerator: item.accelerator,\n\t\tchecked: item.checked,\n\t\tenabled: typeof item.enabled === 'boolean' ? item.enabled : true,\n\t\tvisible: typeof item.visible === 'boolean' ? item.visible : true\n\t};\n\n\tprocessedItems.push(item);\n\n\t// Submenu\n\tif (Array.isArray(item.submenu)) {\n\t\tserializableItem.submenu = item.submenu.map(submenuItem => createItem(submenuItem, processedItems));\n\t}\n\n\treturn serializableItem;\n}\n"],
  "mappings": ";;AAKA,SAAS,sBAAsB,4BAA4B,mBAAmB,kBAAkB,eAAe,oCAAoC;AACnJ,SAAS,mBAAmB;AAE5B,IAAI,oBAAoB;AAEjB,SAAS,MAAM,OAA2B,SAAyB,QAA2B;AACpG,QAAM,iBAAqC,CAAC;AAE5C,QAAM,gBAAgB;AACtB,QAAM,iBAAiB,uBAAuB,aAAa;AAC3D,QAAM,wBAAwB,wBAAC,OAAgB,QAAgB,YAA+B;AAC7F,UAAM,OAAO,eAAe,MAAM;AAClC,SAAK,QAAQ,OAAO;AAAA,EACrB,GAH8B;AAK9B,cAAY,KAAK,gBAAgB,qBAAqB;AACtD,cAAY,KAAK,4BAA4B,CAAC,OAAgB,wBAAgC;AAC7F,QAAI,wBAAwB,eAAe;AAC1C;AAAA,IACD;AAEA,gBAAY,eAAe,gBAAgB,qBAAqB;AAEhE,aAAS;AAAA,EACV,CAAC;AAED,cAAY,KAAK,sBAAsB,eAAe,MAAM,IAAI,UAAQ,WAAW,MAAM,cAAc,CAAC,GAAG,gBAAgB,OAAO;AACnI;AAtBgB;AAwBhB,SAAS,WAAW,MAAwB,gBAAkE;AAC7G,QAAM,mBAAiD;AAAA,IACtD,IAAI,eAAe;AAAA,IACnB,OAAO,KAAK;AAAA,IACZ,MAAM,KAAK;AAAA,IACX,aAAa,KAAK;AAAA,IAClB,SAAS,KAAK;AAAA,IACd,SAAS,OAAO,KAAK,YAAY,YAAY,KAAK,UAAU;AAAA,IAC5D,SAAS,OAAO,KAAK,YAAY,YAAY,KAAK,UAAU;AAAA,EAC7D;AAEA,iBAAe,KAAK,IAAI;AAGxB,MAAI,MAAM,QAAQ,KAAK,OAAO,GAAG;AAChC,qBAAiB,UAAU,KAAK,QAAQ,IAAI,iBAAe,WAAW,aAAa,cAAc,CAAC;AAAA,EACnG;AAEA,SAAO;AACR;AAnBS;",
  "names": []
}
