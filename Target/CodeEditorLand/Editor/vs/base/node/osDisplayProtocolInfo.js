import{constants as l,promises as y}from"fs";import{join as s}from"../../../vs/base/common/path.js";import{env as e}from"../../../vs/base/common/process.js";const i="XDG_SESSION_TYPE",p="WAYLAND_DISPLAY",c="XDG_RUNTIME_DIR";var D=(n=>(n.Wayland="wayland",n.XWayland="xwayland",n.X11="x11",n.Unknown="unknown",n))(D||{});async function w(a){const o=e[i];if(o)return o==="wayland"||o==="x11"?o:"unknown";if(e[p]){const r=e[c];if(r){const n=s(r,"wayland-0");try{return await y.access(n,l.R_OK),"wayland"}catch(t){return a(t),"unknown"}}else return"unknown"}else return"x11"}function S(a,o){if(o)switch(o){case"auto":return a;case"x11":return a==="wayland"?"xwayland":"x11";case"wayland":return"wayland";default:return"unknown"}else return a==="wayland"?"xwayland":"x11"}export{S as getCodeDisplayProtocol,w as getDisplayProtocol};
