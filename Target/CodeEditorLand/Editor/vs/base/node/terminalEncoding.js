import{exec as E}from"child_process";function u(){return globalThis._VSCODE_NLS_LANGUAGE}var H=u()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;var g="en",L=!1,I=!1,m=!1,A=!1,W=!1,v=!1,T=!1,F=!1,M=!1,z=!1,p,x=g,S=g,D,s,a=globalThis,t;typeof a.vscode<"u"&&typeof a.vscode.process<"u"?t=a.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(t=process);var N=typeof t?.versions?.electron=="string",G=N&&t?.type==="renderer";if(typeof t=="object"){L=t.platform==="win32",I=t.platform==="darwin",m=t.platform==="linux",A=m&&!!t.env.SNAP&&!!t.env.SNAP_REVISION,T=N,M=!!t.env.CI||!!t.env.BUILD_ARTIFACTSTAGINGDIRECTORY,p=g,x=g;let e=t.env.VSCODE_NLS_CONFIG;if(e)try{let n=JSON.parse(e);p=n.userLocale,S=n.osLocale,x=n.resolvedLanguage||g,D=n.languagePack?.translationsConfigFile}catch{}W=!0}else typeof navigator=="object"&&!G?(s=navigator.userAgent,L=s.indexOf("Windows")>=0,I=s.indexOf("Macintosh")>=0,F=(s.indexOf("Macintosh")>=0||s.indexOf("iPad")>=0||s.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,m=s.indexOf("Linux")>=0,z=s?.indexOf("Mobi")>=0,v=!0,x=u()||g,p=navigator.language.toLowerCase(),S=p):console.error("Unable to resolve platform.");var y=0;I?y=1:L?y=3:m&&(y=2);var _=L;var R=v&&typeof a.importScripts=="function",Y=R?a.origin:void 0;var i=s,l=x,U;(o=>{function e(){return l}o.value=e;function n(){return l.length===2?l==="en":l.length>=3?l[0]==="e"&&l[1]==="n"&&l[2]==="-":!1}o.isDefaultVariant=n;function r(){return l==="en"}o.isDefault=r})(U||={});var V=typeof a.postMessage=="function"&&!a.importScripts,Z=(()=>{if(V){let e=[];a.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let o=0,c=e.length;o<c;o++){let f=e[o];if(f.id===r.data.vscodeScheduleAsyncWork){e.splice(o,1),f.callback();return}}});let n=0;return r=>{let o=++n;e.push({id:o,callback:r}),a.postMessage({vscodeScheduleAsyncWork:o},"*")}}return e=>setTimeout(e)})();var $=!!(i&&i.indexOf("Chrome")>=0),q=!!(i&&i.indexOf("Firefox")>=0),X=!!(!$&&i&&i.indexOf("Safari")>=0),ee=!!(i&&i.indexOf("Edg/")>=0),ne=!!(i&&i.indexOf("Android")>=0);var w={437:"cp437",850:"cp850",852:"cp852",855:"cp855",857:"cp857",860:"cp860",861:"cp861",863:"cp863",865:"cp865",866:"cp866",869:"cp869",936:"cp936",1252:"cp1252"};function j(e){let n=e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return B[n]||n}var B={ibm866:"cp866",big5:"cp950"},h="utf8";async function ie(e){let n,r=process.env.VSCODE_CLI_ENCODING;r?(e&&console.log(`Found VSCODE_CLI_ENCODING variable: ${r}`),n=Promise.resolve(r)):_?n=new Promise(c=>{e&&console.log('Running "chcp" to detect terminal encoding...'),E("chcp",(f,d,C)=>{if(d){e&&console.log(`Output from "chcp" command is: ${d}`);let P=Object.keys(w);for(let b of P)if(d.indexOf(b)>=0)return c(w[b])}return c(void 0)})}):n=new Promise(c=>{e&&console.log('Running "locale charmap" to detect terminal encoding...'),E("locale charmap",(f,d,C)=>c(d))});let o=await n;return e&&console.log(`Detected raw terminal encoding: ${o}`),!o||o.toLowerCase()==="utf-8"||o.toLowerCase()===h?h:j(o)}export{ie as resolveTerminalEncoding};
