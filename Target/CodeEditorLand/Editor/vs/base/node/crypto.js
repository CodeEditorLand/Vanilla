import*as m from"crypto";import*as h from"fs";import{createSingleCallFunction as f}from"../../../vs/base/common/functional.js";async function p(s,t){if(await new Promise((i,c)=>{const e=h.createReadStream(s),r=m.createHash("sha256");e.pipe(r);const n=f((o,a)=>{e.removeAllListeners(),r.removeAllListeners(),o?c(o):i(a)});e.once("error",n),e.once("end",n),r.once("error",n),r.once("data",o=>n(void 0,o.toString("hex")))})!==t)throw new Error("Hash mismatch")}export{p as checksum};
