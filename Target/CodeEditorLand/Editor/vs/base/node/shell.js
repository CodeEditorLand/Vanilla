import{userInfo as l}from"os";import*as t from"../common/platform.js";import{getFirstAvailablePowerShellInstallation as o}from"./powershell.js";import*as a from"./processes.js";async function p(n,e){return n===t.OperatingSystem.Windows?t.isWindows?f():a.getWindowsShell(e):m(n,e)}let r=null;function m(n,e){if(t.isLinux&&n===t.OperatingSystem.Macintosh||t.isMacintosh&&n===t.OperatingSystem.Linux)return"/bin/bash";if(!r){let i;if(t.isWindows)i="/bin/bash";else{if(i=e.SHELL,!i)try{i=l().shell}catch{}i||(i="sh"),i==="/bin/false"&&(i="/bin/bash")}r=i}return r}let s=null;async function f(){return s||(s=(await o()).exePath),s}export{p as getSystemShell};
