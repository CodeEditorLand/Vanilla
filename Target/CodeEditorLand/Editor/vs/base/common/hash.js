import*as l from"../../../vs/base/common/strings.js";function y(r){return g(r,0)}function g(r,t){switch(typeof r){case"object":return r===null?a(349,t):Array.isArray(r)?S(r,t):A(r,t);case"string":return p(r,t);case"boolean":return C(r,t);case"number":return a(r,t);case"undefined":return a(937,t);default:return a(617,t)}}function a(r,t){return(t<<5)-t+r|0}function C(r,t){return a(r?433:863,t)}function p(r,t){t=a(149417,t);for(let e=0,n=r.length;e<n;e++)t=a(r.charCodeAt(e),t);return t}function S(r,t){return t=a(104579,t),r.reduce((e,n)=>g(n,e),t)}function A(r,t){return t=a(181387,t),Object.keys(r).sort().reduce((e,n)=>(e=p(n,e),g(r[n],e)),t)}class U{_value=0;get value(){return this._value}hash(t){return this._value=g(t,this._value),this._value}}var d=(e=>(e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT",e))(d||{});function m(r,t,e=32){const n=e-t,i=~((1<<n)-1);return(r<<t|(i&r)>>>n)>>>0}function x(r,t=0,e=r.byteLength,n=0){for(let i=0;i<e;i++)r[t+i]=n}function E(r,t,e="0"){for(;r.length<t;)r=e+r;return r}function b(r,t=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join(""):E((r>>>0).toString(16),t/4)}class v{static _bigBlock32=new DataView(new ArrayBuffer(320));_h0=1732584193;_h1=4023233417;_h2=2562383102;_h3=271733878;_h4=3285377520;_buff;_buffDV;_buffLen;_totalLen;_leftoverHighSurrogate;_finished;constructor(){this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(t){const e=t.length;if(e===0)return;const n=this._buff;let i=this._buffLen,u=this._leftoverHighSurrogate,f,h;for(u!==0?(f=u,h=-1,u=0):(f=t.charCodeAt(0),h=0);;){let _=f;if(l.isHighSurrogate(f))if(h+1<e){const o=t.charCodeAt(h+1);l.isLowSurrogate(o)?(h++,_=l.computeCodePoint(f,o)):_=65533}else{u=f;break}else l.isLowSurrogate(f)&&(_=65533);if(i=this._push(n,i,_),h++,h<e)f=t.charCodeAt(h);else break}this._buffLen=i,this._leftoverHighSurrogate=u}_push(t,e,n){return n<128?t[e++]=n:n<2048?(t[e++]=192|(n&1984)>>>6,t[e++]=128|(n&63)>>>0):n<65536?(t[e++]=224|(n&61440)>>>12,t[e++]=128|(n&4032)>>>6,t[e++]=128|(n&63)>>>0):(t[e++]=240|(n&1835008)>>>18,t[e++]=128|(n&258048)>>>12,t[e++]=128|(n&4032)>>>6,t[e++]=128|(n&63)>>>0),e>=64&&(this._step(),e-=64,this._totalLen+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),e}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),b(this._h0)+b(this._h1)+b(this._h2)+b(this._h3)+b(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,x(this._buff,this._buffLen),this._buffLen>56&&(this._step(),x(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=v._bigBlock32,e=this._buffDV;for(let s=0;s<64;s+=4)t.setUint32(s,e.getUint32(s,!1),!1);for(let s=64;s<320;s+=4)t.setUint32(s,m(t.getUint32(s-12,!1)^t.getUint32(s-32,!1)^t.getUint32(s-56,!1)^t.getUint32(s-64,!1),1),!1);let n=this._h0,i=this._h1,u=this._h2,f=this._h3,h=this._h4,_,o,c;for(let s=0;s<80;s++)s<20?(_=i&u|~i&f,o=1518500249):s<40?(_=i^u^f,o=1859775393):s<60?(_=i&u|i&f|u&f,o=2400959708):(_=i^u^f,o=3395469782),c=m(n,5)+_+h+o+t.getUint32(s*4,!1)&4294967295,h=f,f=u,u=m(i,30),i=n,n=c;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+u&4294967295,this._h3=this._h3+f&4294967295,this._h4=this._h4+h&4294967295}}export{U as Hasher,v as StringSHA1,g as doHash,y as hash,a as numberHash,p as stringHash,b as toHexString};
