var I=(p=>(p[p.None=0]="None",p[p.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",p[p.UnexpectedEndOfString=2]="UnexpectedEndOfString",p[p.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",p[p.InvalidUnicode=4]="InvalidUnicode",p[p.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",p[p.InvalidCharacter=6]="InvalidCharacter",p))(I||{}),V=(i=>(i[i.OpenBraceToken=1]="OpenBraceToken",i[i.CloseBraceToken=2]="CloseBraceToken",i[i.OpenBracketToken=3]="OpenBracketToken",i[i.CloseBracketToken=4]="CloseBracketToken",i[i.CommaToken=5]="CommaToken",i[i.ColonToken=6]="ColonToken",i[i.NullKeyword=7]="NullKeyword",i[i.TrueKeyword=8]="TrueKeyword",i[i.FalseKeyword=9]="FalseKeyword",i[i.StringLiteral=10]="StringLiteral",i[i.NumericLiteral=11]="NumericLiteral",i[i.LineCommentTrivia=12]="LineCommentTrivia",i[i.BlockCommentTrivia=13]="BlockCommentTrivia",i[i.LineBreakTrivia=14]="LineBreakTrivia",i[i.Trivia=15]="Trivia",i[i.Unknown=16]="Unknown",i[i.EOF=17]="EOF",i))(V||{}),_=(l=>(l[l.InvalidSymbol=1]="InvalidSymbol",l[l.InvalidNumberFormat=2]="InvalidNumberFormat",l[l.PropertyNameExpected=3]="PropertyNameExpected",l[l.ValueExpected=4]="ValueExpected",l[l.ColonExpected=5]="ColonExpected",l[l.CommaExpected=6]="CommaExpected",l[l.CloseBraceExpected=7]="CloseBraceExpected",l[l.CloseBracketExpected=8]="CloseBracketExpected",l[l.EndOfFileExpected=9]="EndOfFileExpected",l[l.InvalidCommentToken=10]="InvalidCommentToken",l[l.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",l[l.UnexpectedEndOfString=12]="UnexpectedEndOfString",l[l.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",l[l.InvalidUnicode=14]="InvalidUnicode",l[l.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",l[l.InvalidCharacter=16]="InvalidCharacter",l))(_||{}),O;(f=>f.DEFAULT={allowTrailingComma:!0})(O||={});function D(n,f=!1){let e=0,r=n.length,o="",m=0,s=16,p=0;function t(u){let l=0,i=0;for(;l<u;){let c=n.charCodeAt(e);if(c>=48&&c<=57)i=i*16+c-48;else if(c>=65&&c<=70)i=i*16+c-65+10;else if(c>=97&&c<=102)i=i*16+c-97+10;else break;e++,l++}return l<u&&(i=-1),i}function a(u){e=u,o="",m=0,s=16,p=0}function b(){let u=e;if(n.charCodeAt(e)===48)e++;else for(e++;e<n.length&&S(n.charCodeAt(e));)e++;if(e<n.length&&n.charCodeAt(e)===46)if(e++,e<n.length&&S(n.charCodeAt(e)))for(e++;e<n.length&&S(n.charCodeAt(e));)e++;else return p=3,n.substring(u,e);let l=e;if(e<n.length&&(n.charCodeAt(e)===69||n.charCodeAt(e)===101))if(e++,(e<n.length&&n.charCodeAt(e)===43||n.charCodeAt(e)===45)&&e++,e<n.length&&S(n.charCodeAt(e))){for(e++;e<n.length&&S(n.charCodeAt(e));)e++;l=e}else p=3;return n.substring(u,l)}function g(){let u="",l=e;for(;;){if(e>=r){u+=n.substring(l,e),p=2;break}let i=n.charCodeAt(e);if(i===34){u+=n.substring(l,e),e++;break}if(i===92){if(u+=n.substring(l,e),e++,e>=r){p=2;break}switch(n.charCodeAt(e++)){case 34:u+='"';break;case 92:u+="\\";break;case 47:u+="/";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+=`
`;break;case 114:u+="\r";break;case 116:u+="	";break;case 117:{let k=t(4);k>=0?u+=String.fromCharCode(k):p=4;break}default:p=5}l=e;continue}if(i>=0&&i<=31)if(E(i)){u+=n.substring(l,e),p=2;break}else p=6;e++}return u}function d(){if(o="",p=0,m=e,e>=r)return m=r,s=17;let u=n.charCodeAt(e);if(w(u)){do e++,o+=String.fromCharCode(u),u=n.charCodeAt(e);while(w(u));return s=15}if(E(u))return e++,o+=String.fromCharCode(u),u===13&&n.charCodeAt(e)===10&&(e++,o+=`
`),s=14;switch(u){case 123:return e++,s=1;case 125:return e++,s=2;case 91:return e++,s=3;case 93:return e++,s=4;case 58:return e++,s=6;case 44:return e++,s=5;case 34:return e++,o=g(),s=10;case 47:{let l=e-1;if(n.charCodeAt(e+1)===47){for(e+=2;e<r&&!E(n.charCodeAt(e));)e++;return o=n.substring(l,e),s=12}if(n.charCodeAt(e+1)===42){e+=2;let i=r-1,c=!1;for(;e<i;){if(n.charCodeAt(e)===42&&n.charCodeAt(e+1)===47){e+=2,c=!0;break}e++}return c||(e++,p=1),o=n.substring(l,e),s=13}return o+=String.fromCharCode(u),e++,s=16}case 45:if(o+=String.fromCharCode(u),e++,e===r||!S(n.charCodeAt(e)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=b(),s=11;default:for(;e<r&&N(u);)e++,u=n.charCodeAt(e);if(m!==e){switch(o=n.substring(m,e),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(u),e++,s=16}}function N(u){if(w(u)||E(u))return!1;switch(u){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function A(){let u;do u=d();while(u>=12&&u<=15);return u}return{setPosition:a,getPosition:()=>e,scan:f?A:d,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>m,getTokenLength:()=>e-m,getTokenError:()=>p}}function w(n){return n===32||n===9||n===11||n===12||n===160||n===5760||n>=8192&&n<=8203||n===8239||n===8287||n===12288||n===65279}function E(n){return n===10||n===13||n===8232||n===8233}function S(n){return n>=48&&n<=57}function W(n,f){let e=[],r=new Object,o,m={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function p(t,a,b,g){m.value=t,m.offset=a,m.length=b,m.type=g,m.colonOffset=void 0,o=m}try{v(n,{onObjectBegin:(t,a)=>{if(f<=t)throw r;o=void 0,s=f>t,e.push("")},onObjectProperty:(t,a,b)=>{if(f<a||(p(t,a,b,"property"),e[e.length-1]=t,f<=a+b))throw r},onObjectEnd:(t,a)=>{if(f<=t)throw r;o=void 0,e.pop()},onArrayBegin:(t,a)=>{if(f<=t)throw r;o=void 0,e.push(0)},onArrayEnd:(t,a)=>{if(f<=t)throw r;o=void 0,e.pop()},onLiteralValue:(t,a,b)=>{if(f<a||(p(t,a,b,P(t)),f<=a+b))throw r},onSeparator:(t,a,b)=>{if(f<=a)throw r;if(t===":"&&o&&o.type==="property")o.colonOffset=a,s=!1,o=void 0;else if(t===","){let g=e[e.length-1];typeof g=="number"?e[e.length-1]=g+1:(s=!0,e[e.length-1]=""),o=void 0}}})}catch(t){if(t!==r)throw t}return{path:e,previousNode:o,isAtPropertyKey:s,matches:t=>{let a=0;for(let b=0;a<t.length&&b<e.length;b++)if(t[a]===e[b]||t[a]==="*")a++;else if(t[a]!=="**")return!1;return a===t.length}}}function q(n,f=[],e=O.DEFAULT){let r=null,o=[],m=[];function s(t){Array.isArray(o)?o.push(t):r!==null&&(o[r]=t)}return v(n,{onObjectBegin:()=>{let t={};s(t),m.push(o),o=t,r=null},onObjectProperty:t=>{r=t},onObjectEnd:()=>{o=m.pop()},onArrayBegin:()=>{let t=[];s(t),m.push(o),o=t,r=null},onArrayEnd:()=>{o=m.pop()},onLiteralValue:s,onError:(t,a,b)=>{f.push({error:t,offset:a,length:b})}},e),o[0]}function z(n,f=[],e=O.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(t){r.type==="property"&&(r.length=t-r.offset,r=r.parent)}function m(t){return r.children.push(t),t}v(n,{onObjectBegin:t=>{r=m({type:"object",offset:t,length:-1,parent:r,children:[]})},onObjectProperty:(t,a,b)=>{r=m({type:"property",offset:a,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:t,offset:a,length:b,parent:r})},onObjectEnd:(t,a)=>{r.length=t+a-r.offset,r=r.parent,o(t+a)},onArrayBegin:(t,a)=>{r=m({type:"array",offset:t,length:-1,parent:r,children:[]})},onArrayEnd:(t,a)=>{r.length=t+a-r.offset,r=r.parent,o(t+a)},onLiteralValue:(t,a,b)=>{m({type:P(t),offset:a,length:b,parent:r,value:t}),o(a+b)},onSeparator:(t,a,b)=>{r.type==="property"&&(t===":"?r.colonOffset=a:t===","&&o(a))},onError:(t,a,b)=>{f.push({error:t,offset:a,length:b})}},e);let p=r.children[0];return p&&delete p.parent,p}function M(n,f){if(!n)return;let e=n;for(let r of f)if(typeof r=="string"){if(e.type!=="object"||!Array.isArray(e.children))return;let o=!1;for(let m of e.children)if(Array.isArray(m.children)&&m.children[0].value===r){e=m.children[1],o=!0;break}if(!o)return}else{let o=r;if(e.type!=="array"||o<0||!Array.isArray(e.children)||o>=e.children.length)return;e=e.children[o]}return e}function J(n){if(!n.parent||!n.parent.children)return[];let f=J(n.parent);if(n.parent.type==="property"){let e=n.parent.children[0].value;f.push(e)}else if(n.parent.type==="array"){let e=n.parent.children.indexOf(n);e!==-1&&f.push(e)}return f}function L(n){switch(n.type){case"array":return n.children.map(L);case"object":{let f=Object.create(null);for(let e of n.children){let r=e.children[1];r&&(f[e.children[0].value]=L(r))}return f}case"null":case"string":case"number":case"boolean":return n.value;default:return}}function Q(n,f,e=!1){return f>=n.offset&&f<n.offset+n.length||e&&f===n.offset+n.length}function R(n,f,e=!1){if(Q(n,f,e)){let r=n.children;if(Array.isArray(r))for(let o=0;o<r.length&&r[o].offset<=f;o++){let m=R(r[o],f,e);if(m)return m}return n}}function v(n,f,e=O.DEFAULT){let r=D(n,!1);function o(x){return x?()=>x(r.getTokenOffset(),r.getTokenLength()):()=>!0}function m(x){return x?y=>x(y,r.getTokenOffset(),r.getTokenLength()):()=>!0}let s=o(f.onObjectBegin),p=m(f.onObjectProperty),t=o(f.onObjectEnd),a=o(f.onArrayBegin),b=o(f.onArrayEnd),g=m(f.onLiteralValue),d=m(f.onSeparator),N=o(f.onComment),A=m(f.onError),u=e&&e.disallowComments,l=e&&e.allowTrailingComma;function i(){for(;;){let x=r.scan();switch(r.getTokenError()){case 4:c(14);break;case 5:c(15);break;case 3:c(13);break;case 1:u||c(11);break;case 2:c(12);break;case 6:c(16);break}switch(x){case 12:case 13:u?c(10):N();break;case 16:c(1);break;case 15:case 14:break;default:return x}}}function c(x,y=[],K=[]){if(A(x),y.length+K.length>0){let T=r.getToken();for(;T!==17;){if(y.indexOf(T)!==-1){i();break}else if(K.indexOf(T)!==-1)break;T=i()}}}function k(x){let y=r.getTokenValue();return x?g(y):p(y),i(),!0}function F(){switch(r.getToken()){case 11:{let x=0;try{x=JSON.parse(r.getTokenValue()),typeof x!="number"&&(c(2),x=0)}catch{c(2)}g(x);break}case 7:g(null);break;case 8:g(!0);break;case 9:g(!1);break;default:return!1}return i(),!0}function U(){return r.getToken()!==10?(c(3,[],[2,5]),!1):(k(!1),r.getToken()===6?(d(":"),i(),B()||c(4,[],[2,5])):c(5,[],[2,5]),!0)}function h(){s(),i();let x=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(x||c(4,[],[]),d(","),i(),r.getToken()===2&&l)break}else x&&c(6,[],[]);U()||c(4,[],[2,5]),x=!0}return t(),r.getToken()!==2?c(7,[2],[]):i(),!0}function j(){a(),i();let x=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(x||c(4,[],[]),d(","),i(),r.getToken()===4&&l)break}else x&&c(6,[],[]);B()||c(4,[],[4,5]),x=!0}return b(),r.getToken()!==4?c(8,[4],[]):i(),!0}function B(){switch(r.getToken()){case 3:return j();case 1:return h();case 10:return k(!0);default:return F()}}return i(),r.getToken()===17?e.allowEmptyContent?!0:(c(4,[],[]),!1):B()?(r.getToken()!==17&&c(9,[],[]),!0):(c(4,[],[]),!1)}function P(n){switch(typeof n){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(n){if(Array.isArray(n))return"array"}else return"null";return"object"}default:return"null"}}export{_ as ParseErrorCode,O as ParseOptions,I as ScanError,V as SyntaxKind,Q as contains,D as createScanner,M as findNodeAtLocation,R as findNodeAtOffset,W as getLocation,J as getNodePath,P as getNodeType,L as getNodeValue,q as parse,z as parseTree,v as visit};
