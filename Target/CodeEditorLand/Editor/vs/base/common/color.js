import{CharCode as o}from"../../../vs/base/common/charCode.js";function v(R,t){const r=Math.pow(10,t);return Math.round(R*r)/r}class m{_rgbaBrand=void 0;r;g;b;a;constructor(t,r,e,a=1){this.r=Math.min(255,Math.max(0,t))|0,this.g=Math.min(255,Math.max(0,r))|0,this.b=Math.min(255,Math.max(0,e))|0,this.a=v(Math.max(Math.min(1,a),0),3)}static equals(t,r){return t.r===r.r&&t.g===r.g&&t.b===r.b&&t.a===r.a}}class A{_hslaBrand=void 0;h;s;l;a;constructor(t,r,e,a){this.h=Math.max(Math.min(360,t),0)|0,this.s=v(Math.max(Math.min(1,r),0),3),this.l=v(Math.max(Math.min(1,e),0),3),this.a=v(Math.max(Math.min(1,a),0),3)}static equals(t,r){return t.h===r.h&&t.s===r.s&&t.l===r.l&&t.a===r.a}static fromRGBA(t){const r=t.r/255,e=t.g/255,a=t.b/255,s=t.a,l=Math.max(r,e,a),h=Math.min(r,e,a);let i=0,c=0;const g=(h+l)/2,d=l-h;if(d>0){switch(c=Math.min(g<=.5?d/(2*g):d/(2-2*g),1),l){case r:i=(e-a)/d+(e<a?6:0);break;case e:i=(a-r)/d+2;break;case a:i=(r-e)/d+4;break}i*=60,i=Math.round(i)}return new A(i,c,g,s)}static _hue2rgb(t,r,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(r-t)*6*e:e<1/2?r:e<2/3?t+(r-t)*(2/3-e)*6:t}static toRGBA(t){const r=t.h/360,{s:e,l:a,a:s}=t;let l,h,i;if(e===0)l=h=i=a;else{const c=a<.5?a*(1+e):a+e-a*e,g=2*a-c;l=A._hue2rgb(g,c,r+1/3),h=A._hue2rgb(g,c,r),i=A._hue2rgb(g,c,r-1/3)}return new m(Math.round(l*255),Math.round(h*255),Math.round(i*255),s)}}class p{_hsvaBrand=void 0;h;s;v;a;constructor(t,r,e,a){this.h=Math.max(Math.min(360,t),0)|0,this.s=v(Math.max(Math.min(1,r),0),3),this.v=v(Math.max(Math.min(1,e),0),3),this.a=v(Math.max(Math.min(1,a),0),3)}static equals(t,r){return t.h===r.h&&t.s===r.s&&t.v===r.v&&t.a===r.a}static fromRGBA(t){const r=t.r/255,e=t.g/255,a=t.b/255,s=Math.max(r,e,a),l=Math.min(r,e,a),h=s-l,i=s===0?0:h/s;let c;return h===0?c=0:s===r?c=((e-a)/h%6+6)%6:s===e?c=(a-r)/h+2:c=(r-e)/h+4,new p(Math.round(c*60),i,s,t.a)}static toRGBA(t){const{h:r,s:e,v:a,a:s}=t,l=a*e,h=l*(1-Math.abs(r/60%2-1)),i=a-l;let[c,g,d]=[0,0,0];return r<60?(c=l,g=h):r<120?(c=h,g=l):r<180?(g=l,d=h):r<240?(g=h,d=l):r<300?(c=h,d=l):r<=360&&(c=l,d=h),c=Math.round((c+i)*255),g=Math.round((g+i)*255),d=Math.round((d+i)*255),new m(c,g,d,s)}}class u{static fromHex(t){return u.Format.CSS.parseHex(t)||u.red}static equals(t,r){return!t&&!r?!0:!t||!r?!1:t.equals(r)}rgba;_hsla;get hsla(){return this._hsla?this._hsla:A.fromRGBA(this.rgba)}_hsva;get hsva(){return this._hsva?this._hsva:p.fromRGBA(this.rgba)}constructor(t){if(t)if(t instanceof m)this.rgba=t;else if(t instanceof A)this._hsla=t,this.rgba=A.toRGBA(t);else if(t instanceof p)this._hsva=t,this.rgba=p.toRGBA(t);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(t){return!!t&&m.equals(this.rgba,t.rgba)&&A.equals(this.hsla,t.hsla)&&p.equals(this.hsva,t.hsva)}getRelativeLuminance(){const t=u._relativeLuminanceForComponent(this.rgba.r),r=u._relativeLuminanceForComponent(this.rgba.g),e=u._relativeLuminanceForComponent(this.rgba.b),a=.2126*t+.7152*r+.0722*e;return v(a,4)}static _relativeLuminanceForComponent(t){const r=t/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}getContrastRatio(t){const r=this.getRelativeLuminance(),e=t.getRelativeLuminance();return r>e?(r+.05)/(e+.05):(e+.05)/(r+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(t){const r=this.getRelativeLuminance(),e=t.getRelativeLuminance();return r>e}isDarkerThan(t){const r=this.getRelativeLuminance(),e=t.getRelativeLuminance();return r<e}lighten(t){return new u(new A(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*t,this.hsla.a))}darken(t){return new u(new A(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*t,this.hsla.a))}transparent(t){const{r,g:e,b:a,a:s}=this.rgba;return new u(new m(r,e,a,s*t))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new u(new m(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(t){const r=t.rgba,e=this.rgba.a,a=r.a,s=e+a*(1-e);if(s<1e-6)return u.transparent;const l=this.rgba.r*e/s+r.r*a*(1-e)/s,h=this.rgba.g*e/s+r.g*a*(1-e)/s,i=this.rgba.b*e/s+r.b*a*(1-e)/s;return new u(new m(l,h,i,s))}makeOpaque(t){if(this.isOpaque()||t.rgba.a!==1)return this;const{r,g:e,b:a,a:s}=this.rgba;return new u(new m(t.rgba.r-s*(t.rgba.r-r),t.rgba.g-s*(t.rgba.g-e),t.rgba.b-s*(t.rgba.b-a),1))}flatten(...t){const r=t.reduceRight((e,a)=>u._flatten(a,e));return u._flatten(this,r)}static _flatten(t,r){const e=1-t.rgba.a;return new u(new m(e*r.rgba.r+t.rgba.a*t.rgba.r,e*r.rgba.g+t.rgba.a*t.rgba.g,e*r.rgba.b+t.rgba.a*t.rgba.b))}_toString;toString(){return this._toString||(this._toString=u.Format.CSS.format(this)),this._toString}static getLighterColor(t,r,e){if(t.isLighterThan(r))return t;e=e||.5;const a=t.getRelativeLuminance(),s=r.getRelativeLuminance();return e=e*(s-a)/s,t.lighten(e)}static getDarkerColor(t,r,e){if(t.isDarkerThan(r))return t;e=e||.5;const a=t.getRelativeLuminance(),s=r.getRelativeLuminance();return e=e*(a-s)/a,t.darken(e)}static white=new u(new m(255,255,255,1));static black=new u(new m(0,0,0,1));static red=new u(new m(255,0,0,1));static blue=new u(new m(0,0,255,1));static green=new u(new m(0,255,0,1));static cyan=new u(new m(0,255,255,1));static lightgrey=new u(new m(211,211,211,1));static transparent=new u(new m(0,0,0,0))}(t=>{let R;(e=>{let r;(L=>{function a(n){return n.rgba.a===1?`rgb(${n.rgba.r}, ${n.rgba.g}, ${n.rgba.b})`:t.Format.CSS.formatRGBA(n)}L.formatRGB=a;function s(n){return`rgba(${n.rgba.r}, ${n.rgba.g}, ${n.rgba.b}, ${+n.rgba.a.toFixed(2)})`}L.formatRGBA=s;function l(n){return n.hsla.a===1?`hsl(${n.hsla.h}, ${(n.hsla.s*100).toFixed(2)}%, ${(n.hsla.l*100).toFixed(2)}%)`:t.Format.CSS.formatHSLA(n)}L.formatHSL=l;function h(n){return`hsla(${n.hsla.h}, ${(n.hsla.s*100).toFixed(2)}%, ${(n.hsla.l*100).toFixed(2)}%, ${n.hsla.a.toFixed(2)})`}L.formatHSLA=h;function i(n){const f=n.toString(16);return f.length!==2?"0"+f:f}function c(n){return`#${i(n.rgba.r)}${i(n.rgba.g)}${i(n.rgba.b)}`}L.formatHex=c;function g(n,f=!1){return f&&n.rgba.a===1?t.Format.CSS.formatHex(n):`#${i(n.rgba.r)}${i(n.rgba.g)}${i(n.rgba.b)}${i(Math.round(n.rgba.a*255))}`}L.formatHexA=g;function d(n){return n.isOpaque()?t.Format.CSS.formatHex(n):t.Format.CSS.formatRGBA(n)}L.format=d;function y(n){const f=n.length;if(f===0||n.charCodeAt(0)!==o.Hash)return null;if(f===7){const w=16*b(n.charCodeAt(1))+b(n.charCodeAt(2)),C=16*b(n.charCodeAt(3))+b(n.charCodeAt(4)),M=16*b(n.charCodeAt(5))+b(n.charCodeAt(6));return new t(new m(w,C,M,1))}if(f===9){const w=16*b(n.charCodeAt(1))+b(n.charCodeAt(2)),C=16*b(n.charCodeAt(3))+b(n.charCodeAt(4)),M=16*b(n.charCodeAt(5))+b(n.charCodeAt(6)),S=16*b(n.charCodeAt(7))+b(n.charCodeAt(8));return new t(new m(w,C,M,S/255))}if(f===4){const w=b(n.charCodeAt(1)),C=b(n.charCodeAt(2)),M=b(n.charCodeAt(3));return new t(new m(16*w+w,16*C+C,16*M+M))}if(f===5){const w=b(n.charCodeAt(1)),C=b(n.charCodeAt(2)),M=b(n.charCodeAt(3)),S=b(n.charCodeAt(4));return new t(new m(16*w+w,16*C+C,16*M+M,(16*S+S)/255))}return null}L.parseHex=y;function b(n){switch(n){case o.Digit0:return 0;case o.Digit1:return 1;case o.Digit2:return 2;case o.Digit3:return 3;case o.Digit4:return 4;case o.Digit5:return 5;case o.Digit6:return 6;case o.Digit7:return 7;case o.Digit8:return 8;case o.Digit9:return 9;case o.a:return 10;case o.A:return 10;case o.b:return 11;case o.B:return 11;case o.c:return 12;case o.C:return 12;case o.d:return 13;case o.D:return 13;case o.e:return 14;case o.E:return 14;case o.f:return 15;case o.F:return 15}return 0}})(r=e.CSS||={})})(R=t.Format||={})})(u||={});export{u as Color,A as HSLA,p as HSVA,m as RGBA};
