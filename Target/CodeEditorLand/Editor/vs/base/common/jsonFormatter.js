var K;(o=>o.DEFAULT={allowTrailingComma:!0})(K||={});function v(n,o=!1){let e=0,l=n.length,a="",u=0,r=16,p=0;function O(t){let m=0,f=0;for(;m<t;){let s=n.charCodeAt(e);if(s>=48&&s<=57)f=f*16+s-48;else if(s>=65&&s<=70)f=f*16+s-65+10;else if(s>=97&&s<=102)f=f*16+s-97+10;else break;e++,m++}return m<t&&(f=-1),f}function x(t){e=t,a="",u=0,r=16,p=0}function d(){let t=e;if(n.charCodeAt(e)===48)e++;else for(e++;e<n.length&&S(n.charCodeAt(e));)e++;if(e<n.length&&n.charCodeAt(e)===46)if(e++,e<n.length&&S(n.charCodeAt(e)))for(e++;e<n.length&&S(n.charCodeAt(e));)e++;else return p=3,n.substring(t,e);let m=e;if(e<n.length&&(n.charCodeAt(e)===69||n.charCodeAt(e)===101))if(e++,(e<n.length&&n.charCodeAt(e)===43||n.charCodeAt(e)===45)&&e++,e<n.length&&S(n.charCodeAt(e))){for(e++;e<n.length&&S(n.charCodeAt(e));)e++;m=e}else p=3;return n.substring(t,m)}function y(){let t="",m=e;for(;;){if(e>=l){t+=n.substring(m,e),p=2;break}let f=n.charCodeAt(e);if(f===34){t+=n.substring(m,e),e++;break}if(f===92){if(t+=n.substring(m,e),e++,e>=l){p=2;break}switch(n.charCodeAt(e++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+=`
`;break;case 114:t+="\r";break;case 116:t+="	";break;case 117:{let i=O(4);i>=0?t+=String.fromCharCode(i):p=4;break}default:p=5}m=e;continue}if(f>=0&&f<=31)if(E(f)){t+=n.substring(m,e),p=2;break}else p=6;e++}return t}function g(){if(a="",p=0,u=e,e>=l)return u=l,r=17;let t=n.charCodeAt(e);if(B(t)){do e++,a+=String.fromCharCode(t),t=n.charCodeAt(e);while(B(t));return r=15}if(E(t))return e++,a+=String.fromCharCode(t),t===13&&n.charCodeAt(e)===10&&(e++,a+=`
`),r=14;switch(t){case 123:return e++,r=1;case 125:return e++,r=2;case 91:return e++,r=3;case 93:return e++,r=4;case 58:return e++,r=6;case 44:return e++,r=5;case 34:return e++,a=y(),r=10;case 47:{let m=e-1;if(n.charCodeAt(e+1)===47){for(e+=2;e<l&&!E(n.charCodeAt(e));)e++;return a=n.substring(m,e),r=12}if(n.charCodeAt(e+1)===42){e+=2;let f=l-1,s=!1;for(;e<f;){if(n.charCodeAt(e)===42&&n.charCodeAt(e+1)===47){e+=2,s=!0;break}e++}return s||(e++,p=1),a=n.substring(m,e),r=13}return a+=String.fromCharCode(t),e++,r=16}case 45:if(a+=String.fromCharCode(t),e++,e===l||!S(n.charCodeAt(e)))return r=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=d(),r=11;default:for(;e<l&&T(t);)e++,t=n.charCodeAt(e);if(u!==e){switch(a=n.substring(u,e),a){case"true":return r=8;case"false":return r=9;case"null":return r=7}return r=16}return a+=String.fromCharCode(t),e++,r=16}}function T(t){if(B(t)||E(t))return!1;switch(t){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function k(){let t;do t=g();while(t>=12&&t<=15);return t}return{setPosition:x,getPosition:()=>e,scan:o?k:g,getToken:()=>r,getTokenValue:()=>a,getTokenOffset:()=>u,getTokenLength:()=>e-u,getTokenError:()=>p}}function B(n){return n===32||n===9||n===11||n===12||n===160||n===5760||n>=8192&&n<=8203||n===8239||n===8287||n===12288||n===65279}function E(n){return n===10||n===13||n===8232||n===8233}function S(n){return n>=48&&n<=57}function V(n,o,e){let l,a,u,r,p;if(o){for(r=o.offset,p=r+o.length,u=r;u>0&&!w(n,u-1);)u--;let i=p;for(;i<n.length&&!w(n,i);)i++;a=n.substring(u,i),l=L(a,e)}else a=n,l=0,u=0,r=0,p=n.length;let O=F(e,n),x=!1,d=0,y;e.insertSpaces?y=N(" ",e.tabSize||4):y="	";let g=v(a,!1),T=!1;function k(){return O+N(y,l+d)}function t(){let i=g.scan();for(x=!1;i===15||i===14;)x=x||i===14,i=g.scan();return T=i===16||g.getTokenError()!==0,i}let m=[];function f(i,c,b){!T&&c<p&&b>r&&n.substring(c,b)!==i&&m.push({offset:c,length:b-c,content:i})}let s=t();if(s!==17){let i=g.getTokenOffset()+u,c=N(y,l);f(c,u,i)}for(;s!==17;){let i=g.getTokenOffset()+g.getTokenLength()+u,c=t(),b="";for(;!x&&(c===12||c===13);){let h=g.getTokenOffset()+u;f(" ",i,h),i=g.getTokenOffset()+g.getTokenLength()+u,b=c===12?k():"",c=t()}if(c===2)s!==1&&(d--,b=k());else if(c===4)s!==3&&(d--,b=k());else{switch(s){case 3:case 1:d++,b=k();break;case 5:case 12:b=k();break;case 13:x?b=k():b=" ";break;case 6:b=" ";break;case 10:if(c===6){b="";break}case 7:case 8:case 9:case 11:case 2:case 4:c===12||c===13?b=" ":c!==5&&c!==17&&(T=!0);break;case 16:T=!0;break}x&&(c===12||c===13)&&(b=k())}let A=g.getTokenOffset()+u;f(b,i,A),s=c}return m}function _(n,o){let e=JSON.stringify(n,void 0,o.insertSpaces?o.tabSize||4:"	");return o.eol!==void 0?e.replace(/\r\n|\r|\n/g,o.eol):e}function N(n,o){let e="";for(let l=0;l<o;l++)e+=n;return e}function L(n,o){let e=0,l=0,a=o.tabSize||4;for(;e<n.length;){let u=n.charAt(e);if(u===" ")l++;else if(u==="	")l+=a;else break;e++}return Math.floor(l/a)}function F(n,o){for(let e=0;e<o.length;e++){let l=o.charAt(e);if(l==="\r")return e+1<o.length&&o.charAt(e+1)===`
`?`\r
`:"\r";if(l===`
`)return`
`}return n&&n.eol||`
`}function w(n,o){return`\r
`.indexOf(n.charAt(o))!==-1}export{V as format,F as getEOL,w as isEOL,_ as toFormattedString};
