{
  "version": 3,
  "sources": ["../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/common/actions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from \"../../nls.js\";\nimport { Emitter, type Event } from \"./event.js\";\nimport { Disposable, type IDisposable } from \"./lifecycle.js\";\n\nexport interface ITelemetryData {\n\treadonly from?: string;\n\treadonly target?: string;\n\t[key: string]: unknown;\n}\n\nexport type WorkbenchActionExecutedClassification = {\n\tid: {\n\t\tclassification: \"SystemMetaData\";\n\t\tpurpose: \"FeatureInsight\";\n\t\tcomment: \"The identifier of the action that was run.\";\n\t};\n\tfrom: {\n\t\tclassification: \"SystemMetaData\";\n\t\tpurpose: \"FeatureInsight\";\n\t\tcomment: \"The name of the component the action was run from.\";\n\t};\n\tdetail?: {\n\t\tclassification: \"SystemMetaData\";\n\t\tpurpose: \"FeatureInsight\";\n\t\tcomment: \"Optional details about how the action was run, e.g which keybinding was used.\";\n\t};\n\towner: \"bpasero\";\n\tcomment: \"Provides insight into actions that are executed within the workbench.\";\n};\n\nexport type WorkbenchActionExecutedEvent = {\n\tid: string;\n\tfrom: string;\n\tdetail?: string;\n};\n\nexport interface IAction {\n\treadonly id: string;\n\tlabel: string;\n\ttooltip: string;\n\tclass: string | undefined;\n\tenabled: boolean;\n\tchecked?: boolean;\n\trun(...args: unknown[]): unknown;\n}\n\nexport interface IActionRunner extends IDisposable {\n\treadonly onDidRun: Event<IRunEvent>;\n\treadonly onWillRun: Event<IRunEvent>;\n\n\trun(action: IAction, context?: unknown): unknown;\n}\n\nexport interface IActionChangeEvent {\n\treadonly label?: string;\n\treadonly tooltip?: string;\n\treadonly class?: string;\n\treadonly enabled?: boolean;\n\treadonly checked?: boolean;\n}\n\nexport class Action extends Disposable implements IAction {\n\tprotected _onDidChange = this._register(new Emitter<IActionChangeEvent>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprotected readonly _id: string;\n\tprotected _label: string;\n\tprotected _tooltip: string | undefined;\n\tprotected _cssClass: string | undefined;\n\tprotected _enabled = true;\n\tprotected _checked?: boolean;\n\tprotected readonly _actionCallback?: (event?: unknown) => unknown;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel = \"\",\n\t\tcssClass = \"\",\n\t\tenabled = true,\n\t\tactionCallback?: (event?: unknown) => unknown,\n\t) {\n\t\tsuper();\n\t\tthis._id = id;\n\t\tthis._label = label;\n\t\tthis._cssClass = cssClass;\n\t\tthis._enabled = enabled;\n\t\tthis._actionCallback = actionCallback;\n\t}\n\n\tget id(): string {\n\t\treturn this._id;\n\t}\n\n\tget label(): string {\n\t\treturn this._label;\n\t}\n\n\tset label(value: string) {\n\t\tthis._setLabel(value);\n\t}\n\n\tprivate _setLabel(value: string): void {\n\t\tif (this._label !== value) {\n\t\t\tthis._label = value;\n\t\t\tthis._onDidChange.fire({ label: value });\n\t\t}\n\t}\n\n\tget tooltip(): string {\n\t\treturn this._tooltip || \"\";\n\t}\n\n\tset tooltip(value: string) {\n\t\tthis._setTooltip(value);\n\t}\n\n\tprotected _setTooltip(value: string): void {\n\t\tif (this._tooltip !== value) {\n\t\t\tthis._tooltip = value;\n\t\t\tthis._onDidChange.fire({ tooltip: value });\n\t\t}\n\t}\n\n\tget class(): string | undefined {\n\t\treturn this._cssClass;\n\t}\n\n\tset class(value: string | undefined) {\n\t\tthis._setClass(value);\n\t}\n\n\tprotected _setClass(value: string | undefined): void {\n\t\tif (this._cssClass !== value) {\n\t\t\tthis._cssClass = value;\n\t\t\tthis._onDidChange.fire({ class: value });\n\t\t}\n\t}\n\n\tget enabled(): boolean {\n\t\treturn this._enabled;\n\t}\n\n\tset enabled(value: boolean) {\n\t\tthis._setEnabled(value);\n\t}\n\n\tprotected _setEnabled(value: boolean): void {\n\t\tif (this._enabled !== value) {\n\t\t\tthis._enabled = value;\n\t\t\tthis._onDidChange.fire({ enabled: value });\n\t\t}\n\t}\n\n\tget checked(): boolean | undefined {\n\t\treturn this._checked;\n\t}\n\n\tset checked(value: boolean | undefined) {\n\t\tthis._setChecked(value);\n\t}\n\n\tprotected _setChecked(value: boolean | undefined): void {\n\t\tif (this._checked !== value) {\n\t\t\tthis._checked = value;\n\t\t\tthis._onDidChange.fire({ checked: value });\n\t\t}\n\t}\n\n\tasync run(event?: unknown, data?: ITelemetryData): Promise<void> {\n\t\tif (this._actionCallback) {\n\t\t\tawait this._actionCallback(event);\n\t\t}\n\t}\n}\n\nexport interface IRunEvent {\n\treadonly action: IAction;\n\treadonly error?: Error;\n}\n\nexport class ActionRunner extends Disposable implements IActionRunner {\n\tprivate readonly _onWillRun = this._register(new Emitter<IRunEvent>());\n\treadonly onWillRun = this._onWillRun.event;\n\n\tprivate readonly _onDidRun = this._register(new Emitter<IRunEvent>());\n\treadonly onDidRun = this._onDidRun.event;\n\n\tasync run(action: IAction, context?: unknown): Promise<void> {\n\t\tif (!action.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onWillRun.fire({ action });\n\n\t\tlet error: Error | undefined;\n\t\ttry {\n\t\t\tawait this.runAction(action, context);\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t}\n\n\t\tthis._onDidRun.fire({ action, error });\n\t}\n\n\tprotected async runAction(\n\t\taction: IAction,\n\t\tcontext?: unknown,\n\t): Promise<void> {\n\t\tawait action.run(context);\n\t}\n}\n\nexport class Separator implements IAction {\n\t/**\n\t * Joins all non-empty lists of actions with separators.\n\t */\n\tpublic static join(...actionLists: readonly IAction[][]) {\n\t\tlet out: IAction[] = [];\n\t\tfor (const list of actionLists) {\n\t\t\tif (!list.length) {\n\t\t\t\t// skip\n\t\t\t} else if (out.length) {\n\t\t\t\tout = [...out, new Separator(), ...list];\n\t\t\t} else {\n\t\t\t\tout = list;\n\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tstatic readonly ID = \"vs.actions.separator\";\n\n\treadonly id: string = Separator.ID;\n\n\treadonly label: string = \"\";\n\treadonly tooltip: string = \"\";\n\treadonly class: string = \"separator\";\n\treadonly enabled: boolean = false;\n\treadonly checked: boolean = false;\n\tasync run() {}\n}\n\nexport class SubmenuAction implements IAction {\n\treadonly id: string;\n\treadonly label: string;\n\treadonly class: string | undefined;\n\treadonly tooltip: string = \"\";\n\treadonly enabled: boolean = true;\n\treadonly checked: undefined = undefined;\n\n\tprivate readonly _actions: readonly IAction[];\n\tget actions(): readonly IAction[] {\n\t\treturn this._actions;\n\t}\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\tactions: readonly IAction[],\n\t\tcssClass?: string,\n\t) {\n\t\tthis.id = id;\n\t\tthis.label = label;\n\t\tthis.class = cssClass;\n\t\tthis._actions = actions;\n\t}\n\n\tasync run(): Promise<void> {}\n}\n\nexport class EmptySubmenuAction extends Action {\n\tstatic readonly ID = \"vs.actions.empty\";\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tEmptySubmenuAction.ID,\n\t\t\tnls.localize(\"submenu.empty\", \"(empty)\"),\n\t\t\tundefined,\n\t\t\tfalse,\n\t\t);\n\t}\n}\n\nexport function toAction(props: {\n\tid: string;\n\tlabel: string;\n\ttooltip?: string;\n\tenabled?: boolean;\n\tchecked?: boolean;\n\tclass?: string;\n\trun: Function;\n}): IAction {\n\treturn {\n\t\tid: props.id,\n\t\tlabel: props.label,\n\t\ttooltip: props.tooltip ?? props.label,\n\t\tclass: props.class,\n\t\tenabled: props.enabled ?? true,\n\t\tchecked: props.checked,\n\t\trun: async (...args: unknown[]) => props.run(...args),\n\t};\n}\n"],
  "mappings": "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",
  "names": []
}
