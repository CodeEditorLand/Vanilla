import{matchesFuzzy as u}from"./filters.js";import{ltrim as h}from"./strings.js";import{ThemeIcon as f}from"./themables.js";const x="$(",g=new RegExp(`\\$\\(${f.iconNameExpression}(?:${f.iconModifierExpression})?\\)`,"g"),d=new RegExp(`(\\\\)?${g.source}`,"g");function b(e){return e.replace(d,(n,t)=>t?n:`\\${n}`)}const m=new RegExp(`\\\\${g.source}`,"g");function O(e){return e.replace(m,n=>`\\${n}`)}const I=new RegExp(`(\\s)?(\\\\)?${g.source}(\\s)?`,"g");function W(e){return e.indexOf(x)===-1?e:e.replace(I,(n,t,s,r)=>s?n:t||r||"")}function L(e){return e?e.replace(/\$\((.*?)\)/g,(n,t)=>` ${t} `).trim():""}const p=new RegExp(`\\$\\(${f.iconNameCharacter}+\\)`,"g");function k(e){p.lastIndex=0;let n="";const t=[];let s=0;for(;;){const r=p.lastIndex,o=p.exec(e),c=e.substring(r,o?.index);if(c.length>0){n+=c;for(let i=0;i<c.length;i++)t.push(s)}if(!o)break;s+=o[0].length}return{text:n,iconOffsets:t}}function y(e,n,t=!1){const{text:s,iconOffsets:r}=n;if(!r||r.length===0)return u(e,s,t);const o=h(s," "),c=s.length-o.length,i=u(e,o,t);if(i)for(const a of i){const l=r[a.start+c]+c;a.start+=l,a.end+=l}return i}export{b as escapeIcons,L as getCodiconAriaLabel,O as markdownEscapeEscapedIcons,y as matchesFuzzyIconAware,k as parseLabelWithIcons,W as stripIcons};
