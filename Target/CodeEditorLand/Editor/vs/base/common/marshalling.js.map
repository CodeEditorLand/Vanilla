{
  "version": 3,
  "sources": ["../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/common/marshalling.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from \"./buffer.js\";\nimport { MarshalledId } from \"./marshallingIds.js\";\nimport { URI, type UriComponents } from \"./uri.js\";\n\nexport function stringify(obj: any): string {\n\treturn JSON.stringify(obj, replacer);\n}\n\nexport function parse(text: string): any {\n\tlet data = JSON.parse(text);\n\tdata = revive(data);\n\treturn data;\n}\n\nexport interface MarshalledObject {\n\t$mid: MarshalledId;\n}\n\nfunction replacer(key: string, value: any): any {\n\t// URI is done via toJSON-member\n\tif (value instanceof RegExp) {\n\t\treturn {\n\t\t\t$mid: MarshalledId.Regexp,\n\t\t\tsource: value.source,\n\t\t\tflags: value.flags,\n\t\t};\n\t}\n\treturn value;\n}\n\ntype Deserialize<T> = T extends UriComponents\n\t? URI\n\t: T extends VSBuffer\n\t\t? VSBuffer\n\t\t: T extends object\n\t\t\t? Revived<T>\n\t\t\t: T;\n\nexport type Revived<T> = { [K in keyof T]: Deserialize<T[K]> };\n\nexport function revive<T = any>(obj: any, depth = 0): Revived<T> {\n\tif (!obj || depth > 200) {\n\t\treturn obj;\n\t}\n\n\tif (typeof obj === \"object\") {\n\t\tswitch ((<MarshalledObject>obj).$mid) {\n\t\t\tcase MarshalledId.Uri:\n\t\t\t\treturn <any>URI.revive(obj);\n\t\t\tcase MarshalledId.Regexp:\n\t\t\t\treturn <any>new RegExp(obj.source, obj.flags);\n\t\t\tcase MarshalledId.Date:\n\t\t\t\treturn <any>new Date(obj.source);\n\t\t}\n\n\t\tif (obj instanceof VSBuffer || obj instanceof Uint8Array) {\n\t\t\treturn <any>obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\tfor (let i = 0; i < obj.length; ++i) {\n\t\t\t\tobj[i] = revive(obj[i], depth + 1);\n\t\t\t}\n\t\t} else {\n\t\t\t// walk object\n\t\t\tfor (const key in obj) {\n\t\t\t\tif (Object.hasOwnProperty.call(obj, key)) {\n\t\t\t\t\tobj[key] = revive(obj[key], depth + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn obj;\n}\n"],
  "mappings": ";;AAKA,SAAS,gBAAgB;AACzB,SAAS,oBAAoB;AAC7B,SAAS,WAA+B;AAEjC,SAAS,UAAU,KAAkB;AAC3C,SAAO,KAAK,UAAU,KAAK,QAAQ;AACpC;AAFgB;AAIT,SAAS,MAAM,MAAmB;AACxC,MAAI,OAAO,KAAK,MAAM,IAAI;AAC1B,SAAO,OAAO,IAAI;AAClB,SAAO;AACR;AAJgB;AAUhB,SAAS,SAAS,KAAa,OAAiB;AAE/C,MAAI,iBAAiB,QAAQ;AAC5B,WAAO;AAAA,MACN,MAAM,aAAa;AAAA,MACnB,QAAQ,MAAM;AAAA,MACd,OAAO,MAAM;AAAA,IACd;AAAA,EACD;AACA,SAAO;AACR;AAVS;AAsBF,SAAS,OAAgB,KAAU,QAAQ,GAAe;AAChE,MAAI,CAAC,OAAO,QAAQ,KAAK;AACxB,WAAO;AAAA,EACR;AAEA,MAAI,OAAO,QAAQ,UAAU;AAC5B,YAA2B,IAAK,MAAM;AAAA,MACrC,KAAK,aAAa;AACjB,eAAY,IAAI,OAAO,GAAG;AAAA,MAC3B,KAAK,aAAa;AACjB,eAAY,IAAI,OAAO,IAAI,QAAQ,IAAI,KAAK;AAAA,MAC7C,KAAK,aAAa;AACjB,eAAY,IAAI,KAAK,IAAI,MAAM;AAAA,IACjC;AAEA,QAAI,eAAe,YAAY,eAAe,YAAY;AACzD,aAAY;AAAA,IACb;AAEA,QAAI,MAAM,QAAQ,GAAG,GAAG;AACvB,eAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,EAAE,GAAG;AACpC,YAAI,CAAC,IAAI,OAAO,IAAI,CAAC,GAAG,QAAQ,CAAC;AAAA,MAClC;AAAA,IACD,OAAO;AAEN,iBAAW,OAAO,KAAK;AACtB,YAAI,OAAO,eAAe,KAAK,KAAK,GAAG,GAAG;AACzC,cAAI,GAAG,IAAI,OAAO,IAAI,GAAG,GAAG,QAAQ,CAAC;AAAA,QACtC;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAEA,SAAO;AACR;AAlCgB;",
  "names": []
}
