{
  "version": 3,
  "sources": ["../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/common/errorMessage.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from \"../../nls.js\";\nimport type { IAction } from \"./actions.js\";\nimport * as arrays from \"./arrays.js\";\nimport * as types from \"./types.js\";\n\nfunction exceptionToErrorMessage(exception: any, verbose: boolean): string {\n\tif (verbose && (exception.stack || exception.stacktrace)) {\n\t\treturn nls.localize(\n\t\t\t\"stackTrace.format\",\n\t\t\t\"{0}: {1}\",\n\t\t\tdetectSystemErrorMessage(exception),\n\t\t\tstackToString(exception.stack) ||\n\t\t\t\tstackToString(exception.stacktrace),\n\t\t);\n\t}\n\n\treturn detectSystemErrorMessage(exception);\n}\n\nfunction stackToString(\n\tstack: string[] | string | undefined,\n): string | undefined {\n\tif (Array.isArray(stack)) {\n\t\treturn stack.join(\"\\n\");\n\t}\n\n\treturn stack;\n}\n\nfunction detectSystemErrorMessage(exception: any): string {\n\t// Custom node.js error from us\n\tif (exception.code === \"ERR_UNC_HOST_NOT_ALLOWED\") {\n\t\treturn `${exception.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`;\n\t}\n\n\t// See https://nodejs.org/api/errors.html#errors_class_system_error\n\tif (\n\t\ttypeof exception.code === \"string\" &&\n\t\ttypeof exception.errno === \"number\" &&\n\t\ttypeof exception.syscall === \"string\"\n\t) {\n\t\treturn nls.localize(\n\t\t\t\"nodeExceptionMessage\",\n\t\t\t\"A system error occurred ({0})\",\n\t\t\texception.message,\n\t\t);\n\t}\n\n\treturn (\n\t\texception.message ||\n\t\tnls.localize(\n\t\t\t\"error.defaultMessage\",\n\t\t\t\"An unknown error occurred. Please consult the log for more details.\",\n\t\t)\n\t);\n}\n\n/**\n * Tries to generate a human readable error message out of the error. If the verbose parameter\n * is set to true, the error message will include stacktrace details if provided.\n *\n * @returns A string containing the error message.\n */\nexport function toErrorMessage(error: any = null, verbose = false): string {\n\tif (!error) {\n\t\treturn nls.localize(\n\t\t\t\"error.defaultMessage\",\n\t\t\t\"An unknown error occurred. Please consult the log for more details.\",\n\t\t);\n\t}\n\n\tif (Array.isArray(error)) {\n\t\tconst errors: any[] = arrays.coalesce(error);\n\t\tconst msg = toErrorMessage(errors[0], verbose);\n\n\t\tif (errors.length > 1) {\n\t\t\treturn nls.localize(\n\t\t\t\t\"error.moreErrors\",\n\t\t\t\t\"{0} ({1} errors in total)\",\n\t\t\t\tmsg,\n\t\t\t\terrors.length,\n\t\t\t);\n\t\t}\n\n\t\treturn msg;\n\t}\n\n\tif (types.isString(error)) {\n\t\treturn error;\n\t}\n\n\tif (error.detail) {\n\t\tconst detail = error.detail;\n\n\t\tif (detail.error) {\n\t\t\treturn exceptionToErrorMessage(detail.error, verbose);\n\t\t}\n\n\t\tif (detail.exception) {\n\t\t\treturn exceptionToErrorMessage(detail.exception, verbose);\n\t\t}\n\t}\n\n\tif (error.stack) {\n\t\treturn exceptionToErrorMessage(error, verbose);\n\t}\n\n\tif (error.message) {\n\t\treturn error.message;\n\t}\n\n\treturn nls.localize(\n\t\t\"error.defaultMessage\",\n\t\t\"An unknown error occurred. Please consult the log for more details.\",\n\t);\n}\n\nexport interface IErrorWithActions extends Error {\n\tactions: IAction[];\n}\n\nexport function isErrorWithActions(obj: unknown): obj is IErrorWithActions {\n\tconst candidate = obj as IErrorWithActions | undefined;\n\n\treturn candidate instanceof Error && Array.isArray(candidate.actions);\n}\n\nexport function createErrorWithActions(\n\tmessageOrError: string | Error,\n\tactions: IAction[],\n): IErrorWithActions {\n\tlet error: IErrorWithActions;\n\tif (typeof messageOrError === \"string\") {\n\t\terror = new Error(messageOrError) as IErrorWithActions;\n\t} else {\n\t\terror = messageOrError as IErrorWithActions;\n\t}\n\n\terror.actions = actions;\n\n\treturn error;\n}\n"],
  "mappings": ";;AAKA,YAAY,SAAS;AAErB,YAAY,YAAY;AACxB,YAAY,WAAW;AAEvB,SAAS,wBAAwB,WAAgB,SAA0B;AAC1E,MAAI,YAAY,UAAU,SAAS,UAAU,aAAa;AACzD,WAAO,IAAI;AAAA,MACV;AAAA,MACA;AAAA,MACA,yBAAyB,SAAS;AAAA,MAClC,cAAc,UAAU,KAAK,KAC5B,cAAc,UAAU,UAAU;AAAA,IACpC;AAAA,EACD;AAEA,SAAO,yBAAyB,SAAS;AAC1C;AAZS;AAcT,SAAS,cACR,OACqB;AACrB,MAAI,MAAM,QAAQ,KAAK,GAAG;AACzB,WAAO,MAAM,KAAK,IAAI;AAAA,EACvB;AAEA,SAAO;AACR;AARS;AAUT,SAAS,yBAAyB,WAAwB;AAEzD,MAAI,UAAU,SAAS,4BAA4B;AAClD,WAAO,GAAG,UAAU,OAAO;AAAA,EAC5B;AAGA,MACC,OAAO,UAAU,SAAS,YAC1B,OAAO,UAAU,UAAU,YAC3B,OAAO,UAAU,YAAY,UAC5B;AACD,WAAO,IAAI;AAAA,MACV;AAAA,MACA;AAAA,MACA,UAAU;AAAA,IACX;AAAA,EACD;AAEA,SACC,UAAU,WACV,IAAI;AAAA,IACH;AAAA,IACA;AAAA,EACD;AAEF;AA1BS;AAkCF,SAAS,eAAe,QAAa,MAAM,UAAU,OAAe;AAC1E,MAAI,CAAC,OAAO;AACX,WAAO,IAAI;AAAA,MACV;AAAA,MACA;AAAA,IACD;AAAA,EACD;AAEA,MAAI,MAAM,QAAQ,KAAK,GAAG;AACzB,UAAM,SAAgB,OAAO,SAAS,KAAK;AAC3C,UAAM,MAAM,eAAe,OAAO,CAAC,GAAG,OAAO;AAE7C,QAAI,OAAO,SAAS,GAAG;AACtB,aAAO,IAAI;AAAA,QACV;AAAA,QACA;AAAA,QACA;AAAA,QACA,OAAO;AAAA,MACR;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AAEA,MAAI,MAAM,SAAS,KAAK,GAAG;AAC1B,WAAO;AAAA,EACR;AAEA,MAAI,MAAM,QAAQ;AACjB,UAAM,SAAS,MAAM;AAErB,QAAI,OAAO,OAAO;AACjB,aAAO,wBAAwB,OAAO,OAAO,OAAO;AAAA,IACrD;AAEA,QAAI,OAAO,WAAW;AACrB,aAAO,wBAAwB,OAAO,WAAW,OAAO;AAAA,IACzD;AAAA,EACD;AAEA,MAAI,MAAM,OAAO;AAChB,WAAO,wBAAwB,OAAO,OAAO;AAAA,EAC9C;AAEA,MAAI,MAAM,SAAS;AAClB,WAAO,MAAM;AAAA,EACd;AAEA,SAAO,IAAI;AAAA,IACV;AAAA,IACA;AAAA,EACD;AACD;AApDgB;AA0DT,SAAS,mBAAmB,KAAwC;AAC1E,QAAM,YAAY;AAElB,SAAO,qBAAqB,SAAS,MAAM,QAAQ,UAAU,OAAO;AACrE;AAJgB;AAMT,SAAS,uBACf,gBACA,SACoB;AACpB,MAAI;AACJ,MAAI,OAAO,mBAAmB,UAAU;AACvC,YAAQ,IAAI,MAAM,cAAc;AAAA,EACjC,OAAO;AACN,YAAQ;AAAA,EACT;AAEA,QAAM,UAAU;AAEhB,SAAO;AACR;AAdgB;",
  "names": []
}
