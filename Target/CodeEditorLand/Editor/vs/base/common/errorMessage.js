import*as c from"./arrays.js";import*as l from"./types.js";import*as n from"../../nls.js";import"./actions.js";function o(r,e){return e&&(r.stack||r.stacktrace)?n.localize("stackTrace.format","{0}: {1}",a(r),i(r.stack)||i(r.stacktrace)):a(r)}function i(r){return Array.isArray(r)?r.join(`
`):r}function a(r){return r.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${r.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?n.localize("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||n.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function u(r=null,e=!1){if(!r)return n.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){const t=c.coalesce(r),s=u(t[0],e);return t.length>1?n.localize("error.moreErrors","{0} ({1} errors in total)",s,t.length):s}if(l.isString(r))return r;if(r.detail){const t=r.detail;if(t.error)return o(t.error,e);if(t.exception)return o(t.exception,e)}return r.stack?o(r,e):r.message?r.message:n.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function d(r){const e=r;return e instanceof Error&&Array.isArray(e.actions)}function A(r,e){let t;return typeof r=="string"?t=new Error(r):t=r,t.actions=e,t}export{A as createErrorWithActions,d as isErrorWithActions,u as toErrorMessage};
