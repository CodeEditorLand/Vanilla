{
  "version": 3,
  "sources": ["../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/common/decorators.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nfunction createDecorator(mapFn: (fn: Function, key: string) => Function): Function {\n\treturn (target: any, key: string, descriptor: any) => {\n\t\tlet fnKey: string | null = null;\n\t\tlet fn: Function | null = null;\n\n\t\tif (typeof descriptor.value === 'function') {\n\t\t\tfnKey = 'value';\n\t\t\tfn = descriptor.value;\n\t\t} else if (typeof descriptor.get === 'function') {\n\t\t\tfnKey = 'get';\n\t\t\tfn = descriptor.get;\n\t\t}\n\n\t\tif (!fn) {\n\t\t\tthrow new Error('not supported');\n\t\t}\n\n\t\tdescriptor[fnKey!] = mapFn(fn, key);\n\t};\n}\n\nexport function memoize(_target: any, key: string, descriptor: any) {\n\tlet fnKey: string | null = null;\n\tlet fn: Function | null = null;\n\n\tif (typeof descriptor.value === 'function') {\n\t\tfnKey = 'value';\n\t\tfn = descriptor.value;\n\n\t\tif (fn!.length !== 0) {\n\t\t\tconsole.warn('Memoize should only be used in functions with zero parameters');\n\t\t}\n\t} else if (typeof descriptor.get === 'function') {\n\t\tfnKey = 'get';\n\t\tfn = descriptor.get;\n\t}\n\n\tif (!fn) {\n\t\tthrow new Error('not supported');\n\t}\n\n\tconst memoizeKey = `$memoize$${key}`;\n\tdescriptor[fnKey!] = function (...args: any[]) {\n\t\tif (!this.hasOwnProperty(memoizeKey)) {\n\t\t\tObject.defineProperty(this, memoizeKey, {\n\t\t\t\tconfigurable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\twritable: false,\n\t\t\t\tvalue: fn.apply(this, args)\n\t\t\t});\n\t\t}\n\n\t\treturn this[memoizeKey];\n\t};\n}\n\nexport interface IDebounceReducer<T> {\n\t(previousValue: T, ...args: any[]): T;\n}\n\nexport function debounce<T>(delay: number, reducer?: IDebounceReducer<T>, initialValueProvider?: () => T): Function {\n\treturn createDecorator((fn, key) => {\n\t\tconst timerKey = `$debounce$${key}`;\n\t\tconst resultKey = `$debounce$result$${key}`;\n\n\t\treturn function (this: any, ...args: any[]) {\n\t\t\tif (!this[resultKey]) {\n\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t}\n\n\t\t\tclearTimeout(this[timerKey]);\n\n\t\t\tif (reducer) {\n\t\t\t\tthis[resultKey] = reducer(this[resultKey], ...args);\n\t\t\t\targs = [this[resultKey]];\n\t\t\t}\n\n\t\t\tthis[timerKey] = setTimeout(() => {\n\t\t\t\tfn.apply(this, args);\n\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t}, delay);\n\t\t};\n\t});\n}\n\nexport function throttle<T>(delay: number, reducer?: IDebounceReducer<T>, initialValueProvider?: () => T): Function {\n\treturn createDecorator((fn, key) => {\n\t\tconst timerKey = `$throttle$timer$${key}`;\n\t\tconst resultKey = `$throttle$result$${key}`;\n\t\tconst lastRunKey = `$throttle$lastRun$${key}`;\n\t\tconst pendingKey = `$throttle$pending$${key}`;\n\n\t\treturn function (this: any, ...args: any[]) {\n\t\t\tif (!this[resultKey]) {\n\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t}\n\t\t\tif (this[lastRunKey] === null || this[lastRunKey] === undefined) {\n\t\t\t\tthis[lastRunKey] = -Number.MAX_VALUE;\n\t\t\t}\n\n\t\t\tif (reducer) {\n\t\t\t\tthis[resultKey] = reducer(this[resultKey], ...args);\n\t\t\t}\n\n\t\t\tif (this[pendingKey]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nextTime = this[lastRunKey] + delay;\n\t\t\tif (nextTime <= Date.now()) {\n\t\t\t\tthis[lastRunKey] = Date.now();\n\t\t\t\tfn.apply(this, [this[resultKey]]);\n\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t} else {\n\t\t\t\tthis[pendingKey] = true;\n\t\t\t\tthis[timerKey] = setTimeout(() => {\n\t\t\t\t\tthis[pendingKey] = false;\n\t\t\t\t\tthis[lastRunKey] = Date.now();\n\t\t\t\t\tfn.apply(this, [this[resultKey]]);\n\t\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t\t}, nextTime - Date.now());\n\t\t\t}\n\t\t};\n\t});\n}\n"],
  "mappings": "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",
  "names": []
}
