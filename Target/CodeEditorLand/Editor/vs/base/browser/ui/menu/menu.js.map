{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/menu/menu.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\tEmptySubmenuAction,\n\ttype IAction,\n\ttype IActionRunner,\n\tSeparator,\n\tSubmenuAction,\n} from \"../../../common/actions.js\";\nimport { RunOnceScheduler } from \"../../../common/async.js\";\nimport { Codicon } from \"../../../common/codicons.js\";\nimport { getCodiconFontCharacters } from \"../../../common/codiconsUtil.js\";\nimport type { Event } from \"../../../common/event.js\";\nimport { stripIcons } from \"../../../common/iconLabels.js\";\nimport { KeyCode } from \"../../../common/keyCodes.js\";\nimport type { ResolvedKeybinding } from \"../../../common/keybindings.js\";\nimport { DisposableStore } from \"../../../common/lifecycle.js\";\nimport { isLinux, isMacintosh } from \"../../../common/platform.js\";\nimport {\n\ttype ScrollEvent,\n\tScrollbarVisibility,\n} from \"../../../common/scrollable.js\";\nimport * as strings from \"../../../common/strings.js\";\nimport { ThemeIcon } from \"../../../common/themables.js\";\nimport { isFirefox } from \"../../browser.js\";\nimport {\n\t$,\n\tDimension,\n\tEventHelper,\n\ttype EventLike,\n\tEventType,\n\ttype IDomNodePagePosition,\n\taddDisposableListener,\n\tappend,\n\tclearNode,\n\tcreateStyleSheet,\n\tgetActiveElement,\n\tgetWindow,\n\tisAncestor,\n\tisInShadowDOM,\n} from \"../../dom.js\";\nimport { StandardKeyboardEvent } from \"../../keyboardEvent.js\";\nimport { StandardMouseEvent } from \"../../mouseEvent.js\";\nimport { Gesture, EventType as TouchEventType } from \"../../touch.js\";\nimport {\n\tActionViewItem,\n\tBaseActionViewItem,\n\ttype IActionViewItemOptions,\n} from \"../actionbar/actionViewItems.js\";\nimport {\n\tActionBar,\n\tActionsOrientation,\n\ttype IActionViewItemProvider,\n} from \"../actionbar/actionbar.js\";\nimport {\n\ttype AnchorAlignment,\n\tLayoutAnchorPosition,\n\tlayout,\n} from \"../contextview/contextview.js\";\nimport { DomScrollableElement } from \"../scrollbar/scrollableElement.js\";\n\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\n\nexport enum HorizontalDirection {\n\tRight = 0,\n\tLeft = 1,\n}\n\nexport enum VerticalDirection {\n\tAbove = 0,\n\tBelow = 1,\n}\n\nexport interface IMenuDirection {\n\thorizontal: HorizontalDirection;\n\tvertical: VerticalDirection;\n}\n\nexport interface IMenuOptions {\n\tcontext?: unknown;\n\tactionViewItemProvider?: IActionViewItemProvider;\n\tactionRunner?: IActionRunner;\n\tgetKeyBinding?: (action: IAction) => ResolvedKeybinding | undefined;\n\tariaLabel?: string;\n\tenableMnemonics?: boolean;\n\tanchorAlignment?: AnchorAlignment;\n\texpandDirection?: IMenuDirection;\n\tuseEventAsContext?: boolean;\n\tsubmenuIds?: Set<string>;\n}\n\nexport interface IMenuStyles {\n\tshadowColor: string | undefined;\n\tborderColor: string | undefined;\n\tforegroundColor: string | undefined;\n\tbackgroundColor: string | undefined;\n\tselectionForegroundColor: string | undefined;\n\tselectionBackgroundColor: string | undefined;\n\tselectionBorderColor: string | undefined;\n\tseparatorColor: string | undefined;\n\tscrollbarShadow: string | undefined;\n\tscrollbarSliderBackground: string | undefined;\n\tscrollbarSliderHoverBackground: string | undefined;\n\tscrollbarSliderActiveBackground: string | undefined;\n}\n\nexport const unthemedMenuStyles: IMenuStyles = {\n\tshadowColor: undefined,\n\tborderColor: undefined,\n\tforegroundColor: undefined,\n\tbackgroundColor: undefined,\n\tselectionForegroundColor: undefined,\n\tselectionBackgroundColor: undefined,\n\tselectionBorderColor: undefined,\n\tseparatorColor: undefined,\n\tscrollbarShadow: undefined,\n\tscrollbarSliderBackground: undefined,\n\tscrollbarSliderHoverBackground: undefined,\n\tscrollbarSliderActiveBackground: undefined,\n};\n\ninterface ISubMenuData {\n\tparent: Menu;\n\tsubmenu?: Menu;\n}\n\nexport class Menu extends ActionBar {\n\tprivate mnemonics: Map<string, Array<BaseMenuActionViewItem>>;\n\tprivate scrollableElement: DomScrollableElement;\n\tprivate menuElement: HTMLElement;\n\tstatic globalStyleSheet: HTMLStyleElement;\n\tprotected styleSheet: HTMLStyleElement | undefined;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tactions: ReadonlyArray<IAction>,\n\t\toptions: IMenuOptions,\n\t\tprivate readonly menuStyles: IMenuStyles,\n\t) {\n\t\tcontainer.classList.add(\"monaco-menu-container\");\n\t\tcontainer.setAttribute(\"role\", \"presentation\");\n\t\tconst menuElement = document.createElement(\"div\");\n\t\tmenuElement.classList.add(\"monaco-menu\");\n\t\tmenuElement.setAttribute(\"role\", \"presentation\");\n\n\t\tsuper(menuElement, {\n\t\t\torientation: ActionsOrientation.VERTICAL,\n\t\t\tactionViewItemProvider: (action) =>\n\t\t\t\tthis.doGetActionViewItem(action, options, parentData),\n\t\t\tcontext: options.context,\n\t\t\tactionRunner: options.actionRunner,\n\t\t\tariaLabel: options.ariaLabel,\n\t\t\tariaRole: \"menu\",\n\t\t\tfocusOnlyEnabledItems: true,\n\t\t\ttriggerKeys: {\n\t\t\t\tkeys: [\n\t\t\t\t\tKeyCode.Enter,\n\t\t\t\t\t...(isMacintosh || isLinux ? [KeyCode.Space] : []),\n\t\t\t\t],\n\t\t\t\tkeyDown: true,\n\t\t\t},\n\t\t});\n\n\t\tthis.menuElement = menuElement;\n\n\t\tthis.actionsList.tabIndex = 0;\n\n\t\tthis.initializeOrUpdateStyleSheet(container, menuStyles);\n\n\t\tthis._register(Gesture.addTarget(menuElement));\n\n\t\tthis._register(\n\t\t\taddDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\t\t// Stop tab navigation of menus\n\t\t\t\tif (event.equals(KeyCode.Tab)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tif (options.enableMnemonics) {\n\t\t\tthis._register(\n\t\t\t\taddDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n\t\t\t\t\tconst key = e.key.toLocaleLowerCase();\n\t\t\t\t\tif (this.mnemonics.has(key)) {\n\t\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t\t\tconst actions = this.mnemonics.get(key)!;\n\n\t\t\t\t\t\tif (actions.length === 1) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tactions[0] instanceof\n\t\t\t\t\t\t\t\t\tSubmenuMenuActionViewItem &&\n\t\t\t\t\t\t\t\tactions[0].container\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tthis.focusItemByElement(actions[0].container);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tactions[0].onClick(e);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (actions.length > 1) {\n\t\t\t\t\t\t\tconst action = actions.shift();\n\t\t\t\t\t\t\tif (action && action.container) {\n\t\t\t\t\t\t\t\tthis.focusItemByElement(action.container);\n\t\t\t\t\t\t\t\tactions.push(action);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.mnemonics.set(key, actions);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (isLinux) {\n\t\t\tthis._register(\n\t\t\t\taddDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n\t\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.equals(KeyCode.Home) ||\n\t\t\t\t\t\tevent.equals(KeyCode.PageUp)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.focusedItem = this.viewItems.length - 1;\n\t\t\t\t\t\tthis.focusNext();\n\t\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tevent.equals(KeyCode.End) ||\n\t\t\t\t\t\tevent.equals(KeyCode.PageDown)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.focusedItem = 0;\n\t\t\t\t\t\tthis.focusPrevious();\n\t\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tthis._register(\n\t\t\taddDisposableListener(this.domNode, EventType.MOUSE_OUT, (e) => {\n\t\t\t\tconst relatedTarget = e.relatedTarget as HTMLElement;\n\t\t\t\tif (!isAncestor(relatedTarget, this.domNode)) {\n\t\t\t\t\tthis.focusedItem = undefined;\n\t\t\t\t\tthis.updateFocus();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\taddDisposableListener(\n\t\t\t\tthis.actionsList,\n\t\t\t\tEventType.MOUSE_OVER,\n\t\t\t\t(e) => {\n\t\t\t\t\tlet target = e.target as HTMLElement;\n\t\t\t\t\tif (\n\t\t\t\t\t\t!target ||\n\t\t\t\t\t\t!isAncestor(target, this.actionsList) ||\n\t\t\t\t\t\ttarget === this.actionsList\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (\n\t\t\t\t\t\ttarget.parentElement !== this.actionsList &&\n\t\t\t\t\t\ttarget.parentElement !== null\n\t\t\t\t\t) {\n\t\t\t\t\t\ttarget = target.parentElement;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target.classList.contains(\"action-item\")) {\n\t\t\t\t\t\tconst lastFocusedItem = this.focusedItem;\n\t\t\t\t\t\tthis.setFocusedItem(target);\n\n\t\t\t\t\t\tif (lastFocusedItem !== this.focusedItem) {\n\t\t\t\t\t\t\tthis.updateFocus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\t// Support touch on actions list to focus items (needed for submenus)\n\t\tthis._register(Gesture.addTarget(this.actionsList));\n\t\tthis._register(\n\t\t\taddDisposableListener(this.actionsList, TouchEventType.Tap, (e) => {\n\t\t\t\tlet target = e.initialTarget as HTMLElement;\n\t\t\t\tif (\n\t\t\t\t\t!target ||\n\t\t\t\t\t!isAncestor(target, this.actionsList) ||\n\t\t\t\t\ttarget === this.actionsList\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twhile (\n\t\t\t\t\ttarget.parentElement !== this.actionsList &&\n\t\t\t\t\ttarget.parentElement !== null\n\t\t\t\t) {\n\t\t\t\t\ttarget = target.parentElement;\n\t\t\t\t}\n\n\t\t\t\tif (target.classList.contains(\"action-item\")) {\n\t\t\t\t\tconst lastFocusedItem = this.focusedItem;\n\t\t\t\t\tthis.setFocusedItem(target);\n\n\t\t\t\t\tif (lastFocusedItem !== this.focusedItem) {\n\t\t\t\t\t\tthis.updateFocus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tconst parentData: ISubMenuData = {\n\t\t\tparent: this,\n\t\t};\n\n\t\tthis.mnemonics = new Map<string, Array<BaseMenuActionViewItem>>();\n\n\t\t// Scroll Logic\n\t\tthis.scrollableElement = this._register(\n\t\t\tnew DomScrollableElement(menuElement, {\n\t\t\t\talwaysConsumeMouseWheel: true,\n\t\t\t\thorizontal: ScrollbarVisibility.Hidden,\n\t\t\t\tvertical: ScrollbarVisibility.Visible,\n\t\t\t\tverticalScrollbarSize: 7,\n\t\t\t\thandleMouseWheel: true,\n\t\t\t\tuseShadows: true,\n\t\t\t}),\n\t\t);\n\n\t\tconst scrollElement = this.scrollableElement.getDomNode();\n\t\tscrollElement.style.position = \"\";\n\n\t\tthis.styleScrollElement(scrollElement, menuStyles);\n\n\t\t// Support scroll on menu drag\n\t\tthis._register(\n\t\t\taddDisposableListener(menuElement, TouchEventType.Change, (e) => {\n\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\tconst scrollTop =\n\t\t\t\t\tthis.scrollableElement.getScrollPosition().scrollTop;\n\t\t\t\tthis.scrollableElement.setScrollPosition({\n\t\t\t\t\tscrollTop: scrollTop - e.translationY,\n\t\t\t\t});\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\taddDisposableListener(scrollElement, EventType.MOUSE_UP, (e) => {\n\t\t\t\t// Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n\t\t\t\t// We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n\t\t\t\te.preventDefault();\n\t\t\t}),\n\t\t);\n\n\t\tconst window = getWindow(container);\n\t\tmenuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n\n\t\tactions = actions.filter((a, idx) => {\n\t\t\tif (options.submenuIds?.has(a.id)) {\n\t\t\t\tconsole.warn(`Found submenu cycle: ${a.id}`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Filter out consecutive or useless separators\n\t\t\tif (a instanceof Separator) {\n\t\t\t\tif (idx === actions.length - 1 || idx === 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst prevAction = actions[idx - 1];\n\t\t\t\tif (prevAction instanceof Separator) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\tthis.push(actions, { icon: true, label: true, isMenu: true });\n\n\t\tcontainer.appendChild(this.scrollableElement.getDomNode());\n\t\tthis.scrollableElement.scanDomNode();\n\n\t\tthis.viewItems\n\t\t\t.filter((item) => !(item instanceof MenuSeparatorActionViewItem))\n\t\t\t.forEach((item, index, array) => {\n\t\t\t\t(item as BaseMenuActionViewItem).updatePositionInSet(\n\t\t\t\t\tindex + 1,\n\t\t\t\t\tarray.length,\n\t\t\t\t);\n\t\t\t});\n\t}\n\n\tprivate initializeOrUpdateStyleSheet(\n\t\tcontainer: HTMLElement,\n\t\tstyle: IMenuStyles,\n\t): void {\n\t\tif (!this.styleSheet) {\n\t\t\tif (isInShadowDOM(container)) {\n\t\t\t\tthis.styleSheet = createStyleSheet(container);\n\t\t\t} else {\n\t\t\t\tif (!Menu.globalStyleSheet) {\n\t\t\t\t\tMenu.globalStyleSheet = createStyleSheet();\n\t\t\t\t}\n\t\t\t\tthis.styleSheet = Menu.globalStyleSheet;\n\t\t\t}\n\t\t}\n\t\tthis.styleSheet.textContent = getMenuWidgetCSS(\n\t\t\tstyle,\n\t\t\tisInShadowDOM(container),\n\t\t);\n\t}\n\n\tprivate styleScrollElement(\n\t\tscrollElement: HTMLElement,\n\t\tstyle: IMenuStyles,\n\t): void {\n\t\tconst fgColor = style.foregroundColor ?? \"\";\n\t\tconst bgColor = style.backgroundColor ?? \"\";\n\t\tconst border = style.borderColor\n\t\t\t? `1px solid ${style.borderColor}`\n\t\t\t: \"\";\n\t\tconst borderRadius = \"5px\";\n\t\tconst shadow = style.shadowColor\n\t\t\t? `0 2px 8px ${style.shadowColor}`\n\t\t\t: \"\";\n\n\t\tscrollElement.style.outline = border;\n\t\tscrollElement.style.borderRadius = borderRadius;\n\t\tscrollElement.style.color = fgColor;\n\t\tscrollElement.style.backgroundColor = bgColor;\n\t\tscrollElement.style.boxShadow = shadow;\n\t}\n\n\toverride getContainer(): HTMLElement {\n\t\treturn this.scrollableElement.getDomNode();\n\t}\n\n\tget onScroll(): Event<ScrollEvent> {\n\t\treturn this.scrollableElement.onScroll;\n\t}\n\n\tget scrollOffset(): number {\n\t\treturn this.menuElement.scrollTop;\n\t}\n\n\ttrigger(index: number): void {\n\t\tif (index <= this.viewItems.length && index >= 0) {\n\t\t\tconst item = this.viewItems[index];\n\t\t\tif (item instanceof SubmenuMenuActionViewItem) {\n\t\t\t\tsuper.focus(index);\n\t\t\t\titem.open(true);\n\t\t\t} else if (item instanceof BaseMenuActionViewItem) {\n\t\t\t\tsuper.run(item._action, item._context);\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate focusItemByElement(element: HTMLElement) {\n\t\tconst lastFocusedItem = this.focusedItem;\n\t\tthis.setFocusedItem(element);\n\n\t\tif (lastFocusedItem !== this.focusedItem) {\n\t\t\tthis.updateFocus();\n\t\t}\n\t}\n\n\tprivate setFocusedItem(element: HTMLElement): void {\n\t\tfor (let i = 0; i < this.actionsList.children.length; i++) {\n\t\t\tconst elem = this.actionsList.children[i];\n\t\t\tif (element === elem) {\n\t\t\t\tthis.focusedItem = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override updateFocus(fromRight?: boolean): void {\n\t\tsuper.updateFocus(fromRight, true, true);\n\n\t\tif (typeof this.focusedItem !== \"undefined\") {\n\t\t\t// Workaround for #80047 caused by an issue in chromium\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n\t\t\t// When that's fixed, just call this.scrollableElement.scanDomNode()\n\t\t\tthis.scrollableElement.setScrollPosition({\n\t\t\t\tscrollTop: Math.round(this.menuElement.scrollTop),\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate doGetActionViewItem(\n\t\taction: IAction,\n\t\toptions: IMenuOptions,\n\t\tparentData: ISubMenuData,\n\t): BaseActionViewItem {\n\t\tif (action instanceof Separator) {\n\t\t\treturn new MenuSeparatorActionViewItem(\n\t\t\t\toptions.context,\n\t\t\t\taction,\n\t\t\t\t{ icon: true },\n\t\t\t\tthis.menuStyles,\n\t\t\t);\n\t\t} else if (action instanceof SubmenuAction) {\n\t\t\tconst menuActionViewItem = new SubmenuMenuActionViewItem(\n\t\t\t\taction,\n\t\t\t\taction.actions,\n\t\t\t\tparentData,\n\t\t\t\t{\n\t\t\t\t\t...options,\n\t\t\t\t\tsubmenuIds: new Set([\n\t\t\t\t\t\t...(options.submenuIds || []),\n\t\t\t\t\t\taction.id,\n\t\t\t\t\t]),\n\t\t\t\t},\n\t\t\t\tthis.menuStyles,\n\t\t\t);\n\n\t\t\tif (options.enableMnemonics) {\n\t\t\t\tconst mnemonic = menuActionViewItem.getMnemonic();\n\t\t\t\tif (mnemonic && menuActionViewItem.isEnabled()) {\n\t\t\t\t\tlet actionViewItems: BaseMenuActionViewItem[] = [];\n\t\t\t\t\tif (this.mnemonics.has(mnemonic)) {\n\t\t\t\t\t\tactionViewItems = this.mnemonics.get(mnemonic)!;\n\t\t\t\t\t}\n\n\t\t\t\t\tactionViewItems.push(menuActionViewItem);\n\n\t\t\t\t\tthis.mnemonics.set(mnemonic, actionViewItems);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn menuActionViewItem;\n\t\t} else {\n\t\t\tconst menuItemOptions: IMenuItemOptions = {\n\t\t\t\tenableMnemonics: options.enableMnemonics,\n\t\t\t\tuseEventAsContext: options.useEventAsContext,\n\t\t\t};\n\t\t\tif (options.getKeyBinding) {\n\t\t\t\tconst keybinding = options.getKeyBinding(action);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\tconst keybindingLabel = keybinding.getLabel();\n\n\t\t\t\t\tif (keybindingLabel) {\n\t\t\t\t\t\tmenuItemOptions.keybinding = keybindingLabel;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst menuActionViewItem = new BaseMenuActionViewItem(\n\t\t\t\toptions.context,\n\t\t\t\taction,\n\t\t\t\tmenuItemOptions,\n\t\t\t\tthis.menuStyles,\n\t\t\t);\n\n\t\t\tif (options.enableMnemonics) {\n\t\t\t\tconst mnemonic = menuActionViewItem.getMnemonic();\n\t\t\t\tif (mnemonic && menuActionViewItem.isEnabled()) {\n\t\t\t\t\tlet actionViewItems: BaseMenuActionViewItem[] = [];\n\t\t\t\t\tif (this.mnemonics.has(mnemonic)) {\n\t\t\t\t\t\tactionViewItems = this.mnemonics.get(mnemonic)!;\n\t\t\t\t\t}\n\n\t\t\t\t\tactionViewItems.push(menuActionViewItem);\n\n\t\t\t\t\tthis.mnemonics.set(mnemonic, actionViewItems);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn menuActionViewItem;\n\t\t}\n\t}\n}\n\ninterface IMenuItemOptions extends IActionViewItemOptions {\n\tenableMnemonics?: boolean;\n}\n\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n\tpublic container: HTMLElement | undefined;\n\n\tprotected override options: IMenuItemOptions;\n\tprotected item: HTMLElement | undefined;\n\n\tprivate runOnceToEnableMouseUp: RunOnceScheduler;\n\tprivate label: HTMLElement | undefined;\n\tprivate check: HTMLElement | undefined;\n\tprivate mnemonic: string | undefined;\n\tprivate cssClass: string;\n\n\tconstructor(\n\t\tctx: unknown,\n\t\taction: IAction,\n\t\toptions: IMenuItemOptions,\n\t\tprotected readonly menuStyle: IMenuStyles,\n\t) {\n\t\toptions.isMenu = true;\n\t\tsuper(action, action, options);\n\n\t\tthis.options = options;\n\t\tthis.options.icon = options.icon !== undefined ? options.icon : false;\n\t\tthis.options.label = options.label !== undefined ? options.label : true;\n\t\tthis.cssClass = \"\";\n\n\t\t// Set mnemonic\n\t\tif (this.options.label && options.enableMnemonics) {\n\t\t\tconst label = this.action.label;\n\t\t\tif (label) {\n\t\t\t\tconst matches = MENU_MNEMONIC_REGEX.exec(label);\n\t\t\t\tif (matches) {\n\t\t\t\t\tthis.mnemonic = (\n\t\t\t\t\t\t!!matches[1] ? matches[1] : matches[3]\n\t\t\t\t\t).toLocaleLowerCase();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add mouse up listener later to avoid accidental clicks\n\t\tthis.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n\t\t\tif (!this.element) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._register(\n\t\t\t\taddDisposableListener(this.element, EventType.MOUSE_UP, (e) => {\n\t\t\t\t\t// removed default prevention as it conflicts\n\t\t\t\t\t// with BaseActionViewItem #101537\n\t\t\t\t\t// add back if issues arise and link new issue\n\t\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\t\t// See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n\t\t\t\t\t// > Writing to the clipboard\n\t\t\t\t\t// > You can use the \"cut\" and \"copy\" commands without any special\n\t\t\t\t\t// permission if you are using them in a short-lived event handler\n\t\t\t\t\t// for a user action (for example, a click handler).\n\n\t\t\t\t\t// => to get the Copy and Paste context menu actions working on Firefox,\n\t\t\t\t\t// there should be no timeout here\n\t\t\t\t\tif (isFirefox) {\n\t\t\t\t\t\tconst mouseEvent = new StandardMouseEvent(\n\t\t\t\t\t\t\tgetWindow(this.element),\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Allowing right click to trigger the event causes the issue described below,\n\t\t\t\t\t\t// but since the solution below does not work in FF, we must disable right click\n\t\t\t\t\t\tif (mouseEvent.rightButton) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.onClick(e);\n\t\t\t\t\t}\n\n\t\t\t\t\t// In all other cases, set timeout to allow context menu cancellation to trigger\n\t\t\t\t\t// otherwise the action will destroy the menu and a second context menu\n\t\t\t\t\t// will still trigger for right click.\n\t\t\t\t\telse {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.onClick(e);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis._register(\n\t\t\t\taddDisposableListener(\n\t\t\t\t\tthis.element,\n\t\t\t\t\tEventType.CONTEXT_MENU,\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t}, 100);\n\n\t\tthis._register(this.runOnceToEnableMouseUp);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.container = container;\n\n\t\tthis.item = append(this.element, $(\"a.action-menu-item\"));\n\t\tif (this._action.id === Separator.ID) {\n\t\t\t// A separator is a presentation item\n\t\t\tthis.item.setAttribute(\"role\", \"presentation\");\n\t\t} else {\n\t\t\tthis.item.setAttribute(\"role\", \"menuitem\");\n\t\t\tif (this.mnemonic) {\n\t\t\t\tthis.item.setAttribute(\"aria-keyshortcuts\", `${this.mnemonic}`);\n\t\t\t}\n\t\t}\n\n\t\tthis.check = append(\n\t\t\tthis.item,\n\t\t\t$(\n\t\t\t\t\"span.menu-item-check\" +\n\t\t\t\t\tThemeIcon.asCSSSelector(Codicon.menuSelection),\n\t\t\t),\n\t\t);\n\t\tthis.check.setAttribute(\"role\", \"none\");\n\n\t\tthis.label = append(this.item, $(\"span.action-label\"));\n\n\t\tif (this.options.label && this.options.keybinding) {\n\t\t\tappend(this.item, $(\"span.keybinding\")).textContent =\n\t\t\t\tthis.options.keybinding;\n\t\t}\n\n\t\t// Adds mouse up listener to actually run the action\n\t\tthis.runOnceToEnableMouseUp.schedule();\n\n\t\tthis.updateClass();\n\t\tthis.updateLabel();\n\t\tthis.updateTooltip();\n\t\tthis.updateEnabled();\n\t\tthis.updateChecked();\n\n\t\tthis.applyStyle();\n\t}\n\n\toverride blur(): void {\n\t\tsuper.blur();\n\t\tthis.applyStyle();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\tthis.item?.focus();\n\n\t\tthis.applyStyle();\n\t}\n\n\tupdatePositionInSet(pos: number, setSize: number): void {\n\t\tif (this.item) {\n\t\t\tthis.item.setAttribute(\"aria-posinset\", `${pos}`);\n\t\t\tthis.item.setAttribute(\"aria-setsize\", `${setSize}`);\n\t\t}\n\t}\n\n\tprotected override updateLabel(): void {\n\t\tif (!this.label) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.options.label) {\n\t\t\tclearNode(this.label);\n\n\t\t\tlet label = stripIcons(this.action.label);\n\t\t\tif (label) {\n\t\t\t\tconst cleanLabel = cleanMnemonic(label);\n\t\t\t\tif (!this.options.enableMnemonics) {\n\t\t\t\t\tlabel = cleanLabel;\n\t\t\t\t}\n\n\t\t\t\tthis.label.setAttribute(\n\t\t\t\t\t\"aria-label\",\n\t\t\t\t\tcleanLabel.replace(/&&/g, \"&\"),\n\t\t\t\t);\n\n\t\t\t\tconst matches = MENU_MNEMONIC_REGEX.exec(label);\n\n\t\t\t\tif (matches) {\n\t\t\t\t\tlabel = strings.escape(label);\n\n\t\t\t\t\t// This is global, reset it\n\t\t\t\t\tMENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n\t\t\t\t\tlet escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n\n\t\t\t\t\t// We can't use negative lookbehind so if we match our negative and skip\n\t\t\t\t\twhile (escMatch && escMatch[1]) {\n\t\t\t\t\t\tescMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst replaceDoubleEscapes = (str: string) =>\n\t\t\t\t\t\tstr.replace(/&amp;&amp;/g, \"&amp;\");\n\n\t\t\t\t\tif (escMatch) {\n\t\t\t\t\t\tthis.label.append(\n\t\t\t\t\t\t\tstrings.ltrim(\n\t\t\t\t\t\t\t\treplaceDoubleEscapes(\n\t\t\t\t\t\t\t\t\tlabel.substr(0, escMatch.index),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\" \",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t$(\"u\", { \"aria-hidden\": \"true\" }, escMatch[3]),\n\t\t\t\t\t\t\tstrings.rtrim(\n\t\t\t\t\t\t\t\treplaceDoubleEscapes(\n\t\t\t\t\t\t\t\t\tlabel.substr(\n\t\t\t\t\t\t\t\t\t\tescMatch.index + escMatch[0].length,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\" \",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.label.innerText =\n\t\t\t\t\t\t\treplaceDoubleEscapes(label).trim();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.item?.setAttribute(\n\t\t\t\t\t\t\"aria-keyshortcuts\",\n\t\t\t\t\t\t(!!matches[1]\n\t\t\t\t\t\t\t? matches[1]\n\t\t\t\t\t\t\t: matches[3]\n\t\t\t\t\t\t).toLocaleLowerCase(),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.label.innerText = label.replace(/&&/g, \"&\").trim();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override updateTooltip(): void {\n\t\t// menus should function like native menus and they do not have tooltips\n\t}\n\n\tprotected override updateClass(): void {\n\t\tif (this.cssClass && this.item) {\n\t\t\tthis.item.classList.remove(...this.cssClass.split(\" \"));\n\t\t}\n\t\tif (this.options.icon && this.label) {\n\t\t\tthis.cssClass = this.action.class || \"\";\n\t\t\tthis.label.classList.add(\"icon\");\n\t\t\tif (this.cssClass) {\n\t\t\t\tthis.label.classList.add(...this.cssClass.split(\" \"));\n\t\t\t}\n\t\t\tthis.updateEnabled();\n\t\t} else if (this.label) {\n\t\t\tthis.label.classList.remove(\"icon\");\n\t\t}\n\t}\n\n\tprotected override updateEnabled(): void {\n\t\tif (this.action.enabled) {\n\t\t\tif (this.element) {\n\t\t\t\tthis.element.classList.remove(\"disabled\");\n\t\t\t\tthis.element.removeAttribute(\"aria-disabled\");\n\t\t\t}\n\n\t\t\tif (this.item) {\n\t\t\t\tthis.item.classList.remove(\"disabled\");\n\t\t\t\tthis.item.removeAttribute(\"aria-disabled\");\n\t\t\t\tthis.item.tabIndex = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.element) {\n\t\t\t\tthis.element.classList.add(\"disabled\");\n\t\t\t\tthis.element.setAttribute(\"aria-disabled\", \"true\");\n\t\t\t}\n\n\t\t\tif (this.item) {\n\t\t\t\tthis.item.classList.add(\"disabled\");\n\t\t\t\tthis.item.setAttribute(\"aria-disabled\", \"true\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override updateChecked(): void {\n\t\tif (!this.item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst checked = this.action.checked;\n\t\tthis.item.classList.toggle(\"checked\", !!checked);\n\t\tif (checked !== undefined) {\n\t\t\tthis.item.setAttribute(\"role\", \"menuitemcheckbox\");\n\t\t\tthis.item.setAttribute(\"aria-checked\", checked ? \"true\" : \"false\");\n\t\t} else {\n\t\t\tthis.item.setAttribute(\"role\", \"menuitem\");\n\t\t\tthis.item.setAttribute(\"aria-checked\", \"\");\n\t\t}\n\t}\n\n\tgetMnemonic(): string | undefined {\n\t\treturn this.mnemonic;\n\t}\n\n\tprotected applyStyle(): void {\n\t\tconst isSelected =\n\t\t\tthis.element && this.element.classList.contains(\"focused\");\n\t\tconst fgColor =\n\t\t\tisSelected && this.menuStyle.selectionForegroundColor\n\t\t\t\t? this.menuStyle.selectionForegroundColor\n\t\t\t\t: this.menuStyle.foregroundColor;\n\t\tconst bgColor =\n\t\t\tisSelected && this.menuStyle.selectionBackgroundColor\n\t\t\t\t? this.menuStyle.selectionBackgroundColor\n\t\t\t\t: undefined;\n\t\tconst outline =\n\t\t\tisSelected && this.menuStyle.selectionBorderColor\n\t\t\t\t? `1px solid ${this.menuStyle.selectionBorderColor}`\n\t\t\t\t: \"\";\n\t\tconst outlineOffset =\n\t\t\tisSelected && this.menuStyle.selectionBorderColor ? `-1px` : \"\";\n\n\t\tif (this.item) {\n\t\t\tthis.item.style.color = fgColor ?? \"\";\n\t\t\tthis.item.style.backgroundColor = bgColor ?? \"\";\n\t\t\tthis.item.style.outline = outline;\n\t\t\tthis.item.style.outlineOffset = outlineOffset;\n\t\t}\n\n\t\tif (this.check) {\n\t\t\tthis.check.style.color = fgColor ?? \"\";\n\t\t}\n\t}\n}\n\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n\tprivate mysubmenu: Menu | null = null;\n\tprivate submenuContainer: HTMLElement | undefined;\n\tprivate submenuIndicator: HTMLElement | undefined;\n\tprivate readonly submenuDisposables = this._register(new DisposableStore());\n\tprivate mouseOver = false;\n\tprivate showScheduler: RunOnceScheduler;\n\tprivate hideScheduler: RunOnceScheduler;\n\tprivate expandDirection: IMenuDirection;\n\n\tconstructor(\n\t\taction: IAction,\n\t\tprivate submenuActions: ReadonlyArray<IAction>,\n\t\tprivate parentData: ISubMenuData,\n\t\tprivate submenuOptions: IMenuOptions,\n\t\tmenuStyles: IMenuStyles,\n\t) {\n\t\tsuper(action, action, submenuOptions, menuStyles);\n\n\t\tthis.expandDirection =\n\t\t\tsubmenuOptions && submenuOptions.expandDirection !== undefined\n\t\t\t\t? submenuOptions.expandDirection\n\t\t\t\t: {\n\t\t\t\t\t\thorizontal: HorizontalDirection.Right,\n\t\t\t\t\t\tvertical: VerticalDirection.Below,\n\t\t\t\t\t};\n\n\t\tthis.showScheduler = new RunOnceScheduler(() => {\n\t\t\tif (this.mouseOver) {\n\t\t\t\tthis.cleanupExistingSubmenu(false);\n\t\t\t\tthis.createSubmenu(false);\n\t\t\t}\n\t\t}, 250);\n\n\t\tthis.hideScheduler = new RunOnceScheduler(() => {\n\t\t\tif (\n\t\t\t\tthis.element &&\n\t\t\t\t!isAncestor(getActiveElement(), this.element) &&\n\t\t\t\tthis.parentData.submenu === this.mysubmenu\n\t\t\t) {\n\t\t\t\tthis.parentData.parent.focus(false);\n\t\t\t\tthis.cleanupExistingSubmenu(true);\n\t\t\t}\n\t\t}, 750);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.item) {\n\t\t\tthis.item.classList.add(\"monaco-submenu-item\");\n\t\t\tthis.item.tabIndex = 0;\n\t\t\tthis.item.setAttribute(\"aria-haspopup\", \"true\");\n\t\t\tthis.updateAriaExpanded(\"false\");\n\t\t\tthis.submenuIndicator = append(\n\t\t\t\tthis.item,\n\t\t\t\t$(\n\t\t\t\t\t\"span.submenu-indicator\" +\n\t\t\t\t\t\tThemeIcon.asCSSSelector(Codicon.menuSubmenu),\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis.submenuIndicator.setAttribute(\"aria-hidden\", \"true\");\n\t\t}\n\n\t\tthis._register(\n\t\t\taddDisposableListener(this.element, EventType.KEY_UP, (e) => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\tif (\n\t\t\t\t\tevent.equals(KeyCode.RightArrow) ||\n\t\t\t\t\tevent.equals(KeyCode.Enter)\n\t\t\t\t) {\n\t\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\t\tthis.createSubmenu(true);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\taddDisposableListener(this.element, EventType.KEY_DOWN, (e) => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\t\tif (getActiveElement() === this.item) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.equals(KeyCode.RightArrow) ||\n\t\t\t\t\t\tevent.equals(KeyCode.Enter)\n\t\t\t\t\t) {\n\t\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\taddDisposableListener(this.element, EventType.MOUSE_OVER, (e) => {\n\t\t\t\tif (!this.mouseOver) {\n\t\t\t\t\tthis.mouseOver = true;\n\n\t\t\t\t\tthis.showScheduler.schedule();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\taddDisposableListener(this.element, EventType.MOUSE_LEAVE, (e) => {\n\t\t\t\tthis.mouseOver = false;\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\taddDisposableListener(this.element, EventType.FOCUS_OUT, (e) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.element &&\n\t\t\t\t\t!isAncestor(getActiveElement(), this.element)\n\t\t\t\t) {\n\t\t\t\t\tthis.hideScheduler.schedule();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.parentData.parent.onScroll(() => {\n\t\t\t\tif (this.parentData.submenu === this.mysubmenu) {\n\t\t\t\t\tthis.parentData.parent.focus(false);\n\t\t\t\t\tthis.cleanupExistingSubmenu(true);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tprotected override updateEnabled(): void {\n\t\t// override on submenu entry\n\t\t// native menus do not observe enablement on sumbenus\n\t\t// we mimic that behavior\n\t}\n\n\topen(selectFirst?: boolean): void {\n\t\tthis.cleanupExistingSubmenu(false);\n\t\tthis.createSubmenu(selectFirst);\n\t}\n\n\toverride onClick(e: EventLike): void {\n\t\t// stop clicking from trying to run an action\n\t\tEventHelper.stop(e, true);\n\n\t\tthis.cleanupExistingSubmenu(false);\n\t\tthis.createSubmenu(true);\n\t}\n\n\tprivate cleanupExistingSubmenu(force: boolean): void {\n\t\tif (\n\t\t\tthis.parentData.submenu &&\n\t\t\t(force || this.parentData.submenu !== this.mysubmenu)\n\t\t) {\n\t\t\t// disposal may throw if the submenu has already been removed\n\t\t\ttry {\n\t\t\t\tthis.parentData.submenu.dispose();\n\t\t\t} catch {}\n\n\t\t\tthis.parentData.submenu = undefined;\n\t\t\tthis.updateAriaExpanded(\"false\");\n\t\t\tif (this.submenuContainer) {\n\t\t\t\tthis.submenuDisposables.clear();\n\t\t\t\tthis.submenuContainer = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate calculateSubmenuMenuLayout(\n\t\twindowDimensions: Dimension,\n\t\tsubmenu: Dimension,\n\t\tentry: IDomNodePagePosition,\n\t\texpandDirection: IMenuDirection,\n\t): { top: number; left: number } {\n\t\tconst ret = { top: 0, left: 0 };\n\n\t\t// Start with horizontal\n\t\tret.left = layout(windowDimensions.width, submenu.width, {\n\t\t\tposition:\n\t\t\t\texpandDirection.horizontal === HorizontalDirection.Right\n\t\t\t\t\t? LayoutAnchorPosition.Before\n\t\t\t\t\t: LayoutAnchorPosition.After,\n\t\t\toffset: entry.left,\n\t\t\tsize: entry.width,\n\t\t});\n\n\t\t// We don't have enough room to layout the menu fully, so we are overlapping the menu\n\t\tif (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n\t\t\tif (entry.left + 10 + submenu.width <= windowDimensions.width) {\n\t\t\t\tret.left = entry.left + 10;\n\t\t\t}\n\n\t\t\tentry.top += 10;\n\t\t\tentry.height = 0;\n\t\t}\n\n\t\t// Now that we have a horizontal position, try layout vertically\n\t\tret.top = layout(windowDimensions.height, submenu.height, {\n\t\t\tposition: LayoutAnchorPosition.Before,\n\t\t\toffset: entry.top,\n\t\t\tsize: 0,\n\t\t});\n\n\t\t// We didn't have enough room below, but we did above, so we shift down to align the menu\n\t\tif (\n\t\t\tret.top + submenu.height === entry.top &&\n\t\t\tret.top + entry.height + submenu.height <= windowDimensions.height\n\t\t) {\n\t\t\tret.top += entry.height;\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\tprivate createSubmenu(selectFirstItem = true): void {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.parentData.submenu) {\n\t\t\tthis.parentData.submenu.focus(false);\n\t\t} else {\n\t\t\tthis.updateAriaExpanded(\"true\");\n\t\t\tthis.submenuContainer = append(\n\t\t\t\tthis.element,\n\t\t\t\t$(\"div.monaco-submenu\"),\n\t\t\t);\n\t\t\tthis.submenuContainer.classList.add(\n\t\t\t\t\"menubar-menu-items-holder\",\n\t\t\t\t\"context-view\",\n\t\t\t);\n\n\t\t\t// Set the top value of the menu container before construction\n\t\t\t// This allows the menu constructor to calculate the proper max height\n\t\t\tconst computedStyles = getWindow(\n\t\t\t\tthis.parentData.parent.domNode,\n\t\t\t).getComputedStyle(this.parentData.parent.domNode);\n\t\t\tconst paddingTop =\n\t\t\t\tNumber.parseFloat(computedStyles.paddingTop || \"0\") || 0;\n\t\t\t// this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n\t\t\tthis.submenuContainer.style.zIndex = \"1\";\n\t\t\tthis.submenuContainer.style.position = \"fixed\";\n\t\t\tthis.submenuContainer.style.top = \"0\";\n\t\t\tthis.submenuContainer.style.left = \"0\";\n\n\t\t\tthis.parentData.submenu = new Menu(\n\t\t\t\tthis.submenuContainer,\n\t\t\t\tthis.submenuActions.length\n\t\t\t\t\t? this.submenuActions\n\t\t\t\t\t: [new EmptySubmenuAction()],\n\t\t\t\tthis.submenuOptions,\n\t\t\t\tthis.menuStyle,\n\t\t\t);\n\n\t\t\t// layout submenu\n\t\t\tconst entryBox = this.element.getBoundingClientRect();\n\t\t\tconst entryBoxUpdated = {\n\t\t\t\ttop: entryBox.top - paddingTop,\n\t\t\t\tleft: entryBox.left,\n\t\t\t\theight: entryBox.height + 2 * paddingTop,\n\t\t\t\twidth: entryBox.width,\n\t\t\t};\n\n\t\t\tconst viewBox = this.submenuContainer.getBoundingClientRect();\n\n\t\t\tconst window = getWindow(this.element);\n\t\t\tconst { top, left } = this.calculateSubmenuMenuLayout(\n\t\t\t\tnew Dimension(window.innerWidth, window.innerHeight),\n\t\t\t\tDimension.lift(viewBox),\n\t\t\t\tentryBoxUpdated,\n\t\t\t\tthis.expandDirection,\n\t\t\t);\n\t\t\t// subtract offsets caused by transform parent\n\t\t\tthis.submenuContainer.style.left = `${left - viewBox.left}px`;\n\t\t\tthis.submenuContainer.style.top = `${top - viewBox.top}px`;\n\n\t\t\tthis.submenuDisposables.add(\n\t\t\t\taddDisposableListener(\n\t\t\t\t\tthis.submenuContainer,\n\t\t\t\t\tEventType.KEY_UP,\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\t\t\tif (event.equals(KeyCode.LeftArrow)) {\n\t\t\t\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\t\t\t\tthis.parentData.parent.focus();\n\n\t\t\t\t\t\t\tthis.cleanupExistingSubmenu(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tthis.submenuDisposables.add(\n\t\t\t\taddDisposableListener(\n\t\t\t\t\tthis.submenuContainer,\n\t\t\t\t\tEventType.KEY_DOWN,\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\t\t\tif (event.equals(KeyCode.LeftArrow)) {\n\t\t\t\t\t\t\tEventHelper.stop(e, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tthis.submenuDisposables.add(\n\t\t\t\tthis.parentData.submenu.onDidCancel(() => {\n\t\t\t\t\tthis.parentData.parent.focus();\n\n\t\t\t\t\tthis.cleanupExistingSubmenu(true);\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis.parentData.submenu.focus(selectFirstItem);\n\n\t\t\tthis.mysubmenu = this.parentData.submenu;\n\t\t}\n\t}\n\n\tprivate updateAriaExpanded(value: string): void {\n\t\tif (this.item) {\n\t\t\tthis.item?.setAttribute(\"aria-expanded\", value);\n\t\t}\n\t}\n\n\tprotected override applyStyle(): void {\n\t\tsuper.applyStyle();\n\n\t\tconst isSelected =\n\t\t\tthis.element && this.element.classList.contains(\"focused\");\n\t\tconst fgColor =\n\t\t\tisSelected && this.menuStyle.selectionForegroundColor\n\t\t\t\t? this.menuStyle.selectionForegroundColor\n\t\t\t\t: this.menuStyle.foregroundColor;\n\n\t\tif (this.submenuIndicator) {\n\t\t\tthis.submenuIndicator.style.color = fgColor ?? \"\";\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.hideScheduler.dispose();\n\n\t\tif (this.mysubmenu) {\n\t\t\tthis.mysubmenu.dispose();\n\t\t\tthis.mysubmenu = null;\n\t\t}\n\n\t\tif (this.submenuContainer) {\n\t\t\tthis.submenuContainer = undefined;\n\t\t}\n\t}\n}\n\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n\tconstructor(\n\t\tcontext: unknown,\n\t\taction: IAction,\n\t\toptions: IActionViewItemOptions,\n\t\tprivate readonly menuStyles: IMenuStyles,\n\t) {\n\t\tsuper(context, action, options);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\t\tif (this.label) {\n\t\t\tthis.label.style.borderBottomColor = this.menuStyles.separatorColor\n\t\t\t\t? `${this.menuStyles.separatorColor}`\n\t\t\t\t: \"\";\n\t\t}\n\t}\n}\n\nexport function cleanMnemonic(label: string): string {\n\tconst regex = MENU_MNEMONIC_REGEX;\n\n\tconst matches = regex.exec(label);\n\tif (!matches) {\n\t\treturn label;\n\t}\n\n\tconst mnemonicInText = !matches[1];\n\n\treturn label.replace(regex, mnemonicInText ? \"$2$3\" : \"\").trim();\n}\n\nexport function formatRule(c: ThemeIcon) {\n\tconst fontCharacter = getCodiconFontCharacters()[c.id];\n\treturn `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\n}\n\nfunction getMenuWidgetCSS(style: IMenuStyles, isForShadowDom: boolean): string {\n\tlet result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n\n\tif (isForShadowDom) {\n\t\t// Only define scrollbar styles when used inside shadow dom,\n\t\t// otherwise leave their styling to the global workbench styling.\n\t\tresult += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n\n\t\t// Scrollbars\n\t\tconst scrollbarShadowColor = style.scrollbarShadow;\n\t\tif (scrollbarShadowColor) {\n\t\t\tresult += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\n\t\tconst scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n\t\tif (scrollbarSliderBackgroundColor) {\n\t\t\tresult += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\n\t\tconst scrollbarSliderHoverBackgroundColor =\n\t\t\tstyle.scrollbarSliderHoverBackground;\n\t\tif (scrollbarSliderHoverBackgroundColor) {\n\t\t\tresult += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\n\t\tconst scrollbarSliderActiveBackgroundColor =\n\t\t\tstyle.scrollbarSliderActiveBackground;\n\t\tif (scrollbarSliderActiveBackgroundColor) {\n\t\t\tresult += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t}\n\n\treturn result;\n}\n"],
  "mappings": "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",
  "names": ["HorizontalDirection", "VerticalDirection", "actions"]
}
