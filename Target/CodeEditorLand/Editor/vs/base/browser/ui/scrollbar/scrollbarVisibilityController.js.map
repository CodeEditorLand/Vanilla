{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/scrollbar/scrollbarVisibilityController.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { FastDomNode } from '../../fastDomNode.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { ScrollbarVisibility } from '../../../common/scrollable.js';\n\nexport class ScrollbarVisibilityController extends Disposable {\n\tprivate _visibility: ScrollbarVisibility;\n\tprivate _visibleClassName: string;\n\tprivate _invisibleClassName: string;\n\tprivate _domNode: FastDomNode<HTMLElement> | null;\n\tprivate _rawShouldBeVisible: boolean;\n\tprivate _shouldBeVisible: boolean;\n\tprivate _isNeeded: boolean;\n\tprivate _isVisible: boolean;\n\tprivate _revealTimer: TimeoutTimer;\n\n\tconstructor(visibility: ScrollbarVisibility, visibleClassName: string, invisibleClassName: string) {\n\t\tsuper();\n\t\tthis._visibility = visibility;\n\t\tthis._visibleClassName = visibleClassName;\n\t\tthis._invisibleClassName = invisibleClassName;\n\t\tthis._domNode = null;\n\t\tthis._isVisible = false;\n\t\tthis._isNeeded = false;\n\t\tthis._rawShouldBeVisible = false;\n\t\tthis._shouldBeVisible = false;\n\t\tthis._revealTimer = this._register(new TimeoutTimer());\n\t}\n\n\tpublic setVisibility(visibility: ScrollbarVisibility): void {\n\t\tif (this._visibility !== visibility) {\n\t\t\tthis._visibility = visibility;\n\t\t\tthis._updateShouldBeVisible();\n\t\t}\n\t}\n\n\t// ----------------- Hide / Reveal\n\n\tpublic setShouldBeVisible(rawShouldBeVisible: boolean): void {\n\t\tthis._rawShouldBeVisible = rawShouldBeVisible;\n\t\tthis._updateShouldBeVisible();\n\t}\n\n\tprivate _applyVisibilitySetting(): boolean {\n\t\tif (this._visibility === ScrollbarVisibility.Hidden) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._visibility === ScrollbarVisibility.Visible) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this._rawShouldBeVisible;\n\t}\n\n\tprivate _updateShouldBeVisible(): void {\n\t\tconst shouldBeVisible = this._applyVisibilitySetting();\n\n\t\tif (this._shouldBeVisible !== shouldBeVisible) {\n\t\t\tthis._shouldBeVisible = shouldBeVisible;\n\t\t\tthis.ensureVisibility();\n\t\t}\n\t}\n\n\tpublic setIsNeeded(isNeeded: boolean): void {\n\t\tif (this._isNeeded !== isNeeded) {\n\t\t\tthis._isNeeded = isNeeded;\n\t\t\tthis.ensureVisibility();\n\t\t}\n\t}\n\n\tpublic setDomNode(domNode: FastDomNode<HTMLElement>): void {\n\t\tthis._domNode = domNode;\n\t\tthis._domNode.setClassName(this._invisibleClassName);\n\n\t\t// Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\n\t\tthis.setShouldBeVisible(false);\n\t}\n\n\tpublic ensureVisibility(): void {\n\n\t\tif (!this._isNeeded) {\n\t\t\t// Nothing to be rendered\n\t\t\tthis._hide(false);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._shouldBeVisible) {\n\t\t\tthis._reveal();\n\t\t} else {\n\t\t\tthis._hide(true);\n\t\t}\n\t}\n\n\tprivate _reveal(): void {\n\t\tif (this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = true;\n\n\t\t// The CSS animation doesn't play otherwise\n\t\tthis._revealTimer.setIfNotSet(() => {\n\t\t\tthis._domNode?.setClassName(this._visibleClassName);\n\t\t}, 0);\n\t}\n\n\tprivate _hide(withFadeAway: boolean): void {\n\t\tthis._revealTimer.cancel();\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = false;\n\t\tthis._domNode?.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\n\t}\n}\n"],
  "mappings": ";;AAKA,SAAS,mBAAmB;AAC5B,SAAS,oBAAoB;AAC7B,SAAS,kBAAkB;AAC3B,SAAS,2BAA2B;AAE7B,MAAM,sCAAsC,WAAW;AAAA,EAV9D,OAU8D;AAAA;AAAA;AAAA,EACrD;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAER,YAAY,YAAiC,kBAA0B,oBAA4B;AAClG,UAAM;AACN,SAAK,cAAc;AACnB,SAAK,oBAAoB;AACzB,SAAK,sBAAsB;AAC3B,SAAK,WAAW;AAChB,SAAK,aAAa;AAClB,SAAK,YAAY;AACjB,SAAK,sBAAsB;AAC3B,SAAK,mBAAmB;AACxB,SAAK,eAAe,KAAK,UAAU,IAAI,aAAa,CAAC;AAAA,EACtD;AAAA,EAEO,cAAc,YAAuC;AAC3D,QAAI,KAAK,gBAAgB,YAAY;AACpC,WAAK,cAAc;AACnB,WAAK,uBAAuB;AAAA,IAC7B;AAAA,EACD;AAAA;AAAA,EAIO,mBAAmB,oBAAmC;AAC5D,SAAK,sBAAsB;AAC3B,SAAK,uBAAuB;AAAA,EAC7B;AAAA,EAEQ,0BAAmC;AAC1C,QAAI,KAAK,gBAAgB,oBAAoB,QAAQ;AACpD,aAAO;AAAA,IACR;AACA,QAAI,KAAK,gBAAgB,oBAAoB,SAAS;AACrD,aAAO;AAAA,IACR;AACA,WAAO,KAAK;AAAA,EACb;AAAA,EAEQ,yBAA+B;AACtC,UAAM,kBAAkB,KAAK,wBAAwB;AAErD,QAAI,KAAK,qBAAqB,iBAAiB;AAC9C,WAAK,mBAAmB;AACxB,WAAK,iBAAiB;AAAA,IACvB;AAAA,EACD;AAAA,EAEO,YAAY,UAAyB;AAC3C,QAAI,KAAK,cAAc,UAAU;AAChC,WAAK,YAAY;AACjB,WAAK,iBAAiB;AAAA,IACvB;AAAA,EACD;AAAA,EAEO,WAAW,SAAyC;AAC1D,SAAK,WAAW;AAChB,SAAK,SAAS,aAAa,KAAK,mBAAmB;AAGnD,SAAK,mBAAmB,KAAK;AAAA,EAC9B;AAAA,EAEO,mBAAyB;AAE/B,QAAI,CAAC,KAAK,WAAW;AAEpB,WAAK,MAAM,KAAK;AAChB;AAAA,IACD;AAEA,QAAI,KAAK,kBAAkB;AAC1B,WAAK,QAAQ;AAAA,IACd,OAAO;AACN,WAAK,MAAM,IAAI;AAAA,IAChB;AAAA,EACD;AAAA,EAEQ,UAAgB;AACvB,QAAI,KAAK,YAAY;AACpB;AAAA,IACD;AACA,SAAK,aAAa;AAGlB,SAAK,aAAa,YAAY,MAAM;AACnC,WAAK,UAAU,aAAa,KAAK,iBAAiB;AAAA,IACnD,GAAG,CAAC;AAAA,EACL;AAAA,EAEQ,MAAM,cAA6B;AAC1C,SAAK,aAAa,OAAO;AACzB,QAAI,CAAC,KAAK,YAAY;AACrB;AAAA,IACD;AACA,SAAK,aAAa;AAClB,SAAK,UAAU,aAAa,KAAK,uBAAuB,eAAe,UAAU,GAAG;AAAA,EACrF;AACD;",
  "names": []
}
