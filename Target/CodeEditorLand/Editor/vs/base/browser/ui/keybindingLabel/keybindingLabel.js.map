{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/keybindingLabel/keybindingLabel.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { UILabelProvider } from \"../../../common/keybindingLabels.js\";\nimport type {\n\tResolvedChord,\n\tResolvedKeybinding,\n} from \"../../../common/keybindings.js\";\nimport { Disposable } from \"../../../common/lifecycle.js\";\nimport { equals } from \"../../../common/objects.js\";\nimport type { OperatingSystem } from \"../../../common/platform.js\";\nimport * as dom from \"../../dom.js\";\nimport type { IManagedHover } from \"../hover/hover.js\";\nimport { getBaseLayerHoverDelegate } from \"../hover/hoverDelegate2.js\";\nimport { getDefaultHoverDelegate } from \"../hover/hoverDelegateFactory.js\";\nimport \"./keybindingLabel.css\";\nimport { localize } from \"../../../../nls.js\";\n\nconst $ = dom.$;\n\nexport interface ChordMatches {\n\tctrlKey?: boolean;\n\tshiftKey?: boolean;\n\taltKey?: boolean;\n\tmetaKey?: boolean;\n\tkeyCode?: boolean;\n}\n\nexport interface Matches {\n\tfirstPart: ChordMatches;\n\tchordPart: ChordMatches;\n}\n\nexport interface KeybindingLabelOptions extends IKeybindingLabelStyles {\n\trenderUnboundKeybindings?: boolean;\n\t/**\n\t * Default false.\n\t */\n\tdisableTitle?: boolean;\n}\n\nexport interface IKeybindingLabelStyles {\n\tkeybindingLabelBackground: string | undefined;\n\tkeybindingLabelForeground: string | undefined;\n\tkeybindingLabelBorder: string | undefined;\n\tkeybindingLabelBottomBorder: string | undefined;\n\tkeybindingLabelShadow: string | undefined;\n}\n\nexport const unthemedKeybindingLabelOptions: KeybindingLabelOptions = {\n\tkeybindingLabelBackground: undefined,\n\tkeybindingLabelForeground: undefined,\n\tkeybindingLabelBorder: undefined,\n\tkeybindingLabelBottomBorder: undefined,\n\tkeybindingLabelShadow: undefined,\n};\n\nexport class KeybindingLabel extends Disposable {\n\tprivate domNode: HTMLElement;\n\tprivate options: KeybindingLabelOptions;\n\n\tprivate readonly keyElements = new Set<HTMLSpanElement>();\n\n\tprivate hover: IManagedHover;\n\tprivate keybinding: ResolvedKeybinding | undefined;\n\tprivate matches: Matches | undefined;\n\tprivate didEverRender: boolean;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate os: OperatingSystem,\n\t\toptions?: KeybindingLabelOptions,\n\t) {\n\t\tsuper();\n\n\t\tthis.options = options || Object.create(null);\n\n\t\tconst labelForeground = this.options.keybindingLabelForeground;\n\n\t\tthis.domNode = dom.append(container, $(\".monaco-keybinding\"));\n\t\tif (labelForeground) {\n\t\t\tthis.domNode.style.color = labelForeground;\n\t\t}\n\n\t\tthis.hover = this._register(\n\t\t\tgetBaseLayerHoverDelegate().setupManagedHover(\n\t\t\t\tgetDefaultHoverDelegate(\"mouse\"),\n\t\t\t\tthis.domNode,\n\t\t\t\t\"\",\n\t\t\t),\n\t\t);\n\n\t\tthis.didEverRender = false;\n\t\tcontainer.appendChild(this.domNode);\n\t}\n\n\tget element(): HTMLElement {\n\t\treturn this.domNode;\n\t}\n\n\tset(keybinding: ResolvedKeybinding | undefined, matches?: Matches) {\n\t\tif (\n\t\t\tthis.didEverRender &&\n\t\t\tthis.keybinding === keybinding &&\n\t\t\tKeybindingLabel.areSame(this.matches, matches)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.keybinding = keybinding;\n\t\tthis.matches = matches;\n\t\tthis.render();\n\t}\n\n\tprivate render() {\n\t\tthis.clear();\n\n\t\tif (this.keybinding) {\n\t\t\tconst chords = this.keybinding.getChords();\n\t\t\tif (chords[0]) {\n\t\t\t\tthis.renderChord(\n\t\t\t\t\tthis.domNode,\n\t\t\t\t\tchords[0],\n\t\t\t\t\tthis.matches ? this.matches.firstPart : null,\n\t\t\t\t);\n\t\t\t}\n\t\t\tfor (let i = 1; i < chords.length; i++) {\n\t\t\t\tdom.append(\n\t\t\t\t\tthis.domNode,\n\t\t\t\t\t$(\n\t\t\t\t\t\t\"span.monaco-keybinding-key-chord-separator\",\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\" \",\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tthis.renderChord(\n\t\t\t\t\tthis.domNode,\n\t\t\t\t\tchords[i],\n\t\t\t\t\tthis.matches ? this.matches.chordPart : null,\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst title =\n\t\t\t\t(this.options.disableTitle ?? false)\n\t\t\t\t\t? undefined\n\t\t\t\t\t: this.keybinding.getAriaLabel() || undefined;\n\t\t\tthis.hover.update(title);\n\t\t\tthis.domNode.setAttribute(\"aria-label\", title || \"\");\n\t\t} else if (this.options && this.options.renderUnboundKeybindings) {\n\t\t\tthis.renderUnbound(this.domNode);\n\t\t}\n\n\t\tthis.didEverRender = true;\n\t}\n\n\tprivate clear(): void {\n\t\tdom.clearNode(this.domNode);\n\t\tthis.keyElements.clear();\n\t}\n\n\tprivate renderChord(\n\t\tparent: HTMLElement,\n\t\tchord: ResolvedChord,\n\t\tmatch: ChordMatches | null,\n\t) {\n\t\tconst modifierLabels = UILabelProvider.modifierLabels[this.os];\n\t\tif (chord.ctrlKey) {\n\t\t\tthis.renderKey(\n\t\t\t\tparent,\n\t\t\t\tmodifierLabels.ctrlKey,\n\t\t\t\tBoolean(match?.ctrlKey),\n\t\t\t\tmodifierLabels.separator,\n\t\t\t);\n\t\t}\n\t\tif (chord.shiftKey) {\n\t\t\tthis.renderKey(\n\t\t\t\tparent,\n\t\t\t\tmodifierLabels.shiftKey,\n\t\t\t\tBoolean(match?.shiftKey),\n\t\t\t\tmodifierLabels.separator,\n\t\t\t);\n\t\t}\n\t\tif (chord.altKey) {\n\t\t\tthis.renderKey(\n\t\t\t\tparent,\n\t\t\t\tmodifierLabels.altKey,\n\t\t\t\tBoolean(match?.altKey),\n\t\t\t\tmodifierLabels.separator,\n\t\t\t);\n\t\t}\n\t\tif (chord.metaKey) {\n\t\t\tthis.renderKey(\n\t\t\t\tparent,\n\t\t\t\tmodifierLabels.metaKey,\n\t\t\t\tBoolean(match?.metaKey),\n\t\t\t\tmodifierLabels.separator,\n\t\t\t);\n\t\t}\n\t\tconst keyLabel = chord.keyLabel;\n\t\tif (keyLabel) {\n\t\t\tthis.renderKey(parent, keyLabel, Boolean(match?.keyCode), \"\");\n\t\t}\n\t}\n\n\tprivate renderKey(\n\t\tparent: HTMLElement,\n\t\tlabel: string,\n\t\thighlight: boolean,\n\t\tseparator: string,\n\t): void {\n\t\tdom.append(\n\t\t\tparent,\n\t\t\tthis.createKeyElement(label, highlight ? \".highlight\" : \"\"),\n\t\t);\n\t\tif (separator) {\n\t\t\tdom.append(\n\t\t\t\tparent,\n\t\t\t\t$(\"span.monaco-keybinding-key-separator\", undefined, separator),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate renderUnbound(parent: HTMLElement): void {\n\t\tdom.append(\n\t\t\tparent,\n\t\t\tthis.createKeyElement(localize(\"unbound\", \"Unbound\")),\n\t\t);\n\t}\n\n\tprivate createKeyElement(label: string, extraClass = \"\"): HTMLElement {\n\t\tconst keyElement = $(\n\t\t\t\"span.monaco-keybinding-key\" + extraClass,\n\t\t\tundefined,\n\t\t\tlabel,\n\t\t);\n\t\tthis.keyElements.add(keyElement);\n\n\t\tif (this.options.keybindingLabelBackground) {\n\t\t\tkeyElement.style.backgroundColor =\n\t\t\t\tthis.options.keybindingLabelBackground;\n\t\t}\n\t\tif (this.options.keybindingLabelBorder) {\n\t\t\tkeyElement.style.borderColor = this.options.keybindingLabelBorder;\n\t\t}\n\t\tif (this.options.keybindingLabelBottomBorder) {\n\t\t\tkeyElement.style.borderBottomColor =\n\t\t\t\tthis.options.keybindingLabelBottomBorder;\n\t\t}\n\t\tif (this.options.keybindingLabelShadow) {\n\t\t\tkeyElement.style.boxShadow = `inset 0 -1px 0 ${this.options.keybindingLabelShadow}`;\n\t\t}\n\n\t\treturn keyElement;\n\t}\n\n\tprivate static areSame(\n\t\ta: Matches | undefined,\n\t\tb: Matches | undefined,\n\t): boolean {\n\t\tif (a === b || (!a && !b)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn (\n\t\t\t!!a &&\n\t\t\t!!b &&\n\t\t\tequals(a.firstPart, b.firstPart) &&\n\t\t\tequals(a.chordPart, b.chordPart)\n\t\t);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
