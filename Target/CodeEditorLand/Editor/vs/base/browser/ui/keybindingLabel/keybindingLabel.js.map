{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/keybindingLabel/keybindingLabel.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../dom.js';\nimport type { IManagedHover } from '../hover/hover.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\nimport { ResolvedKeybinding, ResolvedChord } from '../../../common/keybindings.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { equals } from '../../../common/objects.js';\nimport { OperatingSystem } from '../../../common/platform.js';\nimport './keybindingLabel.css';\nimport { localize } from '../../../../nls.js';\n\nconst $ = dom.$;\n\nexport interface ChordMatches {\n\tctrlKey?: boolean;\n\tshiftKey?: boolean;\n\taltKey?: boolean;\n\tmetaKey?: boolean;\n\tkeyCode?: boolean;\n}\n\nexport interface Matches {\n\tfirstPart: ChordMatches;\n\tchordPart: ChordMatches;\n}\n\nexport interface KeybindingLabelOptions extends IKeybindingLabelStyles {\n\trenderUnboundKeybindings?: boolean;\n\t/**\n\t * Default false.\n\t */\n\tdisableTitle?: boolean;\n}\n\nexport interface IKeybindingLabelStyles {\n\tkeybindingLabelBackground: string | undefined;\n\tkeybindingLabelForeground: string | undefined;\n\tkeybindingLabelBorder: string | undefined;\n\tkeybindingLabelBottomBorder: string | undefined;\n\tkeybindingLabelShadow: string | undefined;\n}\n\nexport const unthemedKeybindingLabelOptions: KeybindingLabelOptions = {\n\tkeybindingLabelBackground: undefined,\n\tkeybindingLabelForeground: undefined,\n\tkeybindingLabelBorder: undefined,\n\tkeybindingLabelBottomBorder: undefined,\n\tkeybindingLabelShadow: undefined\n};\n\nexport class KeybindingLabel extends Disposable {\n\n\tprivate domNode: HTMLElement;\n\tprivate options: KeybindingLabelOptions;\n\n\tprivate readonly keyElements = new Set<HTMLSpanElement>();\n\n\tprivate hover: IManagedHover;\n\tprivate keybinding: ResolvedKeybinding | undefined;\n\tprivate matches: Matches | undefined;\n\tprivate didEverRender: boolean;\n\n\tconstructor(container: HTMLElement, private os: OperatingSystem, options?: KeybindingLabelOptions) {\n\t\tsuper();\n\n\t\tthis.options = options || Object.create(null);\n\n\t\tconst labelForeground = this.options.keybindingLabelForeground;\n\n\t\tthis.domNode = dom.append(container, $('.monaco-keybinding'));\n\t\tif (labelForeground) {\n\t\t\tthis.domNode.style.color = labelForeground;\n\t\t}\n\n\t\tthis.hover = this._register(getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('mouse'), this.domNode, ''));\n\n\t\tthis.didEverRender = false;\n\t\tcontainer.appendChild(this.domNode);\n\t}\n\n\tget element(): HTMLElement {\n\t\treturn this.domNode;\n\t}\n\n\tset(keybinding: ResolvedKeybinding | undefined, matches?: Matches) {\n\t\tif (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.keybinding = keybinding;\n\t\tthis.matches = matches;\n\t\tthis.render();\n\t}\n\n\tprivate render() {\n\t\tthis.clear();\n\n\t\tif (this.keybinding) {\n\t\t\tconst chords = this.keybinding.getChords();\n\t\t\tif (chords[0]) {\n\t\t\t\tthis.renderChord(this.domNode, chords[0], this.matches ? this.matches.firstPart : null);\n\t\t\t}\n\t\t\tfor (let i = 1; i < chords.length; i++) {\n\t\t\t\tdom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n\t\t\t\tthis.renderChord(this.domNode, chords[i], this.matches ? this.matches.chordPart : null);\n\t\t\t}\n\t\t\tconst title = (this.options.disableTitle ?? false) ? undefined : this.keybinding.getAriaLabel() || undefined;\n\t\t\tthis.hover.update(title);\n\t\t\tthis.domNode.setAttribute('aria-label', title || '');\n\t\t} else if (this.options && this.options.renderUnboundKeybindings) {\n\t\t\tthis.renderUnbound(this.domNode);\n\t\t}\n\n\t\tthis.didEverRender = true;\n\t}\n\n\tprivate clear(): void {\n\t\tdom.clearNode(this.domNode);\n\t\tthis.keyElements.clear();\n\t}\n\n\tprivate renderChord(parent: HTMLElement, chord: ResolvedChord, match: ChordMatches | null) {\n\t\tconst modifierLabels = UILabelProvider.modifierLabels[this.os];\n\t\tif (chord.ctrlKey) {\n\t\t\tthis.renderKey(parent, modifierLabels.ctrlKey, Boolean(match?.ctrlKey), modifierLabels.separator);\n\t\t}\n\t\tif (chord.shiftKey) {\n\t\t\tthis.renderKey(parent, modifierLabels.shiftKey, Boolean(match?.shiftKey), modifierLabels.separator);\n\t\t}\n\t\tif (chord.altKey) {\n\t\t\tthis.renderKey(parent, modifierLabels.altKey, Boolean(match?.altKey), modifierLabels.separator);\n\t\t}\n\t\tif (chord.metaKey) {\n\t\t\tthis.renderKey(parent, modifierLabels.metaKey, Boolean(match?.metaKey), modifierLabels.separator);\n\t\t}\n\t\tconst keyLabel = chord.keyLabel;\n\t\tif (keyLabel) {\n\t\t\tthis.renderKey(parent, keyLabel, Boolean(match?.keyCode), '');\n\t\t}\n\t}\n\n\tprivate renderKey(parent: HTMLElement, label: string, highlight: boolean, separator: string): void {\n\t\tdom.append(parent, this.createKeyElement(label, highlight ? '.highlight' : ''));\n\t\tif (separator) {\n\t\t\tdom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n\t\t}\n\t}\n\n\tprivate renderUnbound(parent: HTMLElement): void {\n\t\tdom.append(parent, this.createKeyElement(localize('unbound', \"Unbound\")));\n\t}\n\n\tprivate createKeyElement(label: string, extraClass = ''): HTMLElement {\n\t\tconst keyElement = $('span.monaco-keybinding-key' + extraClass, undefined, label);\n\t\tthis.keyElements.add(keyElement);\n\n\t\tif (this.options.keybindingLabelBackground) {\n\t\t\tkeyElement.style.backgroundColor = this.options.keybindingLabelBackground;\n\t\t}\n\t\tif (this.options.keybindingLabelBorder) {\n\t\t\tkeyElement.style.borderColor = this.options.keybindingLabelBorder;\n\t\t}\n\t\tif (this.options.keybindingLabelBottomBorder) {\n\t\t\tkeyElement.style.borderBottomColor = this.options.keybindingLabelBottomBorder;\n\t\t}\n\t\tif (this.options.keybindingLabelShadow) {\n\t\t\tkeyElement.style.boxShadow = `inset 0 -1px 0 ${this.options.keybindingLabelShadow}`;\n\t\t}\n\n\t\treturn keyElement;\n\t}\n\n\tprivate static areSame(a: Matches | undefined, b: Matches | undefined): boolean {\n\t\tif (a === b || (!a && !b)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
