{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/dropdown/dropdown.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IContextMenuProvider } from '../../contextmenu.js';\nimport { $, addDisposableListener, append, EventHelper, EventType, isMouseEvent } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as GestureEventType, Gesture } from '../../touch.js';\nimport { AnchorAlignment } from '../contextview/contextview.js';\nimport type { IManagedHover } from '../hover/hover.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { IMenuOptions } from '../menu/menu.js';\nimport { ActionRunner, IAction } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport { KeyCode } from '../../../common/keyCodes.js';\nimport { IDisposable } from '../../../common/lifecycle.js';\nimport './dropdown.css';\n\nexport interface ILabelRenderer {\n\t(container: HTMLElement): IDisposable | null;\n}\n\ninterface IBaseDropdownOptions {\n\tlabel?: string;\n\tlabelRenderer?: ILabelRenderer;\n}\n\nclass BaseDropdown extends ActionRunner {\n\tprivate _element: HTMLElement;\n\tprivate boxContainer?: HTMLElement;\n\tprivate _label?: HTMLElement;\n\tprivate contents?: HTMLElement;\n\n\tprivate visible: boolean | undefined;\n\tprivate _onDidChangeVisibility = this._register(new Emitter<boolean>());\n\treadonly onDidChangeVisibility = this._onDidChangeVisibility.event;\n\n\tprivate hover: IManagedHover | undefined;\n\n\tconstructor(container: HTMLElement, options: IBaseDropdownOptions) {\n\t\tsuper();\n\n\t\tthis._element = append(container, $('.monaco-dropdown'));\n\n\t\tthis._label = append(this._element, $('.dropdown-label'));\n\n\t\tlet labelRenderer = options.labelRenderer;\n\t\tif (!labelRenderer) {\n\t\t\tlabelRenderer = (container: HTMLElement): IDisposable | null => {\n\t\t\t\tcontainer.textContent = options.label || '';\n\n\t\t\t\treturn null;\n\t\t\t};\n\t\t}\n\n\t\tfor (const event of [EventType.CLICK, EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n\t\t\tthis._register(addDisposableListener(this.element, event, e => EventHelper.stop(e, true))); // prevent default click behaviour to trigger\n\t\t}\n\n\t\tfor (const event of [EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n\t\t\tthis._register(addDisposableListener(this._label, event, e => {\n\t\t\t\tif (isMouseEvent(e) && (e.detail > 1 || e.button !== 0)) {\n\t\t\t\t\t// prevent right click trigger to allow separate context menu (https://github.com/microsoft/vscode/issues/151064)\n\t\t\t\t\t// prevent multiple clicks to open multiple context menus (https://github.com/microsoft/vscode/issues/41363)\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.visible) {\n\t\t\t\t\tthis.hide();\n\t\t\t\t} else {\n\t\t\t\t\tthis.show();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tthis._register(addDisposableListener(this._label, EventType.KEY_UP, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\tEventHelper.stop(e, true); // https://github.com/microsoft/vscode/issues/57997\n\n\t\t\t\tif (this.visible) {\n\t\t\t\t\tthis.hide();\n\t\t\t\t} else {\n\t\t\t\t\tthis.show();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tconst cleanupFn = labelRenderer(this._label);\n\t\tif (cleanupFn) {\n\t\t\tthis._register(cleanupFn);\n\t\t}\n\n\t\tthis._register(Gesture.addTarget(this._label));\n\t}\n\n\tget element(): HTMLElement {\n\t\treturn this._element;\n\t}\n\n\tget label() {\n\t\treturn this._label;\n\t}\n\n\tset tooltip(tooltip: string) {\n\t\tif (this._label) {\n\t\t\tif (!this.hover && tooltip !== '') {\n\t\t\t\tthis.hover = this._register(getBaseLayerHoverDelegate().setupManagedHover(getDefaultHoverDelegate('mouse'), this._label, tooltip));\n\t\t\t} else if (this.hover) {\n\t\t\t\tthis.hover.update(tooltip);\n\t\t\t}\n\t\t}\n\t}\n\n\tshow(): void {\n\t\tif (!this.visible) {\n\t\t\tthis.visible = true;\n\t\t\tthis._onDidChangeVisibility.fire(true);\n\t\t}\n\t}\n\n\thide(): void {\n\t\tif (this.visible) {\n\t\t\tthis.visible = false;\n\t\t\tthis._onDidChangeVisibility.fire(false);\n\t\t}\n\t}\n\n\tisVisible(): boolean {\n\t\treturn !!this.visible;\n\t}\n\n\tprotected onEvent(_e: Event, activeElement: HTMLElement): void {\n\t\tthis.hide();\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.hide();\n\n\t\tif (this.boxContainer) {\n\t\t\tthis.boxContainer.remove();\n\t\t\tthis.boxContainer = undefined;\n\t\t}\n\n\t\tif (this.contents) {\n\t\t\tthis.contents.remove();\n\t\t\tthis.contents = undefined;\n\t\t}\n\n\t\tif (this._label) {\n\t\t\tthis._label.remove();\n\t\t\tthis._label = undefined;\n\t\t}\n\t}\n}\n\nexport interface IActionProvider {\n\tgetActions(): readonly IAction[];\n}\n\nexport interface IDropdownMenuOptions extends IBaseDropdownOptions {\n\tcontextMenuProvider: IContextMenuProvider;\n\treadonly actions?: IAction[];\n\treadonly actionProvider?: IActionProvider;\n\tmenuClassName?: string;\n\tmenuAsChild?: boolean; // scope down for #99448\n\treadonly skipTelemetry?: boolean;\n}\n\nexport class DropdownMenu extends BaseDropdown {\n\tprivate _menuOptions: IMenuOptions | undefined;\n\tprivate _actions: readonly IAction[] = [];\n\n\tconstructor(container: HTMLElement, private readonly _options: IDropdownMenuOptions) {\n\t\tsuper(container, _options);\n\n\t\tthis.actions = _options.actions || [];\n\t}\n\n\tset menuOptions(options: IMenuOptions | undefined) {\n\t\tthis._menuOptions = options;\n\t}\n\n\tget menuOptions(): IMenuOptions | undefined {\n\t\treturn this._menuOptions;\n\t}\n\n\tprivate get actions(): readonly IAction[] {\n\t\tif (this._options.actionProvider) {\n\t\t\treturn this._options.actionProvider.getActions();\n\t\t}\n\n\t\treturn this._actions;\n\t}\n\n\tprivate set actions(actions: readonly IAction[]) {\n\t\tthis._actions = actions;\n\t}\n\n\toverride show(): void {\n\t\tsuper.show();\n\n\t\tthis.element.classList.add('active');\n\n\t\tthis._options.contextMenuProvider.showContextMenu({\n\t\t\tgetAnchor: () => this.element,\n\t\t\tgetActions: () => this.actions,\n\t\t\tgetActionsContext: () => this.menuOptions ? this.menuOptions.context : null,\n\t\t\tgetActionViewItem: (action, options) => this.menuOptions && this.menuOptions.actionViewItemProvider ? this.menuOptions.actionViewItemProvider(action, options) : undefined,\n\t\t\tgetKeyBinding: action => this.menuOptions && this.menuOptions.getKeyBinding ? this.menuOptions.getKeyBinding(action) : undefined,\n\t\t\tgetMenuClassName: () => this._options.menuClassName || '',\n\t\t\tonHide: () => this.onHide(),\n\t\t\tactionRunner: this.menuOptions ? this.menuOptions.actionRunner : undefined,\n\t\t\tanchorAlignment: this.menuOptions ? this.menuOptions.anchorAlignment : AnchorAlignment.LEFT,\n\t\t\tdomForShadowRoot: this._options.menuAsChild ? this.element : undefined,\n\t\t\tskipTelemetry: this._options.skipTelemetry\n\t\t});\n\t}\n\n\toverride hide(): void {\n\t\tsuper.hide();\n\t}\n\n\tprivate onHide(): void {\n\t\tthis.hide();\n\t\tthis.element.classList.remove('active');\n\t}\n}\n"],
  "mappings": "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",
  "names": ["container"]
}
