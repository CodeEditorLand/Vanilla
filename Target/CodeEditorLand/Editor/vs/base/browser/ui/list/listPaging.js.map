{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/list/listPaging.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable, IDisposable } from '../../../common/lifecycle.js';\nimport { IPagedModel } from '../../../common/paging.js';\nimport { ScrollbarVisibility } from '../../../common/scrollable.js';\nimport './list.css';\nimport { IListContextMenuEvent, IListEvent, IListMouseEvent, IListRenderer, IListVirtualDelegate } from './list.js';\nimport { IListAccessibilityProvider, IListOptions, IListOptionsUpdate, IListStyles, List, TypeNavigationMode } from './listWidget.js';\nimport { isActiveElement } from '../../dom.js';\n\nexport interface IPagedRenderer<TElement, TTemplateData> extends IListRenderer<TElement, TTemplateData> {\n\trenderPlaceholder(index: number, templateData: TTemplateData): void;\n}\n\nexport interface ITemplateData<T> {\n\tdata?: T;\n\tdisposable?: IDisposable;\n}\n\nclass PagedRenderer<TElement, TTemplateData> implements IListRenderer<number, ITemplateData<TTemplateData>> {\n\n\tget templateId(): string { return this.renderer.templateId; }\n\n\tconstructor(\n\t\tprivate renderer: IPagedRenderer<TElement, TTemplateData>,\n\t\tprivate modelProvider: () => IPagedModel<TElement>\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ITemplateData<TTemplateData> {\n\t\tconst data = this.renderer.renderTemplate(container);\n\t\treturn { data, disposable: Disposable.None };\n\t}\n\n\trenderElement(index: number, _: number, data: ITemplateData<TTemplateData>, height: number | undefined): void {\n\t\tdata.disposable?.dispose();\n\n\t\tif (!data.data) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = this.modelProvider();\n\n\t\tif (model.isResolved(index)) {\n\t\t\treturn this.renderer.renderElement(model.get(index), index, data.data, height);\n\t\t}\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tconst promise = model.resolve(index, cts.token);\n\t\tdata.disposable = { dispose: () => cts.cancel() };\n\n\t\tthis.renderer.renderPlaceholder(index, data.data);\n\t\tpromise.then(entry => this.renderer.renderElement(entry, index, data.data!, height));\n\t}\n\n\tdisposeTemplate(data: ITemplateData<TTemplateData>): void {\n\t\tif (data.disposable) {\n\t\t\tdata.disposable.dispose();\n\t\t\tdata.disposable = undefined;\n\t\t}\n\t\tif (data.data) {\n\t\t\tthis.renderer.disposeTemplate(data.data);\n\t\t\tdata.data = undefined;\n\t\t}\n\t}\n}\n\nclass PagedAccessibilityProvider<T> implements IListAccessibilityProvider<number> {\n\n\tconstructor(\n\t\tprivate modelProvider: () => IPagedModel<T>,\n\t\tprivate accessibilityProvider: IListAccessibilityProvider<T>\n\t) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn this.accessibilityProvider.getWidgetAriaLabel();\n\t}\n\n\tgetAriaLabel(index: number) {\n\t\tconst model = this.modelProvider();\n\n\t\tif (!model.isResolved(index)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.accessibilityProvider.getAriaLabel(model.get(index));\n\t}\n}\n\nexport interface IPagedListOptions<T> {\n\treadonly typeNavigationEnabled?: boolean;\n\treadonly typeNavigationMode?: TypeNavigationMode;\n\treadonly ariaLabel?: string;\n\treadonly keyboardSupport?: boolean;\n\treadonly multipleSelectionSupport?: boolean;\n\treadonly accessibilityProvider?: IListAccessibilityProvider<T>;\n\n\t// list view options\n\treadonly useShadows?: boolean;\n\treadonly verticalScrollMode?: ScrollbarVisibility;\n\treadonly setRowLineHeight?: boolean;\n\treadonly setRowHeight?: boolean;\n\treadonly supportDynamicHeights?: boolean;\n\treadonly mouseSupport?: boolean;\n\treadonly horizontalScrolling?: boolean;\n\treadonly scrollByPage?: boolean;\n\treadonly paddingBottom?: number;\n}\n\nfunction fromPagedListOptions<T>(modelProvider: () => IPagedModel<T>, options: IPagedListOptions<T>): IListOptions<number> {\n\treturn {\n\t\t...options,\n\t\taccessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider)\n\t};\n}\n\nexport class PagedList<T> implements IDisposable {\n\n\tprivate list: List<number>;\n\tprivate _model!: IPagedModel<T>;\n\n\tconstructor(\n\t\tuser: string,\n\t\tcontainer: HTMLElement,\n\t\tvirtualDelegate: IListVirtualDelegate<number>,\n\t\trenderers: IPagedRenderer<T, any>[],\n\t\toptions: IPagedListOptions<T> = {}\n\t) {\n\t\tconst modelProvider = () => this.model;\n\t\tconst pagedRenderers = renderers.map(r => new PagedRenderer<T, ITemplateData<T>>(r, modelProvider));\n\t\tthis.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n\t}\n\n\tupdateOptions(options: IListOptionsUpdate) {\n\t\tthis.list.updateOptions(options);\n\t}\n\n\tgetHTMLElement(): HTMLElement {\n\t\treturn this.list.getHTMLElement();\n\t}\n\n\tisDOMFocused(): boolean {\n\t\treturn isActiveElement(this.getHTMLElement());\n\t}\n\n\tdomFocus(): void {\n\t\tthis.list.domFocus();\n\t}\n\n\tget onDidFocus(): Event<void> {\n\t\treturn this.list.onDidFocus;\n\t}\n\n\tget onDidBlur(): Event<void> {\n\t\treturn this.list.onDidBlur;\n\t}\n\n\tget widget(): List<number> {\n\t\treturn this.list;\n\t}\n\n\tget onDidDispose(): Event<void> {\n\t\treturn this.list.onDidDispose;\n\t}\n\n\tget onMouseClick(): Event<IListMouseEvent<T>> {\n\t\treturn Event.map(this.list.onMouseClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n\t}\n\n\tget onMouseDblClick(): Event<IListMouseEvent<T>> {\n\t\treturn Event.map(this.list.onMouseDblClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n\t}\n\n\tget onTap(): Event<IListMouseEvent<T>> {\n\t\treturn Event.map(this.list.onTap, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n\t}\n\n\tget onPointer(): Event<IListMouseEvent<T>> {\n\t\treturn Event.map(this.list.onPointer, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n\t}\n\n\tget onDidChangeFocus(): Event<IListEvent<T>> {\n\t\treturn Event.map(this.list.onDidChangeFocus, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n\t}\n\n\tget onDidChangeSelection(): Event<IListEvent<T>> {\n\t\treturn Event.map(this.list.onDidChangeSelection, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n\t}\n\n\tget onContextMenu(): Event<IListContextMenuEvent<T>> {\n\t\treturn Event.map(this.list.onContextMenu, ({ element, index, anchor, browserEvent }) => (typeof element === 'undefined' ? { element, index, anchor, browserEvent } : { element: this._model.get(element), index, anchor, browserEvent }));\n\t}\n\n\tget model(): IPagedModel<T> {\n\t\treturn this._model;\n\t}\n\n\tset model(model: IPagedModel<T>) {\n\t\tthis._model = model;\n\t\tthis.list.splice(0, this.list.length, range(model.length));\n\t}\n\n\tget length(): number {\n\t\treturn this.list.length;\n\t}\n\n\tget scrollTop(): number {\n\t\treturn this.list.scrollTop;\n\t}\n\n\tset scrollTop(scrollTop: number) {\n\t\tthis.list.scrollTop = scrollTop;\n\t}\n\n\tget scrollLeft(): number {\n\t\treturn this.list.scrollLeft;\n\t}\n\n\tset scrollLeft(scrollLeft: number) {\n\t\tthis.list.scrollLeft = scrollLeft;\n\t}\n\n\tsetAnchor(index: number | undefined): void {\n\t\tthis.list.setAnchor(index);\n\t}\n\n\tgetAnchor(): number | undefined {\n\t\treturn this.list.getAnchor();\n\t}\n\n\tsetFocus(indexes: number[]): void {\n\t\tthis.list.setFocus(indexes);\n\t}\n\n\tfocusNext(n?: number, loop?: boolean): void {\n\t\tthis.list.focusNext(n, loop);\n\t}\n\n\tfocusPrevious(n?: number, loop?: boolean): void {\n\t\tthis.list.focusPrevious(n, loop);\n\t}\n\n\tfocusNextPage(): Promise<void> {\n\t\treturn this.list.focusNextPage();\n\t}\n\n\tfocusPreviousPage(): Promise<void> {\n\t\treturn this.list.focusPreviousPage();\n\t}\n\n\tfocusLast(): void {\n\t\tthis.list.focusLast();\n\t}\n\n\tfocusFirst(): void {\n\t\tthis.list.focusFirst();\n\t}\n\n\tgetFocus(): number[] {\n\t\treturn this.list.getFocus();\n\t}\n\n\tsetSelection(indexes: number[], browserEvent?: UIEvent): void {\n\t\tthis.list.setSelection(indexes, browserEvent);\n\t}\n\n\tgetSelection(): number[] {\n\t\treturn this.list.getSelection();\n\t}\n\n\tgetSelectedElements(): T[] {\n\t\treturn this.getSelection().map(i => this.model.get(i));\n\t}\n\n\tlayout(height?: number, width?: number): void {\n\t\tthis.list.layout(height, width);\n\t}\n\n\ttriggerTypeNavigation(): void {\n\t\tthis.list.triggerTypeNavigation();\n\t}\n\n\treveal(index: number, relativeTop?: number): void {\n\t\tthis.list.reveal(index, relativeTop);\n\t}\n\n\tstyle(styles: IListStyles): void {\n\t\tthis.list.style(styles);\n\t}\n\n\tdispose(): void {\n\t\tthis.list.dispose();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
