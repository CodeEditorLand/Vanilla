{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/selectBox/selectBoxNative.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as arrays from \"../../../common/arrays.js\";\nimport { Emitter, type Event } from \"../../../common/event.js\";\nimport { KeyCode } from \"../../../common/keyCodes.js\";\nimport { Disposable } from \"../../../common/lifecycle.js\";\nimport { isMacintosh } from \"../../../common/platform.js\";\nimport * as dom from \"../../dom.js\";\nimport { EventType, Gesture } from \"../../touch.js\";\nimport type {\n\tISelectBoxDelegate,\n\tISelectBoxOptions,\n\tISelectBoxStyles,\n\tISelectData,\n\tISelectOptionItem,\n} from \"./selectBox.js\";\n\nexport class SelectBoxNative extends Disposable implements ISelectBoxDelegate {\n\tprivate selectElement: HTMLSelectElement;\n\tprivate selectBoxOptions: ISelectBoxOptions;\n\tprivate options: ISelectOptionItem[];\n\tprivate selected = 0;\n\tprivate readonly _onDidSelect: Emitter<ISelectData>;\n\tprivate styles: ISelectBoxStyles;\n\n\tconstructor(\n\t\toptions: ISelectOptionItem[],\n\t\tselected: number,\n\t\tstyles: ISelectBoxStyles,\n\t\tselectBoxOptions?: ISelectBoxOptions,\n\t) {\n\t\tsuper();\n\t\tthis.selectBoxOptions = selectBoxOptions || Object.create(null);\n\n\t\tthis.options = [];\n\n\t\tthis.selectElement = document.createElement(\"select\");\n\n\t\tthis.selectElement.className = \"monaco-select-box\";\n\n\t\tif (typeof this.selectBoxOptions.ariaLabel === \"string\") {\n\t\t\tthis.selectElement.setAttribute(\n\t\t\t\t\"aria-label\",\n\t\t\t\tthis.selectBoxOptions.ariaLabel,\n\t\t\t);\n\t\t}\n\n\t\tif (typeof this.selectBoxOptions.ariaDescription === \"string\") {\n\t\t\tthis.selectElement.setAttribute(\n\t\t\t\t\"aria-description\",\n\t\t\t\tthis.selectBoxOptions.ariaDescription,\n\t\t\t);\n\t\t}\n\n\t\tthis._onDidSelect = this._register(new Emitter<ISelectData>());\n\n\t\tthis.styles = styles;\n\n\t\tthis.registerListeners();\n\t\tthis.setOptions(options, selected);\n\t}\n\n\tprivate registerListeners() {\n\t\tthis._register(Gesture.addTarget(this.selectElement));\n\t\t[EventType.Tap].forEach((eventType) => {\n\t\t\tthis._register(\n\t\t\t\tdom.addDisposableListener(\n\t\t\t\t\tthis.selectElement,\n\t\t\t\t\teventType,\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tthis.selectElement.focus();\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t});\n\n\t\tthis._register(\n\t\t\tdom.addStandardDisposableListener(\n\t\t\t\tthis.selectElement,\n\t\t\t\t\"click\",\n\t\t\t\t(e) => {\n\t\t\t\t\tdom.EventHelper.stop(e, true);\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tdom.addStandardDisposableListener(\n\t\t\t\tthis.selectElement,\n\t\t\t\t\"change\",\n\t\t\t\t(e) => {\n\t\t\t\t\tthis.selectElement.title = e.target.value;\n\t\t\t\t\tthis._onDidSelect.fire({\n\t\t\t\t\t\tindex: e.target.selectedIndex,\n\t\t\t\t\t\tselected: e.target.value,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tdom.addStandardDisposableListener(\n\t\t\t\tthis.selectElement,\n\t\t\t\t\"keydown\",\n\t\t\t\t(e) => {\n\t\t\t\t\tlet showSelect = false;\n\n\t\t\t\t\tif (isMacintosh) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te.keyCode === KeyCode.DownArrow ||\n\t\t\t\t\t\t\te.keyCode === KeyCode.UpArrow ||\n\t\t\t\t\t\t\te.keyCode === KeyCode.Space\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tshowSelect = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t(e.keyCode === KeyCode.DownArrow && e.altKey) ||\n\t\t\t\t\t\te.keyCode === KeyCode.Space ||\n\t\t\t\t\t\te.keyCode === KeyCode.Enter\n\t\t\t\t\t) {\n\t\t\t\t\t\tshowSelect = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (showSelect) {\n\t\t\t\t\t\t// Space, Enter, is used to expand select box, do not propagate it (prevent action bar action run)\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t}\n\n\tpublic get onDidSelect(): Event<ISelectData> {\n\t\treturn this._onDidSelect.event;\n\t}\n\n\tpublic setOptions(options: ISelectOptionItem[], selected?: number): void {\n\t\tif (!this.options || !arrays.equals(this.options, options)) {\n\t\t\tthis.options = options;\n\t\t\tthis.selectElement.options.length = 0;\n\n\t\t\tthis.options.forEach((option, index) => {\n\t\t\t\tthis.selectElement.add(\n\t\t\t\t\tthis.createOption(option.text, index, option.isDisabled),\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\tif (selected !== undefined) {\n\t\t\tthis.select(selected);\n\t\t}\n\t}\n\n\tpublic select(index: number): void {\n\t\tif (this.options.length === 0) {\n\t\t\tthis.selected = 0;\n\t\t} else if (index >= 0 && index < this.options.length) {\n\t\t\tthis.selected = index;\n\t\t} else if (index > this.options.length - 1) {\n\t\t\t// Adjust index to end of list\n\t\t\t// This could make client out of sync with the select\n\t\t\tthis.select(this.options.length - 1);\n\t\t} else if (this.selected < 0) {\n\t\t\tthis.selected = 0;\n\t\t}\n\n\t\tthis.selectElement.selectedIndex = this.selected;\n\t\tif (\n\t\t\tthis.selected < this.options.length &&\n\t\t\ttypeof this.options[this.selected].text === \"string\"\n\t\t) {\n\t\t\tthis.selectElement.title = this.options[this.selected].text;\n\t\t} else {\n\t\t\tthis.selectElement.title = \"\";\n\t\t}\n\t}\n\n\tpublic setAriaLabel(label: string): void {\n\t\tthis.selectBoxOptions.ariaLabel = label;\n\t\tthis.selectElement.setAttribute(\"aria-label\", label);\n\t}\n\n\tpublic focus(): void {\n\t\tif (this.selectElement) {\n\t\t\tthis.selectElement.tabIndex = 0;\n\t\t\tthis.selectElement.focus();\n\t\t}\n\t}\n\n\tpublic blur(): void {\n\t\tif (this.selectElement) {\n\t\t\tthis.selectElement.tabIndex = -1;\n\t\t\tthis.selectElement.blur();\n\t\t}\n\t}\n\n\tpublic setEnabled(enable: boolean): void {\n\t\tthis.selectElement.disabled = !enable;\n\t}\n\n\tpublic setFocusable(focusable: boolean): void {\n\t\tthis.selectElement.tabIndex = focusable ? 0 : -1;\n\t}\n\n\tpublic render(container: HTMLElement): void {\n\t\tcontainer.classList.add(\"select-container\");\n\t\tcontainer.appendChild(this.selectElement);\n\t\tthis.setOptions(this.options, this.selected);\n\t\tthis.applyStyles();\n\t}\n\n\tpublic style(styles: ISelectBoxStyles): void {\n\t\tthis.styles = styles;\n\t\tthis.applyStyles();\n\t}\n\n\tpublic applyStyles(): void {\n\t\t// Style native select\n\t\tif (this.selectElement) {\n\t\t\tthis.selectElement.style.backgroundColor =\n\t\t\t\tthis.styles.selectBackground ?? \"\";\n\t\t\tthis.selectElement.style.color = this.styles.selectForeground ?? \"\";\n\t\t\tthis.selectElement.style.borderColor =\n\t\t\t\tthis.styles.selectBorder ?? \"\";\n\t\t}\n\t}\n\n\tprivate createOption(\n\t\tvalue: string,\n\t\tindex: number,\n\t\tdisabled?: boolean,\n\t): HTMLOptionElement {\n\t\tconst option = document.createElement(\"option\");\n\t\toption.value = value;\n\t\toption.text = value;\n\t\toption.disabled = !!disabled;\n\n\t\treturn option;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
