{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/toolbar/toolbar.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IContextMenuProvider } from '../../contextmenu.js';\nimport { ActionBar, ActionsOrientation, IActionViewItemProvider } from '../actionbar/actionbar.js';\nimport { AnchorAlignment } from '../contextview/contextview.js';\nimport { DropdownMenuActionViewItem } from '../dropdown/dropdownActionViewItem.js';\nimport { Action, IAction, IActionRunner, SubmenuAction } from '../../../common/actions.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { EventMultiplexer } from '../../../common/event.js';\nimport { ResolvedKeybinding } from '../../../common/keybindings.js';\nimport { Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport './toolbar.css';\nimport * as nls from '../../../../nls.js';\nimport { IHoverDelegate } from '../hover/hoverDelegate.js';\nimport { createInstantHoverDelegate } from '../hover/hoverDelegateFactory.js';\n\n\n\nexport interface IToolBarOptions {\n\torientation?: ActionsOrientation;\n\tactionViewItemProvider?: IActionViewItemProvider;\n\tariaLabel?: string;\n\tgetKeyBinding?: (action: IAction) => ResolvedKeybinding | undefined;\n\tactionRunner?: IActionRunner;\n\ttoggleMenuTitle?: string;\n\tanchorAlignmentProvider?: () => AnchorAlignment;\n\trenderDropdownAsChildElement?: boolean;\n\tmoreIcon?: ThemeIcon;\n\tallowContextMenu?: boolean;\n\tskipTelemetry?: boolean;\n\thoverDelegate?: IHoverDelegate;\n\n\t/**\n\t * If true, toggled primary items are highlighted with a background color.\n\t */\n\thighlightToggledItems?: boolean;\n\n\t/**\n\t * Render action with icons (default: `true`)\n\t */\n\ticon?: boolean;\n\n\t/**\n\t * Render action with label (default: `false`)\n\t */\n\tlabel?: boolean;\n}\n\n/**\n * A widget that combines an action bar for primary actions and a dropdown for secondary actions.\n */\nexport class ToolBar extends Disposable {\n\tprivate options: IToolBarOptions;\n\tprotected readonly actionBar: ActionBar;\n\tprivate toggleMenuAction: ToggleMenuAction;\n\tprivate toggleMenuActionViewItem: DropdownMenuActionViewItem | undefined;\n\tprivate submenuActionViewItems: DropdownMenuActionViewItem[] = [];\n\tprivate hasSecondaryActions: boolean = false;\n\tprivate readonly element: HTMLElement;\n\n\tprivate _onDidChangeDropdownVisibility = this._register(new EventMultiplexer<boolean>());\n\treadonly onDidChangeDropdownVisibility = this._onDidChangeDropdownVisibility.event;\n\tprivate readonly disposables = this._register(new DisposableStore());\n\n\tconstructor(container: HTMLElement, contextMenuProvider: IContextMenuProvider, options: IToolBarOptions = { orientation: ActionsOrientation.HORIZONTAL }) {\n\t\tsuper();\n\n\t\toptions.hoverDelegate = options.hoverDelegate ?? this._register(createInstantHoverDelegate());\n\t\tthis.options = options;\n\n\t\tthis.toggleMenuAction = this._register(new ToggleMenuAction(() => this.toggleMenuActionViewItem?.show(), options.toggleMenuTitle));\n\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = 'monaco-toolbar';\n\t\tcontainer.appendChild(this.element);\n\n\t\tthis.actionBar = this._register(new ActionBar(this.element, {\n\t\t\torientation: options.orientation,\n\t\t\tariaLabel: options.ariaLabel,\n\t\t\tactionRunner: options.actionRunner,\n\t\t\tallowContextMenu: options.allowContextMenu,\n\t\t\thighlightToggledItems: options.highlightToggledItems,\n\t\t\thoverDelegate: options.hoverDelegate,\n\t\t\tactionViewItemProvider: (action, viewItemOptions) => {\n\t\t\t\tif (action.id === ToggleMenuAction.ID) {\n\t\t\t\t\tthis.toggleMenuActionViewItem = new DropdownMenuActionViewItem(\n\t\t\t\t\t\taction,\n\t\t\t\t\t\t(<ToggleMenuAction>action).menuActions,\n\t\t\t\t\t\tcontextMenuProvider,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactionViewItemProvider: this.options.actionViewItemProvider,\n\t\t\t\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\t\t\t\tkeybindingProvider: this.options.getKeyBinding,\n\t\t\t\t\t\t\tclassNames: ThemeIcon.asClassNameArray(options.moreIcon ?? Codicon.toolBarMore),\n\t\t\t\t\t\t\tanchorAlignmentProvider: this.options.anchorAlignmentProvider,\n\t\t\t\t\t\t\tmenuAsChild: !!this.options.renderDropdownAsChildElement,\n\t\t\t\t\t\t\tskipTelemetry: this.options.skipTelemetry,\n\t\t\t\t\t\t\tisMenu: true,\n\t\t\t\t\t\t\thoverDelegate: this.options.hoverDelegate\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tthis.toggleMenuActionViewItem.setActionContext(this.actionBar.context);\n\t\t\t\t\tthis.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility));\n\n\t\t\t\t\treturn this.toggleMenuActionViewItem;\n\t\t\t\t}\n\n\t\t\t\tif (options.actionViewItemProvider) {\n\t\t\t\t\tconst result = options.actionViewItemProvider(action, viewItemOptions);\n\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (action instanceof SubmenuAction) {\n\t\t\t\t\tconst result = new DropdownMenuActionViewItem(\n\t\t\t\t\t\taction,\n\t\t\t\t\t\taction.actions,\n\t\t\t\t\t\tcontextMenuProvider,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactionViewItemProvider: this.options.actionViewItemProvider,\n\t\t\t\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\t\t\t\tkeybindingProvider: this.options.getKeyBinding,\n\t\t\t\t\t\t\tclassNames: action.class,\n\t\t\t\t\t\t\tanchorAlignmentProvider: this.options.anchorAlignmentProvider,\n\t\t\t\t\t\t\tmenuAsChild: !!this.options.renderDropdownAsChildElement,\n\t\t\t\t\t\t\tskipTelemetry: this.options.skipTelemetry,\n\t\t\t\t\t\t\thoverDelegate: this.options.hoverDelegate\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tresult.setActionContext(this.actionBar.context);\n\t\t\t\t\tthis.submenuActionViewItems.push(result);\n\t\t\t\t\tthis.disposables.add(this._onDidChangeDropdownVisibility.add(result.onDidChangeVisibility));\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\t}\n\n\tset actionRunner(actionRunner: IActionRunner) {\n\t\tthis.actionBar.actionRunner = actionRunner;\n\t}\n\n\tget actionRunner(): IActionRunner {\n\t\treturn this.actionBar.actionRunner;\n\t}\n\n\tset context(context: unknown) {\n\t\tthis.actionBar.context = context;\n\t\tthis.toggleMenuActionViewItem?.setActionContext(context);\n\t\tfor (const actionViewItem of this.submenuActionViewItems) {\n\t\t\tactionViewItem.setActionContext(context);\n\t\t}\n\t}\n\n\tgetElement(): HTMLElement {\n\t\treturn this.element;\n\t}\n\n\tfocus(): void {\n\t\tthis.actionBar.focus();\n\t}\n\n\tgetItemsWidth(): number {\n\t\tlet itemsWidth = 0;\n\t\tfor (let i = 0; i < this.actionBar.length(); i++) {\n\t\t\titemsWidth += this.actionBar.getWidth(i);\n\t\t}\n\t\treturn itemsWidth;\n\t}\n\n\tgetItemAction(indexOrElement: number | HTMLElement) {\n\t\treturn this.actionBar.getAction(indexOrElement);\n\t}\n\n\tgetItemWidth(index: number): number {\n\t\treturn this.actionBar.getWidth(index);\n\t}\n\n\tgetItemsLength(): number {\n\t\treturn this.actionBar.length();\n\t}\n\n\tsetAriaLabel(label: string): void {\n\t\tthis.actionBar.setAriaLabel(label);\n\t}\n\n\tsetActions(primaryActions: ReadonlyArray<IAction>, secondaryActions?: ReadonlyArray<IAction>): void {\n\t\tthis.clear();\n\n\t\tconst primaryActionsToSet = primaryActions ? primaryActions.slice(0) : [];\n\n\t\t// Inject additional action to open secondary actions if present\n\t\tthis.hasSecondaryActions = !!(secondaryActions && secondaryActions.length > 0);\n\t\tif (this.hasSecondaryActions && secondaryActions) {\n\t\t\tthis.toggleMenuAction.menuActions = secondaryActions.slice(0);\n\t\t\tprimaryActionsToSet.push(this.toggleMenuAction);\n\t\t}\n\n\t\tprimaryActionsToSet.forEach(action => {\n\t\t\tthis.actionBar.push(action, { icon: this.options.icon ?? true, label: this.options.label ?? false, keybinding: this.getKeybindingLabel(action) });\n\t\t});\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this.actionBar.isEmpty();\n\t}\n\n\tprivate getKeybindingLabel(action: IAction): string | undefined {\n\t\tconst key = this.options.getKeyBinding?.(action);\n\n\t\treturn key?.getLabel() ?? undefined;\n\t}\n\n\tprivate clear(): void {\n\t\tthis.submenuActionViewItems = [];\n\t\tthis.disposables.clear();\n\t\tthis.actionBar.clear();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.clear();\n\t\tthis.disposables.dispose();\n\t\tsuper.dispose();\n\t}\n}\n\nexport class ToggleMenuAction extends Action {\n\n\tstatic readonly ID = 'toolbar.toggle.more';\n\n\tprivate _menuActions: ReadonlyArray<IAction>;\n\tprivate toggleDropdownMenu: () => void;\n\n\tconstructor(toggleDropdownMenu: () => void, title?: string) {\n\t\ttitle = title || nls.localize('moreActions', \"More Actions...\");\n\t\tsuper(ToggleMenuAction.ID, title, undefined, true);\n\n\t\tthis._menuActions = [];\n\t\tthis.toggleDropdownMenu = toggleDropdownMenu;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tthis.toggleDropdownMenu();\n\t}\n\n\tget menuActions(): ReadonlyArray<IAction> {\n\t\treturn this._menuActions;\n\t}\n\n\tset menuActions(actions: ReadonlyArray<IAction>) {\n\t\tthis._menuActions = actions;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
