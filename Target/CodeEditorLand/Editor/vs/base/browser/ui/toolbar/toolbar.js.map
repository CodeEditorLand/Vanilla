{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/base/browser/ui/toolbar/toolbar.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\tAction,\n\ttype IAction,\n\ttype IActionRunner,\n\tSubmenuAction,\n} from \"../../../common/actions.js\";\nimport { Codicon } from \"../../../common/codicons.js\";\nimport { EventMultiplexer } from \"../../../common/event.js\";\nimport type { ResolvedKeybinding } from \"../../../common/keybindings.js\";\nimport { Disposable, DisposableStore } from \"../../../common/lifecycle.js\";\nimport { ThemeIcon } from \"../../../common/themables.js\";\nimport type { IContextMenuProvider } from \"../../contextmenu.js\";\nimport {\n\tActionBar,\n\tActionsOrientation,\n\ttype IActionViewItemProvider,\n} from \"../actionbar/actionbar.js\";\nimport type { AnchorAlignment } from \"../contextview/contextview.js\";\nimport { DropdownMenuActionViewItem } from \"../dropdown/dropdownActionViewItem.js\";\nimport \"./toolbar.css\";\nimport * as nls from \"../../../../nls.js\";\nimport type { IHoverDelegate } from \"../hover/hoverDelegate.js\";\nimport { createInstantHoverDelegate } from \"../hover/hoverDelegateFactory.js\";\n\nexport interface IToolBarOptions {\n\torientation?: ActionsOrientation;\n\tactionViewItemProvider?: IActionViewItemProvider;\n\tariaLabel?: string;\n\tgetKeyBinding?: (action: IAction) => ResolvedKeybinding | undefined;\n\tactionRunner?: IActionRunner;\n\ttoggleMenuTitle?: string;\n\tanchorAlignmentProvider?: () => AnchorAlignment;\n\trenderDropdownAsChildElement?: boolean;\n\tmoreIcon?: ThemeIcon;\n\tallowContextMenu?: boolean;\n\tskipTelemetry?: boolean;\n\thoverDelegate?: IHoverDelegate;\n\n\t/**\n\t * If true, toggled primary items are highlighted with a background color.\n\t */\n\thighlightToggledItems?: boolean;\n\n\t/**\n\t * Render action with icons (default: `true`)\n\t */\n\ticon?: boolean;\n\n\t/**\n\t * Render action with label (default: `false`)\n\t */\n\tlabel?: boolean;\n}\n\n/**\n * A widget that combines an action bar for primary actions and a dropdown for secondary actions.\n */\nexport class ToolBar extends Disposable {\n\tprivate options: IToolBarOptions;\n\tprotected readonly actionBar: ActionBar;\n\tprivate toggleMenuAction: ToggleMenuAction;\n\tprivate toggleMenuActionViewItem: DropdownMenuActionViewItem | undefined;\n\tprivate submenuActionViewItems: DropdownMenuActionViewItem[] = [];\n\tprivate hasSecondaryActions = false;\n\tprivate readonly element: HTMLElement;\n\n\tprivate _onDidChangeDropdownVisibility = this._register(\n\t\tnew EventMultiplexer<boolean>(),\n\t);\n\treadonly onDidChangeDropdownVisibility =\n\t\tthis._onDidChangeDropdownVisibility.event;\n\tprivate readonly disposables = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tcontextMenuProvider: IContextMenuProvider,\n\t\toptions: IToolBarOptions = {\n\t\t\torientation: ActionsOrientation.HORIZONTAL,\n\t\t},\n\t) {\n\t\tsuper();\n\n\t\toptions.hoverDelegate =\n\t\t\toptions.hoverDelegate ??\n\t\t\tthis._register(createInstantHoverDelegate());\n\t\tthis.options = options;\n\n\t\tthis.toggleMenuAction = this._register(\n\t\t\tnew ToggleMenuAction(\n\t\t\t\t() => this.toggleMenuActionViewItem?.show(),\n\t\t\t\toptions.toggleMenuTitle,\n\t\t\t),\n\t\t);\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.className = \"monaco-toolbar\";\n\t\tcontainer.appendChild(this.element);\n\n\t\tthis.actionBar = this._register(\n\t\t\tnew ActionBar(this.element, {\n\t\t\t\torientation: options.orientation,\n\t\t\t\tariaLabel: options.ariaLabel,\n\t\t\t\tactionRunner: options.actionRunner,\n\t\t\t\tallowContextMenu: options.allowContextMenu,\n\t\t\t\thighlightToggledItems: options.highlightToggledItems,\n\t\t\t\thoverDelegate: options.hoverDelegate,\n\t\t\t\tactionViewItemProvider: (action, viewItemOptions) => {\n\t\t\t\t\tif (action.id === ToggleMenuAction.ID) {\n\t\t\t\t\t\tthis.toggleMenuActionViewItem =\n\t\t\t\t\t\t\tnew DropdownMenuActionViewItem(\n\t\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\t\t(<ToggleMenuAction>action).menuActions,\n\t\t\t\t\t\t\t\tcontextMenuProvider,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tactionViewItemProvider:\n\t\t\t\t\t\t\t\t\t\tthis.options.actionViewItemProvider,\n\t\t\t\t\t\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\t\t\t\t\t\tkeybindingProvider:\n\t\t\t\t\t\t\t\t\t\tthis.options.getKeyBinding,\n\t\t\t\t\t\t\t\t\tclassNames: ThemeIcon.asClassNameArray(\n\t\t\t\t\t\t\t\t\t\toptions.moreIcon ?? Codicon.toolBarMore,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tanchorAlignmentProvider:\n\t\t\t\t\t\t\t\t\t\tthis.options.anchorAlignmentProvider,\n\t\t\t\t\t\t\t\t\tmenuAsChild:\n\t\t\t\t\t\t\t\t\t\t!!this.options\n\t\t\t\t\t\t\t\t\t\t\t.renderDropdownAsChildElement,\n\t\t\t\t\t\t\t\t\tskipTelemetry: this.options.skipTelemetry,\n\t\t\t\t\t\t\t\t\tisMenu: true,\n\t\t\t\t\t\t\t\t\thoverDelegate: this.options.hoverDelegate,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.toggleMenuActionViewItem.setActionContext(\n\t\t\t\t\t\t\tthis.actionBar.context,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.disposables.add(\n\t\t\t\t\t\t\tthis._onDidChangeDropdownVisibility.add(\n\t\t\t\t\t\t\t\tthis.toggleMenuActionViewItem\n\t\t\t\t\t\t\t\t\t.onDidChangeVisibility,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn this.toggleMenuActionViewItem;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (options.actionViewItemProvider) {\n\t\t\t\t\t\tconst result = options.actionViewItemProvider(\n\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\tviewItemOptions,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (action instanceof SubmenuAction) {\n\t\t\t\t\t\tconst result = new DropdownMenuActionViewItem(\n\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\taction.actions,\n\t\t\t\t\t\t\tcontextMenuProvider,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tactionViewItemProvider:\n\t\t\t\t\t\t\t\t\tthis.options.actionViewItemProvider,\n\t\t\t\t\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\t\t\t\t\tkeybindingProvider: this.options.getKeyBinding,\n\t\t\t\t\t\t\t\tclassNames: action.class,\n\t\t\t\t\t\t\t\tanchorAlignmentProvider:\n\t\t\t\t\t\t\t\t\tthis.options.anchorAlignmentProvider,\n\t\t\t\t\t\t\t\tmenuAsChild:\n\t\t\t\t\t\t\t\t\t!!this.options.renderDropdownAsChildElement,\n\t\t\t\t\t\t\t\tskipTelemetry: this.options.skipTelemetry,\n\t\t\t\t\t\t\t\thoverDelegate: this.options.hoverDelegate,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresult.setActionContext(this.actionBar.context);\n\t\t\t\t\t\tthis.submenuActionViewItems.push(result);\n\t\t\t\t\t\tthis.disposables.add(\n\t\t\t\t\t\t\tthis._onDidChangeDropdownVisibility.add(\n\t\t\t\t\t\t\t\tresult.onDidChangeVisibility,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn undefined;\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\t}\n\n\tset actionRunner(actionRunner: IActionRunner) {\n\t\tthis.actionBar.actionRunner = actionRunner;\n\t}\n\n\tget actionRunner(): IActionRunner {\n\t\treturn this.actionBar.actionRunner;\n\t}\n\n\tset context(context: unknown) {\n\t\tthis.actionBar.context = context;\n\t\tthis.toggleMenuActionViewItem?.setActionContext(context);\n\t\tfor (const actionViewItem of this.submenuActionViewItems) {\n\t\t\tactionViewItem.setActionContext(context);\n\t\t}\n\t}\n\n\tgetElement(): HTMLElement {\n\t\treturn this.element;\n\t}\n\n\tfocus(): void {\n\t\tthis.actionBar.focus();\n\t}\n\n\tgetItemsWidth(): number {\n\t\tlet itemsWidth = 0;\n\t\tfor (let i = 0; i < this.actionBar.length(); i++) {\n\t\t\titemsWidth += this.actionBar.getWidth(i);\n\t\t}\n\t\treturn itemsWidth;\n\t}\n\n\tgetItemAction(indexOrElement: number | HTMLElement) {\n\t\treturn this.actionBar.getAction(indexOrElement);\n\t}\n\n\tgetItemWidth(index: number): number {\n\t\treturn this.actionBar.getWidth(index);\n\t}\n\n\tgetItemsLength(): number {\n\t\treturn this.actionBar.length();\n\t}\n\n\tsetAriaLabel(label: string): void {\n\t\tthis.actionBar.setAriaLabel(label);\n\t}\n\n\tsetActions(\n\t\tprimaryActions: ReadonlyArray<IAction>,\n\t\tsecondaryActions?: ReadonlyArray<IAction>,\n\t): void {\n\t\tthis.clear();\n\n\t\tconst primaryActionsToSet = primaryActions\n\t\t\t? primaryActions.slice(0)\n\t\t\t: [];\n\n\t\t// Inject additional action to open secondary actions if present\n\t\tthis.hasSecondaryActions = !!(\n\t\t\tsecondaryActions && secondaryActions.length > 0\n\t\t);\n\t\tif (this.hasSecondaryActions && secondaryActions) {\n\t\t\tthis.toggleMenuAction.menuActions = secondaryActions.slice(0);\n\t\t\tprimaryActionsToSet.push(this.toggleMenuAction);\n\t\t}\n\n\t\tprimaryActionsToSet.forEach((action) => {\n\t\t\tthis.actionBar.push(action, {\n\t\t\t\ticon: this.options.icon ?? true,\n\t\t\t\tlabel: this.options.label ?? false,\n\t\t\t\tkeybinding: this.getKeybindingLabel(action),\n\t\t\t});\n\t\t});\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this.actionBar.isEmpty();\n\t}\n\n\tprivate getKeybindingLabel(action: IAction): string | undefined {\n\t\tconst key = this.options.getKeyBinding?.(action);\n\n\t\treturn key?.getLabel() ?? undefined;\n\t}\n\n\tprivate clear(): void {\n\t\tthis.submenuActionViewItems = [];\n\t\tthis.disposables.clear();\n\t\tthis.actionBar.clear();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.clear();\n\t\tthis.disposables.dispose();\n\t\tsuper.dispose();\n\t}\n}\n\nexport class ToggleMenuAction extends Action {\n\tstatic readonly ID = \"toolbar.toggle.more\";\n\n\tprivate _menuActions: ReadonlyArray<IAction>;\n\tprivate toggleDropdownMenu: () => void;\n\n\tconstructor(toggleDropdownMenu: () => void, title?: string) {\n\t\ttitle = title || nls.localize(\"moreActions\", \"More Actions...\");\n\t\tsuper(ToggleMenuAction.ID, title, undefined, true);\n\n\t\tthis._menuActions = [];\n\t\tthis.toggleDropdownMenu = toggleDropdownMenu;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tthis.toggleDropdownMenu();\n\t}\n\n\tget menuActions(): ReadonlyArray<IAction> {\n\t\treturn this._menuActions;\n\t}\n\n\tset menuActions(actions: ReadonlyArray<IAction>) {\n\t\tthis._menuActions = actions;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
