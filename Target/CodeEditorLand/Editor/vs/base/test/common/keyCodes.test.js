import r from"assert";import{EVENT_KEY_CODE_MAP as S,IMMUTABLE_CODE_TO_KEY_CODE as c,IMMUTABLE_KEY_CODE_TO_CODE as g,KeyChord as E,KeyCode as e,KeyCodeUtils as s,KeyMod as t,NATIVE_WINDOWS_KEY_CODE_TO_KEY_CODE as K,ScanCode as a,ScanCodeUtils as u}from"../../common/keyCodes.js";import{decodeKeybinding as b,KeyCodeChord as n,Keybinding as o}from"../../common/keybindings.js";import{OperatingSystem as d}from"../../common/platform.js";import{ensureNoDisposablesAreLeakedInTestSuite as m}from"./utils.js";suite("keyCodes",()=>{m();function C(i,l,f){r.deepStrictEqual(b(l,f),i)}test("mapping for Minus",()=>{r.strictEqual(S[189],e.Minus),r.strictEqual(K.VK_OEM_MINUS,e.Minus),r.strictEqual(u.lowerCaseToEnum("minus"),a.Minus),r.strictEqual(u.toEnum("Minus"),a.Minus),r.strictEqual(u.toString(a.Minus),"Minus"),r.strictEqual(c[a.Minus],e.DependsOnKbLayout),r.strictEqual(g[e.Minus],a.DependsOnKbLayout),r.strictEqual(s.toString(e.Minus),"-"),r.strictEqual(s.fromString("-"),e.Minus),r.strictEqual(s.toUserSettingsUS(e.Minus),"-"),r.strictEqual(s.toUserSettingsGeneral(e.Minus),"OEM_MINUS"),r.strictEqual(s.fromUserSettings("-"),e.Minus),r.strictEqual(s.fromUserSettings("OEM_MINUS"),e.Minus),r.strictEqual(s.fromUserSettings("oem_minus"),e.Minus)}),test("mapping for Space",()=>{r.strictEqual(S[32],e.Space),r.strictEqual(K.VK_SPACE,e.Space),r.strictEqual(u.lowerCaseToEnum("space"),a.Space),r.strictEqual(u.toEnum("Space"),a.Space),r.strictEqual(u.toString(a.Space),"Space"),r.strictEqual(c[a.Space],e.Space),r.strictEqual(g[e.Space],a.Space),r.strictEqual(s.toString(e.Space),"Space"),r.strictEqual(s.fromString("Space"),e.Space),r.strictEqual(s.toUserSettingsUS(e.Space),"Space"),r.strictEqual(s.toUserSettingsGeneral(e.Space),"Space"),r.strictEqual(s.fromUserSettings("Space"),e.Space),r.strictEqual(s.fromUserSettings("space"),e.Space)}),test("MAC binary encoding",()=>{function i(l,f){C(l,f,d.Macintosh)}i(null,0),i(new n(!1,!1,!1,!1,e.Enter).toKeybinding(),e.Enter),i(new n(!0,!1,!1,!1,e.Enter).toKeybinding(),t.WinCtrl|e.Enter),i(new n(!1,!1,!0,!1,e.Enter).toKeybinding(),t.Alt|e.Enter),i(new n(!0,!1,!0,!1,e.Enter).toKeybinding(),t.Alt|t.WinCtrl|e.Enter),i(new n(!1,!0,!1,!1,e.Enter).toKeybinding(),t.Shift|e.Enter),i(new n(!0,!0,!1,!1,e.Enter).toKeybinding(),t.Shift|t.WinCtrl|e.Enter),i(new n(!1,!0,!0,!1,e.Enter).toKeybinding(),t.Shift|t.Alt|e.Enter),i(new n(!0,!0,!0,!1,e.Enter).toKeybinding(),t.Shift|t.Alt|t.WinCtrl|e.Enter),i(new n(!1,!1,!1,!0,e.Enter).toKeybinding(),t.CtrlCmd|e.Enter),i(new n(!0,!1,!1,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.WinCtrl|e.Enter),i(new n(!1,!1,!0,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Alt|e.Enter),i(new n(!0,!1,!0,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Alt|t.WinCtrl|e.Enter),i(new n(!1,!0,!1,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Shift|e.Enter),i(new n(!0,!0,!1,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Shift|t.WinCtrl|e.Enter),i(new n(!1,!0,!0,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Shift|t.Alt|e.Enter),i(new n(!0,!0,!0,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Shift|t.Alt|t.WinCtrl|e.Enter),i(new o([new n(!1,!1,!1,!1,e.Enter),new n(!1,!1,!1,!1,e.Tab)]),E(e.Enter,e.Tab)),i(new o([new n(!1,!1,!1,!0,e.KeyY),new n(!1,!1,!1,!1,e.KeyZ)]),E(t.CtrlCmd|e.KeyY,e.KeyZ))}),test("WINDOWS & LINUX binary encoding",()=>{[d.Linux,d.Windows].forEach(i=>{function l(f,y){C(f,y,i)}l(null,0),l(new n(!1,!1,!1,!1,e.Enter).toKeybinding(),e.Enter),l(new n(!1,!1,!1,!0,e.Enter).toKeybinding(),t.WinCtrl|e.Enter),l(new n(!1,!1,!0,!1,e.Enter).toKeybinding(),t.Alt|e.Enter),l(new n(!1,!1,!0,!0,e.Enter).toKeybinding(),t.Alt|t.WinCtrl|e.Enter),l(new n(!1,!0,!1,!1,e.Enter).toKeybinding(),t.Shift|e.Enter),l(new n(!1,!0,!1,!0,e.Enter).toKeybinding(),t.Shift|t.WinCtrl|e.Enter),l(new n(!1,!0,!0,!1,e.Enter).toKeybinding(),t.Shift|t.Alt|e.Enter),l(new n(!1,!0,!0,!0,e.Enter).toKeybinding(),t.Shift|t.Alt|t.WinCtrl|e.Enter),l(new n(!0,!1,!1,!1,e.Enter).toKeybinding(),t.CtrlCmd|e.Enter),l(new n(!0,!1,!1,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.WinCtrl|e.Enter),l(new n(!0,!1,!0,!1,e.Enter).toKeybinding(),t.CtrlCmd|t.Alt|e.Enter),l(new n(!0,!1,!0,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Alt|t.WinCtrl|e.Enter),l(new n(!0,!0,!1,!1,e.Enter).toKeybinding(),t.CtrlCmd|t.Shift|e.Enter),l(new n(!0,!0,!1,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Shift|t.WinCtrl|e.Enter),l(new n(!0,!0,!0,!1,e.Enter).toKeybinding(),t.CtrlCmd|t.Shift|t.Alt|e.Enter),l(new n(!0,!0,!0,!0,e.Enter).toKeybinding(),t.CtrlCmd|t.Shift|t.Alt|t.WinCtrl|e.Enter),l(new o([new n(!1,!1,!1,!1,e.Enter),new n(!1,!1,!1,!1,e.Tab)]),E(e.Enter,e.Tab)),l(new o([new n(!0,!1,!1,!1,e.KeyY),new n(!1,!1,!1,!1,e.KeyZ)]),E(t.CtrlCmd|e.KeyY,e.KeyZ))})})});
