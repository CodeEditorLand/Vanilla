{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/linkedEditing/browser/linkedEditing.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction, EditorCommand, EditorContributionInstantiation, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand, ServicesAccessor } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { IPosition, Position } from '../../../common/core/position.js';\nimport { IRange, Range } from '../../../common/core/range.js';\nimport { IEditorContribution, IEditorDecorationsCollection } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IModelDeltaDecoration, ITextModel, TrackedRangeStickiness } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { LinkedEditingRangeProvider, LinkedEditingRanges } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { LanguageFeatureRegistry } from '../../../common/languageFeatureRegistry.js';\nimport { ISingleEditOperation } from '../../../common/core/editOperation.js';\nimport { IFeatureDebounceInformation, ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport './linkedEditing.css';\n\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey<boolean>('LinkedEditingInputVisible', false);\n\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\n\nexport class LinkedEditingContribution extends Disposable implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.linkedEditing';\n\n\tprivate static readonly DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'linked-editing',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tclassName: DECORATION_CLASS_NAME\n\t});\n\n\tstatic get(editor: ICodeEditor): LinkedEditingContribution | null {\n\t\treturn editor.getContribution<LinkedEditingContribution>(LinkedEditingContribution.ID);\n\t}\n\n\tprivate _debounceDuration: number | undefined;\n\n\tprivate readonly _editor: ICodeEditor;\n\tprivate readonly _providers: LanguageFeatureRegistry<LinkedEditingRangeProvider>;\n\tprivate _enabled: boolean;\n\n\tprivate readonly _visibleContextKey: IContextKey<boolean>;\n\tprivate readonly _debounceInformation: IFeatureDebounceInformation;\n\n\tprivate _rangeUpdateTriggerPromise: Promise<any> | null;\n\tprivate _rangeSyncTriggerPromise: Promise<any> | null;\n\n\tprivate _currentRequestCts: CancellationTokenSource | null;\n\tprivate _currentRequestPosition: Position | null;\n\tprivate _currentRequestModelVersion: number | null;\n\n\tprivate _currentDecorations: IEditorDecorationsCollection; // The one at index 0 is the reference one\n\tprivate _syncRangesToken: number = 0;\n\n\tprivate _languageWordPattern: RegExp | null;\n\tprivate _currentWordPattern: RegExp | null;\n\tprivate _ignoreChangeEvent: boolean;\n\n\tprivate readonly _localToDispose = this._register(new DisposableStore());\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t\t@ILanguageConfigurationService private readonly languageConfigurationService: ILanguageConfigurationService,\n\t\t@ILanguageFeatureDebounceService languageFeatureDebounceService: ILanguageFeatureDebounceService\n\t) {\n\t\tsuper();\n\t\tthis._editor = editor;\n\t\tthis._providers = languageFeaturesService.linkedEditingRangeProvider;\n\t\tthis._enabled = false;\n\t\tthis._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n\t\tthis._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', { max: 200 });\n\n\t\tthis._currentDecorations = this._editor.createDecorationsCollection();\n\t\tthis._languageWordPattern = null;\n\t\tthis._currentWordPattern = null;\n\t\tthis._ignoreChangeEvent = false;\n\t\tthis._localToDispose = this._register(new DisposableStore());\n\n\t\tthis._rangeUpdateTriggerPromise = null;\n\t\tthis._rangeSyncTriggerPromise = null;\n\n\t\tthis._currentRequestCts = null;\n\t\tthis._currentRequestPosition = null;\n\t\tthis._currentRequestModelVersion = null;\n\n\t\tthis._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\n\n\t\tthis._register(this._editor.onDidChangeConfiguration(e => {\n\t\t\tif (e.hasChanged(EditorOption.linkedEditing) || e.hasChanged(EditorOption.renameOnType)) {\n\t\t\t\tthis.reinitialize(false);\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._providers.onDidChange(() => this.reinitialize(false)));\n\t\tthis._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\n\n\t\tthis.reinitialize(true);\n\t}\n\n\tprivate reinitialize(forceRefresh: boolean) {\n\t\tconst model = this._editor.getModel();\n\t\tconst isEnabled = model !== null && (this._editor.getOption(EditorOption.linkedEditing) || this._editor.getOption(EditorOption.renameOnType)) && this._providers.has(model);\n\t\tif (isEnabled === this._enabled && !forceRefresh) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._enabled = isEnabled;\n\n\t\tthis.clearRanges();\n\t\tthis._localToDispose.clear();\n\n\t\tif (!isEnabled || model === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._localToDispose.add(\n\t\t\tEvent.runAndSubscribe(\n\t\t\t\tmodel.onDidChangeLanguageConfiguration,\n\t\t\t\t() => {\n\t\t\t\t\tthis._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tconst rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\n\t\tconst triggerRangeUpdate = () => {\n\t\t\tthis._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), this._debounceDuration ?? this._debounceInformation.get(model));\n\t\t};\n\t\tconst rangeSyncScheduler = new Delayer(0);\n\t\tconst triggerRangeSync = (token: number) => {\n\t\t\tthis._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(token));\n\t\t};\n\t\tthis._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n\t\t\ttriggerRangeUpdate();\n\t\t}));\n\t\tthis._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\n\t\t\tif (!this._ignoreChangeEvent) {\n\t\t\t\tif (this._currentDecorations.length > 0) {\n\t\t\t\t\tconst referenceRange = this._currentDecorations.getRange(0);\n\t\t\t\t\tif (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n\t\t\t\t\t\ttriggerRangeSync(this._syncRangesToken);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttriggerRangeUpdate();\n\t\t}));\n\t\tthis._localToDispose.add({\n\t\t\tdispose: () => {\n\t\t\t\trangeUpdateScheduler.dispose();\n\t\t\t\trangeSyncScheduler.dispose();\n\t\t\t}\n\t\t});\n\t\tthis.updateRanges();\n\t}\n\n\tprivate _syncRanges(token: number): void {\n\t\t// delayed invocation, make sure we're still on\n\t\tif (!this._editor.hasModel() || token !== this._syncRangesToken || this._currentDecorations.length === 0) {\n\t\t\t// nothing to do\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = this._editor.getModel();\n\t\tconst referenceRange = this._currentDecorations.getRange(0);\n\n\t\tif (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n\t\t\treturn this.clearRanges();\n\t\t}\n\n\t\tconst referenceValue = model.getValueInRange(referenceRange);\n\t\tif (this._currentWordPattern) {\n\t\t\tconst match = referenceValue.match(this._currentWordPattern);\n\t\t\tconst matchLength = match ? match[0].length : 0;\n\t\t\tif (matchLength !== referenceValue.length) {\n\t\t\t\treturn this.clearRanges();\n\t\t\t}\n\t\t}\n\n\t\tconst edits: ISingleEditOperation[] = [];\n\t\tfor (let i = 1, len = this._currentDecorations.length; i < len; i++) {\n\t\t\tconst mirrorRange = this._currentDecorations.getRange(i);\n\t\t\tif (!mirrorRange) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n\t\t\t\tedits.push({\n\t\t\t\t\trange: mirrorRange,\n\t\t\t\t\ttext: referenceValue\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet oldValue = model.getValueInRange(mirrorRange);\n\t\t\t\tlet newValue = referenceValue;\n\t\t\t\tlet rangeStartColumn = mirrorRange.startColumn;\n\t\t\t\tlet rangeEndColumn = mirrorRange.endColumn;\n\n\t\t\t\tconst commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n\t\t\t\trangeStartColumn += commonPrefixLength;\n\t\t\t\toldValue = oldValue.substr(commonPrefixLength);\n\t\t\t\tnewValue = newValue.substr(commonPrefixLength);\n\n\t\t\t\tconst commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n\t\t\t\trangeEndColumn -= commonSuffixLength;\n\t\t\t\toldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n\t\t\t\tnewValue = newValue.substr(0, newValue.length - commonSuffixLength);\n\n\t\t\t\tif (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n\t\t\t\t\tedits.push({\n\t\t\t\t\t\trange: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n\t\t\t\t\t\ttext: newValue\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (edits.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis._editor.popUndoStop();\n\t\t\tthis._ignoreChangeEvent = true;\n\t\t\tconst prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n\t\t\tthis._editor.executeEdits('linkedEditing', edits);\n\t\t\tthis._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n\t\t} finally {\n\t\t\tthis._ignoreChangeEvent = false;\n\t\t}\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis.clearRanges();\n\t\tsuper.dispose();\n\t}\n\n\tpublic clearRanges(): void {\n\t\tthis._visibleContextKey.set(false);\n\t\tthis._currentDecorations.clear();\n\t\tif (this._currentRequestCts) {\n\t\t\tthis._currentRequestCts.cancel();\n\t\t\tthis._currentRequestCts = null;\n\t\t\tthis._currentRequestPosition = null;\n\t\t}\n\t}\n\n\tpublic get currentUpdateTriggerPromise(): Promise<any> {\n\t\treturn this._rangeUpdateTriggerPromise || Promise.resolve();\n\t}\n\n\tpublic get currentSyncTriggerPromise(): Promise<any> {\n\t\treturn this._rangeSyncTriggerPromise || Promise.resolve();\n\t}\n\n\tpublic async updateRanges(force = false): Promise<void> {\n\t\tif (!this._editor.hasModel()) {\n\t\t\tthis.clearRanges();\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = this._editor.getPosition();\n\t\tif (!this._enabled && !force || this._editor.getSelections().length > 1) {\n\t\t\t// disabled or multicursor\n\t\t\tthis.clearRanges();\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = this._editor.getModel();\n\t\tconst modelVersionId = model.getVersionId();\n\t\tif (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n\t\t\tif (position.equals(this._currentRequestPosition)) {\n\t\t\t\treturn; // same position\n\t\t\t}\n\t\t\tif (this._currentDecorations.length > 0) {\n\t\t\t\tconst range = this._currentDecorations.getRange(0);\n\t\t\t\tif (range && range.containsPosition(position)) {\n\t\t\t\t\treturn; // just moving inside the existing primary range\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Clear existing decorations while we compute new ones\n\t\tthis.clearRanges();\n\n\t\tthis._currentRequestPosition = position;\n\t\tthis._currentRequestModelVersion = modelVersionId;\n\n\t\tconst currentRequestCts = this._currentRequestCts = new CancellationTokenSource();\n\t\ttry {\n\t\t\tconst sw = new StopWatch(false);\n\t\t\tconst response = await getLinkedEditingRanges(this._providers, model, position, currentRequestCts.token);\n\t\t\tthis._debounceInformation.update(model, sw.elapsed());\n\t\t\tif (currentRequestCts !== this._currentRequestCts) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._currentRequestCts = null;\n\t\t\tif (modelVersionId !== model.getVersionId()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet ranges: IRange[] = [];\n\t\t\tif (response?.ranges) {\n\t\t\t\tranges = response.ranges;\n\t\t\t}\n\n\t\t\tthis._currentWordPattern = response?.wordPattern || this._languageWordPattern;\n\n\t\t\tlet foundReferenceRange = false;\n\t\t\tfor (let i = 0, len = ranges.length; i < len; i++) {\n\t\t\t\tif (Range.containsPosition(ranges[i], position)) {\n\t\t\t\t\tfoundReferenceRange = true;\n\t\t\t\t\tif (i !== 0) {\n\t\t\t\t\t\tconst referenceRange = ranges[i];\n\t\t\t\t\t\tranges.splice(i, 1);\n\t\t\t\t\t\tranges.unshift(referenceRange);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!foundReferenceRange) {\n\t\t\t\t// Cannot do linked editing if the ranges are not where the cursor is...\n\t\t\t\tthis.clearRanges();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst decorations: IModelDeltaDecoration[] = ranges.map(range => ({ range: range, options: LinkedEditingContribution.DECORATION }));\n\t\t\tthis._visibleContextKey.set(true);\n\t\t\tthis._currentDecorations.set(decorations);\n\t\t\tthis._syncRangesToken++; // cancel any pending syncRanges call\n\t\t} catch (err) {\n\t\t\tif (!isCancellationError(err)) {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t}\n\t\t\tif (this._currentRequestCts === currentRequestCts || !this._currentRequestCts) {\n\t\t\t\t// stop if we are still the latest request\n\t\t\t\tthis.clearRanges();\n\t\t\t}\n\t\t}\n\n\t}\n\n\t// for testing\n\tpublic setDebounceDuration(timeInMS: number) {\n\t\tthis._debounceDuration = timeInMS;\n\t}\n\n\t// private printDecorators(model: ITextModel) {\n\t// \treturn this._currentDecorations.map(d => {\n\t// \t\tconst range = model.getDecorationRange(d);\n\t// \t\tif (range) {\n\t// \t\t\treturn this.printRange(range);\n\t// \t\t}\n\t// \t\treturn 'invalid';\n\t// \t}).join(',');\n\t// }\n\n\t// private printChanges(changes: IModelContentChange[]) {\n\t// \treturn changes.map(c => {\n\t// \t\treturn `${this.printRange(c.range)} - ${c.text}`;\n\t// \t}\n\t// \t).join(',');\n\t// }\n\n\t// private printRange(range: IRange) {\n\t// \treturn `${range.startLineNumber},${range.startColumn}/${range.endLineNumber},${range.endColumn}`;\n\t// }\n}\n\nexport class LinkedEditingAction extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.linkedEditing',\n\t\t\tlabel: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n\t\t\talias: 'Start Linked Editing',\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.F2,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\toverride runCommand(accessor: ServicesAccessor, args: [URI, IPosition]): void | Promise<void> {\n\t\tconst editorService = accessor.get(ICodeEditorService);\n\t\tconst [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n\n\t\tif (URI.isUri(uri) && Position.isIPosition(pos)) {\n\t\t\treturn editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n\t\t\t\tif (!editor) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\teditor.setPosition(pos);\n\t\t\t\teditor.invokeWithinContext(accessor => {\n\t\t\t\t\tthis.reportTelemetry(accessor, editor);\n\t\t\t\t\treturn this.run(accessor, editor);\n\t\t\t\t});\n\t\t\t}, onUnexpectedError);\n\t\t}\n\n\t\treturn super.runCommand(accessor, args);\n\t}\n\n\trun(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tconst controller = LinkedEditingContribution.get(editor);\n\t\tif (controller) {\n\t\t\treturn Promise.resolve(controller.updateRanges(true));\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n}\n\nconst LinkedEditingCommand = EditorCommand.bindToContribution<LinkedEditingContribution>(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n\tid: 'cancelLinkedEditingInput',\n\tprecondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n\thandler: x => x.clearRanges(),\n\tkbOpts: {\n\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\tweight: KeybindingWeight.EditorContrib + 99,\n\t\tprimary: KeyCode.Escape,\n\t\tsecondary: [KeyMod.Shift | KeyCode.Escape]\n\t}\n}));\n\n\nfunction getLinkedEditingRanges(providers: LanguageFeatureRegistry<LinkedEditingRangeProvider>, model: ITextModel, position: Position, token: CancellationToken): Promise<LinkedEditingRanges | undefined | null> {\n\tconst orderedByScore = providers.ordered(model);\n\n\t// in order of score ask the linked editing range provider\n\t// until someone response with a good result\n\t// (good = not null)\n\treturn first<LinkedEditingRanges | undefined | null>(orderedByScore.map(provider => async () => {\n\t\ttry {\n\t\t\treturn await provider.provideLinkedEditingRanges(model, position, token);\n\t\t} catch (e) {\n\t\t\tonUnexpectedExternalError(e);\n\t\t\treturn undefined;\n\t\t}\n\t}), result => !!result && arrays.isNonEmptyArray(result?.ranges));\n}\n\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hcDark: Color.fromHex('#f00').transparent(0.3), hcLight: Color.white }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\n\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\n\tconst { linkedEditingRangeProvider } = _accessor.get(ILanguageFeaturesService);\n\treturn getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\n});\n\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution, EditorContributionInstantiation.AfterFirstRender);\nregisterEditorAction(LinkedEditingAction);\n"],
  "mappings": "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",
  "names": ["accessor"]
}
