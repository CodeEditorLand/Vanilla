import t from"assert";import{ensureNoDisposablesAreLeakedInTestSuite as u}from"../../../../../base/test/common/utils.js";import{CoreEditingCommands as a,CoreNavigationCommands as s}from"../../../../browser/coreCommands.js";import{Selection as r}from"../../../../common/core/selection.js";import{Handler as o}from"../../../../common/editorCommon.js";import{CursorUndo as m,CursorUndoRedoController as n}from"../../browser/cursorUndo.js";import{withTestCodeEditor as i}from"../../../../test/browser/testCodeEditor.js";suite("FindController",()=>{u();const l=new m;test("issue #82535: Edge case with cursorUndo",()=>{i("",{},e=>{e.registerAndInstantiateContribution(n.ID,n),e.trigger("test",o.Type,{text:"hello"}),s.CursorLeft.runEditorCommand(null,e,{}),a.DeleteRight.runEditorCommand(null,e,{}),t.deepStrictEqual(e.getValue(),"hell"),t.deepStrictEqual(e.getSelections(),[new r(1,5,1,5)]),s.CursorLeft.runEditorCommand(null,e,{}),t.deepStrictEqual(e.getSelections(),[new r(1,4,1,4)]),l.run(null,e,{}),t.deepStrictEqual(e.getSelections(),[new r(1,5,1,5)])})}),test("issue #82535: Edge case with cursorUndo (reverse)",()=>{i("",{},e=>{e.registerAndInstantiateContribution(n.ID,n),e.trigger("test",o.Type,{text:"hell"}),e.trigger("test",o.Type,{text:"o"}),t.deepStrictEqual(e.getValue(),"hello"),t.deepStrictEqual(e.getSelections(),[new r(1,6,1,6)]),l.run(null,e,{}),t.deepStrictEqual(e.getSelections(),[new r(1,6,1,6)])})})});
