{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/find/browser/findWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport type { IKeyboardEvent } from \"../../../../base/browser/keyboardEvent.js\";\nimport type { IMouseEvent } from \"../../../../base/browser/mouseEvent.js\";\nimport { alert as alertFn } from \"../../../../base/browser/ui/aria/aria.js\";\nimport type { IContextViewProvider } from \"../../../../base/browser/ui/contextview/contextview.js\";\nimport type { FindInput } from \"../../../../base/browser/ui/findinput/findInput.js\";\nimport type { ReplaceInput } from \"../../../../base/browser/ui/findinput/replaceInput.js\";\nimport type { IMessage as InputBoxMessage } from \"../../../../base/browser/ui/inputbox/inputBox.js\";\nimport {\n\ttype ISashEvent,\n\ttype IVerticalSashLayoutProvider,\n\tOrientation,\n\tSash,\n} from \"../../../../base/browser/ui/sash/sash.js\";\nimport { Toggle } from \"../../../../base/browser/ui/toggle/toggle.js\";\nimport { Widget } from \"../../../../base/browser/ui/widget.js\";\nimport { Delayer } from \"../../../../base/common/async.js\";\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport { onUnexpectedError } from \"../../../../base/common/errors.js\";\nimport { KeyCode, KeyMod } from \"../../../../base/common/keyCodes.js\";\nimport { toDisposable } from \"../../../../base/common/lifecycle.js\";\nimport * as platform from \"../../../../base/common/platform.js\";\nimport * as strings from \"../../../../base/common/strings.js\";\nimport \"./findWidget.css\";\nimport type { IHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegate.js\";\nimport {\n\tcreateInstantHoverDelegate,\n\tgetDefaultHoverDelegate,\n} from \"../../../../base/browser/ui/hover/hoverDelegateFactory.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { assertIsDefined } from \"../../../../base/common/types.js\";\nimport * as nls from \"../../../../nls.js\";\nimport { AccessibilitySupport } from \"../../../../platform/accessibility/common/accessibility.js\";\nimport type {\n\tIContextKey,\n\tIContextKeyService,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport {\n\tContextScopedFindInput,\n\tContextScopedReplaceInput,\n} from \"../../../../platform/history/browser/contextScopedHistoryWidget.js\";\nimport { showHistoryKeybindingHint } from \"../../../../platform/history/browser/historyWidgetKeybindingHint.js\";\nimport type { IHoverService } from \"../../../../platform/hover/browser/hover.js\";\nimport type { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport type { INotificationService } from \"../../../../platform/notification/common/notification.js\";\nimport {\n\ttype IStorageService,\n\tStorageScope,\n\tStorageTarget,\n} from \"../../../../platform/storage/common/storage.js\";\nimport {\n\tdefaultInputBoxStyles,\n\tdefaultToggleStyles,\n} from \"../../../../platform/theme/browser/defaultStyles.js\";\nimport {\n\tasCssVariable,\n\tcontrastBorder,\n\teditorFindMatchForeground,\n\teditorFindMatchHighlightBorder,\n\teditorFindMatchHighlightForeground,\n\teditorFindRangeHighlightBorder,\n\tinputActiveOptionBackground,\n\tinputActiveOptionBorder,\n\tinputActiveOptionForeground,\n} from \"../../../../platform/theme/common/colorRegistry.js\";\nimport {\n\tregisterIcon,\n\twidgetClose,\n} from \"../../../../platform/theme/common/iconRegistry.js\";\nimport { isHighContrast } from \"../../../../platform/theme/common/theme.js\";\nimport {\n\ttype IThemeService,\n\tregisterThemingParticipant,\n} from \"../../../../platform/theme/common/themeService.js\";\nimport {\n\ttype ICodeEditor,\n\ttype IOverlayWidget,\n\ttype IOverlayWidgetPosition,\n\ttype IViewZone,\n\tOverlayWidgetPositionPreference,\n} from \"../../../browser/editorBrowser.js\";\nimport {\n\ttype ConfigurationChangedEvent,\n\tEditorOption,\n} from \"../../../common/config/editorOptions.js\";\nimport { Range } from \"../../../common/core/range.js\";\nimport type { Selection } from \"../../../common/core/selection.js\";\nimport {\n\tCONTEXT_FIND_INPUT_FOCUSED,\n\tCONTEXT_REPLACE_INPUT_FOCUSED,\n\tFIND_IDS,\n\tMATCHES_LIMIT,\n} from \"./findModel.js\";\nimport type {\n\tFindReplaceState,\n\tFindReplaceStateChangedEvent,\n} from \"./findState.js\";\n\nconst findCollapsedIcon = registerIcon(\n\t\"find-collapsed\",\n\tCodicon.chevronRight,\n\tnls.localize(\n\t\t\"findCollapsedIcon\",\n\t\t\"Icon to indicate that the editor find widget is collapsed.\",\n\t),\n);\nconst findExpandedIcon = registerIcon(\n\t\"find-expanded\",\n\tCodicon.chevronDown,\n\tnls.localize(\n\t\t\"findExpandedIcon\",\n\t\t\"Icon to indicate that the editor find widget is expanded.\",\n\t),\n);\n\nexport const findSelectionIcon = registerIcon(\n\t\"find-selection\",\n\tCodicon.selection,\n\tnls.localize(\n\t\t\"findSelectionIcon\",\n\t\t\"Icon for 'Find in Selection' in the editor find widget.\",\n\t),\n);\nexport const findReplaceIcon = registerIcon(\n\t\"find-replace\",\n\tCodicon.replace,\n\tnls.localize(\n\t\t\"findReplaceIcon\",\n\t\t\"Icon for 'Replace' in the editor find widget.\",\n\t),\n);\nexport const findReplaceAllIcon = registerIcon(\n\t\"find-replace-all\",\n\tCodicon.replaceAll,\n\tnls.localize(\n\t\t\"findReplaceAllIcon\",\n\t\t\"Icon for 'Replace All' in the editor find widget.\",\n\t),\n);\nexport const findPreviousMatchIcon = registerIcon(\n\t\"find-previous-match\",\n\tCodicon.arrowUp,\n\tnls.localize(\n\t\t\"findPreviousMatchIcon\",\n\t\t\"Icon for 'Find Previous' in the editor find widget.\",\n\t),\n);\nexport const findNextMatchIcon = registerIcon(\n\t\"find-next-match\",\n\tCodicon.arrowDown,\n\tnls.localize(\n\t\t\"findNextMatchIcon\",\n\t\t\"Icon for 'Find Next' in the editor find widget.\",\n\t),\n);\n\nexport interface IFindController {\n\treplace(): void;\n\treplaceAll(): void;\n\tgetGlobalBufferTerm(): Promise<string>;\n}\n\nconst NLS_FIND_DIALOG_LABEL = nls.localize(\n\t\"label.findDialog\",\n\t\"Find / Replace\",\n);\nconst NLS_FIND_INPUT_LABEL = nls.localize(\"label.find\", \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize(\"placeholder.find\", \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize(\n\t\"label.previousMatchButton\",\n\t\"Previous Match\",\n);\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize(\n\t\"label.nextMatchButton\",\n\t\"Next Match\",\n);\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize(\n\t\"label.toggleSelectionFind\",\n\t\"Find in Selection\",\n);\nconst NLS_CLOSE_BTN_LABEL = nls.localize(\"label.closeButton\", \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize(\"label.replace\", \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize(\n\t\"placeholder.replace\",\n\t\"Replace\",\n);\nconst NLS_REPLACE_BTN_LABEL = nls.localize(\"label.replaceButton\", \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize(\n\t\"label.replaceAllButton\",\n\t\"Replace All\",\n);\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize(\n\t\"label.toggleReplaceButton\",\n\t\"Toggle Replace\",\n);\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize(\n\t\"title.matchesCountLimit\",\n\t\"Only the first {0} results are highlighted, but all find operations work on the entire text.\",\n\tMATCHES_LIMIT,\n);\nexport const NLS_MATCHES_LOCATION = nls.localize(\n\t\"label.matchesLocation\",\n\t\"{0} of {1}\",\n);\nexport const NLS_NO_RESULTS = nls.localize(\"label.noResults\", \"No results\");\n\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\n\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\n\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey =\n\t\"ctrlEnterReplaceAll.windows.donotask\";\n\nconst ctrlKeyMod = platform.isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd;\nexport class FindWidgetViewZone implements IViewZone {\n\tpublic readonly afterLineNumber: number;\n\tpublic heightInPx: number;\n\tpublic readonly suppressMouseDown: boolean;\n\tpublic readonly domNode: HTMLElement;\n\n\tconstructor(afterLineNumber: number) {\n\t\tthis.afterLineNumber = afterLineNumber;\n\n\t\tthis.heightInPx = FIND_INPUT_AREA_HEIGHT;\n\t\tthis.suppressMouseDown = false;\n\t\tthis.domNode = document.createElement(\"div\");\n\t\tthis.domNode.className = \"dock-find-viewzone\";\n\t}\n}\n\nfunction stopPropagationForMultiLineUpwards(\n\tevent: IKeyboardEvent,\n\tvalue: string,\n\ttextarea: HTMLTextAreaElement | null,\n) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && isMultiline && textarea.selectionStart > 0) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nfunction stopPropagationForMultiLineDownwards(\n\tevent: IKeyboardEvent,\n\tvalue: string,\n\ttextarea: HTMLTextAreaElement | null,\n) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (\n\t\ttextarea &&\n\t\tisMultiline &&\n\t\ttextarea.selectionEnd < textarea.value.length\n\t) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nexport class FindWidget\n\textends Widget\n\timplements IOverlayWidget, IVerticalSashLayoutProvider\n{\n\tprivate static readonly ID = \"editor.contrib.findWidget\";\n\tprivate readonly _codeEditor: ICodeEditor;\n\tprivate readonly _state: FindReplaceState;\n\tprivate readonly _controller: IFindController;\n\tprivate readonly _contextViewProvider: IContextViewProvider;\n\tprivate readonly _keybindingService: IKeybindingService;\n\tprivate readonly _contextKeyService: IContextKeyService;\n\tprivate readonly _storageService: IStorageService;\n\tprivate readonly _notificationService: INotificationService;\n\n\tprivate _domNode!: HTMLElement;\n\tprivate _cachedHeight: number | null = null;\n\tprivate _findInput!: FindInput;\n\tprivate _replaceInput!: ReplaceInput;\n\n\tprivate _toggleReplaceBtn!: SimpleButton;\n\tprivate _matchesCount!: HTMLElement;\n\tprivate _prevBtn!: SimpleButton;\n\tprivate _nextBtn!: SimpleButton;\n\tprivate _toggleSelectionFind!: Toggle;\n\tprivate _closeBtn!: SimpleButton;\n\tprivate _replaceBtn!: SimpleButton;\n\tprivate _replaceAllBtn!: SimpleButton;\n\n\tprivate _isVisible: boolean;\n\tprivate _isReplaceVisible: boolean;\n\tprivate _ignoreChangeEvent: boolean;\n\tprivate _ctrlEnterReplaceAllWarningPrompted: boolean;\n\n\tprivate readonly _findFocusTracker: dom.IFocusTracker;\n\tprivate readonly _findInputFocused: IContextKey<boolean>;\n\tprivate readonly _replaceFocusTracker: dom.IFocusTracker;\n\tprivate readonly _replaceInputFocused: IContextKey<boolean>;\n\tprivate _viewZone?: FindWidgetViewZone;\n\tprivate _viewZoneId?: string;\n\n\tprivate _resizeSash!: Sash;\n\tprivate _resized!: boolean;\n\tprivate readonly _updateHistoryDelayer: Delayer<void>;\n\n\tconstructor(\n\t\tcodeEditor: ICodeEditor,\n\t\tcontroller: IFindController,\n\t\tstate: FindReplaceState,\n\t\tcontextViewProvider: IContextViewProvider,\n\t\tkeybindingService: IKeybindingService,\n\t\tcontextKeyService: IContextKeyService,\n\t\tthemeService: IThemeService,\n\t\tstorageService: IStorageService,\n\t\tnotificationService: INotificationService,\n\t\tprivate readonly _hoverService: IHoverService,\n\t) {\n\t\tsuper();\n\t\tthis._codeEditor = codeEditor;\n\t\tthis._controller = controller;\n\t\tthis._state = state;\n\t\tthis._contextViewProvider = contextViewProvider;\n\t\tthis._keybindingService = keybindingService;\n\t\tthis._contextKeyService = contextKeyService;\n\t\tthis._storageService = storageService;\n\t\tthis._notificationService = notificationService;\n\n\t\tthis._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(\n\t\t\tctrlEnterReplaceAllWarningPromptedKey,\n\t\t\tStorageScope.PROFILE,\n\t\t);\n\n\t\tthis._isVisible = false;\n\t\tthis._isReplaceVisible = false;\n\t\tthis._ignoreChangeEvent = false;\n\n\t\tthis._updateHistoryDelayer = new Delayer<void>(500);\n\t\tthis._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n\t\tthis._register(\n\t\t\tthis._state.onFindReplaceStateChange((e) =>\n\t\t\t\tthis._onStateChanged(e),\n\t\t\t),\n\t\t);\n\t\tthis._buildDomNode();\n\t\tthis._updateButtons();\n\t\tthis._tryUpdateWidgetWidth();\n\t\tthis._findInput.inputBox.layout();\n\n\t\tthis._register(\n\t\t\tthis._codeEditor.onDidChangeConfiguration(\n\t\t\t\t(e: ConfigurationChangedEvent) => {\n\t\t\t\t\tif (e.hasChanged(EditorOption.readOnly)) {\n\t\t\t\t\t\tif (this._codeEditor.getOption(EditorOption.readOnly)) {\n\t\t\t\t\t\t\t// Hide replace part if editor becomes read only\n\t\t\t\t\t\t\tthis._state.change(\n\t\t\t\t\t\t\t\t{ isReplaceRevealed: false },\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._updateButtons();\n\t\t\t\t\t}\n\t\t\t\t\tif (e.hasChanged(EditorOption.layoutInfo)) {\n\t\t\t\t\t\tthis._tryUpdateWidgetWidth();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.hasChanged(EditorOption.accessibilitySupport)) {\n\t\t\t\t\t\tthis.updateAccessibilitySupport();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.hasChanged(EditorOption.find)) {\n\t\t\t\t\t\tconst supportLoop = this._codeEditor.getOption(\n\t\t\t\t\t\t\tEditorOption.find,\n\t\t\t\t\t\t).loop;\n\t\t\t\t\t\tthis._state.change({ loop: supportLoop }, false);\n\t\t\t\t\t\tconst addExtraSpaceOnTop = this._codeEditor.getOption(\n\t\t\t\t\t\t\tEditorOption.find,\n\t\t\t\t\t\t).addExtraSpaceOnTop;\n\t\t\t\t\t\tif (addExtraSpaceOnTop && !this._viewZone) {\n\t\t\t\t\t\t\tthis._viewZone = new FindWidgetViewZone(0);\n\t\t\t\t\t\t\tthis._showViewZone();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!addExtraSpaceOnTop && this._viewZone) {\n\t\t\t\t\t\t\tthis._removeViewZone();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t\tthis.updateAccessibilitySupport();\n\t\tthis._register(\n\t\t\tthis._codeEditor.onDidChangeCursorSelection(() => {\n\t\t\t\tif (this._isVisible) {\n\t\t\t\t\tthis._updateToggleSelectionFindButton();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._codeEditor.onDidFocusEditorWidget(async () => {\n\t\t\t\tif (this._isVisible) {\n\t\t\t\t\tconst globalBufferTerm =\n\t\t\t\t\t\tawait this._controller.getGlobalBufferTerm();\n\t\t\t\t\tif (\n\t\t\t\t\t\tglobalBufferTerm &&\n\t\t\t\t\t\tglobalBufferTerm !== this._state.searchString\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis._state.change(\n\t\t\t\t\t\t\t{ searchString: globalBufferTerm },\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis._findInput.select();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._findInputFocused =\n\t\t\tCONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n\t\tthis._findFocusTracker = this._register(\n\t\t\tdom.trackFocus(this._findInput.inputBox.inputElement),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findFocusTracker.onDidFocus(() => {\n\t\t\t\tthis._findInputFocused.set(true);\n\t\t\t\tthis._updateSearchScope();\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findFocusTracker.onDidBlur(() => {\n\t\t\t\tthis._findInputFocused.set(false);\n\t\t\t}),\n\t\t);\n\n\t\tthis._replaceInputFocused =\n\t\t\tCONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n\t\tthis._replaceFocusTracker = this._register(\n\t\t\tdom.trackFocus(this._replaceInput.inputBox.inputElement),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._replaceFocusTracker.onDidFocus(() => {\n\t\t\t\tthis._replaceInputFocused.set(true);\n\t\t\t\tthis._updateSearchScope();\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._replaceFocusTracker.onDidBlur(() => {\n\t\t\t\tthis._replaceInputFocused.set(false);\n\t\t\t}),\n\t\t);\n\n\t\tthis._codeEditor.addOverlayWidget(this);\n\t\tif (this._codeEditor.getOption(EditorOption.find).addExtraSpaceOnTop) {\n\t\t\tthis._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n\t\t}\n\n\t\tthis._register(\n\t\t\tthis._codeEditor.onDidChangeModel(() => {\n\t\t\t\tif (!this._isVisible) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._viewZoneId = undefined;\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._codeEditor.onDidScrollChange((e) => {\n\t\t\t\tif (e.scrollTopChanged) {\n\t\t\t\t\tthis._layoutViewZone();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._layoutViewZone();\n\t\t\t\t}, 0);\n\t\t\t}),\n\t\t);\n\t}\n\n\t// ----- IOverlayWidget API\n\n\tpublic getId(): string {\n\t\treturn FindWidget.ID;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic getPosition(): IOverlayWidgetPosition | null {\n\t\tif (this._isVisible) {\n\t\t\treturn {\n\t\t\t\tpreference: OverlayWidgetPositionPreference.TOP_RIGHT_CORNER,\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\t// ----- React to state changes\n\n\tprivate _onStateChanged(e: FindReplaceStateChangedEvent): void {\n\t\tif (e.searchString) {\n\t\t\ttry {\n\t\t\t\tthis._ignoreChangeEvent = true;\n\t\t\t\tthis._findInput.setValue(this._state.searchString);\n\t\t\t} finally {\n\t\t\t\tthis._ignoreChangeEvent = false;\n\t\t\t}\n\t\t\tthis._updateButtons();\n\t\t}\n\t\tif (e.replaceString) {\n\t\t\tthis._replaceInput.inputBox.value = this._state.replaceString;\n\t\t}\n\t\tif (e.isRevealed) {\n\t\t\tif (this._state.isRevealed) {\n\t\t\t\tthis._reveal();\n\t\t\t} else {\n\t\t\t\tthis._hide(true);\n\t\t\t}\n\t\t}\n\t\tif (e.isReplaceRevealed) {\n\t\t\tif (this._state.isReplaceRevealed) {\n\t\t\t\tif (\n\t\t\t\t\t!this._codeEditor.getOption(EditorOption.readOnly) &&\n\t\t\t\t\t!this._isReplaceVisible\n\t\t\t\t) {\n\t\t\t\t\tthis._isReplaceVisible = true;\n\t\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(\n\t\t\t\t\t\tthis._findInput.domNode,\n\t\t\t\t\t);\n\t\t\t\t\tthis._updateButtons();\n\t\t\t\t\tthis._replaceInput.inputBox.layout();\n\t\t\t\t}\n\t\t\t} else if (this._isReplaceVisible) {\n\t\t\t\tthis._isReplaceVisible = false;\n\t\t\t\tthis._updateButtons();\n\t\t\t}\n\t\t}\n\t\tif (\n\t\t\t(e.isRevealed || e.isReplaceRevealed) &&\n\t\t\t(this._state.isRevealed || this._state.isReplaceRevealed)\n\t\t) {\n\t\t\tif (this._tryUpdateHeight()) {\n\t\t\t\tthis._showViewZone();\n\t\t\t}\n\t\t}\n\n\t\tif (e.isRegex) {\n\t\t\tthis._findInput.setRegex(this._state.isRegex);\n\t\t}\n\t\tif (e.wholeWord) {\n\t\t\tthis._findInput.setWholeWords(this._state.wholeWord);\n\t\t}\n\t\tif (e.matchCase) {\n\t\t\tthis._findInput.setCaseSensitive(this._state.matchCase);\n\t\t}\n\t\tif (e.preserveCase) {\n\t\t\tthis._replaceInput.setPreserveCase(this._state.preserveCase);\n\t\t}\n\t\tif (e.searchScope) {\n\t\t\tif (this._state.searchScope) {\n\t\t\t\tthis._toggleSelectionFind.checked = true;\n\t\t\t} else {\n\t\t\t\tthis._toggleSelectionFind.checked = false;\n\t\t\t}\n\t\t\tthis._updateToggleSelectionFindButton();\n\t\t}\n\t\tif (e.searchString || e.matchesCount || e.matchesPosition) {\n\t\t\tconst showRedOutline =\n\t\t\t\tthis._state.searchString.length > 0 &&\n\t\t\t\tthis._state.matchesCount === 0;\n\t\t\tthis._domNode.classList.toggle(\"no-results\", showRedOutline);\n\n\t\t\tthis._updateMatchesCount();\n\t\t\tthis._updateButtons();\n\t\t}\n\t\tif (e.searchString || e.currentMatch) {\n\t\t\tthis._layoutViewZone();\n\t\t}\n\t\tif (e.updateHistory) {\n\t\t\tthis._delayedUpdateHistory();\n\t\t}\n\t\tif (e.loop) {\n\t\t\tthis._updateButtons();\n\t\t}\n\t}\n\n\tprivate _delayedUpdateHistory() {\n\t\tthis._updateHistoryDelayer\n\t\t\t.trigger(this._updateHistory.bind(this))\n\t\t\t.then(undefined, onUnexpectedError);\n\t}\n\n\tprivate _updateHistory() {\n\t\tif (this._state.searchString) {\n\t\t\tthis._findInput.inputBox.addToHistory();\n\t\t}\n\t\tif (this._state.replaceString) {\n\t\t\tthis._replaceInput.inputBox.addToHistory();\n\t\t}\n\t}\n\n\tprivate _updateMatchesCount(): void {\n\t\tthis._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + \"px\";\n\t\tif (this._state.matchesCount >= MATCHES_LIMIT) {\n\t\t\tthis._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n\t\t} else {\n\t\t\tthis._matchesCount.title = \"\";\n\t\t}\n\n\t\t// remove previous content\n\t\tthis._matchesCount.firstChild?.remove();\n\n\t\tlet label: string;\n\t\tif (this._state.matchesCount > 0) {\n\t\t\tlet matchesCount: string = String(this._state.matchesCount);\n\t\t\tif (this._state.matchesCount >= MATCHES_LIMIT) {\n\t\t\t\tmatchesCount += \"+\";\n\t\t\t}\n\t\t\tlet matchesPosition: string = String(this._state.matchesPosition);\n\t\t\tif (matchesPosition === \"0\") {\n\t\t\t\tmatchesPosition = \"?\";\n\t\t\t}\n\t\t\tlabel = strings.format(\n\t\t\t\tNLS_MATCHES_LOCATION,\n\t\t\t\tmatchesPosition,\n\t\t\t\tmatchesCount,\n\t\t\t);\n\t\t} else {\n\t\t\tlabel = NLS_NO_RESULTS;\n\t\t}\n\n\t\tthis._matchesCount.appendChild(document.createTextNode(label));\n\n\t\talertFn(\n\t\t\tthis._getAriaLabel(\n\t\t\t\tlabel,\n\t\t\t\tthis._state.currentMatch,\n\t\t\t\tthis._state.searchString,\n\t\t\t),\n\t\t);\n\t\tMAX_MATCHES_COUNT_WIDTH = Math.max(\n\t\t\tMAX_MATCHES_COUNT_WIDTH,\n\t\t\tthis._matchesCount.clientWidth,\n\t\t);\n\t}\n\n\t// ----- actions\n\n\tprivate _getAriaLabel(\n\t\tlabel: string,\n\t\tcurrentMatch: Range | null,\n\t\tsearchString: string,\n\t): string {\n\t\tif (label === NLS_NO_RESULTS) {\n\t\t\treturn searchString === \"\"\n\t\t\t\t? nls.localize(\"ariaSearchNoResultEmpty\", \"{0} found\", label)\n\t\t\t\t: nls.localize(\n\t\t\t\t\t\t\"ariaSearchNoResult\",\n\t\t\t\t\t\t\"{0} found for '{1}'\",\n\t\t\t\t\t\tlabel,\n\t\t\t\t\t\tsearchString,\n\t\t\t\t\t);\n\t\t}\n\t\tif (currentMatch) {\n\t\t\tconst ariaLabel = nls.localize(\n\t\t\t\t\"ariaSearchNoResultWithLineNum\",\n\t\t\t\t\"{0} found for '{1}', at {2}\",\n\t\t\t\tlabel,\n\t\t\t\tsearchString,\n\t\t\t\tcurrentMatch.startLineNumber + \":\" + currentMatch.startColumn,\n\t\t\t);\n\t\t\tconst model = this._codeEditor.getModel();\n\t\t\tif (\n\t\t\t\tmodel &&\n\t\t\t\tcurrentMatch.startLineNumber <= model.getLineCount() &&\n\t\t\t\tcurrentMatch.startLineNumber >= 1\n\t\t\t) {\n\t\t\t\tconst lineContent = model.getLineContent(\n\t\t\t\t\tcurrentMatch.startLineNumber,\n\t\t\t\t);\n\t\t\t\treturn `${lineContent}, ${ariaLabel}`;\n\t\t\t}\n\n\t\t\treturn ariaLabel;\n\t\t}\n\n\t\treturn nls.localize(\n\t\t\t\"ariaSearchNoResultWithLineNumNoCurrentMatch\",\n\t\t\t\"{0} found for '{1}'\",\n\t\t\tlabel,\n\t\t\tsearchString,\n\t\t);\n\t}\n\n\t/**\n\t * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n\t * If 'selection find' is OFF we enable the button only if there is a selection.\n\t */\n\tprivate _updateToggleSelectionFindButton(): void {\n\t\tconst selection = this._codeEditor.getSelection();\n\t\tconst isSelection = selection\n\t\t\t? selection.startLineNumber !== selection.endLineNumber ||\n\t\t\t\tselection.startColumn !== selection.endColumn\n\t\t\t: false;\n\t\tconst isChecked = this._toggleSelectionFind.checked;\n\n\t\tif (this._isVisible && (isChecked || isSelection)) {\n\t\t\tthis._toggleSelectionFind.enable();\n\t\t} else {\n\t\t\tthis._toggleSelectionFind.disable();\n\t\t}\n\t}\n\n\tprivate _updateButtons(): void {\n\t\tthis._findInput.setEnabled(this._isVisible);\n\t\tthis._replaceInput.setEnabled(\n\t\t\tthis._isVisible && this._isReplaceVisible,\n\t\t);\n\t\tthis._updateToggleSelectionFindButton();\n\t\tthis._closeBtn.setEnabled(this._isVisible);\n\n\t\tconst findInputIsNonEmpty = this._state.searchString.length > 0;\n\t\tconst matchesCount = this._state.matchesCount ? true : false;\n\t\tthis._prevBtn.setEnabled(\n\t\t\tthis._isVisible &&\n\t\t\t\tfindInputIsNonEmpty &&\n\t\t\t\tmatchesCount &&\n\t\t\t\tthis._state.canNavigateBack(),\n\t\t);\n\t\tthis._nextBtn.setEnabled(\n\t\t\tthis._isVisible &&\n\t\t\t\tfindInputIsNonEmpty &&\n\t\t\t\tmatchesCount &&\n\t\t\t\tthis._state.canNavigateForward(),\n\t\t);\n\t\tthis._replaceBtn.setEnabled(\n\t\t\tthis._isVisible && this._isReplaceVisible && findInputIsNonEmpty,\n\t\t);\n\t\tthis._replaceAllBtn.setEnabled(\n\t\t\tthis._isVisible && this._isReplaceVisible && findInputIsNonEmpty,\n\t\t);\n\n\t\tthis._domNode.classList.toggle(\n\t\t\t\"replaceToggled\",\n\t\t\tthis._isReplaceVisible,\n\t\t);\n\t\tthis._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n\n\t\tconst canReplace = !this._codeEditor.getOption(EditorOption.readOnly);\n\t\tthis._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n\t}\n\n\tprivate _revealTimeouts: any[] = [];\n\n\tprivate _reveal(): void {\n\t\tthis._revealTimeouts.forEach((e) => {\n\t\t\tclearTimeout(e);\n\t\t});\n\n\t\tthis._revealTimeouts = [];\n\n\t\tif (!this._isVisible) {\n\t\t\tthis._isVisible = true;\n\n\t\t\tconst selection = this._codeEditor.getSelection();\n\n\t\t\tswitch (\n\t\t\t\tthis._codeEditor.getOption(EditorOption.find)\n\t\t\t\t\t.autoFindInSelection\n\t\t\t) {\n\t\t\t\tcase \"always\":\n\t\t\t\t\tthis._toggleSelectionFind.checked = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"never\":\n\t\t\t\t\tthis._toggleSelectionFind.checked = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"multiline\": {\n\t\t\t\t\tconst isSelectionMultipleLine =\n\t\t\t\t\t\t!!selection &&\n\t\t\t\t\t\tselection.startLineNumber !== selection.endLineNumber;\n\t\t\t\t\tthis._toggleSelectionFind.checked = isSelectionMultipleLine;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis._tryUpdateWidgetWidth();\n\t\t\tthis._updateButtons();\n\n\t\t\tthis._revealTimeouts.push(\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._domNode.classList.add(\"visible\");\n\t\t\t\t\tthis._domNode.setAttribute(\"aria-hidden\", \"false\");\n\t\t\t\t}, 0),\n\t\t\t);\n\n\t\t\t// validate query again as it's being dismissed when we hide the find widget.\n\t\t\tthis._revealTimeouts.push(\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._findInput.validate();\n\t\t\t\t}, 200),\n\t\t\t);\n\n\t\t\tthis._codeEditor.layoutOverlayWidget(this);\n\n\t\t\tlet adjustEditorScrollTop = true;\n\t\t\tif (\n\t\t\t\tthis._codeEditor.getOption(EditorOption.find)\n\t\t\t\t\t.seedSearchStringFromSelection &&\n\t\t\t\tselection\n\t\t\t) {\n\t\t\t\tconst domNode = this._codeEditor.getDomNode();\n\t\t\t\tif (domNode) {\n\t\t\t\t\tconst editorCoords = dom.getDomNodePagePosition(domNode);\n\t\t\t\t\tconst startCoords =\n\t\t\t\t\t\tthis._codeEditor.getScrolledVisiblePosition(\n\t\t\t\t\t\t\tselection.getStartPosition(),\n\t\t\t\t\t\t);\n\t\t\t\t\tconst startLeft =\n\t\t\t\t\t\teditorCoords.left +\n\t\t\t\t\t\t(startCoords ? startCoords.left : 0);\n\t\t\t\t\tconst startTop = startCoords ? startCoords.top : 0;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis._viewZone &&\n\t\t\t\t\t\tstartTop < this._viewZone.heightInPx\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tselection.endLineNumber > selection.startLineNumber\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tadjustEditorScrollTop = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst leftOfFindWidget = dom.getTopLeftOffset(\n\t\t\t\t\t\t\tthis._domNode,\n\t\t\t\t\t\t).left;\n\t\t\t\t\t\tif (startLeft > leftOfFindWidget) {\n\t\t\t\t\t\t\tadjustEditorScrollTop = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst endCoords =\n\t\t\t\t\t\t\tthis._codeEditor.getScrolledVisiblePosition(\n\t\t\t\t\t\t\t\tselection.getEndPosition(),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tconst endLeft =\n\t\t\t\t\t\t\teditorCoords.left +\n\t\t\t\t\t\t\t(endCoords ? endCoords.left : 0);\n\t\t\t\t\t\tif (endLeft > leftOfFindWidget) {\n\t\t\t\t\t\t\tadjustEditorScrollTop = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._showViewZone(adjustEditorScrollTop);\n\t\t}\n\t}\n\n\tprivate _hide(focusTheEditor: boolean): void {\n\t\tthis._revealTimeouts.forEach((e) => {\n\t\t\tclearTimeout(e);\n\t\t});\n\n\t\tthis._revealTimeouts = [];\n\n\t\tif (this._isVisible) {\n\t\t\tthis._isVisible = false;\n\n\t\t\tthis._updateButtons();\n\n\t\t\tthis._domNode.classList.remove(\"visible\");\n\t\t\tthis._domNode.setAttribute(\"aria-hidden\", \"true\");\n\t\t\tthis._findInput.clearMessage();\n\t\t\tif (focusTheEditor) {\n\t\t\t\tthis._codeEditor.focus();\n\t\t\t}\n\t\t\tthis._codeEditor.layoutOverlayWidget(this);\n\t\t\tthis._removeViewZone();\n\t\t}\n\t}\n\n\tprivate _layoutViewZone(targetScrollTop?: number) {\n\t\tconst addExtraSpaceOnTop = this._codeEditor.getOption(\n\t\t\tEditorOption.find,\n\t\t).addExtraSpaceOnTop;\n\n\t\tif (!addExtraSpaceOnTop) {\n\t\t\tthis._removeViewZone();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tconst viewZone = this._viewZone;\n\t\tif (this._viewZoneId !== undefined || !viewZone) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._codeEditor.changeViewZones((accessor) => {\n\t\t\tviewZone.heightInPx = this._getHeight();\n\t\t\tthis._viewZoneId = accessor.addZone(viewZone);\n\t\t\t// scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n\t\t\tthis._codeEditor.setScrollTop(\n\t\t\t\ttargetScrollTop ||\n\t\t\t\t\tthis._codeEditor.getScrollTop() + viewZone.heightInPx,\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate _showViewZone(adjustScroll = true) {\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst addExtraSpaceOnTop = this._codeEditor.getOption(\n\t\t\tEditorOption.find,\n\t\t).addExtraSpaceOnTop;\n\n\t\tif (!addExtraSpaceOnTop) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._viewZone === undefined) {\n\t\t\tthis._viewZone = new FindWidgetViewZone(0);\n\t\t}\n\n\t\tconst viewZone = this._viewZone;\n\n\t\tthis._codeEditor.changeViewZones((accessor) => {\n\t\t\tif (this._viewZoneId !== undefined) {\n\t\t\t\t// the view zone already exists, we need to update the height\n\t\t\t\tconst newHeight = this._getHeight();\n\t\t\t\tif (newHeight === viewZone.heightInPx) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst scrollAdjustment = newHeight - viewZone.heightInPx;\n\t\t\t\tviewZone.heightInPx = newHeight;\n\t\t\t\taccessor.layoutZone(this._viewZoneId);\n\n\t\t\t\tif (adjustScroll) {\n\t\t\t\t\tthis._codeEditor.setScrollTop(\n\t\t\t\t\t\tthis._codeEditor.getScrollTop() + scrollAdjustment,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tlet scrollAdjustment = this._getHeight();\n\n\t\t\t\t// if the editor has top padding, factor that into the zone height\n\t\t\t\tscrollAdjustment -= this._codeEditor.getOption(\n\t\t\t\t\tEditorOption.padding,\n\t\t\t\t).top;\n\t\t\t\tif (scrollAdjustment <= 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tviewZone.heightInPx = scrollAdjustment;\n\t\t\t\tthis._viewZoneId = accessor.addZone(viewZone);\n\n\t\t\t\tif (adjustScroll) {\n\t\t\t\t\tthis._codeEditor.setScrollTop(\n\t\t\t\t\t\tthis._codeEditor.getScrollTop() + scrollAdjustment,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _removeViewZone() {\n\t\tthis._codeEditor.changeViewZones((accessor) => {\n\t\t\tif (this._viewZoneId !== undefined) {\n\t\t\t\taccessor.removeZone(this._viewZoneId);\n\t\t\t\tthis._viewZoneId = undefined;\n\t\t\t\tif (this._viewZone) {\n\t\t\t\t\tthis._codeEditor.setScrollTop(\n\t\t\t\t\t\tthis._codeEditor.getScrollTop() -\n\t\t\t\t\t\t\tthis._viewZone.heightInPx,\n\t\t\t\t\t);\n\t\t\t\t\tthis._viewZone = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _tryUpdateWidgetWidth() {\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this._domNode.isConnected) {\n\t\t\t// the widget is not in the DOM\n\t\t\treturn;\n\t\t}\n\n\t\tconst layoutInfo = this._codeEditor.getLayoutInfo();\n\t\tconst editorContentWidth = layoutInfo.contentWidth;\n\n\t\tif (editorContentWidth <= 0) {\n\t\t\t// for example, diff view original editor\n\t\t\tthis._domNode.classList.add(\"hiddenEditor\");\n\t\t\treturn;\n\t\t} else if (this._domNode.classList.contains(\"hiddenEditor\")) {\n\t\t\tthis._domNode.classList.remove(\"hiddenEditor\");\n\t\t}\n\n\t\tconst editorWidth = layoutInfo.width;\n\t\tconst minimapWidth = layoutInfo.minimap.minimapWidth;\n\t\tlet collapsedFindWidget = false;\n\t\tlet reducedFindWidget = false;\n\t\tlet narrowFindWidget = false;\n\n\t\tif (this._resized) {\n\t\t\tconst widgetWidth = dom.getTotalWidth(this._domNode);\n\n\t\t\tif (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t// as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n\t\t\t\tthis._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(\n\t\t\t\t\tthis._findInput.domNode,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n\t\t\treducedFindWidget = true;\n\t\t}\n\t\tif (\n\t\t\tFIND_WIDGET_INITIAL_WIDTH +\n\t\t\t\t28 +\n\t\t\t\tminimapWidth -\n\t\t\t\tMAX_MATCHES_COUNT_WIDTH >=\n\t\t\teditorWidth\n\t\t) {\n\t\t\tnarrowFindWidget = true;\n\t\t}\n\t\tif (\n\t\t\tFIND_WIDGET_INITIAL_WIDTH +\n\t\t\t\t28 +\n\t\t\t\tminimapWidth -\n\t\t\t\tMAX_MATCHES_COUNT_WIDTH >=\n\t\t\teditorWidth + 50\n\t\t) {\n\t\t\tcollapsedFindWidget = true;\n\t\t}\n\t\tthis._domNode.classList.toggle(\n\t\t\t\"collapsed-find-widget\",\n\t\t\tcollapsedFindWidget,\n\t\t);\n\t\tthis._domNode.classList.toggle(\"narrow-find-widget\", narrowFindWidget);\n\t\tthis._domNode.classList.toggle(\n\t\t\t\"reduced-find-widget\",\n\t\t\treducedFindWidget,\n\t\t);\n\n\t\tif (!narrowFindWidget && !collapsedFindWidget) {\n\t\t\t// the minimal left offset of findwidget is 15px.\n\t\t\tthis._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n\t\t}\n\n\t\tthis._findInput.layout({\n\t\t\tcollapsedFindWidget,\n\t\t\tnarrowFindWidget,\n\t\t\treducedFindWidget,\n\t\t});\n\t\tif (this._resized) {\n\t\t\tconst findInputWidth = this._findInput.inputBox.element.clientWidth;\n\t\t\tif (findInputWidth > 0) {\n\t\t\t\tthis._replaceInput.width = findInputWidth;\n\t\t\t}\n\t\t} else if (this._isReplaceVisible) {\n\t\t\tthis._replaceInput.width = dom.getTotalWidth(\n\t\t\t\tthis._findInput.domNode,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _getHeight(): number {\n\t\tlet totalheight = 0;\n\n\t\t// find input margin top\n\t\ttotalheight += 4;\n\n\t\t// find input height\n\t\ttotalheight +=\n\t\t\tthis._findInput.inputBox.height + 2 /** input box border */;\n\n\t\tif (this._isReplaceVisible) {\n\t\t\t// replace input margin\n\t\t\ttotalheight += 4;\n\n\t\t\ttotalheight +=\n\t\t\t\tthis._replaceInput.inputBox.height + 2 /** input box border */;\n\t\t}\n\n\t\t// margin bottom\n\t\ttotalheight += 4;\n\t\treturn totalheight;\n\t}\n\n\tprivate _tryUpdateHeight(): boolean {\n\t\tconst totalHeight = this._getHeight();\n\t\tif (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._cachedHeight = totalHeight;\n\t\tthis._domNode.style.height = `${totalHeight}px`;\n\n\t\treturn true;\n\t}\n\n\t// ----- Public\n\n\tpublic focusFindInput(): void {\n\t\tthis._findInput.select();\n\t\t// Edge browser requires focus() in addition to select()\n\t\tthis._findInput.focus();\n\t}\n\n\tpublic focusReplaceInput(): void {\n\t\tthis._replaceInput.select();\n\t\t// Edge browser requires focus() in addition to select()\n\t\tthis._replaceInput.focus();\n\t}\n\n\tpublic highlightFindOptions(): void {\n\t\tthis._findInput.highlightFindOptions();\n\t}\n\n\tprivate _updateSearchScope(): void {\n\t\tif (!this._codeEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._toggleSelectionFind.checked) {\n\t\t\tconst selections = this._codeEditor.getSelections();\n\n\t\t\tselections\n\t\t\t\t.map((selection) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tselection.endColumn === 1 &&\n\t\t\t\t\t\tselection.endLineNumber > selection.startLineNumber\n\t\t\t\t\t) {\n\t\t\t\t\t\tselection = selection.setEndPosition(\n\t\t\t\t\t\t\tselection.endLineNumber - 1,\n\t\t\t\t\t\t\tthis._codeEditor\n\t\t\t\t\t\t\t\t.getModel()!\n\t\t\t\t\t\t\t\t.getLineMaxColumn(selection.endLineNumber - 1),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tconst currentMatch = this._state.currentMatch;\n\t\t\t\t\tif (selection.startLineNumber !== selection.endLineNumber) {\n\t\t\t\t\t\tif (!Range.equalsRange(selection, currentMatch)) {\n\t\t\t\t\t\t\treturn selection;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t})\n\t\t\t\t.filter((element) => !!element);\n\n\t\t\tif (selections.length) {\n\t\t\t\tthis._state.change(\n\t\t\t\t\t{ searchScope: selections as Range[] },\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _onFindInputMouseDown(e: IMouseEvent): void {\n\t\t// on linux, middle key does pasting.\n\t\tif (e.middleButton) {\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\tprivate _onFindInputKeyDown(e: IKeyboardEvent): void {\n\t\tif (e.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tif (this._keybindingService.dispatchEvent(e, e.target)) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis._findInput.inputBox.insertAtCursor(\"\\n\");\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\tif (this._isReplaceVisible) {\n\t\t\t\tthis._replaceInput.focus();\n\t\t\t} else {\n\t\t\t\tthis._findInput.focusOnCaseSensitive();\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyMod.CtrlCmd | KeyCode.DownArrow)) {\n\t\t\tthis._codeEditor.focus();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyCode.UpArrow)) {\n\t\t\treturn stopPropagationForMultiLineUpwards(\n\t\t\t\te,\n\t\t\t\tthis._findInput.getValue(),\n\t\t\t\tthis._findInput.domNode.querySelector(\"textarea\"),\n\t\t\t);\n\t\t}\n\n\t\tif (e.equals(KeyCode.DownArrow)) {\n\t\t\treturn stopPropagationForMultiLineDownwards(\n\t\t\t\te,\n\t\t\t\tthis._findInput.getValue(),\n\t\t\t\tthis._findInput.domNode.querySelector(\"textarea\"),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _onReplaceInputKeyDown(e: IKeyboardEvent): void {\n\t\tif (e.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tif (this._keybindingService.dispatchEvent(e, e.target)) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tplatform.isWindows &&\n\t\t\t\t\tplatform.isNative &&\n\t\t\t\t\t!this._ctrlEnterReplaceAllWarningPrompted\n\t\t\t\t) {\n\t\t\t\t\t// this is the first time when users press Ctrl + Enter to replace all\n\t\t\t\t\tthis._notificationService.info(\n\t\t\t\t\t\tnls.localize(\n\t\t\t\t\t\t\t\"ctrlEnter.keybindingChanged\",\n\t\t\t\t\t\t\t\"Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\n\t\t\t\t\tthis._ctrlEnterReplaceAllWarningPrompted = true;\n\t\t\t\t\tthis._storageService.store(\n\t\t\t\t\t\tctrlEnterReplaceAllWarningPromptedKey,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tStorageScope.PROFILE,\n\t\t\t\t\t\tStorageTarget.USER,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis._replaceInput.inputBox.insertAtCursor(\"\\n\");\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\tthis._findInput.focusOnCaseSensitive();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis._findInput.focus();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyMod.CtrlCmd | KeyCode.DownArrow)) {\n\t\t\tthis._codeEditor.focus();\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.equals(KeyCode.UpArrow)) {\n\t\t\treturn stopPropagationForMultiLineUpwards(\n\t\t\t\te,\n\t\t\t\tthis._replaceInput.inputBox.value,\n\t\t\t\tthis._replaceInput.inputBox.element.querySelector(\"textarea\"),\n\t\t\t);\n\t\t}\n\n\t\tif (e.equals(KeyCode.DownArrow)) {\n\t\t\treturn stopPropagationForMultiLineDownwards(\n\t\t\t\te,\n\t\t\t\tthis._replaceInput.inputBox.value,\n\t\t\t\tthis._replaceInput.inputBox.element.querySelector(\"textarea\"),\n\t\t\t);\n\t\t}\n\t}\n\n\t// ----- sash\n\tpublic getVerticalSashLeft(_sash: Sash): number {\n\t\treturn 0;\n\t}\n\t// ----- initialization\n\n\tprivate _keybindingLabelFor(actionId: string): string {\n\t\tconst kb = this._keybindingService.lookupKeybinding(actionId);\n\t\tif (!kb) {\n\t\t\treturn \"\";\n\t\t}\n\t\treturn ` (${kb.getLabel()})`;\n\t}\n\n\tprivate _buildDomNode(): void {\n\t\tconst flexibleHeight = true;\n\t\tconst flexibleWidth = true;\n\t\t// Find input\n\t\tthis._findInput = this._register(\n\t\t\tnew ContextScopedFindInput(\n\t\t\t\tnull,\n\t\t\t\tthis._contextViewProvider,\n\t\t\t\t{\n\t\t\t\t\twidth: FIND_INPUT_AREA_WIDTH,\n\t\t\t\t\tlabel: NLS_FIND_INPUT_LABEL,\n\t\t\t\t\tplaceholder: NLS_FIND_INPUT_PLACEHOLDER,\n\t\t\t\t\tappendCaseSensitiveLabel: this._keybindingLabelFor(\n\t\t\t\t\t\tFIND_IDS.ToggleCaseSensitiveCommand,\n\t\t\t\t\t),\n\t\t\t\t\tappendWholeWordsLabel: this._keybindingLabelFor(\n\t\t\t\t\t\tFIND_IDS.ToggleWholeWordCommand,\n\t\t\t\t\t),\n\t\t\t\t\tappendRegexLabel: this._keybindingLabelFor(\n\t\t\t\t\t\tFIND_IDS.ToggleRegexCommand,\n\t\t\t\t\t),\n\t\t\t\t\tvalidation: (value: string): InputBoxMessage | null => {\n\t\t\t\t\t\tif (value.length === 0 || !this._findInput.getRegex()) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// use `g` and `u` which are also used by the TextModel search\n\t\t\t\t\t\t\tnew RegExp(value, \"gu\");\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn { content: e.message };\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tflexibleHeight,\n\t\t\t\t\tflexibleWidth,\n\t\t\t\t\tflexibleMaxHeight: 118,\n\t\t\t\t\tshowCommonFindToggles: true,\n\t\t\t\t\tshowHistoryHint: () =>\n\t\t\t\t\t\tshowHistoryKeybindingHint(this._keybindingService),\n\t\t\t\t\tinputBoxStyles: defaultInputBoxStyles,\n\t\t\t\t\ttoggleStyles: defaultToggleStyles,\n\t\t\t\t},\n\t\t\t\tthis._contextKeyService,\n\t\t\t),\n\t\t);\n\t\tthis._findInput.setRegex(!!this._state.isRegex);\n\t\tthis._findInput.setCaseSensitive(!!this._state.matchCase);\n\t\tthis._findInput.setWholeWords(!!this._state.wholeWord);\n\t\tthis._register(\n\t\t\tthis._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findInput.inputBox.onDidChange(() => {\n\t\t\t\tif (this._ignoreChangeEvent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._state.change(\n\t\t\t\t\t{ searchString: this._findInput.getValue() },\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findInput.onDidOptionChange(() => {\n\t\t\t\tthis._state.change(\n\t\t\t\t\t{\n\t\t\t\t\t\tisRegex: this._findInput.getRegex(),\n\t\t\t\t\t\twholeWord: this._findInput.getWholeWords(),\n\t\t\t\t\t\tmatchCase: this._findInput.getCaseSensitive(),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findInput.onCaseSensitiveKeyDown((e) => {\n\t\t\t\tif (e.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\t\tthis._replaceInput.focus();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findInput.onRegexKeyDown((e) => {\n\t\t\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\t\tthis._replaceInput.focusOnPreserve();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findInput.inputBox.onDidHeightChange((e) => {\n\t\t\t\tif (this._tryUpdateHeight()) {\n\t\t\t\t\tthis._showViewZone();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tif (platform.isLinux) {\n\t\t\tthis._register(\n\t\t\t\tthis._findInput.onMouseDown((e) =>\n\t\t\t\t\tthis._onFindInputMouseDown(e),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tthis._matchesCount = document.createElement(\"div\");\n\t\tthis._matchesCount.className = \"matchesCount\";\n\t\tthis._updateMatchesCount();\n\n\t\t// Create a scoped hover delegate for all find related buttons\n\t\tconst hoverDelegate = this._register(createInstantHoverDelegate());\n\n\t\t// Previous button\n\t\tthis._prevBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel:\n\t\t\t\t\t\tNLS_PREVIOUS_MATCH_BTN_LABEL +\n\t\t\t\t\t\tthis._keybindingLabelFor(\n\t\t\t\t\t\t\tFIND_IDS.PreviousMatchFindAction,\n\t\t\t\t\t\t),\n\t\t\t\t\ticon: findPreviousMatchIcon,\n\t\t\t\t\thoverDelegate,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tassertIsDefined(\n\t\t\t\t\t\t\tthis._codeEditor.getAction(\n\t\t\t\t\t\t\t\tFIND_IDS.PreviousMatchFindAction,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.run()\n\t\t\t\t\t\t\t.then(undefined, onUnexpectedError);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tthis._hoverService,\n\t\t\t),\n\t\t);\n\n\t\t// Next button\n\t\tthis._nextBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel:\n\t\t\t\t\t\tNLS_NEXT_MATCH_BTN_LABEL +\n\t\t\t\t\t\tthis._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n\t\t\t\t\ticon: findNextMatchIcon,\n\t\t\t\t\thoverDelegate,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tassertIsDefined(\n\t\t\t\t\t\t\tthis._codeEditor.getAction(\n\t\t\t\t\t\t\t\tFIND_IDS.NextMatchFindAction,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.run()\n\t\t\t\t\t\t\t.then(undefined, onUnexpectedError);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tthis._hoverService,\n\t\t\t),\n\t\t);\n\n\t\tconst findPart = document.createElement(\"div\");\n\t\tfindPart.className = \"find-part\";\n\t\tfindPart.appendChild(this._findInput.domNode);\n\t\tconst actionsContainer = document.createElement(\"div\");\n\t\tactionsContainer.className = \"find-actions\";\n\t\tfindPart.appendChild(actionsContainer);\n\t\tactionsContainer.appendChild(this._matchesCount);\n\t\tactionsContainer.appendChild(this._prevBtn.domNode);\n\t\tactionsContainer.appendChild(this._nextBtn.domNode);\n\n\t\t// Toggle selection button\n\t\tthis._toggleSelectionFind = this._register(\n\t\t\tnew Toggle({\n\t\t\t\ticon: findSelectionIcon,\n\t\t\t\ttitle:\n\t\t\t\t\tNLS_TOGGLE_SELECTION_FIND_TITLE +\n\t\t\t\t\tthis._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n\t\t\t\tisChecked: false,\n\t\t\t\thoverDelegate: hoverDelegate,\n\t\t\t\tinputActiveOptionBackground: asCssVariable(\n\t\t\t\t\tinputActiveOptionBackground,\n\t\t\t\t),\n\t\t\t\tinputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n\t\t\t\tinputActiveOptionForeground: asCssVariable(\n\t\t\t\t\tinputActiveOptionForeground,\n\t\t\t\t),\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._toggleSelectionFind.onChange(() => {\n\t\t\t\tif (this._toggleSelectionFind.checked) {\n\t\t\t\t\tif (this._codeEditor.hasModel()) {\n\t\t\t\t\t\tlet selections = this._codeEditor.getSelections();\n\t\t\t\t\t\tselections = selections\n\t\t\t\t\t\t\t.map((selection) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tselection.endColumn === 1 &&\n\t\t\t\t\t\t\t\t\tselection.endLineNumber >\n\t\t\t\t\t\t\t\t\t\tselection.startLineNumber\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tselection = selection.setEndPosition(\n\t\t\t\t\t\t\t\t\t\tselection.endLineNumber - 1,\n\t\t\t\t\t\t\t\t\t\tthis._codeEditor\n\t\t\t\t\t\t\t\t\t\t\t.getModel()!\n\t\t\t\t\t\t\t\t\t\t\t.getLineMaxColumn(\n\t\t\t\t\t\t\t\t\t\t\t\tselection.endLineNumber - 1,\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!selection.isEmpty()) {\n\t\t\t\t\t\t\t\t\treturn selection;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(element): element is Selection => !!element,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (selections.length) {\n\t\t\t\t\t\t\tthis._state.change(\n\t\t\t\t\t\t\t\t{ searchScope: selections as Range[] },\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._state.change({ searchScope: null }, true);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tactionsContainer.appendChild(this._toggleSelectionFind.domNode);\n\n\t\t// Close button\n\t\tthis._closeBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel:\n\t\t\t\t\t\tNLS_CLOSE_BTN_LABEL +\n\t\t\t\t\t\tthis._keybindingLabelFor(\n\t\t\t\t\t\t\tFIND_IDS.CloseFindWidgetCommand,\n\t\t\t\t\t\t),\n\t\t\t\t\ticon: widgetClose,\n\t\t\t\t\thoverDelegate,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis._state.change(\n\t\t\t\t\t\t\t{ isRevealed: false, searchScope: null },\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tonKeyDown: (e) => {\n\t\t\t\t\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\t\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\t\t\t\tif (this._replaceBtn.isEnabled()) {\n\t\t\t\t\t\t\t\t\tthis._replaceBtn.focus();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis._codeEditor.focus();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tthis._hoverService,\n\t\t\t),\n\t\t);\n\n\t\t// Replace input\n\t\tthis._replaceInput = this._register(\n\t\t\tnew ContextScopedReplaceInput(\n\t\t\t\tnull,\n\t\t\t\tundefined,\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_REPLACE_INPUT_LABEL,\n\t\t\t\t\tplaceholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n\t\t\t\t\tappendPreserveCaseLabel: this._keybindingLabelFor(\n\t\t\t\t\t\tFIND_IDS.TogglePreserveCaseCommand,\n\t\t\t\t\t),\n\t\t\t\t\thistory: [],\n\t\t\t\t\tflexibleHeight,\n\t\t\t\t\tflexibleWidth,\n\t\t\t\t\tflexibleMaxHeight: 118,\n\t\t\t\t\tshowHistoryHint: () =>\n\t\t\t\t\t\tshowHistoryKeybindingHint(this._keybindingService),\n\t\t\t\t\tinputBoxStyles: defaultInputBoxStyles,\n\t\t\t\t\ttoggleStyles: defaultToggleStyles,\n\t\t\t\t},\n\t\t\t\tthis._contextKeyService,\n\t\t\t\ttrue,\n\t\t\t),\n\t\t);\n\t\tthis._replaceInput.setPreserveCase(!!this._state.preserveCase);\n\t\tthis._register(\n\t\t\tthis._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._replaceInput.inputBox.onDidChange(() => {\n\t\t\t\tthis._state.change(\n\t\t\t\t\t{ replaceString: this._replaceInput.inputBox.value },\n\t\t\t\t\tfalse,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._replaceInput.inputBox.onDidHeightChange((e) => {\n\t\t\t\tif (this._isReplaceVisible && this._tryUpdateHeight()) {\n\t\t\t\t\tthis._showViewZone();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._replaceInput.onDidOptionChange(() => {\n\t\t\t\tthis._state.change(\n\t\t\t\t\t{\n\t\t\t\t\t\tpreserveCase: this._replaceInput.getPreserveCase(),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._replaceInput.onPreserveCaseKeyDown((e) => {\n\t\t\t\tif (e.equals(KeyCode.Tab)) {\n\t\t\t\t\tif (this._prevBtn.isEnabled()) {\n\t\t\t\t\t\tthis._prevBtn.focus();\n\t\t\t\t\t} else if (this._nextBtn.isEnabled()) {\n\t\t\t\t\t\tthis._nextBtn.focus();\n\t\t\t\t\t} else if (this._toggleSelectionFind.enabled) {\n\t\t\t\t\t\tthis._toggleSelectionFind.focus();\n\t\t\t\t\t} else if (this._closeBtn.isEnabled()) {\n\t\t\t\t\t\tthis._closeBtn.focus();\n\t\t\t\t\t}\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\t// Create scoped hover delegate for replace actions\n\t\tconst replaceHoverDelegate = this._register(\n\t\t\tcreateInstantHoverDelegate(),\n\t\t);\n\n\t\t// Replace one button\n\t\tthis._replaceBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel:\n\t\t\t\t\t\tNLS_REPLACE_BTN_LABEL +\n\t\t\t\t\t\tthis._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n\t\t\t\t\ticon: findReplaceIcon,\n\t\t\t\t\thoverDelegate: replaceHoverDelegate,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis._controller.replace();\n\t\t\t\t\t},\n\t\t\t\t\tonKeyDown: (e) => {\n\t\t\t\t\t\tif (e.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\t\t\t\tthis._closeBtn.focus();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tthis._hoverService,\n\t\t\t),\n\t\t);\n\n\t\t// Replace all button\n\t\tthis._replaceAllBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel:\n\t\t\t\t\t\tNLS_REPLACE_ALL_BTN_LABEL +\n\t\t\t\t\t\tthis._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n\t\t\t\t\ticon: findReplaceAllIcon,\n\t\t\t\t\thoverDelegate: replaceHoverDelegate,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis._controller.replaceAll();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tthis._hoverService,\n\t\t\t),\n\t\t);\n\n\t\tconst replacePart = document.createElement(\"div\");\n\t\treplacePart.className = \"replace-part\";\n\t\treplacePart.appendChild(this._replaceInput.domNode);\n\n\t\tconst replaceActionsContainer = document.createElement(\"div\");\n\t\treplaceActionsContainer.className = \"replace-actions\";\n\t\treplacePart.appendChild(replaceActionsContainer);\n\n\t\treplaceActionsContainer.appendChild(this._replaceBtn.domNode);\n\t\treplaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n\n\t\t// Toggle replace button\n\t\tthis._toggleReplaceBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n\t\t\t\t\tclassName: \"codicon toggle left\",\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis._state.change(\n\t\t\t\t\t\t\t{ isReplaceRevealed: !this._isReplaceVisible },\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(\n\t\t\t\t\t\t\t\tthis._findInput.domNode,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis._replaceInput.inputBox.layout();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._showViewZone();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tthis._hoverService,\n\t\t\t),\n\t\t);\n\t\tthis._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n\n\t\t// Widget\n\t\tthis._domNode = document.createElement(\"div\");\n\t\tthis._domNode.className = \"editor-widget find-widget\";\n\t\tthis._domNode.setAttribute(\"aria-hidden\", \"true\");\n\t\tthis._domNode.ariaLabel = NLS_FIND_DIALOG_LABEL;\n\t\tthis._domNode.role = \"dialog\";\n\n\t\t// We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n\t\tthis._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n\n\t\tthis._domNode.appendChild(this._toggleReplaceBtn.domNode);\n\t\tthis._domNode.appendChild(findPart);\n\t\tthis._domNode.appendChild(this._closeBtn.domNode);\n\t\tthis._domNode.appendChild(replacePart);\n\n\t\tthis._resizeSash = this._register(\n\t\t\tnew Sash(this._domNode, this, {\n\t\t\t\torientation: Orientation.VERTICAL,\n\t\t\t\tsize: 2,\n\t\t\t}),\n\t\t);\n\t\tthis._resized = false;\n\t\tlet originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n\n\t\tthis._register(\n\t\t\tthis._resizeSash.onDidStart(() => {\n\t\t\t\toriginalWidth = dom.getTotalWidth(this._domNode);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._resizeSash.onDidChange((evt: ISashEvent) => {\n\t\t\t\tthis._resized = true;\n\t\t\t\tconst width = originalWidth + evt.startX - evt.currentX;\n\n\t\t\t\tif (width < FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t\t// narrow down the find widget should be handled by CSS.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst maxWidth =\n\t\t\t\t\tNumber.parseFloat(\n\t\t\t\t\t\tdom.getComputedStyle(this._domNode).maxWidth,\n\t\t\t\t\t) || 0;\n\t\t\t\tif (width > maxWidth) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._domNode.style.width = `${width}px`;\n\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(\n\t\t\t\t\t\tthis._findInput.domNode,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis._findInput.inputBox.layout();\n\t\t\t\tthis._tryUpdateHeight();\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._resizeSash.onDidReset(() => {\n\t\t\t\t// users double click on the sash\n\t\t\t\tconst currentWidth = dom.getTotalWidth(this._domNode);\n\n\t\t\t\tif (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t\t// The editor is narrow and the width of the find widget is controlled fully by CSS.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet width = FIND_WIDGET_INITIAL_WIDTH;\n\n\t\t\t\tif (\n\t\t\t\t\t!this._resized ||\n\t\t\t\t\tcurrentWidth === FIND_WIDGET_INITIAL_WIDTH\n\t\t\t\t) {\n\t\t\t\t\t// 1. never resized before, double click should maximizes it\n\t\t\t\t\t// 2. users resized it already but its width is the same as default\n\t\t\t\t\tconst layoutInfo = this._codeEditor.getLayoutInfo();\n\t\t\t\t\twidth =\n\t\t\t\t\t\tlayoutInfo.width -\n\t\t\t\t\t\t28 -\n\t\t\t\t\t\tlayoutInfo.minimap.minimapWidth -\n\t\t\t\t\t\t15;\n\t\t\t\t\tthis._resized = true;\n\t\t\t\t} else {\n\t\t\t\t\t/**\n\t\t\t\t\t * no op, the find widget should be shrinked to its default size.\n\t\t\t\t\t */\n\t\t\t\t}\n\n\t\t\t\tthis._domNode.style.width = `${width}px`;\n\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(\n\t\t\t\t\t\tthis._findInput.domNode,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis._findInput.inputBox.layout();\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate updateAccessibilitySupport(): void {\n\t\tconst value = this._codeEditor.getOption(\n\t\t\tEditorOption.accessibilitySupport,\n\t\t);\n\t\tthis._findInput.setFocusInputOnOptionClick(\n\t\t\tvalue !== AccessibilitySupport.Enabled,\n\t\t);\n\t}\n\n\tgetViewState() {\n\t\tlet widgetViewZoneVisible = false;\n\t\tif (this._viewZone && this._viewZoneId) {\n\t\t\twidgetViewZoneVisible =\n\t\t\t\tthis._viewZone.heightInPx > this._codeEditor.getScrollTop();\n\t\t}\n\n\t\treturn {\n\t\t\twidgetViewZoneVisible,\n\t\t\tscrollTop: this._codeEditor.getScrollTop(),\n\t\t};\n\t}\n\n\tsetViewState(state?: {\n\t\twidgetViewZoneVisible: boolean;\n\t\tscrollTop: number;\n\t}) {\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (state.widgetViewZoneVisible) {\n\t\t\t// we should add the view zone\n\t\t\tthis._layoutViewZone(state.scrollTop);\n\t\t}\n\t}\n}\n\nexport interface ISimpleButtonOpts {\n\treadonly label: string;\n\treadonly className?: string;\n\treadonly icon?: ThemeIcon;\n\treadonly hoverDelegate?: IHoverDelegate;\n\treadonly onTrigger: () => void;\n\treadonly onKeyDown?: (e: IKeyboardEvent) => void;\n}\n\nexport class SimpleButton extends Widget {\n\tprivate readonly _opts: ISimpleButtonOpts;\n\tprivate readonly _domNode: HTMLElement;\n\n\tconstructor(opts: ISimpleButtonOpts, hoverService: IHoverService) {\n\t\tsuper();\n\t\tthis._opts = opts;\n\n\t\tlet className = \"button\";\n\t\tif (this._opts.className) {\n\t\t\tclassName = className + \" \" + this._opts.className;\n\t\t}\n\t\tif (this._opts.icon) {\n\t\t\tclassName =\n\t\t\t\tclassName + \" \" + ThemeIcon.asClassName(this._opts.icon);\n\t\t}\n\n\t\tthis._domNode = document.createElement(\"div\");\n\t\tthis._domNode.tabIndex = 0;\n\t\tthis._domNode.className = className;\n\t\tthis._domNode.setAttribute(\"role\", \"button\");\n\t\tthis._domNode.setAttribute(\"aria-label\", this._opts.label);\n\t\tthis._register(\n\t\t\thoverService.setupManagedHover(\n\t\t\t\topts.hoverDelegate ?? getDefaultHoverDelegate(\"element\"),\n\t\t\t\tthis._domNode,\n\t\t\t\tthis._opts.label,\n\t\t\t),\n\t\t);\n\n\t\tthis.onclick(this._domNode, (e) => {\n\t\t\tthis._opts.onTrigger();\n\t\t\te.preventDefault();\n\t\t});\n\n\t\tthis.onkeydown(this._domNode, (e) => {\n\t\t\tif (e.equals(KeyCode.Space) || e.equals(KeyCode.Enter)) {\n\t\t\t\tthis._opts.onTrigger();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._opts.onKeyDown?.(e);\n\t\t});\n\t}\n\n\tpublic get domNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic isEnabled(): boolean {\n\t\treturn this._domNode.tabIndex >= 0;\n\t}\n\n\tpublic focus(): void {\n\t\tthis._domNode.focus();\n\t}\n\n\tpublic setEnabled(enabled: boolean): void {\n\t\tthis._domNode.classList.toggle(\"disabled\", !enabled);\n\t\tthis._domNode.setAttribute(\"aria-disabled\", String(!enabled));\n\t\tthis._domNode.tabIndex = enabled ? 0 : -1;\n\t}\n\n\tpublic setExpanded(expanded: boolean): void {\n\t\tthis._domNode.setAttribute(\"aria-expanded\", String(!!expanded));\n\t\tif (expanded) {\n\t\t\tthis._domNode.classList.remove(\n\t\t\t\t...ThemeIcon.asClassNameArray(findCollapsedIcon),\n\t\t\t);\n\t\t\tthis._domNode.classList.add(\n\t\t\t\t...ThemeIcon.asClassNameArray(findExpandedIcon),\n\t\t\t);\n\t\t} else {\n\t\t\tthis._domNode.classList.remove(\n\t\t\t\t...ThemeIcon.asClassNameArray(findExpandedIcon),\n\t\t\t);\n\t\t\tthis._domNode.classList.add(\n\t\t\t\t...ThemeIcon.asClassNameArray(findCollapsedIcon),\n\t\t\t);\n\t\t}\n\t}\n}\n\n// theming\n\nregisterThemingParticipant((theme, collector) => {\n\tconst findMatchHighlightBorder = theme.getColor(\n\t\teditorFindMatchHighlightBorder,\n\t);\n\tif (findMatchHighlightBorder) {\n\t\tcollector.addRule(\n\t\t\t`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? \"dotted\" : \"solid\"} ${findMatchHighlightBorder}; box-sizing: border-box; }`,\n\t\t);\n\t}\n\n\tconst findRangeHighlightBorder = theme.getColor(\n\t\teditorFindRangeHighlightBorder,\n\t);\n\tif (findRangeHighlightBorder) {\n\t\tcollector.addRule(\n\t\t\t`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? \"dashed\" : \"solid\"} ${findRangeHighlightBorder}; }`,\n\t\t);\n\t}\n\n\tconst hcBorder = theme.getColor(contrastBorder);\n\tif (hcBorder) {\n\t\tcollector.addRule(\n\t\t\t`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`,\n\t\t);\n\t}\n\tconst findMatchForeground = theme.getColor(editorFindMatchForeground);\n\tif (findMatchForeground) {\n\t\tcollector.addRule(\n\t\t\t`.monaco-editor .findMatchInline { color: ${findMatchForeground}; }`,\n\t\t);\n\t}\n\tconst findMatchHighlightForeground = theme.getColor(\n\t\teditorFindMatchHighlightForeground,\n\t);\n\tif (findMatchHighlightForeground) {\n\t\tcollector.addRule(\n\t\t\t`.monaco-editor .currentFindMatchInline { color: ${findMatchHighlightForeground}; }`,\n\t\t);\n\t}\n});\n"],
  "mappings": "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",
  "names": []
}
