import{Range as s}from"../../../common/core/range.js";class c{_editorSelection;_trackedEditorSelectionId;_ranges;_replaceStrings;constructor(n,o,t){this._editorSelection=n,this._ranges=o,this._replaceStrings=t,this._trackedEditorSelectionId=null}getEditOperations(n,o){if(this._ranges.length>0){const t=[];for(let e=0;e<this._ranges.length;e++)t.push({range:this._ranges[e],text:this._replaceStrings[e]});t.sort((e,a)=>s.compareRangesUsingStarts(e.range,a.range));const i=[];let r=t[0];for(let e=1;e<t.length;e++)r.range.endLineNumber===t[e].range.startLineNumber&&r.range.endColumn===t[e].range.startColumn?(r.range=r.range.plusRange(t[e].range),r.text=r.text+t[e].text):(i.push(r),r=t[e]);i.push(r);for(const e of i)o.addEditOperation(e.range,e.text)}this._trackedEditorSelectionId=o.trackSelection(this._editorSelection)}computeCursorState(n,o){return o.getTrackedSelection(this._trackedEditorSelectionId)}}export{c as ReplaceAllCommand};
