{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/wordHighlighter/browser/textualHighlightProvider.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { ResourceMap } from \"../../../../base/common/map.js\";\nimport type { Position } from \"../../../common/core/position.js\";\nimport { USUAL_WORD_SEPARATORS } from \"../../../common/core/wordHelper.js\";\nimport type { LanguageFilter } from \"../../../common/languageSelector.js\";\nimport {\n\ttype DocumentHighlight,\n\tDocumentHighlightKind,\n\ttype DocumentHighlightProvider,\n\ttype MultiDocumentHighlightProvider,\n\ttype ProviderResult,\n} from \"../../../common/languages.js\";\nimport type { ITextModel } from \"../../../common/model.js\";\nimport { ILanguageFeaturesService } from \"../../../common/services/languageFeatures.js\";\n\nclass TextualDocumentHighlightProvider\n\timplements DocumentHighlightProvider, MultiDocumentHighlightProvider\n{\n\tselector: LanguageFilter = { language: \"*\" };\n\n\tprovideDocumentHighlights(\n\t\tmodel: ITextModel,\n\t\tposition: Position,\n\t\ttoken: CancellationToken,\n\t): ProviderResult<DocumentHighlight[]> {\n\t\tconst result: DocumentHighlight[] = [];\n\n\t\tconst word = model.getWordAtPosition({\n\t\t\tlineNumber: position.lineNumber,\n\t\t\tcolumn: position.column,\n\t\t});\n\n\t\tif (!word) {\n\t\t\treturn Promise.resolve(result);\n\t\t}\n\n\t\tif (model.isDisposed()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst matches = model.findMatches(\n\t\t\tword.word,\n\t\t\ttrue,\n\t\t\tfalse,\n\t\t\ttrue,\n\t\t\tUSUAL_WORD_SEPARATORS,\n\t\t\tfalse,\n\t\t);\n\t\treturn matches.map((m) => ({\n\t\t\trange: m.range,\n\t\t\tkind: DocumentHighlightKind.Text,\n\t\t}));\n\t}\n\n\tprovideMultiDocumentHighlights(\n\t\tprimaryModel: ITextModel,\n\t\tposition: Position,\n\t\totherModels: ITextModel[],\n\t\ttoken: CancellationToken,\n\t): ProviderResult<ResourceMap<DocumentHighlight[]>> {\n\t\tconst result = new ResourceMap<DocumentHighlight[]>();\n\n\t\tconst word = primaryModel.getWordAtPosition({\n\t\t\tlineNumber: position.lineNumber,\n\t\t\tcolumn: position.column,\n\t\t});\n\t\tif (!word) {\n\t\t\treturn Promise.resolve(result);\n\t\t}\n\n\t\tfor (const model of [primaryModel, ...otherModels]) {\n\t\t\tif (model.isDisposed()) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst matches = model.findMatches(\n\t\t\t\tword.word,\n\t\t\t\ttrue,\n\t\t\t\tfalse,\n\t\t\t\ttrue,\n\t\t\t\tUSUAL_WORD_SEPARATORS,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t\tconst highlights = matches.map((m) => ({\n\t\t\t\trange: m.range,\n\t\t\t\tkind: DocumentHighlightKind.Text,\n\t\t\t}));\n\n\t\t\tif (highlights) {\n\t\t\t\tresult.set(model.uri, highlights);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport class TextualMultiDocumentHighlightFeature extends Disposable {\n\tconstructor(\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\t\tthis._register(languageFeaturesService.documentHighlightProvider.register('*', new TextualDocumentHighlightProvider()));\n\t\tthis._register(languageFeaturesService.multiDocumentHighlightProvider.register('*', new TextualDocumentHighlightProvider()));\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAMA,SAAS,kBAAkB;AAC3B,SAAS,mBAAmB;AAE5B,SAAS,6BAA6B;AAEtC;AAAA,EAEC;AAAA,OAIM;AAEP,SAAS,gCAAgC;AAEzC,MAAM,iCAEN;AAAA,EAvBA,OAuBA;AAAA;AAAA;AAAA,EACC,WAA2B,EAAE,UAAU,IAAI;AAAA,EAE3C,0BACC,OACA,UACA,OACsC;AACtC,UAAM,SAA8B,CAAC;AAErC,UAAM,OAAO,MAAM,kBAAkB;AAAA,MACpC,YAAY,SAAS;AAAA,MACrB,QAAQ,SAAS;AAAA,IAClB,CAAC;AAED,QAAI,CAAC,MAAM;AACV,aAAO,QAAQ,QAAQ,MAAM;AAAA,IAC9B;AAEA,QAAI,MAAM,WAAW,GAAG;AACvB;AAAA,IACD;AAEA,UAAM,UAAU,MAAM;AAAA,MACrB,KAAK;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AACA,WAAO,QAAQ,IAAI,CAAC,OAAO;AAAA,MAC1B,OAAO,EAAE;AAAA,MACT,MAAM,sBAAsB;AAAA,IAC7B,EAAE;AAAA,EACH;AAAA,EAEA,+BACC,cACA,UACA,aACA,OACmD;AACnD,UAAM,SAAS,IAAI,YAAiC;AAEpD,UAAM,OAAO,aAAa,kBAAkB;AAAA,MAC3C,YAAY,SAAS;AAAA,MACrB,QAAQ,SAAS;AAAA,IAClB,CAAC;AACD,QAAI,CAAC,MAAM;AACV,aAAO,QAAQ,QAAQ,MAAM;AAAA,IAC9B;AAEA,eAAW,SAAS,CAAC,cAAc,GAAG,WAAW,GAAG;AACnD,UAAI,MAAM,WAAW,GAAG;AACvB;AAAA,MACD;AAEA,YAAM,UAAU,MAAM;AAAA,QACrB,KAAK;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD;AACA,YAAM,aAAa,QAAQ,IAAI,CAAC,OAAO;AAAA,QACtC,OAAO,EAAE;AAAA,QACT,MAAM,sBAAsB;AAAA,MAC7B,EAAE;AAEF,UAAI,YAAY;AACf,eAAO,IAAI,MAAM,KAAK,UAAU;AAAA,MACjC;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AACD;AAEO,IAAM,uCAAN,cAAmD,WAAW;AAAA,EAvGrE,OAuGqE;AAAA;AAAA;AAAA,EACpE,YAC2B,yBACzB;AACD,UAAM;AACN,SAAK,UAAU,wBAAwB,0BAA0B,SAAS,KAAK,IAAI,iCAAiC,CAAC,CAAC;AACtH,SAAK,UAAU,wBAAwB,+BAA+B,SAAS,KAAK,IAAI,iCAAiC,CAAC,CAAC;AAAA,EAC5H;AACD;AARa,uCAAN;AAAA,EAEJ;AAAA,GAFU;",
  "names": []
}
