{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/wordHighlighter/browser/textualHighlightProvider.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { USUAL_WORD_SEPARATORS } from '../../../common/core/wordHelper.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DocumentHighlight, DocumentHighlightKind, DocumentHighlightProvider, MultiDocumentHighlightProvider, ProviderResult } from '../../../common/languages.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { Position } from '../../../common/core/position.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { LanguageFilter } from '../../../common/languageSelector.js';\n\n\nclass TextualDocumentHighlightProvider implements DocumentHighlightProvider, MultiDocumentHighlightProvider {\n\n\tselector: LanguageFilter = { language: '*' };\n\n\tprovideDocumentHighlights(model: ITextModel, position: Position, token: CancellationToken): ProviderResult<DocumentHighlight[]> {\n\t\tconst result: DocumentHighlight[] = [];\n\n\t\tconst word = model.getWordAtPosition({\n\t\t\tlineNumber: position.lineNumber,\n\t\t\tcolumn: position.column\n\t\t});\n\n\t\tif (!word) {\n\t\t\treturn Promise.resolve(result);\n\t\t}\n\n\t\tif (model.isDisposed()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst matches = model.findMatches(word.word, true, false, true, USUAL_WORD_SEPARATORS, false);\n\t\treturn matches.map(m => ({\n\t\t\trange: m.range,\n\t\t\tkind: DocumentHighlightKind.Text\n\t\t}));\n\t}\n\n\tprovideMultiDocumentHighlights(primaryModel: ITextModel, position: Position, otherModels: ITextModel[], token: CancellationToken): ProviderResult<ResourceMap<DocumentHighlight[]>> {\n\n\t\tconst result = new ResourceMap<DocumentHighlight[]>();\n\n\t\tconst word = primaryModel.getWordAtPosition({\n\t\t\tlineNumber: position.lineNumber,\n\t\t\tcolumn: position.column\n\t\t});\n\t\tif (!word) {\n\t\t\treturn Promise.resolve(result);\n\t\t}\n\n\n\t\tfor (const model of [primaryModel, ...otherModels]) {\n\t\t\tif (model.isDisposed()) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst matches = model.findMatches(word.word, true, false, true, USUAL_WORD_SEPARATORS, false);\n\t\t\tconst highlights = matches.map(m => ({\n\t\t\t\trange: m.range,\n\t\t\t\tkind: DocumentHighlightKind.Text\n\t\t\t}));\n\n\t\t\tif (highlights) {\n\t\t\t\tresult.set(model.uri, highlights);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n}\n\nexport class TextualMultiDocumentHighlightFeature extends Disposable {\n\tconstructor(\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\t\tthis._register(languageFeaturesService.documentHighlightProvider.register('*', new TextualDocumentHighlightProvider()));\n\t\tthis._register(languageFeaturesService.multiDocumentHighlightProvider.register('*', new TextualDocumentHighlightProvider()));\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,6BAA6B;AACtC,SAAS,gCAAgC;AACzC,SAAS,mBAAmB,uBAAuB,2BAA2B,gCAAgC,sBAAsB;AACpI,SAAS,kBAAkB;AAC3B,SAAS,gBAAgB;AACzB,SAAS,yBAAyB;AAClC,SAAS,kBAAkB;AAC3B,SAAS,mBAAmB;AAC5B,SAAS,sBAAsB;AAG/B,MAAM,iCAAsG;AAAA,EAhB5G,OAgB4G;AAAA;AAAA;AAAA,EAE3G,WAA2B,EAAE,UAAU,IAAI;AAAA,EAE3C,0BAA0B,OAAmB,UAAoB,OAA+D;AAC/H,UAAM,SAA8B,CAAC;AAErC,UAAM,OAAO,MAAM,kBAAkB;AAAA,MACpC,YAAY,SAAS;AAAA,MACrB,QAAQ,SAAS;AAAA,IAClB,CAAC;AAED,QAAI,CAAC,MAAM;AACV,aAAO,QAAQ,QAAQ,MAAM;AAAA,IAC9B;AAEA,QAAI,MAAM,WAAW,GAAG;AACvB;AAAA,IACD;AAEA,UAAM,UAAU,MAAM,YAAY,KAAK,MAAM,MAAM,OAAO,MAAM,uBAAuB,KAAK;AAC5F,WAAO,QAAQ,IAAI,QAAM;AAAA,MACxB,OAAO,EAAE;AAAA,MACT,MAAM,sBAAsB;AAAA,IAC7B,EAAE;AAAA,EACH;AAAA,EAEA,+BAA+B,cAA0B,UAAoB,aAA2B,OAA4E;AAEnL,UAAM,SAAS,IAAI,YAAiC;AAEpD,UAAM,OAAO,aAAa,kBAAkB;AAAA,MAC3C,YAAY,SAAS;AAAA,MACrB,QAAQ,SAAS;AAAA,IAClB,CAAC;AACD,QAAI,CAAC,MAAM;AACV,aAAO,QAAQ,QAAQ,MAAM;AAAA,IAC9B;AAGA,eAAW,SAAS,CAAC,cAAc,GAAG,WAAW,GAAG;AACnD,UAAI,MAAM,WAAW,GAAG;AACvB;AAAA,MACD;AAEA,YAAM,UAAU,MAAM,YAAY,KAAK,MAAM,MAAM,OAAO,MAAM,uBAAuB,KAAK;AAC5F,YAAM,aAAa,QAAQ,IAAI,QAAM;AAAA,QACpC,OAAO,EAAE;AAAA,QACT,MAAM,sBAAsB;AAAA,MAC7B,EAAE;AAEF,UAAI,YAAY;AACf,eAAO,IAAI,MAAM,KAAK,UAAU;AAAA,MACjC;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AAED;AAEO,IAAM,uCAAN,cAAmD,WAAW;AAAA,EA7ErE,OA6EqE;AAAA;AAAA;AAAA,EACpE,YAC2B,yBACzB;AACD,UAAM;AACN,SAAK,UAAU,wBAAwB,0BAA0B,SAAS,KAAK,IAAI,iCAAiC,CAAC,CAAC;AACtH,SAAK,UAAU,wBAAwB,+BAA+B,SAAS,KAAK,IAAI,iCAAiC,CAAC,CAAC;AAAA,EAC5H;AACD;AARa,uCAAN;AAAA,EAEJ;AAAA,GAFU;",
  "names": []
}
