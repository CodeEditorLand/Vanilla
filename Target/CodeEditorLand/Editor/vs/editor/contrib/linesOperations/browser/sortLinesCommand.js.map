{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/linesOperations/browser/sortLinesCommand.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EditOperation, ISingleEditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ICommand, ICursorStateComputerData, IEditOperationBuilder } from '../../../common/editorCommon.js';\nimport { ITextModel } from '../../../common/model.js';\n\nexport class SortLinesCommand implements ICommand {\n\n\tprivate static _COLLATOR: Intl.Collator | null = null;\n\tpublic static getCollator(): Intl.Collator {\n\t\tif (!SortLinesCommand._COLLATOR) {\n\t\t\tSortLinesCommand._COLLATOR = new Intl.Collator();\n\t\t}\n\t\treturn SortLinesCommand._COLLATOR;\n\t}\n\n\tprivate readonly selection: Selection;\n\tprivate readonly descending: boolean;\n\tprivate selectionId: string | null;\n\n\tconstructor(selection: Selection, descending: boolean) {\n\t\tthis.selection = selection;\n\t\tthis.descending = descending;\n\t\tthis.selectionId = null;\n\t}\n\n\tpublic getEditOperations(model: ITextModel, builder: IEditOperationBuilder): void {\n\t\tconst op = sortLines(model, this.selection, this.descending);\n\t\tif (op) {\n\t\t\tbuilder.addEditOperation(op.range, op.text);\n\t\t}\n\n\t\tthis.selectionId = builder.trackSelection(this.selection);\n\t}\n\n\tpublic computeCursorState(model: ITextModel, helper: ICursorStateComputerData): Selection {\n\t\treturn helper.getTrackedSelection(this.selectionId!);\n\t}\n\n\tpublic static canRun(model: ITextModel | null, selection: Selection, descending: boolean): boolean {\n\t\tif (model === null) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = getSortData(model, selection, descending);\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let i = 0, len = data.before.length; i < len; i++) {\n\t\t\tif (data.before[i] !== data.after[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nfunction getSortData(model: ITextModel, selection: Selection, descending: boolean) {\n\tconst startLineNumber = selection.startLineNumber;\n\tlet endLineNumber = selection.endLineNumber;\n\n\tif (selection.endColumn === 1) {\n\t\tendLineNumber--;\n\t}\n\n\t// Nothing to sort if user didn't select anything.\n\tif (startLineNumber >= endLineNumber) {\n\t\treturn null;\n\t}\n\n\tconst linesToSort: string[] = [];\n\n\t// Get the contents of the selection to be sorted.\n\tfor (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n\t\tlinesToSort.push(model.getLineContent(lineNumber));\n\t}\n\n\tlet sorted = linesToSort.slice(0);\n\tsorted.sort(SortLinesCommand.getCollator().compare);\n\n\t// If descending, reverse the order.\n\tif (descending === true) {\n\t\tsorted = sorted.reverse();\n\t}\n\n\treturn {\n\t\tstartLineNumber: startLineNumber,\n\t\tendLineNumber: endLineNumber,\n\t\tbefore: linesToSort,\n\t\tafter: sorted\n\t};\n}\n\n/**\n * Generate commands for sorting lines on a model.\n */\nfunction sortLines(model: ITextModel, selection: Selection, descending: boolean): ISingleEditOperation | null {\n\tconst data = getSortData(model, selection, descending);\n\n\tif (!data) {\n\t\treturn null;\n\t}\n\n\treturn EditOperation.replace(\n\t\tnew Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)),\n\t\tdata.after.join('\\n')\n\t);\n}\n"],
  "mappings": ";;AAKA,SAAS,eAAe,4BAA4B;AACpD,SAAS,aAAa;AACtB,SAAS,iBAAiB;AAC1B,SAAS,UAAU,0BAA0B,6BAA6B;AAC1E,SAAS,kBAAkB;AAEpB,MAAM,iBAAqC;AAAA,EAXlD,OAWkD;AAAA;AAAA;AAAA,EAEjD,OAAe,YAAkC;AAAA,EACjD,OAAc,cAA6B;AAC1C,QAAI,CAAC,iBAAiB,WAAW;AAChC,uBAAiB,YAAY,IAAI,KAAK,SAAS;AAAA,IAChD;AACA,WAAO,iBAAiB;AAAA,EACzB;AAAA,EAEiB;AAAA,EACA;AAAA,EACT;AAAA,EAER,YAAY,WAAsB,YAAqB;AACtD,SAAK,YAAY;AACjB,SAAK,aAAa;AAClB,SAAK,cAAc;AAAA,EACpB;AAAA,EAEO,kBAAkB,OAAmB,SAAsC;AACjF,UAAM,KAAK,UAAU,OAAO,KAAK,WAAW,KAAK,UAAU;AAC3D,QAAI,IAAI;AACP,cAAQ,iBAAiB,GAAG,OAAO,GAAG,IAAI;AAAA,IAC3C;AAEA,SAAK,cAAc,QAAQ,eAAe,KAAK,SAAS;AAAA,EACzD;AAAA,EAEO,mBAAmB,OAAmB,QAA6C;AACzF,WAAO,OAAO,oBAAoB,KAAK,WAAY;AAAA,EACpD;AAAA,EAEA,OAAc,OAAO,OAA0B,WAAsB,YAA8B;AAClG,QAAI,UAAU,MAAM;AACnB,aAAO;AAAA,IACR;AAEA,UAAM,OAAO,YAAY,OAAO,WAAW,UAAU;AAErD,QAAI,CAAC,MAAM;AACV,aAAO;AAAA,IACR;AAEA,aAAS,IAAI,GAAG,MAAM,KAAK,OAAO,QAAQ,IAAI,KAAK,KAAK;AACvD,UAAI,KAAK,OAAO,CAAC,MAAM,KAAK,MAAM,CAAC,GAAG;AACrC,eAAO;AAAA,MACR;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AACD;AAEA,SAAS,YAAY,OAAmB,WAAsB,YAAqB;AAClF,QAAM,kBAAkB,UAAU;AAClC,MAAI,gBAAgB,UAAU;AAE9B,MAAI,UAAU,cAAc,GAAG;AAC9B;AAAA,EACD;AAGA,MAAI,mBAAmB,eAAe;AACrC,WAAO;AAAA,EACR;AAEA,QAAM,cAAwB,CAAC;AAG/B,WAAS,aAAa,iBAAiB,cAAc,eAAe,cAAc;AACjF,gBAAY,KAAK,MAAM,eAAe,UAAU,CAAC;AAAA,EAClD;AAEA,MAAI,SAAS,YAAY,MAAM,CAAC;AAChC,SAAO,KAAK,iBAAiB,YAAY,EAAE,OAAO;AAGlD,MAAI,eAAe,MAAM;AACxB,aAAS,OAAO,QAAQ;AAAA,EACzB;AAEA,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA,QAAQ;AAAA,IACR,OAAO;AAAA,EACR;AACD;AAlCS;AAuCT,SAAS,UAAU,OAAmB,WAAsB,YAAkD;AAC7G,QAAM,OAAO,YAAY,OAAO,WAAW,UAAU;AAErD,MAAI,CAAC,MAAM;AACV,WAAO;AAAA,EACR;AAEA,SAAO,cAAc;AAAA,IACpB,IAAI,MAAM,KAAK,iBAAiB,GAAG,KAAK,eAAe,MAAM,iBAAiB,KAAK,aAAa,CAAC;AAAA,IACjG,KAAK,MAAM,KAAK,IAAI;AAAA,EACrB;AACD;AAXS;",
  "names": []
}
