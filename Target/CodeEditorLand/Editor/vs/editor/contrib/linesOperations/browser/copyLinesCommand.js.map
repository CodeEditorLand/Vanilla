{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/linesOperations/browser/copyLinesCommand.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Range } from '../../../common/core/range.js';\nimport { Selection, SelectionDirection } from '../../../common/core/selection.js';\nimport { ICommand, ICursorStateComputerData, IEditOperationBuilder } from '../../../common/editorCommon.js';\nimport { ITextModel } from '../../../common/model.js';\n\nexport class CopyLinesCommand implements ICommand {\n\n\tprivate readonly _selection: Selection;\n\tprivate readonly _isCopyingDown: boolean;\n\tprivate readonly _noop: boolean;\n\n\tprivate _selectionDirection: SelectionDirection;\n\tprivate _selectionId: string | null;\n\tprivate _startLineNumberDelta: number;\n\tprivate _endLineNumberDelta: number;\n\n\tconstructor(selection: Selection, isCopyingDown: boolean, noop?: boolean) {\n\t\tthis._selection = selection;\n\t\tthis._isCopyingDown = isCopyingDown;\n\t\tthis._noop = noop || false;\n\t\tthis._selectionDirection = SelectionDirection.LTR;\n\t\tthis._selectionId = null;\n\t\tthis._startLineNumberDelta = 0;\n\t\tthis._endLineNumberDelta = 0;\n\t}\n\n\tpublic getEditOperations(model: ITextModel, builder: IEditOperationBuilder): void {\n\t\tlet s = this._selection;\n\n\t\tthis._startLineNumberDelta = 0;\n\t\tthis._endLineNumberDelta = 0;\n\t\tif (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n\t\t\tthis._endLineNumberDelta = 1;\n\t\t\ts = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n\t\t}\n\n\t\tconst sourceLines: string[] = [];\n\t\tfor (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n\t\t\tsourceLines.push(model.getLineContent(i));\n\t\t}\n\t\tconst sourceText = sourceLines.join('\\n');\n\n\t\tif (sourceText === '') {\n\t\t\t// Duplicating empty line\n\t\t\tif (this._isCopyingDown) {\n\t\t\t\tthis._startLineNumberDelta++;\n\t\t\t\tthis._endLineNumberDelta++;\n\t\t\t}\n\t\t}\n\n\t\tif (this._noop) {\n\t\t\tbuilder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\n\t\t} else {\n\t\t\tif (!this._isCopyingDown) {\n\t\t\t\tbuilder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n\t\t\t} else {\n\t\t\t\tbuilder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n\t\t\t}\n\t\t}\n\n\t\tthis._selectionId = builder.trackSelection(s);\n\t\tthis._selectionDirection = this._selection.getDirection();\n\t}\n\n\tpublic computeCursorState(model: ITextModel, helper: ICursorStateComputerData): Selection {\n\t\tlet result = helper.getTrackedSelection(this._selectionId!);\n\n\t\tif (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n\t\t\tlet startLineNumber = result.startLineNumber;\n\t\t\tlet startColumn = result.startColumn;\n\t\t\tlet endLineNumber = result.endLineNumber;\n\t\t\tlet endColumn = result.endColumn;\n\n\t\t\tif (this._startLineNumberDelta !== 0) {\n\t\t\t\tstartLineNumber = startLineNumber + this._startLineNumberDelta;\n\t\t\t\tstartColumn = 1;\n\t\t\t}\n\n\t\t\tif (this._endLineNumberDelta !== 0) {\n\t\t\t\tendLineNumber = endLineNumber + this._endLineNumberDelta;\n\t\t\t\tendColumn = 1;\n\t\t\t}\n\n\t\t\tresult = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n"],
  "mappings": ";;AAKA,SAAS,aAAa;AACtB,SAAS,WAAW,0BAA0B;AAC9C,SAAS,UAAU,0BAA0B,6BAA6B;AAC1E,SAAS,kBAAkB;AAEpB,MAAM,iBAAqC;AAAA,EAVlD,OAUkD;AAAA;AAAA;AAAA,EAEhC;AAAA,EACA;AAAA,EACA;AAAA,EAET;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAER,YAAY,WAAsB,eAAwB,MAAgB;AACzE,SAAK,aAAa;AAClB,SAAK,iBAAiB;AACtB,SAAK,QAAQ,QAAQ;AACrB,SAAK,sBAAsB,mBAAmB;AAC9C,SAAK,eAAe;AACpB,SAAK,wBAAwB;AAC7B,SAAK,sBAAsB;AAAA,EAC5B;AAAA,EAEO,kBAAkB,OAAmB,SAAsC;AACjF,QAAI,IAAI,KAAK;AAEb,SAAK,wBAAwB;AAC7B,SAAK,sBAAsB;AAC3B,QAAI,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,cAAc,GAAG;AAC7D,WAAK,sBAAsB;AAC3B,UAAI,EAAE,eAAe,EAAE,gBAAgB,GAAG,MAAM,iBAAiB,EAAE,gBAAgB,CAAC,CAAC;AAAA,IACtF;AAEA,UAAM,cAAwB,CAAC;AAC/B,aAAS,IAAI,EAAE,iBAAiB,KAAK,EAAE,eAAe,KAAK;AAC1D,kBAAY,KAAK,MAAM,eAAe,CAAC,CAAC;AAAA,IACzC;AACA,UAAM,aAAa,YAAY,KAAK,IAAI;AAExC,QAAI,eAAe,IAAI;AAEtB,UAAI,KAAK,gBAAgB;AACxB,aAAK;AACL,aAAK;AAAA,MACN;AAAA,IACD;AAEA,QAAI,KAAK,OAAO;AACf,cAAQ,iBAAiB,IAAI,MAAM,EAAE,eAAe,MAAM,iBAAiB,EAAE,aAAa,GAAG,EAAE,gBAAgB,GAAG,CAAC,GAAG,EAAE,kBAAkB,MAAM,aAAa,IAAI,KAAK,IAAI;AAAA,IAC3K,OAAO;AACN,UAAI,CAAC,KAAK,gBAAgB;AACzB,gBAAQ,iBAAiB,IAAI,MAAM,EAAE,eAAe,MAAM,iBAAiB,EAAE,aAAa,GAAG,EAAE,eAAe,MAAM,iBAAiB,EAAE,aAAa,CAAC,GAAG,OAAO,UAAU;AAAA,MAC1K,OAAO;AACN,gBAAQ,iBAAiB,IAAI,MAAM,EAAE,iBAAiB,GAAG,EAAE,iBAAiB,CAAC,GAAG,aAAa,IAAI;AAAA,MAClG;AAAA,IACD;AAEA,SAAK,eAAe,QAAQ,eAAe,CAAC;AAC5C,SAAK,sBAAsB,KAAK,WAAW,aAAa;AAAA,EACzD;AAAA,EAEO,mBAAmB,OAAmB,QAA6C;AACzF,QAAI,SAAS,OAAO,oBAAoB,KAAK,YAAa;AAE1D,QAAI,KAAK,0BAA0B,KAAK,KAAK,wBAAwB,GAAG;AACvE,UAAI,kBAAkB,OAAO;AAC7B,UAAI,cAAc,OAAO;AACzB,UAAI,gBAAgB,OAAO;AAC3B,UAAI,YAAY,OAAO;AAEvB,UAAI,KAAK,0BAA0B,GAAG;AACrC,0BAAkB,kBAAkB,KAAK;AACzC,sBAAc;AAAA,MACf;AAEA,UAAI,KAAK,wBAAwB,GAAG;AACnC,wBAAgB,gBAAgB,KAAK;AACrC,oBAAY;AAAA,MACb;AAEA,eAAS,UAAU,oBAAoB,iBAAiB,aAAa,eAAe,WAAW,KAAK,mBAAmB;AAAA,IACxH;AAEA,WAAO;AAAA,EACR;AACD;",
  "names": []
}
