{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/semanticTokens/browser/documentSemanticTokens.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, IDisposable, dispose } from '../../../../base/common/lifecycle.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { IModelContentChangedEvent } from '../../../common/textModelEvents.js';\nimport { DocumentSemanticTokensProvider, SemanticTokens, SemanticTokensEdits } from '../../../common/languages.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { SemanticTokensProviderStyling, toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { getDocumentSemanticTokens, hasDocumentSemanticTokensProvider, isSemanticTokens, isSemanticTokensEdits } from '../common/getSemanticTokens.js';\nimport { IFeatureDebounceInformation, ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { LanguageFeatureRegistry } from '../../../common/languageFeatureRegistry.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { SEMANTIC_HIGHLIGHTING_SETTING_ID, isSemanticColoringEnabled } from '../common/semanticTokensConfig.js';\n\nexport class DocumentSemanticTokensFeature extends Disposable {\n\n\tprivate readonly _watchers: Record<string, ModelSemanticColoring>;\n\n\tconstructor(\n\t\t@ISemanticTokensStylingService semanticTokensStylingService: ISemanticTokensStylingService,\n\t\t@IModelService modelService: IModelService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILanguageFeatureDebounceService languageFeatureDebounceService: ILanguageFeatureDebounceService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\t\tthis._watchers = Object.create(null);\n\n\t\tconst register = (model: ITextModel) => {\n\t\t\tthis._watchers[model.uri.toString()] = new ModelSemanticColoring(model, semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService);\n\t\t};\n\t\tconst deregister = (model: ITextModel, modelSemanticColoring: ModelSemanticColoring) => {\n\t\t\tmodelSemanticColoring.dispose();\n\t\t\tdelete this._watchers[model.uri.toString()];\n\t\t};\n\t\tconst handleSettingOrThemeChange = () => {\n\t\t\tfor (const model of modelService.getModels()) {\n\t\t\t\tconst curr = this._watchers[model.uri.toString()];\n\t\t\t\tif (isSemanticColoringEnabled(model, themeService, configurationService)) {\n\t\t\t\t\tif (!curr) {\n\t\t\t\t\t\tregister(model);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (curr) {\n\t\t\t\t\t\tderegister(model, curr);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tmodelService.getModels().forEach(model => {\n\t\t\tif (isSemanticColoringEnabled(model, themeService, configurationService)) {\n\t\t\t\tregister(model);\n\t\t\t}\n\t\t});\n\t\tthis._register(modelService.onModelAdded((model) => {\n\t\t\tif (isSemanticColoringEnabled(model, themeService, configurationService)) {\n\t\t\t\tregister(model);\n\t\t\t}\n\t\t}));\n\t\tthis._register(modelService.onModelRemoved((model) => {\n\t\t\tconst curr = this._watchers[model.uri.toString()];\n\t\t\tif (curr) {\n\t\t\t\tderegister(model, curr);\n\t\t\t}\n\t\t}));\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n\t\t\t\thandleSettingOrThemeChange();\n\t\t\t}\n\t\t}));\n\t\tthis._register(themeService.onDidColorThemeChange(handleSettingOrThemeChange));\n\t}\n\n\toverride dispose(): void {\n\t\t// Dispose all watchers\n\t\tfor (const watcher of Object.values(this._watchers)) {\n\t\t\twatcher.dispose();\n\t\t}\n\t\tsuper.dispose();\n\t}\n}\n\nclass ModelSemanticColoring extends Disposable {\n\n\tpublic static REQUEST_MIN_DELAY = 300;\n\tpublic static REQUEST_MAX_DELAY = 2000;\n\n\tprivate _isDisposed: boolean;\n\tprivate readonly _model: ITextModel;\n\tprivate readonly _provider: LanguageFeatureRegistry<DocumentSemanticTokensProvider>;\n\tprivate readonly _debounceInformation: IFeatureDebounceInformation;\n\tprivate readonly _fetchDocumentSemanticTokens: RunOnceScheduler;\n\tprivate _currentDocumentResponse: SemanticTokensResponse | null;\n\tprivate _currentDocumentRequestCancellationTokenSource: CancellationTokenSource | null;\n\tprivate _documentProvidersChangeListeners: IDisposable[];\n\tprivate _providersChangedDuringRequest: boolean;\n\n\tconstructor(\n\t\tmodel: ITextModel,\n\t\t@ISemanticTokensStylingService private readonly _semanticTokensStylingService: ISemanticTokensStylingService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ILanguageFeatureDebounceService languageFeatureDebounceService: ILanguageFeatureDebounceService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\n\t\tthis._isDisposed = false;\n\t\tthis._model = model;\n\t\tthis._provider = languageFeaturesService.documentSemanticTokensProvider;\n\t\tthis._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentSemanticTokens', { min: ModelSemanticColoring.REQUEST_MIN_DELAY, max: ModelSemanticColoring.REQUEST_MAX_DELAY });\n\t\tthis._fetchDocumentSemanticTokens = this._register(new RunOnceScheduler(() => this._fetchDocumentSemanticTokensNow(), ModelSemanticColoring.REQUEST_MIN_DELAY));\n\t\tthis._currentDocumentResponse = null;\n\t\tthis._currentDocumentRequestCancellationTokenSource = null;\n\t\tthis._documentProvidersChangeListeners = [];\n\t\tthis._providersChangedDuringRequest = false;\n\n\t\tthis._register(this._model.onDidChangeContent(() => {\n\t\t\tif (!this._fetchDocumentSemanticTokens.isScheduled()) {\n\t\t\t\tthis._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._model.onDidChangeAttached(() => {\n\t\t\tif (!this._fetchDocumentSemanticTokens.isScheduled()) {\n\t\t\t\tthis._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._model.onDidChangeLanguage(() => {\n\t\t\t// clear any outstanding state\n\t\t\tif (this._currentDocumentResponse) {\n\t\t\t\tthis._currentDocumentResponse.dispose();\n\t\t\t\tthis._currentDocumentResponse = null;\n\t\t\t}\n\t\t\tif (this._currentDocumentRequestCancellationTokenSource) {\n\t\t\t\tthis._currentDocumentRequestCancellationTokenSource.cancel();\n\t\t\t\tthis._currentDocumentRequestCancellationTokenSource = null;\n\t\t\t}\n\t\t\tthis._setDocumentSemanticTokens(null, null, null, []);\n\t\t\tthis._fetchDocumentSemanticTokens.schedule(0);\n\t\t}));\n\n\t\tconst bindDocumentChangeListeners = () => {\n\t\t\tdispose(this._documentProvidersChangeListeners);\n\t\t\tthis._documentProvidersChangeListeners = [];\n\t\t\tfor (const provider of this._provider.all(model)) {\n\t\t\t\tif (typeof provider.onDidChange === 'function') {\n\t\t\t\t\tthis._documentProvidersChangeListeners.push(provider.onDidChange(() => {\n\t\t\t\t\t\tif (this._currentDocumentRequestCancellationTokenSource) {\n\t\t\t\t\t\t\t// there is already a request running,\n\t\t\t\t\t\t\tthis._providersChangedDuringRequest = true;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._fetchDocumentSemanticTokens.schedule(0);\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tbindDocumentChangeListeners();\n\t\tthis._register(this._provider.onDidChange(() => {\n\t\t\tbindDocumentChangeListeners();\n\t\t\tthis._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n\t\t}));\n\n\t\tthis._register(themeService.onDidColorThemeChange(_ => {\n\t\t\t// clear out existing tokens\n\t\t\tthis._setDocumentSemanticTokens(null, null, null, []);\n\t\t\tthis._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n\t\t}));\n\n\t\tthis._fetchDocumentSemanticTokens.schedule(0);\n\t}\n\n\tpublic override dispose(): void {\n\t\tif (this._currentDocumentResponse) {\n\t\t\tthis._currentDocumentResponse.dispose();\n\t\t\tthis._currentDocumentResponse = null;\n\t\t}\n\t\tif (this._currentDocumentRequestCancellationTokenSource) {\n\t\t\tthis._currentDocumentRequestCancellationTokenSource.cancel();\n\t\t\tthis._currentDocumentRequestCancellationTokenSource = null;\n\t\t}\n\t\tdispose(this._documentProvidersChangeListeners);\n\t\tthis._documentProvidersChangeListeners = [];\n\t\tthis._setDocumentSemanticTokens(null, null, null, []);\n\t\tthis._isDisposed = true;\n\n\t\tsuper.dispose();\n\t}\n\n\tprivate _fetchDocumentSemanticTokensNow(): void {\n\t\tif (this._currentDocumentRequestCancellationTokenSource) {\n\t\t\t// there is already a request running, let it finish...\n\t\t\treturn;\n\t\t}\n\n\t\tif (!hasDocumentSemanticTokensProvider(this._provider, this._model)) {\n\t\t\t// there is no provider\n\t\t\tif (this._currentDocumentResponse) {\n\t\t\t\t// there are semantic tokens set\n\t\t\t\tthis._model.tokenization.setSemanticTokens(null, false);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._model.isAttachedToEditor()) {\n\t\t\t// this document is not visible, there is no need to fetch semantic tokens for it\n\t\t\treturn;\n\t\t}\n\n\t\tconst cancellationTokenSource = new CancellationTokenSource();\n\t\tconst lastProvider = this._currentDocumentResponse ? this._currentDocumentResponse.provider : null;\n\t\tconst lastResultId = this._currentDocumentResponse ? this._currentDocumentResponse.resultId || null : null;\n\t\tconst request = getDocumentSemanticTokens(this._provider, this._model, lastProvider, lastResultId, cancellationTokenSource.token);\n\t\tthis._currentDocumentRequestCancellationTokenSource = cancellationTokenSource;\n\t\tthis._providersChangedDuringRequest = false;\n\n\t\tconst pendingChanges: IModelContentChangedEvent[] = [];\n\t\tconst contentChangeListener = this._model.onDidChangeContent((e) => {\n\t\t\tpendingChanges.push(e);\n\t\t});\n\n\t\tconst sw = new StopWatch(false);\n\t\trequest.then((res) => {\n\t\t\tthis._debounceInformation.update(this._model, sw.elapsed());\n\t\t\tthis._currentDocumentRequestCancellationTokenSource = null;\n\t\t\tcontentChangeListener.dispose();\n\n\t\t\tif (!res) {\n\t\t\t\tthis._setDocumentSemanticTokens(null, null, null, pendingChanges);\n\t\t\t} else {\n\t\t\t\tconst { provider, tokens } = res;\n\t\t\t\tconst styling = this._semanticTokensStylingService.getStyling(provider);\n\t\t\t\tthis._setDocumentSemanticTokens(provider, tokens || null, styling, pendingChanges);\n\t\t\t}\n\t\t}, (err) => {\n\t\t\tconst isExpectedError = err && (errors.isCancellationError(err) || (typeof err.message === 'string' && err.message.indexOf('busy') !== -1));\n\t\t\tif (!isExpectedError) {\n\t\t\t\terrors.onUnexpectedError(err);\n\t\t\t}\n\n\t\t\t// Semantic tokens eats up all errors and considers errors to mean that the result is temporarily not available\n\t\t\t// The API does not have a special error kind to express this...\n\t\t\tthis._currentDocumentRequestCancellationTokenSource = null;\n\t\t\tcontentChangeListener.dispose();\n\n\t\t\tif (pendingChanges.length > 0 || this._providersChangedDuringRequest) {\n\t\t\t\t// More changes occurred while the request was running\n\t\t\t\tif (!this._fetchDocumentSemanticTokens.isScheduled()) {\n\t\t\t\t\tthis._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate static _copy(src: Uint32Array, srcOffset: number, dest: Uint32Array, destOffset: number, length: number): void {\n\t\t// protect against overflows\n\t\tlength = Math.min(length, dest.length - destOffset, src.length - srcOffset);\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdest[destOffset + i] = src[srcOffset + i];\n\t\t}\n\t}\n\n\tprivate _setDocumentSemanticTokens(provider: DocumentSemanticTokensProvider | null, tokens: SemanticTokens | SemanticTokensEdits | null, styling: SemanticTokensProviderStyling | null, pendingChanges: IModelContentChangedEvent[]): void {\n\t\tconst currentResponse = this._currentDocumentResponse;\n\t\tconst rescheduleIfNeeded = () => {\n\t\t\tif ((pendingChanges.length > 0 || this._providersChangedDuringRequest) && !this._fetchDocumentSemanticTokens.isScheduled()) {\n\t\t\t\tthis._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n\t\t\t}\n\t\t};\n\n\t\tif (this._currentDocumentResponse) {\n\t\t\tthis._currentDocumentResponse.dispose();\n\t\t\tthis._currentDocumentResponse = null;\n\t\t}\n\t\tif (this._isDisposed) {\n\t\t\t// disposed!\n\t\t\tif (provider && tokens) {\n\t\t\t\tprovider.releaseDocumentSemanticTokens(tokens.resultId);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (!provider || !styling) {\n\t\t\tthis._model.tokenization.setSemanticTokens(null, false);\n\t\t\treturn;\n\t\t}\n\t\tif (!tokens) {\n\t\t\tthis._model.tokenization.setSemanticTokens(null, true);\n\t\t\trescheduleIfNeeded();\n\t\t\treturn;\n\t\t}\n\n\t\tif (isSemanticTokensEdits(tokens)) {\n\t\t\tif (!currentResponse) {\n\t\t\t\t// not possible!\n\t\t\t\tthis._model.tokenization.setSemanticTokens(null, true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (tokens.edits.length === 0) {\n\t\t\t\t// nothing to do!\n\t\t\t\ttokens = {\n\t\t\t\t\tresultId: tokens.resultId,\n\t\t\t\t\tdata: currentResponse.data\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tlet deltaLength = 0;\n\t\t\t\tfor (const edit of tokens.edits) {\n\t\t\t\t\tdeltaLength += (edit.data ? edit.data.length : 0) - edit.deleteCount;\n\t\t\t\t}\n\n\t\t\t\tconst srcData = currentResponse.data;\n\t\t\t\tconst destData = new Uint32Array(srcData.length + deltaLength);\n\n\t\t\t\tlet srcLastStart = srcData.length;\n\t\t\t\tlet destLastStart = destData.length;\n\t\t\t\tfor (let i = tokens.edits.length - 1; i >= 0; i--) {\n\t\t\t\t\tconst edit = tokens.edits[i];\n\n\t\t\t\t\tif (edit.start > srcData.length) {\n\t\t\t\t\t\tstyling.warnInvalidEditStart(currentResponse.resultId, tokens.resultId, i, edit.start, srcData.length);\n\t\t\t\t\t\t// The edits are invalid and there's no way to recover\n\t\t\t\t\t\tthis._model.tokenization.setSemanticTokens(null, true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst copyCount = srcLastStart - (edit.start + edit.deleteCount);\n\t\t\t\t\tif (copyCount > 0) {\n\t\t\t\t\t\tModelSemanticColoring._copy(srcData, srcLastStart - copyCount, destData, destLastStart - copyCount, copyCount);\n\t\t\t\t\t\tdestLastStart -= copyCount;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (edit.data) {\n\t\t\t\t\t\tModelSemanticColoring._copy(edit.data, 0, destData, destLastStart - edit.data.length, edit.data.length);\n\t\t\t\t\t\tdestLastStart -= edit.data.length;\n\t\t\t\t\t}\n\n\t\t\t\t\tsrcLastStart = edit.start;\n\t\t\t\t}\n\n\t\t\t\tif (srcLastStart > 0) {\n\t\t\t\t\tModelSemanticColoring._copy(srcData, 0, destData, 0, srcLastStart);\n\t\t\t\t}\n\n\t\t\t\ttokens = {\n\t\t\t\t\tresultId: tokens.resultId,\n\t\t\t\t\tdata: destData\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (isSemanticTokens(tokens)) {\n\n\t\t\tthis._currentDocumentResponse = new SemanticTokensResponse(provider, tokens.resultId, tokens.data);\n\n\t\t\tconst result = toMultilineTokens2(tokens, styling, this._model.getLanguageId());\n\n\t\t\t// Adjust incoming semantic tokens\n\t\t\tif (pendingChanges.length > 0) {\n\t\t\t\t// More changes occurred while the request was running\n\t\t\t\t// We need to:\n\t\t\t\t// 1. Adjust incoming semantic tokens\n\t\t\t\t// 2. Request them again\n\t\t\t\tfor (const change of pendingChanges) {\n\t\t\t\t\tfor (const area of result) {\n\t\t\t\t\t\tfor (const singleChange of change.changes) {\n\t\t\t\t\t\t\tarea.applyEdit(singleChange.range, singleChange.text);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._model.tokenization.setSemanticTokens(result, true);\n\t\t} else {\n\t\t\tthis._model.tokenization.setSemanticTokens(null, true);\n\t\t}\n\n\t\trescheduleIfNeeded();\n\t}\n}\n\nclass SemanticTokensResponse {\n\tconstructor(\n\t\tpublic readonly provider: DocumentSemanticTokensProvider,\n\t\tpublic readonly resultId: string | undefined,\n\t\tpublic readonly data: Uint32Array\n\t) { }\n\n\tpublic dispose(): void {\n\t\tthis.provider.releaseDocumentSemanticTokens(this.resultId);\n\t}\n}\n\nregisterEditorFeature(DocumentSemanticTokensFeature);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,YAAY,aAAa,eAAe;AACjD,YAAY,YAAY;AACxB,SAAS,kBAAkB;AAC3B,SAAS,iCAAiC;AAC1C,SAAS,gCAAgC,gBAAgB,2BAA2B;AACpF,SAAS,qBAAqB;AAC9B,SAAS,6BAA6B;AACtC,SAAS,wBAAwB;AACjC,SAAS,+BAA+B;AACxC,SAAS,qBAAqB;AAC9B,SAAS,+BAA+B,0BAA0B;AAClE,SAAS,2BAA2B,mCAAmC,kBAAkB,6BAA6B;AACtH,SAAS,6BAA6B,uCAAuC;AAC7E,SAAS,iBAAiB;AAC1B,SAAS,gCAAgC;AACzC,SAAS,+BAA+B;AACxC,SAAS,qCAAqC;AAC9C,SAAS,6BAA6B;AACtC,SAAS,kCAAkC,iCAAiC;AAErE,IAAM,gCAAN,cAA4C,WAAW;AAAA,EAzB9D,OAyB8D;AAAA;AAAA;AAAA,EAE5C;AAAA,EAEjB,YACgC,8BAChB,cACA,cACQ,sBACU,gCACP,yBACzB;AACD,UAAM;AACN,SAAK,YAAY,uBAAO,OAAO,IAAI;AAEnC,UAAM,WAAW,wBAAC,UAAsB;AACvC,WAAK,UAAU,MAAM,IAAI,SAAS,CAAC,IAAI,IAAI,sBAAsB,OAAO,8BAA8B,cAAc,gCAAgC,uBAAuB;AAAA,IAC5K,GAFiB;AAGjB,UAAM,aAAa,wBAAC,OAAmB,0BAAiD;AACvF,4BAAsB,QAAQ;AAC9B,aAAO,KAAK,UAAU,MAAM,IAAI,SAAS,CAAC;AAAA,IAC3C,GAHmB;AAInB,UAAM,6BAA6B,6BAAM;AACxC,iBAAW,SAAS,aAAa,UAAU,GAAG;AAC7C,cAAM,OAAO,KAAK,UAAU,MAAM,IAAI,SAAS,CAAC;AAChD,YAAI,0BAA0B,OAAO,cAAc,oBAAoB,GAAG;AACzE,cAAI,CAAC,MAAM;AACV,qBAAS,KAAK;AAAA,UACf;AAAA,QACD,OAAO;AACN,cAAI,MAAM;AACT,uBAAW,OAAO,IAAI;AAAA,UACvB;AAAA,QACD;AAAA,MACD;AAAA,IACD,GAbmC;AAcnC,iBAAa,UAAU,EAAE,QAAQ,WAAS;AACzC,UAAI,0BAA0B,OAAO,cAAc,oBAAoB,GAAG;AACzE,iBAAS,KAAK;AAAA,MACf;AAAA,IACD,CAAC;AACD,SAAK,UAAU,aAAa,aAAa,CAAC,UAAU;AACnD,UAAI,0BAA0B,OAAO,cAAc,oBAAoB,GAAG;AACzE,iBAAS,KAAK;AAAA,MACf;AAAA,IACD,CAAC,CAAC;AACF,SAAK,UAAU,aAAa,eAAe,CAAC,UAAU;AACrD,YAAM,OAAO,KAAK,UAAU,MAAM,IAAI,SAAS,CAAC;AAChD,UAAI,MAAM;AACT,mBAAW,OAAO,IAAI;AAAA,MACvB;AAAA,IACD,CAAC,CAAC;AACF,SAAK,UAAU,qBAAqB,yBAAyB,OAAK;AACjE,UAAI,EAAE,qBAAqB,gCAAgC,GAAG;AAC7D,mCAA2B;AAAA,MAC5B;AAAA,IACD,CAAC,CAAC;AACF,SAAK,UAAU,aAAa,sBAAsB,0BAA0B,CAAC;AAAA,EAC9E;AAAA,EAES,UAAgB;AAExB,eAAW,WAAW,OAAO,OAAO,KAAK,SAAS,GAAG;AACpD,cAAQ,QAAQ;AAAA,IACjB;AACA,UAAM,QAAQ;AAAA,EACf;AACD;AAnEa,gCAAN;AAAA,EAKJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAVU;AAqEb,IAAM,wBAAN,cAAoC,WAAW;AAAA,EAe9C,YACC,OACgD,+BACjC,cACkB,gCACP,yBACzB;AACD,UAAM;AAL0C;AAOhD,SAAK,cAAc;AACnB,SAAK,SAAS;AACd,SAAK,YAAY,wBAAwB;AACzC,SAAK,uBAAuB,+BAA+B,IAAI,KAAK,WAAW,0BAA0B,EAAE,KAAK,sBAAsB,mBAAmB,KAAK,sBAAsB,kBAAkB,CAAC;AACvM,SAAK,+BAA+B,KAAK,UAAU,IAAI,iBAAiB,MAAM,KAAK,gCAAgC,GAAG,sBAAsB,iBAAiB,CAAC;AAC9J,SAAK,2BAA2B;AAChC,SAAK,iDAAiD;AACtD,SAAK,oCAAoC,CAAC;AAC1C,SAAK,iCAAiC;AAEtC,SAAK,UAAU,KAAK,OAAO,mBAAmB,MAAM;AACnD,UAAI,CAAC,KAAK,6BAA6B,YAAY,GAAG;AACrD,aAAK,6BAA6B,SAAS,KAAK,qBAAqB,IAAI,KAAK,MAAM,CAAC;AAAA,MACtF;AAAA,IACD,CAAC,CAAC;AACF,SAAK,UAAU,KAAK,OAAO,oBAAoB,MAAM;AACpD,UAAI,CAAC,KAAK,6BAA6B,YAAY,GAAG;AACrD,aAAK,6BAA6B,SAAS,KAAK,qBAAqB,IAAI,KAAK,MAAM,CAAC;AAAA,MACtF;AAAA,IACD,CAAC,CAAC;AACF,SAAK,UAAU,KAAK,OAAO,oBAAoB,MAAM;AAEpD,UAAI,KAAK,0BAA0B;AAClC,aAAK,yBAAyB,QAAQ;AACtC,aAAK,2BAA2B;AAAA,MACjC;AACA,UAAI,KAAK,gDAAgD;AACxD,aAAK,+CAA+C,OAAO;AAC3D,aAAK,iDAAiD;AAAA,MACvD;AACA,WAAK,2BAA2B,MAAM,MAAM,MAAM,CAAC,CAAC;AACpD,WAAK,6BAA6B,SAAS,CAAC;AAAA,IAC7C,CAAC,CAAC;AAEF,UAAM,8BAA8B,6BAAM;AACzC,cAAQ,KAAK,iCAAiC;AAC9C,WAAK,oCAAoC,CAAC;AAC1C,iBAAW,YAAY,KAAK,UAAU,IAAI,KAAK,GAAG;AACjD,YAAI,OAAO,SAAS,gBAAgB,YAAY;AAC/C,eAAK,kCAAkC,KAAK,SAAS,YAAY,MAAM;AACtE,gBAAI,KAAK,gDAAgD;AAExD,mBAAK,iCAAiC;AACtC;AAAA,YACD;AACA,iBAAK,6BAA6B,SAAS,CAAC;AAAA,UAC7C,CAAC,CAAC;AAAA,QACH;AAAA,MACD;AAAA,IACD,GAfoC;AAgBpC,gCAA4B;AAC5B,SAAK,UAAU,KAAK,UAAU,YAAY,MAAM;AAC/C,kCAA4B;AAC5B,WAAK,6BAA6B,SAAS,KAAK,qBAAqB,IAAI,KAAK,MAAM,CAAC;AAAA,IACtF,CAAC,CAAC;AAEF,SAAK,UAAU,aAAa,sBAAsB,OAAK;AAEtD,WAAK,2BAA2B,MAAM,MAAM,MAAM,CAAC,CAAC;AACpD,WAAK,6BAA6B,SAAS,KAAK,qBAAqB,IAAI,KAAK,MAAM,CAAC;AAAA,IACtF,CAAC,CAAC;AAEF,SAAK,6BAA6B,SAAS,CAAC;AAAA,EAC7C;AAAA,EArLD,OA8F+C;AAAA;AAAA;AAAA,EAE9C,OAAc,oBAAoB;AAAA,EAClC,OAAc,oBAAoB;AAAA,EAE1B;AAAA,EACS;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACT;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EA4EQ,UAAgB;AAC/B,QAAI,KAAK,0BAA0B;AAClC,WAAK,yBAAyB,QAAQ;AACtC,WAAK,2BAA2B;AAAA,IACjC;AACA,QAAI,KAAK,gDAAgD;AACxD,WAAK,+CAA+C,OAAO;AAC3D,WAAK,iDAAiD;AAAA,IACvD;AACA,YAAQ,KAAK,iCAAiC;AAC9C,SAAK,oCAAoC,CAAC;AAC1C,SAAK,2BAA2B,MAAM,MAAM,MAAM,CAAC,CAAC;AACpD,SAAK,cAAc;AAEnB,UAAM,QAAQ;AAAA,EACf;AAAA,EAEQ,kCAAwC;AAC/C,QAAI,KAAK,gDAAgD;AAExD;AAAA,IACD;AAEA,QAAI,CAAC,kCAAkC,KAAK,WAAW,KAAK,MAAM,GAAG;AAEpE,UAAI,KAAK,0BAA0B;AAElC,aAAK,OAAO,aAAa,kBAAkB,MAAM,KAAK;AAAA,MACvD;AACA;AAAA,IACD;AAEA,QAAI,CAAC,KAAK,OAAO,mBAAmB,GAAG;AAEtC;AAAA,IACD;AAEA,UAAM,0BAA0B,IAAI,wBAAwB;AAC5D,UAAM,eAAe,KAAK,2BAA2B,KAAK,yBAAyB,WAAW;AAC9F,UAAM,eAAe,KAAK,2BAA2B,KAAK,yBAAyB,YAAY,OAAO;AACtG,UAAM,UAAU,0BAA0B,KAAK,WAAW,KAAK,QAAQ,cAAc,cAAc,wBAAwB,KAAK;AAChI,SAAK,iDAAiD;AACtD,SAAK,iCAAiC;AAEtC,UAAM,iBAA8C,CAAC;AACrD,UAAM,wBAAwB,KAAK,OAAO,mBAAmB,CAAC,MAAM;AACnE,qBAAe,KAAK,CAAC;AAAA,IACtB,CAAC;AAED,UAAM,KAAK,IAAI,UAAU,KAAK;AAC9B,YAAQ,KAAK,CAAC,QAAQ;AACrB,WAAK,qBAAqB,OAAO,KAAK,QAAQ,GAAG,QAAQ,CAAC;AAC1D,WAAK,iDAAiD;AACtD,4BAAsB,QAAQ;AAE9B,UAAI,CAAC,KAAK;AACT,aAAK,2BAA2B,MAAM,MAAM,MAAM,cAAc;AAAA,MACjE,OAAO;AACN,cAAM,EAAE,UAAU,OAAO,IAAI;AAC7B,cAAM,UAAU,KAAK,8BAA8B,WAAW,QAAQ;AACtE,aAAK,2BAA2B,UAAU,UAAU,MAAM,SAAS,cAAc;AAAA,MAClF;AAAA,IACD,GAAG,CAAC,QAAQ;AACX,YAAM,kBAAkB,QAAQ,OAAO,oBAAoB,GAAG,KAAM,OAAO,IAAI,YAAY,YAAY,IAAI,QAAQ,QAAQ,MAAM,MAAM;AACvI,UAAI,CAAC,iBAAiB;AACrB,eAAO,kBAAkB,GAAG;AAAA,MAC7B;AAIA,WAAK,iDAAiD;AACtD,4BAAsB,QAAQ;AAE9B,UAAI,eAAe,SAAS,KAAK,KAAK,gCAAgC;AAErE,YAAI,CAAC,KAAK,6BAA6B,YAAY,GAAG;AACrD,eAAK,6BAA6B,SAAS,KAAK,qBAAqB,IAAI,KAAK,MAAM,CAAC;AAAA,QACtF;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EAEA,OAAe,MAAM,KAAkB,WAAmB,MAAmB,YAAoB,QAAsB;AAEtH,aAAS,KAAK,IAAI,QAAQ,KAAK,SAAS,YAAY,IAAI,SAAS,SAAS;AAC1E,aAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAChC,WAAK,aAAa,CAAC,IAAI,IAAI,YAAY,CAAC;AAAA,IACzC;AAAA,EACD;AAAA,EAEQ,2BAA2B,UAAiD,QAAqD,SAA+C,gBAAmD;AAC1O,UAAM,kBAAkB,KAAK;AAC7B,UAAM,qBAAqB,6BAAM;AAChC,WAAK,eAAe,SAAS,KAAK,KAAK,mCAAmC,CAAC,KAAK,6BAA6B,YAAY,GAAG;AAC3H,aAAK,6BAA6B,SAAS,KAAK,qBAAqB,IAAI,KAAK,MAAM,CAAC;AAAA,MACtF;AAAA,IACD,GAJ2B;AAM3B,QAAI,KAAK,0BAA0B;AAClC,WAAK,yBAAyB,QAAQ;AACtC,WAAK,2BAA2B;AAAA,IACjC;AACA,QAAI,KAAK,aAAa;AAErB,UAAI,YAAY,QAAQ;AACvB,iBAAS,8BAA8B,OAAO,QAAQ;AAAA,MACvD;AACA;AAAA,IACD;AACA,QAAI,CAAC,YAAY,CAAC,SAAS;AAC1B,WAAK,OAAO,aAAa,kBAAkB,MAAM,KAAK;AACtD;AAAA,IACD;AACA,QAAI,CAAC,QAAQ;AACZ,WAAK,OAAO,aAAa,kBAAkB,MAAM,IAAI;AACrD,yBAAmB;AACnB;AAAA,IACD;AAEA,QAAI,sBAAsB,MAAM,GAAG;AAClC,UAAI,CAAC,iBAAiB;AAErB,aAAK,OAAO,aAAa,kBAAkB,MAAM,IAAI;AACrD;AAAA,MACD;AACA,UAAI,OAAO,MAAM,WAAW,GAAG;AAE9B,iBAAS;AAAA,UACR,UAAU,OAAO;AAAA,UACjB,MAAM,gBAAgB;AAAA,QACvB;AAAA,MACD,OAAO;AACN,YAAI,cAAc;AAClB,mBAAW,QAAQ,OAAO,OAAO;AAChC,0BAAgB,KAAK,OAAO,KAAK,KAAK,SAAS,KAAK,KAAK;AAAA,QAC1D;AAEA,cAAM,UAAU,gBAAgB;AAChC,cAAM,WAAW,IAAI,YAAY,QAAQ,SAAS,WAAW;AAE7D,YAAI,eAAe,QAAQ;AAC3B,YAAI,gBAAgB,SAAS;AAC7B,iBAAS,IAAI,OAAO,MAAM,SAAS,GAAG,KAAK,GAAG,KAAK;AAClD,gBAAM,OAAO,OAAO,MAAM,CAAC;AAE3B,cAAI,KAAK,QAAQ,QAAQ,QAAQ;AAChC,oBAAQ,qBAAqB,gBAAgB,UAAU,OAAO,UAAU,GAAG,KAAK,OAAO,QAAQ,MAAM;AAErG,iBAAK,OAAO,aAAa,kBAAkB,MAAM,IAAI;AACrD;AAAA,UACD;AAEA,gBAAM,YAAY,gBAAgB,KAAK,QAAQ,KAAK;AACpD,cAAI,YAAY,GAAG;AAClB,kCAAsB,MAAM,SAAS,eAAe,WAAW,UAAU,gBAAgB,WAAW,SAAS;AAC7G,6BAAiB;AAAA,UAClB;AAEA,cAAI,KAAK,MAAM;AACd,kCAAsB,MAAM,KAAK,MAAM,GAAG,UAAU,gBAAgB,KAAK,KAAK,QAAQ,KAAK,KAAK,MAAM;AACtG,6BAAiB,KAAK,KAAK;AAAA,UAC5B;AAEA,yBAAe,KAAK;AAAA,QACrB;AAEA,YAAI,eAAe,GAAG;AACrB,gCAAsB,MAAM,SAAS,GAAG,UAAU,GAAG,YAAY;AAAA,QAClE;AAEA,iBAAS;AAAA,UACR,UAAU,OAAO;AAAA,UACjB,MAAM;AAAA,QACP;AAAA,MACD;AAAA,IACD;AAEA,QAAI,iBAAiB,MAAM,GAAG;AAE7B,WAAK,2BAA2B,IAAI,uBAAuB,UAAU,OAAO,UAAU,OAAO,IAAI;AAEjG,YAAM,SAAS,mBAAmB,QAAQ,SAAS,KAAK,OAAO,cAAc,CAAC;AAG9E,UAAI,eAAe,SAAS,GAAG;AAK9B,mBAAW,UAAU,gBAAgB;AACpC,qBAAW,QAAQ,QAAQ;AAC1B,uBAAW,gBAAgB,OAAO,SAAS;AAC1C,mBAAK,UAAU,aAAa,OAAO,aAAa,IAAI;AAAA,YACrD;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAEA,WAAK,OAAO,aAAa,kBAAkB,QAAQ,IAAI;AAAA,IACxD,OAAO;AACN,WAAK,OAAO,aAAa,kBAAkB,MAAM,IAAI;AAAA,IACtD;AAEA,uBAAmB;AAAA,EACpB;AACD;AAtSM,wBAAN;AAAA,EAiBG;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GApBG;AAwSN,MAAM,uBAAuB;AAAA,EAC5B,YACiB,UACA,UACA,MACf;AAHe;AACA;AACA;AAAA,EACb;AAAA,EA3YL,OAsY6B;AAAA;AAAA;AAAA,EAOrB,UAAgB;AACtB,SAAK,SAAS,8BAA8B,KAAK,QAAQ;AAAA,EAC1D;AACD;AAEA,sBAAsB,6BAA6B;",
  "names": []
}
