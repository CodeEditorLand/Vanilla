{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/inlineCompletions/browser/controller/inlineCompletionsController.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createStyleSheetFromObservable } from \"../../../../../base/browser/domObservable.js\";\nimport { alert } from \"../../../../../base/browser/ui/aria/aria.js\";\nimport { timeout } from \"../../../../../base/common/async.js\";\nimport { cancelOnDispose } from \"../../../../../base/common/cancellation.js\";\nimport { readHotReloadableExport } from \"../../../../../base/common/hotReloadHelpers.js\";\nimport {\n\tDisposable,\n\ttype DisposableStore,\n\ttoDisposable,\n} from \"../../../../../base/common/lifecycle.js\";\nimport {\n\ttype IObservable,\n\ttype ISettableObservable,\n\ttype ITransaction,\n\tautorun,\n\tconstObservable,\n\tderived,\n\tderivedDisposable,\n\tderivedObservableWithCache,\n\tmapObservableArrayCached,\n\tobservableFromEvent,\n\tobservableSignal,\n\tobservableValue,\n\trunOnChange,\n\trunOnChangeWithStore,\n\ttransaction,\n\twaitForState,\n} from \"../../../../../base/common/observable.js\";\nimport { isUndefined } from \"../../../../../base/common/types.js\";\nimport { localize } from \"../../../../../nls.js\";\nimport { IAccessibilityService } from \"../../../../../platform/accessibility/common/accessibility.js\";\nimport {\n\tAccessibilitySignal,\n\tIAccessibilitySignalService,\n} from \"../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js\";\nimport { ICommandService } from \"../../../../../platform/commands/common/commands.js\";\nimport { IConfigurationService } from \"../../../../../platform/configuration/common/configuration.js\";\nimport { IContextKeyService } from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport { IInstantiationService } from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../../platform/keybinding/common/keybinding.js\";\nimport { CoreEditingCommands } from \"../../../../browser/coreCommands.js\";\nimport type { ICodeEditor } from \"../../../../browser/editorBrowser.js\";\nimport { observableCodeEditor } from \"../../../../browser/observableCodeEditor.js\";\nimport { EditorOption } from \"../../../../common/config/editorOptions.js\";\nimport { Position } from \"../../../../common/core/position.js\";\nimport type { Range } from \"../../../../common/core/range.js\";\nimport { CursorChangeReason } from \"../../../../common/cursorEvents.js\";\nimport { ILanguageFeatureDebounceService } from \"../../../../common/services/languageFeatureDebounce.js\";\nimport { ILanguageFeaturesService } from \"../../../../common/services/languageFeatures.js\";\nimport {\n\tInlineCompletionsHintsWidget,\n\tInlineSuggestionHintsContentWidget,\n} from \"../hintsWidget/inlineCompletionsHintsWidget.js\";\nimport { InlineCompletionsModel } from \"../model/inlineCompletionsModel.js\";\nimport { SuggestWidgetAdaptor } from \"../model/suggestWidgetAdaptor.js\";\nimport { GhostTextView } from \"../view/ghostTextView.js\";\nimport { inlineSuggestCommitId } from \"./commandIds.js\";\nimport { InlineCompletionContextKeys } from \"./inlineCompletionContextKeys.js\";\n\nexport class InlineCompletionsController extends Disposable {\n\tstatic ID = \"editor.contrib.inlineCompletionsController\";\n\n\tpublic static get(editor: ICodeEditor): InlineCompletionsController | null {\n\t\treturn editor.getContribution<InlineCompletionsController>(\n\t\t\tInlineCompletionsController.ID,\n\t\t);\n\t}\n\n\tprivate readonly _editorObs = observableCodeEditor(this.editor);\n\tprivate readonly _positions = derived(\n\t\tthis,\n\t\t(reader) =>\n\t\t\tthis._editorObs.selections\n\t\t\t\t.read(reader)\n\t\t\t\t?.map((s) => s.getEndPosition()) ?? [new Position(1, 1)],\n\t);\n\n\tprivate readonly _suggestWidgetAdaptor = this._register(\n\t\tnew SuggestWidgetAdaptor(\n\t\t\tthis.editor,\n\t\t\t() => {\n\t\t\t\tthis._editorObs.forceUpdate();\n\t\t\t\treturn this.model\n\t\t\t\t\t.get()\n\t\t\t\t\t?.selectedInlineCompletion.get()\n\t\t\t\t\t?.toSingleTextEdit(undefined);\n\t\t\t},\n\t\t\t(item) =>\n\t\t\t\tthis._editorObs.forceUpdate((_tx) => {\n\t\t\t\t\t/** @description InlineCompletionsController.handleSuggestAccepted */\n\t\t\t\t\tthis.model.get()?.handleSuggestAccepted(item);\n\t\t\t\t}),\n\t\t),\n\t);\n\n\tprivate readonly _suggestWidgetSelectedItem = observableFromEvent(\n\t\tthis,\n\t\t(cb) =>\n\t\t\tthis._suggestWidgetAdaptor.onDidSelectedItemChange(() => {\n\t\t\t\tthis._editorObs.forceUpdate((_tx) => cb(undefined));\n\t\t\t}),\n\t\t() => this._suggestWidgetAdaptor.selectedItem,\n\t);\n\n\tprivate readonly _enabledInConfig = observableFromEvent(\n\t\tthis,\n\t\tthis.editor.onDidChangeConfiguration,\n\t\t() => this.editor.getOption(EditorOption.inlineSuggest).enabled,\n\t);\n\tprivate readonly _isScreenReaderEnabled = observableFromEvent(\n\t\tthis,\n\t\tthis._accessibilityService.onDidChangeScreenReaderOptimized,\n\t\t() => this._accessibilityService.isScreenReaderOptimized(),\n\t);\n\tprivate readonly _editorDictationInProgress = observableFromEvent(\n\t\tthis,\n\t\tthis._contextKeyService.onDidChangeContext,\n\t\t() =>\n\t\t\tthis._contextKeyService\n\t\t\t\t.getContext(this.editor.getDomNode())\n\t\t\t\t.getValue(\"editorDictation.inProgress\") === true,\n\t);\n\tprivate readonly _enabled = derived(\n\t\tthis,\n\t\t(reader) =>\n\t\t\tthis._enabledInConfig.read(reader) &&\n\t\t\t(!this._isScreenReaderEnabled.read(reader) ||\n\t\t\t\t!this._editorDictationInProgress.read(reader)),\n\t);\n\n\tprivate readonly _debounceValue = this._debounceService.for(\n\t\tthis._languageFeaturesService.inlineCompletionsProvider,\n\t\t\"InlineCompletionsDebounce\",\n\t\t{ min: 50, max: 50 },\n\t);\n\n\tpublic readonly model = derivedDisposable<\n\t\tInlineCompletionsModel | undefined\n\t>(this, (reader) => {\n\t\tif (this._editorObs.isReadonly.read(reader)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst textModel = this._editorObs.model.read(reader);\n\t\tif (!textModel) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst model: InlineCompletionsModel =\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\tInlineCompletionsModel,\n\t\t\t\ttextModel,\n\t\t\t\tthis._suggestWidgetSelectedItem,\n\t\t\t\tthis._editorObs.versionId,\n\t\t\t\tthis._positions,\n\t\t\t\tthis._debounceValue,\n\t\t\t\tobservableFromEvent(\n\t\t\t\t\tthis.editor.onDidChangeConfiguration,\n\t\t\t\t\t() => this.editor.getOption(EditorOption.suggest).preview,\n\t\t\t\t),\n\t\t\t\tobservableFromEvent(\n\t\t\t\t\tthis.editor.onDidChangeConfiguration,\n\t\t\t\t\t() =>\n\t\t\t\t\t\tthis.editor.getOption(EditorOption.suggest).previewMode,\n\t\t\t\t),\n\t\t\t\tobservableFromEvent(\n\t\t\t\t\tthis.editor.onDidChangeConfiguration,\n\t\t\t\t\t() =>\n\t\t\t\t\t\tthis.editor.getOption(EditorOption.inlineSuggest).mode,\n\t\t\t\t),\n\t\t\t\tthis._enabled,\n\t\t\t);\n\t\treturn model;\n\t}).recomputeInitiallyAndOnChange(this._store);\n\n\tprivate readonly _ghostTexts = derived(this, (reader) => {\n\t\tconst model = this.model.read(reader);\n\t\treturn model?.ghostTexts.read(reader) ?? [];\n\t});\n\tprivate readonly _stablizedGhostTexts = convertItemsToStableObservables(\n\t\tthis._ghostTexts,\n\t\tthis._store,\n\t);\n\n\tprivate readonly _ghostTextWidgets = mapObservableArrayCached(\n\t\tthis,\n\t\tthis._stablizedGhostTexts,\n\t\t(ghostText, store) =>\n\t\t\tderivedDisposable((reader) =>\n\t\t\t\tthis._instantiationService.createInstance(\n\t\t\t\t\treadHotReloadableExport(GhostTextView, reader),\n\t\t\t\t\tthis.editor,\n\t\t\t\t\t{\n\t\t\t\t\t\tghostText: ghostText,\n\t\t\t\t\t\tminReservedLineCount: constObservable(0),\n\t\t\t\t\t\ttargetTextModel: this.model.map((v) => v?.textModel),\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t).recomputeInitiallyAndOnChange(store),\n\t).recomputeInitiallyAndOnChange(this._store);\n\n\tprivate readonly _playAccessibilitySignal = observableSignal(this);\n\n\tprivate readonly _fontFamily = observableFromEvent(\n\t\tthis,\n\t\tthis.editor.onDidChangeConfiguration,\n\t\t() => this.editor.getOption(EditorOption.inlineSuggest).fontFamily,\n\t);\n\n\tconstructor(\n\t\tpublic readonly editor: ICodeEditor,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@ILanguageFeatureDebounceService private readonly _debounceService: ILanguageFeatureDebounceService,\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t\t@IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(new InlineCompletionContextKeys(this._contextKeyService, this.model));\n\n\t\tthis._register(runOnChange(this._editorObs.onDidType, (_value, _changes) => {\n\t\t\tif (this._enabled.get()) {\n\t\t\t\tthis.model.get()?.trigger();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._commandService.onDidExecuteCommand((e) => {\n\t\t\t// These commands don't trigger onDidType.\n\t\t\tconst commands = new Set([\n\t\t\t\tCoreEditingCommands.Tab.id,\n\t\t\t\tCoreEditingCommands.DeleteLeft.id,\n\t\t\t\tCoreEditingCommands.DeleteRight.id,\n\t\t\t\tinlineSuggestCommitId,\n\t\t\t\t'acceptSelectedSuggestion',\n\t\t\t]);\n\t\t\tif (commands.has(e.commandId) && editor.hasTextFocus() && this._enabled.get()) {\n\t\t\t\tthis._editorObs.forceUpdate(tx => {\n\t\t\t\t\t/** @description onDidExecuteCommand */\n\t\t\t\t\tthis.model.get()?.trigger(tx);\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(runOnChange(this._editorObs.selections, (_value, _, changes) => {\n\t\t\tif (changes.some(e => e.reason === CursorChangeReason.Explicit || e.source === 'api')) {\n\t\t\t\tthis.model.get()?.stop();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.editor.onDidBlurEditorWidget(() => {\n\t\t\t// This is a hidden setting very useful for debugging\n\t\t\tif (this._contextKeyService.getContextKeyValue<boolean>('accessibleViewIsShown')\n\t\t\t\t|| this._configurationService.getValue('editor.inlineSuggest.keepOnBlur')\n\t\t\t\t|| editor.getOption(EditorOption.inlineSuggest).keepOnBlur\n\t\t\t\t|| InlineSuggestionHintsContentWidget.dropDownVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttransaction(tx => {\n\t\t\t\t/** @description InlineCompletionsController.onDidBlurEditorWidget */\n\t\t\t\tthis.model.get()?.stop(tx);\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description InlineCompletionsController.forceRenderingAbove */\n\t\t\tconst state = this.model.read(reader)?.state.read(reader);\n\t\t\tif (state?.suggestItem) {\n\t\t\t\tif (state.primaryGhostText.lineCount >= 2) {\n\t\t\t\t\tthis._suggestWidgetAdaptor.forceRenderingAbove();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._suggestWidgetAdaptor.stopForceRenderingAbove();\n\t\t\t}\n\t\t}));\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis._suggestWidgetAdaptor.stopForceRenderingAbove();\n\t\t}));\n\n\t\tconst currentInlineCompletionBySemanticId = derivedObservableWithCache<string | undefined>(this, (reader, last) => {\n\t\t\tconst model = this.model.read(reader);\n\t\t\tconst state = model?.state.read(reader);\n\t\t\tif (this._suggestWidgetSelectedItem.get()) {\n\t\t\t\treturn last;\n\t\t\t}\n\t\t\treturn state?.inlineCompletion?.semanticId;\n\t\t});\n\t\tthis._register(runOnChangeWithStore(derived(reader => {\n\t\t\tthis._playAccessibilitySignal.read(reader);\n\t\t\tcurrentInlineCompletionBySemanticId.read(reader);\n\t\t\treturn {};\n\t\t}), async (_value, _, _deltas, store) => {\n\t\t\t/** @description InlineCompletionsController.playAccessibilitySignalAndReadSuggestion */\n\t\t\tconst model = this.model.get();\n\t\t\tconst state = model?.state.get();\n\t\t\tif (!state || !model) { return; }\n\t\t\tconst lineText = model.textModel.getLineContent(state.primaryGhostText.lineNumber);\n\n\t\t\tawait timeout(50, cancelOnDispose(store));\n\t\t\tawait waitForState(this._suggestWidgetSelectedItem, isUndefined, () => false, cancelOnDispose(store));\n\n\t\t\tawait this._accessibilitySignalService.playSignal(AccessibilitySignal.inlineSuggestion);\n\t\t\tif (this.editor.getOption(EditorOption.screenReaderAnnounceInlineSuggestion)) {\n\t\t\t\tthis._provideScreenReaderUpdate(state.primaryGhostText.renderForScreenReader(lineText));\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(new InlineCompletionsHintsWidget(this.editor, this.model, this._instantiationService));\n\n\t\tthis._register(createStyleSheetFromObservable(derived(reader => {\n\t\t\tconst fontFamily = this._fontFamily.read(reader);\n\t\t\tif (fontFamily === '' || fontFamily === 'default') { return ''; }\n\t\t\treturn `\n.monaco-editor .ghost-text-decoration,\n.monaco-editor .ghost-text-decoration-preview,\n.monaco-editor .ghost-text {\n\tfont-family: ${fontFamily};\n}`;\n\t\t})));\n\n\t\t// TODO@hediet\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('accessibility.verbosity.inlineCompletions')) {\n\t\t\t\tthis.editor.updateOptions({ inlineCompletionsAccessibilityVerbose: this._configurationService.getValue('accessibility.verbosity.inlineCompletions') });\n\t\t\t}\n\t\t}));\n\t\tthis.editor.updateOptions({ inlineCompletionsAccessibilityVerbose: this._configurationService.getValue('accessibility.verbosity.inlineCompletions') });\n\t}\n\n\tpublic playAccessibilitySignal(tx: ITransaction) {\n\t\tthis._playAccessibilitySignal.trigger(tx);\n\t}\n\n\tprivate _provideScreenReaderUpdate(content: string): void {\n\t\tconst accessibleViewShowing =\n\t\t\tthis._contextKeyService.getContextKeyValue<boolean>(\n\t\t\t\t\"accessibleViewIsShown\",\n\t\t\t);\n\t\tconst accessibleViewKeybinding =\n\t\t\tthis._keybindingService.lookupKeybinding(\n\t\t\t\t\"editor.action.accessibleView\",\n\t\t\t);\n\t\tlet hint: string | undefined;\n\t\tif (\n\t\t\t!accessibleViewShowing &&\n\t\t\taccessibleViewKeybinding &&\n\t\t\tthis.editor.getOption(\n\t\t\t\tEditorOption.inlineCompletionsAccessibilityVerbose,\n\t\t\t)\n\t\t) {\n\t\t\thint = localize(\n\t\t\t\t\"showAccessibleViewHint\",\n\t\t\t\t\"Inspect this in the accessible view ({0})\",\n\t\t\t\taccessibleViewKeybinding.getAriaLabel(),\n\t\t\t);\n\t\t}\n\t\talert(hint ? content + \", \" + hint : content);\n\t}\n\n\tpublic shouldShowHoverAt(range: Range) {\n\t\tconst ghostText = this.model.get()?.primaryGhostText.get();\n\t\tif (ghostText) {\n\t\t\treturn ghostText.parts.some((p) =>\n\t\t\t\trange.containsPosition(\n\t\t\t\t\tnew Position(ghostText.lineNumber, p.column),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic shouldShowHoverAtViewZone(viewZoneId: string): boolean {\n\t\treturn (\n\t\t\tthis._ghostTextWidgets.get()[0]?.get().ownsViewZone(viewZoneId) ??\n\t\t\tfalse\n\t\t);\n\t}\n\n\tpublic hide() {\n\t\ttransaction((tx) => {\n\t\t\tthis.model.get()?.stop(tx);\n\t\t});\n\t}\n}\n\nfunction convertItemsToStableObservables<T>(\n\titems: IObservable<readonly T[]>,\n\tstore: DisposableStore,\n): IObservable<IObservable<T>[]> {\n\tconst result = observableValue<IObservable<T>[]>(\"result\", []);\n\tconst innerObservables: ISettableObservable<T>[] = [];\n\n\tstore.add(\n\t\tautorun((reader) => {\n\t\t\tconst itemsValue = items.read(reader);\n\n\t\t\ttransaction((tx) => {\n\t\t\t\tif (itemsValue.length !== innerObservables.length) {\n\t\t\t\t\tinnerObservables.length = itemsValue.length;\n\t\t\t\t\tfor (let i = 0; i < innerObservables.length; i++) {\n\t\t\t\t\t\tif (!innerObservables[i]) {\n\t\t\t\t\t\t\tinnerObservables[i] = observableValue<T>(\n\t\t\t\t\t\t\t\t\"item\",\n\t\t\t\t\t\t\t\titemsValue[i],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresult.set([...innerObservables], tx);\n\t\t\t\t}\n\t\t\t\tinnerObservables.forEach((o, i) => o.set(itemsValue[i], tx));\n\t\t\t});\n\t\t}),\n\t);\n\n\treturn result;\n}\n"],
  "mappings": "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",
  "names": []
}
