import{KeyCode as g,KeyMod as p}from"../../../../../base/common/keyCodes.js";import{asyncTransaction as y,transaction as f}from"../../../../../base/common/observable.js";import*as o from"../../../../../nls.js";import{Action2 as A,MenuId as d}from"../../../../../platform/actions/common/actions.js";import{IConfigurationService as v}from"../../../../../platform/configuration/common/configuration.js";import{ContextKeyExpr as s}from"../../../../../platform/contextkey/common/contextkey.js";import{KeybindingWeight as S}from"../../../../../platform/keybinding/common/keybindingsRegistry.js";import{EditorAction as c}from"../../../../browser/editorExtensions.js";import{EditorContextKeys as r}from"../../../../common/editorContextKeys.js";import{Context as h}from"../../../suggest/browser/suggest.js";import{inlineSuggestCommitId as C,showNextInlineSuggestionActionId as N,showPreviousInlineSuggestionActionId as E}from"./commandIds.js";import{InlineCompletionContextKeys as t}from"./inlineCompletionContextKeys.js";import{InlineCompletionsController as l}from"./inlineCompletionsController.js";class m extends c{static ID=N;constructor(){super({id:m.ID,label:o.localize("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:s.and(r.writable,t.inlineSuggestionVisible),kbOpts:{weight:100,primary:p.Alt|g.BracketRight}})}async run(n,i){l.get(i)?.model.get()?.next()}}class b extends c{static ID=E;constructor(){super({id:b.ID,label:o.localize("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:s.and(r.writable,t.inlineSuggestionVisible),kbOpts:{weight:100,primary:p.Alt|g.BracketLeft}})}async run(n,i){l.get(i)?.model.get()?.previous()}}class M extends c{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:o.localize("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:r.writable})}async run(n,i){const e=l.get(i);await y(async a=>{await e?.model.get()?.triggerExplicitly(a),e?.playAccessibilitySignal(a)})}}class F extends c{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:o.localize("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:s.and(r.writable,t.inlineSuggestionVisible),kbOpts:{weight:S.EditorContrib+1,primary:p.CtrlCmd|g.RightArrow,kbExpr:s.and(r.writable,t.inlineSuggestionVisible)},menuOpts:[{menuId:d.InlineSuggestionToolbar,title:o.localize("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(n,i){const e=l.get(i);await e?.model.get()?.acceptNextWord(e.editor)}}class R extends c{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:o.localize("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:s.and(r.writable,t.inlineSuggestionVisible),kbOpts:{weight:S.EditorContrib+1},menuOpts:[{menuId:d.InlineSuggestionToolbar,title:o.localize("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(n,i){const e=l.get(i);await e?.model.get()?.acceptNextLine(e.editor)}}class j extends c{constructor(){super({id:C,label:o.localize("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:t.inlineSuggestionVisible,menuOpts:[{menuId:d.InlineSuggestionToolbar,title:o.localize("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:g.Tab,weight:200,kbExpr:s.and(t.inlineSuggestionVisible,r.tabMovesFocus.toNegated(),t.inlineSuggestionHasIndentationLessThanTabSize,h.Visible.toNegated(),r.hoverFocused.toNegated())}})}async run(n,i){const e=l.get(i);e&&(e.model.get()?.accept(e.editor),e.editor.focus())}}class I extends c{static ID="editor.action.inlineSuggest.hide";constructor(){super({id:I.ID,label:o.localize("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:t.inlineSuggestionVisible,kbOpts:{weight:100,primary:g.Escape}})}async run(n,i){const e=l.get(i);f(a=>{e?.model.get()?.stop(a)})}}class w extends A{static ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";constructor(){super({id:w.ID,title:o.localize("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:d.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:s.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(n,i){const e=n.get(v),x=e.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";e.updateValue("editor.inlineSuggest.showToolbar",x)}}export{j as AcceptInlineCompletion,R as AcceptNextLineOfInlineCompletion,F as AcceptNextWordOfInlineCompletion,I as HideInlineCompletion,m as ShowNextInlineSuggestionAction,b as ShowPreviousInlineSuggestionAction,w as ToggleAlwaysShowInlineSuggestionToolbar,M as TriggerInlineSuggestionAction};
