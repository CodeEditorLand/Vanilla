{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/colorPicker/browser/standaloneColorPicker/standaloneColorPickerParticipant.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { ICodeEditor } from '../../../../browser/editorBrowser.js';\nimport { LanguageFeatureRegistry } from '../../../../common/languageFeatureRegistry.js';\nimport { DocumentColorProvider, IColorInformation } from '../../../../common/languages.js';\nimport { IEditorHoverRenderContext } from '../../../hover/browser/hoverTypes.js';\nimport { getColors } from '../color.js';\nimport { ColorDetector } from '../colorDetector.js';\nimport { ColorPickerModel } from '../colorPickerModel.js';\nimport { createColorHover, renderHoverParts, updateColorPresentations, updateEditorModel } from '../colorPickerParticipantUtils.js';\nimport { ColorPickerWidget } from '../hoverColorPicker/hoverColorPickerWidget.js';\nimport { Range } from '../../../../common/core/range.js';\n\nexport class StandaloneColorPickerHover {\n\tconstructor(\n\t\tpublic readonly owner: StandaloneColorPickerParticipant,\n\t\tpublic readonly range: Range,\n\t\tpublic readonly model: ColorPickerModel,\n\t\tpublic readonly provider: DocumentColorProvider\n\t) { }\n}\n\nexport class StandaloneColorPickerParticipant {\n\n\tpublic readonly hoverOrdinal: number = 2;\n\tprivate _color: Color | null = null;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t) { }\n\n\tpublic async createColorHover(defaultColorInfo: IColorInformation, defaultColorProvider: DocumentColorProvider, colorProviderRegistry: LanguageFeatureRegistry<DocumentColorProvider>): Promise<{ colorHover: StandaloneColorPickerHover; foundInEditor: boolean } | null> {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn null;\n\t\t}\n\t\tconst colorDetector = ColorDetector.get(this._editor);\n\t\tif (!colorDetector) {\n\t\t\treturn null;\n\t\t}\n\t\tconst colors = await getColors(colorProviderRegistry, this._editor.getModel(), CancellationToken.None);\n\t\tlet foundColorInfo: IColorInformation | null = null;\n\t\tlet foundColorProvider: DocumentColorProvider | null = null;\n\t\tfor (const colorData of colors) {\n\t\t\tconst colorInfo = colorData.colorInfo;\n\t\t\tif (Range.containsRange(colorInfo.range, defaultColorInfo.range)) {\n\t\t\t\tfoundColorInfo = colorInfo;\n\t\t\t\tfoundColorProvider = colorData.provider;\n\t\t\t}\n\t\t}\n\t\tconst colorInfo = foundColorInfo ?? defaultColorInfo;\n\t\tconst colorProvider = foundColorProvider ?? defaultColorProvider;\n\t\tconst foundInEditor = !!foundColorInfo;\n\t\treturn { colorHover: await createColorHover(this, this._editor.getModel(), colorInfo, colorProvider), foundInEditor: foundInEditor };\n\t}\n\n\tpublic async updateEditorModel(colorHoverData: StandaloneColorPickerHover): Promise<void> {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tconst colorPickerModel = colorHoverData.model;\n\t\tlet range = new Range(colorHoverData.range.startLineNumber, colorHoverData.range.startColumn, colorHoverData.range.endLineNumber, colorHoverData.range.endColumn);\n\t\tif (this._color) {\n\t\t\tawait updateColorPresentations(this._editor.getModel(), colorPickerModel, this._color, range, colorHoverData);\n\t\t\trange = updateEditorModel(this._editor, range, colorPickerModel);\n\t\t}\n\t}\n\n\tpublic renderHoverParts(context: IEditorHoverRenderContext, hoverParts: StandaloneColorPickerHover[]): { disposables: IDisposable; hoverPart: StandaloneColorPickerHover; colorPicker: ColorPickerWidget } | undefined {\n\t\treturn renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n\t}\n\n\tpublic set color(color: Color | null) {\n\t\tthis._color = color;\n\t}\n\n\tpublic get color(): Color | null {\n\t\treturn this._color;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,yBAAyB;AAClC,SAAS,aAAa;AACtB,SAAS,mBAAmB;AAC5B,SAAS,qBAAqB;AAC9B,SAAS,mBAAmB;AAC5B,SAAS,+BAA+B;AACxC,SAAS,uBAAuB,yBAAyB;AACzD,SAAS,iCAAiC;AAC1C,SAAS,iBAAiB;AAC1B,SAAS,qBAAqB;AAC9B,SAAS,wBAAwB;AACjC,SAAS,kBAAkB,kBAAkB,0BAA0B,yBAAyB;AAChG,SAAS,yBAAyB;AAClC,SAAS,aAAa;AAEf,MAAM,2BAA2B;AAAA,EACvC,YACiB,OACA,OACA,OACA,UACf;AAJe;AACA;AACA;AACA;AAAA,EACb;AAAA,EA1BL,OAoBwC;AAAA;AAAA;AAOxC;AAEO,IAAM,mCAAN,MAAuC;AAAA,EAK7C,YACkB,SACe,eAC/B;AAFgB;AACe;AAAA,EAC7B;AAAA,EArCL,OA6B8C;AAAA;AAAA;AAAA,EAE7B,eAAuB;AAAA,EAC/B,SAAuB;AAAA,EAO/B,MAAa,iBAAiB,kBAAqC,sBAA6C,uBAA2J;AAC1Q,QAAI,CAAC,KAAK,QAAQ,SAAS,GAAG;AAC7B,aAAO;AAAA,IACR;AACA,UAAM,gBAAgB,cAAc,IAAI,KAAK,OAAO;AACpD,QAAI,CAAC,eAAe;AACnB,aAAO;AAAA,IACR;AACA,UAAM,SAAS,MAAM,UAAU,uBAAuB,KAAK,QAAQ,SAAS,GAAG,kBAAkB,IAAI;AACrG,QAAI,iBAA2C;AAC/C,QAAI,qBAAmD;AACvD,eAAW,aAAa,QAAQ;AAC/B,YAAMA,aAAY,UAAU;AAC5B,UAAI,MAAM,cAAcA,WAAU,OAAO,iBAAiB,KAAK,GAAG;AACjE,yBAAiBA;AACjB,6BAAqB,UAAU;AAAA,MAChC;AAAA,IACD;AACA,UAAM,YAAY,kBAAkB;AACpC,UAAM,gBAAgB,sBAAsB;AAC5C,UAAM,gBAAgB,CAAC,CAAC;AACxB,WAAO,EAAE,YAAY,MAAM,iBAAiB,MAAM,KAAK,QAAQ,SAAS,GAAG,WAAW,aAAa,GAAG,cAA6B;AAAA,EACpI;AAAA,EAEA,MAAa,kBAAkB,gBAA2D;AACzF,QAAI,CAAC,KAAK,QAAQ,SAAS,GAAG;AAC7B;AAAA,IACD;AACA,UAAM,mBAAmB,eAAe;AACxC,QAAI,QAAQ,IAAI,MAAM,eAAe,MAAM,iBAAiB,eAAe,MAAM,aAAa,eAAe,MAAM,eAAe,eAAe,MAAM,SAAS;AAChK,QAAI,KAAK,QAAQ;AAChB,YAAM,yBAAyB,KAAK,QAAQ,SAAS,GAAG,kBAAkB,KAAK,QAAQ,OAAO,cAAc;AAC5G,cAAQ,kBAAkB,KAAK,SAAS,OAAO,gBAAgB;AAAA,IAChE;AAAA,EACD;AAAA,EAEO,iBAAiB,SAAoC,YAA2J;AACtN,WAAO,iBAAiB,MAAM,KAAK,SAAS,KAAK,eAAe,YAAY,OAAO;AAAA,EACpF;AAAA,EAEA,IAAW,MAAM,OAAqB;AACrC,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,IAAW,QAAsB;AAChC,WAAO,KAAK;AAAA,EACb;AACD;AAzDa,mCAAN;AAAA,EAOJ;AAAA,GAPU;",
  "names": ["colorInfo"]
}
