var v=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=(i,o,r,e)=>{for(var t=e>1?void 0:e?h(o,r):o,n=i.length-1,l;n>=0;n--)(l=i[n])&&(t=(e?l(o,r,t):l(t))||t);return e&&t&&v(o,r,t),t},u=(i,o)=>(r,e)=>o(r,e,i);import{CancellationToken as P}from"../../../../../base/common/cancellation.js";import{IThemeService as y}from"../../../../../platform/theme/common/themeService.js";import{Range as p}from"../../../../common/core/range.js";import{getColors as b}from"../color.js";import{ColorDetector as I}from"../colorDetector.js";import{createColorHover as _,renderHoverParts as k,updateColorPresentations as M,updateEditorModel as E}from"../colorPickerParticipantUtils.js";class L{constructor(o,r,e,t){this.owner=o;this.range=r;this.model=e;this.provider=t}}let c=class{constructor(o,r){this._editor=o;this._themeService=r}hoverOrdinal=2;_color=null;async createColorHover(o,r,e){if(!this._editor.hasModel()||!I.get(this._editor))return null;const n=await b(e,this._editor.getModel(),P.None);let l=null,d=null;for(const s of n){const a=s.colorInfo;p.containsRange(a.range,o.range)&&(l=a,d=s.provider)}const C=l??o,f=d??r,g=!!l;return{colorHover:await _(this,this._editor.getModel(),C,f),foundInEditor:g}}async updateEditorModel(o){if(!this._editor.hasModel())return;const r=o.model;let e=new p(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn);this._color&&(await M(this._editor.getModel(),r,this._color,e,o),e=E(this._editor,e,r))}renderHoverParts(o,r){return k(this,this._editor,this._themeService,r,o)}set color(o){this._color=o}get color(){return this._color}};c=m([u(1,y)],c);export{L as StandaloneColorPickerHover,c as StandaloneColorPickerParticipant};
