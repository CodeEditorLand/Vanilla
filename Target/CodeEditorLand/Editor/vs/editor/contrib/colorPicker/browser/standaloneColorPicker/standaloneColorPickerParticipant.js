var g=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u=(l,o,r,e)=>{for(var t=e>1?void 0:e?h(o,r):o,n=l.length-1,i;n>=0;n--)(i=l[n])&&(t=(e?i(o,r,t):i(t))||t);return e&&t&&g(o,r,t),t},m=(l,o)=>(r,e)=>o(r,e,l);import{CancellationToken as I}from"../../../../../base/common/cancellation.js";import{IThemeService as P}from"../../../../../platform/theme/common/themeService.js";import{getColors as b}from"../color.js";import{ColorDetector as _}from"../colorDetector.js";import{createColorHover as y,renderHoverParts as k,updateColorPresentations as M,updateEditorModel as E}from"../colorPickerParticipantUtils.js";import{Range as p}from"../../../../common/core/range.js";class Y{constructor(o,r,e,t){this.owner=o;this.range=r;this.model=e;this.provider=t}}let d=class{constructor(o,r){this._editor=o;this._themeService=r}hoverOrdinal=2;_color=null;async createColorHover(o,r,e){if(!this._editor.hasModel()||!_.get(this._editor))return null;const n=await b(e,this._editor.getModel(),I.None);let i=null,c=null;for(const a of n){const s=a.colorInfo;p.containsRange(s.range,o.range)&&(i=s,c=a.provider)}const f=i??o,C=c??r,v=!!i;return{colorHover:await y(this,this._editor.getModel(),f,C),foundInEditor:v}}async updateEditorModel(o){if(!this._editor.hasModel())return;const r=o.model;let e=new p(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn);this._color&&(await M(this._editor.getModel(),r,this._color,e,o),e=E(this._editor,e,r))}renderHoverParts(o,r){return k(this,this._editor,this._themeService,r,o)}set color(o){this._color=o}get color(){return this._color}};d=u([m(1,P)],d);export{Y as StandaloneColorPickerHover,d as StandaloneColorPickerParticipant};
