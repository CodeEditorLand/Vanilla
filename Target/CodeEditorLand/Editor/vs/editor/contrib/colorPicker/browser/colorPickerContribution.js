import{CancellationToken as m}from"../../../../base/common/cancellation.js";import{illegalArgument as s}from"../../../../base/common/errors.js";import{URI as c}from"../../../../base/common/uri.js";import{registerAction2 as A}from"../../../../platform/actions/common/actions.js";import{CommandsRegistry as C}from"../../../../platform/commands/common/commands.js";import{EditorContributionInstantiation as a,registerEditorAction as f,registerEditorContribution as l}from"../../../browser/editorExtensions.js";import{Range as b}from"../../../common/core/range.js";import{registerEditorFeature as h}from"../../../common/editorFeatures.js";import{HoverParticipantRegistry as x}from"../../hover/browser/hoverTypes.js";import{ColorPresentationsCollector as F,ExtColorDataCollector as w,_findColorData as d,_setupColorCommand as p}from"./color.js";import{ColorDetector as g}from"./colorDetector.js";import{DefaultDocumentColorProviderFeature as S}from"./defaultDocumentColorProvider.js";import{HoverColorPickerContribution as u}from"./hoverColorPicker/hoverColorPickerContribution.js";import{HoverColorPickerParticipant as H}from"./hoverColorPicker/hoverColorPickerParticipant.js";import{HideStandaloneColorPicker as _,InsertColorWithStandaloneColorPicker as N,ShowOrFocusStandaloneColorPicker as j}from"./standaloneColorPicker/standaloneColorPickerActions.js";import{StandaloneColorPickerController as P}from"./standaloneColorPicker/standaloneColorPickerController.js";f(_),f(N),A(j),l(u.ID,u,a.BeforeFirstInteraction),l(P.ID,P,a.AfterFirstRender),l(g.ID,g,a.AfterFirstRender),h(S),x.register(H),C.registerCommand("_executeDocumentColorProvider",(e,...i)=>{const[o]=i;if(!(o instanceof c))throw s();const{model:n,colorProviderRegistry:r,isDefaultColorDecoratorsEnabled:t}=p(e,o);return d(new w,r,n,m.None,t)}),C.registerCommand("_executeColorPresentationProvider",(e,...i)=>{const[o,n]=i,{uri:r,range:t}=n;if(!(r instanceof c)||!Array.isArray(o)||o.length!==4||!b.isIRange(t))throw s();const{model:D,colorProviderRegistry:I,isDefaultColorDecoratorsEnabled:E}=p(e,r),[R,v,y,k]=o;return d(new F({range:t,color:{red:R,green:v,blue:y,alpha:k}}),I,D,m.None,E)});
