{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/colorPicker/browser/hoverColorPicker/hoverColorPickerParticipant.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AsyncIterableObject } from '../../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ICodeEditor } from '../../../../browser/editorBrowser.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { IModelDecoration } from '../../../../common/model.js';\nimport { DocumentColorProvider } from '../../../../common/languages.js';\nimport { ColorDetector } from '../colorDetector.js';\nimport { ColorPickerModel } from '../colorPickerModel.js';\nimport { ColorPickerWidget } from './hoverColorPickerWidget.js';\nimport { HoverAnchor, HoverAnchorType, IEditorHoverParticipant, IEditorHoverRenderContext, IHoverPart, IRenderedHoverPart, IRenderedHoverParts, RenderedHoverParts } from '../../../hover/browser/hoverTypes.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport * as nls from '../../../../../nls.js';\nimport { createColorHover, renderHoverParts } from '../colorPickerParticipantUtils.js';\n\nexport class ColorHover implements IHoverPart {\n\n\t/**\n\t * Force the hover to always be rendered at this specific range,\n\t * even in the case of multiple hover parts.\n\t */\n\tpublic readonly forceShowAtRange: boolean = true;\n\n\tconstructor(\n\t\tpublic readonly owner: IEditorHoverParticipant<ColorHover>,\n\t\tpublic readonly range: Range,\n\t\tpublic readonly model: ColorPickerModel,\n\t\tpublic readonly provider: DocumentColorProvider\n\t) { }\n\n\tpublic isValidForHoverAnchor(anchor: HoverAnchor): boolean {\n\t\treturn (\n\t\t\tanchor.type === HoverAnchorType.Range\n\t\t\t&& this.range.startColumn <= anchor.range.startColumn\n\t\t\t&& this.range.endColumn >= anchor.range.endColumn\n\t\t);\n\t}\n}\n\nexport class HoverColorPickerParticipant implements IEditorHoverParticipant<ColorHover> {\n\n\tpublic readonly hoverOrdinal: number = 2;\n\n\tprivate _colorPicker: ColorPickerWidget | undefined;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t) { }\n\n\tpublic computeSync(_anchor: HoverAnchor, _lineDecorations: IModelDecoration[]): ColorHover[] {\n\t\treturn [];\n\t}\n\n\tpublic computeAsync(anchor: HoverAnchor, lineDecorations: IModelDecoration[], token: CancellationToken): AsyncIterableObject<ColorHover> {\n\t\treturn AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n\t}\n\n\tprivate async _computeAsync(_anchor: HoverAnchor, lineDecorations: IModelDecoration[], _token: CancellationToken): Promise<ColorHover[]> {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn [];\n\t\t}\n\t\tconst colorDetector = ColorDetector.get(this._editor);\n\t\tif (!colorDetector) {\n\t\t\treturn [];\n\t\t}\n\t\tfor (const d of lineDecorations) {\n\t\t\tif (!colorDetector.isColorDecoration(d)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst colorData = colorDetector.getColorData(d.range.getStartPosition());\n\t\t\tif (colorData) {\n\t\t\t\tconst colorHover = await createColorHover(this, this._editor.getModel(), colorData.colorInfo, colorData.provider);\n\t\t\t\treturn [colorHover];\n\t\t\t}\n\n\t\t}\n\t\treturn [];\n\t}\n\n\tpublic renderHoverParts(context: IEditorHoverRenderContext, hoverParts: ColorHover[]): IRenderedHoverParts<ColorHover> {\n\t\tconst renderedPart = renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n\t\tif (!renderedPart) {\n\t\t\treturn new RenderedHoverParts([]);\n\t\t}\n\t\tthis._colorPicker = renderedPart.colorPicker;\n\t\tconst renderedHoverPart: IRenderedHoverPart<ColorHover> = {\n\t\t\thoverPart: renderedPart.hoverPart,\n\t\t\thoverElement: this._colorPicker.domNode,\n\t\t\tdispose() { renderedPart.disposables.dispose(); }\n\t\t};\n\t\treturn new RenderedHoverParts([renderedHoverPart]);\n\t}\n\n\tpublic getAccessibleContent(hoverPart: ColorHover): string {\n\t\treturn nls.localize('hoverAccessibilityColorParticipant', 'There is a color picker here.');\n\t}\n\n\tpublic handleResize(): void {\n\t\tthis._colorPicker?.layout();\n\t}\n\n\tpublic isColorPickerVisible(): boolean {\n\t\treturn !!this._colorPicker;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,2BAA2B;AACpC,SAAS,yBAAyB;AAClC,SAAS,mBAAmB;AAC5B,SAAS,aAAa;AACtB,SAAS,wBAAwB;AACjC,SAAS,6BAA6B;AACtC,SAAS,qBAAqB;AAC9B,SAAS,wBAAwB;AACjC,SAAS,yBAAyB;AAClC,SAAS,aAAa,iBAAiB,yBAAyB,2BAA2B,YAAY,oBAAoB,qBAAqB,0BAA0B;AAC1K,SAAS,qBAAqB;AAC9B,YAAY,SAAS;AACrB,SAAS,kBAAkB,wBAAwB;AAE5C,MAAM,WAAiC;AAAA,EAQ7C,YACiB,OACA,OACA,OACA,UACf;AAJe;AACA;AACA;AACA;AAAA,EACb;AAAA,EAhCL,OAmB8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM7B,mBAA4B;AAAA,EASrC,sBAAsB,QAA8B;AAC1D,WACC,OAAO,SAAS,gBAAgB,SAC7B,KAAK,MAAM,eAAe,OAAO,MAAM,eACvC,KAAK,MAAM,aAAa,OAAO,MAAM;AAAA,EAE1C;AACD;AAEO,IAAM,8BAAN,MAAiF;AAAA,EAMvF,YACkB,SACe,eAC/B;AAFgB;AACe;AAAA,EAC7B;AAAA,EApDL,OA2CwF;AAAA;AAAA;AAAA,EAEvE,eAAuB;AAAA,EAE/B;AAAA,EAOD,YAAY,SAAsB,kBAAoD;AAC5F,WAAO,CAAC;AAAA,EACT;AAAA,EAEO,aAAa,QAAqB,iBAAqC,OAA2D;AACxI,WAAO,oBAAoB,YAAY,KAAK,cAAc,QAAQ,iBAAiB,KAAK,CAAC;AAAA,EAC1F;AAAA,EAEA,MAAc,cAAc,SAAsB,iBAAqC,QAAkD;AACxI,QAAI,CAAC,KAAK,QAAQ,SAAS,GAAG;AAC7B,aAAO,CAAC;AAAA,IACT;AACA,UAAM,gBAAgB,cAAc,IAAI,KAAK,OAAO;AACpD,QAAI,CAAC,eAAe;AACnB,aAAO,CAAC;AAAA,IACT;AACA,eAAW,KAAK,iBAAiB;AAChC,UAAI,CAAC,cAAc,kBAAkB,CAAC,GAAG;AACxC;AAAA,MACD;AAEA,YAAM,YAAY,cAAc,aAAa,EAAE,MAAM,iBAAiB,CAAC;AACvE,UAAI,WAAW;AACd,cAAM,aAAa,MAAM,iBAAiB,MAAM,KAAK,QAAQ,SAAS,GAAG,UAAU,WAAW,UAAU,QAAQ;AAChH,eAAO,CAAC,UAAU;AAAA,MACnB;AAAA,IAED;AACA,WAAO,CAAC;AAAA,EACT;AAAA,EAEO,iBAAiB,SAAoC,YAA2D;AACtH,UAAM,eAAe,iBAAiB,MAAM,KAAK,SAAS,KAAK,eAAe,YAAY,OAAO;AACjG,QAAI,CAAC,cAAc;AAClB,aAAO,IAAI,mBAAmB,CAAC,CAAC;AAAA,IACjC;AACA,SAAK,eAAe,aAAa;AACjC,UAAM,oBAAoD;AAAA,MACzD,WAAW,aAAa;AAAA,MACxB,cAAc,KAAK,aAAa;AAAA,MAChC,UAAU;AAAE,qBAAa,YAAY,QAAQ;AAAA,MAAG;AAAA,IACjD;AACA,WAAO,IAAI,mBAAmB,CAAC,iBAAiB,CAAC;AAAA,EAClD;AAAA,EAEO,qBAAqB,WAA+B;AAC1D,WAAO,IAAI,SAAS,sCAAsC,+BAA+B;AAAA,EAC1F;AAAA,EAEO,eAAqB;AAC3B,SAAK,cAAc,OAAO;AAAA,EAC3B;AAAA,EAEO,uBAAgC;AACtC,WAAO,CAAC,CAAC,KAAK;AAAA,EACf;AACD;AAnEa,8BAAN;AAAA,EAQJ;AAAA,GARU;",
  "names": []
}
