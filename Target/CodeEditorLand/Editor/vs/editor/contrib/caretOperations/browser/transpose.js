import{KeyCode as b,KeyMod as h}from"../../../../../vs/base/common/keyCodes.js";import"../../../../../vs/editor/browser/editorBrowser.js";import{EditorAction as P,registerEditorAction as y}from"../../../../../vs/editor/browser/editorExtensions.js";import{ReplaceCommand as E}from"../../../../../vs/editor/common/commands/replaceCommand.js";import{Range as m}from"../../../../../vs/editor/common/core/range.js";import{MoveOperations as c}from"../../../../../vs/editor/common/cursor/cursorMoveOperations.js";import"../../../../../vs/editor/common/editorCommon.js";import{EditorContextKeys as d}from"../../../../../vs/editor/common/editorContextKeys.js";import*as I from"../../../../../vs/nls.js";import{KeybindingWeight as L}from"../../../../../vs/platform/keybinding/common/keybindingsRegistry.js";class x extends P{constructor(){super({id:"editor.action.transposeLetters",label:I.localize("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:d.writable,kbOpts:{kbExpr:d.textInputFocus,primary:0,mac:{primary:h.WinCtrl|b.KeyT},weight:L.EditorContrib}})}run(K,o){if(!o.hasModel())return;const t=o.getModel(),n=[],u=o.getSelections();for(const e of u){if(!e.isEmpty())continue;const a=e.startLineNumber,i=e.startColumn,l=t.getLineMaxColumn(a);if(a===1&&(i===1||i===2&&l===2))continue;const s=i===l?e.getPosition():c.rightPosition(t,e.getPosition().lineNumber,e.getPosition().column),r=c.leftPosition(t,s),p=c.leftPosition(t,r),f=t.getValueInRange(m.fromPositions(p,r)),g=t.getValueInRange(m.fromPositions(r,s)),C=m.fromPositions(p,s);n.push(new E(C,g+f))}n.length>0&&(o.pushUndoStop(),o.executeCommands(this.id,n),o.pushUndoStop())}}y(x);
