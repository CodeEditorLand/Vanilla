var I=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var m=(a,i,e,n)=>{for(var t=n>1?void 0:n?v(i,e):i,o=a.length-1,s;o>=0;o--)(s=a[o])&&(t=(n?s(i,e,t):s(t))||t);return n&&t&&I(i,e,t),t},h=(a,i)=>(e,n)=>i(e,n,a);import"./bannerController.css";import{$ as r,append as d,clearNode as p}from"../../../../base/browser/dom.js";import{ActionBar as C}from"../../../../base/browser/ui/actionbar/actionbar.js";import{Action as w}from"../../../../base/common/actions.js";import"../../../../base/common/htmlContent.js";import{Disposable as f}from"../../../../base/common/lifecycle.js";import{MarkdownRenderer as y}from"../../../browser/widget/markdownRenderer/browser/markdownRenderer.js";import"../../../browser/editorBrowser.js";import{IInstantiationService as u}from"../../../../platform/instantiation/common/instantiation.js";import{Link as S}from"../../../../platform/opener/browser/link.js";import{widgetClose as L}from"../../../../platform/theme/common/iconRegistry.js";import{ThemeIcon as g}from"../../../../base/common/themables.js";const A=26;let l=class extends f{constructor(e,n){super();this._editor=e;this.instantiationService=n;this.banner=this._register(this.instantiationService.createInstance(c))}banner;hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{this.hide(),e.onClose?.()}}),this._editor.setBanner(this.banner.element,A)}};l=m([h(1,u)],l);let c=class extends f{constructor(e){super();this.instantiationService=e;this.markdownRenderer=this.instantiationService.createInstance(y,{}),this.element=r("div.editor-banner"),this.element.tabIndex=0}element;markdownRenderer;messageActionsContainer;actionBar;getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const n=r("span");return n.innerText=e,n}return this.markdownRenderer.render(e).element}clear(){p(this.element)}show(e){p(this.element);const n=this.getAriaLabel(e);n&&this.element.setAttribute("aria-label",n);const t=d(this.element,r("div.icon-container"));t.setAttribute("aria-hidden","true"),e.icon&&t.appendChild(r(`div${g.asCSSSelector(e.icon)}`));const o=d(this.element,r("div.message-container"));if(o.setAttribute("aria-hidden","true"),o.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=d(this.element,r("div.message-actions-container")),e.actions)for(const b of e.actions)this._register(this.instantiationService.createInstance(S,this.messageActionsContainer,{...b,tabIndex:-1},{}));const s=d(this.element,r("div.action-container"));this.actionBar=this._register(new C(s)),this.actionBar.push(this._register(new w("banner.close","Close Banner",g.asClassName(L),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};c=m([h(0,u)],c);export{l as BannerController};
