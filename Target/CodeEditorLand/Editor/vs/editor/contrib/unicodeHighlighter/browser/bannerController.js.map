{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/unicodeHighlighter/browser/bannerController.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport \"./bannerController.css\";\nimport { $, append, clearNode } from \"../../../../base/browser/dom.js\";\nimport { ActionBar } from \"../../../../base/browser/ui/actionbar/actionbar.js\";\nimport { Action } from \"../../../../base/common/actions.js\";\nimport type { MarkdownString } from \"../../../../base/common/htmlContent.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport {\n\ttype ILinkDescriptor,\n\tLink,\n} from \"../../../../platform/opener/browser/link.js\";\nimport { widgetClose } from \"../../../../platform/theme/common/iconRegistry.js\";\nimport type { ICodeEditor } from \"../../../browser/editorBrowser.js\";\nimport { MarkdownRenderer } from \"../../../browser/widget/markdownRenderer/browser/markdownRenderer.js\";\n\nconst BANNER_ELEMENT_HEIGHT = 26;\n\nexport class BannerController extends Disposable {\n\tprivate readonly banner: Banner;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.banner = this._register(\n\t\t\tthis.instantiationService.createInstance(Banner),\n\t\t);\n\t}\n\n\tpublic hide() {\n\t\tthis._editor.setBanner(null, 0);\n\t\tthis.banner.clear();\n\t}\n\n\tpublic show(item: IBannerItem) {\n\t\tthis.banner.show({\n\t\t\t...item,\n\t\t\tonClose: () => {\n\t\t\t\tthis.hide();\n\t\t\t\titem.onClose?.();\n\t\t\t},\n\t\t});\n\t\tthis._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n\t}\n}\n\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nclass Banner extends Disposable {\n\tpublic element: HTMLElement;\n\n\tprivate readonly markdownRenderer: MarkdownRenderer;\n\n\tprivate messageActionsContainer: HTMLElement | undefined;\n\n\tprivate actionBar: ActionBar | undefined;\n\n\tconstructor(\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.markdownRenderer = this.instantiationService.createInstance(\n\t\t\tMarkdownRenderer,\n\t\t\t{},\n\t\t);\n\n\t\tthis.element = $(\"div.editor-banner\");\n\t\tthis.element.tabIndex = 0;\n\t}\n\n\tprivate getAriaLabel(item: IBannerItem): string | undefined {\n\t\tif (item.ariaLabel) {\n\t\t\treturn item.ariaLabel;\n\t\t}\n\t\tif (typeof item.message === \"string\") {\n\t\t\treturn item.message;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getBannerMessage(message: MarkdownString | string): HTMLElement {\n\t\tif (typeof message === \"string\") {\n\t\t\tconst element = $(\"span\");\n\t\t\telement.innerText = message;\n\t\t\treturn element;\n\t\t}\n\n\t\treturn this.markdownRenderer.render(message).element;\n\t}\n\n\tpublic clear() {\n\t\tclearNode(this.element);\n\t}\n\n\tpublic show(item: IBannerItem) {\n\t\t// Clear previous item\n\t\tclearNode(this.element);\n\n\t\t// Banner aria label\n\t\tconst ariaLabel = this.getAriaLabel(item);\n\t\tif (ariaLabel) {\n\t\t\tthis.element.setAttribute(\"aria-label\", ariaLabel);\n\t\t}\n\n\t\t// Icon\n\t\tconst iconContainer = append(this.element, $(\"div.icon-container\"));\n\t\ticonContainer.setAttribute(\"aria-hidden\", \"true\");\n\n\t\tif (item.icon) {\n\t\t\ticonContainer.appendChild(\n\t\t\t\t$(`div${ThemeIcon.asCSSSelector(item.icon)}`),\n\t\t\t);\n\t\t}\n\n\t\t// Message\n\t\tconst messageContainer = append(\n\t\t\tthis.element,\n\t\t\t$(\"div.message-container\"),\n\t\t);\n\t\tmessageContainer.setAttribute(\"aria-hidden\", \"true\");\n\t\tmessageContainer.appendChild(this.getBannerMessage(item.message));\n\n\t\t// Message Actions\n\t\tthis.messageActionsContainer = append(\n\t\t\tthis.element,\n\t\t\t$(\"div.message-actions-container\"),\n\t\t);\n\t\tif (item.actions) {\n\t\t\tfor (const action of item.actions) {\n\t\t\t\tthis._register(\n\t\t\t\t\tthis.instantiationService.createInstance(\n\t\t\t\t\t\tLink,\n\t\t\t\t\t\tthis.messageActionsContainer,\n\t\t\t\t\t\t{ ...action, tabIndex: -1 },\n\t\t\t\t\t\t{},\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Action\n\t\tconst actionBarContainer = append(\n\t\t\tthis.element,\n\t\t\t$(\"div.action-container\"),\n\t\t);\n\t\tthis.actionBar = this._register(new ActionBar(actionBarContainer));\n\t\tthis.actionBar.push(\n\t\t\tthis._register(\n\t\t\t\tnew Action(\n\t\t\t\t\t\"banner.close\",\n\t\t\t\t\t\"Close Banner\",\n\t\t\t\t\tThemeIcon.asClassName(widgetClose),\n\t\t\t\t\ttrue,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (typeof item.onClose === \"function\") {\n\t\t\t\t\t\t\titem.onClose();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t),\n\t\t\t{ icon: true, label: false },\n\t\t);\n\t\tthis.actionBar.setFocusable(false);\n\t}\n}\n\nexport interface IBannerItem {\n\treadonly id: string;\n\treadonly icon: ThemeIcon | undefined;\n\treadonly message: string | MarkdownString;\n\treadonly actions?: ILinkDescriptor[];\n\treadonly ariaLabel?: string;\n\treadonly onClose?: () => void;\n}\n"],
  "mappings": "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",
  "names": []
}
