{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/unicodeHighlighter/browser/bannerController.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILinkDescriptor, Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\n\nconst BANNER_ELEMENT_HEIGHT = 26;\n\nexport class BannerController extends Disposable {\n\tprivate readonly banner: Banner;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.banner = this._register(this.instantiationService.createInstance(Banner));\n\t}\n\n\tpublic hide() {\n\t\tthis._editor.setBanner(null, 0);\n\t\tthis.banner.clear();\n\t}\n\n\tpublic show(item: IBannerItem) {\n\t\tthis.banner.show({\n\t\t\t...item,\n\t\t\tonClose: () => {\n\t\t\t\tthis.hide();\n\t\t\t\titem.onClose?.();\n\t\t\t}\n\t\t});\n\t\tthis._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n\t}\n}\n\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nclass Banner extends Disposable {\n\tpublic element: HTMLElement;\n\n\tprivate readonly markdownRenderer: MarkdownRenderer;\n\n\tprivate messageActionsContainer: HTMLElement | undefined;\n\n\tprivate actionBar: ActionBar | undefined;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n\n\t\tthis.element = $('div.editor-banner');\n\t\tthis.element.tabIndex = 0;\n\t}\n\n\tprivate getAriaLabel(item: IBannerItem): string | undefined {\n\t\tif (item.ariaLabel) {\n\t\t\treturn item.ariaLabel;\n\t\t}\n\t\tif (typeof item.message === 'string') {\n\t\t\treturn item.message;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getBannerMessage(message: MarkdownString | string): HTMLElement {\n\t\tif (typeof message === 'string') {\n\t\t\tconst element = $('span');\n\t\t\telement.innerText = message;\n\t\t\treturn element;\n\t\t}\n\n\t\treturn this.markdownRenderer.render(message).element;\n\t}\n\n\tpublic clear() {\n\t\tclearNode(this.element);\n\t}\n\n\tpublic show(item: IBannerItem) {\n\t\t// Clear previous item\n\t\tclearNode(this.element);\n\n\t\t// Banner aria label\n\t\tconst ariaLabel = this.getAriaLabel(item);\n\t\tif (ariaLabel) {\n\t\t\tthis.element.setAttribute('aria-label', ariaLabel);\n\t\t}\n\n\t\t// Icon\n\t\tconst iconContainer = append(this.element, $('div.icon-container'));\n\t\ticonContainer.setAttribute('aria-hidden', 'true');\n\n\t\tif (item.icon) {\n\t\t\ticonContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n\t\t}\n\n\t\t// Message\n\t\tconst messageContainer = append(this.element, $('div.message-container'));\n\t\tmessageContainer.setAttribute('aria-hidden', 'true');\n\t\tmessageContainer.appendChild(this.getBannerMessage(item.message));\n\n\t\t// Message Actions\n\t\tthis.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n\t\tif (item.actions) {\n\t\t\tfor (const action of item.actions) {\n\t\t\t\tthis._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, { ...action, tabIndex: -1 }, {}));\n\t\t\t}\n\t\t}\n\n\t\t// Action\n\t\tconst actionBarContainer = append(this.element, $('div.action-container'));\n\t\tthis.actionBar = this._register(new ActionBar(actionBarContainer));\n\t\tthis.actionBar.push(this._register(\n\t\t\tnew Action(\n\t\t\t\t'banner.close',\n\t\t\t\t'Close Banner',\n\t\t\t\tThemeIcon.asClassName(widgetClose),\n\t\t\t\ttrue,\n\t\t\t\t() => {\n\t\t\t\t\tif (typeof item.onClose === 'function') {\n\t\t\t\t\t\titem.onClose();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t), { icon: true, label: false });\n\t\tthis.actionBar.setFocusable(false);\n\t}\n}\n\nexport interface IBannerItem {\n\treadonly id: string;\n\treadonly icon: ThemeIcon | undefined;\n\treadonly message: string | MarkdownString;\n\treadonly actions?: ILinkDescriptor[];\n\treadonly ariaLabel?: string;\n\treadonly onClose?: () => void;\n}\n"],
  "mappings": "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",
  "names": []
}
