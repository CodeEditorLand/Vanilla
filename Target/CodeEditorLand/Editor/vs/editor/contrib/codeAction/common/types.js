import{onUnexpectedExternalError as d}from"../../../../base/common/errors.js";import{HierarchicalKind as t}from"../../../../base/common/hierarchicalKind.js";const l=new class{QuickFix=new t("quickfix");Refactor=new t("refactor");RefactorExtract=this.Refactor.append("extract");RefactorInline=this.Refactor.append("inline");RefactorMove=this.Refactor.append("move");RefactorRewrite=this.Refactor.append("rewrite");Notebook=new t("notebook");Source=new t("source");SourceOrganizeImports=this.Source.append("organizeImports");SourceFixAll=this.Source.append("fixAll");SurroundWith=this.Refactor.append("surround")};var s=(o=>(o.IfSingle="ifSingle",o.First="first",o.Never="never",o))(s||{}),u=(r=>(r.Refactor="refactor",r.RefactorPreview="refactor preview",r.Lightbulb="lightbulb",r.Default="other (default)",r.SourceAction="source action",r.QuickFix="quick fix action",r.FixAll="fix all",r.OrganizeImports="organize imports",r.AutoFix="auto fix",r.QuickFixHover="quick fix hover window",r.OnSave="save participants",r.ProblemsView="problems view",r))(u||{});function w(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(n=>c(e,n,i.include))||!i.includeSourceActions&&l.Source.contains(e))}function k(i,e){const n=e.kind?new t(e.kind):void 0;return!(i.include&&(!n||!i.include.contains(n))||i.excludes&&n&&i.excludes.some(o=>c(n,o,i.include))||!i.includeSourceActions&&n&&l.Source.contains(n)||i.onlyIncludePreferredActions&&!e.isPreferred)}function c(i,e,n){return!(!e.contains(i)||n&&e.contains(n))}class a{constructor(e,n,o){this.kind=e;this.apply=n;this.preferred=o}static fromUser(e,n){return!e||typeof e!="object"?new a(n.kind,n.apply,!1):new a(a.getKindFromUser(e,n.kind),a.getApplyFromUser(e,n.apply),a.getPreferredUser(e))}static getApplyFromUser(e,n){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return n}}static getKindFromUser(e,n){return typeof e.kind=="string"?new t(e.kind):n}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}class F{constructor(e,n,o){this.action=e;this.provider=n;this.highlightRange=o}async resolve(e){if(this.provider?.resolveCodeAction&&!this.action.edit){let n;try{n=await this.provider.resolveCodeAction(this.action,e)}catch(o){d(o)}n&&(this.action.edit=n.edit)}return this}}export{s as CodeActionAutoApply,a as CodeActionCommandArgs,F as CodeActionItem,l as CodeActionKind,u as CodeActionTriggerSource,k as filtersAction,w as mayIncludeActionsOfKind};
