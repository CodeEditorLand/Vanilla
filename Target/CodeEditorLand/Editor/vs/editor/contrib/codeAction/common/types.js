import{onUnexpectedExternalError as s}from"../../../../base/common/errors.js";import{HierarchicalKind as t}from"../../../../base/common/hierarchicalKind.js";const l=new class{QuickFix=new t("quickfix");Refactor=new t("refactor");RefactorExtract=this.Refactor.append("extract");RefactorInline=this.Refactor.append("inline");RefactorMove=this.Refactor.append("move");RefactorRewrite=this.Refactor.append("rewrite");Notebook=new t("notebook");Source=new t("source");SourceOrganizeImports=this.Source.append("organizeImports");SourceFixAll=this.Source.append("fixAll");SurroundWith=this.Refactor.append("surround")};var d=(r=>(r.IfSingle="ifSingle",r.First="first",r.Never="never",r))(d||{}),p=(o=>(o.Refactor="refactor",o.RefactorPreview="refactor preview",o.Lightbulb="lightbulb",o.Default="other (default)",o.SourceAction="source action",o.QuickFix="quick fix action",o.FixAll="fix all",o.OrganizeImports="organize imports",o.AutoFix="auto fix",o.QuickFixHover="quick fix hover window",o.OnSave="save participants",o.ProblemsView="problems view",o))(p||{});function y(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(n=>c(e,n,i.include))||!i.includeSourceActions&&l.Source.contains(e))}function m(i,e){const n=e.kind?new t(e.kind):void 0;return!(i.include&&(!n||!i.include.contains(n))||i.excludes&&n&&i.excludes.some(r=>c(n,r,i.include))||!i.includeSourceActions&&n&&l.Source.contains(n)||i.onlyIncludePreferredActions&&!e.isPreferred)}function c(i,e,n){return!(!e.contains(i)||n&&e.contains(n))}class a{constructor(e,n,r){this.kind=e;this.apply=n;this.preferred=r}static fromUser(e,n){return!e||typeof e!="object"?new a(n.kind,n.apply,!1):new a(a.getKindFromUser(e,n.kind),a.getApplyFromUser(e,n.apply),a.getPreferredUser(e))}static getApplyFromUser(e,n){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return n}}static getKindFromUser(e,n){return typeof e.kind=="string"?new t(e.kind):n}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}class b{constructor(e,n,r){this.action=e;this.provider=n;this.highlightRange=r}async resolve(e){if(this.provider?.resolveCodeAction&&!this.action.edit){let n;try{n=await this.provider.resolveCodeAction(this.action,e)}catch(r){s(r)}n&&(this.action.edit=n.edit)}return this}}export{d as CodeActionAutoApply,a as CodeActionCommandArgs,b as CodeActionItem,l as CodeActionKind,p as CodeActionTriggerSource,m as filtersAction,y as mayIncludeActionsOfKind};
