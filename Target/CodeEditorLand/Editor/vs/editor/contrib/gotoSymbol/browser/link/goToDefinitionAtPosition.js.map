{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IKeyboardEvent } from \"../../../../../base/browser/keyboardEvent.js\";\nimport {\n\ttype CancelablePromise,\n\tcreateCancelablePromise,\n} from \"../../../../../base/common/async.js\";\nimport type { CancellationToken } from \"../../../../../base/common/cancellation.js\";\nimport { onUnexpectedError } from \"../../../../../base/common/errors.js\";\nimport { MarkdownString } from \"../../../../../base/common/htmlContent.js\";\nimport { DisposableStore } from \"../../../../../base/common/lifecycle.js\";\nimport \"./goToDefinitionAtPosition.css\";\nimport * as nls from \"../../../../../nls.js\";\nimport { IContextKeyService } from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport type { ServicesAccessor } from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport {\n\ttype ICodeEditor,\n\tMouseTargetType,\n} from \"../../../../browser/editorBrowser.js\";\nimport {\n\tEditorContributionInstantiation,\n\tregisterEditorContribution,\n} from \"../../../../browser/editorExtensions.js\";\nimport { EditorOption } from \"../../../../common/config/editorOptions.js\";\nimport type { Position } from \"../../../../common/core/position.js\";\nimport { type IRange, Range } from \"../../../../common/core/range.js\";\nimport type { IWordAtPosition } from \"../../../../common/core/wordHelper.js\";\nimport type {\n\tIEditorContribution,\n\tIEditorDecorationsCollection,\n} from \"../../../../common/editorCommon.js\";\nimport type { LocationLink } from \"../../../../common/languages.js\";\nimport { ILanguageService } from \"../../../../common/languages/language.js\";\nimport type {\n\tIModelDeltaDecoration,\n\tITextModel,\n} from \"../../../../common/model.js\";\nimport { ModelDecorationInjectedTextOptions } from \"../../../../common/model/textModel.js\";\nimport { ILanguageFeaturesService } from \"../../../../common/services/languageFeatures.js\";\nimport { ITextModelService } from \"../../../../common/services/resolverService.js\";\nimport {\n\tCodeEditorStateFlag,\n\tEditorState,\n} from \"../../../editorState/browser/editorState.js\";\nimport { PeekContext } from \"../../../peekView/browser/peekView.js\";\nimport { DefinitionAction } from \"../goToCommands.js\";\nimport { getDefinitionsAtPosition } from \"../goToSymbol.js\";\nimport {\n\tClickLinkGesture,\n\ttype ClickLinkKeyboardEvent,\n\ttype ClickLinkMouseEvent,\n} from \"./clickLinkGesture.js\";\n\nexport class GotoDefinitionAtPositionEditorContribution\n\timplements IEditorContribution\n{\n\tpublic static readonly ID = \"editor.contrib.gotodefinitionatposition\";\n\tstatic readonly MAX_SOURCE_PREVIEW_LINES = 8;\n\n\tprivate readonly editor: ICodeEditor;\n\tprivate readonly toUnhook = new DisposableStore();\n\tprivate readonly toUnhookForKeyboard = new DisposableStore();\n\tprivate readonly linkDecorations: IEditorDecorationsCollection;\n\tprivate currentWordAtPosition: IWordAtPosition | null = null;\n\tprivate previousPromise: CancelablePromise<LocationLink[] | null> | null =\n\t\tnull;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@ITextModelService private readonly textModelResolverService: ITextModelService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@ILanguageFeaturesService private readonly languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tthis.editor = editor;\n\t\tthis.linkDecorations = this.editor.createDecorationsCollection();\n\n\t\tconst linkGesture = new ClickLinkGesture(editor);\n\t\tthis.toUnhook.add(linkGesture);\n\n\t\tthis.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n\t\t\tthis.startFindDefinitionFromMouse(mouseEvent, keyboardEvent ?? undefined);\n\t\t}));\n\n\t\tthis.toUnhook.add(linkGesture.onExecute((mouseEvent: ClickLinkMouseEvent) => {\n\t\t\tif (this.isEnabled(mouseEvent)) {\n\t\t\t\tthis.gotoDefinition(mouseEvent.target.position!, mouseEvent.hasSideBySideModifier)\n\t\t\t\t\t.catch((error: Error) => {\n\t\t\t\t\t\tonUnexpectedError(error);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.removeLinkDecorations();\n\t\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tthis.toUnhook.add(linkGesture.onCancel(() => {\n\t\t\tthis.removeLinkDecorations();\n\t\t\tthis.currentWordAtPosition = null;\n\t\t}));\n\t}\n\n\tstatic get(\n\t\teditor: ICodeEditor,\n\t): GotoDefinitionAtPositionEditorContribution | null {\n\t\treturn editor.getContribution<GotoDefinitionAtPositionEditorContribution>(\n\t\t\tGotoDefinitionAtPositionEditorContribution.ID,\n\t\t);\n\t}\n\n\tasync startFindDefinitionFromCursor(position: Position) {\n\t\t// For issue: https://github.com/microsoft/vscode/issues/46257\n\t\t// equivalent to mouse move with meta/ctrl key\n\n\t\t// First find the definition and add decorations\n\t\t// to the editor to be shown with the content hover widget\n\t\tawait this.startFindDefinition(position);\n\t\t// Add listeners for editor cursor move and key down events\n\t\t// Dismiss the \"extended\" editor decorations when the user hides\n\t\t// the hover widget. There is no event for the widget itself so these\n\t\t// serve as a best effort. After removing the link decorations, the hover\n\t\t// widget is clean and will only show declarations per next request.\n\t\tthis.toUnhookForKeyboard.add(\n\t\t\tthis.editor.onDidChangeCursorPosition(() => {\n\t\t\t\tthis.currentWordAtPosition = null;\n\t\t\t\tthis.removeLinkDecorations();\n\t\t\t\tthis.toUnhookForKeyboard.clear();\n\t\t\t}),\n\t\t);\n\t\tthis.toUnhookForKeyboard.add(\n\t\t\tthis.editor.onKeyDown((e: IKeyboardEvent) => {\n\t\t\t\tif (e) {\n\t\t\t\t\tthis.currentWordAtPosition = null;\n\t\t\t\t\tthis.removeLinkDecorations();\n\t\t\t\t\tthis.toUnhookForKeyboard.clear();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate startFindDefinitionFromMouse(\n\t\tmouseEvent: ClickLinkMouseEvent,\n\t\twithKey?: ClickLinkKeyboardEvent,\n\t): void {\n\t\t// check if we are active and on a content widget\n\t\tif (\n\t\t\tmouseEvent.target.type === MouseTargetType.CONTENT_WIDGET &&\n\t\t\tthis.linkDecorations.length > 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n\t\t\tthis.currentWordAtPosition = null;\n\t\t\tthis.removeLinkDecorations();\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = mouseEvent.target.position!;\n\n\t\tthis.startFindDefinition(position);\n\t}\n\n\tprivate async startFindDefinition(position: Position): Promise<void> {\n\t\t// Dispose listeners for updating decorations when using keyboard to show definition hover\n\t\tthis.toUnhookForKeyboard.clear();\n\n\t\t// Find word at mouse position\n\t\tconst word = position\n\t\t\t? this.editor.getModel()?.getWordAtPosition(position)\n\t\t\t: null;\n\t\tif (!word) {\n\t\t\tthis.currentWordAtPosition = null;\n\t\t\tthis.removeLinkDecorations();\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if word at position is still the same\n\t\tif (\n\t\t\tthis.currentWordAtPosition &&\n\t\t\tthis.currentWordAtPosition.startColumn === word.startColumn &&\n\t\t\tthis.currentWordAtPosition.endColumn === word.endColumn &&\n\t\t\tthis.currentWordAtPosition.word === word.word\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.currentWordAtPosition = word;\n\n\t\t// Find definition and decorate word if found\n\t\tconst state = new EditorState(\n\t\t\tthis.editor,\n\t\t\tCodeEditorStateFlag.Position |\n\t\t\t\tCodeEditorStateFlag.Value |\n\t\t\t\tCodeEditorStateFlag.Selection |\n\t\t\t\tCodeEditorStateFlag.Scroll,\n\t\t);\n\n\t\tif (this.previousPromise) {\n\t\t\tthis.previousPromise.cancel();\n\t\t\tthis.previousPromise = null;\n\t\t}\n\n\t\tthis.previousPromise = createCancelablePromise((token) =>\n\t\t\tthis.findDefinition(position, token),\n\t\t);\n\n\t\tlet results: LocationLink[] | null;\n\t\ttry {\n\t\t\tresults = await this.previousPromise;\n\t\t} catch (error) {\n\t\t\tonUnexpectedError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!results || !results.length || !state.validate(this.editor)) {\n\t\t\tthis.removeLinkDecorations();\n\t\t\treturn;\n\t\t}\n\n\t\tconst linkRange = results[0].originSelectionRange\n\t\t\t? Range.lift(results[0].originSelectionRange)\n\t\t\t: new Range(\n\t\t\t\t\tposition.lineNumber,\n\t\t\t\t\tword.startColumn,\n\t\t\t\t\tposition.lineNumber,\n\t\t\t\t\tword.endColumn,\n\t\t\t\t);\n\n\t\t// Multiple results\n\t\tif (results.length > 1) {\n\t\t\tlet combinedRange = linkRange;\n\t\t\tfor (const { originSelectionRange } of results) {\n\t\t\t\tif (originSelectionRange) {\n\t\t\t\t\tcombinedRange = Range.plusRange(\n\t\t\t\t\t\tcombinedRange,\n\t\t\t\t\t\toriginSelectionRange,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.addDecoration(\n\t\t\t\tcombinedRange,\n\t\t\t\tnew MarkdownString().appendText(\n\t\t\t\t\tnls.localize(\n\t\t\t\t\t\t\"multipleResults\",\n\t\t\t\t\t\t\"Click to show {0} definitions.\",\n\t\t\t\t\t\tresults.length,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t} else {\n\t\t\t// Single result\n\t\t\tconst result = results[0];\n\n\t\t\tif (!result.uri) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.textModelResolverService\n\t\t\t\t.createModelReference(result.uri)\n\t\t\t\t.then((ref) => {\n\t\t\t\t\tif (!ref.object || !ref.object.textEditorModel) {\n\t\t\t\t\t\tref.dispose();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst {\n\t\t\t\t\t\tobject: { textEditorModel },\n\t\t\t\t\t} = ref;\n\t\t\t\t\tconst { startLineNumber } = result.range;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tstartLineNumber < 1 ||\n\t\t\t\t\t\tstartLineNumber > textEditorModel.getLineCount()\n\t\t\t\t\t) {\n\t\t\t\t\t\t// invalid range\n\t\t\t\t\t\tref.dispose();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst previewValue = this.getPreviewValue(\n\t\t\t\t\t\ttextEditorModel,\n\t\t\t\t\t\tstartLineNumber,\n\t\t\t\t\t\tresult,\n\t\t\t\t\t);\n\t\t\t\t\tconst languageId =\n\t\t\t\t\t\tthis.languageService.guessLanguageIdByFilepathOrFirstLine(\n\t\t\t\t\t\t\ttextEditorModel.uri,\n\t\t\t\t\t\t);\n\t\t\t\t\tthis.addDecoration(\n\t\t\t\t\t\tlinkRange,\n\t\t\t\t\t\tpreviewValue\n\t\t\t\t\t\t\t? new MarkdownString().appendCodeblock(\n\t\t\t\t\t\t\t\t\tlanguageId ? languageId : \"\",\n\t\t\t\t\t\t\t\t\tpreviewValue,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t);\n\t\t\t\t\tref.dispose();\n\t\t\t\t});\n\t\t}\n\t}\n\n\tprivate getPreviewValue(\n\t\ttextEditorModel: ITextModel,\n\t\tstartLineNumber: number,\n\t\tresult: LocationLink,\n\t) {\n\t\tlet rangeToUse = result.range;\n\t\tconst numberOfLinesInRange =\n\t\t\trangeToUse.endLineNumber - rangeToUse.startLineNumber;\n\t\tif (\n\t\t\tnumberOfLinesInRange >=\n\t\t\tGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES\n\t\t) {\n\t\t\trangeToUse = this.getPreviewRangeBasedOnIndentation(\n\t\t\t\ttextEditorModel,\n\t\t\t\tstartLineNumber,\n\t\t\t);\n\t\t}\n\n\t\tconst previewValue = this.stripIndentationFromPreviewRange(\n\t\t\ttextEditorModel,\n\t\t\tstartLineNumber,\n\t\t\trangeToUse,\n\t\t);\n\t\treturn previewValue;\n\t}\n\n\tprivate stripIndentationFromPreviewRange(\n\t\ttextEditorModel: ITextModel,\n\t\tstartLineNumber: number,\n\t\tpreviewRange: IRange,\n\t) {\n\t\tconst startIndent =\n\t\t\ttextEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n\t\tlet minIndent = startIndent;\n\n\t\tfor (\n\t\t\tlet endLineNumber = startLineNumber + 1;\n\t\t\tendLineNumber < previewRange.endLineNumber;\n\t\t\tendLineNumber++\n\t\t) {\n\t\t\tconst endIndent =\n\t\t\t\ttextEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n\t\t\tminIndent = Math.min(minIndent, endIndent);\n\t\t}\n\n\t\tconst previewValue = textEditorModel\n\t\t\t.getValueInRange(previewRange)\n\t\t\t.replace(new RegExp(`^\\\\s{${minIndent - 1}}`, \"gm\"), \"\")\n\t\t\t.trim();\n\t\treturn previewValue;\n\t}\n\n\tprivate getPreviewRangeBasedOnIndentation(\n\t\ttextEditorModel: ITextModel,\n\t\tstartLineNumber: number,\n\t) {\n\t\tconst startIndent =\n\t\t\ttextEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n\t\tconst maxLineNumber = Math.min(\n\t\t\ttextEditorModel.getLineCount(),\n\t\t\tstartLineNumber +\n\t\t\t\tGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES,\n\t\t);\n\t\tlet endLineNumber = startLineNumber + 1;\n\n\t\tfor (; endLineNumber < maxLineNumber; endLineNumber++) {\n\t\t\tconst endIndent =\n\t\t\t\ttextEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n\n\t\t\tif (startIndent === endIndent) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn new Range(startLineNumber, 1, endLineNumber + 1, 1);\n\t}\n\n\tprivate addDecoration(\n\t\trange: Range,\n\t\thoverMessage: MarkdownString | undefined,\n\t): void {\n\t\tconst newDecorations: IModelDeltaDecoration = {\n\t\t\trange: range,\n\t\t\toptions: {\n\t\t\t\tdescription: \"goto-definition-link\",\n\t\t\t\tinlineClassName: \"goto-definition-link\",\n\t\t\t\thoverMessage,\n\t\t\t},\n\t\t};\n\n\t\tthis.linkDecorations.set([newDecorations]);\n\t}\n\n\tprivate removeLinkDecorations(): void {\n\t\tthis.linkDecorations.clear();\n\t}\n\n\tprivate isEnabled(\n\t\tmouseEvent: ClickLinkMouseEvent,\n\t\twithKey?: ClickLinkKeyboardEvent,\n\t): boolean {\n\t\treturn (\n\t\t\tthis.editor.hasModel() &&\n\t\t\tmouseEvent.isLeftClick &&\n\t\t\tmouseEvent.isNoneOrSingleMouseDown &&\n\t\t\tmouseEvent.target.type === MouseTargetType.CONTENT_TEXT &&\n\t\t\t!(\n\t\t\t\tmouseEvent.target.detail.injectedText?.options instanceof\n\t\t\t\tModelDecorationInjectedTextOptions\n\t\t\t) &&\n\t\t\t(mouseEvent.hasTriggerModifier ||\n\t\t\t\t(withKey ? withKey.keyCodeIsTriggerKey : false)) &&\n\t\t\tthis.languageFeaturesService.definitionProvider.has(\n\t\t\t\tthis.editor.getModel(),\n\t\t\t)\n\t\t);\n\t}\n\n\tprivate findDefinition(\n\t\tposition: Position,\n\t\ttoken: CancellationToken,\n\t): Promise<LocationLink[] | null> {\n\t\tconst model = this.editor.getModel();\n\t\tif (!model) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\treturn getDefinitionsAtPosition(\n\t\t\tthis.languageFeaturesService.definitionProvider,\n\t\t\tmodel,\n\t\t\tposition,\n\t\t\tfalse,\n\t\t\ttoken,\n\t\t);\n\t}\n\n\tprivate gotoDefinition(\n\t\tposition: Position,\n\t\topenToSide: boolean,\n\t): Promise<any> {\n\t\tthis.editor.setPosition(position);\n\t\treturn this.editor.invokeWithinContext((accessor) => {\n\t\t\tconst canPeek =\n\t\t\t\t!openToSide &&\n\t\t\t\tthis.editor.getOption(EditorOption.definitionLinkOpensInPeek) &&\n\t\t\t\t!this.isInPeekEditor(accessor);\n\t\t\tconst action = new DefinitionAction(\n\t\t\t\t{ openToSide, openInPeek: canPeek, muteMessage: true },\n\t\t\t\t{\n\t\t\t\t\ttitle: { value: \"\", original: \"\" },\n\t\t\t\t\tid: \"\",\n\t\t\t\t\tprecondition: undefined,\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn action.run(accessor);\n\t\t});\n\t}\n\n\tprivate isInPeekEditor(accessor: ServicesAccessor): boolean | undefined {\n\t\tconst contextKeyService = accessor.get(IContextKeyService);\n\t\treturn PeekContext.inPeekEditor.getValue(contextKeyService);\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.toUnhook.dispose();\n\t\tthis.toUnhookForKeyboard.dispose();\n\t}\n}\n\nregisterEditorContribution(\n\tGotoDefinitionAtPositionEditorContribution.ID,\n\tGotoDefinitionAtPositionEditorContribution,\n\tEditorContributionInstantiation.BeforeFirstInteraction,\n);\n"],
  "mappings": "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",
  "names": []
}
