{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../../base/browser/dom.js\";\nimport type { IMouseEvent } from \"../../../../../base/browser/mouseEvent.js\";\nimport { Orientation } from \"../../../../../base/browser/ui/sash/sash.js\";\nimport {\n\tSizing,\n\tSplitView,\n} from \"../../../../../base/browser/ui/splitview/splitview.js\";\nimport { Color } from \"../../../../../base/common/color.js\";\nimport { Emitter, Event } from \"../../../../../base/common/event.js\";\nimport type { FuzzyScore } from \"../../../../../base/common/filters.js\";\nimport { KeyCode } from \"../../../../../base/common/keyCodes.js\";\nimport {\n\tDisposableStore,\n\ttype IDisposable,\n\ttype IReference,\n\tdispose,\n} from \"../../../../../base/common/lifecycle.js\";\nimport { Schemas } from \"../../../../../base/common/network.js\";\nimport {\n\tbasenameOrAuthority,\n\tdirname,\n} from \"../../../../../base/common/resources.js\";\nimport \"./referencesWidget.css\";\nimport * as nls from \"../../../../../nls.js\";\nimport { IInstantiationService } from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../../platform/keybinding/common/keybinding.js\";\nimport { ILabelService } from \"../../../../../platform/label/common/label.js\";\nimport {\n\ttype IWorkbenchAsyncDataTreeOptions,\n\tWorkbenchAsyncDataTree,\n} from \"../../../../../platform/list/browser/listService.js\";\nimport {\n\ttype IColorTheme,\n\tIThemeService,\n} from \"../../../../../platform/theme/common/themeService.js\";\nimport type { ICodeEditor } from \"../../../../browser/editorBrowser.js\";\nimport { EmbeddedCodeEditorWidget } from \"../../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js\";\nimport type { IEditorOptions } from \"../../../../common/config/editorOptions.js\";\nimport { type IRange, Range } from \"../../../../common/core/range.js\";\nimport { ScrollType } from \"../../../../common/editorCommon.js\";\nimport type { Location } from \"../../../../common/languages.js\";\nimport { PLAINTEXT_LANGUAGE_ID } from \"../../../../common/languages/modesRegistry.js\";\nimport {\n\ttype IModelDeltaDecoration,\n\tTrackedRangeStickiness,\n} from \"../../../../common/model.js\";\nimport {\n\tModelDecorationOptions,\n\tTextModel,\n} from \"../../../../common/model/textModel.js\";\nimport {\n\ttype ITextEditorModel,\n\tITextModelService,\n} from \"../../../../common/services/resolverService.js\";\nimport * as peekView from \"../../../peekView/browser/peekView.js\";\nimport {\n\tFileReferences,\n\tOneReference,\n\ttype ReferencesModel,\n} from \"../referencesModel.js\";\nimport {\n\tAccessibilityProvider,\n\tDataSource,\n\tDelegate,\n\tFileReferencesRenderer,\n\tIdentityProvider,\n\tOneReferenceRenderer,\n\tStringRepresentationProvider,\n\ttype TreeElement,\n} from \"./referencesTree.js\";\n\nclass DecorationsManager implements IDisposable {\n\tprivate static readonly DecorationOptions = ModelDecorationOptions.register(\n\t\t{\n\t\t\tdescription: \"reference-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\tclassName: \"reference-decoration\",\n\t\t},\n\t);\n\n\tprivate _decorations = new Map<string, OneReference>();\n\tprivate _decorationIgnoreSet = new Set<string>();\n\tprivate readonly _callOnDispose = new DisposableStore();\n\tprivate readonly _callOnModelChange = new DisposableStore();\n\n\tconstructor(\n\t\tprivate _editor: ICodeEditor,\n\t\tprivate _model: ReferencesModel,\n\t) {\n\t\tthis._callOnDispose.add(\n\t\t\tthis._editor.onDidChangeModel(() => this._onModelChanged()),\n\t\t);\n\t\tthis._onModelChanged();\n\t}\n\n\tdispose(): void {\n\t\tthis._callOnModelChange.dispose();\n\t\tthis._callOnDispose.dispose();\n\t\tthis.removeDecorations();\n\t}\n\n\tprivate _onModelChanged(): void {\n\t\tthis._callOnModelChange.clear();\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const ref of this._model.references) {\n\t\t\tif (ref.uri.toString() === model.uri.toString()) {\n\t\t\t\tthis._addDecorations(ref.parent);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _addDecorations(reference: FileReferences): void {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._callOnModelChange.add(\n\t\t\tthis._editor\n\t\t\t\t.getModel()\n\t\t\t\t.onDidChangeDecorations(() => this._onDecorationChanged()),\n\t\t);\n\n\t\tconst newDecorations: IModelDeltaDecoration[] = [];\n\t\tconst newDecorationsActualIndex: number[] = [];\n\n\t\tfor (let i = 0, len = reference.children.length; i < len; i++) {\n\t\t\tconst oneReference = reference.children[i];\n\t\t\tif (this._decorationIgnoreSet.has(oneReference.id)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (\n\t\t\t\toneReference.uri.toString() !==\n\t\t\t\tthis._editor.getModel().uri.toString()\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tnewDecorations.push({\n\t\t\t\trange: oneReference.range,\n\t\t\t\toptions: DecorationsManager.DecorationOptions,\n\t\t\t});\n\t\t\tnewDecorationsActualIndex.push(i);\n\t\t}\n\n\t\tthis._editor.changeDecorations((changeAccessor) => {\n\t\t\tconst decorations = changeAccessor.deltaDecorations(\n\t\t\t\t[],\n\t\t\t\tnewDecorations,\n\t\t\t);\n\t\t\tfor (let i = 0; i < decorations.length; i++) {\n\t\t\t\tthis._decorations.set(\n\t\t\t\t\tdecorations[i],\n\t\t\t\t\treference.children[newDecorationsActualIndex[i]],\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _onDecorationChanged(): void {\n\t\tconst toRemove: string[] = [];\n\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [decorationId, reference] of this._decorations) {\n\t\t\tconst newRange = model.getDecorationRange(decorationId);\n\n\t\t\tif (!newRange) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet ignore = false;\n\t\t\tif (Range.equalsRange(newRange, reference.range)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (Range.spansMultipleLines(newRange)) {\n\t\t\t\tignore = true;\n\t\t\t} else {\n\t\t\t\tconst lineLength =\n\t\t\t\t\treference.range.endColumn - reference.range.startColumn;\n\t\t\t\tconst newLineLength = newRange.endColumn - newRange.startColumn;\n\n\t\t\t\tif (lineLength !== newLineLength) {\n\t\t\t\t\tignore = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ignore) {\n\t\t\t\tthis._decorationIgnoreSet.add(reference.id);\n\t\t\t\ttoRemove.push(decorationId);\n\t\t\t} else {\n\t\t\t\treference.range = newRange;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0, len = toRemove.length; i < len; i++) {\n\t\t\tthis._decorations.delete(toRemove[i]);\n\t\t}\n\t\tthis._editor.removeDecorations(toRemove);\n\t}\n\n\tremoveDecorations(): void {\n\t\tthis._editor.removeDecorations([...this._decorations.keys()]);\n\t\tthis._decorations.clear();\n\t}\n}\n\nexport class LayoutData {\n\tratio = 0.7;\n\theightInLines = 18;\n\n\tstatic fromJSON(raw: string): LayoutData {\n\t\tlet ratio: number | undefined;\n\t\tlet heightInLines: number | undefined;\n\t\ttry {\n\t\t\tconst data = <LayoutData>JSON.parse(raw);\n\t\t\tratio = data.ratio;\n\t\t\theightInLines = data.heightInLines;\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t\treturn {\n\t\t\tratio: ratio || 0.7,\n\t\t\theightInLines: heightInLines || 18,\n\t\t};\n\t}\n}\n\nexport interface SelectionEvent {\n\treadonly kind: \"goto\" | \"show\" | \"side\" | \"open\";\n\treadonly source: \"editor\" | \"tree\" | \"title\";\n\treadonly element?: Location;\n}\n\nclass ReferencesTree extends WorkbenchAsyncDataTree<\n\tReferencesModel | FileReferences,\n\tTreeElement,\n\tFuzzyScore\n> {}\n\n/**\n * ZoneWidget that is shown inside the editor\n */\nexport class ReferenceWidget extends peekView.PeekViewWidget {\n\tprivate _model?: ReferencesModel;\n\tprivate _decorationsManager?: DecorationsManager;\n\n\tprivate readonly _disposeOnNewModel = new DisposableStore();\n\tprivate readonly _callOnDispose = new DisposableStore();\n\n\tprivate readonly _onDidSelectReference = new Emitter<SelectionEvent>();\n\treadonly onDidSelectReference = this._onDidSelectReference.event;\n\n\tprivate _tree!: ReferencesTree;\n\tprivate _treeContainer!: HTMLElement;\n\tprivate _splitView!: SplitView;\n\tprivate _preview!: ICodeEditor;\n\tprivate _previewModelReference!: IReference<ITextEditorModel>;\n\tprivate _previewNotAvailableMessage!: TextModel;\n\tprivate _previewContainer!: HTMLElement;\n\tprivate _messageContainer!: HTMLElement;\n\tprivate _dim = new dom.Dimension(0, 0);\n\tprivate _isClosing = false; // whether or not a dispose is already in progress\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tprivate _defaultTreeKeyboardSupport: boolean,\n\t\tpublic layoutData: LayoutData,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITextModelService private readonly _textModelResolverService: ITextModelService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@peekView.IPeekViewService private readonly _peekViewService: peekView.IPeekViewService,\n\t\t@ILabelService private readonly _uriLabel: ILabelService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t) {\n\t\tsuper(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n\n\t\tthis._applyTheme(themeService.getColorTheme());\n\t\tthis._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n\t\tthis._peekViewService.addExclusiveWidget(editor, this);\n\t\tthis.create();\n\t}\n\n\tget isClosing() {\n\t\treturn this._isClosing;\n\t}\n\n\toverride dispose(): void {\n\t\tthis._isClosing = true;\n\t\tthis.setModel(undefined);\n\t\tthis._callOnDispose.dispose();\n\t\tthis._disposeOnNewModel.dispose();\n\t\tdispose(this._preview);\n\t\tdispose(this._previewNotAvailableMessage);\n\t\tdispose(this._tree);\n\t\tdispose(this._previewModelReference);\n\t\tthis._splitView.dispose();\n\t\tsuper.dispose();\n\t}\n\n\tprivate _applyTheme(theme: IColorTheme) {\n\t\tconst borderColor =\n\t\t\ttheme.getColor(peekView.peekViewBorder) || Color.transparent;\n\t\tthis.style({\n\t\t\tarrowColor: borderColor,\n\t\t\tframeColor: borderColor,\n\t\t\theaderBackgroundColor:\n\t\t\t\ttheme.getColor(peekView.peekViewTitleBackground) ||\n\t\t\t\tColor.transparent,\n\t\t\tprimaryHeadingColor: theme.getColor(\n\t\t\t\tpeekView.peekViewTitleForeground,\n\t\t\t),\n\t\t\tsecondaryHeadingColor: theme.getColor(\n\t\t\t\tpeekView.peekViewTitleInfoForeground,\n\t\t\t),\n\t\t});\n\t}\n\n\toverride show(where: IRange) {\n\t\tsuper.show(where, this.layoutData.heightInLines || 18);\n\t}\n\n\tfocusOnReferenceTree(): void {\n\t\tthis._tree.domFocus();\n\t}\n\n\tfocusOnPreviewEditor(): void {\n\t\tthis._preview.focus();\n\t}\n\n\tisPreviewEditorFocused(): boolean {\n\t\treturn this._preview.hasTextFocus();\n\t}\n\n\tprotected override _onTitleClick(e: IMouseEvent): void {\n\t\tif (this._preview && this._preview.getModel()) {\n\t\t\tthis._onDidSelectReference.fire({\n\t\t\t\telement: this._getFocusedReference(),\n\t\t\t\tkind: e.ctrlKey || e.metaKey || e.altKey ? \"side\" : \"open\",\n\t\t\t\tsource: \"title\",\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _fillBody(containerElement: HTMLElement): void {\n\t\tthis.setCssClass(\"reference-zone-widget\");\n\n\t\t// message pane\n\t\tthis._messageContainer = dom.append(\n\t\t\tcontainerElement,\n\t\t\tdom.$(\"div.messages\"),\n\t\t);\n\t\tdom.hide(this._messageContainer);\n\n\t\tthis._splitView = new SplitView(containerElement, {\n\t\t\torientation: Orientation.HORIZONTAL,\n\t\t});\n\n\t\t// editor\n\t\tthis._previewContainer = dom.append(\n\t\t\tcontainerElement,\n\t\t\tdom.$(\"div.preview.inline\"),\n\t\t);\n\t\tconst options: IEditorOptions = {\n\t\t\tscrollBeyondLastLine: false,\n\t\t\tscrollbar: {\n\t\t\t\tverticalScrollbarSize: 14,\n\t\t\t\thorizontal: \"auto\",\n\t\t\t\tuseShadows: true,\n\t\t\t\tverticalHasArrows: false,\n\t\t\t\thorizontalHasArrows: false,\n\t\t\t\talwaysConsumeMouseWheel: true,\n\t\t\t},\n\t\t\toverviewRulerLanes: 2,\n\t\t\tfixedOverflowWidgets: true,\n\t\t\tminimap: {\n\t\t\t\tenabled: false,\n\t\t\t},\n\t\t};\n\t\tthis._preview = this._instantiationService.createInstance(\n\t\t\tEmbeddedCodeEditorWidget,\n\t\t\tthis._previewContainer,\n\t\t\toptions,\n\t\t\t{},\n\t\t\tthis.editor,\n\t\t);\n\t\tdom.hide(this._previewContainer);\n\t\tthis._previewNotAvailableMessage =\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\tTextModel,\n\t\t\t\tnls.localize(\"missingPreviewMessage\", \"no preview available\"),\n\t\t\t\tPLAINTEXT_LANGUAGE_ID,\n\t\t\t\tTextModel.DEFAULT_CREATION_OPTIONS,\n\t\t\t\tnull,\n\t\t\t);\n\n\t\t// tree\n\t\tthis._treeContainer = dom.append(\n\t\t\tcontainerElement,\n\t\t\tdom.$(\"div.ref-tree.inline\"),\n\t\t);\n\t\tconst treeOptions: IWorkbenchAsyncDataTreeOptions<\n\t\t\tTreeElement,\n\t\t\tFuzzyScore\n\t\t> = {\n\t\t\tkeyboardSupport: this._defaultTreeKeyboardSupport,\n\t\t\taccessibilityProvider: new AccessibilityProvider(),\n\t\t\tkeyboardNavigationLabelProvider:\n\t\t\t\tthis._instantiationService.createInstance(\n\t\t\t\t\tStringRepresentationProvider,\n\t\t\t\t),\n\t\t\tidentityProvider: new IdentityProvider(),\n\t\t\topenOnSingleClick: true,\n\t\t\tselectionNavigation: true,\n\t\t\toverrideStyles: {\n\t\t\t\tlistBackground: peekView.peekViewResultsBackground,\n\t\t\t},\n\t\t};\n\t\tif (this._defaultTreeKeyboardSupport) {\n\t\t\t// the tree will consume `Escape` and prevent the widget from closing\n\t\t\tthis._callOnDispose.add(\n\t\t\t\tdom.addStandardDisposableListener(\n\t\t\t\t\tthis._treeContainer,\n\t\t\t\t\t\"keydown\",\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tif (e.equals(KeyCode.Escape)) {\n\t\t\t\t\t\t\tthis._keybindingService.dispatchEvent(e, e.target);\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\tthis._tree = this._instantiationService.createInstance(\n\t\t\tReferencesTree,\n\t\t\t\"ReferencesWidget\",\n\t\t\tthis._treeContainer,\n\t\t\tnew Delegate(),\n\t\t\t[\n\t\t\t\tthis._instantiationService.createInstance(\n\t\t\t\t\tFileReferencesRenderer,\n\t\t\t\t),\n\t\t\t\tthis._instantiationService.createInstance(OneReferenceRenderer),\n\t\t\t],\n\t\t\tthis._instantiationService.createInstance(DataSource),\n\t\t\ttreeOptions,\n\t\t);\n\n\t\t// split stuff\n\t\tthis._splitView.addView(\n\t\t\t{\n\t\t\t\tonDidChange: Event.None,\n\t\t\t\telement: this._previewContainer,\n\t\t\t\tminimumSize: 200,\n\t\t\t\tmaximumSize: Number.MAX_VALUE,\n\t\t\t\tlayout: (width) => {\n\t\t\t\t\tthis._preview.layout({ height: this._dim.height, width });\n\t\t\t\t},\n\t\t\t},\n\t\t\tSizing.Distribute,\n\t\t);\n\n\t\tthis._splitView.addView(\n\t\t\t{\n\t\t\t\tonDidChange: Event.None,\n\t\t\t\telement: this._treeContainer,\n\t\t\t\tminimumSize: 100,\n\t\t\t\tmaximumSize: Number.MAX_VALUE,\n\t\t\t\tlayout: (width) => {\n\t\t\t\t\tthis._treeContainer.style.height = `${this._dim.height}px`;\n\t\t\t\t\tthis._treeContainer.style.width = `${width}px`;\n\t\t\t\t\tthis._tree.layout(this._dim.height, width);\n\t\t\t\t},\n\t\t\t},\n\t\t\tSizing.Distribute,\n\t\t);\n\n\t\tthis._disposables.add(\n\t\t\tthis._splitView.onDidSashChange(() => {\n\t\t\t\tif (this._dim.width) {\n\t\t\t\t\tthis.layoutData.ratio =\n\t\t\t\t\t\tthis._splitView.getViewSize(0) / this._dim.width;\n\t\t\t\t}\n\t\t\t}, undefined),\n\t\t);\n\n\t\t// listen on selection and focus\n\t\tconst onEvent = (element: any, kind: \"show\" | \"goto\" | \"side\") => {\n\t\t\tif (element instanceof OneReference) {\n\t\t\t\tif (kind === \"show\") {\n\t\t\t\t\tthis._revealReference(element, false);\n\t\t\t\t}\n\t\t\t\tthis._onDidSelectReference.fire({\n\t\t\t\t\telement,\n\t\t\t\t\tkind,\n\t\t\t\t\tsource: \"tree\",\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tthis._disposables.add(\n\t\t\tthis._tree.onDidOpen((e) => {\n\t\t\t\tif (e.sideBySide) {\n\t\t\t\t\tonEvent(e.element, \"side\");\n\t\t\t\t} else if (e.editorOptions.pinned) {\n\t\t\t\t\tonEvent(e.element, \"goto\");\n\t\t\t\t} else {\n\t\t\t\t\tonEvent(e.element, \"show\");\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tdom.hide(this._treeContainer);\n\t}\n\n\tprotected override _onWidth(width: number) {\n\t\tif (this._dim) {\n\t\t\tthis._doLayoutBody(this._dim.height, width);\n\t\t}\n\t}\n\n\tprotected override _doLayoutBody(\n\t\theightInPixel: number,\n\t\twidthInPixel: number,\n\t): void {\n\t\tsuper._doLayoutBody(heightInPixel, widthInPixel);\n\t\tthis._dim = new dom.Dimension(widthInPixel, heightInPixel);\n\t\tthis.layoutData.heightInLines = this._viewZone\n\t\t\t? this._viewZone.heightInLines\n\t\t\t: this.layoutData.heightInLines;\n\t\tthis._splitView.layout(widthInPixel);\n\t\tthis._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n\t}\n\n\tsetSelection(selection: OneReference): Promise<any> {\n\t\treturn this._revealReference(selection, true).then(() => {\n\t\t\tif (!this._model) {\n\t\t\t\t// disposed\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// show in tree\n\t\t\tthis._tree.setSelection([selection]);\n\t\t\tthis._tree.setFocus([selection]);\n\t\t});\n\t}\n\n\tsetModel(newModel: ReferencesModel | undefined): Promise<any> {\n\t\t// clean up\n\t\tthis._disposeOnNewModel.clear();\n\t\tthis._model = newModel;\n\t\tif (this._model) {\n\t\t\treturn this._onNewModel();\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tprivate _onNewModel(): Promise<any> {\n\t\tif (!this._model) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tif (this._model.isEmpty) {\n\t\t\tthis.setTitle(\"\");\n\t\t\tthis._messageContainer.innerText = nls.localize(\n\t\t\t\t\"noResults\",\n\t\t\t\t\"No results\",\n\t\t\t);\n\t\t\tdom.show(this._messageContainer);\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tdom.hide(this._messageContainer);\n\t\tthis._decorationsManager = new DecorationsManager(\n\t\t\tthis._preview,\n\t\t\tthis._model,\n\t\t);\n\t\tthis._disposeOnNewModel.add(this._decorationsManager);\n\n\t\t// listen on model changes\n\t\tthis._disposeOnNewModel.add(\n\t\t\tthis._model.onDidChangeReferenceRange((reference) =>\n\t\t\t\tthis._tree.rerender(reference),\n\t\t\t),\n\t\t);\n\n\t\t// listen on editor\n\t\tthis._disposeOnNewModel.add(\n\t\t\tthis._preview.onMouseDown((e) => {\n\t\t\t\tconst { event, target } = e;\n\t\t\t\tif (event.detail !== 2) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst element = this._getFocusedReference();\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._onDidSelectReference.fire({\n\t\t\t\t\telement: { uri: element.uri, range: target.range! },\n\t\t\t\t\tkind:\n\t\t\t\t\t\tevent.ctrlKey || event.metaKey || event.altKey\n\t\t\t\t\t\t\t? \"side\"\n\t\t\t\t\t\t\t: \"open\",\n\t\t\t\t\tsource: \"editor\",\n\t\t\t\t});\n\t\t\t}),\n\t\t);\n\n\t\t// make sure things are rendered\n\t\tthis.container!.classList.add(\"results-loaded\");\n\t\tdom.show(this._treeContainer);\n\t\tdom.show(this._previewContainer);\n\t\tthis._splitView.layout(this._dim.width);\n\t\tthis.focusOnReferenceTree();\n\n\t\t// pick input and a reference to begin with\n\t\treturn this._tree.setInput(\n\t\t\tthis._model.groups.length === 1\n\t\t\t\t? this._model.groups[0]\n\t\t\t\t: this._model,\n\t\t);\n\t}\n\n\tprivate _getFocusedReference(): OneReference | undefined {\n\t\tconst [element] = this._tree.getFocus();\n\t\tif (element instanceof OneReference) {\n\t\t\treturn element;\n\t\t} else if (element instanceof FileReferences) {\n\t\t\tif (element.children.length > 0) {\n\t\t\t\treturn element.children[0];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync revealReference(reference: OneReference): Promise<void> {\n\t\tawait this._revealReference(reference, false);\n\t\tthis._onDidSelectReference.fire({\n\t\t\telement: reference,\n\t\t\tkind: \"goto\",\n\t\t\tsource: \"tree\",\n\t\t});\n\t}\n\n\tprivate _revealedReference?: OneReference;\n\n\tprivate async _revealReference(\n\t\treference: OneReference,\n\t\trevealParent: boolean,\n\t): Promise<void> {\n\t\t// check if there is anything to do...\n\t\tif (this._revealedReference === reference) {\n\t\t\treturn;\n\t\t}\n\t\tthis._revealedReference = reference;\n\n\t\t// Update widget header\n\t\tif (reference.uri.scheme !== Schemas.inMemory) {\n\t\t\tthis.setTitle(\n\t\t\t\tbasenameOrAuthority(reference.uri),\n\t\t\t\tthis._uriLabel.getUriLabel(dirname(reference.uri)),\n\t\t\t);\n\t\t} else {\n\t\t\tthis.setTitle(\n\t\t\t\tnls.localize(\"peekView.alternateTitle\", \"References\"),\n\t\t\t);\n\t\t}\n\n\t\tconst promise = this._textModelResolverService.createModelReference(\n\t\t\treference.uri,\n\t\t);\n\n\t\tif (this._tree.getInput() === reference.parent) {\n\t\t\tthis._tree.reveal(reference);\n\t\t} else {\n\t\t\tif (revealParent) {\n\t\t\t\tthis._tree.reveal(reference.parent);\n\t\t\t}\n\t\t\tawait this._tree.expand(reference.parent);\n\t\t\tthis._tree.reveal(reference);\n\t\t}\n\n\t\tconst ref = await promise;\n\n\t\tif (!this._model) {\n\t\t\t// disposed\n\t\t\tref.dispose();\n\t\t\treturn;\n\t\t}\n\n\t\tdispose(this._previewModelReference);\n\n\t\t// show in editor\n\t\tconst model = ref.object;\n\t\tif (model) {\n\t\t\tconst scrollType =\n\t\t\t\tthis._preview.getModel() === model.textEditorModel\n\t\t\t\t\t? ScrollType.Smooth\n\t\t\t\t\t: ScrollType.Immediate;\n\t\t\tconst sel = Range.lift(reference.range).collapseToStart();\n\t\t\tthis._previewModelReference = ref;\n\t\t\tthis._preview.setModel(model.textEditorModel);\n\t\t\tthis._preview.setSelection(sel);\n\t\t\tthis._preview.revealRangeInCenter(sel, scrollType);\n\t\t} else {\n\t\t\tthis._preview.setModel(this._previewNotAvailableMessage);\n\t\t\tref.dispose();\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
