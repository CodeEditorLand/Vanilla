import{StableEditorScrollState as d}from"../../../browser/stableEditorScroll.js";import{EditOperation as r}from"../../../common/core/editOperation.js";import{Range as s}from"../../../common/core/range.js";class a{static _handleEolEdits(e,i){let o;const l=[];for(const t of i)typeof t.eol=="number"&&(o=t.eol),t.range&&typeof t.text=="string"&&l.push(t);return typeof o=="number"&&e.hasModel()&&e.getModel().pushEOL(o),l}static _isFullModelReplaceEdit(e,i){if(!e.hasModel())return!1;const o=e.getModel(),l=o.validateRange(i.range);return o.getFullModelRange().equalsRange(l)}static execute(e,i,o){o&&e.pushUndoStop();const l=d.capture(e),t=a._handleEolEdits(e,i);t.length===1&&a._isFullModelReplaceEdit(e,t[0])?e.executeEdits("formatEditsCommand",t.map(n=>r.replace(s.lift(n.range),n.text))):e.executeEdits("formatEditsCommand",t.map(n=>r.replaceMove(s.lift(n.range),n.text))),o&&e.pushUndoStop(),l.restoreRelativeVerticalPositionOfCursor(e)}}export{a as FormattingEdit};
