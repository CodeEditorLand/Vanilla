{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/folding/browser/foldingDecorations.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { localize } from \"../../../../nls.js\";\nimport {\n\teditorSelectionBackground,\n\ticonForeground,\n\tregisterColor,\n\ttransparent,\n} from \"../../../../platform/theme/common/colorRegistry.js\";\nimport { registerIcon } from \"../../../../platform/theme/common/iconRegistry.js\";\nimport { themeColorFromId } from \"../../../../platform/theme/common/themeService.js\";\nimport type { ICodeEditor } from \"../../../browser/editorBrowser.js\";\nimport {\n\ttype IModelDecorationOptions,\n\ttype IModelDecorationsChangeAccessor,\n\tMinimapPosition,\n\tTrackedRangeStickiness,\n} from \"../../../common/model.js\";\nimport { ModelDecorationOptions } from \"../../../common/model/textModel.js\";\nimport type { IDecorationProvider } from \"./foldingModel.js\";\n\nconst foldBackground = registerColor(\n\t\"editor.foldBackground\",\n\t{\n\t\tlight: transparent(editorSelectionBackground, 0.3),\n\t\tdark: transparent(editorSelectionBackground, 0.3),\n\t\thcDark: null,\n\t\thcLight: null,\n\t},\n\tlocalize(\n\t\t\"foldBackgroundBackground\",\n\t\t\"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\",\n\t),\n\ttrue,\n);\nregisterColor(\n\t\"editor.foldPlaceholderForeground\",\n\t{ light: \"#808080\", dark: \"#808080\", hcDark: null, hcLight: null },\n\tlocalize(\n\t\t\"collapsedTextColor\",\n\t\t\"Color of the collapsed text after the first line of a folded range.\",\n\t),\n);\nregisterColor(\n\t\"editorGutter.foldingControlForeground\",\n\ticonForeground,\n\tlocalize(\n\t\t\"editorGutter.foldingControlForeground\",\n\t\t\"Color of the folding control in the editor gutter.\",\n\t),\n);\n\nexport const foldingExpandedIcon = registerIcon(\n\t\"folding-expanded\",\n\tCodicon.chevronDown,\n\tlocalize(\n\t\t\"foldingExpandedIcon\",\n\t\t\"Icon for expanded ranges in the editor glyph margin.\",\n\t),\n);\nexport const foldingCollapsedIcon = registerIcon(\n\t\"folding-collapsed\",\n\tCodicon.chevronRight,\n\tlocalize(\n\t\t\"foldingCollapsedIcon\",\n\t\t\"Icon for collapsed ranges in the editor glyph margin.\",\n\t),\n);\nexport const foldingManualCollapsedIcon = registerIcon(\n\t\"folding-manual-collapsed\",\n\tfoldingCollapsedIcon,\n\tlocalize(\n\t\t\"foldingManualCollapedIcon\",\n\t\t\"Icon for manually collapsed ranges in the editor glyph margin.\",\n\t),\n);\nexport const foldingManualExpandedIcon = registerIcon(\n\t\"folding-manual-expanded\",\n\tfoldingExpandedIcon,\n\tlocalize(\n\t\t\"foldingManualExpandedIcon\",\n\t\t\"Icon for manually expanded ranges in the editor glyph margin.\",\n\t),\n);\n\nconst foldedBackgroundMinimap = {\n\tcolor: themeColorFromId(foldBackground),\n\tposition: MinimapPosition.Inline,\n};\n\nconst collapsed = localize(\"linesCollapsed\", \"Click to expand the range.\");\nconst expanded = localize(\"linesExpanded\", \"Click to collapse the range.\");\n\nexport class FoldingDecorationProvider implements IDecorationProvider {\n\tprivate static readonly COLLAPSED_VISUAL_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-collapsed-visual-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tafterContentClassName: \"inline-folded\",\n\t\t\tisWholeLine: true,\n\t\t\tlinesDecorationsTooltip: collapsed,\n\t\t\tfirstLineDecorationClassName:\n\t\t\t\tThemeIcon.asClassName(foldingCollapsedIcon),\n\t\t});\n\n\tprivate static readonly COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-collapsed-highlighted-visual-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tafterContentClassName: \"inline-folded\",\n\t\t\tclassName: \"folded-background\",\n\t\t\tminimap: foldedBackgroundMinimap,\n\t\t\tisWholeLine: true,\n\t\t\tlinesDecorationsTooltip: collapsed,\n\t\t\tfirstLineDecorationClassName:\n\t\t\t\tThemeIcon.asClassName(foldingCollapsedIcon),\n\t\t});\n\n\tprivate static readonly MANUALLY_COLLAPSED_VISUAL_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-manually-collapsed-visual-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tafterContentClassName: \"inline-folded\",\n\t\t\tisWholeLine: true,\n\t\t\tlinesDecorationsTooltip: collapsed,\n\t\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(\n\t\t\t\tfoldingManualCollapsedIcon,\n\t\t\t),\n\t\t});\n\n\tprivate static readonly MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription:\n\t\t\t\t\"folding-manually-collapsed-highlighted-visual-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tafterContentClassName: \"inline-folded\",\n\t\t\tclassName: \"folded-background\",\n\t\t\tminimap: foldedBackgroundMinimap,\n\t\t\tisWholeLine: true,\n\t\t\tlinesDecorationsTooltip: collapsed,\n\t\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(\n\t\t\t\tfoldingManualCollapsedIcon,\n\t\t\t),\n\t\t});\n\n\tprivate static readonly NO_CONTROLS_COLLAPSED_RANGE_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-no-controls-range-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tafterContentClassName: \"inline-folded\",\n\t\t\tisWholeLine: true,\n\t\t\tlinesDecorationsTooltip: collapsed,\n\t\t});\n\n\tprivate static readonly NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-no-controls-range-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tafterContentClassName: \"inline-folded\",\n\t\t\tclassName: \"folded-background\",\n\t\t\tminimap: foldedBackgroundMinimap,\n\t\t\tisWholeLine: true,\n\t\t\tlinesDecorationsTooltip: collapsed,\n\t\t});\n\n\tprivate static readonly EXPANDED_VISUAL_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-expanded-visual-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\tisWholeLine: true,\n\t\t\tfirstLineDecorationClassName:\n\t\t\t\t\"alwaysShowFoldIcons \" +\n\t\t\t\tThemeIcon.asClassName(foldingExpandedIcon),\n\t\t\tlinesDecorationsTooltip: expanded,\n\t\t});\n\n\tprivate static readonly EXPANDED_AUTO_HIDE_VISUAL_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-expanded-auto-hide-visual-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\tisWholeLine: true,\n\t\t\tfirstLineDecorationClassName:\n\t\t\t\tThemeIcon.asClassName(foldingExpandedIcon),\n\t\t\tlinesDecorationsTooltip: expanded,\n\t\t});\n\n\tprivate static readonly MANUALLY_EXPANDED_VISUAL_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-manually-expanded-visual-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tisWholeLine: true,\n\t\t\tfirstLineDecorationClassName:\n\t\t\t\t\"alwaysShowFoldIcons \" +\n\t\t\t\tThemeIcon.asClassName(foldingManualExpandedIcon),\n\t\t\tlinesDecorationsTooltip: expanded,\n\t\t});\n\n\tprivate static readonly MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription:\n\t\t\t\t\"folding-manually-expanded-auto-hide-visual-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tisWholeLine: true,\n\t\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(\n\t\t\t\tfoldingManualExpandedIcon,\n\t\t\t),\n\t\t\tlinesDecorationsTooltip: expanded,\n\t\t});\n\n\tprivate static readonly NO_CONTROLS_EXPANDED_RANGE_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-no-controls-range-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\t\tisWholeLine: true,\n\t\t});\n\n\tprivate static readonly HIDDEN_RANGE_DECORATION =\n\t\tModelDecorationOptions.register({\n\t\t\tdescription: \"folding-hidden-range-decoration\",\n\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t});\n\n\tpublic showFoldingControls: \"always\" | \"never\" | \"mouseover\" = \"mouseover\";\n\n\tpublic showFoldingHighlights = true;\n\n\tconstructor(private readonly editor: ICodeEditor) {}\n\n\tgetDecorationOption(\n\t\tisCollapsed: boolean,\n\t\tisHidden: boolean,\n\t\tisManual: boolean,\n\t): IModelDecorationOptions {\n\t\tif (isHidden) {\n\t\t\t// is inside another collapsed region\n\t\t\treturn FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n\t\t}\n\t\tif (this.showFoldingControls === \"never\") {\n\t\t\tif (isCollapsed) {\n\t\t\t\treturn this.showFoldingHighlights\n\t\t\t\t\t? FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION\n\t\t\t\t\t: FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION;\n\t\t\t}\n\t\t\treturn FoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION;\n\t\t}\n\t\tif (isCollapsed) {\n\t\t\treturn isManual\n\t\t\t\t? this.showFoldingHighlights\n\t\t\t\t\t? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION\n\t\t\t\t\t: FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION\n\t\t\t\t: this.showFoldingHighlights\n\t\t\t\t\t? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION\n\t\t\t\t\t: FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION;\n\t\t} else if (this.showFoldingControls === \"mouseover\") {\n\t\t\treturn isManual\n\t\t\t\t? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION\n\t\t\t\t: FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n\t\t} else {\n\t\t\treturn isManual\n\t\t\t\t? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION\n\t\t\t\t: FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n\t\t}\n\t}\n\n\tchangeDecorations<T>(\n\t\tcallback: (changeAccessor: IModelDecorationsChangeAccessor) => T,\n\t): T {\n\t\treturn this.editor.changeDecorations(callback);\n\t}\n\n\tremoveDecorations(decorationIds: string[]): void {\n\t\tthis.editor.removeDecorations(decorationIds);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
