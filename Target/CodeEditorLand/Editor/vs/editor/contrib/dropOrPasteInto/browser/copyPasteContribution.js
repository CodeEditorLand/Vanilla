import{HierarchicalKind as g}from"../../../../base/common/hierarchicalKind.js";import{KeyCode as a,KeyMod as h}from"../../../../base/common/keyCodes.js";import*as o from"../../../../nls.js";import{KeybindingWeight as d}from"../../../../platform/keybinding/common/keybindingsRegistry.js";import{EditorAction as n,EditorCommand as c,EditorContributionInstantiation as C,registerEditorAction as p,registerEditorCommand as m,registerEditorContribution as A}from"../../../browser/editorExtensions.js";import{EditorContextKeys as l}from"../../../common/editorContextKeys.js";import{registerEditorFeature as E}from"../../../common/editorFeatures.js";import{CopyPasteController as t,changePasteTypeCommandId as b,pasteWidgetVisibleCtx as u}from"./copyPasteController.js";import{DefaultPasteProvidersFeature as P,DefaultTextPasteOrDropEditProvider as S}from"./defaultProviders.js";A(t.ID,t,C.Eager),E(P),m(new class extends c{constructor(){super({id:b,precondition:u,kbOpts:{weight:d.EditorContrib,primary:h.CtrlCmd|a.Period}})}runEditorCommand(s,e){return t.get(e)?.changePasteType()}}),m(new class extends c{constructor(){super({id:"editor.hidePasteWidget",precondition:u,kbOpts:{weight:d.EditorContrib,primary:a.Escape}})}runEditorCommand(s,e){t.get(e)?.clearWidgets()}}),p(class f extends n{static argsSchema={type:"object",properties:{kind:{type:"string",description:o.localize("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}};constructor(){super({id:"editor.action.pasteAs",label:o.localize("pasteAs","Paste As..."),alias:"Paste As...",precondition:l.writable,metadata:{description:"Paste as",args:[{name:"args",schema:f.argsSchema}]}})}run(e,y,r){let i=typeof r?.kind=="string"?r.kind:void 0;return!i&&r&&(i=typeof r.id=="string"?r.id:void 0),t.get(y)?.pasteAs(i?new g(i):void 0)}}),p(class extends n{constructor(){super({id:"editor.action.pasteAsText",label:o.localize("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:l.writable})}run(s,e){return t.get(e)?.pasteAs({providerId:S.id})}});
