{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/hover/browser/resizableContentWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition } from '../../../browser/editorBrowser.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { IPosition, Position } from '../../../common/core/position.js';\nimport * as dom from '../../../../base/browser/dom.js';\n\nconst TOP_HEIGHT = 30;\nconst BOTTOM_HEIGHT = 24;\n\nexport abstract class ResizableContentWidget extends Disposable implements IContentWidget {\n\n\treadonly allowEditorOverflow: boolean = true;\n\treadonly suppressMouseDown: boolean = false;\n\n\tprotected readonly _resizableNode = this._register(new ResizableHTMLElement());\n\tprotected _contentPosition: IContentWidgetPosition | null = null;\n\n\tprivate _isResizing: boolean = false;\n\n\tconstructor(\n\t\tprotected readonly _editor: ICodeEditor,\n\t\tminimumSize: dom.IDimension = new dom.Dimension(10, 10)\n\t) {\n\t\tsuper();\n\t\tthis._resizableNode.domNode.style.position = 'absolute';\n\t\tthis._resizableNode.minSize = dom.Dimension.lift(minimumSize);\n\t\tthis._resizableNode.layout(minimumSize.height, minimumSize.width);\n\t\tthis._resizableNode.enableSashes(true, true, true, true);\n\t\tthis._register(this._resizableNode.onDidResize(e => {\n\t\t\tthis._resize(new dom.Dimension(e.dimension.width, e.dimension.height));\n\t\t\tif (e.done) {\n\t\t\t\tthis._isResizing = false;\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._resizableNode.onDidWillResize(() => {\n\t\t\tthis._isResizing = true;\n\t\t}));\n\t}\n\n\tget isResizing() {\n\t\treturn this._isResizing;\n\t}\n\n\tabstract getId(): string;\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._resizableNode.domNode;\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\treturn this._contentPosition;\n\t}\n\n\tget position(): Position | undefined {\n\t\treturn this._contentPosition?.position ? Position.lift(this._contentPosition.position) : undefined;\n\t}\n\n\tprotected _availableVerticalSpaceAbove(position: IPosition): number | undefined {\n\t\tconst editorDomNode = this._editor.getDomNode();\n\t\tconst mouseBox = this._editor.getScrolledVisiblePosition(position);\n\t\tif (!editorDomNode || !mouseBox) {\n\t\t\treturn;\n\t\t}\n\t\tconst editorBox = dom.getDomNodePagePosition(editorDomNode);\n\t\treturn editorBox.top + mouseBox.top - TOP_HEIGHT;\n\t}\n\n\tprotected _availableVerticalSpaceBelow(position: IPosition): number | undefined {\n\t\tconst editorDomNode = this._editor.getDomNode();\n\t\tconst mouseBox = this._editor.getScrolledVisiblePosition(position);\n\t\tif (!editorDomNode || !mouseBox) {\n\t\t\treturn;\n\t\t}\n\t\tconst editorBox = dom.getDomNodePagePosition(editorDomNode);\n\t\tconst bodyBox = dom.getClientArea(editorDomNode.ownerDocument.body);\n\t\tconst mouseBottom = editorBox.top + mouseBox.top + mouseBox.height;\n\t\treturn bodyBox.height - mouseBottom - BOTTOM_HEIGHT;\n\t}\n\n\tprotected _findPositionPreference(widgetHeight: number, showAtPosition: IPosition): ContentWidgetPositionPreference | undefined {\n\t\tconst maxHeightBelow = Math.min(this._availableVerticalSpaceBelow(showAtPosition) ?? Infinity, widgetHeight);\n\t\tconst maxHeightAbove = Math.min(this._availableVerticalSpaceAbove(showAtPosition) ?? Infinity, widgetHeight);\n\t\tconst maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow), widgetHeight);\n\t\tconst height = Math.min(widgetHeight, maxHeight);\n\t\tlet renderingAbove: ContentWidgetPositionPreference;\n\t\tif (this._editor.getOption(EditorOption.hover).above) {\n\t\t\trenderingAbove = height <= maxHeightAbove ? ContentWidgetPositionPreference.ABOVE : ContentWidgetPositionPreference.BELOW;\n\t\t} else {\n\t\t\trenderingAbove = height <= maxHeightBelow ? ContentWidgetPositionPreference.BELOW : ContentWidgetPositionPreference.ABOVE;\n\t\t}\n\t\tif (renderingAbove === ContentWidgetPositionPreference.ABOVE) {\n\t\t\tthis._resizableNode.enableSashes(true, true, false, false);\n\t\t} else {\n\t\t\tthis._resizableNode.enableSashes(false, true, true, false);\n\t\t}\n\t\treturn renderingAbove;\n\t}\n\n\tprotected _resize(dimension: dom.Dimension): void {\n\t\tthis._resizableNode.layout(dimension.height, dimension.width);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
