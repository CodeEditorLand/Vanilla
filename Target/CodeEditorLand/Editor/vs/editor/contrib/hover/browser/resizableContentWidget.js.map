{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/hover/browser/resizableContentWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport { ResizableHTMLElement } from \"../../../../base/browser/ui/resizable/resizable.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport {\n\tContentWidgetPositionPreference,\n\ttype ICodeEditor,\n\ttype IContentWidget,\n\ttype IContentWidgetPosition,\n} from \"../../../browser/editorBrowser.js\";\nimport { EditorOption } from \"../../../common/config/editorOptions.js\";\nimport { type IPosition, Position } from \"../../../common/core/position.js\";\n\nconst TOP_HEIGHT = 30;\nconst BOTTOM_HEIGHT = 24;\n\nexport abstract class ResizableContentWidget\n\textends Disposable\n\timplements IContentWidget\n{\n\treadonly allowEditorOverflow: boolean = true;\n\treadonly suppressMouseDown: boolean = false;\n\n\tprotected readonly _resizableNode = this._register(\n\t\tnew ResizableHTMLElement(),\n\t);\n\tprotected _contentPosition: IContentWidgetPosition | null = null;\n\n\tprivate _isResizing = false;\n\n\tconstructor(\n\t\tprotected readonly _editor: ICodeEditor,\n\t\tminimumSize: dom.IDimension = new dom.Dimension(10, 10),\n\t) {\n\t\tsuper();\n\t\tthis._resizableNode.domNode.style.position = \"absolute\";\n\t\tthis._resizableNode.minSize = dom.Dimension.lift(minimumSize);\n\t\tthis._resizableNode.layout(minimumSize.height, minimumSize.width);\n\t\tthis._resizableNode.enableSashes(true, true, true, true);\n\t\tthis._register(\n\t\t\tthis._resizableNode.onDidResize((e) => {\n\t\t\t\tthis._resize(\n\t\t\t\t\tnew dom.Dimension(e.dimension.width, e.dimension.height),\n\t\t\t\t);\n\t\t\t\tif (e.done) {\n\t\t\t\t\tthis._isResizing = false;\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._resizableNode.onDidWillResize(() => {\n\t\t\t\tthis._isResizing = true;\n\t\t\t}),\n\t\t);\n\t}\n\n\tget isResizing() {\n\t\treturn this._isResizing;\n\t}\n\n\tabstract getId(): string;\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._resizableNode.domNode;\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\treturn this._contentPosition;\n\t}\n\n\tget position(): Position | undefined {\n\t\treturn this._contentPosition?.position\n\t\t\t? Position.lift(this._contentPosition.position)\n\t\t\t: undefined;\n\t}\n\n\tprotected _availableVerticalSpaceAbove(\n\t\tposition: IPosition,\n\t): number | undefined {\n\t\tconst editorDomNode = this._editor.getDomNode();\n\t\tconst mouseBox = this._editor.getScrolledVisiblePosition(position);\n\t\tif (!editorDomNode || !mouseBox) {\n\t\t\treturn;\n\t\t}\n\t\tconst editorBox = dom.getDomNodePagePosition(editorDomNode);\n\t\treturn editorBox.top + mouseBox.top - TOP_HEIGHT;\n\t}\n\n\tprotected _availableVerticalSpaceBelow(\n\t\tposition: IPosition,\n\t): number | undefined {\n\t\tconst editorDomNode = this._editor.getDomNode();\n\t\tconst mouseBox = this._editor.getScrolledVisiblePosition(position);\n\t\tif (!editorDomNode || !mouseBox) {\n\t\t\treturn;\n\t\t}\n\t\tconst editorBox = dom.getDomNodePagePosition(editorDomNode);\n\t\tconst bodyBox = dom.getClientArea(editorDomNode.ownerDocument.body);\n\t\tconst mouseBottom = editorBox.top + mouseBox.top + mouseBox.height;\n\t\treturn bodyBox.height - mouseBottom - BOTTOM_HEIGHT;\n\t}\n\n\tprotected _findPositionPreference(\n\t\twidgetHeight: number,\n\t\tshowAtPosition: IPosition,\n\t): ContentWidgetPositionPreference | undefined {\n\t\tconst maxHeightBelow = Math.min(\n\t\t\tthis._availableVerticalSpaceBelow(showAtPosition) ??\n\t\t\t\tNumber.POSITIVE_INFINITY,\n\t\t\twidgetHeight,\n\t\t);\n\t\tconst maxHeightAbove = Math.min(\n\t\t\tthis._availableVerticalSpaceAbove(showAtPosition) ??\n\t\t\t\tNumber.POSITIVE_INFINITY,\n\t\t\twidgetHeight,\n\t\t);\n\t\tconst maxHeight = Math.min(\n\t\t\tMath.max(maxHeightAbove, maxHeightBelow),\n\t\t\twidgetHeight,\n\t\t);\n\t\tconst height = Math.min(widgetHeight, maxHeight);\n\t\tlet renderingAbove: ContentWidgetPositionPreference;\n\t\tif (this._editor.getOption(EditorOption.hover).above) {\n\t\t\trenderingAbove =\n\t\t\t\theight <= maxHeightAbove\n\t\t\t\t\t? ContentWidgetPositionPreference.ABOVE\n\t\t\t\t\t: ContentWidgetPositionPreference.BELOW;\n\t\t} else {\n\t\t\trenderingAbove =\n\t\t\t\theight <= maxHeightBelow\n\t\t\t\t\t? ContentWidgetPositionPreference.BELOW\n\t\t\t\t\t: ContentWidgetPositionPreference.ABOVE;\n\t\t}\n\t\tif (renderingAbove === ContentWidgetPositionPreference.ABOVE) {\n\t\t\tthis._resizableNode.enableSashes(true, true, false, false);\n\t\t} else {\n\t\t\tthis._resizableNode.enableSashes(false, true, true, false);\n\t\t}\n\t\treturn renderingAbove;\n\t}\n\n\tprotected _resize(dimension: dom.Dimension): void {\n\t\tthis._resizableNode.layout(dimension.height, dimension.width);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
