import{Codicon as f}from"../../../../base/common/codicons.js";import{KeyCode as l,KeyMod as p}from"../../../../base/common/keyCodes.js";import{asyncTransaction as b,transaction as A}from"../../../../base/common/observable.js";import*as t from"../../../../nls.js";import{MenuId as x}from"../../../../platform/actions/common/actions.js";import{ContextKeyExpr as u}from"../../../../platform/contextkey/common/contextkey.js";import"../../../browser/editorBrowser.js";import{EditorAction as o}from"../../../browser/editorExtensions.js";import{EmbeddedCodeEditorWidget as y}from"../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js";import{EditorContextKeys as m}from"../../../common/editorContextKeys.js";import{inlineEditAcceptId as v,inlineEditVisible as r,showNextInlineEditActionId as w,showPreviousInlineEditActionId as h}from"./consts.js";import{InlineEditsController as n}from"./inlineEditsController.js";function c(s){return{label:s.value,alias:s.original}}class E extends o{static ID=w;constructor(){super({id:E.ID,...c(t.localize2("action.inlineEdits.showNext","Show Next Inline Edit")),precondition:u.and(m.writable,r),kbOpts:{weight:100,primary:p.Alt|l.BracketRight}})}async run(d,i){n.get(i)?.model.get()?.next()}}class g extends o{static ID=h;constructor(){super({id:g.ID,...c(t.localize2("action.inlineEdits.showPrevious","Show Previous Inline Edit")),precondition:u.and(m.writable,r),kbOpts:{weight:100,primary:p.Alt|l.BracketLeft}})}async run(d,i){n.get(i)?.model.get()?.previous()}}class H extends o{constructor(){super({id:"editor.action.inlineEdits.trigger",...c(t.localize2("action.inlineEdits.trigger","Trigger Inline Edit")),precondition:m.writable})}async run(d,i){const e=n.get(i);await b(async a=>{await e?.model.get()?.triggerExplicitly(a)})}}class R extends o{constructor(){super({id:v,...c(t.localize2("action.inlineEdits.accept","Accept Inline Edit")),precondition:r,menuOpts:{menuId:x.InlineEditsActions,title:t.localize("inlineEditsActions","Accept Inline Edit"),group:"primary",order:1,icon:f.check},kbOpts:{primary:p.CtrlCmd|l.Space,weight:2e4,kbExpr:r}})}async run(d,i){i instanceof y&&(i=i.getParentEditor());const e=n.get(i);e&&(e.model.get()?.accept(e.editor),e.editor.focus())}}class I extends o{static ID="editor.action.inlineEdits.hide";constructor(){super({id:I.ID,...c(t.localize2("action.inlineEdits.hide","Hide Inline Edit")),precondition:r,kbOpts:{weight:100,primary:l.Escape}})}async run(d,i){const e=n.get(i);A(a=>{e?.model.get()?.stop(a)})}}export{R as AcceptInlineEdit,I as HideInlineEdit,E as ShowNextInlineEditAction,g as ShowPreviousInlineEditAction,H as TriggerInlineEditAction};
