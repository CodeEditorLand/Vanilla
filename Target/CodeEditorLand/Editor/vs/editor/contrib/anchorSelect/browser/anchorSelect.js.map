{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/anchorSelect/browser/anchorSelect.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord, KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport './anchorSelect.css';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction, EditorContributionInstantiation, registerEditorAction, registerEditorContribution, ServicesAccessor } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorContribution } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { TrackedRangeStickiness } from '../../../common/model.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\n\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\n\nclass SelectionAnchorController implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.selectionAnchorController';\n\n\tstatic get(editor: ICodeEditor): SelectionAnchorController | null {\n\t\treturn editor.getContribution<SelectionAnchorController>(SelectionAnchorController.ID);\n\t}\n\n\tprivate decorationId: string | undefined;\n\tprivate selectionAnchorSetContextKey: IContextKey<boolean>;\n\tprivate modelChangeListener: IDisposable;\n\n\tconstructor(\n\t\tprivate editor: ICodeEditor,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tthis.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n\t\tthis.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n\t}\n\n\tsetSelectionAnchor(): void {\n\t\tif (this.editor.hasModel()) {\n\t\t\tconst position = this.editor.getPosition();\n\t\t\tthis.editor.changeDecorations((accessor) => {\n\t\t\t\tif (this.decorationId) {\n\t\t\t\t\taccessor.removeDecoration(this.decorationId);\n\t\t\t\t}\n\t\t\t\tthis.decorationId = accessor.addDecoration(\n\t\t\t\t\tSelection.fromPositions(position, position),\n\t\t\t\t\t{\n\t\t\t\t\t\tdescription: 'selection-anchor',\n\t\t\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\t\t\t\thoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n\t\t\t\t\t\tclassName: 'selection-anchor'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t\tthis.selectionAnchorSetContextKey.set(!!this.decorationId);\n\t\t\talert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n\t\t}\n\t}\n\n\tgoToSelectionAnchor(): void {\n\t\tif (this.editor.hasModel() && this.decorationId) {\n\t\t\tconst anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n\t\t\tif (anchorPosition) {\n\t\t\t\tthis.editor.setPosition(anchorPosition.getStartPosition());\n\t\t\t}\n\t\t}\n\t}\n\n\tselectFromAnchorToCursor(): void {\n\t\tif (this.editor.hasModel() && this.decorationId) {\n\t\t\tconst start = this.editor.getModel().getDecorationRange(this.decorationId);\n\t\t\tif (start) {\n\t\t\t\tconst end = this.editor.getPosition();\n\t\t\t\tthis.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n\t\t\t\tthis.cancelSelectionAnchor();\n\t\t\t}\n\t\t}\n\t}\n\n\tcancelSelectionAnchor(): void {\n\t\tif (this.decorationId) {\n\t\t\tconst decorationId = this.decorationId;\n\t\t\tthis.editor.changeDecorations((accessor) => {\n\t\t\t\taccessor.removeDecoration(decorationId);\n\t\t\t\tthis.decorationId = undefined;\n\t\t\t});\n\t\t\tthis.selectionAnchorSetContextKey.set(false);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.cancelSelectionAnchor();\n\t\tthis.modelChangeListener.dispose();\n\t}\n}\n\nclass SetSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.setSelectionAnchor',\n\t\t\tlabel: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n\t\t\talias: 'Set Selection Anchor',\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyB),\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.setSelectionAnchor();\n\t}\n}\n\nclass GoToSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.goToSelectionAnchor',\n\t\t\tlabel: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n\t\t\talias: 'Go to Selection Anchor',\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.goToSelectionAnchor();\n\t}\n}\n\nclass SelectFromAnchorToCursor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.selectFromAnchorToCursor',\n\t\t\tlabel: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n\t\t\talias: 'Select from Anchor to Cursor',\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyK),\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.selectFromAnchorToCursor();\n\t}\n}\n\nclass CancelSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.cancelSelectionAnchor',\n\t\t\tlabel: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n\t\t\talias: 'Cancel Selection Anchor',\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.cancelSelectionAnchor();\n\t}\n}\n\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, EditorContributionInstantiation.Lazy);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n"],
  "mappings": "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",
  "names": []
}
