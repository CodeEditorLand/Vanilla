{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/anchorSelect/browser/anchorSelect.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { alert } from \"../../../../base/browser/ui/aria/aria.js\";\nimport { MarkdownString } from \"../../../../base/common/htmlContent.js\";\nimport { KeyChord, KeyCode, KeyMod } from \"../../../../base/common/keyCodes.js\";\nimport type { IDisposable } from \"../../../../base/common/lifecycle.js\";\nimport \"./anchorSelect.css\";\nimport { localize } from \"../../../../nls.js\";\nimport {\n\ttype IContextKey,\n\tIContextKeyService,\n\tRawContextKey,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { KeybindingWeight } from \"../../../../platform/keybinding/common/keybindingsRegistry.js\";\nimport type { ICodeEditor } from \"../../../browser/editorBrowser.js\";\nimport {\n\tEditorAction,\n\tEditorContributionInstantiation,\n\ttype ServicesAccessor,\n\tregisterEditorAction,\n\tregisterEditorContribution,\n} from \"../../../browser/editorExtensions.js\";\nimport { Selection } from \"../../../common/core/selection.js\";\nimport type { IEditorContribution } from \"../../../common/editorCommon.js\";\nimport { EditorContextKeys } from \"../../../common/editorContextKeys.js\";\nimport { TrackedRangeStickiness } from \"../../../common/model.js\";\n\nexport const SelectionAnchorSet = new RawContextKey(\n\t\"selectionAnchorSet\",\n\tfalse,\n);\n\nclass SelectionAnchorController implements IEditorContribution {\n\tpublic static readonly ID = \"editor.contrib.selectionAnchorController\";\n\n\tstatic get(editor: ICodeEditor): SelectionAnchorController | null {\n\t\treturn editor.getContribution<SelectionAnchorController>(\n\t\t\tSelectionAnchorController.ID,\n\t\t);\n\t}\n\n\tprivate decorationId: string | undefined;\n\tprivate selectionAnchorSetContextKey: IContextKey<boolean>;\n\tprivate modelChangeListener: IDisposable;\n\n\tconstructor(\n\t\tprivate editor: ICodeEditor,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t) {\n\t\tthis.selectionAnchorSetContextKey =\n\t\t\tSelectionAnchorSet.bindTo(contextKeyService);\n\t\tthis.modelChangeListener = editor.onDidChangeModel(() =>\n\t\t\tthis.selectionAnchorSetContextKey.reset(),\n\t\t);\n\t}\n\n\tsetSelectionAnchor(): void {\n\t\tif (this.editor.hasModel()) {\n\t\t\tconst position = this.editor.getPosition();\n\t\t\tthis.editor.changeDecorations((accessor) => {\n\t\t\t\tif (this.decorationId) {\n\t\t\t\t\taccessor.removeDecoration(this.decorationId);\n\t\t\t\t}\n\t\t\t\tthis.decorationId = accessor.addDecoration(\n\t\t\t\t\tSelection.fromPositions(position, position),\n\t\t\t\t\t{\n\t\t\t\t\t\tdescription: \"selection-anchor\",\n\t\t\t\t\t\tstickiness:\n\t\t\t\t\t\t\tTrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t\t\t\t\thoverMessage: new MarkdownString().appendText(\n\t\t\t\t\t\t\tlocalize(\"selectionAnchor\", \"Selection Anchor\"),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tclassName: \"selection-anchor\",\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t});\n\t\t\tthis.selectionAnchorSetContextKey.set(!!this.decorationId);\n\t\t\talert(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"anchorSet\",\n\t\t\t\t\t\"Anchor set at {0}:{1}\",\n\t\t\t\t\tposition.lineNumber,\n\t\t\t\t\tposition.column,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n\n\tgoToSelectionAnchor(): void {\n\t\tif (this.editor.hasModel() && this.decorationId) {\n\t\t\tconst anchorPosition = this.editor\n\t\t\t\t.getModel()\n\t\t\t\t.getDecorationRange(this.decorationId);\n\t\t\tif (anchorPosition) {\n\t\t\t\tthis.editor.setPosition(anchorPosition.getStartPosition());\n\t\t\t}\n\t\t}\n\t}\n\n\tselectFromAnchorToCursor(): void {\n\t\tif (this.editor.hasModel() && this.decorationId) {\n\t\t\tconst start = this.editor\n\t\t\t\t.getModel()\n\t\t\t\t.getDecorationRange(this.decorationId);\n\t\t\tif (start) {\n\t\t\t\tconst end = this.editor.getPosition();\n\t\t\t\tthis.editor.setSelection(\n\t\t\t\t\tSelection.fromPositions(start.getStartPosition(), end),\n\t\t\t\t);\n\t\t\t\tthis.cancelSelectionAnchor();\n\t\t\t}\n\t\t}\n\t}\n\n\tcancelSelectionAnchor(): void {\n\t\tif (this.decorationId) {\n\t\t\tconst decorationId = this.decorationId;\n\t\t\tthis.editor.changeDecorations((accessor) => {\n\t\t\t\taccessor.removeDecoration(decorationId);\n\t\t\t\tthis.decorationId = undefined;\n\t\t\t});\n\t\t\tthis.selectionAnchorSetContextKey.set(false);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.cancelSelectionAnchor();\n\t\tthis.modelChangeListener.dispose();\n\t}\n}\n\nclass SetSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: \"editor.action.setSelectionAnchor\",\n\t\t\tlabel: localize(\"setSelectionAnchor\", \"Set Selection Anchor\"),\n\t\t\talias: \"Set Selection Anchor\",\n\t\t\tprecondition: undefined,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(\n\t\t\t\t\tKeyMod.CtrlCmd | KeyCode.KeyK,\n\t\t\t\t\tKeyMod.CtrlCmd | KeyCode.KeyB,\n\t\t\t\t),\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.setSelectionAnchor();\n\t}\n}\n\nclass GoToSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: \"editor.action.goToSelectionAnchor\",\n\t\t\tlabel: localize(\"goToSelectionAnchor\", \"Go to Selection Anchor\"),\n\t\t\talias: \"Go to Selection Anchor\",\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.goToSelectionAnchor();\n\t}\n}\n\nclass SelectFromAnchorToCursor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: \"editor.action.selectFromAnchorToCursor\",\n\t\t\tlabel: localize(\n\t\t\t\t\"selectFromAnchorToCursor\",\n\t\t\t\t\"Select from Anchor to Cursor\",\n\t\t\t),\n\t\t\talias: \"Select from Anchor to Cursor\",\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(\n\t\t\t\t\tKeyMod.CtrlCmd | KeyCode.KeyK,\n\t\t\t\t\tKeyMod.CtrlCmd | KeyCode.KeyK,\n\t\t\t\t),\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.selectFromAnchorToCursor();\n\t}\n}\n\nclass CancelSelectionAnchor extends EditorAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: \"editor.action.cancelSelectionAnchor\",\n\t\t\tlabel: localize(\"cancelSelectionAnchor\", \"Cancel Selection Anchor\"),\n\t\t\talias: \"Cancel Selection Anchor\",\n\t\t\tprecondition: SelectionAnchorSet,\n\t\t\tkbOpts: {\n\t\t\t\tkbExpr: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync run(_accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tSelectionAnchorController.get(editor)?.cancelSelectionAnchor();\n\t}\n}\n\nregisterEditorContribution(\n\tSelectionAnchorController.ID,\n\tSelectionAnchorController,\n\tEditorContributionInstantiation.Lazy,\n);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n"],
  "mappings": "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",
  "names": []
}
