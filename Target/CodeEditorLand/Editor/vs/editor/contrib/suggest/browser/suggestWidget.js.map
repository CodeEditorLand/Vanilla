{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/suggest/browser/suggestWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { IListEvent, IListGestureEvent, IListMouseEvent } from '../../../../base/browser/ui/list/list.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { CancelablePromise, createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, Event, PauseableEmitter } from '../../../../base/common/event.js';\nimport { DisposableStore, IDisposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition, IEditorMouseEvent } from '../../../browser/editorBrowser.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { IPosition } from '../../../common/core/position.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IColorTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { CompletionModel } from './completionModel.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { CompletionItem, Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\n\n/**\n * Suggest widget colors\n */\nregisterColor('editorSuggestWidget.background', editorWidgetBackground, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nregisterColor('editorSuggestWidget.border', editorWidgetBorder, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nconst editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', editorForeground, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedForeground', quickInputListFocusForeground, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedIconForeground', quickInputListFocusIconForeground, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', quickInputListFocusBackground, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.highlightForeground', listHighlightForeground, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nregisterColor('editorSuggestWidget.focusHighlightForeground', listFocusHighlightForeground, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nregisterColor('editorSuggestWidgetStatus.foreground', transparent(editorSuggestWidgetForeground, .5), nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\n\nconst enum State {\n\tHidden,\n\tLoading,\n\tEmpty,\n\tOpen,\n\tFrozen,\n\tDetails,\n\tonDetailsKeyDown\n}\n\nexport interface ISelectedSuggestion {\n\titem: CompletionItem;\n\tindex: number;\n\tmodel: CompletionModel;\n}\n\nclass PersistedWidgetSize {\n\n\tprivate readonly _key: string;\n\n\tconstructor(\n\t\tprivate readonly _service: IStorageService,\n\t\teditor: ICodeEditor\n\t) {\n\t\tthis._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n\t}\n\n\trestore(): dom.Dimension | undefined {\n\t\tconst raw = this._service.get(this._key, StorageScope.PROFILE) ?? '';\n\t\ttry {\n\t\t\tconst obj = JSON.parse(raw);\n\t\t\tif (dom.Dimension.is(obj)) {\n\t\t\t\treturn dom.Dimension.lift(obj);\n\t\t\t}\n\t\t} catch {\n\t\t\t// ignore\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tstore(size: dom.Dimension) {\n\t\tthis._service.store(this._key, JSON.stringify(size), StorageScope.PROFILE, StorageTarget.MACHINE);\n\t}\n\n\treset(): void {\n\t\tthis._service.remove(this._key, StorageScope.PROFILE);\n\t}\n}\n\nexport class SuggestWidget implements IDisposable {\n\n\tprivate static LOADING_MESSAGE: string = nls.localize('suggestWidget.loading', \"Loading...\");\n\tprivate static NO_SUGGESTIONS_MESSAGE: string = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\n\n\tprivate _state: State = State.Hidden;\n\tprivate _isAuto: boolean = false;\n\tprivate _loadingTimeout?: IDisposable;\n\tprivate readonly _pendingLayout = new MutableDisposable();\n\tprivate readonly _pendingShowDetails = new MutableDisposable();\n\tprivate _currentSuggestionDetails?: CancelablePromise<void>;\n\tprivate _focusedItem?: CompletionItem;\n\tprivate _ignoreFocusEvents: boolean = false;\n\tprivate _completionModel?: CompletionModel;\n\tprivate _cappedHeight?: { wanted: number; capped: number };\n\tprivate _forceRenderingAbove: boolean = false;\n\tprivate _explainMode: boolean = false;\n\n\treadonly element: ResizableHTMLElement;\n\tprivate readonly _messageElement: HTMLElement;\n\tprivate readonly _listElement: HTMLElement;\n\tprivate readonly _list: List<CompletionItem>;\n\tprivate readonly _status: SuggestWidgetStatus;\n\tprivate readonly _details: SuggestDetailsOverlay;\n\tprivate readonly _contentWidget: SuggestContentWidget;\n\tprivate readonly _persistedSize: PersistedWidgetSize;\n\n\tprivate readonly _ctxSuggestWidgetVisible: IContextKey<boolean>;\n\tprivate readonly _ctxSuggestWidgetDetailsVisible: IContextKey<boolean>;\n\tprivate readonly _ctxSuggestWidgetMultipleSuggestions: IContextKey<boolean>;\n\tprivate readonly _ctxSuggestWidgetHasFocusedSuggestion: IContextKey<boolean>;\n\n\tprivate readonly _showTimeout = new TimeoutTimer();\n\tprivate readonly _disposables = new DisposableStore();\n\n\n\tprivate readonly _onDidSelect = new PauseableEmitter<ISelectedSuggestion>();\n\tprivate readonly _onDidFocus = new PauseableEmitter<ISelectedSuggestion>();\n\tprivate readonly _onDidHide = new Emitter<this>();\n\tprivate readonly _onDidShow = new Emitter<this>();\n\n\treadonly onDidSelect: Event<ISelectedSuggestion> = this._onDidSelect.event;\n\treadonly onDidFocus: Event<ISelectedSuggestion> = this._onDidFocus.event;\n\treadonly onDidHide: Event<this> = this._onDidHide.event;\n\treadonly onDidShow: Event<this> = this._onDidShow.event;\n\n\tprivate readonly _onDetailsKeydown = new Emitter<IKeyboardEvent>();\n\treadonly onDetailsKeyDown: Event<IKeyboardEvent> = this._onDetailsKeydown.event;\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IContextKeyService _contextKeyService: IContextKeyService,\n\t\t@IThemeService _themeService: IThemeService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tthis.element = new ResizableHTMLElement();\n\t\tthis.element.domNode.classList.add('editor-widget', 'suggest-widget');\n\n\t\tthis._contentWidget = new SuggestContentWidget(this, editor);\n\t\tthis._persistedSize = new PersistedWidgetSize(_storageService, editor);\n\n\t\tclass ResizeState {\n\t\t\tconstructor(\n\t\t\t\treadonly persistedSize: dom.Dimension | undefined,\n\t\t\t\treadonly currentSize: dom.Dimension,\n\t\t\t\tpublic persistHeight = false,\n\t\t\t\tpublic persistWidth = false,\n\t\t\t) { }\n\t\t}\n\n\t\tlet state: ResizeState | undefined;\n\t\tthis._disposables.add(this.element.onDidWillResize(() => {\n\t\t\tthis._contentWidget.lockPreference();\n\t\t\tstate = new ResizeState(this._persistedSize.restore(), this.element.size);\n\t\t}));\n\t\tthis._disposables.add(this.element.onDidResize(e => {\n\n\t\t\tthis._resize(e.dimension.width, e.dimension.height);\n\n\t\t\tif (state) {\n\t\t\t\tstate.persistHeight = state.persistHeight || !!e.north || !!e.south;\n\t\t\t\tstate.persistWidth = state.persistWidth || !!e.east || !!e.west;\n\t\t\t}\n\n\t\t\tif (!e.done) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (state) {\n\t\t\t\t// only store width or height value that have changed and also\n\t\t\t\t// only store changes that are above a certain threshold\n\t\t\t\tconst { itemHeight, defaultSize } = this.getLayoutInfo();\n\t\t\t\tconst threshold = Math.round(itemHeight / 2);\n\t\t\t\tlet { width, height } = this.element.size;\n\t\t\t\tif (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n\t\t\t\t\theight = state.persistedSize?.height ?? defaultSize.height;\n\t\t\t\t}\n\t\t\t\tif (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n\t\t\t\t\twidth = state.persistedSize?.width ?? defaultSize.width;\n\t\t\t\t}\n\t\t\t\tthis._persistedSize.store(new dom.Dimension(width, height));\n\t\t\t}\n\n\t\t\t// reset working state\n\t\t\tthis._contentWidget.unlockPreference();\n\t\t\tstate = undefined;\n\t\t}));\n\n\t\tthis._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n\t\tthis._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n\n\t\tconst details = this._disposables.add(instantiationService.createInstance(SuggestDetailsWidget, this.editor));\n\t\tdetails.onDidClose(() => this.toggleDetails(), this, this._disposables);\n\t\tthis._details = new SuggestDetailsOverlay(details, this.editor);\n\n\t\tconst applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(EditorOption.suggest).showIcons);\n\t\tapplyIconStyle();\n\n\t\tconst renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n\t\tthis._disposables.add(renderer);\n\t\tthis._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n\n\t\tthis._list = new List('SuggestWidget', this._listElement, {\n\t\t\tgetHeight: (_element: CompletionItem): number => this.getLayoutInfo().itemHeight,\n\t\t\tgetTemplateId: (_element: CompletionItem): string => 'suggestion'\n\t\t}, [renderer], {\n\t\t\talwaysConsumeMouseWheel: true,\n\t\t\tuseShadows: false,\n\t\t\tmouseSupport: false,\n\t\t\tmultipleSelectionSupport: false,\n\t\t\taccessibilityProvider: {\n\t\t\t\tgetRole: () => 'option',\n\t\t\t\tgetWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n\t\t\t\tgetWidgetRole: () => 'listbox',\n\t\t\t\tgetAriaLabel: (item: CompletionItem) => {\n\n\t\t\t\t\tlet label = item.textLabel;\n\t\t\t\t\tif (typeof item.completion.label !== 'string') {\n\t\t\t\t\t\tconst { detail, description } = item.completion.label;\n\t\t\t\t\t\tif (detail && description) {\n\t\t\t\t\t\t\tlabel = nls.localize('label.full', '{0} {1}, {2}', label, detail, description);\n\t\t\t\t\t\t} else if (detail) {\n\t\t\t\t\t\t\tlabel = nls.localize('label.detail', '{0} {1}', label, detail);\n\t\t\t\t\t\t} else if (description) {\n\t\t\t\t\t\t\tlabel = nls.localize('label.desc', '{0}, {1}', label, description);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!item.isResolved || !this._isDetailsVisible()) {\n\t\t\t\t\t\treturn label;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { documentation, detail } = item.completion;\n\t\t\t\t\tconst docs = strings.format(\n\t\t\t\t\t\t'{0}{1}',\n\t\t\t\t\t\tdetail || '',\n\t\t\t\t\t\tdocumentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n\n\t\t\t\t\treturn nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t\tthis._list.style(getListStyles({\n\t\t\tlistInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n\t\t\tlistInactiveFocusOutline: activeContrastBorder\n\t\t}));\n\n\t\tthis._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode, suggestWidgetStatusbarMenu);\n\t\tconst applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(EditorOption.suggest).showStatusBar);\n\t\tapplyStatusBarStyle();\n\n\t\tthis._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n\t\tthis._onThemeChange(_themeService.getColorTheme());\n\n\t\tthis._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n\t\tthis._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n\t\tthis._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n\t\tthis._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n\t\tthis._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n\t\tthis._disposables.add(this.editor.onDidChangeConfiguration(e => {\n\t\t\tif (e.hasChanged(EditorOption.suggest)) {\n\t\t\t\tapplyStatusBarStyle();\n\t\t\t\tapplyIconStyle();\n\t\t\t}\n\t\t\tif (this._completionModel && (e.hasChanged(EditorOption.fontInfo) || e.hasChanged(EditorOption.suggestFontSize) || e.hasChanged(EditorOption.suggestLineHeight))) {\n\t\t\t\tthis._list.splice(0, this._list.length, this._completionModel.items);\n\t\t\t}\n\t\t}));\n\n\t\tthis._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n\t\tthis._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n\t\tthis._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n\t\tthis._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n\n\t\tthis._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n\t\t\tthis._onDetailsKeydown.fire(e);\n\t\t}));\n\n\t\tthis._disposables.add(this.editor.onMouseDown((e: IEditorMouseEvent) => this._onEditorMouseDown(e)));\n\t}\n\n\tdispose(): void {\n\t\tthis._details.widget.dispose();\n\t\tthis._details.dispose();\n\t\tthis._list.dispose();\n\t\tthis._status.dispose();\n\t\tthis._disposables.dispose();\n\t\tthis._loadingTimeout?.dispose();\n\t\tthis._pendingLayout.dispose();\n\t\tthis._pendingShowDetails.dispose();\n\t\tthis._showTimeout.dispose();\n\t\tthis._contentWidget.dispose();\n\t\tthis.element.dispose();\n\t}\n\n\tprivate _onEditorMouseDown(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n\t\t\t// Clicking inside details\n\t\t\tthis._details.widget.domNode.focus();\n\t\t} else {\n\t\t\t// Clicking outside details and inside suggest\n\t\t\tif (this.element.domNode.contains(mouseEvent.target.element)) {\n\t\t\t\tthis.editor.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _onCursorSelectionChanged(): void {\n\t\tif (this._state !== State.Hidden) {\n\t\t\tthis._contentWidget.layout();\n\t\t}\n\t}\n\n\tprivate _onListMouseDownOrTap(e: IListMouseEvent<CompletionItem> | IListGestureEvent<CompletionItem>): void {\n\t\tif (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\t// prevent stealing browser focus from the editor\n\t\te.browserEvent.preventDefault();\n\t\te.browserEvent.stopPropagation();\n\n\t\tthis._select(e.element, e.index);\n\t}\n\n\tprivate _onListSelection(e: IListEvent<CompletionItem>): void {\n\t\tif (e.elements.length) {\n\t\t\tthis._select(e.elements[0], e.indexes[0]);\n\t\t}\n\t}\n\n\tprivate _select(item: CompletionItem, index: number): void {\n\t\tconst completionModel = this._completionModel;\n\t\tif (completionModel) {\n\t\t\tthis._onDidSelect.fire({ item, index, model: completionModel });\n\t\t\tthis.editor.focus();\n\t\t}\n\t}\n\n\tprivate _onThemeChange(theme: IColorTheme) {\n\t\tthis._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n\t}\n\n\tprivate _onListFocus(e: IListEvent<CompletionItem>): void {\n\t\tif (this._ignoreFocusEvents) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._state === State.Details) {\n\t\t\t// This can happen when focus is in the details-panel and when\n\t\t\t// arrow keys are pressed to select next/prev items\n\t\t\tthis._setState(State.Open);\n\t\t}\n\n\t\tif (!e.elements.length) {\n\t\t\tif (this._currentSuggestionDetails) {\n\t\t\t\tthis._currentSuggestionDetails.cancel();\n\t\t\t\tthis._currentSuggestionDetails = undefined;\n\t\t\t\tthis._focusedItem = undefined;\n\t\t\t}\n\n\t\t\tthis.editor.setAriaOptions({ activeDescendant: undefined });\n\t\t\tthis._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._completionModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n\t\tconst item = e.elements[0];\n\t\tconst index = e.indexes[0];\n\n\t\tif (item !== this._focusedItem) {\n\n\t\t\tthis._currentSuggestionDetails?.cancel();\n\t\t\tthis._currentSuggestionDetails = undefined;\n\n\t\t\tthis._focusedItem = item;\n\n\t\t\tthis._list.reveal(index);\n\n\t\t\tthis._currentSuggestionDetails = createCancelablePromise(async token => {\n\t\t\t\tconst loading = disposableTimeout(() => {\n\t\t\t\t\tif (this._isDetailsVisible()) {\n\t\t\t\t\t\tthis._showDetails(true, false);\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t\tconst sub = token.onCancellationRequested(() => loading.dispose());\n\t\t\t\ttry {\n\t\t\t\t\treturn await item.resolve(token);\n\t\t\t\t} finally {\n\t\t\t\t\tloading.dispose();\n\t\t\t\t\tsub.dispose();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._currentSuggestionDetails.then(() => {\n\t\t\t\tif (index >= this._list.length || item !== this._list.element(index)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// item can have extra information, so re-render\n\t\t\t\tthis._ignoreFocusEvents = true;\n\t\t\t\tthis._list.splice(index, 1, [item]);\n\t\t\t\tthis._list.setFocus([index]);\n\t\t\t\tthis._ignoreFocusEvents = false;\n\n\t\t\t\tif (this._isDetailsVisible()) {\n\t\t\t\t\tthis._showDetails(false, false);\n\t\t\t\t} else {\n\t\t\t\t\tthis.element.domNode.classList.remove('docs-side');\n\t\t\t\t}\n\n\t\t\t\tthis.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n\t\t\t}).catch(onUnexpectedError);\n\t\t}\n\n\t\t// emit an event\n\t\tthis._onDidFocus.fire({ item, index, model: this._completionModel });\n\t}\n\n\tprivate _setState(state: State): void {\n\n\t\tif (this._state === state) {\n\t\t\treturn;\n\t\t}\n\t\tthis._state = state;\n\n\t\tthis.element.domNode.classList.toggle('frozen', state === State.Frozen);\n\t\tthis.element.domNode.classList.remove('message');\n\n\t\tswitch (state) {\n\t\t\tcase State.Hidden:\n\t\t\t\tdom.hide(this._messageElement, this._listElement, this._status.element);\n\t\t\t\tthis._details.hide(true);\n\t\t\t\tthis._status.hide();\n\t\t\t\tthis._contentWidget.hide();\n\t\t\t\tthis._ctxSuggestWidgetVisible.reset();\n\t\t\t\tthis._ctxSuggestWidgetMultipleSuggestions.reset();\n\t\t\t\tthis._ctxSuggestWidgetHasFocusedSuggestion.reset();\n\t\t\t\tthis._showTimeout.cancel();\n\t\t\t\tthis.element.domNode.classList.remove('visible');\n\t\t\t\tthis._list.splice(0, this._list.length);\n\t\t\t\tthis._focusedItem = undefined;\n\t\t\t\tthis._cappedHeight = undefined;\n\t\t\t\tthis._explainMode = false;\n\t\t\t\tbreak;\n\t\t\tcase State.Loading:\n\t\t\t\tthis.element.domNode.classList.add('message');\n\t\t\t\tthis._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n\t\t\t\tdom.hide(this._listElement, this._status.element);\n\t\t\t\tdom.show(this._messageElement);\n\t\t\t\tthis._details.hide();\n\t\t\t\tthis._show();\n\t\t\t\tthis._focusedItem = undefined;\n\t\t\t\tstatus(SuggestWidget.LOADING_MESSAGE);\n\t\t\t\tbreak;\n\t\t\tcase State.Empty:\n\t\t\t\tthis.element.domNode.classList.add('message');\n\t\t\t\tthis._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n\t\t\t\tdom.hide(this._listElement, this._status.element);\n\t\t\t\tdom.show(this._messageElement);\n\t\t\t\tthis._details.hide();\n\t\t\t\tthis._show();\n\t\t\t\tthis._focusedItem = undefined;\n\t\t\t\tstatus(SuggestWidget.NO_SUGGESTIONS_MESSAGE);\n\t\t\t\tbreak;\n\t\t\tcase State.Open:\n\t\t\t\tdom.hide(this._messageElement);\n\t\t\t\tdom.show(this._listElement, this._status.element);\n\t\t\t\tthis._show();\n\t\t\t\tbreak;\n\t\t\tcase State.Frozen:\n\t\t\t\tdom.hide(this._messageElement);\n\t\t\t\tdom.show(this._listElement, this._status.element);\n\t\t\t\tthis._show();\n\t\t\t\tbreak;\n\t\t\tcase State.Details:\n\t\t\t\tdom.hide(this._messageElement);\n\t\t\t\tdom.show(this._listElement, this._status.element);\n\t\t\t\tthis._details.show();\n\t\t\t\tthis._show();\n\t\t\t\tthis._details.widget.focus();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate _show(): void {\n\t\tthis._status.show();\n\t\tthis._contentWidget.show();\n\t\tthis._layout(this._persistedSize.restore());\n\t\tthis._ctxSuggestWidgetVisible.set(true);\n\n\t\tthis._showTimeout.cancelAndSet(() => {\n\t\t\tthis.element.domNode.classList.add('visible');\n\t\t\tthis._onDidShow.fire(this);\n\t\t}, 100);\n\t}\n\n\tshowTriggered(auto: boolean, delay: number) {\n\t\tif (this._state !== State.Hidden) {\n\t\t\treturn;\n\t\t}\n\t\tthis._contentWidget.setPosition(this.editor.getPosition());\n\t\tthis._isAuto = !!auto;\n\n\t\tif (!this._isAuto) {\n\t\t\tthis._loadingTimeout = disposableTimeout(() => this._setState(State.Loading), delay);\n\t\t}\n\t}\n\n\tshowSuggestions(completionModel: CompletionModel, selectionIndex: number, isFrozen: boolean, isAuto: boolean, noFocus: boolean): void {\n\n\t\tthis._contentWidget.setPosition(this.editor.getPosition());\n\t\tthis._loadingTimeout?.dispose();\n\n\t\tthis._currentSuggestionDetails?.cancel();\n\t\tthis._currentSuggestionDetails = undefined;\n\n\t\tif (this._completionModel !== completionModel) {\n\t\t\tthis._completionModel = completionModel;\n\t\t}\n\n\t\tif (isFrozen && this._state !== State.Empty && this._state !== State.Hidden) {\n\t\t\tthis._setState(State.Frozen);\n\t\t\treturn;\n\t\t}\n\n\t\tconst visibleCount = this._completionModel.items.length;\n\t\tconst isEmpty = visibleCount === 0;\n\t\tthis._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n\n\t\tif (isEmpty) {\n\t\t\tthis._setState(isAuto ? State.Hidden : State.Empty);\n\t\t\tthis._completionModel = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._focusedItem = undefined;\n\n\t\t// calling list.splice triggers focus event which this widget forwards. That can lead to\n\t\t// suggestions being cancelled and the widget being cleared (and hidden). All this happens\n\t\t// before revealing and focusing is done which means revealing and focusing will fail when\n\t\t// they get run.\n\t\tthis._onDidFocus.pause();\n\t\tthis._onDidSelect.pause();\n\t\ttry {\n\t\t\tthis._list.splice(0, this._list.length, this._completionModel.items);\n\t\t\tthis._setState(isFrozen ? State.Frozen : State.Open);\n\t\t\tthis._list.reveal(selectionIndex, 0);\n\t\t\tthis._list.setFocus(noFocus ? [] : [selectionIndex]);\n\t\t} finally {\n\t\t\tthis._onDidFocus.resume();\n\t\t\tthis._onDidSelect.resume();\n\t\t}\n\n\t\tthis._pendingLayout.value = dom.runAtThisOrScheduleAtNextAnimationFrame(dom.getWindow(this.element.domNode), () => {\n\t\t\tthis._pendingLayout.clear();\n\t\t\tthis._layout(this.element.size);\n\t\t\t// Reset focus border\n\t\t\tthis._details.widget.domNode.classList.remove('focused');\n\t\t});\n\t}\n\n\tfocusSelected(): void {\n\t\tif (this._list.length > 0) {\n\t\t\tthis._list.setFocus([0]);\n\t\t}\n\t}\n\n\tselectNextPage(): boolean {\n\t\tswitch (this._state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Details:\n\t\t\t\tthis._details.widget.pageDown();\n\t\t\t\treturn true;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this._isAuto;\n\t\t\tdefault:\n\t\t\t\tthis._list.focusNextPage();\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tselectNext(): boolean {\n\t\tswitch (this._state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this._isAuto;\n\t\t\tdefault:\n\t\t\t\tthis._list.focusNext(1, true);\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tselectLast(): boolean {\n\t\tswitch (this._state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Details:\n\t\t\t\tthis._details.widget.scrollBottom();\n\t\t\t\treturn true;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this._isAuto;\n\t\t\tdefault:\n\t\t\t\tthis._list.focusLast();\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tselectPreviousPage(): boolean {\n\t\tswitch (this._state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Details:\n\t\t\t\tthis._details.widget.pageUp();\n\t\t\t\treturn true;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this._isAuto;\n\t\t\tdefault:\n\t\t\t\tthis._list.focusPreviousPage();\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tselectPrevious(): boolean {\n\t\tswitch (this._state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this._isAuto;\n\t\t\tdefault:\n\t\t\t\tthis._list.focusPrevious(1, true);\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tselectFirst(): boolean {\n\t\tswitch (this._state) {\n\t\t\tcase State.Hidden:\n\t\t\t\treturn false;\n\t\t\tcase State.Details:\n\t\t\t\tthis._details.widget.scrollTop();\n\t\t\t\treturn true;\n\t\t\tcase State.Loading:\n\t\t\t\treturn !this._isAuto;\n\t\t\tdefault:\n\t\t\t\tthis._list.focusFirst();\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tgetFocusedItem(): ISelectedSuggestion | undefined {\n\t\tif (this._state !== State.Hidden\n\t\t\t&& this._state !== State.Empty\n\t\t\t&& this._state !== State.Loading\n\t\t\t&& this._completionModel\n\t\t\t&& this._list.getFocus().length > 0\n\t\t) {\n\n\t\t\treturn {\n\t\t\t\titem: this._list.getFocusedElements()[0],\n\t\t\t\tindex: this._list.getFocus()[0],\n\t\t\t\tmodel: this._completionModel\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n\n\ttoggleDetailsFocus(): void {\n\t\tif (this._state === State.Details) {\n\t\t\t// Should return the focus to the list item.\n\t\t\tthis._list.setFocus(this._list.getFocus());\n\t\t\tthis._setState(State.Open);\n\t\t} else if (this._state === State.Open) {\n\t\t\tthis._setState(State.Details);\n\t\t\tif (!this._isDetailsVisible()) {\n\t\t\t\tthis.toggleDetails(true);\n\t\t\t} else {\n\t\t\t\tthis._details.widget.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggleDetails(focused: boolean = false): void {\n\t\tif (this._isDetailsVisible()) {\n\t\t\t// hide details widget\n\t\t\tthis._pendingShowDetails.clear();\n\t\t\tthis._ctxSuggestWidgetDetailsVisible.set(false);\n\t\t\tthis._setDetailsVisible(false);\n\t\t\tthis._details.hide();\n\t\t\tthis.element.domNode.classList.remove('shows-details');\n\n\t\t} else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === State.Open || this._state === State.Details || this._state === State.Frozen)) {\n\t\t\t// show details widget (iff possible)\n\t\t\tthis._ctxSuggestWidgetDetailsVisible.set(true);\n\t\t\tthis._setDetailsVisible(true);\n\t\t\tthis._showDetails(false, focused);\n\t\t}\n\t}\n\n\tprivate _showDetails(loading: boolean, focused: boolean): void {\n\t\tthis._pendingShowDetails.value = dom.runAtThisOrScheduleAtNextAnimationFrame(dom.getWindow(this.element.domNode), () => {\n\t\t\tthis._pendingShowDetails.clear();\n\t\t\tthis._details.show();\n\t\t\tlet didFocusDetails = false;\n\t\t\tif (loading) {\n\t\t\t\tthis._details.widget.renderLoading();\n\t\t\t} else {\n\t\t\t\tthis._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n\t\t\t}\n\t\t\tif (!this._details.widget.isEmpty) {\n\t\t\t\tthis._positionDetails();\n\t\t\t\tthis.element.domNode.classList.add('shows-details');\n\t\t\t\tif (focused) {\n\t\t\t\t\tthis._details.widget.focus();\n\t\t\t\t\tdidFocusDetails = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._details.hide();\n\t\t\t}\n\t\t\tif (!didFocusDetails) {\n\t\t\t\tthis.editor.focus();\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggleExplainMode(): void {\n\t\tif (this._list.getFocusedElements()[0]) {\n\t\t\tthis._explainMode = !this._explainMode;\n\t\t\tif (!this._isDetailsVisible()) {\n\t\t\t\tthis.toggleDetails();\n\t\t\t} else {\n\t\t\t\tthis._showDetails(false, false);\n\t\t\t}\n\t\t}\n\t}\n\n\tresetPersistedSize(): void {\n\t\tthis._persistedSize.reset();\n\t}\n\n\thideWidget(): void {\n\t\tthis._pendingLayout.clear();\n\t\tthis._pendingShowDetails.clear();\n\t\tthis._loadingTimeout?.dispose();\n\n\t\tthis._setState(State.Hidden);\n\t\tthis._onDidHide.fire(this);\n\t\tthis.element.clearSashHoverState();\n\n\t\t// ensure that a reasonable widget height is persisted so that\n\t\t// accidential \"resize-to-single-items\" cases aren't happening\n\t\tconst dim = this._persistedSize.restore();\n\t\tconst minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n\t\tif (dim && dim.height < minPersistedHeight) {\n\t\t\tthis._persistedSize.store(dim.with(undefined, minPersistedHeight));\n\t\t}\n\t}\n\n\tisFrozen(): boolean {\n\t\treturn this._state === State.Frozen;\n\t}\n\n\t_afterRender(position: ContentWidgetPositionPreference | null) {\n\t\tif (position === null) {\n\t\t\tif (this._isDetailsVisible()) {\n\t\t\t\tthis._details.hide(); //todo@jrieken soft-hide\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (this._state === State.Empty || this._state === State.Loading) {\n\t\t\t// no special positioning when widget isn't showing list\n\t\t\treturn;\n\t\t}\n\t\tif (this._isDetailsVisible() && !this._details.widget.isEmpty) {\n\t\t\tthis._details.show();\n\t\t}\n\t\tthis._positionDetails();\n\t}\n\n\tprivate _layout(size: dom.Dimension | undefined): void {\n\t\tif (!this.editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.editor.getDomNode()) {\n\t\t\t// happens when running tests\n\t\t\treturn;\n\t\t}\n\n\t\tconst bodyBox = dom.getClientArea(this.element.domNode.ownerDocument.body);\n\t\tconst info = this.getLayoutInfo();\n\n\t\tif (!size) {\n\t\t\tsize = info.defaultSize;\n\t\t}\n\n\t\tlet height = size.height;\n\t\tlet width = size.width;\n\n\t\t// status bar\n\t\tthis._status.element.style.height = `${info.itemHeight}px`;\n\n\t\tif (this._state === State.Empty || this._state === State.Loading) {\n\t\t\t// showing a message only\n\t\t\theight = info.itemHeight + info.borderHeight;\n\t\t\twidth = info.defaultSize.width / 2;\n\t\t\tthis.element.enableSashes(false, false, false, false);\n\t\t\tthis.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n\t\t\tthis._contentWidget.setPreference(ContentWidgetPositionPreference.BELOW);\n\n\t\t} else {\n\t\t\t// showing items\n\n\t\t\t// width math\n\t\t\tconst maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n\t\t\tif (width > maxWidth) {\n\t\t\t\twidth = maxWidth;\n\t\t\t}\n\t\t\tconst preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n\n\t\t\t// height math\n\t\t\tconst fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n\t\t\tconst minHeight = info.itemHeight + info.statusBarHeight;\n\t\t\tconst editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n\t\t\tconst cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n\t\t\tconst cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n\t\t\tconst maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n\t\t\tconst availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n\t\t\tconst maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n\t\t\tlet maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n\n\t\t\tif (height === this._cappedHeight?.capped) {\n\t\t\t\t// Restore the old (wanted) height when the current\n\t\t\t\t// height is capped to fit\n\t\t\t\theight = this._cappedHeight.wanted;\n\t\t\t}\n\n\t\t\tif (height < minHeight) {\n\t\t\t\theight = minHeight;\n\t\t\t}\n\t\t\tif (height > maxHeight) {\n\t\t\t\theight = maxHeight;\n\t\t\t}\n\n\t\t\tconst forceRenderingAboveRequiredSpace = 150;\n\t\t\tif (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n\t\t\t\tthis._contentWidget.setPreference(ContentWidgetPositionPreference.ABOVE);\n\t\t\t\tthis.element.enableSashes(true, true, false, false);\n\t\t\t\tmaxHeight = maxHeightAbove;\n\t\t\t} else {\n\t\t\t\tthis._contentWidget.setPreference(ContentWidgetPositionPreference.BELOW);\n\t\t\t\tthis.element.enableSashes(false, true, true, false);\n\t\t\t\tmaxHeight = maxHeightBelow;\n\t\t\t}\n\t\t\tthis.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n\t\t\tthis.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n\t\t\tthis.element.minSize = new dom.Dimension(220, minHeight);\n\n\t\t\t// Know when the height was capped to fit and remember\n\t\t\t// the wanted height for later. This is required when going\n\t\t\t// left to widen suggestions.\n\t\t\tthis._cappedHeight = height === fullHeight\n\t\t\t\t? { wanted: this._cappedHeight?.wanted ?? size.height, capped: height }\n\t\t\t\t: undefined;\n\t\t}\n\t\tthis._resize(width, height);\n\t}\n\n\tprivate _resize(width: number, height: number): void {\n\n\t\tconst { width: maxWidth, height: maxHeight } = this.element.maxSize;\n\t\twidth = Math.min(maxWidth, width);\n\t\theight = Math.min(maxHeight, height);\n\n\t\tconst { statusBarHeight } = this.getLayoutInfo();\n\t\tthis._list.layout(height - statusBarHeight, width);\n\t\tthis._listElement.style.height = `${height - statusBarHeight}px`;\n\t\tthis.element.layout(height, width);\n\t\tthis._contentWidget.layout();\n\n\t\tthis._positionDetails();\n\t}\n\n\tprivate _positionDetails(): void {\n\t\tif (this._isDetailsVisible()) {\n\t\t\tthis._details.placeAtAnchor(this.element.domNode, this._contentWidget.getPosition()?.preference[0] === ContentWidgetPositionPreference.BELOW);\n\t\t}\n\t}\n\n\tgetLayoutInfo() {\n\t\tconst fontInfo = this.editor.getOption(EditorOption.fontInfo);\n\t\tconst itemHeight = clamp(this.editor.getOption(EditorOption.suggestLineHeight) || fontInfo.lineHeight, 8, 1000);\n\t\tconst statusBarHeight = !this.editor.getOption(EditorOption.suggest).showStatusBar || this._state === State.Empty || this._state === State.Loading ? 0 : itemHeight;\n\t\tconst borderWidth = this._details.widget.borderWidth;\n\t\tconst borderHeight = 2 * borderWidth;\n\n\t\treturn {\n\t\t\titemHeight,\n\t\t\tstatusBarHeight,\n\t\t\tborderWidth,\n\t\t\tborderHeight,\n\t\t\ttypicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n\t\t\tverticalPadding: 22,\n\t\t\thorizontalPadding: 14,\n\t\t\tdefaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n\t\t};\n\t}\n\n\tprivate _isDetailsVisible(): boolean {\n\t\treturn this._storageService.getBoolean('expandSuggestionDocs', StorageScope.PROFILE, false);\n\t}\n\n\tprivate _setDetailsVisible(value: boolean) {\n\t\tthis._storageService.store('expandSuggestionDocs', value, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\tforceRenderingAbove() {\n\t\tif (!this._forceRenderingAbove) {\n\t\t\tthis._forceRenderingAbove = true;\n\t\t\tthis._layout(this._persistedSize.restore());\n\t\t}\n\t}\n\n\tstopForceRenderingAbove() {\n\t\tthis._forceRenderingAbove = false;\n\t}\n}\n\nexport class SuggestContentWidget implements IContentWidget {\n\n\treadonly allowEditorOverflow = true;\n\treadonly suppressMouseDown = false;\n\n\tprivate _position?: IPosition | null;\n\tprivate _preference?: ContentWidgetPositionPreference;\n\tprivate _preferenceLocked = false;\n\n\tprivate _added: boolean = false;\n\tprivate _hidden: boolean = false;\n\n\tconstructor(\n\t\tprivate readonly _widget: SuggestWidget,\n\t\tprivate readonly _editor: ICodeEditor\n\t) { }\n\n\tdispose(): void {\n\t\tif (this._added) {\n\t\t\tthis._added = false;\n\t\t\tthis._editor.removeContentWidget(this);\n\t\t}\n\t}\n\n\tgetId(): string {\n\t\treturn 'editor.widget.suggestWidget';\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._widget.element.domNode;\n\t}\n\n\tshow(): void {\n\t\tthis._hidden = false;\n\t\tif (!this._added) {\n\t\t\tthis._added = true;\n\t\t\tthis._editor.addContentWidget(this);\n\t\t}\n\t}\n\n\thide(): void {\n\t\tif (!this._hidden) {\n\t\t\tthis._hidden = true;\n\t\t\tthis.layout();\n\t\t}\n\t}\n\n\tlayout(): void {\n\t\tthis._editor.layoutContentWidget(this);\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\tif (this._hidden || !this._position || !this._preference) {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tposition: this._position,\n\t\t\tpreference: [this._preference]\n\t\t};\n\t}\n\n\tbeforeRender() {\n\t\tconst { height, width } = this._widget.element.size;\n\t\tconst { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n\t\treturn new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n\t}\n\n\tafterRender(position: ContentWidgetPositionPreference | null) {\n\t\tthis._widget._afterRender(position);\n\t}\n\n\tsetPreference(preference: ContentWidgetPositionPreference) {\n\t\tif (!this._preferenceLocked) {\n\t\t\tthis._preference = preference;\n\t\t}\n\t}\n\n\tlockPreference() {\n\t\tthis._preferenceLocked = true;\n\t}\n\n\tunlockPreference() {\n\t\tthis._preferenceLocked = false;\n\t}\n\n\tsetPosition(position: IPosition | null): void {\n\t\tthis._position = position;\n\t}\n}\n"],
  "mappings": "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",
  "names": ["State", "detail"]
}
