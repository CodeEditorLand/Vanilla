var h=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var a=(r,e,t,i)=>{for(var o=i>1?void 0:i?_(e,t):e,s=r.length-1,d;s>=0;s--)(d=r[s])&&(o=(i?d(e,t,o):d(o))||o);return i&&o&&h(e,t,o),o},l=(r,e)=>(t,i)=>e(t,i,r);import{EditorOption as c}from"../../../common/config/editorOptions.js";import{IContextKeyService as p,RawContextKey as f}from"../../../../platform/contextkey/common/contextkey.js";let n=class{constructor(e,t){this._editor=e;this._ckAtEnd=n.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(c.tabCompletion)&&this._update()),this._update()}static AtEnd=new f("atEndOfWord",!1);_ckAtEnd;_configListener;_enabled=!1;_selectionListener;dispose(){this._configListener.dispose(),this._selectionListener?.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(c.tabCompletion)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),o=this._editor.getSelection(),s=i.getWordAtPosition(o.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===o.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};n=a([l(1,p)],n);export{n as WordContextKey};
