{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/suggest/browser/wordDistance.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { IPosition } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CompletionItem, CompletionItemKind } from '../../../common/languages.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\n\nexport abstract class WordDistance {\n\n\tstatic readonly None = new class extends WordDistance {\n\t\tdistance() { return 0; }\n\t};\n\n\tstatic async create(service: IEditorWorkerService, editor: ICodeEditor): Promise<WordDistance> {\n\n\t\tif (!editor.getOption(EditorOption.suggest).localityBonus) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\tif (!editor.hasModel()) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\tconst model = editor.getModel();\n\t\tconst position = editor.getPosition();\n\n\t\tif (!service.canComputeWordRanges(model.uri)) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\tconst [ranges] = await new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n\t\tif (ranges.length === 0) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\tconst wordRanges = await service.computeWordRanges(model.uri, ranges[0].range);\n\t\tif (!wordRanges) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\t// remove current word\n\t\tconst wordUntilPos = model.getWordUntilPosition(position);\n\t\tdelete wordRanges[wordUntilPos.word];\n\n\t\treturn new class extends WordDistance {\n\t\t\tdistance(anchor: IPosition, item: CompletionItem) {\n\t\t\t\tif (!position.equals(editor.getPosition())) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif (item.kind === CompletionItemKind.Keyword) {\n\t\t\t\t\treturn 2 << 20;\n\t\t\t\t}\n\t\t\t\tconst word = typeof item.label === 'string' ? item.label : item.label.label;\n\t\t\t\tconst wordLines = wordRanges[word];\n\t\t\t\tif (isFalsyOrEmpty(wordLines)) {\n\t\t\t\t\treturn 2 << 20;\n\t\t\t\t}\n\t\t\t\tconst idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n\t\t\t\tconst bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n\t\t\t\tlet blockDistance = ranges.length;\n\t\t\t\tfor (const range of ranges) {\n\t\t\t\t\tif (!Range.containsRange(range.range, bestWordRange)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tblockDistance -= 1;\n\t\t\t\t}\n\t\t\t\treturn blockDistance;\n\t\t\t}\n\t\t};\n\t}\n\n\tabstract distance(anchor: IPosition, suggestion: CompletionItem): number;\n}\n"],
  "mappings": ";;AAKA,SAAS,cAAc,sBAAsB;AAC7C,SAAS,mBAAmB;AAC5B,SAAS,oBAAoB;AAC7B,SAAS,iBAAiB;AAC1B,SAAS,aAAa;AACtB,SAAS,gBAAgB,0BAA0B;AACnD,SAAS,4BAA4B;AACrC,SAAS,qCAAqC;AAEvC,MAAe,aAAa;AAAA,EAdnC,OAcmC;AAAA;AAAA;AAAA,EAElC,OAAgB,OAAO,IAAI,cAAc,aAAa;AAAA,IACrD,WAAW;AAAE,aAAO;AAAA,IAAG;AAAA,EACxB;AAAA,EAEA,aAAa,OAAO,SAA+B,QAA4C;AAE9F,QAAI,CAAC,OAAO,UAAU,aAAa,OAAO,EAAE,eAAe;AAC1D,aAAO,aAAa;AAAA,IACrB;AAEA,QAAI,CAAC,OAAO,SAAS,GAAG;AACvB,aAAO,aAAa;AAAA,IACrB;AAEA,UAAM,QAAQ,OAAO,SAAS;AAC9B,UAAM,WAAW,OAAO,YAAY;AAEpC,QAAI,CAAC,QAAQ,qBAAqB,MAAM,GAAG,GAAG;AAC7C,aAAO,aAAa;AAAA,IACrB;AAEA,UAAM,CAAC,MAAM,IAAI,MAAM,IAAI,8BAA8B,EAAE,uBAAuB,OAAO,CAAC,QAAQ,CAAC;AACnG,QAAI,OAAO,WAAW,GAAG;AACxB,aAAO,aAAa;AAAA,IACrB;AAEA,UAAM,aAAa,MAAM,QAAQ,kBAAkB,MAAM,KAAK,OAAO,CAAC,EAAE,KAAK;AAC7E,QAAI,CAAC,YAAY;AAChB,aAAO,aAAa;AAAA,IACrB;AAGA,UAAM,eAAe,MAAM,qBAAqB,QAAQ;AACxD,WAAO,WAAW,aAAa,IAAI;AAEnC,WAAO,IAAI,cAAc,aAAa;AAAA,MACrC,SAAS,QAAmB,MAAsB;AACjD,YAAI,CAAC,SAAS,OAAO,OAAO,YAAY,CAAC,GAAG;AAC3C,iBAAO;AAAA,QACR;AACA,YAAI,KAAK,SAAS,mBAAmB,SAAS;AAC7C,iBAAO,KAAK;AAAA,QACb;AACA,cAAM,OAAO,OAAO,KAAK,UAAU,WAAW,KAAK,QAAQ,KAAK,MAAM;AACtE,cAAM,YAAY,WAAW,IAAI;AACjC,YAAI,eAAe,SAAS,GAAG;AAC9B,iBAAO,KAAK;AAAA,QACb;AACA,cAAM,MAAM,aAAa,WAAW,MAAM,cAAc,MAAM,GAAG,MAAM,wBAAwB;AAC/F,cAAM,gBAAgB,OAAO,IAAI,UAAU,GAAG,IAAI,UAAU,KAAK,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC;AACjF,YAAI,gBAAgB,OAAO;AAC3B,mBAAW,SAAS,QAAQ;AAC3B,cAAI,CAAC,MAAM,cAAc,MAAM,OAAO,aAAa,GAAG;AACrD;AAAA,UACD;AACA,2BAAiB;AAAA,QAClB;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAGD;",
  "names": []
}
