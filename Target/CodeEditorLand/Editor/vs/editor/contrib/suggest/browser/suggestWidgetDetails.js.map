{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/contrib/suggest/browser/suggestWidgetDetails.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport { ResizableHTMLElement } from \"../../../../base/browser/ui/resizable/resizable.js\";\nimport { DomScrollableElement } from \"../../../../base/browser/ui/scrollbar/scrollableElement.js\";\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport { Emitter, type Event } from \"../../../../base/common/event.js\";\nimport { MarkdownString } from \"../../../../base/common/htmlContent.js\";\nimport { DisposableStore } from \"../../../../base/common/lifecycle.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport * as nls from \"../../../../nls.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport type {\n\tICodeEditor,\n\tIOverlayWidget,\n\tIOverlayWidgetPosition,\n} from \"../../../browser/editorBrowser.js\";\nimport { MarkdownRenderer } from \"../../../browser/widget/markdownRenderer/browser/markdownRenderer.js\";\nimport { EditorOption } from \"../../../common/config/editorOptions.js\";\nimport type { CompletionItem } from \"./suggest.js\";\n\nexport function canExpandCompletionItem(\n\titem: CompletionItem | undefined,\n): boolean {\n\treturn (\n\t\t!!item &&\n\t\tBoolean(\n\t\t\titem.completion.documentation ||\n\t\t\t\t(item.completion.detail &&\n\t\t\t\t\titem.completion.detail !== item.completion.label),\n\t\t)\n\t);\n}\n\nexport class SuggestDetailsWidget {\n\treadonly domNode: HTMLDivElement;\n\n\tprivate readonly _onDidClose = new Emitter<void>();\n\treadonly onDidClose: Event<void> = this._onDidClose.event;\n\n\tprivate readonly _onDidChangeContents = new Emitter<this>();\n\treadonly onDidChangeContents: Event<this> = this._onDidChangeContents.event;\n\n\tprivate readonly _close: HTMLElement;\n\tprivate readonly _scrollbar: DomScrollableElement;\n\tprivate readonly _body: HTMLElement;\n\tprivate readonly _header: HTMLElement;\n\tprivate readonly _type: HTMLElement;\n\tprivate readonly _docs: HTMLElement;\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate readonly _markdownRenderer: MarkdownRenderer;\n\tprivate readonly _renderDisposeable = new DisposableStore();\n\tprivate _borderWidth = 1;\n\tprivate _size = new dom.Dimension(330, 0);\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IInstantiationService instaService: IInstantiationService,\n\t) {\n\t\tthis.domNode = dom.$(\".suggest-details\");\n\t\tthis.domNode.classList.add(\"no-docs\");\n\n\t\tthis._markdownRenderer = instaService.createInstance(MarkdownRenderer, {\n\t\t\teditor: _editor,\n\t\t});\n\n\t\tthis._body = dom.$(\".body\");\n\n\t\tthis._scrollbar = new DomScrollableElement(this._body, {\n\t\t\talwaysConsumeMouseWheel: true,\n\t\t});\n\t\tdom.append(this.domNode, this._scrollbar.getDomNode());\n\t\tthis._disposables.add(this._scrollbar);\n\n\t\tthis._header = dom.append(this._body, dom.$(\".header\"));\n\t\tthis._close = dom.append(\n\t\t\tthis._header,\n\t\t\tdom.$(\"span\" + ThemeIcon.asCSSSelector(Codicon.close)),\n\t\t);\n\t\tthis._close.title = nls.localize(\"details.close\", \"Close\");\n\t\tthis._close.role = \"button\";\n\t\tthis._close.tabIndex = -1;\n\t\tthis._type = dom.append(this._header, dom.$(\"p.type\"));\n\n\t\tthis._docs = dom.append(this._body, dom.$(\"p.docs\"));\n\n\t\tthis._configureFont();\n\n\t\tthis._disposables.add(\n\t\t\tthis._editor.onDidChangeConfiguration((e) => {\n\t\t\t\tif (e.hasChanged(EditorOption.fontInfo)) {\n\t\t\t\t\tthis._configureFont();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tthis._renderDisposeable.dispose();\n\t}\n\n\tprivate _configureFont(): void {\n\t\tconst options = this._editor.getOptions();\n\t\tconst fontInfo = options.get(EditorOption.fontInfo);\n\t\tconst fontFamily = fontInfo.getMassagedFontFamily();\n\t\tconst fontSize =\n\t\t\toptions.get(EditorOption.suggestFontSize) || fontInfo.fontSize;\n\t\tconst lineHeight =\n\t\t\toptions.get(EditorOption.suggestLineHeight) || fontInfo.lineHeight;\n\t\tconst fontWeight = fontInfo.fontWeight;\n\t\tconst fontSizePx = `${fontSize}px`;\n\t\tconst lineHeightPx = `${lineHeight}px`;\n\n\t\tthis.domNode.style.fontSize = fontSizePx;\n\t\tthis.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n\t\tthis.domNode.style.fontWeight = fontWeight;\n\t\tthis.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n\t\tthis._type.style.fontFamily = fontFamily;\n\t\tthis._close.style.height = lineHeightPx;\n\t\tthis._close.style.width = lineHeightPx;\n\t}\n\n\tgetLayoutInfo() {\n\t\tconst lineHeight =\n\t\t\tthis._editor.getOption(EditorOption.suggestLineHeight) ||\n\t\t\tthis._editor.getOption(EditorOption.fontInfo).lineHeight;\n\t\tconst borderWidth = this._borderWidth;\n\t\tconst borderHeight = borderWidth * 2;\n\t\treturn {\n\t\t\tlineHeight,\n\t\t\tborderWidth,\n\t\t\tborderHeight,\n\t\t\tverticalPadding: 22,\n\t\t\thorizontalPadding: 14,\n\t\t};\n\t}\n\n\trenderLoading(): void {\n\t\tthis._type.textContent = nls.localize(\"loading\", \"Loading...\");\n\t\tthis._docs.textContent = \"\";\n\t\tthis.domNode.classList.remove(\"no-docs\", \"no-type\");\n\t\tthis.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n\t\tthis._onDidChangeContents.fire(this);\n\t}\n\n\trenderItem(item: CompletionItem, explainMode: boolean): void {\n\t\tthis._renderDisposeable.clear();\n\n\t\tlet { detail, documentation } = item.completion;\n\n\t\tif (explainMode) {\n\t\t\tlet md = \"\";\n\t\t\tmd += `score: ${item.score[0]}\\n`;\n\t\t\tmd += `prefix: ${item.word ?? \"(no prefix)\"}\\n`;\n\t\t\tmd += `word: ${item.completion.filterText ? item.completion.filterText + \" (filterText)\" : item.textLabel}\\n`;\n\t\t\tmd += `distance: ${item.distance} (localityBonus-setting)\\n`;\n\t\t\tmd += `index: ${item.idx}, based on ${(item.completion.sortText && `sortText: \"${item.completion.sortText}\"`) || \"label\"}\\n`;\n\t\t\tmd += `commit_chars: ${item.completion.commitCharacters?.join(\"\")}\\n`;\n\t\t\tdocumentation = new MarkdownString().appendCodeblock(\"empty\", md);\n\t\t\tdetail = `Provider: ${item.provider._debugDisplayName}`;\n\t\t}\n\n\t\tif (!explainMode && !canExpandCompletionItem(item)) {\n\t\t\tthis.clearContents();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.domNode.classList.remove(\"no-docs\", \"no-type\");\n\n\t\t// --- details\n\n\t\tif (detail) {\n\t\t\tconst cappedDetail =\n\t\t\t\tdetail.length > 100000\n\t\t\t\t\t? `${detail.substr(0, 100000)}\u2026`\n\t\t\t\t\t: detail;\n\t\t\tthis._type.textContent = cappedDetail;\n\t\t\tthis._type.title = cappedDetail;\n\t\t\tdom.show(this._type);\n\t\t\tthis._type.classList.toggle(\n\t\t\t\t\"auto-wrap\",\n\t\t\t\t!/\\r?\\n^\\s+/gim.test(cappedDetail),\n\t\t\t);\n\t\t} else {\n\t\t\tdom.clearNode(this._type);\n\t\t\tthis._type.title = \"\";\n\t\t\tdom.hide(this._type);\n\t\t\tthis.domNode.classList.add(\"no-type\");\n\t\t}\n\n\t\t// --- documentation\n\t\tdom.clearNode(this._docs);\n\t\tif (typeof documentation === \"string\") {\n\t\t\tthis._docs.classList.remove(\"markdown-docs\");\n\t\t\tthis._docs.textContent = documentation;\n\t\t} else if (documentation) {\n\t\t\tthis._docs.classList.add(\"markdown-docs\");\n\t\t\tdom.clearNode(this._docs);\n\t\t\tconst renderedContents =\n\t\t\t\tthis._markdownRenderer.render(documentation);\n\t\t\tthis._docs.appendChild(renderedContents.element);\n\t\t\tthis._renderDisposeable.add(renderedContents);\n\t\t\tthis._renderDisposeable.add(\n\t\t\t\tthis._markdownRenderer.onDidRenderAsync(() => {\n\t\t\t\t\tthis.layout(\n\t\t\t\t\t\tthis._size.width,\n\t\t\t\t\t\tthis._type.clientHeight + this._docs.clientHeight,\n\t\t\t\t\t);\n\t\t\t\t\tthis._onDidChangeContents.fire(this);\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tthis.domNode.style.userSelect = \"text\";\n\t\tthis.domNode.tabIndex = -1;\n\n\t\tthis._close.onmousedown = (e) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t};\n\t\tthis._close.onclick = (e) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis._onDidClose.fire();\n\t\t};\n\n\t\tthis._body.scrollTop = 0;\n\n\t\tthis.layout(\n\t\t\tthis._size.width,\n\t\t\tthis._type.clientHeight + this._docs.clientHeight,\n\t\t);\n\t\tthis._onDidChangeContents.fire(this);\n\t}\n\n\tclearContents() {\n\t\tthis.domNode.classList.add(\"no-docs\");\n\t\tthis._type.textContent = \"\";\n\t\tthis._docs.textContent = \"\";\n\t}\n\n\tget isEmpty(): boolean {\n\t\treturn this.domNode.classList.contains(\"no-docs\");\n\t}\n\n\tget size() {\n\t\treturn this._size;\n\t}\n\n\tlayout(width: number, height: number): void {\n\t\tconst newSize = new dom.Dimension(width, height);\n\t\tif (!dom.Dimension.equals(newSize, this._size)) {\n\t\t\tthis._size = newSize;\n\t\t\tdom.size(this.domNode, width, height);\n\t\t}\n\t\tthis._scrollbar.scanDomNode();\n\t}\n\n\tscrollDown(much = 8): void {\n\t\tthis._body.scrollTop += much;\n\t}\n\n\tscrollUp(much = 8): void {\n\t\tthis._body.scrollTop -= much;\n\t}\n\n\tscrollTop(): void {\n\t\tthis._body.scrollTop = 0;\n\t}\n\n\tscrollBottom(): void {\n\t\tthis._body.scrollTop = this._body.scrollHeight;\n\t}\n\n\tpageDown(): void {\n\t\tthis.scrollDown(80);\n\t}\n\n\tpageUp(): void {\n\t\tthis.scrollUp(80);\n\t}\n\n\tset borderWidth(width: number) {\n\t\tthis._borderWidth = width;\n\t}\n\n\tget borderWidth() {\n\t\treturn this._borderWidth;\n\t}\n\n\tfocus() {\n\t\tthis.domNode.focus();\n\t}\n}\n\ninterface TopLeftPosition {\n\ttop: number;\n\tleft: number;\n}\n\nexport class SuggestDetailsOverlay implements IOverlayWidget {\n\treadonly allowEditorOverflow = true;\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _resizable: ResizableHTMLElement;\n\n\tprivate _added = false;\n\tprivate _anchorBox?: dom.IDomNodePagePosition;\n\tprivate _preferAlignAtTop = true;\n\tprivate _userSize?: dom.Dimension;\n\tprivate _topLeft?: TopLeftPosition;\n\n\tconstructor(\n\t\treadonly widget: SuggestDetailsWidget,\n\t\tprivate readonly _editor: ICodeEditor,\n\t) {\n\t\tthis._resizable = new ResizableHTMLElement();\n\t\tthis._resizable.domNode.classList.add(\"suggest-details-container\");\n\t\tthis._resizable.domNode.appendChild(widget.domNode);\n\t\tthis._resizable.enableSashes(false, true, true, false);\n\n\t\tlet topLeftNow: TopLeftPosition | undefined;\n\t\tlet sizeNow: dom.Dimension | undefined;\n\t\tlet deltaTop = 0;\n\t\tlet deltaLeft = 0;\n\t\tthis._disposables.add(\n\t\t\tthis._resizable.onDidWillResize(() => {\n\t\t\t\ttopLeftNow = this._topLeft;\n\t\t\t\tsizeNow = this._resizable.size;\n\t\t\t}),\n\t\t);\n\n\t\tthis._disposables.add(\n\t\t\tthis._resizable.onDidResize((e) => {\n\t\t\t\tif (topLeftNow && sizeNow) {\n\t\t\t\t\tthis.widget.layout(e.dimension.width, e.dimension.height);\n\n\t\t\t\t\tlet updateTopLeft = false;\n\t\t\t\t\tif (e.west) {\n\t\t\t\t\t\tdeltaLeft = sizeNow.width - e.dimension.width;\n\t\t\t\t\t\tupdateTopLeft = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.north) {\n\t\t\t\t\t\tdeltaTop = sizeNow.height - e.dimension.height;\n\t\t\t\t\t\tupdateTopLeft = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (updateTopLeft) {\n\t\t\t\t\t\tthis._applyTopLeft({\n\t\t\t\t\t\t\ttop: topLeftNow.top + deltaTop,\n\t\t\t\t\t\t\tleft: topLeftNow.left + deltaLeft,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e.done) {\n\t\t\t\t\ttopLeftNow = undefined;\n\t\t\t\t\tsizeNow = undefined;\n\t\t\t\t\tdeltaTop = 0;\n\t\t\t\t\tdeltaLeft = 0;\n\t\t\t\t\tthis._userSize = e.dimension;\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._disposables.add(\n\t\t\tthis.widget.onDidChangeContents(() => {\n\t\t\t\tif (this._anchorBox) {\n\t\t\t\t\tthis._placeAtAnchor(\n\t\t\t\t\t\tthis._anchorBox,\n\t\t\t\t\t\tthis._userSize ?? this.widget.size,\n\t\t\t\t\t\tthis._preferAlignAtTop,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tdispose(): void {\n\t\tthis._resizable.dispose();\n\t\tthis._disposables.dispose();\n\t\tthis.hide();\n\t}\n\n\tgetId(): string {\n\t\treturn \"suggest.details\";\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._resizable.domNode;\n\t}\n\n\tgetPosition(): IOverlayWidgetPosition | null {\n\t\treturn this._topLeft ? { preference: this._topLeft } : null;\n\t}\n\n\tshow(): void {\n\t\tif (!this._added) {\n\t\t\tthis._editor.addOverlayWidget(this);\n\t\t\tthis._added = true;\n\t\t}\n\t}\n\n\thide(sessionEnded = false): void {\n\t\tthis._resizable.clearSashHoverState();\n\n\t\tif (this._added) {\n\t\t\tthis._editor.removeOverlayWidget(this);\n\t\t\tthis._added = false;\n\t\t\tthis._anchorBox = undefined;\n\t\t\tthis._topLeft = undefined;\n\t\t}\n\t\tif (sessionEnded) {\n\t\t\tthis._userSize = undefined;\n\t\t\tthis.widget.clearContents();\n\t\t}\n\t}\n\n\tplaceAtAnchor(anchor: HTMLElement, preferAlignAtTop: boolean) {\n\t\tconst anchorBox = anchor.getBoundingClientRect();\n\t\tthis._anchorBox = anchorBox;\n\t\tthis._preferAlignAtTop = preferAlignAtTop;\n\t\tthis._placeAtAnchor(\n\t\t\tthis._anchorBox,\n\t\t\tthis._userSize ?? this.widget.size,\n\t\t\tpreferAlignAtTop,\n\t\t);\n\t}\n\n\t_placeAtAnchor(\n\t\tanchorBox: dom.IDomNodePagePosition,\n\t\tsize: dom.Dimension,\n\t\tpreferAlignAtTop: boolean,\n\t) {\n\t\tconst bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n\n\t\tconst info = this.widget.getLayoutInfo();\n\n\t\tconst defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n\t\tconst defaultTop = anchorBox.top;\n\n\t\ttype Placement = {\n\t\t\ttop: number;\n\t\t\tleft: number;\n\t\t\tfit: number;\n\t\t\tmaxSizeTop: dom.Dimension;\n\t\t\tmaxSizeBottom: dom.Dimension;\n\t\t\tminSize: dom.Dimension;\n\t\t};\n\n\t\t// EAST\n\t\tconst eastPlacement: Placement = (() => {\n\t\t\tconst width =\n\t\t\t\tbodyBox.width -\n\t\t\t\t(anchorBox.left +\n\t\t\t\t\tanchorBox.width +\n\t\t\t\t\tinfo.borderWidth +\n\t\t\t\t\tinfo.horizontalPadding);\n\t\t\tconst left = -info.borderWidth + anchorBox.left + anchorBox.width;\n\t\t\tconst maxSizeTop = new dom.Dimension(\n\t\t\t\twidth,\n\t\t\t\tbodyBox.height -\n\t\t\t\t\tanchorBox.top -\n\t\t\t\t\tinfo.borderHeight -\n\t\t\t\t\tinfo.verticalPadding,\n\t\t\t);\n\t\t\tconst maxSizeBottom = maxSizeTop.with(\n\t\t\t\tundefined,\n\t\t\t\tanchorBox.top +\n\t\t\t\t\tanchorBox.height -\n\t\t\t\t\tinfo.borderHeight -\n\t\t\t\t\tinfo.verticalPadding,\n\t\t\t);\n\t\t\treturn {\n\t\t\t\ttop: defaultTop,\n\t\t\t\tleft,\n\t\t\t\tfit: width - size.width,\n\t\t\t\tmaxSizeTop,\n\t\t\t\tmaxSizeBottom,\n\t\t\t\tminSize: defaultMinSize.with(\n\t\t\t\t\tMath.min(width, defaultMinSize.width),\n\t\t\t\t),\n\t\t\t};\n\t\t})();\n\n\t\t// WEST\n\t\tconst westPlacement: Placement = (() => {\n\t\t\tconst width =\n\t\t\t\tanchorBox.left - info.borderWidth - info.horizontalPadding;\n\t\t\tconst left = Math.max(\n\t\t\t\tinfo.horizontalPadding,\n\t\t\t\tanchorBox.left - size.width - info.borderWidth,\n\t\t\t);\n\t\t\tconst maxSizeTop = new dom.Dimension(\n\t\t\t\twidth,\n\t\t\t\tbodyBox.height -\n\t\t\t\t\tanchorBox.top -\n\t\t\t\t\tinfo.borderHeight -\n\t\t\t\t\tinfo.verticalPadding,\n\t\t\t);\n\t\t\tconst maxSizeBottom = maxSizeTop.with(\n\t\t\t\tundefined,\n\t\t\t\tanchorBox.top +\n\t\t\t\t\tanchorBox.height -\n\t\t\t\t\tinfo.borderHeight -\n\t\t\t\t\tinfo.verticalPadding,\n\t\t\t);\n\t\t\treturn {\n\t\t\t\ttop: defaultTop,\n\t\t\t\tleft,\n\t\t\t\tfit: width - size.width,\n\t\t\t\tmaxSizeTop,\n\t\t\t\tmaxSizeBottom,\n\t\t\t\tminSize: defaultMinSize.with(\n\t\t\t\t\tMath.min(width, defaultMinSize.width),\n\t\t\t\t),\n\t\t\t};\n\t\t})();\n\n\t\t// SOUTH\n\t\tconst southPacement: Placement = (() => {\n\t\t\tconst left = anchorBox.left;\n\t\t\tconst top = -info.borderWidth + anchorBox.top + anchorBox.height;\n\t\t\tconst maxSizeBottom = new dom.Dimension(\n\t\t\t\tanchorBox.width - info.borderHeight,\n\t\t\t\tbodyBox.height -\n\t\t\t\t\tanchorBox.top -\n\t\t\t\t\tanchorBox.height -\n\t\t\t\t\tinfo.verticalPadding,\n\t\t\t);\n\t\t\treturn {\n\t\t\t\ttop,\n\t\t\t\tleft,\n\t\t\t\tfit: maxSizeBottom.height - size.height,\n\t\t\t\tmaxSizeBottom,\n\t\t\t\tmaxSizeTop: maxSizeBottom,\n\t\t\t\tminSize: defaultMinSize.with(maxSizeBottom.width),\n\t\t\t};\n\t\t})();\n\n\t\t// take first placement that fits or the first with \"least bad\" fit\n\t\tconst placements = [eastPlacement, westPlacement, southPacement];\n\t\tconst placement =\n\t\t\tplacements.find((p) => p.fit >= 0) ??\n\t\t\tplacements.sort((a, b) => b.fit - a.fit)[0];\n\n\t\t// top/bottom placement\n\t\tconst bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n\t\tlet alignAtTop: boolean;\n\t\tlet height = size.height;\n\t\tconst maxHeight = Math.max(\n\t\t\tplacement.maxSizeTop.height,\n\t\t\tplacement.maxSizeBottom.height,\n\t\t);\n\t\tif (height > maxHeight) {\n\t\t\theight = maxHeight;\n\t\t}\n\t\tlet maxSize: dom.Dimension;\n\t\tif (preferAlignAtTop) {\n\t\t\tif (height <= placement.maxSizeTop.height) {\n\t\t\t\talignAtTop = true;\n\t\t\t\tmaxSize = placement.maxSizeTop;\n\t\t\t} else {\n\t\t\t\talignAtTop = false;\n\t\t\t\tmaxSize = placement.maxSizeBottom;\n\t\t\t}\n\t\t} else if (height <= placement.maxSizeBottom.height) {\n\t\t\talignAtTop = false;\n\t\t\tmaxSize = placement.maxSizeBottom;\n\t\t} else {\n\t\t\talignAtTop = true;\n\t\t\tmaxSize = placement.maxSizeTop;\n\t\t}\n\n\t\tlet { top, left } = placement;\n\t\tif (!alignAtTop && height > anchorBox.height) {\n\t\t\ttop = bottom - height;\n\t\t}\n\t\tconst editorDomNode = this._editor.getDomNode();\n\t\tif (editorDomNode) {\n\t\t\t// get bounding rectangle of the suggest widget relative to the editor\n\t\t\tconst editorBoundingBox = editorDomNode.getBoundingClientRect();\n\t\t\ttop -= editorBoundingBox.top;\n\t\t\tleft -= editorBoundingBox.left;\n\t\t}\n\t\tthis._applyTopLeft({ left, top });\n\n\t\tthis._resizable.enableSashes(\n\t\t\t!alignAtTop,\n\t\t\tplacement === eastPlacement,\n\t\t\talignAtTop,\n\t\t\tplacement !== eastPlacement,\n\t\t);\n\n\t\tthis._resizable.minSize = placement.minSize;\n\t\tthis._resizable.maxSize = maxSize;\n\t\tthis._resizable.layout(height, Math.min(maxSize.width, size.width));\n\t\tthis.widget.layout(\n\t\t\tthis._resizable.size.width,\n\t\t\tthis._resizable.size.height,\n\t\t);\n\t}\n\n\tprivate _applyTopLeft(topLeft: TopLeftPosition): void {\n\t\tthis._topLeft = topLeft;\n\t\tthis._editor.layoutOverlayWidget(this);\n\t}\n}\n"],
  "mappings": "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",
  "names": ["left", "top"]
}
