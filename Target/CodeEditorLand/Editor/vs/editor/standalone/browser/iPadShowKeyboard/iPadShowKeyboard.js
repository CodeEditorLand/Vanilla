import"./iPadShowKeyboard.css";import*as i from"../../../../base/browser/dom.js";import{Disposable as o}from"../../../../base/common/lifecycle.js";import{isIOS as s}from"../../../../base/common/platform.js";import{OverlayWidgetPositionPreference as n}from"../../../browser/editorBrowser.js";import{EditorContributionInstantiation as a,registerEditorContribution as p}from"../../../browser/editorExtensions.js";import{EditorOption as l}from"../../../common/config/editorOptions.js";class r extends o{static ID="editor.contrib.iPadShowKeyboard";editor;widget;constructor(t){super(),this.editor=t,this.widget=null,s&&(this._register(t.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const t=!this.editor.getOption(l.readOnly);!this.widget&&t?this.widget=new e(this.editor):this.widget&&!t&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}class e extends o{static ID="editor.contrib.ShowKeyboardWidget";editor;_domNode;constructor(t){super(),this.editor=t,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(i.addDisposableListener(this._domNode,"touchstart",d=>{this.editor.focus()})),this._register(i.addDisposableListener(this._domNode,"focus",d=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return e.ID}getDomNode(){return this._domNode}getPosition(){return{preference:n.BOTTOM_RIGHT_CORNER}}}p(r.ID,r,a.Eventually);export{r as IPadShowKeyboard};
