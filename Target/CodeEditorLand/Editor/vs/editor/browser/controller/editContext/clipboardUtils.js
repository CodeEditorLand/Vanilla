import{isWindows as g}from"../../../../base/common/platform.js";function h(e,t,o,d){const a=e.getPlainTextToCopy(t,o,g),p=e.model.getEOL(),u=o&&t.length===1&&t[0].isEmpty(),c=Array.isArray(a)?a:null,r=Array.isArray(a)?a.join(p):a;let i,l=null;if(m.forceCopyWithSyntaxHighlighting||d&&r.length<65536){const n=e.getRichTextToCopy(t,o);n&&(i=n.html,l=n.mode)}return{isFromEmptySelection:u,multicursorText:c,text:r,html:i,mode:l}}class s{static INSTANCE=new s;_lastState;constructor(){this._lastState=null}set(t,o){this._lastState={lastCopiedValue:t,data:o}}get(t){return this._lastState&&this._lastState.lastCopiedValue===t?this._lastState.data:(this._lastState=null,null)}}const m={forceCopyWithSyntaxHighlighting:!1};export{m as CopyOptions,s as InMemoryClipboardMetadataManager,h as getDataToCopy};
