{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/widget/diffEditor/features/hideUnchangedRegionsFeature.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, addDisposableListener, getWindow, h, reset } from '../../../../../base/browser/dom.js';\nimport { renderIcon, renderLabelWithIcons } from '../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, IReader, autorun, derived, derivedDisposable, derivedWithStore, observableValue, transaction } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { isDefined } from '../../../../../base/common/types.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { EditorOption } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/lineRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { CursorChangeReason } from '../../../../common/cursorEvents.js';\nimport { SymbolKind, SymbolKinds } from '../../../../common/languages.js';\nimport { IModelDecorationOptions, IModelDeltaDecoration, ITextModel } from '../../../../common/model.js';\nimport { ICodeEditor } from '../../../editorBrowser.js';\nimport { observableCodeEditor } from '../../../observableCodeEditor.js';\nimport { DiffEditorEditors } from '../components/diffEditorEditors.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { DiffEditorViewModel, RevealPreference, UnchangedRegion } from '../diffEditorViewModel.js';\nimport { IObservableViewZone, PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle } from '../utils.js';\n\n/**\n * Make sure to add the view zones to the editor!\n */\nexport class HideUnchangedRegionsFeature extends Disposable {\n\tprivate static readonly _breadcrumbsSourceFactory = observableValue<((textModel: ITextModel, instantiationService: IInstantiationService) => IDiffEditorBreadcrumbsSource)>(\n\t\tHideUnchangedRegionsFeature, () => ({\n\t\t\tdispose() {\n\t\t\t},\n\t\t\tgetBreadcrumbItems(startRange, reader) {\n\t\t\t\treturn [];\n\t\t\t},\n\t\t}));\n\tpublic static setBreadcrumbsSourceFactory(factory: (textModel: ITextModel, instantiationService: IInstantiationService) => IDiffEditorBreadcrumbsSource) {\n\t\tthis._breadcrumbsSourceFactory.set(factory, undefined);\n\t}\n\n\tprivate readonly _modifiedOutlineSource = derivedDisposable(this, (reader) => {\n\t\tconst m = this._editors.modifiedModel.read(reader);\n\t\tconst factory = HideUnchangedRegionsFeature._breadcrumbsSourceFactory.read(reader);\n\t\treturn (!m || !factory) ? undefined : factory(m, this._instantiationService);\n\t});\n\n\tpublic readonly viewZones: IObservable<{\n\t\torigViewZones: IObservableViewZone[];\n\t\tmodViewZones: IObservableViewZone[];\n\t}>;\n\n\tprivate _isUpdatingHiddenAreas = false;\n\tpublic get isUpdatingHiddenAreas() { return this._isUpdatingHiddenAreas; }\n\n\tconstructor(\n\t\tprivate readonly _editors: DiffEditorEditors,\n\t\tprivate readonly _diffModel: IObservable<DiffEditorViewModel | undefined>,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._editors.original.onDidChangeCursorPosition(e => {\n\t\t\tif (e.reason === CursorChangeReason.ContentFlush) { return; }\n\t\t\tconst m = this._diffModel.get();\n\t\t\ttransaction(tx => {\n\t\t\t\tfor (const s of this._editors.original.getSelections() || []) {\n\t\t\t\t\tm?.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, RevealPreference.FromCloserSide, tx);\n\t\t\t\t\tm?.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, RevealPreference.FromCloserSide, tx);\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this._editors.modified.onDidChangeCursorPosition(e => {\n\t\t\tif (e.reason === CursorChangeReason.ContentFlush) { return; }\n\t\t\tconst m = this._diffModel.get();\n\t\t\ttransaction(tx => {\n\t\t\t\tfor (const s of this._editors.modified.getSelections() || []) {\n\t\t\t\t\tm?.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, RevealPreference.FromCloserSide, tx);\n\t\t\t\t\tm?.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, RevealPreference.FromCloserSide, tx);\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tconst unchangedRegions = this._diffModel.map((m, reader) => {\n\t\t\tconst regions = m?.unchangedRegions.read(reader) ?? [];\n\t\t\tif (regions.length === 1 && regions[0].modifiedLineNumber === 1 && regions[0].lineCount === this._editors.modifiedModel.read(reader)?.getLineCount()) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn regions;\n\t\t});\n\n\t\tthis.viewZones = derivedWithStore(this, (reader, store) => {\n\t\t\t/** @description view Zones */\n\t\t\tconst modifiedOutlineSource = this._modifiedOutlineSource.read(reader);\n\t\t\tif (!modifiedOutlineSource) { return { origViewZones: [], modViewZones: [] }; }\n\n\t\t\tconst origViewZones: IObservableViewZone[] = [];\n\t\t\tconst modViewZones: IObservableViewZone[] = [];\n\t\t\tconst sideBySide = this._options.renderSideBySide.read(reader);\n\n\t\t\tconst compactMode = this._options.compactMode.read(reader);\n\n\t\t\tconst curUnchangedRegions = unchangedRegions.read(reader);\n\t\t\tfor (let i = 0; i < curUnchangedRegions.length; i++) {\n\t\t\t\tconst r = curUnchangedRegions[i];\n\t\t\t\tif (r.shouldHideControls(reader)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (compactMode && (i === 0 || i === curUnchangedRegions.length - 1)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (compactMode) {\n\t\t\t\t\t{\n\t\t\t\t\t\tconst d = derived(this, reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\n\t\t\t\t\t\tconst origVz = new PlaceholderViewZone(d, 12);\n\t\t\t\t\t\torigViewZones.push(origVz);\n\t\t\t\t\t\tstore.add(new CompactCollapsedCodeOverlayWidget(\n\t\t\t\t\t\t\tthis._editors.original,\n\t\t\t\t\t\t\torigVz,\n\t\t\t\t\t\t\tr,\n\t\t\t\t\t\t\t!sideBySide,\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tconst d = derived(this, reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\n\t\t\t\t\t\tconst modViewZone = new PlaceholderViewZone(d, 12);\n\t\t\t\t\t\tmodViewZones.push(modViewZone);\n\t\t\t\t\t\tstore.add(new CompactCollapsedCodeOverlayWidget(\n\t\t\t\t\t\t\tthis._editors.modified,\n\t\t\t\t\t\t\tmodViewZone,\n\t\t\t\t\t\t\tr,\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t{\n\t\t\t\t\t\tconst d = derived(this, reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\n\t\t\t\t\t\tconst origVz = new PlaceholderViewZone(d, 24);\n\t\t\t\t\t\torigViewZones.push(origVz);\n\t\t\t\t\t\tstore.add(new CollapsedCodeOverlayWidget(\n\t\t\t\t\t\t\tthis._editors.original,\n\t\t\t\t\t\t\torigVz,\n\t\t\t\t\t\t\tr,\n\t\t\t\t\t\t\tr.originalUnchangedRange,\n\t\t\t\t\t\t\t!sideBySide,\n\t\t\t\t\t\t\tmodifiedOutlineSource,\n\t\t\t\t\t\t\tl => this._diffModel.get()!.ensureModifiedLineIsVisible(l, RevealPreference.FromBottom, undefined),\n\t\t\t\t\t\t\tthis._options,\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tconst d = derived(this, reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\n\t\t\t\t\t\tconst modViewZone = new PlaceholderViewZone(d, 24);\n\t\t\t\t\t\tmodViewZones.push(modViewZone);\n\t\t\t\t\t\tstore.add(new CollapsedCodeOverlayWidget(\n\t\t\t\t\t\t\tthis._editors.modified,\n\t\t\t\t\t\t\tmodViewZone,\n\t\t\t\t\t\t\tr,\n\t\t\t\t\t\t\tr.modifiedUnchangedRange,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tmodifiedOutlineSource,\n\t\t\t\t\t\t\tl => this._diffModel.get()!.ensureModifiedLineIsVisible(l, RevealPreference.FromBottom, undefined),\n\t\t\t\t\t\t\tthis._options,\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { origViewZones, modViewZones, };\n\t\t});\n\n\n\t\tconst unchangedLinesDecoration: IModelDecorationOptions = {\n\t\t\tdescription: 'unchanged lines',\n\t\t\tclassName: 'diff-unchanged-lines',\n\t\t\tisWholeLine: true,\n\t\t};\n\t\tconst unchangedLinesDecorationShow: IModelDecorationOptions = {\n\t\t\tdescription: 'Fold Unchanged',\n\t\t\tglyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n\t\t\t\t.appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n\t\t\tglyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n\t\t\tzIndex: 10001,\n\t\t};\n\n\t\tthis._register(applyObservableDecorations(this._editors.original, derived(this, reader => {\n\t\t\t/** @description decorations */\n\t\t\tconst curUnchangedRegions = unchangedRegions.read(reader);\n\t\t\tconst result = curUnchangedRegions.map<IModelDeltaDecoration>(r => ({\n\t\t\t\trange: r.originalUnchangedRange.toInclusiveRange()!,\n\t\t\t\toptions: unchangedLinesDecoration,\n\t\t\t}));\n\t\t\tfor (const r of curUnchangedRegions) {\n\t\t\t\tif (r.shouldHideControls(reader)) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\trange: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n\t\t\t\t\t\toptions: unchangedLinesDecorationShow,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t})));\n\n\t\tthis._register(applyObservableDecorations(this._editors.modified, derived(this, reader => {\n\t\t\t/** @description decorations */\n\t\t\tconst curUnchangedRegions = unchangedRegions.read(reader);\n\t\t\tconst result = curUnchangedRegions.map<IModelDeltaDecoration>(r => ({\n\t\t\t\trange: r.modifiedUnchangedRange.toInclusiveRange()!,\n\t\t\t\toptions: unchangedLinesDecoration,\n\t\t\t}));\n\t\t\tfor (const r of curUnchangedRegions) {\n\t\t\t\tif (r.shouldHideControls(reader)) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\trange: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange()!,\n\t\t\t\t\t\toptions: unchangedLinesDecorationShow,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t})));\n\n\t\tthis._register(autorun((reader) => {\n\t\t\t/** @description update folded unchanged regions */\n\t\t\tconst curUnchangedRegions = unchangedRegions.read(reader);\n\t\t\tthis._isUpdatingHiddenAreas = true;\n\t\t\ttry {\n\t\t\t\tthis._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n\t\t\t\tthis._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n\t\t\t} finally {\n\t\t\t\tthis._isUpdatingHiddenAreas = false;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._editors.modified.onMouseUp(event => {\n\t\t\tif (!event.event.rightButton && event.target.position && event.target.element?.className.includes('fold-unchanged')) {\n\t\t\t\tconst lineNumber = event.target.position.lineNumber;\n\t\t\t\tconst model = this._diffModel.get();\n\t\t\t\tif (!model) { return; }\n\t\t\t\tconst region = model.unchangedRegions.get().find(r => r.modifiedUnchangedRange.includes(lineNumber));\n\t\t\t\tif (!region) { return; }\n\t\t\t\tregion.collapseAll(undefined);\n\t\t\t\tevent.event.stopPropagation();\n\t\t\t\tevent.event.preventDefault();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._editors.original.onMouseUp(event => {\n\t\t\tif (!event.event.rightButton && event.target.position && event.target.element?.className.includes('fold-unchanged')) {\n\t\t\t\tconst lineNumber = event.target.position.lineNumber;\n\t\t\t\tconst model = this._diffModel.get();\n\t\t\t\tif (!model) { return; }\n\t\t\t\tconst region = model.unchangedRegions.get().find(r => r.originalUnchangedRange.includes(lineNumber));\n\t\t\t\tif (!region) { return; }\n\t\t\t\tregion.collapseAll(undefined);\n\t\t\t\tevent.event.stopPropagation();\n\t\t\t\tevent.event.preventDefault();\n\t\t\t}\n\t\t}));\n\t}\n}\n\nclass CompactCollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n\tprivate readonly _nodes = h('div.diff-hidden-lines-compact', [\n\t\th('div.line-left', []),\n\t\th('div.text@text', []),\n\t\th('div.line-right', [])\n\t]);\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t_viewZone: PlaceholderViewZone,\n\t\tprivate readonly _unchangedRegion: UnchangedRegion,\n\t\tprivate readonly _hide: boolean = false,\n\t) {\n\t\tconst root = h('div.diff-hidden-lines-widget');\n\t\tsuper(editor, _viewZone, root.root);\n\t\troot.root.appendChild(this._nodes.root);\n\n\t\tif (this._hide) {\n\t\t\tthis._nodes.root.replaceChildren();\n\t\t}\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update labels */\n\n\t\t\tif (!this._hide) {\n\t\t\t\tconst lineCount = this._unchangedRegion.getHiddenModifiedRange(reader).length;\n\t\t\t\tconst linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\n\t\t\t\tthis._nodes.text.innerText = linesHiddenText;\n\t\t\t}\n\t\t}));\n\t}\n}\n\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n\tprivate readonly _nodes = h('div.diff-hidden-lines', [\n\t\th('div.top@top', { title: localize('diff.hiddenLines.top', 'Click or drag to show more above') }),\n\t\th('div.center@content', { style: { display: 'flex' } }, [\n\t\t\th('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center', flexShrink: '0' } },\n\t\t\t\t[$('a', { title: localize('showUnchangedRegion', 'Show Unchanged Region'), role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } },\n\t\t\t\t\t...renderLabelWithIcons('$(unfold)'))]\n\t\t\t),\n\t\t\th('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\n\t\t]),\n\t\th('div.bottom@bottom', { title: localize('diff.bottom', 'Click or drag to show more below'), role: 'button' }),\n\t]);\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t_viewZone: PlaceholderViewZone,\n\t\tprivate readonly _unchangedRegion: UnchangedRegion,\n\t\tprivate readonly _unchangedRegionRange: LineRange,\n\t\tprivate readonly _hide: boolean,\n\t\tprivate readonly _modifiedOutlineSource: IDiffEditorBreadcrumbsSource,\n\t\tprivate readonly _revealModifiedHiddenLine: (lineNumber: number) => void,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t) {\n\t\tconst root = h('div.diff-hidden-lines-widget');\n\t\tsuper(_editor, _viewZone, root.root);\n\t\troot.root.appendChild(this._nodes.root);\n\n\t\tif (!this._hide) {\n\t\t\tthis._register(applyStyle(this._nodes.first, { width: observableCodeEditor(this._editor).layoutInfoContentLeft }));\n\t\t} else {\n\t\t\treset(this._nodes.first);\n\t\t}\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description Update CollapsedCodeOverlayWidget canMove* css classes */\n\t\t\tconst isFullyRevealed = this._unchangedRegion.visibleLineCountTop.read(reader) + this._unchangedRegion.visibleLineCountBottom.read(reader) === this._unchangedRegion.lineCount;\n\n\t\t\tthis._nodes.bottom.classList.toggle('canMoveTop', !isFullyRevealed);\n\t\t\tthis._nodes.bottom.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\n\t\t\tthis._nodes.top.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\n\t\t\tthis._nodes.top.classList.toggle('canMoveBottom', !isFullyRevealed);\n\t\t\tconst isDragged = this._unchangedRegion.isDragged.read(reader);\n\t\t\tconst domNode = this._editor.getDomNode();\n\t\t\tif (domNode) {\n\t\t\t\tdomNode.classList.toggle('draggingUnchangedRegion', !!isDragged);\n\t\t\t\tif (isDragged === 'top') {\n\t\t\t\t\tdomNode.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\n\t\t\t\t\tdomNode.classList.toggle('canMoveBottom', !isFullyRevealed);\n\t\t\t\t} else if (isDragged === 'bottom') {\n\t\t\t\t\tdomNode.classList.toggle('canMoveTop', !isFullyRevealed);\n\t\t\t\t\tdomNode.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\n\t\t\t\t} else {\n\t\t\t\t\tdomNode.classList.toggle('canMoveTop', false);\n\t\t\t\t\tdomNode.classList.toggle('canMoveBottom', false);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tconst editor = this._editor;\n\n\t\tthis._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n\t\t\tif (e.button !== 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._nodes.top.classList.toggle('dragging', true);\n\t\t\tthis._nodes.root.classList.toggle('dragging', true);\n\t\t\te.preventDefault();\n\t\t\tconst startTop = e.clientY;\n\t\t\tlet didMove = false;\n\t\t\tconst cur = this._unchangedRegion.visibleLineCountTop.get();\n\t\t\tthis._unchangedRegion.isDragged.set('top', undefined);\n\n\t\t\tconst window = getWindow(this._nodes.top);\n\n\t\t\tconst mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n\t\t\t\tconst currentTop = e.clientY;\n\t\t\t\tconst delta = currentTop - startTop;\n\t\t\t\tdidMove = didMove || Math.abs(delta) > 2;\n\t\t\t\tconst lineDelta = Math.round(delta / editor.getOption(EditorOption.lineHeight));\n\t\t\t\tconst newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n\t\t\t\tthis._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n\t\t\t});\n\n\t\t\tconst mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n\t\t\t\tif (!didMove) {\n\t\t\t\t\tthis._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n\t\t\t\t}\n\t\t\t\tthis._nodes.top.classList.toggle('dragging', false);\n\t\t\t\tthis._nodes.root.classList.toggle('dragging', false);\n\t\t\t\tthis._unchangedRegion.isDragged.set(undefined, undefined);\n\t\t\t\tmouseMoveListener.dispose();\n\t\t\t\tmouseUpListener.dispose();\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n\t\t\tif (e.button !== 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._nodes.bottom.classList.toggle('dragging', true);\n\t\t\tthis._nodes.root.classList.toggle('dragging', true);\n\t\t\te.preventDefault();\n\t\t\tconst startTop = e.clientY;\n\t\t\tlet didMove = false;\n\t\t\tconst cur = this._unchangedRegion.visibleLineCountBottom.get();\n\t\t\tthis._unchangedRegion.isDragged.set('bottom', undefined);\n\n\t\t\tconst window = getWindow(this._nodes.bottom);\n\n\t\t\tconst mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n\t\t\t\tconst currentTop = e.clientY;\n\t\t\t\tconst delta = currentTop - startTop;\n\t\t\t\tdidMove = didMove || Math.abs(delta) > 2;\n\t\t\t\tconst lineDelta = Math.round(delta / editor.getOption(EditorOption.lineHeight));\n\t\t\t\tconst newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n\t\t\t\tconst top = this._unchangedRegionRange.endLineNumberExclusive > editor.getModel()!.getLineCount()\n\t\t\t\t\t? editor.getContentHeight()\n\t\t\t\t\t: editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n\t\t\t\tthis._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n\t\t\t\tconst top2 = this._unchangedRegionRange.endLineNumberExclusive > editor.getModel()!.getLineCount()\n\t\t\t\t\t? editor.getContentHeight()\n\t\t\t\t\t: editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n\t\t\t\teditor.setScrollTop(editor.getScrollTop() + (top2 - top));\n\t\t\t});\n\n\t\t\tconst mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n\t\t\t\tthis._unchangedRegion.isDragged.set(undefined, undefined);\n\n\t\t\t\tif (!didMove) {\n\t\t\t\t\tconst top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n\n\t\t\t\t\tthis._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n\t\t\t\t\tconst top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n\t\t\t\t\teditor.setScrollTop(editor.getScrollTop() + (top2 - top));\n\t\t\t\t}\n\t\t\t\tthis._nodes.bottom.classList.toggle('dragging', false);\n\t\t\t\tthis._nodes.root.classList.toggle('dragging', false);\n\t\t\t\tmouseMoveListener.dispose();\n\t\t\t\tmouseUpListener.dispose();\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update labels */\n\n\t\t\tconst children: HTMLElement[] = [];\n\t\t\tif (!this._hide) {\n\t\t\t\tconst lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n\t\t\t\tconst linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\n\t\t\t\tconst span = $('span', { title: localize('diff.hiddenLines.expandAll', 'Double click to unfold') }, linesHiddenText);\n\t\t\t\tspan.addEventListener('dblclick', e => {\n\t\t\t\t\tif (e.button !== 0) { return; }\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis._unchangedRegion.showAll(undefined);\n\t\t\t\t});\n\t\t\t\tchildren.push(span);\n\n\t\t\t\tconst range = this._unchangedRegion.getHiddenModifiedRange(reader);\n\t\t\t\tconst items = this._modifiedOutlineSource.getBreadcrumbItems(range, reader);\n\n\t\t\t\tif (items.length > 0) {\n\t\t\t\t\tchildren.push($('span', undefined, '\\u00a0\\u00a0|\\u00a0\\u00a0'));\n\n\t\t\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\t\t\tconst item = items[i];\n\t\t\t\t\t\tconst icon = SymbolKinds.toIcon(item.kind);\n\t\t\t\t\t\tconst divItem = h('div.breadcrumb-item', {\n\t\t\t\t\t\t\tstyle: { display: 'flex', alignItems: 'center' },\n\t\t\t\t\t\t}, [\n\t\t\t\t\t\t\trenderIcon(icon),\n\t\t\t\t\t\t\t'\\u00a0',\n\t\t\t\t\t\t\titem.name,\n\t\t\t\t\t\t\t...(i === items.length - 1\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [renderIcon(Codicon.chevronRight)]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]).root;\n\t\t\t\t\t\tchildren.push(divItem);\n\t\t\t\t\t\tdivItem.onclick = () => {\n\t\t\t\t\t\t\tthis._revealModifiedHiddenLine(item.startLineNumber);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treset(this._nodes.others, ...children);\n\t\t}));\n\t}\n}\n\nexport interface IDiffEditorBreadcrumbsSource extends IDisposable {\n\tgetBreadcrumbItems(startRange: LineRange, reader: IReader): { name: string; kind: SymbolKind; startLineNumber: number }[];\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,GAAG,uBAAuB,WAAW,GAAG,aAAa;AAC9D,SAAS,YAAY,4BAA4B;AACjD,SAAS,eAAe;AACxB,SAAS,sBAAsB;AAC/B,SAAS,YAAY,mBAAmB;AACxC,SAAS,aAAa,SAAS,SAAS,SAAS,mBAAmB,kBAAkB,iBAAiB,mBAAmB;AAC1H,SAAS,iBAAiB;AAC1B,SAAS,iBAAiB;AAC1B,SAAS,gBAAgB;AACzB,SAAS,6BAA6B;AACtC,SAAS,oBAAoB;AAC7B,SAAS,iBAAiB;AAC1B,SAAS,gBAAgB;AACzB,SAAS,aAAa;AACtB,SAAS,0BAA0B;AACnC,SAAS,YAAY,mBAAmB;AACxC,SAAS,yBAAyB,uBAAuB,kBAAkB;AAC3E,SAAS,mBAAmB;AAC5B,SAAS,4BAA4B;AACrC,SAAS,yBAAyB;AAClC,SAAS,yBAAyB;AAClC,SAAS,qBAAqB,kBAAkB,uBAAuB;AACvE,SAAS,qBAAqB,qBAAqB,uBAAuB,4BAA4B,kBAAkB;AAKjH,IAAM,8BAAN,cAA0C,WAAW;AAAA,EA2B3D,YACkB,UACA,YACA,UACuB,uBACvC;AACD,UAAM;AALW;AACA;AACA;AACuB;AAIxC,SAAK,UAAU,KAAK,SAAS,SAAS,0BAA0B,OAAK;AACpE,UAAI,EAAE,WAAW,mBAAmB,cAAc;AAAE;AAAA,MAAQ;AAC5D,YAAM,IAAI,KAAK,WAAW,IAAI;AAC9B,kBAAY,QAAM;AACjB,mBAAW,KAAK,KAAK,SAAS,SAAS,cAAc,KAAK,CAAC,GAAG;AAC7D,aAAG,4BAA4B,EAAE,iBAAiB,EAAE,YAAY,iBAAiB,gBAAgB,EAAE;AACnG,aAAG,4BAA4B,EAAE,eAAe,EAAE,YAAY,iBAAiB,gBAAgB,EAAE;AAAA,QAClG;AAAA,MACD,CAAC;AAAA,IACF,CAAC,CAAC;AAEF,SAAK,UAAU,KAAK,SAAS,SAAS,0BAA0B,OAAK;AACpE,UAAI,EAAE,WAAW,mBAAmB,cAAc;AAAE;AAAA,MAAQ;AAC5D,YAAM,IAAI,KAAK,WAAW,IAAI;AAC9B,kBAAY,QAAM;AACjB,mBAAW,KAAK,KAAK,SAAS,SAAS,cAAc,KAAK,CAAC,GAAG;AAC7D,aAAG,4BAA4B,EAAE,iBAAiB,EAAE,YAAY,iBAAiB,gBAAgB,EAAE;AACnG,aAAG,4BAA4B,EAAE,eAAe,EAAE,YAAY,iBAAiB,gBAAgB,EAAE;AAAA,QAClG;AAAA,MACD,CAAC;AAAA,IACF,CAAC,CAAC;AAEF,UAAM,mBAAmB,KAAK,WAAW,IAAI,CAAC,GAAG,WAAW;AAC3D,YAAM,UAAU,GAAG,iBAAiB,KAAK,MAAM,KAAK,CAAC;AACrD,UAAI,QAAQ,WAAW,KAAK,QAAQ,CAAC,EAAE,uBAAuB,KAAK,QAAQ,CAAC,EAAE,cAAc,KAAK,SAAS,cAAc,KAAK,MAAM,GAAG,aAAa,GAAG;AACrJ,eAAO,CAAC;AAAA,MACT;AACA,aAAO;AAAA,IACR,CAAC;AAED,SAAK,YAAY,iBAAiB,MAAM,CAAC,QAAQ,UAAU;AAE1D,YAAM,wBAAwB,KAAK,uBAAuB,KAAK,MAAM;AACrE,UAAI,CAAC,uBAAuB;AAAE,eAAO,EAAE,eAAe,CAAC,GAAG,cAAc,CAAC,EAAE;AAAA,MAAG;AAE9E,YAAM,gBAAuC,CAAC;AAC9C,YAAM,eAAsC,CAAC;AAC7C,YAAM,aAAa,KAAK,SAAS,iBAAiB,KAAK,MAAM;AAE7D,YAAM,cAAc,KAAK,SAAS,YAAY,KAAK,MAAM;AAEzD,YAAM,sBAAsB,iBAAiB,KAAK,MAAM;AACxD,eAAS,IAAI,GAAG,IAAI,oBAAoB,QAAQ,KAAK;AACpD,cAAM,IAAI,oBAAoB,CAAC;AAC/B,YAAI,EAAE,mBAAmB,MAAM,GAAG;AACjC;AAAA,QACD;AAEA,YAAI,gBAAgB,MAAM,KAAK,MAAM,oBAAoB,SAAS,IAAI;AACrE;AAAA,QACD;AAEA,YAAI,aAAa;AAChB;AACC,kBAAM,IAAI,QAAQ,MAAM,CAAAA;AAAA;AAAA,cAAuD,EAAE,uBAAuBA,OAAM,EAAE,kBAAkB;AAAA,aAAC;AACnI,kBAAM,SAAS,IAAI,oBAAoB,GAAG,EAAE;AAC5C,0BAAc,KAAK,MAAM;AACzB,kBAAM,IAAI,IAAI;AAAA,cACb,KAAK,SAAS;AAAA,cACd;AAAA,cACA;AAAA,cACA,CAAC;AAAA,YACF,CAAC;AAAA,UACF;AACA;AACC,kBAAM,IAAI,QAAQ,MAAM,CAAAA;AAAA;AAAA,cAAuD,EAAE,uBAAuBA,OAAM,EAAE,kBAAkB;AAAA,aAAC;AACnI,kBAAM,cAAc,IAAI,oBAAoB,GAAG,EAAE;AACjD,yBAAa,KAAK,WAAW;AAC7B,kBAAM,IAAI,IAAI;AAAA,cACb,KAAK,SAAS;AAAA,cACd;AAAA,cACA;AAAA,YACD,CAAC;AAAA,UACF;AAAA,QACD,OAAO;AACN;AACC,kBAAM,IAAI,QAAQ,MAAM,CAAAA;AAAA;AAAA,cAAuD,EAAE,uBAAuBA,OAAM,EAAE,kBAAkB;AAAA,aAAC;AACnI,kBAAM,SAAS,IAAI,oBAAoB,GAAG,EAAE;AAC5C,0BAAc,KAAK,MAAM;AACzB,kBAAM,IAAI,IAAI;AAAA,cACb,KAAK,SAAS;AAAA,cACd;AAAA,cACA;AAAA,cACA,EAAE;AAAA,cACF,CAAC;AAAA,cACD;AAAA,cACA,OAAK,KAAK,WAAW,IAAI,EAAG,4BAA4B,GAAG,iBAAiB,YAAY,MAAS;AAAA,cACjG,KAAK;AAAA,YACN,CAAC;AAAA,UACF;AACA;AACC,kBAAM,IAAI,QAAQ,MAAM,CAAAA;AAAA;AAAA,cAAuD,EAAE,uBAAuBA,OAAM,EAAE,kBAAkB;AAAA,aAAC;AACnI,kBAAM,cAAc,IAAI,oBAAoB,GAAG,EAAE;AACjD,yBAAa,KAAK,WAAW;AAC7B,kBAAM,IAAI,IAAI;AAAA,cACb,KAAK,SAAS;AAAA,cACd;AAAA,cACA;AAAA,cACA,EAAE;AAAA,cACF;AAAA,cACA;AAAA,cACA,OAAK,KAAK,WAAW,IAAI,EAAG,4BAA4B,GAAG,iBAAiB,YAAY,MAAS;AAAA,cACjG,KAAK;AAAA,YACN,CAAC;AAAA,UACF;AAAA,QACD;AAAA,MACD;AAEA,aAAO,EAAE,eAAe,aAAc;AAAA,IACvC,CAAC;AAGD,UAAM,2BAAoD;AAAA,MACzD,aAAa;AAAA,MACb,WAAW;AAAA,MACX,aAAa;AAAA,IACd;AACA,UAAM,+BAAwD;AAAA,MAC7D,aAAa;AAAA,MACb,yBAAyB,IAAI,eAAe,QAAW,EAAE,WAAW,MAAM,mBAAmB,KAAK,CAAC,EACjG,eAAe,SAAS,iBAAiB,uBAAuB,CAAC;AAAA,MACnE,sBAAsB,oBAAoB,UAAU,YAAY,QAAQ,IAAI;AAAA,MAC5E,QAAQ;AAAA,IACT;AAEA,SAAK,UAAU,2BAA2B,KAAK,SAAS,UAAU,QAAQ,MAAM,YAAU;AAEzF,YAAM,sBAAsB,iBAAiB,KAAK,MAAM;AACxD,YAAM,SAAS,oBAAoB,IAA2B,QAAM;AAAA,QACnE,OAAO,EAAE,uBAAuB,iBAAiB;AAAA,QACjD,SAAS;AAAA,MACV,EAAE;AACF,iBAAW,KAAK,qBAAqB;AACpC,YAAI,EAAE,mBAAmB,MAAM,GAAG;AACjC,iBAAO,KAAK;AAAA,YACX,OAAO,MAAM,cAAc,IAAI,SAAS,EAAE,oBAAoB,CAAC,CAAC;AAAA,YAChE,SAAS;AAAA,UACV,CAAC;AAAA,QACF;AAAA,MACD;AACA,aAAO;AAAA,IACR,CAAC,CAAC,CAAC;AAEH,SAAK,UAAU,2BAA2B,KAAK,SAAS,UAAU,QAAQ,MAAM,YAAU;AAEzF,YAAM,sBAAsB,iBAAiB,KAAK,MAAM;AACxD,YAAM,SAAS,oBAAoB,IAA2B,QAAM;AAAA,QACnE,OAAO,EAAE,uBAAuB,iBAAiB;AAAA,QACjD,SAAS;AAAA,MACV,EAAE;AACF,iBAAW,KAAK,qBAAqB;AACpC,YAAI,EAAE,mBAAmB,MAAM,GAAG;AACjC,iBAAO,KAAK;AAAA,YACX,OAAO,UAAU,SAAS,EAAE,oBAAoB,CAAC,EAAE,iBAAiB;AAAA,YACpE,SAAS;AAAA,UACV,CAAC;AAAA,QACF;AAAA,MACD;AACA,aAAO;AAAA,IACR,CAAC,CAAC,CAAC;AAEH,SAAK,UAAU,QAAQ,CAAC,WAAW;AAElC,YAAM,sBAAsB,iBAAiB,KAAK,MAAM;AACxD,WAAK,yBAAyB;AAC9B,UAAI;AACH,aAAK,SAAS,SAAS,eAAe,oBAAoB,IAAI,OAAK,EAAE,uBAAuB,MAAM,EAAE,iBAAiB,CAAC,EAAE,OAAO,SAAS,CAAC;AACzI,aAAK,SAAS,SAAS,eAAe,oBAAoB,IAAI,OAAK,EAAE,uBAAuB,MAAM,EAAE,iBAAiB,CAAC,EAAE,OAAO,SAAS,CAAC;AAAA,MAC1I,UAAE;AACD,aAAK,yBAAyB;AAAA,MAC/B;AAAA,IACD,CAAC,CAAC;AAEF,SAAK,UAAU,KAAK,SAAS,SAAS,UAAU,WAAS;AACxD,UAAI,CAAC,MAAM,MAAM,eAAe,MAAM,OAAO,YAAY,MAAM,OAAO,SAAS,UAAU,SAAS,gBAAgB,GAAG;AACpH,cAAM,aAAa,MAAM,OAAO,SAAS;AACzC,cAAM,QAAQ,KAAK,WAAW,IAAI;AAClC,YAAI,CAAC,OAAO;AAAE;AAAA,QAAQ;AACtB,cAAM,SAAS,MAAM,iBAAiB,IAAI,EAAE,KAAK,OAAK,EAAE,uBAAuB,SAAS,UAAU,CAAC;AACnG,YAAI,CAAC,QAAQ;AAAE;AAAA,QAAQ;AACvB,eAAO,YAAY,MAAS;AAC5B,cAAM,MAAM,gBAAgB;AAC5B,cAAM,MAAM,eAAe;AAAA,MAC5B;AAAA,IACD,CAAC,CAAC;AAEF,SAAK,UAAU,KAAK,SAAS,SAAS,UAAU,WAAS;AACxD,UAAI,CAAC,MAAM,MAAM,eAAe,MAAM,OAAO,YAAY,MAAM,OAAO,SAAS,UAAU,SAAS,gBAAgB,GAAG;AACpH,cAAM,aAAa,MAAM,OAAO,SAAS;AACzC,cAAM,QAAQ,KAAK,WAAW,IAAI;AAClC,YAAI,CAAC,OAAO;AAAE;AAAA,QAAQ;AACtB,cAAM,SAAS,MAAM,iBAAiB,IAAI,EAAE,KAAK,OAAK,EAAE,uBAAuB,SAAS,UAAU,CAAC;AACnG,YAAI,CAAC,QAAQ;AAAE;AAAA,QAAQ;AACvB,eAAO,YAAY,MAAS;AAC5B,cAAM,MAAM,gBAAgB;AAC5B,cAAM,MAAM,eAAe;AAAA,MAC5B;AAAA,IACD,CAAC,CAAC;AAAA,EACH;AAAA,EAzQD,OAgC4D;AAAA;AAAA;AAAA,EAC3D,OAAwB,4BAA4B;AAAA,IACnD;AAAA,IAA6B,OAAO;AAAA,MACnC,UAAU;AAAA,MACV;AAAA,MACA,mBAAmB,YAAY,QAAQ;AACtC,eAAO,CAAC;AAAA,MACT;AAAA,IACD;AAAA,EAAE;AAAA,EACH,OAAc,4BAA4B,SAA+G;AACxJ,SAAK,0BAA0B,IAAI,SAAS,MAAS;AAAA,EACtD;AAAA,EAEiB,yBAAyB,kBAAkB,MAAM,CAAC,WAAW;AAC7E,UAAM,IAAI,KAAK,SAAS,cAAc,KAAK,MAAM;AACjD,UAAM,UAAU,4BAA4B,0BAA0B,KAAK,MAAM;AACjF,WAAQ,CAAC,KAAK,CAAC,UAAW,SAAY,QAAQ,GAAG,KAAK,qBAAqB;AAAA,EAC5E,CAAC;AAAA,EAEe;AAAA,EAKR,yBAAyB;AAAA,EACjC,IAAW,wBAAwB;AAAE,WAAO,KAAK;AAAA,EAAwB;AAiN1E;AA1Oa,8BAAN;AAAA,EA+BJ;AAAA,GA/BU;AA4Ob,MAAM,0CAA0C,sBAAsB;AAAA,EAOrE,YACC,QACA,WACiB,kBACA,QAAiB,OACjC;AACD,UAAM,OAAO,EAAE,8BAA8B;AAC7C,UAAM,QAAQ,WAAW,KAAK,IAAI;AAJjB;AACA;AAIjB,SAAK,KAAK,YAAY,KAAK,OAAO,IAAI;AAEtC,QAAI,KAAK,OAAO;AACf,WAAK,OAAO,KAAK,gBAAgB;AAAA,IAClC;AAEA,SAAK,UAAU,QAAQ,YAAU;AAGhC,UAAI,CAAC,KAAK,OAAO;AAChB,cAAM,YAAY,KAAK,iBAAiB,uBAAuB,MAAM,EAAE;AACvE,cAAM,kBAAkB,SAAS,eAAe,oBAAoB,SAAS;AAC7E,aAAK,OAAO,KAAK,YAAY;AAAA,MAC9B;AAAA,IACD,CAAC,CAAC;AAAA,EACH;AAAA,EA1SD,OA4QsE;AAAA;AAAA;AAAA,EACpD,SAAS,EAAE,iCAAiC;AAAA,IAC5D,EAAE,iBAAiB,CAAC,CAAC;AAAA,IACrB,EAAE,iBAAiB,CAAC,CAAC;AAAA,IACrB,EAAE,kBAAkB,CAAC,CAAC;AAAA,EACvB,CAAC;AA0BF;AAEA,MAAM,mCAAmC,sBAAsB;AAAA,EAa9D,YACkB,SACjB,WACiB,kBACA,uBACA,OACA,wBACA,2BACA,UAChB;AACD,UAAM,OAAO,EAAE,8BAA8B;AAC7C,UAAM,SAAS,WAAW,KAAK,IAAI;AAVlB;AAEA;AACA;AACA;AACA;AACA;AACA;AAIjB,SAAK,KAAK,YAAY,KAAK,OAAO,IAAI;AAEtC,QAAI,CAAC,KAAK,OAAO;AAChB,WAAK,UAAU,WAAW,KAAK,OAAO,OAAO,EAAE,OAAO,qBAAqB,KAAK,OAAO,EAAE,sBAAsB,CAAC,CAAC;AAAA,IAClH,OAAO;AACN,YAAM,KAAK,OAAO,KAAK;AAAA,IACxB;AAEA,SAAK,UAAU,QAAQ,YAAU;AAEhC,YAAM,kBAAkB,KAAK,iBAAiB,oBAAoB,KAAK,MAAM,IAAI,KAAK,iBAAiB,uBAAuB,KAAK,MAAM,MAAM,KAAK,iBAAiB;AAErK,WAAK,OAAO,OAAO,UAAU,OAAO,cAAc,CAAC,eAAe;AAClE,WAAK,OAAO,OAAO,UAAU,OAAO,iBAAiB,KAAK,iBAAiB,uBAAuB,KAAK,MAAM,IAAI,CAAC;AAClH,WAAK,OAAO,IAAI,UAAU,OAAO,cAAc,KAAK,iBAAiB,oBAAoB,KAAK,MAAM,IAAI,CAAC;AACzG,WAAK,OAAO,IAAI,UAAU,OAAO,iBAAiB,CAAC,eAAe;AAClE,YAAM,YAAY,KAAK,iBAAiB,UAAU,KAAK,MAAM;AAC7D,YAAM,UAAU,KAAK,QAAQ,WAAW;AACxC,UAAI,SAAS;AACZ,gBAAQ,UAAU,OAAO,2BAA2B,CAAC,CAAC,SAAS;AAC/D,YAAI,cAAc,OAAO;AACxB,kBAAQ,UAAU,OAAO,cAAc,KAAK,iBAAiB,oBAAoB,KAAK,MAAM,IAAI,CAAC;AACjG,kBAAQ,UAAU,OAAO,iBAAiB,CAAC,eAAe;AAAA,QAC3D,WAAW,cAAc,UAAU;AAClC,kBAAQ,UAAU,OAAO,cAAc,CAAC,eAAe;AACvD,kBAAQ,UAAU,OAAO,iBAAiB,KAAK,iBAAiB,uBAAuB,KAAK,MAAM,IAAI,CAAC;AAAA,QACxG,OAAO;AACN,kBAAQ,UAAU,OAAO,cAAc,KAAK;AAC5C,kBAAQ,UAAU,OAAO,iBAAiB,KAAK;AAAA,QAChD;AAAA,MACD;AAAA,IACD,CAAC,CAAC;AAEF,UAAM,SAAS,KAAK;AAEpB,SAAK,UAAU,sBAAsB,KAAK,OAAO,KAAK,aAAa,OAAK;AACvE,UAAI,EAAE,WAAW,GAAG;AACnB;AAAA,MACD;AACA,WAAK,OAAO,IAAI,UAAU,OAAO,YAAY,IAAI;AACjD,WAAK,OAAO,KAAK,UAAU,OAAO,YAAY,IAAI;AAClD,QAAE,eAAe;AACjB,YAAM,WAAW,EAAE;AACnB,UAAI,UAAU;AACd,YAAM,MAAM,KAAK,iBAAiB,oBAAoB,IAAI;AAC1D,WAAK,iBAAiB,UAAU,IAAI,OAAO,MAAS;AAEpD,YAAM,SAAS,UAAU,KAAK,OAAO,GAAG;AAExC,YAAM,oBAAoB,sBAAsB,QAAQ,aAAa,CAAAC,OAAK;AACzE,cAAM,aAAaA,GAAE;AACrB,cAAM,QAAQ,aAAa;AAC3B,kBAAU,WAAW,KAAK,IAAI,KAAK,IAAI;AACvC,cAAM,YAAY,KAAK,MAAM,QAAQ,OAAO,UAAU,aAAa,UAAU,CAAC;AAC9E,cAAM,SAAS,KAAK,IAAI,GAAG,KAAK,IAAI,MAAM,WAAW,KAAK,iBAAiB,0BAA0B,CAAC,CAAC;AACvG,aAAK,iBAAiB,oBAAoB,IAAI,QAAQ,MAAS;AAAA,MAChE,CAAC;AAED,YAAM,kBAAkB,sBAAsB,QAAQ,WAAW,CAAAA,OAAK;AACrE,YAAI,CAAC,SAAS;AACb,eAAK,iBAAiB,cAAc,KAAK,SAAS,oCAAoC,IAAI,GAAG,MAAS;AAAA,QACvG;AACA,aAAK,OAAO,IAAI,UAAU,OAAO,YAAY,KAAK;AAClD,aAAK,OAAO,KAAK,UAAU,OAAO,YAAY,KAAK;AACnD,aAAK,iBAAiB,UAAU,IAAI,QAAW,MAAS;AACxD,0BAAkB,QAAQ;AAC1B,wBAAgB,QAAQ;AAAA,MACzB,CAAC;AAAA,IACF,CAAC,CAAC;AAEF,SAAK,UAAU,sBAAsB,KAAK,OAAO,QAAQ,aAAa,OAAK;AAC1E,UAAI,EAAE,WAAW,GAAG;AACnB;AAAA,MACD;AACA,WAAK,OAAO,OAAO,UAAU,OAAO,YAAY,IAAI;AACpD,WAAK,OAAO,KAAK,UAAU,OAAO,YAAY,IAAI;AAClD,QAAE,eAAe;AACjB,YAAM,WAAW,EAAE;AACnB,UAAI,UAAU;AACd,YAAM,MAAM,KAAK,iBAAiB,uBAAuB,IAAI;AAC7D,WAAK,iBAAiB,UAAU,IAAI,UAAU,MAAS;AAEvD,YAAM,SAAS,UAAU,KAAK,OAAO,MAAM;AAE3C,YAAM,oBAAoB,sBAAsB,QAAQ,aAAa,CAAAA,OAAK;AACzE,cAAM,aAAaA,GAAE;AACrB,cAAM,QAAQ,aAAa;AAC3B,kBAAU,WAAW,KAAK,IAAI,KAAK,IAAI;AACvC,cAAM,YAAY,KAAK,MAAM,QAAQ,OAAO,UAAU,aAAa,UAAU,CAAC;AAC9E,cAAM,SAAS,KAAK,IAAI,GAAG,KAAK,IAAI,MAAM,WAAW,KAAK,iBAAiB,6BAA6B,CAAC,CAAC;AAC1G,cAAM,MAAM,KAAK,sBAAsB,yBAAyB,OAAO,SAAS,EAAG,aAAa,IAC7F,OAAO,iBAAiB,IACxB,OAAO,oBAAoB,KAAK,sBAAsB,sBAAsB;AAC/E,aAAK,iBAAiB,uBAAuB,IAAI,QAAQ,MAAS;AAClE,cAAM,OAAO,KAAK,sBAAsB,yBAAyB,OAAO,SAAS,EAAG,aAAa,IAC9F,OAAO,iBAAiB,IACxB,OAAO,oBAAoB,KAAK,sBAAsB,sBAAsB;AAC/E,eAAO,aAAa,OAAO,aAAa,KAAK,OAAO,IAAI;AAAA,MACzD,CAAC;AAED,YAAM,kBAAkB,sBAAsB,QAAQ,WAAW,CAAAA,OAAK;AACrE,aAAK,iBAAiB,UAAU,IAAI,QAAW,MAAS;AAExD,YAAI,CAAC,SAAS;AACb,gBAAM,MAAM,OAAO,oBAAoB,KAAK,sBAAsB,sBAAsB;AAExF,eAAK,iBAAiB,cAAc,KAAK,SAAS,oCAAoC,IAAI,GAAG,MAAS;AACtG,gBAAM,OAAO,OAAO,oBAAoB,KAAK,sBAAsB,sBAAsB;AACzF,iBAAO,aAAa,OAAO,aAAa,KAAK,OAAO,IAAI;AAAA,QACzD;AACA,aAAK,OAAO,OAAO,UAAU,OAAO,YAAY,KAAK;AACrD,aAAK,OAAO,KAAK,UAAU,OAAO,YAAY,KAAK;AACnD,0BAAkB,QAAQ;AAC1B,wBAAgB,QAAQ;AAAA,MACzB,CAAC;AAAA,IACF,CAAC,CAAC;AAEF,SAAK,UAAU,QAAQ,YAAU;AAGhC,YAAM,WAA0B,CAAC;AACjC,UAAI,CAAC,KAAK,OAAO;AAChB,cAAM,YAAY,iBAAiB,uBAAuB,MAAM,EAAE;AAClE,cAAM,kBAAkB,SAAS,eAAe,oBAAoB,SAAS;AAC7E,cAAM,OAAO,EAAE,QAAQ,EAAE,OAAO,SAAS,8BAA8B,wBAAwB,EAAE,GAAG,eAAe;AACnH,aAAK,iBAAiB,YAAY,OAAK;AACtC,cAAI,EAAE,WAAW,GAAG;AAAE;AAAA,UAAQ;AAC9B,YAAE,eAAe;AACjB,eAAK,iBAAiB,QAAQ,MAAS;AAAA,QACxC,CAAC;AACD,iBAAS,KAAK,IAAI;AAElB,cAAM,QAAQ,KAAK,iBAAiB,uBAAuB,MAAM;AACjE,cAAM,QAAQ,KAAK,uBAAuB,mBAAmB,OAAO,MAAM;AAE1E,YAAI,MAAM,SAAS,GAAG;AACrB,mBAAS,KAAK,EAAE,QAAQ,QAAW,mBAA2B,CAAC;AAE/D,mBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,kBAAM,OAAO,MAAM,CAAC;AACpB,kBAAM,OAAO,YAAY,OAAO,KAAK,IAAI;AACzC,kBAAM,UAAU,EAAE,uBAAuB;AAAA,cACxC,OAAO,EAAE,SAAS,QAAQ,YAAY,SAAS;AAAA,YAChD,GAAG;AAAA,cACF,WAAW,IAAI;AAAA,cACf;AAAA,cACA,KAAK;AAAA,cACL,GAAI,MAAM,MAAM,SAAS,IACtB,CAAC,IACD,CAAC,WAAW,QAAQ,YAAY,CAAC;AAAA,YAErC,CAAC,EAAE;AACH,qBAAS,KAAK,OAAO;AACrB,oBAAQ,UAAU,MAAM;AACvB,mBAAK,0BAA0B,KAAK,eAAe;AAAA,YACpD;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAEA,YAAM,KAAK,OAAO,QAAQ,GAAG,QAAQ;AAAA,IACtC,CAAC,CAAC;AAAA,EACH;AAAA,EAxeD,OA6S+D;AAAA;AAAA;AAAA,EAC7C,SAAS,EAAE,yBAAyB;AAAA,IACpD,EAAE,eAAe,EAAE,OAAO,SAAS,wBAAwB,kCAAkC,EAAE,CAAC;AAAA,IAChG,EAAE,sBAAsB,EAAE,OAAO,EAAE,SAAS,OAAO,EAAE,GAAG;AAAA,MACvD;AAAA,QAAE;AAAA,QAAa,EAAE,OAAO,EAAE,SAAS,QAAQ,gBAAgB,UAAU,YAAY,UAAU,YAAY,IAAI,EAAE;AAAA,QAC5G,CAAC;AAAA,UAAE;AAAA,UAAK,EAAE,OAAO,SAAS,uBAAuB,uBAAuB,GAAG,MAAM,UAAU,SAAS,6BAAM;AAAE,iBAAK,iBAAiB,QAAQ,MAAS;AAAA,UAAG,GAAlD,WAAoD;AAAA,UACvJ,GAAG,qBAAqB,WAAW;AAAA,QAAC,CAAC;AAAA,MACvC;AAAA,MACA,EAAE,cAAc,EAAE,OAAO,EAAE,SAAS,QAAQ,gBAAgB,UAAU,YAAY,SAAS,EAAE,CAAC;AAAA,IAC/F,CAAC;AAAA,IACD,EAAE,qBAAqB,EAAE,OAAO,SAAS,eAAe,kCAAkC,GAAG,MAAM,SAAS,CAAC;AAAA,EAC9G,CAAC;AAiLF;",
  "names": ["reader", "e"]
}
