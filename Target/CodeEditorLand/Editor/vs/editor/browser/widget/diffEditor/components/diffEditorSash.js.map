{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/widget/diffEditor/components/diffEditorSash.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\ttype IBoundarySashes,\n\ttype ISashEvent,\n\tOrientation,\n\tSash,\n\tSashState,\n} from \"../../../../../base/browser/ui/sash/sash.js\";\nimport { Disposable } from \"../../../../../base/common/lifecycle.js\";\nimport {\n\ttype IObservable,\n\ttype IReader,\n\ttype ISettableObservable,\n\tautorun,\n\tderivedWithSetter,\n\tobservableValue,\n} from \"../../../../../base/common/observable.js\";\nimport type { DiffEditorOptions } from \"../diffEditorOptions.js\";\n\nexport class SashLayout {\n\tpublic readonly sashLeft = derivedWithSetter(\n\t\tthis,\n\t\t(reader) => {\n\t\t\tconst ratio =\n\t\t\t\tthis._sashRatio.read(reader) ??\n\t\t\t\tthis._options.splitViewDefaultRatio.read(reader);\n\t\t\treturn this._computeSashLeft(ratio, reader);\n\t\t},\n\t\t(value, tx) => {\n\t\t\tconst contentWidth = this.dimensions.width.get();\n\t\t\tthis._sashRatio.set(value / contentWidth, tx);\n\t\t},\n\t);\n\n\tprivate readonly _sashRatio = observableValue<number | undefined>(\n\t\tthis,\n\t\tundefined,\n\t);\n\n\tpublic resetSash(): void {\n\t\tthis._sashRatio.set(undefined, undefined);\n\t}\n\n\tconstructor(\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tpublic readonly dimensions: {\n\t\t\theight: IObservable<number>;\n\t\t\twidth: IObservable<number>;\n\t\t},\n\t) {}\n\n\t/** @pure */\n\tprivate _computeSashLeft(\n\t\tdesiredRatio: number,\n\t\treader: IReader | undefined,\n\t): number {\n\t\tconst contentWidth = this.dimensions.width.read(reader);\n\t\tconst midPoint = Math.floor(\n\t\t\tthis._options.splitViewDefaultRatio.read(reader) * contentWidth,\n\t\t);\n\t\tconst sashLeft = this._options.enableSplitViewResizing.read(reader)\n\t\t\t? Math.floor(desiredRatio * contentWidth)\n\t\t\t: midPoint;\n\n\t\tconst MINIMUM_EDITOR_WIDTH = 100;\n\t\tif (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n\t\t\treturn midPoint;\n\t\t}\n\t\tif (sashLeft < MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\tif (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn contentWidth - MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\treturn sashLeft;\n\t}\n}\n\nexport class DiffEditorSash extends Disposable {\n\tprivate readonly _sash = this._register(\n\t\tnew Sash(\n\t\t\tthis._domNode,\n\t\t\t{\n\t\t\t\tgetVerticalSashTop: (_sash: Sash): number => 0,\n\t\t\t\tgetVerticalSashLeft: (_sash: Sash): number =>\n\t\t\t\t\tthis.sashLeft.get(),\n\t\t\t\tgetVerticalSashHeight: (_sash: Sash): number =>\n\t\t\t\t\tthis._dimensions.height.get(),\n\t\t\t},\n\t\t\t{ orientation: Orientation.VERTICAL },\n\t\t),\n\t);\n\n\tprivate _startSashPosition: number | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly _domNode: HTMLElement,\n\t\tprivate readonly _dimensions: {\n\t\t\theight: IObservable<number>;\n\t\t\twidth: IObservable<number>;\n\t\t},\n\t\tprivate readonly _enabled: IObservable<boolean>,\n\t\tprivate readonly _boundarySashes: IObservable<\n\t\t\tIBoundarySashes | undefined,\n\t\t\tvoid\n\t\t>,\n\t\tpublic readonly sashLeft: ISettableObservable<number>,\n\t\tprivate readonly _resetSash: () => void,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(\n\t\t\tthis._sash.onDidStart(() => {\n\t\t\t\tthis._startSashPosition = this.sashLeft.get();\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._sash.onDidChange((e: ISashEvent) => {\n\t\t\t\tthis.sashLeft.set(\n\t\t\t\t\tthis._startSashPosition! + (e.currentX - e.startX),\n\t\t\t\t\tundefined,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t\tthis._register(this._sash.onDidEnd(() => this._sash.layout()));\n\t\tthis._register(this._sash.onDidReset(() => this._resetSash()));\n\n\t\tthis._register(\n\t\t\tautorun((reader) => {\n\t\t\t\tconst sashes = this._boundarySashes.read(reader);\n\t\t\t\tif (sashes) {\n\t\t\t\t\tthis._sash.orthogonalEndSash = sashes.bottom;\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tautorun((reader) => {\n\t\t\t\t/** @description DiffEditorSash.layoutSash */\n\t\t\t\tconst enabled = this._enabled.read(reader);\n\t\t\t\tthis._sash.state = enabled\n\t\t\t\t\t? SashState.Enabled\n\t\t\t\t\t: SashState.Disabled;\n\t\t\t\tthis.sashLeft.read(reader);\n\t\t\t\tthis._dimensions.height.read(reader);\n\t\t\t\tthis._sash.layout();\n\t\t\t}),\n\t\t);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
