{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/widget/diffEditor/components/diffEditorSash.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IBoundarySashes, ISashEvent, Orientation, Sash, SashState } from '../../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, IReader, ISettableObservable, autorun, derivedWithSetter, observableValue } from '../../../../../base/common/observable.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\n\nexport class SashLayout {\n\tpublic readonly sashLeft = derivedWithSetter(this, reader => {\n\t\tconst ratio = this._sashRatio.read(reader) ?? this._options.splitViewDefaultRatio.read(reader);\n\t\treturn this._computeSashLeft(ratio, reader);\n\t}, (value, tx) => {\n\t\tconst contentWidth = this.dimensions.width.get();\n\t\tthis._sashRatio.set(value / contentWidth, tx);\n\t});\n\n\tprivate readonly _sashRatio = observableValue<number | undefined>(this, undefined);\n\n\tpublic resetSash(): void {\n\t\tthis._sashRatio.set(undefined, undefined);\n\t}\n\n\tconstructor(\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tpublic readonly dimensions: { height: IObservable<number>; width: IObservable<number> },\n\t) {\n\t}\n\n\t/** @pure */\n\tprivate _computeSashLeft(desiredRatio: number, reader: IReader | undefined): number {\n\t\tconst contentWidth = this.dimensions.width.read(reader);\n\t\tconst midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n\t\tconst sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n\n\t\tconst MINIMUM_EDITOR_WIDTH = 100;\n\t\tif (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n\t\t\treturn midPoint;\n\t\t}\n\t\tif (sashLeft < MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\tif (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n\t\t\treturn contentWidth - MINIMUM_EDITOR_WIDTH;\n\t\t}\n\t\treturn sashLeft;\n\t}\n}\n\nexport class DiffEditorSash extends Disposable {\n\tprivate readonly _sash = this._register(new Sash(this._domNode, {\n\t\tgetVerticalSashTop: (_sash: Sash): number => 0,\n\t\tgetVerticalSashLeft: (_sash: Sash): number => this.sashLeft.get(),\n\t\tgetVerticalSashHeight: (_sash: Sash): number => this._dimensions.height.get(),\n\t}, { orientation: Orientation.VERTICAL }));\n\n\tprivate _startSashPosition: number | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly _domNode: HTMLElement,\n\t\tprivate readonly _dimensions: { height: IObservable<number>; width: IObservable<number> },\n\t\tprivate readonly _enabled: IObservable<boolean>,\n\t\tprivate readonly _boundarySashes: IObservable<IBoundarySashes | undefined, void>,\n\t\tpublic readonly sashLeft: ISettableObservable<number>,\n\t\tprivate readonly _resetSash: () => void,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._sash.onDidStart(() => {\n\t\t\tthis._startSashPosition = this.sashLeft.get();\n\t\t}));\n\t\tthis._register(this._sash.onDidChange((e: ISashEvent) => {\n\t\t\tthis.sashLeft.set(this._startSashPosition! + (e.currentX - e.startX), undefined);\n\t\t}));\n\t\tthis._register(this._sash.onDidEnd(() => this._sash.layout()));\n\t\tthis._register(this._sash.onDidReset(() => this._resetSash()));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst sashes = this._boundarySashes.read(reader);\n\t\t\tif (sashes) {\n\t\t\t\tthis._sash.orthogonalEndSash = sashes.bottom;\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description DiffEditorSash.layoutSash */\n\t\t\tconst enabled = this._enabled.read(reader);\n\t\t\tthis._sash.state = enabled ? SashState.Enabled : SashState.Disabled;\n\t\t\tthis.sashLeft.read(reader);\n\t\t\tthis._dimensions.height.read(reader);\n\t\t\tthis._sash.layout();\n\t\t}));\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
