import{getActiveWindow as s}from"../../../base/browser/dom.js";import{createFastDomNode as t}from"../../../base/browser/fastDomNode.js";import{Emitter as n}from"../../../base/common/event.js";import{Disposable as o}from"../../../base/common/lifecycle.js";import{GPULifecycle as a}from"./gpuDisposable.js";import{ensureNonNullable as r,observeDevicePixelDimensions as m}from"./gpuUtils.js";class p extends o{canvas;ctx;device;_onDidChangeCanvasDevicePixelDimensions=this._register(new n);onDidChangeCanvasDevicePixelDimensions=this._onDidChangeCanvasDevicePixelDimensions.event;constructor(){super(),this.canvas=t(document.createElement("canvas")),this.canvas.setClassName("editorCanvas"),this.ctx=r(this.canvas.domNode.getContext("webgpu")),this.device=a.requestDevice().then(e=>this._register(e).object),this._register(m(this.canvas.domNode,s(),(e,i)=>{this.canvas.domNode.width=e,this.canvas.domNode.height=i,this._onDidChangeCanvasDevicePixelDimensions.fire({width:e,height:i})}))}}export{p as ViewGpuContext};
