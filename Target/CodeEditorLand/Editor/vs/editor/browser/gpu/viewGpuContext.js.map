{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/gpu/viewGpuContext.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getActiveWindow } from '../../../base/browser/dom.js';\nimport { createFastDomNode, type FastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { GPULifecycle } from './gpuDisposable.js';\nimport { ensureNonNullable, observeDevicePixelDimensions } from './gpuUtils.js';\n\nexport class ViewGpuContext extends Disposable {\n\treadonly canvas: FastDomNode<HTMLCanvasElement>;\n\treadonly ctx: GPUCanvasContext;\n\n\treadonly device: Promise<GPUDevice>;\n\n\tprivate readonly _onDidChangeCanvasDevicePixelDimensions = this._register(new Emitter<{ width: number; height: number }>());\n\treadonly onDidChangeCanvasDevicePixelDimensions = this._onDidChangeCanvasDevicePixelDimensions.event;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.canvas = createFastDomNode(document.createElement('canvas'));\n\t\tthis.canvas.setClassName('editorCanvas');\n\n\t\tthis.ctx = ensureNonNullable(this.canvas.domNode.getContext('webgpu'));\n\n\t\tthis.device = GPULifecycle.requestDevice().then(ref => this._register(ref).object);\n\n\t\tthis._register(observeDevicePixelDimensions(this.canvas.domNode, getActiveWindow(), (width, height) => {\n\t\t\tthis.canvas.domNode.width = width;\n\t\t\tthis.canvas.domNode.height = height;\n\t\t\tthis._onDidChangeCanvasDevicePixelDimensions.fire({ width, height });\n\t\t}));\n\t}\n}\n"],
  "mappings": ";;AAKA,SAAS,uBAAuB;AAChC,SAAS,yBAA2C;AACpD,SAAS,eAAe;AACxB,SAAS,kBAAkB;AAC3B,SAAS,oBAAoB;AAC7B,SAAS,mBAAmB,oCAAoC;AAEzD,MAAM,uBAAuB,WAAW;AAAA,EAZ/C,OAY+C;AAAA;AAAA;AAAA,EACrC;AAAA,EACA;AAAA,EAEA;AAAA,EAEQ,0CAA0C,KAAK,UAAU,IAAI,QAA2C,CAAC;AAAA,EACjH,yCAAyC,KAAK,wCAAwC;AAAA,EAE/F,cAAc;AACb,UAAM;AAEN,SAAK,SAAS,kBAAkB,SAAS,cAAc,QAAQ,CAAC;AAChE,SAAK,OAAO,aAAa,cAAc;AAEvC,SAAK,MAAM,kBAAkB,KAAK,OAAO,QAAQ,WAAW,QAAQ,CAAC;AAErE,SAAK,SAAS,aAAa,cAAc,EAAE,KAAK,SAAO,KAAK,UAAU,GAAG,EAAE,MAAM;AAEjF,SAAK,UAAU,6BAA6B,KAAK,OAAO,SAAS,gBAAgB,GAAG,CAAC,OAAO,WAAW;AACtG,WAAK,OAAO,QAAQ,QAAQ;AAC5B,WAAK,OAAO,QAAQ,SAAS;AAC7B,WAAK,wCAAwC,KAAK,EAAE,OAAO,OAAO,CAAC;AAAA,IACpE,CAAC,CAAC;AAAA,EACH;AACD;",
  "names": []
}
