{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/services/hoverService/hoverWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./hover.css\";\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport { status } from \"../../../../base/browser/ui/aria/aria.js\";\nimport { AnchorPosition } from \"../../../../base/browser/ui/contextview/contextview.js\";\nimport type {\n\tIHoverOptions,\n\tIHoverTarget,\n\tIHoverWidget,\n} from \"../../../../base/browser/ui/hover/hover.js\";\nimport {\n\tHoverWidget as BaseHoverWidget,\n\tHoverAction,\n\tHoverPosition,\n\tgetHoverAccessibleViewHint,\n} from \"../../../../base/browser/ui/hover/hoverWidget.js\";\nimport { Widget } from \"../../../../base/browser/ui/widget.js\";\nimport { Emitter, type Event } from \"../../../../base/common/event.js\";\nimport { isMarkdownString } from \"../../../../base/common/htmlContent.js\";\nimport { KeyCode } from \"../../../../base/common/keyCodes.js\";\nimport { DisposableStore } from \"../../../../base/common/lifecycle.js\";\nimport { isMacintosh } from \"../../../../base/common/platform.js\";\nimport { localize } from \"../../../../nls.js\";\nimport { IAccessibilityService } from \"../../../../platform/accessibility/common/accessibility.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { IOpenerService } from \"../../../../platform/opener/common/opener.js\";\nimport {\n\tEDITOR_FONT_DEFAULTS,\n\ttype IEditorOptions,\n} from \"../../../common/config/editorOptions.js\";\nimport {\n\tMarkdownRenderer,\n\topenLinkFromMarkdown,\n} from \"../../widget/markdownRenderer/browser/markdownRenderer.js\";\n\nconst $ = dom.$;\ntype TargetRect = {\n\tleft: number;\n\tright: number;\n\ttop: number;\n\tbottom: number;\n\twidth: number;\n\theight: number;\n\tcenter: { x: number; y: number };\n};\n\nenum Constants {\n\tPointerSize = 3,\n\tHoverBorderWidth = 2,\n\tHoverWindowEdgeMargin = 2,\n}\n\nexport class HoverWidget extends Widget implements IHoverWidget {\n\tprivate readonly _messageListeners = new DisposableStore();\n\tprivate readonly _lockMouseTracker: CompositeMouseTracker;\n\n\tprivate readonly _hover: BaseHoverWidget;\n\tprivate readonly _hoverPointer: HTMLElement | undefined;\n\tprivate readonly _hoverContainer: HTMLElement;\n\tprivate readonly _target: IHoverTarget;\n\tprivate readonly _linkHandler: (url: string) => any;\n\n\tprivate _isDisposed = false;\n\tprivate _hoverPosition: HoverPosition;\n\tprivate _forcePosition = false;\n\tprivate _x = 0;\n\tprivate _y = 0;\n\tprivate _isLocked = false;\n\tprivate _enableFocusTraps = false;\n\tprivate _addedFocusTrap = false;\n\n\tprivate get _targetWindow(): Window {\n\t\treturn dom.getWindow(this._target.targetElements[0]);\n\t}\n\tprivate get _targetDocumentElement(): HTMLElement {\n\t\treturn dom.getWindow(this._target.targetElements[0]).document\n\t\t\t.documentElement;\n\t}\n\n\tget isDisposed(): boolean {\n\t\treturn this._isDisposed;\n\t}\n\tget isMouseIn(): boolean {\n\t\treturn this._lockMouseTracker.isMouseIn;\n\t}\n\tget domNode(): HTMLElement {\n\t\treturn this._hover.containerDomNode;\n\t}\n\n\tprivate readonly _onDispose = this._register(new Emitter<void>());\n\tget onDispose(): Event<void> {\n\t\treturn this._onDispose.event;\n\t}\n\tprivate readonly _onRequestLayout = this._register(new Emitter<void>());\n\tget onRequestLayout(): Event<void> {\n\t\treturn this._onRequestLayout.event;\n\t}\n\n\tget anchor(): AnchorPosition {\n\t\treturn this._hoverPosition === HoverPosition.BELOW\n\t\t\t? AnchorPosition.BELOW\n\t\t\t: AnchorPosition.ABOVE;\n\t}\n\tget x(): number {\n\t\treturn this._x;\n\t}\n\tget y(): number {\n\t\treturn this._y;\n\t}\n\n\t/**\n\t * Whether the hover is \"locked\" by holding the alt/option key. When locked, the hover will not\n\t * hide and can be hovered regardless of whether the `hideOnHover` hover option is set.\n\t */\n\tget isLocked(): boolean {\n\t\treturn this._isLocked;\n\t}\n\tset isLocked(value: boolean) {\n\t\tif (this._isLocked === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isLocked = value;\n\t\tthis._hoverContainer.classList.toggle(\"locked\", this._isLocked);\n\t}\n\n\tconstructor(\n\t\toptions: IHoverOptions,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService\n\t) {\n\t\tsuper();\n\n\t\tthis._linkHandler = options.linkHandler || (url => {\n\t\t\treturn openLinkFromMarkdown(this._openerService, url, isMarkdownString(options.content) ? options.content.isTrusted : undefined);\n\t\t});\n\n\t\tthis._target = 'targetElements' in options.target ? options.target : new ElementHoverTarget(options.target);\n\n\t\tthis._hoverPointer = options.appearance?.showPointer ? $('div.workbench-hover-pointer') : undefined;\n\t\tthis._hover = this._register(new BaseHoverWidget());\n\t\tthis._hover.containerDomNode.classList.add('workbench-hover', 'fadeIn');\n\t\tif (options.appearance?.compact) {\n\t\t\tthis._hover.containerDomNode.classList.add('workbench-hover', 'compact');\n\t\t}\n\t\tif (options.appearance?.skipFadeInAnimation) {\n\t\t\tthis._hover.containerDomNode.classList.add('skip-fade-in');\n\t\t}\n\t\tif (options.additionalClasses) {\n\t\t\tthis._hover.containerDomNode.classList.add(...options.additionalClasses);\n\t\t}\n\t\tif (options.position?.forcePosition) {\n\t\t\tthis._forcePosition = true;\n\t\t}\n\t\tif (options.trapFocus) {\n\t\t\tthis._enableFocusTraps = true;\n\t\t}\n\n\t\tthis._hoverPosition = options.position?.hoverPosition ?? HoverPosition.ABOVE;\n\n\t\t// Don't allow mousedown out of the widget, otherwise preventDefault will call and text will\n\t\t// not be selected.\n\t\tthis.onmousedown(this._hover.containerDomNode, e => e.stopPropagation());\n\n\t\t// Hide hover on escape\n\t\tthis.onkeydown(this._hover.containerDomNode, e => {\n\t\t\tif (e.equals(KeyCode.Escape)) {\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t});\n\n\t\t// Hide when the window loses focus\n\t\tthis._register(dom.addDisposableListener(this._targetWindow, 'blur', () => this.dispose()));\n\n\t\tconst rowElement = $('div.hover-row.markdown-hover');\n\t\tconst contentsElement = $('div.hover-contents');\n\t\tif (typeof options.content === 'string') {\n\t\t\tcontentsElement.textContent = options.content;\n\t\t\tcontentsElement.style.whiteSpace = 'pre-wrap';\n\n\t\t} else if (dom.isHTMLElement(options.content)) {\n\t\t\tcontentsElement.appendChild(options.content);\n\t\t\tcontentsElement.classList.add('html-hover-contents');\n\n\t\t} else {\n\t\t\tconst markdown = options.content;\n\t\t\tconst mdRenderer = this._instantiationService.createInstance(\n\t\t\t\tMarkdownRenderer,\n\t\t\t\t{ codeBlockFontFamily: this._configurationService.getValue<IEditorOptions>('editor').fontFamily || EDITOR_FONT_DEFAULTS.fontFamily }\n\t\t\t);\n\n\t\t\tconst { element } = mdRenderer.render(markdown, {\n\t\t\t\tactionHandler: {\n\t\t\t\t\tcallback: (content) => this._linkHandler(content),\n\t\t\t\t\tdisposables: this._messageListeners\n\t\t\t\t},\n\t\t\t\tasyncRenderCallback: () => {\n\t\t\t\t\tcontentsElement.classList.add('code-hover-contents');\n\t\t\t\t\tthis.layout();\n\t\t\t\t\t// This changes the dimensions of the hover so trigger a layout\n\t\t\t\t\tthis._onRequestLayout.fire();\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontentsElement.appendChild(element);\n\t\t}\n\t\trowElement.appendChild(contentsElement);\n\t\tthis._hover.contentsDomNode.appendChild(rowElement);\n\n\t\tif (options.actions && options.actions.length > 0) {\n\t\t\tconst statusBarElement = $('div.hover-row.status-bar');\n\t\t\tconst actionsElement = $('div.actions');\n\t\t\toptions.actions.forEach(action => {\n\t\t\t\tconst keybinding = this._keybindingService.lookupKeybinding(action.commandId);\n\t\t\t\tconst keybindingLabel = keybinding ? keybinding.getLabel() : null;\n\t\t\t\tHoverAction.render(actionsElement, {\n\t\t\t\t\tlabel: action.label,\n\t\t\t\t\tcommandId: action.commandId,\n\t\t\t\t\trun: e => {\n\t\t\t\t\t\taction.run(e);\n\t\t\t\t\t\tthis.dispose();\n\t\t\t\t\t},\n\t\t\t\t\ticonClass: action.iconClass\n\t\t\t\t}, keybindingLabel);\n\t\t\t});\n\t\t\tstatusBarElement.appendChild(actionsElement);\n\t\t\tthis._hover.containerDomNode.appendChild(statusBarElement);\n\t\t}\n\n\t\tthis._hoverContainer = $('div.workbench-hover-container');\n\t\tif (this._hoverPointer) {\n\t\t\tthis._hoverContainer.appendChild(this._hoverPointer);\n\t\t}\n\t\tthis._hoverContainer.appendChild(this._hover.containerDomNode);\n\n\t\t// Determine whether to hide on hover\n\t\tlet hideOnHover: boolean;\n\t\tif (options.actions && options.actions.length > 0) {\n\t\t\t// If there are actions, require hover so they can be accessed\n\t\t\thideOnHover = false;\n\t\t} else if (options.persistence?.hideOnHover === undefined) {\n\t\t\t\t// When unset, will default to true when it's a string or when it's markdown that\n\t\t\t\t// appears to have a link using a naive check for '](' and '</a>'\n\t\t\t\thideOnHover = typeof options.content === 'string' ||\n\t\t\t\t\tisMarkdownString(options.content) && !options.content.value.includes('](') && !options.content.value.includes('</a>');\n\t\t\t} else {\n\t\t\t\t// It's set explicitly\n\t\t\t\thideOnHover = options.persistence.hideOnHover;\n\t\t\t}\n\n\t\t// Show the hover hint if needed\n\t\tif (options.appearance?.showHoverHint) {\n\t\t\tconst statusBarElement = $('div.hover-row.status-bar');\n\t\t\tconst infoElement = $('div.info');\n\t\t\tinfoElement.textContent = localize('hoverhint', 'Hold {0} key to mouse over', isMacintosh ? 'Option' : 'Alt');\n\t\t\tstatusBarElement.appendChild(infoElement);\n\t\t\tthis._hover.containerDomNode.appendChild(statusBarElement);\n\t\t}\n\n\t\tconst mouseTrackerTargets = [...this._target.targetElements];\n\t\tif (!hideOnHover) {\n\t\t\tmouseTrackerTargets.push(this._hoverContainer);\n\t\t}\n\t\tconst mouseTracker = this._register(new CompositeMouseTracker(mouseTrackerTargets));\n\t\tthis._register(mouseTracker.onMouseOut(() => {\n\t\t\tif (!this._isLocked) {\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t}));\n\n\t\t// Setup another mouse tracker when hideOnHover is set in order to track the hover as well\n\t\t// when it is locked. This ensures the hover will hide on mouseout after alt has been\n\t\t// released to unlock the element.\n\t\tif (hideOnHover) {\n\t\t\tconst mouseTracker2Targets = [...this._target.targetElements, this._hoverContainer];\n\t\t\tthis._lockMouseTracker = this._register(new CompositeMouseTracker(mouseTracker2Targets));\n\t\t\tthis._register(this._lockMouseTracker.onMouseOut(() => {\n\t\t\t\tif (!this._isLocked) {\n\t\t\t\t\tthis.dispose();\n\t\t\t\t}\n\t\t\t}));\n\t\t} else {\n\t\t\tthis._lockMouseTracker = mouseTracker;\n\t\t}\n\t}\n\n\tprivate addFocusTrap() {\n\t\tif (!this._enableFocusTraps || this._addedFocusTrap) {\n\t\t\treturn;\n\t\t}\n\t\tthis._addedFocusTrap = true;\n\n\t\t// Add a hover tab loop if the hover has at least one element with a valid tabIndex\n\t\tconst firstContainerFocusElement = this._hover.containerDomNode;\n\t\tconst lastContainerFocusElement = this.findLastFocusableChild(\n\t\t\tthis._hover.containerDomNode,\n\t\t);\n\t\tif (lastContainerFocusElement) {\n\t\t\tconst beforeContainerFocusElement = dom.prepend(\n\t\t\t\tthis._hoverContainer,\n\t\t\t\t$(\"div\"),\n\t\t\t);\n\t\t\tconst afterContainerFocusElement = dom.append(\n\t\t\t\tthis._hoverContainer,\n\t\t\t\t$(\"div\"),\n\t\t\t);\n\t\t\tbeforeContainerFocusElement.tabIndex = 0;\n\t\t\tafterContainerFocusElement.tabIndex = 0;\n\t\t\tthis._register(\n\t\t\t\tdom.addDisposableListener(\n\t\t\t\t\tafterContainerFocusElement,\n\t\t\t\t\t\"focus\",\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tfirstContainerFocusElement.focus();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis._register(\n\t\t\t\tdom.addDisposableListener(\n\t\t\t\t\tbeforeContainerFocusElement,\n\t\t\t\t\t\"focus\",\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tlastContainerFocusElement.focus();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate findLastFocusableChild(root: Node): HTMLElement | undefined {\n\t\tif (root.hasChildNodes()) {\n\t\t\tfor (let i = 0; i < root.childNodes.length; i++) {\n\t\t\t\tconst node = root.childNodes.item(\n\t\t\t\t\troot.childNodes.length - i - 1,\n\t\t\t\t);\n\t\t\t\tif (node.nodeType === node.ELEMENT_NODE) {\n\t\t\t\t\tconst parsedNode = node as HTMLElement;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof parsedNode.tabIndex === \"number\" &&\n\t\t\t\t\t\tparsedNode.tabIndex >= 0\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn parsedNode;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst recursivelyFoundElement =\n\t\t\t\t\tthis.findLastFocusableChild(node);\n\t\t\t\tif (recursivelyFoundElement) {\n\t\t\t\t\treturn recursivelyFoundElement;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic render(container: HTMLElement): void {\n\t\tcontainer.appendChild(this._hoverContainer);\n\t\tconst hoverFocused = this._hoverContainer.contains(\n\t\t\tthis._hoverContainer.ownerDocument.activeElement,\n\t\t);\n\t\tconst accessibleViewHint =\n\t\t\thoverFocused &&\n\t\t\tgetHoverAccessibleViewHint(\n\t\t\t\tthis._configurationService.getValue(\n\t\t\t\t\t\"accessibility.verbosity.hover\",\n\t\t\t\t) === true &&\n\t\t\t\t\tthis._accessibilityService.isScreenReaderOptimized(),\n\t\t\t\tthis._keybindingService\n\t\t\t\t\t.lookupKeybinding(\"editor.action.accessibleView\")\n\t\t\t\t\t?.getAriaLabel(),\n\t\t\t);\n\t\tif (accessibleViewHint) {\n\t\t\tstatus(accessibleViewHint);\n\t\t}\n\t\tthis.layout();\n\t\tthis.addFocusTrap();\n\t}\n\n\tpublic layout() {\n\t\tthis._hover.containerDomNode.classList.remove(\"right-aligned\");\n\t\tthis._hover.contentsDomNode.style.maxHeight = \"\";\n\n\t\tconst getZoomAccountedBoundingClientRect = (e: HTMLElement) => {\n\t\t\tconst zoom = dom.getDomNodeZoomLevel(e);\n\n\t\t\tconst boundingRect = e.getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\ttop: boundingRect.top * zoom,\n\t\t\t\tbottom: boundingRect.bottom * zoom,\n\t\t\t\tright: boundingRect.right * zoom,\n\t\t\t\tleft: boundingRect.left * zoom,\n\t\t\t};\n\t\t};\n\n\t\tconst targetBounds = this._target.targetElements.map((e) =>\n\t\t\tgetZoomAccountedBoundingClientRect(e),\n\t\t);\n\t\tconst { top, right, bottom, left } = targetBounds[0];\n\t\tconst width = right - left;\n\t\tconst height = bottom - top;\n\n\t\tconst targetRect: TargetRect = {\n\t\t\ttop,\n\t\t\tright,\n\t\t\tbottom,\n\t\t\tleft,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tcenter: {\n\t\t\t\tx: left + width / 2,\n\t\t\t\ty: top + height / 2,\n\t\t\t},\n\t\t};\n\n\t\t// These calls adjust the position depending on spacing.\n\t\tthis.adjustHorizontalHoverPosition(targetRect);\n\t\tthis.adjustVerticalHoverPosition(targetRect);\n\t\t// This call limits the maximum height of the hover.\n\t\tthis.adjustHoverMaxHeight(targetRect);\n\n\t\t// Offset the hover position if there is a pointer so it aligns with the target element\n\t\tthis._hoverContainer.style.padding = \"\";\n\t\tthis._hoverContainer.style.margin = \"\";\n\t\tif (this._hoverPointer) {\n\t\t\tswitch (this._hoverPosition) {\n\t\t\t\tcase HoverPosition.RIGHT:\n\t\t\t\t\ttargetRect.left += Constants.PointerSize;\n\t\t\t\t\ttargetRect.right += Constants.PointerSize;\n\t\t\t\t\tthis._hoverContainer.style.paddingLeft = `${Constants.PointerSize}px`;\n\t\t\t\t\tthis._hoverContainer.style.marginLeft = `${-Constants.PointerSize}px`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase HoverPosition.LEFT:\n\t\t\t\t\ttargetRect.left -= Constants.PointerSize;\n\t\t\t\t\ttargetRect.right -= Constants.PointerSize;\n\t\t\t\t\tthis._hoverContainer.style.paddingRight = `${Constants.PointerSize}px`;\n\t\t\t\t\tthis._hoverContainer.style.marginRight = `${-Constants.PointerSize}px`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase HoverPosition.BELOW:\n\t\t\t\t\ttargetRect.top += Constants.PointerSize;\n\t\t\t\t\ttargetRect.bottom += Constants.PointerSize;\n\t\t\t\t\tthis._hoverContainer.style.paddingTop = `${Constants.PointerSize}px`;\n\t\t\t\t\tthis._hoverContainer.style.marginTop = `${-Constants.PointerSize}px`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase HoverPosition.ABOVE:\n\t\t\t\t\ttargetRect.top -= Constants.PointerSize;\n\t\t\t\t\ttargetRect.bottom -= Constants.PointerSize;\n\t\t\t\t\tthis._hoverContainer.style.paddingBottom = `${Constants.PointerSize}px`;\n\t\t\t\t\tthis._hoverContainer.style.marginBottom = `${-Constants.PointerSize}px`;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttargetRect.center.x = targetRect.left + width / 2;\n\t\t\ttargetRect.center.y = targetRect.top + height / 2;\n\t\t}\n\n\t\tthis.computeXCordinate(targetRect);\n\t\tthis.computeYCordinate(targetRect);\n\n\t\tif (this._hoverPointer) {\n\t\t\t// reset\n\t\t\tthis._hoverPointer.classList.remove(\"top\");\n\t\t\tthis._hoverPointer.classList.remove(\"left\");\n\t\t\tthis._hoverPointer.classList.remove(\"right\");\n\t\t\tthis._hoverPointer.classList.remove(\"bottom\");\n\n\t\t\tthis.setHoverPointerPosition(targetRect);\n\t\t}\n\n\t\tthis._hover.onContentsChanged();\n\t}\n\n\tprivate computeXCordinate(target: TargetRect): void {\n\t\tconst hoverWidth =\n\t\t\tthis._hover.containerDomNode.clientWidth +\n\t\t\tConstants.HoverBorderWidth;\n\n\t\tif (this._target.x !== undefined) {\n\t\t\tthis._x = this._target.x;\n\t\t} else if (this._hoverPosition === HoverPosition.RIGHT) {\n\t\t\tthis._x = target.right;\n\t\t} else if (this._hoverPosition === HoverPosition.LEFT) {\n\t\t\tthis._x = target.left - hoverWidth;\n\t\t} else {\n\t\t\tif (this._hoverPointer) {\n\t\t\t\tthis._x =\n\t\t\t\t\ttarget.center.x -\n\t\t\t\t\tthis._hover.containerDomNode.clientWidth / 2;\n\t\t\t} else {\n\t\t\t\tthis._x = target.left;\n\t\t\t}\n\n\t\t\t// Hover is going beyond window towards right end\n\t\t\tif (\n\t\t\t\tthis._x + hoverWidth >=\n\t\t\t\tthis._targetDocumentElement.clientWidth\n\t\t\t) {\n\t\t\t\tthis._hover.containerDomNode.classList.add(\"right-aligned\");\n\t\t\t\tthis._x = Math.max(\n\t\t\t\t\tthis._targetDocumentElement.clientWidth -\n\t\t\t\t\t\thoverWidth -\n\t\t\t\t\t\tConstants.HoverWindowEdgeMargin,\n\t\t\t\t\tthis._targetDocumentElement.clientLeft,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Hover is going beyond window towards left end\n\t\tif (this._x < this._targetDocumentElement.clientLeft) {\n\t\t\tthis._x = target.left + Constants.HoverWindowEdgeMargin;\n\t\t}\n\t}\n\n\tprivate computeYCordinate(target: TargetRect): void {\n\t\tif (this._target.y !== undefined) {\n\t\t\tthis._y = this._target.y;\n\t\t} else if (this._hoverPosition === HoverPosition.ABOVE) {\n\t\t\tthis._y = target.top;\n\t\t} else if (this._hoverPosition === HoverPosition.BELOW) {\n\t\t\tthis._y = target.bottom - 2;\n\t\t} else if (this._hoverPointer) {\n\t\t\tthis._y =\n\t\t\t\ttarget.center.y + this._hover.containerDomNode.clientHeight / 2;\n\t\t} else {\n\t\t\tthis._y = target.bottom;\n\t\t}\n\n\t\t// Hover on bottom is going beyond window\n\t\tif (this._y > this._targetWindow.innerHeight) {\n\t\t\tthis._y = target.bottom;\n\t\t}\n\t}\n\n\tprivate adjustHorizontalHoverPosition(target: TargetRect): void {\n\t\t// Do not adjust horizontal hover position if x cordiante is provided\n\t\tif (this._target.x !== undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst hoverPointerOffset = this._hoverPointer\n\t\t\t? Constants.PointerSize\n\t\t\t: 0;\n\n\t\t// When force position is enabled, restrict max width\n\t\tif (this._forcePosition) {\n\t\t\tconst padding = hoverPointerOffset + Constants.HoverBorderWidth;\n\t\t\tif (this._hoverPosition === HoverPosition.RIGHT) {\n\t\t\t\tthis._hover.containerDomNode.style.maxWidth = `${this._targetDocumentElement.clientWidth - target.right - padding}px`;\n\t\t\t} else if (this._hoverPosition === HoverPosition.LEFT) {\n\t\t\t\tthis._hover.containerDomNode.style.maxWidth = `${target.left - padding}px`;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Position hover on right to target\n\t\tif (this._hoverPosition === HoverPosition.RIGHT) {\n\t\t\tconst roomOnRight =\n\t\t\t\tthis._targetDocumentElement.clientWidth - target.right;\n\t\t\t// Hover on the right is going beyond window.\n\t\t\tif (\n\t\t\t\troomOnRight <\n\t\t\t\tthis._hover.containerDomNode.clientWidth + hoverPointerOffset\n\t\t\t) {\n\t\t\t\tconst roomOnLeft = target.left;\n\t\t\t\t// There's enough room on the left, flip the hover position\n\t\t\t\tif (\n\t\t\t\t\troomOnLeft >=\n\t\t\t\t\tthis._hover.containerDomNode.clientWidth +\n\t\t\t\t\t\thoverPointerOffset\n\t\t\t\t) {\n\t\t\t\t\tthis._hoverPosition = HoverPosition.LEFT;\n\t\t\t\t}\n\t\t\t\t// Hover on the left would go beyond window too\n\t\t\t\telse {\n\t\t\t\t\tthis._hoverPosition = HoverPosition.BELOW;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Position hover on left to target\n\t\telse if (this._hoverPosition === HoverPosition.LEFT) {\n\t\t\tconst roomOnLeft = target.left;\n\t\t\t// Hover on the left is going beyond window.\n\t\t\tif (\n\t\t\t\troomOnLeft <\n\t\t\t\tthis._hover.containerDomNode.clientWidth + hoverPointerOffset\n\t\t\t) {\n\t\t\t\tconst roomOnRight =\n\t\t\t\t\tthis._targetDocumentElement.clientWidth - target.right;\n\t\t\t\t// There's enough room on the right, flip the hover position\n\t\t\t\tif (\n\t\t\t\t\troomOnRight >=\n\t\t\t\t\tthis._hover.containerDomNode.clientWidth +\n\t\t\t\t\t\thoverPointerOffset\n\t\t\t\t) {\n\t\t\t\t\tthis._hoverPosition = HoverPosition.RIGHT;\n\t\t\t\t}\n\t\t\t\t// Hover on the right would go beyond window too\n\t\t\t\telse {\n\t\t\t\t\tthis._hoverPosition = HoverPosition.BELOW;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Hover on the left is going beyond window.\n\t\t\tif (\n\t\t\t\ttarget.left -\n\t\t\t\t\tthis._hover.containerDomNode.clientWidth -\n\t\t\t\t\thoverPointerOffset <=\n\t\t\t\tthis._targetDocumentElement.clientLeft\n\t\t\t) {\n\t\t\t\tthis._hoverPosition = HoverPosition.RIGHT;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate adjustVerticalHoverPosition(target: TargetRect): void {\n\t\t// Do not adjust vertical hover position if the y coordinate is provided\n\t\t// or the position is forced\n\t\tif (this._target.y !== undefined || this._forcePosition) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst hoverPointerOffset = this._hoverPointer\n\t\t\t? Constants.PointerSize\n\t\t\t: 0;\n\n\t\t// Position hover on top of the target\n\t\tif (this._hoverPosition === HoverPosition.ABOVE) {\n\t\t\t// Hover on top is going beyond window\n\t\t\tif (\n\t\t\t\ttarget.top -\n\t\t\t\t\tthis._hover.containerDomNode.clientHeight -\n\t\t\t\t\thoverPointerOffset <\n\t\t\t\t0\n\t\t\t) {\n\t\t\t\tthis._hoverPosition = HoverPosition.BELOW;\n\t\t\t}\n\t\t}\n\n\t\t// Position hover below the target\n\t\telse if (this._hoverPosition === HoverPosition.BELOW) {\n\t\t\t// Hover on bottom is going beyond window\n\t\t\tif (\n\t\t\t\ttarget.bottom +\n\t\t\t\t\tthis._hover.containerDomNode.clientHeight +\n\t\t\t\t\thoverPointerOffset >\n\t\t\t\tthis._targetWindow.innerHeight\n\t\t\t) {\n\t\t\t\tthis._hoverPosition = HoverPosition.ABOVE;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate adjustHoverMaxHeight(target: TargetRect): void {\n\t\tlet maxHeight = this._targetWindow.innerHeight / 2;\n\n\t\t// When force position is enabled, restrict max height\n\t\tif (this._forcePosition) {\n\t\t\tconst padding =\n\t\t\t\t(this._hoverPointer ? Constants.PointerSize : 0) +\n\t\t\t\tConstants.HoverBorderWidth;\n\t\t\tif (this._hoverPosition === HoverPosition.ABOVE) {\n\t\t\t\tmaxHeight = Math.min(maxHeight, target.top - padding);\n\t\t\t} else if (this._hoverPosition === HoverPosition.BELOW) {\n\t\t\t\tmaxHeight = Math.min(\n\t\t\t\t\tmaxHeight,\n\t\t\t\t\tthis._targetWindow.innerHeight - target.bottom - padding,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._hover.containerDomNode.style.maxHeight = `${maxHeight}px`;\n\t\tif (\n\t\t\tthis._hover.contentsDomNode.clientHeight <\n\t\t\tthis._hover.contentsDomNode.scrollHeight\n\t\t) {\n\t\t\t// Add padding for a vertical scrollbar\n\t\t\tconst extraRightPadding = `${this._hover.scrollbar.options.verticalScrollbarSize}px`;\n\t\t\tif (\n\t\t\t\tthis._hover.contentsDomNode.style.paddingRight !==\n\t\t\t\textraRightPadding\n\t\t\t) {\n\t\t\t\tthis._hover.contentsDomNode.style.paddingRight =\n\t\t\t\t\textraRightPadding;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate setHoverPointerPosition(target: TargetRect): void {\n\t\tif (!this._hoverPointer) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this._hoverPosition) {\n\t\t\tcase HoverPosition.LEFT:\n\t\t\tcase HoverPosition.RIGHT: {\n\t\t\t\tthis._hoverPointer.classList.add(\n\t\t\t\t\tthis._hoverPosition === HoverPosition.LEFT\n\t\t\t\t\t\t? \"right\"\n\t\t\t\t\t\t: \"left\",\n\t\t\t\t);\n\t\t\t\tconst hoverHeight = this._hover.containerDomNode.clientHeight;\n\n\t\t\t\t// If hover is taller than target, then show the pointer at the center of target\n\t\t\t\tif (hoverHeight > target.height) {\n\t\t\t\t\tthis._hoverPointer.style.top = `${target.center.y - (this._y - hoverHeight) - Constants.PointerSize}px`;\n\t\t\t\t}\n\n\t\t\t\t// Otherwise show the pointer at the center of hover\n\t\t\t\telse {\n\t\t\t\t\tthis._hoverPointer.style.top = `${Math.round(hoverHeight / 2) - Constants.PointerSize}px`;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase HoverPosition.ABOVE:\n\t\t\tcase HoverPosition.BELOW: {\n\t\t\t\tthis._hoverPointer.classList.add(\n\t\t\t\t\tthis._hoverPosition === HoverPosition.ABOVE\n\t\t\t\t\t\t? \"bottom\"\n\t\t\t\t\t\t: \"top\",\n\t\t\t\t);\n\t\t\t\tconst hoverWidth = this._hover.containerDomNode.clientWidth;\n\n\t\t\t\t// Position pointer at the center of the hover\n\t\t\t\tlet pointerLeftPosition =\n\t\t\t\t\tMath.round(hoverWidth / 2) - Constants.PointerSize;\n\n\t\t\t\t// If pointer goes beyond target then position it at the center of the target\n\t\t\t\tconst pointerX = this._x + pointerLeftPosition;\n\t\t\t\tif (pointerX < target.left || pointerX > target.right) {\n\t\t\t\t\tpointerLeftPosition =\n\t\t\t\t\t\ttarget.center.x - this._x - Constants.PointerSize;\n\t\t\t\t}\n\n\t\t\t\tthis._hoverPointer.style.left = `${pointerLeftPosition}px`;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic focus() {\n\t\tthis._hover.containerDomNode.focus();\n\t}\n\n\tpublic hide(): void {\n\t\tthis.dispose();\n\t}\n\n\tpublic override dispose(): void {\n\t\tif (!this._isDisposed) {\n\t\t\tthis._onDispose.fire();\n\t\t\tthis._hoverContainer.remove();\n\t\t\tthis._messageListeners.dispose();\n\t\t\tthis._target.dispose();\n\t\t\tsuper.dispose();\n\t\t}\n\t\tthis._isDisposed = true;\n\t}\n}\n\nclass CompositeMouseTracker extends Widget {\n\tprivate _isMouseIn = true;\n\tprivate _mouseTimeout: number | undefined;\n\n\tprivate readonly _onMouseOut = this._register(new Emitter<void>());\n\tget onMouseOut(): Event<void> {\n\t\treturn this._onMouseOut.event;\n\t}\n\n\tget isMouseIn(): boolean {\n\t\treturn this._isMouseIn;\n\t}\n\n\tconstructor(private _elements: HTMLElement[]) {\n\t\tsuper();\n\t\tthis._elements.forEach((n) =>\n\t\t\tthis.onmouseover(n, () => this._onTargetMouseOver(n)),\n\t\t);\n\t\tthis._elements.forEach((n) =>\n\t\t\tthis.onmouseleave(n, () => this._onTargetMouseLeave(n)),\n\t\t);\n\t}\n\n\tprivate _onTargetMouseOver(target: HTMLElement): void {\n\t\tthis._isMouseIn = true;\n\t\tthis._clearEvaluateMouseStateTimeout(target);\n\t}\n\n\tprivate _onTargetMouseLeave(target: HTMLElement): void {\n\t\tthis._isMouseIn = false;\n\t\tthis._evaluateMouseState(target);\n\t}\n\n\tprivate _evaluateMouseState(target: HTMLElement): void {\n\t\tthis._clearEvaluateMouseStateTimeout(target);\n\t\t// Evaluate whether the mouse is still outside asynchronously such that other mouse targets\n\t\t// have the opportunity to first their mouse in event.\n\t\tthis._mouseTimeout = dom\n\t\t\t.getWindow(target)\n\t\t\t.setTimeout(() => this._fireIfMouseOutside(), 0);\n\t}\n\n\tprivate _clearEvaluateMouseStateTimeout(target: HTMLElement): void {\n\t\tif (this._mouseTimeout) {\n\t\t\tdom.getWindow(target).clearTimeout(this._mouseTimeout);\n\t\t\tthis._mouseTimeout = undefined;\n\t\t}\n\t}\n\n\tprivate _fireIfMouseOutside(): void {\n\t\tif (!this._isMouseIn) {\n\t\t\tthis._onMouseOut.fire();\n\t\t}\n\t}\n}\n\nclass ElementHoverTarget implements IHoverTarget {\n\treadonly targetElements: readonly HTMLElement[];\n\n\tconstructor(private _element: HTMLElement) {\n\t\tthis.targetElements = [this._element];\n\t}\n\n\tdispose(): void {}\n}\n"],
  "mappings": "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",
  "names": ["Constants"]
}
