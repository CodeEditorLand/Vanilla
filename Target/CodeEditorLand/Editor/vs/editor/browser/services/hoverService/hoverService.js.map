{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/services/hoverService/hoverService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { editorHoverBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { HoverWidget } from './hoverWidget.js';\nimport { IContextViewProvider, IDelegate } from '../../../../base/browser/ui/contextview/contextview.js';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { addDisposableListener, EventType, getActiveElement, isAncestorOfActiveElement, isAncestor, getWindow, isHTMLElement, isEditableElement } from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { ResultKind } from '../../../../platform/keybinding/common/keybindingResolver.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ILayoutService } from '../../../../platform/layout/browser/layoutService.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { ContextViewHandler } from '../../../../platform/contextview/browser/contextViewService.js';\nimport type { IHoverOptions, IHoverWidget, IManagedHover, IManagedHoverContentOrFactory, IManagedHoverOptions } from '../../../../base/browser/ui/hover/hover.js';\nimport type { IHoverDelegate, IHoverDelegateTarget } from '../../../../base/browser/ui/hover/hoverDelegate.js';\nimport { ManagedHoverWidget } from './updatableHoverWidget.js';\nimport { TimeoutTimer } from '../../../../base/common/async.js';\n\nexport class HoverService extends Disposable implements IHoverService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _contextViewHandler: IContextViewProvider;\n\tprivate _currentHoverOptions: IHoverOptions | undefined;\n\tprivate _currentHover: HoverWidget | undefined;\n\tprivate _lastHoverOptions: IHoverOptions | undefined;\n\n\tprivate _lastFocusedElementBeforeOpen: HTMLElement | undefined;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@ILayoutService private readonly _layoutService: ILayoutService,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService\n\t) {\n\t\tsuper();\n\n\t\tcontextMenuService.onDidShowContextMenu(() => this.hideHover());\n\t\tthis._contextViewHandler = this._register(new ContextViewHandler(this._layoutService));\n\t}\n\n\tshowHover(options: IHoverOptions, focus?: boolean, skipLastFocusedUpdate?: boolean): IHoverWidget | undefined {\n\t\tif (getHoverOptionsIdentity(this._currentHoverOptions) === getHoverOptionsIdentity(options)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (this._currentHover && this._currentHoverOptions?.persistence?.sticky) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._currentHoverOptions = options;\n\t\tthis._lastHoverOptions = options;\n\t\tconst trapFocus = options.trapFocus || this._accessibilityService.isScreenReaderOptimized();\n\t\tconst activeElement = getActiveElement();\n\t\t// HACK, remove this check when #189076 is fixed\n\t\tif (!skipLastFocusedUpdate) {\n\t\t\tif (trapFocus && activeElement) {\n\t\t\t\tif (!activeElement.classList.contains('monaco-hover')) {\n\t\t\t\t\tthis._lastFocusedElementBeforeOpen = activeElement as HTMLElement;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._lastFocusedElementBeforeOpen = undefined;\n\t\t\t}\n\t\t}\n\t\tconst hoverDisposables = new DisposableStore();\n\t\tconst hover = this._instantiationService.createInstance(HoverWidget, options);\n\t\tif (options.persistence?.sticky) {\n\t\t\thover.isLocked = true;\n\t\t}\n\t\thover.onDispose(() => {\n\t\t\tconst hoverWasFocused = this._currentHover?.domNode && isAncestorOfActiveElement(this._currentHover.domNode);\n\t\t\tif (hoverWasFocused) {\n\t\t\t\t// Required to handle cases such as closing the hover with the escape key\n\t\t\t\tthis._lastFocusedElementBeforeOpen?.focus();\n\t\t\t}\n\n\t\t\t// Only clear the current options if it's the current hover, the current options help\n\t\t\t// reduce flickering when the same hover is shown multiple times\n\t\t\tif (this._currentHoverOptions === options) {\n\t\t\t\tthis._currentHoverOptions = undefined;\n\t\t\t}\n\t\t\thoverDisposables.dispose();\n\t\t}, undefined, hoverDisposables);\n\t\t// Set the container explicitly to enable aux window support\n\t\tif (!options.container) {\n\t\t\tconst targetElement = isHTMLElement(options.target) ? options.target : options.target.targetElements[0];\n\t\t\toptions.container = this._layoutService.getContainer(getWindow(targetElement));\n\t\t}\n\n\t\tthis._contextViewHandler.showContextView(\n\t\t\tnew HoverContextViewDelegate(hover, focus),\n\t\t\toptions.container\n\t\t);\n\t\thover.onRequestLayout(() => this._contextViewHandler.layout(), undefined, hoverDisposables);\n\t\tif (options.persistence?.sticky) {\n\t\t\thoverDisposables.add(addDisposableListener(getWindow(options.container).document, EventType.MOUSE_DOWN, e => {\n\t\t\t\tif (!isAncestor(e.target as HTMLElement, hover.domNode)) {\n\t\t\t\t\tthis.doHideHover();\n\t\t\t\t}\n\t\t\t}));\n\t\t} else {\n\t\t\tif ('targetElements' in options.target) {\n\t\t\t\tfor (const element of options.target.targetElements) {\n\t\t\t\t\thoverDisposables.add(addDisposableListener(element, EventType.CLICK, () => this.hideHover()));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thoverDisposables.add(addDisposableListener(options.target, EventType.CLICK, () => this.hideHover()));\n\t\t\t}\n\t\t\tconst focusedElement = getActiveElement();\n\t\t\tif (focusedElement) {\n\t\t\t\tconst focusedElementDocument = getWindow(focusedElement).document;\n\t\t\t\thoverDisposables.add(addDisposableListener(focusedElement, EventType.KEY_DOWN, e => this._keyDown(e, hover, !!options.persistence?.hideOnKeyDown)));\n\t\t\t\thoverDisposables.add(addDisposableListener(focusedElementDocument, EventType.KEY_DOWN, e => this._keyDown(e, hover, !!options.persistence?.hideOnKeyDown)));\n\t\t\t\thoverDisposables.add(addDisposableListener(focusedElement, EventType.KEY_UP, e => this._keyUp(e, hover)));\n\t\t\t\thoverDisposables.add(addDisposableListener(focusedElementDocument, EventType.KEY_UP, e => this._keyUp(e, hover)));\n\t\t\t}\n\t\t}\n\n\t\tif ('IntersectionObserver' in mainWindow) {\n\t\t\tconst observer = new IntersectionObserver(e => this._intersectionChange(e, hover), { threshold: 0 });\n\t\t\tconst firstTargetElement = 'targetElements' in options.target ? options.target.targetElements[0] : options.target;\n\t\t\tobserver.observe(firstTargetElement);\n\t\t\thoverDisposables.add(toDisposable(() => observer.disconnect()));\n\t\t}\n\n\t\tthis._currentHover = hover;\n\n\t\treturn hover;\n\t}\n\n\thideHover(): void {\n\t\tif (this._currentHover?.isLocked || !this._currentHoverOptions) {\n\t\t\treturn;\n\t\t}\n\t\tthis.doHideHover();\n\t}\n\n\tprivate doHideHover(): void {\n\t\tthis._currentHover = undefined;\n\t\tthis._currentHoverOptions = undefined;\n\t\tthis._contextViewHandler.hideContextView();\n\t}\n\n\tprivate _intersectionChange(entries: IntersectionObserverEntry[], hover: IDisposable): void {\n\t\tconst entry = entries[entries.length - 1];\n\t\tif (!entry.isIntersecting) {\n\t\t\thover.dispose();\n\t\t}\n\t}\n\n\tshowAndFocusLastHover(): void {\n\t\tif (!this._lastHoverOptions) {\n\t\t\treturn;\n\t\t}\n\t\tthis.showHover(this._lastHoverOptions, true, true);\n\t}\n\n\tprivate _keyDown(e: KeyboardEvent, hover: HoverWidget, hideOnKeyDown: boolean) {\n\t\tif (e.key === 'Alt') {\n\t\t\thover.isLocked = true;\n\t\t\treturn;\n\t\t}\n\t\tconst event = new StandardKeyboardEvent(e);\n\t\tconst keybinding = this._keybindingService.resolveKeyboardEvent(event);\n\t\tif (keybinding.getSingleModifierDispatchChords().some(value => !!value) || this._keybindingService.softDispatch(event, event.target).kind !== ResultKind.NoMatchingKb) {\n\t\t\treturn;\n\t\t}\n\t\tif (hideOnKeyDown && (!this._currentHoverOptions?.trapFocus || e.key !== 'Tab')) {\n\t\t\tthis.hideHover();\n\t\t\tthis._lastFocusedElementBeforeOpen?.focus();\n\t\t}\n\t}\n\n\tprivate _keyUp(e: KeyboardEvent, hover: HoverWidget) {\n\t\tif (e.key === 'Alt') {\n\t\t\thover.isLocked = false;\n\t\t\t// Hide if alt is released while the mouse is not over hover/target\n\t\t\tif (!hover.isMouseIn) {\n\t\t\t\tthis.hideHover();\n\t\t\t\tthis._lastFocusedElementBeforeOpen?.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate readonly _managedHovers = new Map<HTMLElement, IManagedHover>();\n\n\t// TODO: Investigate performance of this function. There seems to be a lot of content created\n\t//       and thrown away on start up\n\tsetupManagedHover(hoverDelegate: IHoverDelegate, targetElement: HTMLElement, content: IManagedHoverContentOrFactory, options?: IManagedHoverOptions | undefined): IManagedHover {\n\n\t\ttargetElement.setAttribute('custom-hover', 'true');\n\n\t\tif (targetElement.title !== '') {\n\t\t\tconsole.warn('HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute.');\n\t\t\tconsole.trace('Stack trace:', targetElement.title);\n\t\t\ttargetElement.title = '';\n\t\t}\n\n\t\tlet hoverPreparation: IDisposable | undefined;\n\t\tlet hoverWidget: ManagedHoverWidget | undefined;\n\n\t\tconst hideHover = (disposeWidget: boolean, disposePreparation: boolean) => {\n\t\t\tconst hadHover = hoverWidget !== undefined;\n\t\t\tif (disposeWidget) {\n\t\t\t\thoverWidget?.dispose();\n\t\t\t\thoverWidget = undefined;\n\t\t\t}\n\t\t\tif (disposePreparation) {\n\t\t\t\thoverPreparation?.dispose();\n\t\t\t\thoverPreparation = undefined;\n\t\t\t}\n\t\t\tif (hadHover) {\n\t\t\t\thoverDelegate.onDidHideHover?.();\n\t\t\t\thoverWidget = undefined;\n\t\t\t}\n\t\t};\n\n\t\tconst triggerShowHover = (delay: number, focus?: boolean, target?: IHoverDelegateTarget, trapFocus?: boolean) => {\n\t\t\treturn new TimeoutTimer(async () => {\n\t\t\t\tif (!hoverWidget || hoverWidget.isDisposed) {\n\t\t\t\t\thoverWidget = new ManagedHoverWidget(hoverDelegate, target || targetElement, delay > 0);\n\t\t\t\t\tawait hoverWidget.update(typeof content === 'function' ? content() : content, focus, { ...options, trapFocus });\n\t\t\t\t}\n\t\t\t}, delay);\n\t\t};\n\n\t\tlet isMouseDown = false;\n\t\tconst mouseDownEmitter = addDisposableListener(targetElement, EventType.MOUSE_DOWN, () => {\n\t\t\tisMouseDown = true;\n\t\t\thideHover(true, true);\n\t\t}, true);\n\t\tconst mouseUpEmitter = addDisposableListener(targetElement, EventType.MOUSE_UP, () => {\n\t\t\tisMouseDown = false;\n\t\t}, true);\n\t\tconst mouseLeaveEmitter = addDisposableListener(targetElement, EventType.MOUSE_LEAVE, (e: MouseEvent) => {\n\t\t\tisMouseDown = false;\n\t\t\thideHover(false, (<any>e).fromElement === targetElement);\n\t\t}, true);\n\n\t\tconst onMouseOver = (e: MouseEvent) => {\n\t\t\tif (hoverPreparation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst toDispose: DisposableStore = new DisposableStore();\n\n\t\t\tconst target: IHoverDelegateTarget = {\n\t\t\t\ttargetElements: [targetElement],\n\t\t\t\tdispose: () => { }\n\t\t\t};\n\t\t\tif (hoverDelegate.placement === undefined || hoverDelegate.placement === 'mouse') {\n\t\t\t\t// track the mouse position\n\t\t\t\tconst onMouseMove = (e: MouseEvent) => {\n\t\t\t\t\ttarget.x = e.x + 10;\n\t\t\t\t\tif ((isHTMLElement(e.target)) && getHoverTargetElement(e.target, targetElement) !== targetElement) {\n\t\t\t\t\t\thideHover(true, true);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\ttoDispose.add(addDisposableListener(targetElement, EventType.MOUSE_MOVE, onMouseMove, true));\n\t\t\t}\n\n\t\t\thoverPreparation = toDispose;\n\n\t\t\tif ((isHTMLElement(e.target)) && getHoverTargetElement(e.target as HTMLElement, targetElement) !== targetElement) {\n\t\t\t\treturn; // Do not show hover when the mouse is over another hover target\n\t\t\t}\n\n\t\t\ttoDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n\t\t};\n\t\tconst mouseOverDomEmitter = addDisposableListener(targetElement, EventType.MOUSE_OVER, onMouseOver, true);\n\n\t\tconst onFocus = () => {\n\t\t\tif (isMouseDown || hoverPreparation) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst target: IHoverDelegateTarget = {\n\t\t\t\ttargetElements: [targetElement],\n\t\t\t\tdispose: () => { }\n\t\t\t};\n\t\t\tconst toDispose: DisposableStore = new DisposableStore();\n\t\t\tconst onBlur = () => hideHover(true, true);\n\t\t\ttoDispose.add(addDisposableListener(targetElement, EventType.BLUR, onBlur, true));\n\t\t\ttoDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n\t\t\thoverPreparation = toDispose;\n\t\t};\n\n\t\t// Do not show hover when focusing an input or textarea\n\t\tlet focusDomEmitter: undefined | IDisposable;\n\t\tif (!isEditableElement(targetElement)) {\n\t\t\tfocusDomEmitter = addDisposableListener(targetElement, EventType.FOCUS, onFocus, true);\n\t\t}\n\n\t\tconst hover: IManagedHover = {\n\t\t\tshow: focus => {\n\t\t\t\thideHover(false, true); // terminate a ongoing mouse over preparation\n\t\t\t\ttriggerShowHover(0, focus, undefined, focus); // show hover immediately\n\t\t\t},\n\t\t\thide: () => {\n\t\t\t\thideHover(true, true);\n\t\t\t},\n\t\t\tupdate: async (newContent, hoverOptions) => {\n\t\t\t\tcontent = newContent;\n\t\t\t\tawait hoverWidget?.update(content, undefined, hoverOptions);\n\t\t\t},\n\t\t\tdispose: () => {\n\t\t\t\tthis._managedHovers.delete(targetElement);\n\t\t\t\tmouseOverDomEmitter.dispose();\n\t\t\t\tmouseLeaveEmitter.dispose();\n\t\t\t\tmouseDownEmitter.dispose();\n\t\t\t\tmouseUpEmitter.dispose();\n\t\t\t\tfocusDomEmitter?.dispose();\n\t\t\t\thideHover(true, true);\n\t\t\t}\n\t\t};\n\t\tthis._managedHovers.set(targetElement, hover);\n\t\treturn hover;\n\t}\n\n\tshowManagedHover(target: HTMLElement): void {\n\t\tconst hover = this._managedHovers.get(target);\n\t\tif (hover) {\n\t\t\thover.show(true);\n\t\t}\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._managedHovers.forEach(hover => hover.dispose());\n\t\tsuper.dispose();\n\t}\n}\n\nfunction getHoverOptionsIdentity(options: IHoverOptions | undefined): IHoverOptions | number | string | undefined {\n\tif (options === undefined) {\n\t\treturn undefined;\n\t}\n\treturn options?.id ?? options;\n}\n\nclass HoverContextViewDelegate implements IDelegate {\n\n\t// Render over all other context views\n\tpublic readonly layer = 1;\n\n\tget anchorPosition() {\n\t\treturn this._hover.anchor;\n\t}\n\n\tconstructor(\n\t\tprivate readonly _hover: HoverWidget,\n\t\tprivate readonly _focus: boolean = false\n\t) {\n\t}\n\n\trender(container: HTMLElement) {\n\t\tthis._hover.render(container);\n\t\tif (this._focus) {\n\t\t\tthis._hover.focus();\n\t\t}\n\t\treturn this._hover;\n\t}\n\n\tgetAnchor() {\n\t\treturn {\n\t\t\tx: this._hover.x,\n\t\t\ty: this._hover.y\n\t\t};\n\t}\n\n\tlayout() {\n\t\tthis._hover.layout();\n\t}\n}\n\nfunction getHoverTargetElement(element: HTMLElement, stopElement?: HTMLElement): HTMLElement {\n\tstopElement = stopElement ?? getWindow(element).document.body;\n\twhile (!element.hasAttribute('custom-hover') && element !== stopElement) {\n\t\telement = element.parentElement!;\n\t}\n\treturn element;\n}\n\nregisterSingleton(IHoverService, HoverService, InstantiationType.Delayed);\n\nregisterThemingParticipant((theme, collector) => {\n\tconst hoverBorder = theme.getColor(editorHoverBorder);\n\tif (hoverBorder) {\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n\t\tcollector.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n\t}\n});\n"],
  "mappings": "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",
  "names": ["e"]
}
