{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/services/hoverService/hoverService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\tEventType,\n\taddDisposableListener,\n\tgetActiveElement,\n\tgetWindow,\n\tisAncestor,\n\tisAncestorOfActiveElement,\n\tisEditableElement,\n\tisHTMLElement,\n} from \"../../../../base/browser/dom.js\";\nimport { StandardKeyboardEvent } from \"../../../../base/browser/keyboardEvent.js\";\nimport type {\n\tIContextViewProvider,\n\tIDelegate,\n} from \"../../../../base/browser/ui/contextview/contextview.js\";\nimport type {\n\tIHoverOptions,\n\tIHoverWidget,\n\tIManagedHover,\n\tIManagedHoverContentOrFactory,\n\tIManagedHoverOptions,\n} from \"../../../../base/browser/ui/hover/hover.js\";\nimport type {\n\tIHoverDelegate,\n\tIHoverDelegateTarget,\n} from \"../../../../base/browser/ui/hover/hoverDelegate.js\";\nimport { mainWindow } from \"../../../../base/browser/window.js\";\nimport { TimeoutTimer } from \"../../../../base/common/async.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n\ttype IDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { IAccessibilityService } from \"../../../../platform/accessibility/common/accessibility.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport { ContextViewHandler } from \"../../../../platform/contextview/browser/contextViewService.js\";\nimport { IHoverService } from \"../../../../platform/hover/browser/hover.js\";\nimport {\n\tInstantiationType,\n\tregisterSingleton,\n} from \"../../../../platform/instantiation/common/extensions.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { ResultKind } from \"../../../../platform/keybinding/common/keybindingResolver.js\";\nimport { ILayoutService } from \"../../../../platform/layout/browser/layoutService.js\";\nimport { editorHoverBorder } from \"../../../../platform/theme/common/colorRegistry.js\";\nimport { registerThemingParticipant } from \"../../../../platform/theme/common/themeService.js\";\nimport { HoverWidget } from \"./hoverWidget.js\";\nimport { ManagedHoverWidget } from \"./updatableHoverWidget.js\";\n\nexport class HoverService extends Disposable implements IHoverService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _contextViewHandler: IContextViewProvider;\n\tprivate _currentHoverOptions: IHoverOptions | undefined;\n\tprivate _currentHover: HoverWidget | undefined;\n\tprivate _lastHoverOptions: IHoverOptions | undefined;\n\n\tprivate _lastFocusedElementBeforeOpen: HTMLElement | undefined;\n\n\tconstructor(\n\t\t@IInstantiationService\n\t\tprivate readonly _instantiationService: IInstantiationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService\n\t\tprivate readonly _keybindingService: IKeybindingService,\n\t\t@ILayoutService private readonly _layoutService: ILayoutService,\n\t\t@IAccessibilityService\n\t\tprivate readonly _accessibilityService: IAccessibilityService,\n\t) {\n\t\tsuper();\n\n\t\tcontextMenuService.onDidShowContextMenu(() => this.hideHover());\n\t\tthis._contextViewHandler = this._register(\n\t\t\tnew ContextViewHandler(this._layoutService),\n\t\t);\n\t}\n\n\tshowHover(\n\t\toptions: IHoverOptions,\n\t\tfocus?: boolean,\n\t\tskipLastFocusedUpdate?: boolean,\n\t): IHoverWidget | undefined {\n\t\tif (\n\t\t\tgetHoverOptionsIdentity(this._currentHoverOptions) ===\n\t\t\tgetHoverOptionsIdentity(options)\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (\n\t\t\tthis._currentHover &&\n\t\t\tthis._currentHoverOptions?.persistence?.sticky\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._currentHoverOptions = options;\n\t\tthis._lastHoverOptions = options;\n\t\tconst trapFocus =\n\t\t\toptions.trapFocus ||\n\t\t\tthis._accessibilityService.isScreenReaderOptimized();\n\t\tconst activeElement = getActiveElement();\n\t\t// HACK, remove this check when #189076 is fixed\n\t\tif (!skipLastFocusedUpdate) {\n\t\t\tif (trapFocus && activeElement) {\n\t\t\t\tif (!activeElement.classList.contains(\"monaco-hover\")) {\n\t\t\t\t\tthis._lastFocusedElementBeforeOpen =\n\t\t\t\t\t\tactiveElement as HTMLElement;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._lastFocusedElementBeforeOpen = undefined;\n\t\t\t}\n\t\t}\n\t\tconst hoverDisposables = new DisposableStore();\n\t\tconst hover = this._instantiationService.createInstance(\n\t\t\tHoverWidget,\n\t\t\toptions,\n\t\t);\n\t\tif (options.persistence?.sticky) {\n\t\t\thover.isLocked = true;\n\t\t}\n\t\thover.onDispose(\n\t\t\t() => {\n\t\t\t\tconst hoverWasFocused =\n\t\t\t\t\tthis._currentHover?.domNode &&\n\t\t\t\t\tisAncestorOfActiveElement(this._currentHover.domNode);\n\t\t\t\tif (hoverWasFocused) {\n\t\t\t\t\t// Required to handle cases such as closing the hover with the escape key\n\t\t\t\t\tthis._lastFocusedElementBeforeOpen?.focus();\n\t\t\t\t}\n\n\t\t\t\t// Only clear the current options if it's the current hover, the current options help\n\t\t\t\t// reduce flickering when the same hover is shown multiple times\n\t\t\t\tif (this._currentHoverOptions === options) {\n\t\t\t\t\tthis._currentHoverOptions = undefined;\n\t\t\t\t}\n\t\t\t\thoverDisposables.dispose();\n\t\t\t},\n\t\t\tundefined,\n\t\t\thoverDisposables,\n\t\t);\n\t\t// Set the container explicitly to enable aux window support\n\t\tif (!options.container) {\n\t\t\tconst targetElement = isHTMLElement(options.target)\n\t\t\t\t? options.target\n\t\t\t\t: options.target.targetElements[0];\n\t\t\toptions.container = this._layoutService.getContainer(\n\t\t\t\tgetWindow(targetElement),\n\t\t\t);\n\t\t}\n\n\t\tthis._contextViewHandler.showContextView(\n\t\t\tnew HoverContextViewDelegate(hover, focus),\n\t\t\toptions.container,\n\t\t);\n\t\thover.onRequestLayout(\n\t\t\t() => this._contextViewHandler.layout(),\n\t\t\tundefined,\n\t\t\thoverDisposables,\n\t\t);\n\t\tif (options.persistence?.sticky) {\n\t\t\thoverDisposables.add(\n\t\t\t\taddDisposableListener(\n\t\t\t\t\tgetWindow(options.container).document,\n\t\t\t\t\tEventType.MOUSE_DOWN,\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!isAncestor(e.target as HTMLElement, hover.domNode)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.doHideHover();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t} else {\n\t\t\tif (\"targetElements\" in options.target) {\n\t\t\t\tfor (const element of options.target.targetElements) {\n\t\t\t\t\thoverDisposables.add(\n\t\t\t\t\t\taddDisposableListener(element, EventType.CLICK, () =>\n\t\t\t\t\t\t\tthis.hideHover(),\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thoverDisposables.add(\n\t\t\t\t\taddDisposableListener(options.target, EventType.CLICK, () =>\n\t\t\t\t\t\tthis.hideHover(),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst focusedElement = getActiveElement();\n\t\t\tif (focusedElement) {\n\t\t\t\tconst focusedElementDocument =\n\t\t\t\t\tgetWindow(focusedElement).document;\n\t\t\t\thoverDisposables.add(\n\t\t\t\t\taddDisposableListener(\n\t\t\t\t\t\tfocusedElement,\n\t\t\t\t\t\tEventType.KEY_DOWN,\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\tthis._keyDown(\n\t\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\t\thover,\n\t\t\t\t\t\t\t\t!!options.persistence?.hideOnKeyDown,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\thoverDisposables.add(\n\t\t\t\t\taddDisposableListener(\n\t\t\t\t\t\tfocusedElementDocument,\n\t\t\t\t\t\tEventType.KEY_DOWN,\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\tthis._keyDown(\n\t\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\t\thover,\n\t\t\t\t\t\t\t\t!!options.persistence?.hideOnKeyDown,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\thoverDisposables.add(\n\t\t\t\t\taddDisposableListener(\n\t\t\t\t\t\tfocusedElement,\n\t\t\t\t\t\tEventType.KEY_UP,\n\t\t\t\t\t\t(e) => this._keyUp(e, hover),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\thoverDisposables.add(\n\t\t\t\t\taddDisposableListener(\n\t\t\t\t\t\tfocusedElementDocument,\n\t\t\t\t\t\tEventType.KEY_UP,\n\t\t\t\t\t\t(e) => this._keyUp(e, hover),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (\"IntersectionObserver\" in mainWindow) {\n\t\t\tconst observer = new IntersectionObserver(\n\t\t\t\t(e) => this._intersectionChange(e, hover),\n\t\t\t\t{ threshold: 0 },\n\t\t\t);\n\t\t\tconst firstTargetElement =\n\t\t\t\t\"targetElements\" in options.target\n\t\t\t\t\t? options.target.targetElements[0]\n\t\t\t\t\t: options.target;\n\t\t\tobserver.observe(firstTargetElement);\n\t\t\thoverDisposables.add(toDisposable(() => observer.disconnect()));\n\t\t}\n\n\t\tthis._currentHover = hover;\n\n\t\treturn hover;\n\t}\n\n\thideHover(): void {\n\t\tif (this._currentHover?.isLocked || !this._currentHoverOptions) {\n\t\t\treturn;\n\t\t}\n\t\tthis.doHideHover();\n\t}\n\n\tprivate doHideHover(): void {\n\t\tthis._currentHover = undefined;\n\t\tthis._currentHoverOptions = undefined;\n\t\tthis._contextViewHandler.hideContextView();\n\t}\n\n\tprivate _intersectionChange(\n\t\tentries: IntersectionObserverEntry[],\n\t\thover: IDisposable,\n\t): void {\n\t\tconst entry = entries[entries.length - 1];\n\t\tif (!entry.isIntersecting) {\n\t\t\thover.dispose();\n\t\t}\n\t}\n\n\tshowAndFocusLastHover(): void {\n\t\tif (!this._lastHoverOptions) {\n\t\t\treturn;\n\t\t}\n\t\tthis.showHover(this._lastHoverOptions, true, true);\n\t}\n\n\tprivate _keyDown(\n\t\te: KeyboardEvent,\n\t\thover: HoverWidget,\n\t\thideOnKeyDown: boolean,\n\t) {\n\t\tif (e.key === \"Alt\") {\n\t\t\thover.isLocked = true;\n\t\t\treturn;\n\t\t}\n\t\tconst event = new StandardKeyboardEvent(e);\n\t\tconst keybinding = this._keybindingService.resolveKeyboardEvent(event);\n\t\tif (\n\t\t\tkeybinding\n\t\t\t\t.getSingleModifierDispatchChords()\n\t\t\t\t.some((value) => !!value) ||\n\t\t\tthis._keybindingService.softDispatch(event, event.target).kind !==\n\t\t\t\tResultKind.NoMatchingKb\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\thideOnKeyDown &&\n\t\t\t(!this._currentHoverOptions?.trapFocus || e.key !== \"Tab\")\n\t\t) {\n\t\t\tthis.hideHover();\n\t\t\tthis._lastFocusedElementBeforeOpen?.focus();\n\t\t}\n\t}\n\n\tprivate _keyUp(e: KeyboardEvent, hover: HoverWidget) {\n\t\tif (e.key === \"Alt\") {\n\t\t\thover.isLocked = false;\n\t\t\t// Hide if alt is released while the mouse is not over hover/target\n\t\t\tif (!hover.isMouseIn) {\n\t\t\t\tthis.hideHover();\n\t\t\t\tthis._lastFocusedElementBeforeOpen?.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate readonly _managedHovers = new Map<HTMLElement, IManagedHover>();\n\n\t// TODO: Investigate performance of this function. There seems to be a lot of content created\n\t//       and thrown away on start up\n\tsetupManagedHover(\n\t\thoverDelegate: IHoverDelegate,\n\t\ttargetElement: HTMLElement,\n\t\tcontent: IManagedHoverContentOrFactory,\n\t\toptions?: IManagedHoverOptions | undefined,\n\t): IManagedHover {\n\t\ttargetElement.setAttribute(\"custom-hover\", \"true\");\n\n\t\tif (targetElement.title !== \"\") {\n\t\t\tconsole.warn(\n\t\t\t\t\"HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute.\",\n\t\t\t);\n\t\t\tconsole.trace(\"Stack trace:\", targetElement.title);\n\t\t\ttargetElement.title = \"\";\n\t\t}\n\n\t\tlet hoverPreparation: IDisposable | undefined;\n\t\tlet hoverWidget: ManagedHoverWidget | undefined;\n\n\t\tconst hideHover = (\n\t\t\tdisposeWidget: boolean,\n\t\t\tdisposePreparation: boolean,\n\t\t) => {\n\t\t\tconst hadHover = hoverWidget !== undefined;\n\t\t\tif (disposeWidget) {\n\t\t\t\thoverWidget?.dispose();\n\t\t\t\thoverWidget = undefined;\n\t\t\t}\n\t\t\tif (disposePreparation) {\n\t\t\t\thoverPreparation?.dispose();\n\t\t\t\thoverPreparation = undefined;\n\t\t\t}\n\t\t\tif (hadHover) {\n\t\t\t\thoverDelegate.onDidHideHover?.();\n\t\t\t\thoverWidget = undefined;\n\t\t\t}\n\t\t};\n\n\t\tconst triggerShowHover = (\n\t\t\tdelay: number,\n\t\t\tfocus?: boolean,\n\t\t\ttarget?: IHoverDelegateTarget,\n\t\t\ttrapFocus?: boolean,\n\t\t) => {\n\t\t\treturn new TimeoutTimer(async () => {\n\t\t\t\tif (!hoverWidget || hoverWidget.isDisposed) {\n\t\t\t\t\thoverWidget = new ManagedHoverWidget(\n\t\t\t\t\t\thoverDelegate,\n\t\t\t\t\t\ttarget || targetElement,\n\t\t\t\t\t\tdelay > 0,\n\t\t\t\t\t);\n\t\t\t\t\tawait hoverWidget.update(\n\t\t\t\t\t\ttypeof content === \"function\" ? content() : content,\n\t\t\t\t\t\tfocus,\n\t\t\t\t\t\t{ ...options, trapFocus },\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}, delay);\n\t\t};\n\n\t\tlet isMouseDown = false;\n\t\tconst mouseDownEmitter = addDisposableListener(\n\t\t\ttargetElement,\n\t\t\tEventType.MOUSE_DOWN,\n\t\t\t() => {\n\t\t\t\tisMouseDown = true;\n\t\t\t\thideHover(true, true);\n\t\t\t},\n\t\t\ttrue,\n\t\t);\n\t\tconst mouseUpEmitter = addDisposableListener(\n\t\t\ttargetElement,\n\t\t\tEventType.MOUSE_UP,\n\t\t\t() => {\n\t\t\t\tisMouseDown = false;\n\t\t\t},\n\t\t\ttrue,\n\t\t);\n\t\tconst mouseLeaveEmitter = addDisposableListener(\n\t\t\ttargetElement,\n\t\t\tEventType.MOUSE_LEAVE,\n\t\t\t(e: MouseEvent) => {\n\t\t\t\tisMouseDown = false;\n\t\t\t\thideHover(false, (<any>e).fromElement === targetElement);\n\t\t\t},\n\t\t\ttrue,\n\t\t);\n\n\t\tconst onMouseOver = (e: MouseEvent) => {\n\t\t\tif (hoverPreparation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst toDispose: DisposableStore = new DisposableStore();\n\n\t\t\tconst target: IHoverDelegateTarget = {\n\t\t\t\ttargetElements: [targetElement],\n\t\t\t\tdispose: () => {},\n\t\t\t};\n\t\t\tif (\n\t\t\t\thoverDelegate.placement === undefined ||\n\t\t\t\thoverDelegate.placement === \"mouse\"\n\t\t\t) {\n\t\t\t\t// track the mouse position\n\t\t\t\tconst onMouseMove = (e: MouseEvent) => {\n\t\t\t\t\ttarget.x = e.x + 10;\n\t\t\t\t\tif (\n\t\t\t\t\t\tisHTMLElement(e.target) &&\n\t\t\t\t\t\tgetHoverTargetElement(e.target, targetElement) !==\n\t\t\t\t\t\t\ttargetElement\n\t\t\t\t\t) {\n\t\t\t\t\t\thideHover(true, true);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\ttoDispose.add(\n\t\t\t\t\taddDisposableListener(\n\t\t\t\t\t\ttargetElement,\n\t\t\t\t\t\tEventType.MOUSE_MOVE,\n\t\t\t\t\t\tonMouseMove,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\thoverPreparation = toDispose;\n\n\t\t\tif (\n\t\t\t\tisHTMLElement(e.target) &&\n\t\t\t\tgetHoverTargetElement(\n\t\t\t\t\te.target as HTMLElement,\n\t\t\t\t\ttargetElement,\n\t\t\t\t) !== targetElement\n\t\t\t) {\n\t\t\t\treturn; // Do not show hover when the mouse is over another hover target\n\t\t\t}\n\n\t\t\ttoDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n\t\t};\n\t\tconst mouseOverDomEmitter = addDisposableListener(\n\t\t\ttargetElement,\n\t\t\tEventType.MOUSE_OVER,\n\t\t\tonMouseOver,\n\t\t\ttrue,\n\t\t);\n\n\t\tconst onFocus = () => {\n\t\t\tif (isMouseDown || hoverPreparation) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst target: IHoverDelegateTarget = {\n\t\t\t\ttargetElements: [targetElement],\n\t\t\t\tdispose: () => {},\n\t\t\t};\n\t\t\tconst toDispose: DisposableStore = new DisposableStore();\n\t\t\tconst onBlur = () => hideHover(true, true);\n\t\t\ttoDispose.add(\n\t\t\t\taddDisposableListener(\n\t\t\t\t\ttargetElement,\n\t\t\t\t\tEventType.BLUR,\n\t\t\t\t\tonBlur,\n\t\t\t\t\ttrue,\n\t\t\t\t),\n\t\t\t);\n\t\t\ttoDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n\t\t\thoverPreparation = toDispose;\n\t\t};\n\n\t\t// Do not show hover when focusing an input or textarea\n\t\tlet focusDomEmitter: undefined | IDisposable;\n\t\tif (!isEditableElement(targetElement)) {\n\t\t\tfocusDomEmitter = addDisposableListener(\n\t\t\t\ttargetElement,\n\t\t\t\tEventType.FOCUS,\n\t\t\t\tonFocus,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\n\t\tconst hover: IManagedHover = {\n\t\t\tshow: (focus) => {\n\t\t\t\thideHover(false, true); // terminate a ongoing mouse over preparation\n\t\t\t\ttriggerShowHover(0, focus, undefined, focus); // show hover immediately\n\t\t\t},\n\t\t\thide: () => {\n\t\t\t\thideHover(true, true);\n\t\t\t},\n\t\t\tupdate: async (newContent, hoverOptions) => {\n\t\t\t\tcontent = newContent;\n\t\t\t\tawait hoverWidget?.update(content, undefined, hoverOptions);\n\t\t\t},\n\t\t\tdispose: () => {\n\t\t\t\tthis._managedHovers.delete(targetElement);\n\t\t\t\tmouseOverDomEmitter.dispose();\n\t\t\t\tmouseLeaveEmitter.dispose();\n\t\t\t\tmouseDownEmitter.dispose();\n\t\t\t\tmouseUpEmitter.dispose();\n\t\t\t\tfocusDomEmitter?.dispose();\n\t\t\t\thideHover(true, true);\n\t\t\t},\n\t\t};\n\t\tthis._managedHovers.set(targetElement, hover);\n\t\treturn hover;\n\t}\n\n\tshowManagedHover(target: HTMLElement): void {\n\t\tconst hover = this._managedHovers.get(target);\n\t\tif (hover) {\n\t\t\thover.show(true);\n\t\t}\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._managedHovers.forEach((hover) => hover.dispose());\n\t\tsuper.dispose();\n\t}\n}\n\nfunction getHoverOptionsIdentity(\n\toptions: IHoverOptions | undefined,\n): IHoverOptions | number | string | undefined {\n\tif (options === undefined) {\n\t\treturn undefined;\n\t}\n\treturn options?.id ?? options;\n}\n\nclass HoverContextViewDelegate implements IDelegate {\n\t// Render over all other context views\n\tpublic readonly layer = 1;\n\n\tget anchorPosition() {\n\t\treturn this._hover.anchor;\n\t}\n\n\tconstructor(\n\t\tprivate readonly _hover: HoverWidget,\n\t\tprivate readonly _focus: boolean = false,\n\t) {}\n\n\trender(container: HTMLElement) {\n\t\tthis._hover.render(container);\n\t\tif (this._focus) {\n\t\t\tthis._hover.focus();\n\t\t}\n\t\treturn this._hover;\n\t}\n\n\tgetAnchor() {\n\t\treturn {\n\t\t\tx: this._hover.x,\n\t\t\ty: this._hover.y,\n\t\t};\n\t}\n\n\tlayout() {\n\t\tthis._hover.layout();\n\t}\n}\n\nfunction getHoverTargetElement(\n\telement: HTMLElement,\n\tstopElement?: HTMLElement,\n): HTMLElement {\n\tstopElement = stopElement ?? getWindow(element).document.body;\n\twhile (!element.hasAttribute(\"custom-hover\") && element !== stopElement) {\n\t\telement = element.parentElement!;\n\t}\n\treturn element;\n}\n\nregisterSingleton(IHoverService, HoverService, InstantiationType.Delayed);\n\nregisterThemingParticipant((theme, collector) => {\n\tconst hoverBorder = theme.getColor(editorHoverBorder);\n\tif (hoverBorder) {\n\t\tcollector.addRule(\n\t\t\t`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`,\n\t\t);\n\t\tcollector.addRule(\n\t\t\t`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`,\n\t\t);\n\t}\n});\n"],
  "mappings": "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",
  "names": ["e"]
}
