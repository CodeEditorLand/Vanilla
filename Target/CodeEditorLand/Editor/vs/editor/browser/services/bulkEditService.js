import"../../../../vs/base/common/cancellation.js";import"../../../../vs/base/common/lifecycle.js";import{isObject as s}from"../../../../vs/base/common/types.js";import{URI as c}from"../../../../vs/base/common/uri.js";import"../../../../vs/editor/browser/editorBrowser.js";import"../../../../vs/editor/common/languages.js";import{createDecorator as p}from"../../../../vs/platform/instantiation/common/instantiation.js";import"../../../../vs/platform/progress/common/progress.js";import"../../../../vs/platform/undoRedo/common/undoRedo.js";const C=p("IWorkspaceEditService");class n{constructor(t){this.metadata=t}static convert(t){return t.edits.map(e=>{if(r.is(e))return r.lift(e);if(o.is(e))return o.lift(e);throw new Error("Unsupported edit")})}}class r extends n{constructor(e,a,d=void 0,i){super(i);this.resource=e;this.textEdit=a;this.versionId=d}static is(e){return e instanceof r?!0:s(e)&&c.isUri(e.resource)&&s(e.textEdit)}static lift(e){return e instanceof r?e:new r(e.resource,e.textEdit,e.versionId,e.metadata)}}class o extends n{constructor(e,a,d={},i){super(i);this.oldResource=e;this.newResource=a;this.options=d}static is(e){return e instanceof o?!0:s(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof o?e:new o(e.oldResource,e.newResource,e.options,e.metadata)}}export{C as IBulkEditService,n as ResourceEdit,o as ResourceFileEdit,r as ResourceTextEdit};
