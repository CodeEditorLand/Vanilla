{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/viewParts/blockDecorations/blockDecorations.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createFastDomNode, FastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport './blockDecorations.css';\nimport { RenderingContext, RestrictedRenderingContext } from '../../view/renderingContext.js';\nimport { ViewPart } from '../../view/viewPart.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport * as viewEvents from '../../../common/viewEvents.js';\nimport { ViewContext } from '../../../common/viewModel/viewContext.js';\n\nexport class BlockDecorations extends ViewPart {\n\n\tpublic domNode: FastDomNode<HTMLElement>;\n\n\tprivate readonly blocks: FastDomNode<HTMLElement>[] = [];\n\n\tprivate contentWidth: number = -1;\n\tprivate contentLeft: number = 0;\n\n\tconstructor(context: ViewContext) {\n\t\tsuper(context);\n\n\t\tthis.domNode = createFastDomNode<HTMLElement>(document.createElement('div'));\n\t\tthis.domNode.setAttribute('role', 'presentation');\n\t\tthis.domNode.setAttribute('aria-hidden', 'true');\n\t\tthis.domNode.setClassName('blockDecorations-container');\n\n\t\tthis.update();\n\t}\n\n\tprivate update(): boolean {\n\t\tlet didChange = false;\n\t\tconst options = this._context.configuration.options;\n\t\tconst layoutInfo = options.get(EditorOption.layoutInfo);\n\t\tconst newContentWidth = layoutInfo.contentWidth - layoutInfo.verticalScrollbarWidth;\n\n\t\tif (this.contentWidth !== newContentWidth) {\n\t\t\tthis.contentWidth = newContentWidth;\n\t\t\tdidChange = true;\n\t\t}\n\n\t\tconst newContentLeft = layoutInfo.contentLeft;\n\t\tif (this.contentLeft !== newContentLeft) {\n\t\t\tthis.contentLeft = newContentLeft;\n\t\t\tdidChange = true;\n\t\t}\n\n\t\treturn didChange;\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\t}\n\n\t// --- begin event handlers\n\n\tpublic override onConfigurationChanged(e: viewEvents.ViewConfigurationChangedEvent): boolean {\n\t\treturn this.update();\n\t}\n\tpublic override onScrollChanged(e: viewEvents.ViewScrollChangedEvent): boolean {\n\t\treturn e.scrollTopChanged || e.scrollLeftChanged;\n\t}\n\tpublic override onDecorationsChanged(e: viewEvents.ViewDecorationsChangedEvent): boolean {\n\t\treturn true;\n\t}\n\n\tpublic override onZonesChanged(e: viewEvents.ViewZonesChangedEvent): boolean {\n\t\treturn true;\n\t}\n\n\t// --- end event handlers\n\tpublic prepareRender(ctx: RenderingContext): void {\n\t\t// Nothing to read\n\t}\n\n\tpublic render(ctx: RestrictedRenderingContext): void {\n\t\tlet count = 0;\n\t\tconst decorations = ctx.getDecorationsInViewport();\n\t\tfor (const decoration of decorations) {\n\t\t\tif (!decoration.options.blockClassName) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet block = this.blocks[count];\n\t\t\tif (!block) {\n\t\t\t\tblock = this.blocks[count] = createFastDomNode(document.createElement('div'));\n\t\t\t\tthis.domNode.appendChild(block);\n\t\t\t}\n\n\t\t\tlet top: number;\n\t\t\tlet bottom: number;\n\n\t\t\tif (decoration.options.blockIsAfterEnd) {\n\t\t\t\t// range must be empty\n\t\t\t\ttop = ctx.getVerticalOffsetAfterLineNumber(decoration.range.endLineNumber, false);\n\t\t\t\tbottom = ctx.getVerticalOffsetAfterLineNumber(decoration.range.endLineNumber, true);\n\t\t\t} else {\n\t\t\t\ttop = ctx.getVerticalOffsetForLineNumber(decoration.range.startLineNumber, true);\n\t\t\t\tbottom = decoration.range.isEmpty() && !decoration.options.blockDoesNotCollapse\n\t\t\t\t\t? ctx.getVerticalOffsetForLineNumber(decoration.range.startLineNumber, false)\n\t\t\t\t\t: ctx.getVerticalOffsetAfterLineNumber(decoration.range.endLineNumber, true);\n\t\t\t}\n\n\t\t\tconst [paddingTop, paddingRight, paddingBottom, paddingLeft] = decoration.options.blockPadding ?? [0, 0, 0, 0];\n\n\t\t\tblock.setClassName('blockDecorations-block ' + decoration.options.blockClassName);\n\t\t\tblock.setLeft(this.contentLeft - paddingLeft);\n\t\t\tblock.setWidth(this.contentWidth + paddingLeft + paddingRight);\n\t\t\tblock.setTop(top - ctx.scrollTop - paddingTop);\n\t\t\tblock.setHeight(bottom - top + paddingTop + paddingBottom);\n\n\t\t\tcount++;\n\t\t}\n\n\t\tfor (let i = count; i < this.blocks.length; i++) {\n\t\t\tthis.blocks[i].domNode.remove();\n\t\t}\n\t\tthis.blocks.length = count;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
