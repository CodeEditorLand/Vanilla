{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/browser/viewParts/editorScrollbar/editorScrollbar.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { FastDomNode, createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { IOverviewRulerLayoutInfo, SmoothScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { ScrollableElementChangeOptions, ScrollableElementCreationOptions } from '../../../../base/browser/ui/scrollbar/scrollableElementOptions.js';\nimport { PartFingerprint, PartFingerprints, ViewPart } from '../../view/viewPart.js';\nimport { INewScrollPosition, ScrollType } from '../../../common/editorCommon.js';\nimport { RenderingContext, RestrictedRenderingContext } from '../../view/renderingContext.js';\nimport { ViewContext } from '../../../common/viewModel/viewContext.js';\nimport * as viewEvents from '../../../common/viewEvents.js';\nimport { getThemeTypeSelector } from '../../../../platform/theme/common/themeService.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { IMouseWheelEvent } from '../../../../base/browser/mouseEvent.js';\n\n/**\n * The editor scrollbar built on VS Code's scrollable element that sits beside\n * the minimap.\n */\nexport class EditorScrollbar extends ViewPart {\n\n\tprivate readonly scrollbar: SmoothScrollableElement;\n\tprivate readonly scrollbarDomNode: FastDomNode<HTMLElement>;\n\n\tconstructor(\n\t\tcontext: ViewContext,\n\t\tlinesContent: FastDomNode<HTMLElement>,\n\t\tviewDomNode: FastDomNode<HTMLElement>,\n\t\toverflowGuardDomNode: FastDomNode<HTMLElement>\n\t) {\n\t\tsuper(context);\n\n\n\t\tconst options = this._context.configuration.options;\n\t\tconst scrollbar = options.get(EditorOption.scrollbar);\n\t\tconst mouseWheelScrollSensitivity = options.get(EditorOption.mouseWheelScrollSensitivity);\n\t\tconst fastScrollSensitivity = options.get(EditorOption.fastScrollSensitivity);\n\t\tconst scrollPredominantAxis = options.get(EditorOption.scrollPredominantAxis);\n\n\t\tconst scrollbarOptions: ScrollableElementCreationOptions = {\n\t\t\tlistenOnDomNode: viewDomNode.domNode,\n\t\t\tclassName: 'editor-scrollable' + ' ' + getThemeTypeSelector(context.theme.type),\n\t\t\tuseShadows: false,\n\t\t\tlazyRender: true,\n\n\t\t\tvertical: scrollbar.vertical,\n\t\t\thorizontal: scrollbar.horizontal,\n\t\t\tverticalHasArrows: scrollbar.verticalHasArrows,\n\t\t\thorizontalHasArrows: scrollbar.horizontalHasArrows,\n\t\t\tverticalScrollbarSize: scrollbar.verticalScrollbarSize,\n\t\t\tverticalSliderSize: scrollbar.verticalSliderSize,\n\t\t\thorizontalScrollbarSize: scrollbar.horizontalScrollbarSize,\n\t\t\thorizontalSliderSize: scrollbar.horizontalSliderSize,\n\t\t\thandleMouseWheel: scrollbar.handleMouseWheel,\n\t\t\talwaysConsumeMouseWheel: scrollbar.alwaysConsumeMouseWheel,\n\t\t\tarrowSize: scrollbar.arrowSize,\n\t\t\tmouseWheelScrollSensitivity: mouseWheelScrollSensitivity,\n\t\t\tfastScrollSensitivity: fastScrollSensitivity,\n\t\t\tscrollPredominantAxis: scrollPredominantAxis,\n\t\t\tscrollByPage: scrollbar.scrollByPage,\n\t\t};\n\n\t\tthis.scrollbar = this._register(new SmoothScrollableElement(linesContent.domNode, scrollbarOptions, this._context.viewLayout.getScrollable()));\n\t\tPartFingerprints.write(this.scrollbar.getDomNode(), PartFingerprint.ScrollableElement);\n\n\t\tthis.scrollbarDomNode = createFastDomNode(this.scrollbar.getDomNode());\n\t\tthis.scrollbarDomNode.setPosition('absolute');\n\t\tthis._setLayout();\n\n\t\t// When having a zone widget that calls .focus() on one of its dom elements,\n\t\t// the browser will try desperately to reveal that dom node, unexpectedly\n\t\t// changing the .scrollTop of this.linesContent\n\n\t\tconst onBrowserDesperateReveal = (domNode: HTMLElement, lookAtScrollTop: boolean, lookAtScrollLeft: boolean) => {\n\t\t\tconst newScrollPosition: INewScrollPosition = {};\n\n\t\t\tif (lookAtScrollTop) {\n\t\t\t\tconst deltaTop = domNode.scrollTop;\n\t\t\t\tif (deltaTop) {\n\t\t\t\t\tnewScrollPosition.scrollTop = this._context.viewLayout.getCurrentScrollTop() + deltaTop;\n\t\t\t\t\tdomNode.scrollTop = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (lookAtScrollLeft) {\n\t\t\t\tconst deltaLeft = domNode.scrollLeft;\n\t\t\t\tif (deltaLeft) {\n\t\t\t\t\tnewScrollPosition.scrollLeft = this._context.viewLayout.getCurrentScrollLeft() + deltaLeft;\n\t\t\t\t\tdomNode.scrollLeft = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._context.viewModel.viewLayout.setScrollPosition(newScrollPosition, ScrollType.Immediate);\n\t\t};\n\n\t\t// I've seen this happen both on the view dom node & on the lines content dom node.\n\t\tthis._register(dom.addDisposableListener(viewDomNode.domNode, 'scroll', (e: Event) => onBrowserDesperateReveal(viewDomNode.domNode, true, true)));\n\t\tthis._register(dom.addDisposableListener(linesContent.domNode, 'scroll', (e: Event) => onBrowserDesperateReveal(linesContent.domNode, true, false)));\n\t\tthis._register(dom.addDisposableListener(overflowGuardDomNode.domNode, 'scroll', (e: Event) => onBrowserDesperateReveal(overflowGuardDomNode.domNode, true, false)));\n\t\tthis._register(dom.addDisposableListener(this.scrollbarDomNode.domNode, 'scroll', (e: Event) => onBrowserDesperateReveal(this.scrollbarDomNode.domNode, true, false)));\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\t}\n\n\tprivate _setLayout(): void {\n\t\tconst options = this._context.configuration.options;\n\t\tconst layoutInfo = options.get(EditorOption.layoutInfo);\n\n\t\tthis.scrollbarDomNode.setLeft(layoutInfo.contentLeft);\n\n\t\tconst minimap = options.get(EditorOption.minimap);\n\t\tconst side = minimap.side;\n\t\tif (side === 'right') {\n\t\t\tthis.scrollbarDomNode.setWidth(layoutInfo.contentWidth + layoutInfo.minimap.minimapWidth);\n\t\t} else {\n\t\t\tthis.scrollbarDomNode.setWidth(layoutInfo.contentWidth);\n\t\t}\n\t\tthis.scrollbarDomNode.setHeight(layoutInfo.height);\n\t}\n\n\tpublic getOverviewRulerLayoutInfo(): IOverviewRulerLayoutInfo {\n\t\treturn this.scrollbar.getOverviewRulerLayoutInfo();\n\t}\n\n\tpublic getDomNode(): FastDomNode<HTMLElement> {\n\t\treturn this.scrollbarDomNode;\n\t}\n\n\tpublic delegateVerticalScrollbarPointerDown(browserEvent: PointerEvent): void {\n\t\tthis.scrollbar.delegateVerticalScrollbarPointerDown(browserEvent);\n\t}\n\n\tpublic delegateScrollFromMouseWheelEvent(browserEvent: IMouseWheelEvent) {\n\t\tthis.scrollbar.delegateScrollFromMouseWheelEvent(browserEvent);\n\t}\n\n\t// --- begin event handlers\n\n\tpublic override onConfigurationChanged(e: viewEvents.ViewConfigurationChangedEvent): boolean {\n\t\tif (\n\t\t\te.hasChanged(EditorOption.scrollbar)\n\t\t\t|| e.hasChanged(EditorOption.mouseWheelScrollSensitivity)\n\t\t\t|| e.hasChanged(EditorOption.fastScrollSensitivity)\n\t\t) {\n\t\t\tconst options = this._context.configuration.options;\n\t\t\tconst scrollbar = options.get(EditorOption.scrollbar);\n\t\t\tconst mouseWheelScrollSensitivity = options.get(EditorOption.mouseWheelScrollSensitivity);\n\t\t\tconst fastScrollSensitivity = options.get(EditorOption.fastScrollSensitivity);\n\t\t\tconst scrollPredominantAxis = options.get(EditorOption.scrollPredominantAxis);\n\t\t\tconst newOpts: ScrollableElementChangeOptions = {\n\t\t\t\tvertical: scrollbar.vertical,\n\t\t\t\thorizontal: scrollbar.horizontal,\n\t\t\t\tverticalScrollbarSize: scrollbar.verticalScrollbarSize,\n\t\t\t\thorizontalScrollbarSize: scrollbar.horizontalScrollbarSize,\n\t\t\t\tscrollByPage: scrollbar.scrollByPage,\n\t\t\t\thandleMouseWheel: scrollbar.handleMouseWheel,\n\t\t\t\tmouseWheelScrollSensitivity: mouseWheelScrollSensitivity,\n\t\t\t\tfastScrollSensitivity: fastScrollSensitivity,\n\t\t\t\tscrollPredominantAxis: scrollPredominantAxis\n\t\t\t};\n\t\t\tthis.scrollbar.updateOptions(newOpts);\n\t\t}\n\t\tif (e.hasChanged(EditorOption.layoutInfo)) {\n\t\t\tthis._setLayout();\n\t\t}\n\t\treturn true;\n\t}\n\tpublic override onScrollChanged(e: viewEvents.ViewScrollChangedEvent): boolean {\n\t\treturn true;\n\t}\n\tpublic override onThemeChanged(e: viewEvents.ViewThemeChangedEvent): boolean {\n\t\tthis.scrollbar.updateClassName('editor-scrollable' + ' ' + getThemeTypeSelector(this._context.theme.type));\n\t\treturn true;\n\t}\n\n\t// --- end event handlers\n\n\tpublic prepareRender(ctx: RenderingContext): void {\n\t\t// Nothing to do\n\t}\n\n\tpublic render(ctx: RestrictedRenderingContext): void {\n\t\tthis.scrollbar.renderNow();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
