var y=class e{_rgba8Brand=void 0;static Empty=new e(0,0,0,0);r;g;b;a;constructor(r,n,a,t){this.r=e._clamp(r),this.g=e._clamp(n),this.b=e._clamp(a),this.a=e._clamp(t)}equals(r){return this.r===r.r&&this.g===r.g&&this.b===r.b&&this.a===r.a}static _clamp(r){return r<0?0:r>255?255:r|0}};var W=(()=>{let e=[];for(let r=32;r<=126;r++)e.push(r);return e.push(65533),e})(),L=(e,r)=>(e-=32,e<0||e>96?r<=2?(e+96)%96:95:e);function O(e){return e<0?0:e>255?255:e|0}var M=class e{constructor(r,n){this.scale=n;this.charDataNormal=e.soften(r,12/15),this.charDataLight=e.soften(r,50/60)}_minimapCharRendererBrand=void 0;charDataNormal;charDataLight;static soften(r,n){let a=new Uint8ClampedArray(r.length);for(let t=0,i=r.length;t<i;t++)a[t]=O(r[t]*n);return a}renderChar(r,n,a,t,i,_,A,D,s,I,h){let o=1*this.scale,l=2*this.scale,b=h?1:l;if(n+o>r.width||a+b>r.height){console.warn("bad render request outside image data");return}let N=I?this.charDataLight:this.charDataNormal,H=L(t,s),E=r.width*4,R=A.r,p=A.g,T=A.b,B=i.r-R,U=i.g-p,G=i.b-T,m=Math.max(_,D),c=r.data,f=H*o*l,u=a*E+n*4;for(let d=0;d<b;d++){let C=u;for(let g=0;g<o;g++){let S=N[f++]/255*(_/255);c[C++]=R+B*S,c[C++]=p+U*S,c[C++]=T+G*S,c[C++]=m}u+=E}}blockRenderChar(r,n,a,t,i,_,A,D){let s=1*this.scale,I=2*this.scale,h=D?1:I;if(n+s>r.width||a+h>r.height){console.warn("bad render request outside image data");return}let o=r.width*4,l=.5*(i/255),b=_.r,N=_.g,H=_.b,E=t.r-b,R=t.g-N,p=t.b-H,T=b+E*l,B=N+R*l,U=H+p*l,G=Math.max(i,A),m=r.data,c=a*o+n*4;for(let f=0;f<h;f++){let u=c;for(let d=0;d<s;d++)m[u++]=T,m[u++]=B,m[u++]=U,m[u++]=G;c+=o}}};export{M as MinimapCharRenderer};
