import*as m from"../../../base/common/platform.js";import{EditorFontVariations as u,EditorOptions as r,EditorOption as o,EDITOR_FONT_DEFAULTS as b}from"./editorOptions.js";import{EditorZoom as S}from"./editorZoom.js";const y=m.isMacintosh?1.5:1.35,f=8;class d{_bareFontInfoBrand=void 0;static createFromValidatedSettings(t,e,n){const l=t.get(o.fontFamily),a=t.get(o.fontWeight),i=t.get(o.fontSize),h=t.get(o.fontLigatures),g=t.get(o.fontVariations),c=t.get(o.lineHeight),s=t.get(o.letterSpacing);return d._create(l,a,i,h,g,c,s,e,n)}static createFromRawSettings(t,e,n=!1){const l=r.fontFamily.validate(t.fontFamily),a=r.fontWeight.validate(t.fontWeight),i=r.fontSize.validate(t.fontSize),h=r.fontLigatures2.validate(t.fontLigatures),g=r.fontVariations.validate(t.fontVariations),c=r.lineHeight.validate(t.lineHeight),s=r.letterSpacing.validate(t.letterSpacing);return d._create(l,a,i,h,g,c,s,e,n)}static _create(t,e,n,l,a,i,h,g,c){i===0?i=y*n:i<f&&(i=i*n),i=Math.round(i),i<f&&(i=f);const s=1+(c?0:S.getZoomLevel()*.1);return n*=s,i*=s,a===u.TRANSLATE&&(e==="normal"||e==="bold"?a=u.OFF:(a=`'wght' ${parseInt(e,10)}`,e="normal")),new d({pixelRatio:g,fontFamily:t,fontWeight:e,fontSize:n,fontFeatureSettings:l,fontVariationSettings:a,lineHeight:i,letterSpacing:h})}pixelRatio;fontFamily;fontWeight;fontSize;fontFeatureSettings;fontVariationSettings;lineHeight;letterSpacing;constructor(t){this.pixelRatio=t.pixelRatio,this.fontFamily=String(t.fontFamily),this.fontWeight=String(t.fontWeight),this.fontSize=t.fontSize,this.fontFeatureSettings=t.fontFeatureSettings,this.fontVariationSettings=t.fontVariationSettings,this.lineHeight=t.lineHeight|0,this.letterSpacing=t.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const t=b.fontFamily,e=d._wrapInQuotes(this.fontFamily);return t&&this.fontFamily!==t?`${e}, ${t}`:e}static _wrapInQuotes(t){return/[,"']/.test(t)?t:/[+ ]/.test(t)?`"${t}"`:t}}const F=2;class E extends d{_editorStylingBrand=void 0;version=F;isTrusted;isMonospace;typicalHalfwidthCharacterWidth;typicalFullwidthCharacterWidth;canUseHalfwidthRightwardsArrow;spaceWidth;middotWidth;wsmiddotWidth;maxDigitWidth;constructor(t,e){super(t),this.isTrusted=e,this.isMonospace=t.isMonospace,this.typicalHalfwidthCharacterWidth=t.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=t.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=t.canUseHalfwidthRightwardsArrow,this.spaceWidth=t.spaceWidth,this.middotWidth=t.middotWidth,this.wsmiddotWidth=t.wsmiddotWidth,this.maxDigitWidth=t.maxDigitWidth}equals(t){return this.fontFamily===t.fontFamily&&this.fontWeight===t.fontWeight&&this.fontSize===t.fontSize&&this.fontFeatureSettings===t.fontFeatureSettings&&this.fontVariationSettings===t.fontVariationSettings&&this.lineHeight===t.lineHeight&&this.letterSpacing===t.letterSpacing&&this.typicalHalfwidthCharacterWidth===t.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===t.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.spaceWidth===t.spaceWidth&&this.middotWidth===t.middotWidth&&this.wsmiddotWidth===t.wsmiddotWidth&&this.maxDigitWidth===t.maxDigitWidth}}export{d as BareFontInfo,E as FontInfo,F as SERIALIZED_FONT_INFO_VERSION};
