import{OffsetRange as k}from"../core/offsetRange.js";class a{constructor(e){this._tokenInfo=e}static create(e){return new a(e)}forEach(e){let t=0;for(const n of this._tokenInfo){const o=new k(t,t+n.length);e(o,n),t+=n.length}}slice(e){const t=[];let n=0;for(const o of this._tokenInfo){const r=n,s=r+o.length;if(s>e.start){if(r>=e.endExclusive)break;const f=Math.max(0,e.start-r),i=Math.max(0,s-e.endExclusive);t.push(new l(o.length-f-i,o.metadata))}n+=o.length}return a.create(t)}}class l{constructor(e,t){this.length=e;this.metadata=t}}class d{_tokens=[];add(e,t){this._tokens.push(new l(e,t))}build(){return a.create(this._tokens)}}export{a as TokenArray,d as TokenArrayBuilder,l as TokenInfo};
