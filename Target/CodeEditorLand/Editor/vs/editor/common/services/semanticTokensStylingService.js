var g=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=(o,r,e,t)=>{for(var i=t>1?void 0:t?h(r,e):r,c=o.length-1,s;c>=0;c--)(s=o[c])&&(i=(t?s(r,e,i):s(i))||i);return t&&i&&g(r,e,i),i},a=(o,r)=>(e,t)=>r(e,t,o);import{Disposable as v}from"../../../base/common/lifecycle.js";import{ILanguageService as S}from"../languages/language.js";import"./model.js";import{IThemeService as l}from"../../../platform/theme/common/themeService.js";import{ILogService as p}from"../../../platform/log/common/log.js";import{SemanticTokensProviderStyling as d}from"./semanticTokensProviderStyling.js";import{ISemanticTokensStylingService as u}from"./semanticTokensStyling.js";import{InstantiationType as _,registerSingleton as T}from"../../../platform/instantiation/common/extensions.js";let n=class extends v{constructor(e,t,i){super();this._themeService=e;this._logService=t;this._languageService=i;this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}_serviceBrand;_caches;getStyling(e){return this._caches.has(e)||this._caches.set(e,new d(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};n=m([a(0,l),a(1,p),a(2,S)],n),T(u,n,_.Delayed);export{n as SemanticTokensStylingService};
