{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/common/services/editorWorkerBootstrap.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\ttype IWorkerServer,\n\tSimpleWorkerServer,\n} from \"../../../base/common/worker/simpleWorker.js\";\nimport { EditorSimpleWorker } from \"./editorSimpleWorker.js\";\nimport { EditorWorkerHost } from \"./editorWorkerHost.js\";\n\ntype MessageEvent = {\n\tdata: any;\n};\n\ndeclare const globalThis: {\n\tpostMessage: (message: any) => void;\n\tonmessage: (event: MessageEvent) => void;\n};\n\nlet initialized = false;\n\nexport function initialize(factory: any) {\n\tif (initialized) {\n\t\treturn;\n\t}\n\tinitialized = true;\n\n\tconst simpleWorker = new SimpleWorkerServer(\n\t\t(msg) => {\n\t\t\tglobalThis.postMessage(msg);\n\t\t},\n\t\t(workerServer: IWorkerServer) =>\n\t\t\tnew EditorSimpleWorker(\n\t\t\t\tEditorWorkerHost.getChannel(workerServer),\n\t\t\t\tnull,\n\t\t\t),\n\t);\n\n\tglobalThis.onmessage = (e: MessageEvent) => {\n\t\tsimpleWorker.onmessage(e.data);\n\t};\n}\n\nglobalThis.onmessage = (e: MessageEvent) => {\n\t// Ignore first message in this case and initialize if not yet initialized\n\tif (!initialized) {\n\t\tinitialize(null);\n\t}\n};\n\ntype CreateFunction<C, D, R = any> = (ctx: C, data: D) => R;\n\nexport function bootstrapSimpleEditorWorker<C, D, R>(\n\tcreateFn: CreateFunction<C, D, R>,\n) {\n\tglobalThis.onmessage = () => {\n\t\tinitialize((ctx: C, createData: D) => {\n\t\t\treturn createFn.call(self, ctx, createData);\n\t\t});\n\t};\n}\n"],
  "mappings": ";;AAKA;AAAA,EAEC;AAAA,OACM;AACP,SAAS,0BAA0B;AACnC,SAAS,wBAAwB;AAWjC,IAAI,cAAc;AAEX,SAAS,WAAW,SAAc;AACxC,MAAI,aAAa;AAChB;AAAA,EACD;AACA,gBAAc;AAEd,QAAM,eAAe,IAAI;AAAA,IACxB,CAAC,QAAQ;AACR,iBAAW,YAAY,GAAG;AAAA,IAC3B;AAAA,IACA,CAAC,iBACA,IAAI;AAAA,MACH,iBAAiB,WAAW,YAAY;AAAA,MACxC;AAAA,IACD;AAAA,EACF;AAEA,aAAW,YAAY,CAAC,MAAoB;AAC3C,iBAAa,UAAU,EAAE,IAAI;AAAA,EAC9B;AACD;AApBgB;AAsBhB,WAAW,YAAY,CAAC,MAAoB;AAE3C,MAAI,CAAC,aAAa;AACjB,eAAW,IAAI;AAAA,EAChB;AACD;AAIO,SAAS,4BACf,UACC;AACD,aAAW,YAAY,MAAM;AAC5B,eAAW,CAAC,KAAQ,eAAkB;AACrC,aAAO,SAAS,KAAK,MAAM,KAAK,UAAU;AAAA,IAC3C,CAAC;AAAA,EACF;AACD;AARgB;",
  "names": []
}
