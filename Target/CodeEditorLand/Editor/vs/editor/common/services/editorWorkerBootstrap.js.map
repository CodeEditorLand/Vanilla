{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/common/services/editorWorkerBootstrap.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IWorkerServer, SimpleWorkerServer } from '../../../base/common/worker/simpleWorker.js';\nimport { EditorSimpleWorker } from './editorSimpleWorker.js';\nimport { EditorWorkerHost } from './editorWorkerHost.js';\n\ntype MessageEvent = {\n\tdata: any;\n};\n\ndeclare const globalThis: {\n\tpostMessage: (message: any) => void;\n\tonmessage: (event: MessageEvent) => void;\n};\n\nlet initialized = false;\n\nexport function initialize(factory: any) {\n\tif (initialized) {\n\t\treturn;\n\t}\n\tinitialized = true;\n\n\tconst simpleWorker = new SimpleWorkerServer((msg) => {\n\t\tglobalThis.postMessage(msg);\n\t}, (workerServer: IWorkerServer) => new EditorSimpleWorker(EditorWorkerHost.getChannel(workerServer), null));\n\n\tglobalThis.onmessage = (e: MessageEvent) => {\n\t\tsimpleWorker.onmessage(e.data);\n\t};\n}\n\nglobalThis.onmessage = (e: MessageEvent) => {\n\t// Ignore first message in this case and initialize if not yet initialized\n\tif (!initialized) {\n\t\tinitialize(null);\n\t}\n};\n\ntype CreateFunction<C, D, R = any> = (ctx: C, data: D) => R;\n\nexport function bootstrapSimpleEditorWorker<C, D, R>(createFn: CreateFunction<C, D, R>) {\n\tglobalThis.onmessage = () => {\n\t\tinitialize((ctx: C, createData: D) => {\n\t\t\treturn createFn.call(self, ctx, createData);\n\t\t});\n\t};\n}\n"],
  "mappings": ";;AAKA,SAAS,eAAe,0BAA0B;AAClD,SAAS,0BAA0B;AACnC,SAAS,wBAAwB;AAWjC,IAAI,cAAc;AAEX,SAAS,WAAW,SAAc;AACxC,MAAI,aAAa;AAChB;AAAA,EACD;AACA,gBAAc;AAEd,QAAM,eAAe,IAAI,mBAAmB,CAAC,QAAQ;AACpD,eAAW,YAAY,GAAG;AAAA,EAC3B,GAAG,CAAC,iBAAgC,IAAI,mBAAmB,iBAAiB,WAAW,YAAY,GAAG,IAAI,CAAC;AAE3G,aAAW,YAAY,CAAC,MAAoB;AAC3C,iBAAa,UAAU,EAAE,IAAI;AAAA,EAC9B;AACD;AAbgB;AAehB,WAAW,YAAY,CAAC,MAAoB;AAE3C,MAAI,CAAC,aAAa;AACjB,eAAW,IAAI;AAAA,EAChB;AACD;AAIO,SAAS,4BAAqC,UAAmC;AACvF,aAAW,YAAY,MAAM;AAC5B,eAAW,CAAC,KAAQ,eAAkB;AACrC,aAAO,SAAS,KAAK,MAAM,KAAK,UAAU;AAAA,IAC3C,CAAC;AAAA,EACF;AACD;AANgB;",
  "names": []
}
