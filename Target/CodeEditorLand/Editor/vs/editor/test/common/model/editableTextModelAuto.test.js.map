{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/test/common/model/editableTextModelAuto.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from '../../../../base/common/charCode.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ISingleEditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { testApplyEditsWithSyncedModels } from './editableTextModelTestUtils.js';\n\nconst GENERATE_TESTS = false;\n\nsuite('EditorModel Auto Tests', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction editOp(startLineNumber: number, startColumn: number, endLineNumber: number, endColumn: number, text: string[]): ISingleEditOperation {\n\t\treturn {\n\t\t\trange: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\n\t\t\ttext: text.join('\\n'),\n\t\t\tforceMoveMarkers: false\n\t\t};\n\t}\n\n\ttest('auto1', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'ioe',\n\t\t\t\t'',\n\t\t\t\t'yjct',\n\t\t\t\t'',\n\t\t\t\t'',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 2, 1, 2, ['b', 'r', 'fq']),\n\t\t\t\teditOp(1, 4, 2, 1, ['', '']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'ib',\n\t\t\t\t'r',\n\t\t\t\t'fqoe',\n\t\t\t\t'',\n\t\t\t\t'yjct',\n\t\t\t\t'',\n\t\t\t\t'',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto2', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'f',\n\t\t\t\t'littnhskrq',\n\t\t\t\t'utxvsizqnk',\n\t\t\t\t'lslqz',\n\t\t\t\t'jxn',\n\t\t\t\t'gmm',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 2, 1, 2, ['', 'o']),\n\t\t\t\teditOp(2, 4, 2, 4, ['zaq', 'avb']),\n\t\t\t\teditOp(2, 5, 6, 2, ['jlr', 'zl', 'j']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'f',\n\t\t\t\t'o',\n\t\t\t\t'litzaq',\n\t\t\t\t'avbtjlr',\n\t\t\t\t'zl',\n\t\t\t\t'jmm',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto3', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'ofw',\n\t\t\t\t'qsxmziuvzw',\n\t\t\t\t'rp',\n\t\t\t\t'qsnymek',\n\t\t\t\t'elth',\n\t\t\t\t'wmgzbwudxz',\n\t\t\t\t'iwsdkndh',\n\t\t\t\t'bujlbwb',\n\t\t\t\t'asuouxfv',\n\t\t\t\t'xuccnb',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(4, 3, 4, 3, ['']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'ofw',\n\t\t\t\t'qsxmziuvzw',\n\t\t\t\t'rp',\n\t\t\t\t'qsnymek',\n\t\t\t\t'elth',\n\t\t\t\t'wmgzbwudxz',\n\t\t\t\t'iwsdkndh',\n\t\t\t\t'bujlbwb',\n\t\t\t\t'asuouxfv',\n\t\t\t\t'xuccnb',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto4', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'fefymj',\n\t\t\t\t'qum',\n\t\t\t\t'vmiwxxaiqq',\n\t\t\t\t'dz',\n\t\t\t\t'lnqdgorosf',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 3, 1, 5, ['hp']),\n\t\t\t\teditOp(1, 7, 2, 1, ['kcg', '', 'mpx']),\n\t\t\t\teditOp(2, 2, 2, 2, ['', 'aw', '']),\n\t\t\t\teditOp(2, 2, 2, 2, ['vqr', 'mo']),\n\t\t\t\teditOp(4, 2, 5, 3, ['xyc']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'fehpmjkcg',\n\t\t\t\t'',\n\t\t\t\t'mpxq',\n\t\t\t\t'aw',\n\t\t\t\t'vqr',\n\t\t\t\t'moum',\n\t\t\t\t'vmiwxxaiqq',\n\t\t\t\t'dxycqdgorosf',\n\t\t\t]\n\t\t);\n\t});\n});\n\nfunction getRandomInt(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomString(minLength: number, maxLength: number): string {\n\tconst length = getRandomInt(minLength, maxLength);\n\tlet r = '';\n\tfor (let i = 0; i < length; i++) {\n\t\tr += String.fromCharCode(getRandomInt(CharCode.a, CharCode.z));\n\t}\n\treturn r;\n}\n\nfunction generateFile(small: boolean): string {\n\tconst lineCount = getRandomInt(1, small ? 3 : 10);\n\tconst lines: string[] = [];\n\tfor (let i = 0; i < lineCount; i++) {\n\t\tlines.push(getRandomString(0, small ? 3 : 10));\n\t}\n\treturn lines.join('\\n');\n}\n\nfunction generateEdits(content: string): ITestModelEdit[] {\n\n\tconst result: ITestModelEdit[] = [];\n\tlet cnt = getRandomInt(1, 5);\n\n\tlet maxOffset = content.length;\n\n\twhile (cnt > 0 && maxOffset > 0) {\n\n\t\tconst offset = getRandomInt(0, maxOffset);\n\t\tconst length = getRandomInt(0, maxOffset - offset);\n\t\tconst text = generateFile(true);\n\n\t\tresult.push({\n\t\t\toffset: offset,\n\t\t\tlength: length,\n\t\t\ttext: text\n\t\t});\n\n\t\tmaxOffset = offset;\n\t\tcnt--;\n\t}\n\n\tresult.reverse();\n\n\treturn result;\n}\n\ninterface ITestModelEdit {\n\toffset: number;\n\tlength: number;\n\ttext: string;\n}\n\nclass TestModel {\n\n\tpublic initialContent: string;\n\tpublic resultingContent: string;\n\tpublic edits: ISingleEditOperation[];\n\n\tprivate static _generateOffsetToPosition(content: string): Position[] {\n\t\tconst result: Position[] = [];\n\t\tlet lineNumber = 1;\n\t\tlet column = 1;\n\n\t\tfor (let offset = 0, len = content.length; offset <= len; offset++) {\n\t\t\tconst ch = content.charAt(offset);\n\n\t\t\tresult[offset] = new Position(lineNumber, column);\n\n\t\t\tif (ch === '\\n') {\n\t\t\t\tlineNumber++;\n\t\t\t\tcolumn = 1;\n\t\t\t} else {\n\t\t\t\tcolumn++;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tconstructor() {\n\t\tthis.initialContent = generateFile(false);\n\n\t\tconst edits = generateEdits(this.initialContent);\n\n\t\tconst offsetToPosition = TestModel._generateOffsetToPosition(this.initialContent);\n\t\tthis.edits = [];\n\t\tfor (const edit of edits) {\n\t\t\tconst startPosition = offsetToPosition[edit.offset];\n\t\t\tconst endPosition = offsetToPosition[edit.offset + edit.length];\n\t\t\tthis.edits.push({\n\t\t\t\trange: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n\t\t\t\ttext: edit.text\n\t\t\t});\n\t\t}\n\n\t\tthis.resultingContent = this.initialContent;\n\t\tfor (let i = edits.length - 1; i >= 0; i--) {\n\t\t\tthis.resultingContent = (\n\t\t\t\tthis.resultingContent.substring(0, edits[i].offset) +\n\t\t\t\tedits[i].text +\n\t\t\t\tthis.resultingContent.substring(edits[i].offset + edits[i].length)\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic print(): string {\n\t\tlet r: string[] = [];\n\t\tr.push('testApplyEditsWithSyncedModels(');\n\t\tr.push('\\t[');\n\t\tconst initialLines = this.initialContent.split('\\n');\n\t\tr = r.concat(initialLines.map((i) => `\\t\\t'${i}',`));\n\t\tr.push('\\t],');\n\t\tr.push('\\t[');\n\t\tr = r.concat(this.edits.map((i) => {\n\t\t\tconst text = `['` + i.text!.split('\\n').join(`', '`) + `']`;\n\t\t\treturn `\\t\\teditOp(${i.range.startLineNumber}, ${i.range.startColumn}, ${i.range.endLineNumber}, ${i.range.endColumn}, ${text}),`;\n\t\t}));\n\t\tr.push('\\t],');\n\t\tr.push('\\t[');\n\t\tconst resultLines = this.resultingContent.split('\\n');\n\t\tr = r.concat(resultLines.map((i) => `\\t\\t'${i}',`));\n\t\tr.push('\\t]');\n\t\tr.push(');');\n\n\t\treturn r.join('\\n');\n\t}\n}\n\nif (GENERATE_TESTS) {\n\tlet number = 1;\n\twhile (true) {\n\n\t\tconsole.log('------BEGIN NEW TEST: ' + number);\n\n\t\tconst testModel = new TestModel();\n\n\t\t// console.log(testModel.print());\n\n\t\tconsole.log('------END NEW TEST: ' + (number++));\n\n\t\ttry {\n\t\t\ttestApplyEditsWithSyncedModels(\n\t\t\t\ttestModel.initialContent.split('\\n'),\n\t\t\t\ttestModel.edits,\n\t\t\t\ttestModel.resultingContent.split('\\n')\n\t\t\t);\n\t\t\t// throw new Error('a');\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tconsole.log(testModel.print());\n\t\t\tbreak;\n\t\t}\n\n\t\t// break;\n\t}\n\n}\n"],
  "mappings": "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",
  "names": []
}
