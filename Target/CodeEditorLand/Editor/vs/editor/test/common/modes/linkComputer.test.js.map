{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/test/common/modes/linkComputer.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ILink } from '../../../common/languages.js';\nimport { ILinkComputerTarget, computeLinks } from '../../../common/languages/linkComputer.js';\n\nclass SimpleLinkComputerTarget implements ILinkComputerTarget {\n\n\tconstructor(private _lines: string[]) {\n\t\t// Intentional Empty\n\t}\n\n\tpublic getLineCount(): number {\n\t\treturn this._lines.length;\n\t}\n\n\tpublic getLineContent(lineNumber: number): string {\n\t\treturn this._lines[lineNumber - 1];\n\t}\n}\n\nfunction myComputeLinks(lines: string[]): ILink[] {\n\tconst target = new SimpleLinkComputerTarget(lines);\n\treturn computeLinks(target);\n}\n\nfunction assertLink(text: string, extractedLink: string): void {\n\tlet startColumn = 0,\n\t\tendColumn = 0,\n\t\tchr: string,\n\t\ti = 0;\n\n\tfor (i = 0; i < extractedLink.length; i++) {\n\t\tchr = extractedLink.charAt(i);\n\t\tif (chr !== ' ' && chr !== '\\t') {\n\t\t\tstartColumn = i + 1;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tfor (i = extractedLink.length - 1; i >= 0; i--) {\n\t\tchr = extractedLink.charAt(i);\n\t\tif (chr !== ' ' && chr !== '\\t') {\n\t\t\tendColumn = i + 2;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst r = myComputeLinks([text]);\n\tassert.deepStrictEqual(r, [{\n\t\trange: {\n\t\t\tstartLineNumber: 1,\n\t\t\tstartColumn: startColumn,\n\t\t\tendLineNumber: 1,\n\t\t\tendColumn: endColumn\n\t\t},\n\t\turl: extractedLink.substring(startColumn - 1, endColumn - 1)\n\t}]);\n}\n\nsuite('Editor Modes - Link Computer', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Null model', () => {\n\t\tconst r = computeLinks(null);\n\t\tassert.deepStrictEqual(r, []);\n\t});\n\n\ttest('Parsing', () => {\n\n\t\tassertLink(\n\t\t\t'x = \"http://foo.bar\";',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = (http://foo.bar);',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = [http://foo.bar];',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = \\'http://foo.bar\\';',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x =  http://foo.bar ;',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = <http://foo.bar>;',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = {http://foo.bar};',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'(see http://foo.bar)',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'[see http://foo.bar]',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'{see http://foo.bar}',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'<see http://foo.bar>',\n\t\t\t'     http://foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'<url>http://mylink.com</url>',\n\t\t\t'     http://mylink.com      '\n\t\t);\n\t\tassertLink(\n\t\t\t'// Click here to learn more. https://go.microsoft.com/fwlink/?LinkID=513275&clcid=0x409',\n\t\t\t'                             https://go.microsoft.com/fwlink/?LinkID=513275&clcid=0x409'\n\t\t);\n\t\tassertLink(\n\t\t\t'// Click here to learn more. https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx',\n\t\t\t'                             https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx'\n\t\t);\n\t\tassertLink(\n\t\t\t'// https://github.com/projectkudu/kudu/blob/master/Kudu.Core/Scripts/selectNodeVersion.js',\n\t\t\t'   https://github.com/projectkudu/kudu/blob/master/Kudu.Core/Scripts/selectNodeVersion.js'\n\t\t);\n\t\tassertLink(\n\t\t\t'<!-- !!! Do not remove !!!   WebContentRef(link:https://go.microsoft.com/fwlink/?LinkId=166007, area:Admin, updated:2015, nextUpdate:2016, tags:SqlServer)   !!! Do not remove !!! -->',\n\t\t\t'                                                https://go.microsoft.com/fwlink/?LinkId=166007                                                                                        '\n\t\t);\n\t\tassertLink(\n\t\t\t'For instructions, see https://go.microsoft.com/fwlink/?LinkId=166007.</value>',\n\t\t\t'                      https://go.microsoft.com/fwlink/?LinkId=166007         '\n\t\t);\n\t\tassertLink(\n\t\t\t'For instructions, see https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx.</value>',\n\t\t\t'                      https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx         '\n\t\t);\n\t\tassertLink(\n\t\t\t'x = \"https://en.wikipedia.org/wiki/Z\u00FCrich\";',\n\t\t\t'     https://en.wikipedia.org/wiki/Z\u00FCrich  '\n\t\t);\n\t\tassertLink(\n\t\t\t'\u8ACB\u53C3\u95B1 http://go.microsoft.com/fwlink/?LinkId=761051\u3002',\n\t\t\t'    http://go.microsoft.com/fwlink/?LinkId=761051 '\n\t\t);\n\t\tassertLink(\n\t\t\t'\uFF08\u8ACB\u53C3\u95B1 http://go.microsoft.com/fwlink/?LinkId=761051\uFF09',\n\t\t\t'     http://go.microsoft.com/fwlink/?LinkId=761051 '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = \"file:///foo.bar\";',\n\t\t\t'     file:///foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'x = \"file://c:/foo.bar\";',\n\t\t\t'     file://c:/foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = \"file://shares/foo.bar\";',\n\t\t\t'     file://shares/foo.bar  '\n\t\t);\n\n\t\tassertLink(\n\t\t\t'x = \"file://sh\u00E4res/foo.bar\";',\n\t\t\t'     file://sh\u00E4res/foo.bar  '\n\t\t);\n\t\tassertLink(\n\t\t\t'Some text, then http://www.bing.com.',\n\t\t\t'                http://www.bing.com '\n\t\t);\n\t\tassertLink(\n\t\t\t'let url = `http://***/_api/web/lists/GetByTitle(\\'Teambuildingaanvragen\\')/items`;',\n\t\t\t'           http://***/_api/web/lists/GetByTitle(\\'Teambuildingaanvragen\\')/items  '\n\t\t);\n\t});\n\n\ttest('issue #7855', () => {\n\t\tassertLink(\n\t\t\t'7. At this point, ServiceMain has been called.  There is no functionality presently in ServiceMain, but you can consult the [MSDN documentation](https://msdn.microsoft.com/en-us/library/windows/desktop/ms687414(v=vs.85).aspx) to add functionality as desired!',\n\t\t\t'                                                                                                                                                 https://msdn.microsoft.com/en-us/library/windows/desktop/ms687414(v=vs.85).aspx                                  '\n\t\t);\n\t});\n\n\ttest('issue #62278: \"Ctrl + click to follow link\" for IPv6 URLs', () => {\n\t\tassertLink(\n\t\t\t'let x = \"http://[::1]:5000/connect/token\"',\n\t\t\t'         http://[::1]:5000/connect/token  '\n\t\t);\n\t});\n\n\ttest('issue #70254: bold links dont open in markdown file using editor mode with ctrl + click', () => {\n\t\tassertLink(\n\t\t\t'2. Navigate to **https://portal.azure.com**',\n\t\t\t'                 https://portal.azure.com  '\n\t\t);\n\t});\n\n\ttest('issue #86358: URL wrong recognition pattern', () => {\n\t\tassertLink(\n\t\t\t'POST|https://portal.azure.com|2019-12-05|',\n\t\t\t'     https://portal.azure.com            '\n\t\t);\n\t});\n\n\ttest('issue #67022: Space as end of hyperlink isn\\'t always good idea', () => {\n\t\tassertLink(\n\t\t\t'aa  https://foo.bar/[this is foo site]  aa',\n\t\t\t'    https://foo.bar/[this is foo site]    '\n\t\t);\n\t});\n\n\ttest('issue #100353: Link detection stops at \uFF06(double-byte)', () => {\n\t\tassertLink(\n\t\t\t'aa  http://tree-mark.chips.jp/\u30EC\u30FC\u30BA\u30F3\uFF06\u30D9\u30EA\u30FC\u30DF\u30C3\u30AF\u30B9  aa',\n\t\t\t'    http://tree-mark.chips.jp/\u30EC\u30FC\u30BA\u30F3\uFF06\u30D9\u30EA\u30FC\u30DF\u30C3\u30AF\u30B9    '\n\t\t);\n\t});\n\n\ttest('issue #121438: Link detection stops at\u3010...\u3011', () => {\n\t\tassertLink(\n\t\t\t'aa  https://zh.wikipedia.org/wiki/\u3010\u6211\u63A8\u7684\u5B69\u5B50\u3011 aa',\n\t\t\t'    https://zh.wikipedia.org/wiki/\u3010\u6211\u63A8\u7684\u5B69\u5B50\u3011   '\n\t\t);\n\t});\n\n\ttest('issue #121438: Link detection stops at\u300A...\u300B', () => {\n\t\tassertLink(\n\t\t\t'aa  https://zh.wikipedia.org/wiki/\u300A\u65B0\u9752\u5E74\u300B\u7F16\u8F91\u90E8\u65E7\u5740 aa',\n\t\t\t'    https://zh.wikipedia.org/wiki/\u300A\u65B0\u9752\u5E74\u300B\u7F16\u8F91\u90E8\u65E7\u5740   '\n\t\t);\n\t});\n\n\ttest('issue #121438: Link detection stops at \u201C...\u201D', () => {\n\t\tassertLink(\n\t\t\t'aa  https://zh.wikipedia.org/wiki/\u201C\u5E38\u51EF\u7533\u201D\u8BEF\u8BD1\u4E8B\u4EF6 aa',\n\t\t\t'    https://zh.wikipedia.org/wiki/\u201C\u5E38\u51EF\u7533\u201D\u8BEF\u8BD1\u4E8B\u4EF6   '\n\t\t);\n\t});\n\n\ttest('issue #150905: Colon after bare hyperlink is treated as its part', () => {\n\t\tassertLink(\n\t\t\t'https://site.web/page.html: blah blah blah',\n\t\t\t'https://site.web/page.html                '\n\t\t);\n\t});\n\n\t// Removed because of #156875\n\t// test('issue #151631: Link parsing stoped where comments include a single quote ', () => {\n\t// \tassertLink(\n\t// \t\t`aa https://regexper.com/#%2F''%2F aa`,\n\t// \t\t`   https://regexper.com/#%2F''%2F   `,\n\t// \t);\n\t// });\n\n\ttest('issue #156875: Links include quotes ', () => {\n\t\tassertLink(\n\t\t\t`\"This file has been converted from https://github.com/jeff-hykin/better-c-syntax/blob/master/autogenerated/c.tmLanguage.json\",`,\n\t\t\t`                                   https://github.com/jeff-hykin/better-c-syntax/blob/master/autogenerated/c.tmLanguage.json  `,\n\t\t);\n\t});\n});\n"],
  "mappings": ";;AAIA,OAAO,YAAY;AACnB,SAAS,+CAA+C;AACxD,SAAS,aAAa;AACtB,SAAS,qBAAqB,oBAAoB;AAElD,MAAM,yBAAwD;AAAA,EAE7D,YAAoB,QAAkB;AAAlB;AAAA,EAEpB;AAAA,EAbD,OAS8D;AAAA;AAAA;AAAA,EAMtD,eAAuB;AAC7B,WAAO,KAAK,OAAO;AAAA,EACpB;AAAA,EAEO,eAAe,YAA4B;AACjD,WAAO,KAAK,OAAO,aAAa,CAAC;AAAA,EAClC;AACD;AAEA,SAAS,eAAe,OAA0B;AACjD,QAAM,SAAS,IAAI,yBAAyB,KAAK;AACjD,SAAO,aAAa,MAAM;AAC3B;AAHS;AAKT,SAAS,WAAW,MAAc,eAA6B;AAC9D,MAAI,cAAc,GACjB,YAAY,GACZ,KACA,IAAI;AAEL,OAAK,IAAI,GAAG,IAAI,cAAc,QAAQ,KAAK;AAC1C,UAAM,cAAc,OAAO,CAAC;AAC5B,QAAI,QAAQ,OAAO,QAAQ,KAAM;AAChC,oBAAc,IAAI;AAClB;AAAA,IACD;AAAA,EACD;AAEA,OAAK,IAAI,cAAc,SAAS,GAAG,KAAK,GAAG,KAAK;AAC/C,UAAM,cAAc,OAAO,CAAC;AAC5B,QAAI,QAAQ,OAAO,QAAQ,KAAM;AAChC,kBAAY,IAAI;AAChB;AAAA,IACD;AAAA,EACD;AAEA,QAAM,IAAI,eAAe,CAAC,IAAI,CAAC;AAC/B,SAAO,gBAAgB,GAAG,CAAC;AAAA,IAC1B,OAAO;AAAA,MACN,iBAAiB;AAAA,MACjB;AAAA,MACA,eAAe;AAAA,MACf;AAAA,IACD;AAAA,IACA,KAAK,cAAc,UAAU,cAAc,GAAG,YAAY,CAAC;AAAA,EAC5D,CAAC,CAAC;AACH;AAhCS;AAkCT,MAAM,gCAAgC,MAAM;AAE3C,0CAAwC;AAExC,OAAK,cAAc,MAAM;AACxB,UAAM,IAAI,aAAa,IAAI;AAC3B,WAAO,gBAAgB,GAAG,CAAC,CAAC;AAAA,EAC7B,CAAC;AAED,OAAK,WAAW,MAAM;AAErB;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAEA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AACA;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,eAAe,MAAM;AACzB;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,6DAA6D,MAAM;AACvE;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,2FAA2F,MAAM;AACrG;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,+CAA+C,MAAM;AACzD;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,kEAAmE,MAAM;AAC7E;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,8DAAyD,MAAM;AACnE;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,yDAA+C,MAAM;AACzD;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,yDAA+C,MAAM;AACzD;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,0DAAgD,MAAM;AAC1D;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAED,OAAK,oEAAoE,MAAM;AAC9E;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AAUD,OAAK,wCAAwC,MAAM;AAClD;AAAA,MACC;AAAA,MACA;AAAA,IACD;AAAA,EACD,CAAC;AACF,CAAC;",
  "names": []
}
