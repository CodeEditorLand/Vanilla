{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/editor/test/browser/services/decorationRenderOptions.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as platform from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { IDecorationRenderOptions } from '../../../common/editorCommon.js';\nimport { TestCodeEditorService, TestGlobalStyleSheet } from '../editorTestServices.js';\nimport { TestColorTheme, TestThemeService } from '../../../../platform/theme/test/common/testThemeService.js';\n\nsuite('Decoration Render Options', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst themeServiceMock = new TestThemeService();\n\n\tconst options: IDecorationRenderOptions = {\n\t\tgutterIconPath: URI.parse('https://github.com/microsoft/vscode/blob/main/resources/linux/code.png'),\n\t\tgutterIconSize: 'contain',\n\t\tbackgroundColor: 'red',\n\t\tborderColor: 'yellow'\n\t};\n\ttest('register and resolve decoration type', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tstore.add(s.registerDecorationType('test', 'example', options));\n\t\tassert.notStrictEqual(s.resolveDecorationOptions('example', false), undefined);\n\t});\n\ttest('remove decoration type', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tassert.notStrictEqual(s.resolveDecorationOptions('example', false), undefined);\n\t\ts.removeDecorationType('example');\n\t\tassert.throws(() => s.resolveDecorationOptions('example', false));\n\t});\n\n\tfunction readStyleSheet(styleSheet: TestGlobalStyleSheet): string {\n\t\treturn styleSheet.read();\n\t}\n\n\ttest('css properties', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\tstore.add(s.registerDecorationType('test', 'example', options));\n\t\tconst sheet = readStyleSheet(styleSheet);\n\t\tassert(sheet.indexOf(`{background:url('https://github.com/microsoft/vscode/blob/main/resources/linux/code.png') center center no-repeat;background-size:contain;}`) >= 0);\n\t\tassert(sheet.indexOf(`{background-color:red;border-color:yellow;box-sizing: border-box;}`) >= 0);\n\t});\n\n\ttest('theme color', () => {\n\t\tconst options: IDecorationRenderOptions = {\n\t\t\tbackgroundColor: { id: 'editorBackground' },\n\t\t\tborderColor: { id: 'editorBorder' },\n\t\t};\n\n\t\tconst themeService = new TestThemeService(new TestColorTheme({\n\t\t\teditorBackground: '#FF0000'\n\t\t}));\n\t\tconst s = store.add(new TestCodeEditorService(themeService));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '.monaco-editor .ced-example-0 {background-color:#ff0000;border-color:transparent;box-sizing: border-box;}');\n\n\t\tthemeService.setTheme(new TestColorTheme({\n\t\t\teditorBackground: '#EE0000',\n\t\t\teditorBorder: '#00FFFF'\n\t\t}));\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '.monaco-editor .ced-example-0 {background-color:#ee0000;border-color:#00ffff;box-sizing: border-box;}');\n\n\t\ts.removeDecorationType('example');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '');\n\t});\n\n\ttest('theme overrides', () => {\n\t\tconst options: IDecorationRenderOptions = {\n\t\t\tcolor: { id: 'editorBackground' },\n\t\t\tlight: {\n\t\t\t\tcolor: '#FF00FF'\n\t\t\t},\n\t\t\tdark: {\n\t\t\t\tcolor: '#000000',\n\t\t\t\tafter: {\n\t\t\t\t\tcolor: { id: 'infoForeground' }\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst themeService = new TestThemeService(new TestColorTheme({\n\t\t\teditorBackground: '#FF0000',\n\t\t\tinfoForeground: '#444444'\n\t\t}));\n\t\tconst s = store.add(new TestCodeEditorService(themeService));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tconst expected = [\n\t\t\t'.vs-dark.monaco-editor .ced-example-4::after, .hc-black.monaco-editor .ced-example-4::after {color:#444444 !important;}',\n\t\t\t'.vs-dark.monaco-editor .ced-example-1, .hc-black.monaco-editor .ced-example-1 {color:#000000 !important;}',\n\t\t\t'.vs.monaco-editor .ced-example-1, .hc-light.monaco-editor .ced-example-1 {color:#FF00FF !important;}',\n\t\t\t'.monaco-editor .ced-example-1 {color:#ff0000 !important;}'\n\t\t].join('\\n');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), expected);\n\n\t\ts.removeDecorationType('example');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '');\n\t});\n\n\ttest('css properties, gutterIconPaths', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tconst styleSheet = s.globalStyleSheet;\n\n\t\t// URI, only minimal encoding\n\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.parse('data:image/svg+xml;base64,PHN2ZyB4b+') });\n\t\tassert(readStyleSheet(styleSheet).indexOf(`{background:url('data:image/svg+xml;base64,PHN2ZyB4b+') center center no-repeat;}`) > 0);\n\t\ts.removeDecorationType('example');\n\n\t\tfunction assertBackground(url1: string, url2: string) {\n\t\t\tconst actual = readStyleSheet(styleSheet);\n\t\t\tassert(\n\t\t\t\tactual.indexOf(`{background:url('${url1}') center center no-repeat;}`) > 0\n\t\t\t\t|| actual.indexOf(`{background:url('${url2}') center center no-repeat;}`) > 0\n\t\t\t);\n\t\t}\n\n\t\tif (platform.isWindows) {\n\t\t\t// windows file path (used as string)\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('c:\\\\files\\\\miles\\\\more.png') });\n\t\t\tassertBackground('file:///c:/files/miles/more.png', 'vscode-file://vscode-app/c:/files/miles/more.png');\n\t\t\ts.removeDecorationType('example');\n\n\t\t\t// single quote must always be escaped/encoded\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('c:\\\\files\\\\foo\\\\b\\'ar.png') });\n\t\t\tassertBackground('file:///c:/files/foo/b%27ar.png', 'vscode-file://vscode-app/c:/files/foo/b%27ar.png');\n\t\t\ts.removeDecorationType('example');\n\t\t} else {\n\t\t\t// unix file path (used as string)\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('/Users/foo/bar.png') });\n\t\t\tassertBackground('file:///Users/foo/bar.png', 'vscode-file://vscode-app/Users/foo/bar.png');\n\t\t\ts.removeDecorationType('example');\n\n\t\t\t// single quote must always be escaped/encoded\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('/Users/foo/b\\'ar.png') });\n\t\t\tassertBackground('file:///Users/foo/b%27ar.png', 'vscode-file://vscode-app/Users/foo/b%27ar.png');\n\t\t\ts.removeDecorationType('example');\n\t\t}\n\n\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.parse('http://test/pa\\'th') });\n\t\tassert(readStyleSheet(styleSheet).indexOf(`{background:url('http://test/pa%27th') center center no-repeat;}`) > 0);\n\t\ts.removeDecorationType('example');\n\t});\n});\n"],
  "mappings": "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",
  "names": ["options"]
}
