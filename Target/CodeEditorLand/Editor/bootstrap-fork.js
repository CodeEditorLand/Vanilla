import*as h from"./bootstrap-amd.js";import*as a from"./bootstrap-node.js";import*as S from"./vs/base/common/performance.js";S.mark("code/fork/start"),A(),a.removeGlobalNodeJsModuleLookupPaths(),a.enableASARSupport(),process.env.VSCODE_DEV_INJECT_NODE_MODULE_LOOKUP_PATH&&a.devInjectNodeModuleLookupPath(process.env.VSCODE_DEV_INJECT_NODE_MODULE_LOOKUP_PATH),process.send&&process.env.VSCODE_PIPE_LOGGING==="true"&&P(),process.env.VSCODE_HANDLES_UNCAUGHT_ERRORS||R(),process.env.VSCODE_PARENT_PID&&m(),h.load(process.env.VSCODE_AMD_ENTRYPOINT);function P(){function u(e){const s=[],c=[];if(e.length)for(let t=0;t<e.length;t++){let r=e[t];if(typeof r>"u")r="undefined";else if(r instanceof Error){const o=r;o.stack?r=o.stack:r=o.toString()}c.push(r)}try{const t=JSON.stringify(c,(r,o)=>{if(d(o)||Array.isArray(o)){if(s.indexOf(o)!==-1)return"[Circular]";s.push(o)}return o});return t.length>1e5?"Output omitted for a large object that exceeds the limits":t}catch(t){return`Output omitted for an object that cannot be inspected ('${t.toString()}')`}}function _(e){try{process.send&&process.send(e)}catch{}}function d(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function O(e,s){_({type:"__$console",severity:e,arguments:s})}function i(e,s){Object.defineProperty(console,e,{set:()=>{},get:()=>()=>{O(s,u(arguments))}})}function f(e,s){const c=process[e],t=c.write;let r="";Object.defineProperty(c,"write",{set:()=>{},get:()=>(o,l,g)=>{r+=o.toString(l);const E=r.length>1048576?r.length:r.lastIndexOf(`
`);E!==-1&&(r=r.slice(E+1)),t.call(c,o,l,g)}})}process.env.VSCODE_VERBOSE_LOGGING==="true"?(i("info","log"),i("log","log"),i("warn","warn"),i("error","error")):(console.log=()=>{},console.warn=()=>{},console.info=()=>{},i("error","error")),f("stderr","error"),f("stdout","log")}function R(){process.on("uncaughtException",n=>{}),process.on("unhandledRejection",n=>{})}function m(){const n=Number(process.env.VSCODE_PARENT_PID);typeof n=="number"&&!isNaN(n)&&setInterval(()=>{try{process.kill(n,0)}catch{process.exit()}},5e3)}function A(){const n=process.env.VSCODE_CRASH_REPORTER_PROCESS_TYPE;if(n)try{process.crashReporter&&typeof process.crashReporter.addExtraParameter=="function"&&process.crashReporter.addExtraParameter("processType",n)}catch{}}
